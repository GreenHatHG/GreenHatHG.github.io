<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>å³ä½¿ç¡äº†7.5ä¸ªå°æ—¶ï¼Œæˆ‘ä»ç„¶æ„Ÿè§‰ä¸åˆ°ç²¾åŠ›å……æ²›</title>
      <link href="/2021/10/16/%E5%8D%B3%E4%BD%BF%E7%9D%A1%E4%BA%867.5%E4%B8%AA%E5%B0%8F%E6%97%B6%EF%BC%8C%E6%88%91%E4%BB%8D%E7%84%B6%E6%84%9F%E8%A7%89%E4%B8%8D%E5%88%B0%E7%B2%BE%E5%8A%9B%E5%85%85%E6%B2%9B/"/>
      <url>/2021/10/16/%E5%8D%B3%E4%BD%BF%E7%9D%A1%E4%BA%867.5%E4%B8%AA%E5%B0%8F%E6%97%B6%EF%BC%8C%E6%88%91%E4%BB%8D%E7%84%B6%E6%84%9F%E8%A7%89%E4%B8%8D%E5%88%B0%E7%B2%BE%E5%8A%9B%E5%85%85%E6%B2%9B/</url>
      
        <content type="html"><![CDATA[<p>ç¿»è¯‘è‡ªã€ŠI Wasnâ€™t Feeling Refreshed Even After 7.5 Hours of Sleep. Hereâ€™s How I Fixed It | by Samir S. | In Fitness And In Health | Mediumã€‹</p><span id="more"></span><blockquote><p><a href="https://medium.com/in-fitness-and-in-health/i-wasnt-feeling-refreshed-even-after-7-5-hours-of-sleep-here-s-how-i-fixed-it-f785a51fec15">https://medium.com/in-fitness-and-in-health/i-wasnt-feeling-refreshed-even-after-7-5-hours-of-sleep-here-s-how-i-fixed-it-f785a51fec15</a></p></blockquote><p>Getting enough sleep is perhaps one of the most important things we can do for our health and body. Sleep is a chance for the body to repair itself and to reenergize.</p><p>å……è¶³çš„ç¡çœ å¯èƒ½æ˜¯æˆ‘ä»¬èƒ½ä¸ºæˆ‘ä»¬çš„å¥åº·å’Œèº«ä½“åšçš„æœ€é‡è¦çš„äº‹æƒ…ä¹‹ä¸€ã€‚ç¡çœ æ˜¯èº«ä½“è‡ªæˆ‘ä¿®å¤å’Œé‡æ–°è·å¾—èƒ½é‡çš„æœºä¼šã€‚</p><p>Ever since I read the book â€œ<em><a href="https://www.amazon.com/Why-We-Sleep-Unlocking-Dreams/dp/1501144324/ref=tmm_pap_swatch_0?_encoding=UTF8&amp;qid=1613271789&amp;sr=8-1">Why We Sleep</a>â€</em> by Matthew Walker (not an affiliate link), I became more aware of how sleep virtually impacts every cell in our body and how not getting consistent and adequate high-quality sleep can severely impact our body.</p><p>è‡ªä»æˆ‘è¯»äº†é©¬ä¿®Â·æ²ƒå…‹ï¼ˆMatthew Walkerï¼‰çš„ã€Šä¸ºä»€ä¹ˆæˆ‘ä»¬ç¡è§‰ã€‹ï¼ˆä¸æ˜¯é™„å±é“¾æ¥ï¼‰ä¸€ä¹¦åï¼Œæˆ‘å°±æ›´åŠ æ„è¯†åˆ°ç¡çœ å®é™…ä¸Šæ˜¯å¦‚ä½•å½±å“æˆ‘ä»¬èº«ä½“çš„æ¯ä¸€ä¸ªç»†èƒçš„ï¼Œä»¥åŠæ²¡æœ‰æŒç»­å’Œå……è¶³çš„é«˜è´¨é‡ç¡çœ æ˜¯å¦‚ä½•ä¸¥é‡å½±å“æˆ‘ä»¬çš„èº«ä½“çš„ã€‚</p><p>I made a promise to myself that I would try to get at least 7 hours of sleep if not more every single night to increase my productivity, effectiveness, and to overall feel more refreshed.</p><p>æˆ‘å¯¹è‡ªå·±æ‰¿è¯ºï¼Œå¦‚æœæ¯æ™šç¡çœ æ—¶é—´ä¸å¢åŠ çš„è¯ï¼Œè‡³å°‘è¦ä¿è¯7ä¸ªå°æ—¶çš„ç¡çœ ï¼Œä»¥æé«˜æˆ‘çš„å·¥ä½œæ•ˆç‡å’Œæ•ˆç‡ï¼Œå¹¶ä¸”è®©æˆ‘æ•´ä½“æ„Ÿè§‰æ›´åŠ ç²¾ç¥ç„•å‘ã€‚</p><p>I would go to bed at around 11 PM and a 7-hour sleeping time equates to a 6 AM wakeup time. Even though 7 hours is a good amount of night rest, I wasnâ€™t feeling refreshed and full of energy when I would wake up at 6 AM. This slump in energy and grogginess would last the whole day and I was feeling extremely sleepy at around 4 PM.</p><p>æˆ‘ä¼šåœ¨æ™šä¸Š11ç‚¹å·¦å³ä¸ŠåºŠç¡è§‰ï¼Œ7å°æ—¶çš„ç¡çœ æ—¶é—´ç›¸å½“äºæ—©ä¸Š6ç‚¹èµ·åºŠçš„æ—¶é—´ã€‚å°½ç®¡7å°æ—¶æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¤œé—´ä¼‘æ¯æ—¶é—´ï¼Œä½†æ˜¯å½“æˆ‘æ—©ä¸Š6ç‚¹é†’æ¥æ—¶ï¼Œæˆ‘å¹¶æ²¡æœ‰æ„Ÿåˆ°ç²¾ç¥æŒ¯å¥‹å’Œå……æ»¡æ´»åŠ›ã€‚è¿™ç§ç²¾åŠ›ä¸‹é™å’Œæ˜æ˜æ²‰æ²‰çš„æ„Ÿè§‰ä¼šæŒç»­ä¸€æ•´å¤©ï¼Œæˆ‘åœ¨ä¸‹åˆ4ç‚¹å·¦å³æ„Ÿåˆ°æåº¦å›°å€¦ã€‚</p><p>I then considered increasing the 7 hours to 7.5 hours which I felt would be enough and it was. For the first week after I increased my sleeping time to 7.5 hours, I felt consistently refreshed and full of energy. I would feel a bit tired at around 4 PM but not by a lot and at night, I was getting good and restful sleep.</p><p>ç„¶åæˆ‘è€ƒè™‘æŠŠ7ä¸ªå°æ—¶å¢åŠ åˆ°7.5ä¸ªå°æ—¶ï¼Œæˆ‘è§‰å¾—è¿™æ ·å°±è¶³å¤Ÿäº†ã€‚åœ¨æˆ‘æŠŠç¡çœ æ—¶é—´å¢åŠ åˆ°7.5å°æ—¶åçš„ç¬¬ä¸€ä¸ªæ˜ŸæœŸï¼Œæˆ‘æ„Ÿåˆ°ç²¾ç¥æŒ¯å¥‹ï¼Œç²¾åŠ›å……æ²›ã€‚ä¸‹åˆ4ç‚¹å·¦å³ï¼Œæˆ‘ä¼šæ„Ÿåˆ°æœ‰ç‚¹ç´¯ï¼Œä½†ä¸æ˜¯å¾ˆç´¯ï¼Œåˆ°äº†æ™šä¸Šï¼Œæˆ‘ç¡å¾—å¾ˆå¥½ï¼Œä¹Ÿå¾ˆæ”¾æ¾ã€‚</p><p>After about 2 weeks of sleeping for around 7.5 hours, it was as if a lightbulb in my head just turned off. 7.5 hours of sleep stopped being enough for me and in the mornings, I stopped waking up feeling full of energy.</p><p>åœ¨å¤§çº¦ä¸¤ä¸ªæ˜ŸæœŸçš„7.5å°æ—¶çš„ç¡çœ ä¹‹åï¼Œæˆ‘è„‘è¢‹é‡Œçš„ä¸€ä¸ªç”µç¯æ³¡å°±å¥½åƒåˆšåˆšç†„ç­äº†ä¸€æ ·ã€‚7.5å°æ—¶çš„ç¡çœ å¯¹æˆ‘æ¥è¯´å·²ç»ä¸å¤Ÿç”¨äº†ï¼Œåˆ°äº†æ—©ä¸Šï¼Œæˆ‘é†’æ¥æ—¶ä¹Ÿä¸å†æ„Ÿåˆ°ç²¾åŠ›å……æ²›ã€‚</p><p>Instead throughout the night when I was sleeping, I would constantly wake up 7 or 8 times. Not everyone sleeps through the night and instead many people get up at random points at night and then go back to sleep. However in my case, when I would wake up at night, it would take me a solid 10 minutes to go back to sleep again. As soon as I would fall asleep, half an hour later I would wake up again.</p><p>å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œå½“æˆ‘æ•´æ™šéƒ½åœ¨ç¡è§‰çš„æ—¶å€™ï¼Œæˆ‘ä¼šä¸æ–­åœ°é†’æ¥ä¸ƒå…«æ¬¡ã€‚å¹¶ä¸æ˜¯æ¯ä¸ªäººéƒ½ä¼šæ•´å¤œç¡è§‰ï¼Œç›¸åï¼Œè®¸å¤šäººä¼šåœ¨æ™šä¸Šéšæœºèµ·åºŠï¼Œç„¶åå†ç»§ç»­ç¡è§‰ã€‚ç„¶è€Œï¼Œå°±æˆ‘çš„æƒ…å†µè€Œè¨€ï¼Œå½“æˆ‘æ™šä¸Šé†’æ¥æ—¶ï¼Œæˆ‘éœ€è¦æ•´æ•´10åˆ†é’Ÿæ‰èƒ½å†æ¬¡å…¥ç¡ã€‚æˆ‘ä¸€ç¡ç€ï¼ŒåŠä¸ªå°æ—¶ååˆä¼šé†’è¿‡æ¥ã€‚</p><p>This periodic wakening for 7 or 8 times is perhaps what was causing me to feel tired and not enough refreshed even after 7.5 hours of sleep each night.</p><p>è¿™ç§å‘¨æœŸæ€§çš„7åˆ°8æ¬¡é†’æ¥å¯èƒ½æ˜¯å¯¼è‡´æˆ‘æ„Ÿåˆ°ç–²åŠ³çš„åŸå› ï¼Œå³ä½¿æ¯æ™šç¡7.5ä¸ªå°æ—¶ä¹Ÿæ²¡æœ‰è¶³å¤Ÿçš„ç²¾åŠ›ã€‚</p><p>This had never happened to me before and I was genuinely concerned what was causing this. This cycle continued for another 4 days until I decided that I should again increase my sleeping time to 8 hours. In that case even if I wake up through the night, an extra 30 minutes of sleep could probably help me regain that little bit of lost sleep.</p><p>è¿™åœ¨æˆ‘èº«ä¸Šä»æ¥æ²¡æœ‰å‘ç”Ÿè¿‡ï¼Œæˆ‘çœŸçš„å¾ˆå…³å¿ƒæ˜¯ä»€ä¹ˆå¯¼è‡´äº†è¿™ä¸€åˆ‡ã€‚è¿™ä¸ªå¾ªç¯åˆæŒç»­äº†4å¤©ï¼Œç›´åˆ°æˆ‘å†³å®šå†æ¬¡å°†ç¡çœ æ—¶é—´å¢åŠ åˆ°8å°æ—¶ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå³ä½¿æˆ‘æ•´æ™šé†’æ¥ï¼Œå¤šç¡30åˆ†é’Ÿä¹Ÿå¯èƒ½å¸®åŠ©æˆ‘æ¢å¤å¤±å»çš„ä¸€ç‚¹ç‚¹ç¡çœ ã€‚</p><p><strong>This actually had the opposite effect.</strong></p><p>è¿™å®é™…ä¸Šäº§ç”Ÿäº†ç›¸åçš„æ•ˆæœã€‚</p><p>After sleeping for 8 hours the first night, I still wasnâ€™t feeling refreshed because I was still periodically waking up all throughout the night. I gave it a 2nd go the other night and I still got the same result.</p><p>åœ¨ç¬¬ä¸€ä¸ªæ™šä¸Šç¡äº†8ä¸ªå°æ—¶ä¹‹åï¼Œæˆ‘ä»ç„¶æ„Ÿè§‰ä¸åˆ°ç²¾ç¥æŒ¯å¥‹ï¼Œå› ä¸ºæˆ‘æ•´æ™šéƒ½è¿˜åœ¨å‘¨æœŸæ€§åœ°é†’æ¥ã€‚å‰å‡ å¤©æ™šä¸Šæˆ‘è¯•äº†ç¬¬äºŒæ¬¡ï¼Œç»“æœè¿˜æ˜¯ä¸€æ ·çš„ã€‚</p><p>Thatâ€™s when I made the decision to tackle the problem of waking up so many times at night head-on.</p><p>å°±åœ¨é‚£æ—¶ï¼Œæˆ‘å†³å®šè§£å†³æ™šä¸Šé†’æ¥è¿™ä¹ˆå¤šæ¬¡çš„é—®é¢˜ã€‚</p><p><em>This was easier said than done.</em></p><p>I first consciously reviewed my daily activities and my daily plans to see if any of those were having an impact on my sleeping routine.</p><p>æˆ‘é¦–å…ˆæœ‰æ„è¯†åœ°å›é¡¾äº†æˆ‘çš„æ—¥å¸¸æ´»åŠ¨å’Œæ—¥å¸¸è®¡åˆ’ï¼Œçœ‹çœ‹è¿™äº›æ˜¯å¦å¯¹æˆ‘çš„ç¡çœ ä¹ æƒ¯æœ‰å½±å“ã€‚</p><p><strong>Here is the list I went through:</strong></p><p>ä»¥ä¸‹æ˜¯æˆ‘åˆ—å‡ºçš„æ¸…å•:</p><ul><li><p><strong>Eating:</strong> I get a decent amount of fiber throughout the day. Some of the things that I regularly eat throughout the day are: egg, apple, orange, yogurt, milk, almonds, etc. As you can see, everything is healthy and nothing is really considered junk food. This might not be affecting my sleep.</p><p>  é¥®é£Ÿ: æˆ‘ä¸€å¤©ä¸­æ‘„å…¥äº†ç›¸å½“å¤šçš„çº¤ç»´ã€‚æˆ‘æ¯å¤©ç»å¸¸åƒçš„ä¸œè¥¿æœ‰: é¸¡è›‹ã€è‹¹æœã€æ©™å­ã€é…¸å¥¶ã€ç‰›å¥¶ã€æä»ç­‰ç­‰ã€‚æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œä¸€åˆ‡éƒ½æ˜¯å¥åº·çš„ï¼Œæ²¡æœ‰ä»€ä¹ˆæ˜¯çœŸæ­£è¢«è®¤ä¸ºæ˜¯åƒåœ¾é£Ÿå“ã€‚è¿™å¯èƒ½ä¸ä¼šå½±å“æˆ‘çš„ç¡çœ ã€‚</p></li><li><p><strong>Bed quality:</strong> I sleep in a comfortable mattress with a comfortable blanket and pillow. Lights are kept to a minimum that donâ€™t affect my eyes. This might not be affecting my sleep.</p></li><li>åºŠçš„è´¨é‡ï¼šæˆ‘ç¡åœ¨èˆ’é€‚çš„åºŠå«ä¸Šï¼Œæœ‰èˆ’é€‚çš„æ¯¯å­å’Œæ•å¤´ã€‚å…‰çº¿è¦ä¿æŒåœ¨æœ€ä½é™åº¦ï¼Œä¸ä¼šå½±å“æˆ‘çš„çœ¼ç›ã€‚è¿™å¯èƒ½ä¸ä¼šå½±å“æˆ‘çš„ç¡çœ ã€‚</li><li><strong>Daily activities:</strong> My daily activities are working on my assignments, exercising, writing articles, using my laptop and phone, etc.</li><li>æ—¥å¸¸æ´»åŠ¨ï¼šæˆ‘çš„æ—¥å¸¸æ´»åŠ¨åŒ…æ‹¬ä½œä¸šã€é”»ç‚¼ã€å†™æ–‡ç« ã€ä½¿ç”¨ç¬”è®°æœ¬ç”µè„‘å’Œæ‰‹æœºç­‰ã€‚</li></ul><p><strong>That is when I found the culprit!</strong></p><p>å°±åœ¨é‚£æ—¶æˆ‘æ‰¾åˆ°äº†ç½ªé­ç¥¸é¦–ï¼</p><p>When I was reviewing my daily activities list, I found that I had written: using laptop and phone.Since a majority of my work and assignments are done online, I use my laptop literally the whole day.</p><p>å½“æˆ‘å›é¡¾æˆ‘çš„æ—¥å¸¸æ´»åŠ¨æ¸…å•æ—¶ï¼Œæˆ‘å‘ç°æˆ‘å†™äº†: ä½¿ç”¨ç¬”è®°æœ¬ç”µè„‘å’Œæ‰‹æœºã€‚ç”±äºæˆ‘çš„å¤§éƒ¨åˆ†å·¥ä½œå’Œä½œä¸šéƒ½æ˜¯åœ¨ç½‘ä¸Šå®Œæˆçš„ï¼Œæˆ‘ä¸€æ•´å¤©éƒ½åœ¨ä½¿ç”¨æˆ‘çš„ç¬”è®°æœ¬ç”µè„‘ã€‚</p><blockquote><p>As soon as I am done eating, I use my laptop.As soon as I am done exercising, I use my laptop.As soon as I am done talking, I use my laptop.<br>æˆ‘ä¸€åƒå®Œé¥­å°±ç”¨æˆ‘çš„ç¬”è®°æœ¬ç”µè„‘ã€‚æˆ‘ä¸€åšå®Œè¿åŠ¨å°±ç”¨æˆ‘çš„ç¬”è®°æœ¬ç”µè„‘ã€‚æˆ‘ä¸€è¯´å®Œè¯å°±ç”¨æˆ‘çš„ç¬”è®°æœ¬ç”µè„‘ã€‚</p></blockquote><p>This is not just me. Due to <a href="https://www.reviewofophthalmology.com/article/electronic-device-use-in-the-time-of-covid19">COVID-19</a>, peopleâ€™s assignments and work have shifted online and with more time being spent at homes due to lockdown, people have no option but to resort to using their digital devices.</p><p>è¿™ä¸ä»…ä»…æ˜¯æˆ‘ã€‚ç”±äºæ–°å† ç—…æ¯’çš„å‡ºç°ï¼Œäººä»¬çš„ä»»åŠ¡å’Œå·¥ä½œéƒ½è½¬ç§»åˆ°äº†ç½‘ç»œä¸Šï¼Œè€Œä¸”ç”±äºå°é”ï¼Œäººä»¬åœ¨å®¶é‡ŒèŠ±çš„æ—¶é—´æ›´å¤šï¼Œäººä»¬åˆ«æ— é€‰æ‹©ï¼Œåªèƒ½ä½¿ç”¨ä»–ä»¬çš„æ•°å­—è®¾å¤‡ã€‚</p><p>Even though lockdown is being eased in many countries, some countries such as the UK are still under lockdown. People now have a habit of using their digital devices at every moment and this is the same for me.</p><p>å°½ç®¡è®¸å¤šå›½å®¶å·²ç»æ”¾æ¾äº†æˆ’ä¸¥ï¼Œä½†æ˜¯åƒè‹±å›½è¿™æ ·çš„ä¸€äº›å›½å®¶ä»ç„¶å¤„äºæˆ’ä¸¥çŠ¶æ€ã€‚äººä»¬ç°åœ¨å·²ç»ä¹ æƒ¯äºæ¯æ—¶æ¯åˆ»éƒ½ä½¿ç”¨ä»–ä»¬çš„æ•°å­—è®¾å¤‡ï¼Œè¿™å¯¹æˆ‘æ¥è¯´ä¹Ÿæ˜¯ä¸€æ ·ã€‚</p><p>In my case, I use my laptop to get my assignments and other stuff done.</p><p>å°±æˆ‘è€Œè¨€ï¼Œæˆ‘ç”¨ç¬”è®°æœ¬ç”µè„‘å®Œæˆä½œä¸šå’Œå…¶ä»–äº‹æƒ…ã€‚</p><p><strong>Now back to the story.</strong></p><p>Before going to bed at 11 PM, I saw that I would still use my phone for a good 20 minutes before going to bed. Even before then, I would still be using my laptop to squeeze in that bit of extra time to get other assignments done.</p><p>æ™šä¸Š11ç‚¹ç¡è§‰å‰ï¼Œæˆ‘å‘ç°æˆ‘ä»ç„¶ä¼šåœ¨ç¡è§‰å‰20åˆ†é’Ÿä½¿ç”¨æ‰‹æœºã€‚ç”šè‡³åœ¨é‚£ä¹‹å‰ï¼Œæˆ‘ä»ç„¶æŒ¤å‡ºä¸€ç‚¹é¢å¤–çš„æ—¶é—´ä¼šç”¨æˆ‘çš„ç¬”è®°æœ¬ç”µè„‘æ¥å®Œæˆå…¶ä»–ä»»åŠ¡ã€‚</p><p>I had <a href="https://www.webmd.com/sleep-disorders/sleep-blue-light">recently read</a> that using your digital devices such as phone or laptop before bed can affect sleep quality since the blue light that is emitted by these devices suppresses the secretion of melatonin that is responsible for making us sleepy.</p><p>æˆ‘æœ€è¿‘è¯»åˆ°ï¼Œç¡å‰ä½¿ç”¨æ‰‹æœºæˆ–ç¬”è®°æœ¬ç”µè„‘ç­‰æ•°å­—è®¾å¤‡ä¼šå½±å“ç¡çœ è´¨é‡ï¼Œå› ä¸ºè¿™äº›è®¾å¤‡å‘å‡ºçš„è“å…‰ä¼šæŠ‘åˆ¶è¤ªé»‘æ¿€ç´ çš„åˆ†æ³Œï¼Œè€Œè¤ªé»‘æ¿€ç´ æ­£æ˜¯å¯¼è‡´æˆ‘ä»¬å›°å€¦çš„åŸå› ã€‚</p><p>After realizing how much blue light I was being exposed to before bed which was perhaps disrupting my sleep quality, I made a decision to stop using any electronic devices at least 30 minutes before bed.</p><p>åœ¨æ„è¯†åˆ°ç¡å‰æˆ‘æš´éœ²åœ¨å¤šä¹ˆå¼ºçƒˆçš„è“å…‰ä¸‹å¯èƒ½ä¼šå½±å“æˆ‘çš„ç¡çœ è´¨é‡ä¹‹åï¼Œæˆ‘å†³å®šè‡³å°‘åœ¨ç¡å‰30åˆ†é’Ÿåœæ­¢ä½¿ç”¨ä»»ä½•ç”µå­è®¾å¤‡ã€‚</p><p>That 30 minutes comes from the National Sleep Foundationâ€™s <a href="https://www.sclhealth.org/blog/2019/09/why-it-is-time-to-ditch-the-phone-before-bed/">recommendation</a> that people stop using electronic devices at least 30 minutes before bedtime.</p><p>è¿™30åˆ†é’Ÿæ¥è‡ªäºç¾å›½å›½å®¶ç¡çœ åŸºé‡‘ä¼šçš„å»ºè®®ï¼Œå»ºè®®äººä»¬åœ¨ç¡è§‰å‰è‡³å°‘30åˆ†é’Ÿåœæ­¢ä½¿ç”¨ç”µå­è®¾å¤‡ã€‚</p><p>After making this change, the results have been nothing short of <strong>MAGICAL!</strong></p><p>åœ¨åšäº†è¿™ä¸ªæ”¹å˜ä¹‹åï¼Œç»“æœç®€ç›´å°±æ˜¯ç¥å¥‡ï¼</p><p>Last night was the 3rd night going without electronic devices at least 30 minutes before bedtime and each of those nights has been peaceful. For the past 3 days, I have been waking up feeling more refreshed and energized than before. I am still sleeping 7.5 hours at night which is the perfect amount for me.</p><p>æ˜¨æ™šæ˜¯å°±å¯å‰è‡³å°‘30åˆ†é’Ÿæ²¡æœ‰ç”µå­è®¾å¤‡çš„ç¬¬ä¸‰ä¸ªæ™šä¸Šï¼Œæ¯ä¸ªæ™šä¸Šéƒ½å¾ˆå¹³é™ã€‚åœ¨è¿‡å»çš„3å¤©é‡Œï¼Œæˆ‘é†’æ¥åæ„Ÿè§‰æ¯”ä»¥å‰æ›´ç²¾ç¥ç„•å‘ã€ç²¾åŠ›å……æ²›ã€‚æˆ‘æ™šä¸Šä»ç„¶ç¡7.5å°æ—¶ï¼Œè¿™å¯¹æˆ‘æ¥è¯´æ˜¯å®Œç¾çš„ç¡çœ æ—¶é—´ã€‚</p><p>I canâ€™t always stop using my electronic devices at least 30 minutes before bedtime because life gets in the way so I plan on using a built-in blue light filter on my Macbook and iPhone.</p><p>æˆ‘ä¸èƒ½æ€»æ˜¯åœ¨ç¡è§‰å‰è‡³å°‘30åˆ†é’Ÿåœæ­¢ä½¿ç”¨æˆ‘çš„ç”µå­è®¾å¤‡ï¼Œå› ä¸ºç”Ÿæ´»ä¼šé˜»ç¢æˆ‘ï¼Œæ‰€ä»¥æˆ‘è®¡åˆ’åœ¨æˆ‘çš„Macbookå’Œiphoneä¸Šä½¿ç”¨å†…ç½®è“å…‰è¿‡æ»¤ã€‚</p><p>Apple calls it â€œNight Shiftâ€ and when it is turned on, it changes the color of the screen to pale orange. It kind of gets getting used to but essentially this feature decreases the amount of blue light emitted by the screen which in theory should help you sleep better.</p><p>è‹¹æœç§°å…¶ä¸ºâ€œNight Shiftâ€ï¼Œå½“å®ƒè¢«æ‰“å¼€æ—¶ï¼Œå®ƒä¼šå°†å±å¹•çš„é¢œè‰²æ›´æ”¹ä¸ºæ·¡æ©™è‰²ã€‚å®ƒæœ‰ç‚¹ä¹ æƒ¯äº†ï¼Œä½†ä»æœ¬è´¨ä¸Šè¯´ï¼Œè¿™ä¸ªåŠŸèƒ½å‡å°‘äº†å±å¹•å‘å‡ºçš„è“å…‰ï¼Œä»ç†è®ºä¸Šè®²ï¼Œè¿™åº”è¯¥ä¼šå¸®åŠ©ä½ ç¡å¾—æ›´å¥½ã€‚</p><p>I will try this feature in the upcoming few days by turning it on after sunset so my eyes are not that exposed to the blue light.</p><p>åœ¨æ¥ä¸‹æ¥çš„å‡ å¤©é‡Œï¼Œæˆ‘ä¼šå°è¯•åœ¨æ—¥è½åæ‰“å¼€è¿™ä¸ªåŠŸèƒ½ï¼Œè¿™æ ·æˆ‘çš„çœ¼ç›å°±ä¸ä¼šæš´éœ²åœ¨è“å…‰ä¸‹ã€‚</p><p><strong>Key Takeaways</strong></p><p>å…³é”®è¦ç‚¹</p><p>In our modern society, we are too obsessed with our digital devices and because of this, we are constantly being exposed to blue light. This may be affecting our sleep quality without us knowing.</p><p>åœ¨æˆ‘ä»¬çš„ç°ä»£ç¤¾ä¼šï¼Œæˆ‘ä»¬è¿‡äºæ²‰è¿·äºæ•°å­—è®¾å¤‡ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬ç»å¸¸æš´éœ²åœ¨è“å…‰ä¸‹ã€‚è¿™å¯èƒ½ä¼šåœ¨ä¸çŸ¥ä¸è§‰ä¸­å½±å“æˆ‘ä»¬çš„ç¡çœ è´¨é‡ã€‚</p><p>For the next few days, try this:</p><ul><li><p>Stop using your digital devices at least 30 minutes before bedtime</p><p>  ç¡å‰è‡³å°‘30åˆ†é’Ÿåœæ­¢ä½¿ç”¨æ•°å­—è®¾å¤‡</p></li><li><p>Use a blue light filter that turns the screen to a pale orange to reduce blue light exposure (Night Shift on Apple devices)</p></li><li>ä½¿ç”¨è“å…‰è¿‡æ»¤å™¨ï¼Œå°†å±å¹•å˜æˆæµ…æ©™è‰²ï¼Œä»¥å‡å°‘è“å…‰(è‹¹æœè®¾å¤‡ä¸Šçš„Night Shift)</li></ul><p>Evaluate your sleep quality after making these changes.</p><p>åšå‡ºè¿™äº›æ”¹å˜åï¼Œè¯„ä¼°ä½ çš„ç¡çœ è´¨é‡ã€‚</p><p>If you see no change in your sleep quality, still stick to these changes because over the long run this can help reduce damage to your eyes and help you sleep better.</p><p>å¦‚æœä½ çš„ç¡çœ è´¨é‡æ²¡æœ‰å˜åŒ–ï¼Œé‚£ä¹ˆè¿˜æ˜¯åšæŒè¿™äº›å˜åŒ–ï¼Œå› ä¸ºä»é•¿è¿œæ¥çœ‹ï¼Œè¿™æœ‰åŠ©äºå‡å°‘å¯¹çœ¼ç›çš„ä¼¤å®³ï¼Œå¸®åŠ©ä½ ç¡å¾—æ›´å¥½ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¿»è¯‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¡çœ  </tag>
            
            <tag> ç¿»è¯‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç«è½¦å¤´ä½¿ç”¨æ•™ç¨‹</title>
      <link href="/2021/10/08/%E7%81%AB%E8%BD%A6%E5%A4%B4%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"/>
      <url>/2021/10/08/%E7%81%AB%E8%BD%A6%E5%A4%B4%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p>å£°æ˜ï¼šæœ¬æ•™ç¨‹æ— ä»»ä½•ç›ˆåˆ©ç›®çš„ï¼Œä»…ä¾›å­¦ä¹ ä½¿ç”¨ï¼Œä¹Ÿä¸ä¼šå¯¹ç½‘ç«™è¿è¡Œé€ æˆè´Ÿæ‹…ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚</p><h1 id="ç«è½¦å¤´ç®€ä»‹"><a href="#ç«è½¦å¤´ç®€ä»‹" class="headerlink" title="ç«è½¦å¤´ç®€ä»‹"></a>ç«è½¦å¤´ç®€ä»‹</h1><p><a href="http://www.locoy.com/">ç«è½¦é‡‡é›†å™¨å®˜ç½‘-ç½‘é¡µæŠ“å–å·¥å…·<em>ç«è½¦å¤´é‡‡é›†å™¨</em>å…è´¹ç½‘ç«™é‡‡é›†è½¯ä»¶</a></p><blockquote><p>ç«è½¦é‡‡é›†å™¨ï¼Œä¸€æ¬¾ä¸“ä¸šçš„äº’è”ç½‘æ•°æ®æŠ“å–ã€å¤„ç†ã€åˆ†æï¼ŒæŒ–æ˜è½¯ä»¶ï¼Œå¯ä»¥çµæ´»è¿…é€Ÿåœ°æŠ“å–ç½‘é¡µä¸Šæ•£ä¹±åˆ†å¸ƒçš„æ•°æ®ä¿¡æ¯ï¼Œå¹¶é€šè¿‡ä¸€ç³»åˆ—çš„åˆ†æå¤„ç†ï¼Œå‡†ç¡®æŒ–æ˜å‡ºæ‰€éœ€æ•°æ®ã€‚ç«è½¦é‡‡é›†å™¨å†ç»åäºŒå¹´çš„å‡çº§æ›´æ–°ï¼Œç§¯ç´¯äº†å¤§é‡ç”¨æˆ·å’Œè‰¯å¥½å£ç¢‘ï¼Œæ˜¯ç›®å‰æœ€å—æ¬¢è¿çš„ç½‘é¡µæ•°æ®é‡‡é›†è½¯ä»¶ã€‚</p></blockquote><p>ç®€å•æ¥è®²ï¼Œå°±æ˜¯ä½¿ç”¨è½¯ä»¶æ¥ç®€åŒ–æˆ‘ä»¬çš„çˆ¬è™«è¿‡ç¨‹ï¼Œåœ¨æ•´ä¸€ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¸éœ€è¦ç¼–å†™ä»£ç å°±èƒ½å¤Ÿå®ç°çˆ¬è™«é€»è¾‘ã€‚</p><h1 id="ä¸¾ä¾‹çˆ¬å–ä»»åŠ¡"><a href="#ä¸¾ä¾‹çˆ¬å–ä»»åŠ¡" class="headerlink" title="ä¸¾ä¾‹çˆ¬å–ä»»åŠ¡"></a>ä¸¾ä¾‹çˆ¬å–ä»»åŠ¡</h1><p>éœ€è¦åˆ†é¡µçˆ¬å–æ‰€æœ‰é¡µé¢ï¼Œå¹¶å¯¹é¡µé¢ä¸Šæ‰€æœ‰æ„Ÿå…´è¶£çš„æ¡ç›®è¿›ä¸€æ­¥çˆ¬å–äºŒçº§URL</p><h1 id="æ–°å»ºä»»åŠ¡"><a href="#æ–°å»ºä»»åŠ¡" class="headerlink" title="æ–°å»ºä»»åŠ¡"></a>æ–°å»ºä»»åŠ¡</h1><h2 id="æ·»åŠ ä¸€ä¸ªä»»åŠ¡"><a href="#æ·»åŠ ä¸€ä¸ªä»»åŠ¡" class="headerlink" title="æ·»åŠ ä¸€ä¸ªä»»åŠ¡"></a>æ·»åŠ ä¸€ä¸ªä»»åŠ¡</h2><p><img src="/2021/10/08/%E7%81%AB%E8%BD%A6%E5%A4%B4%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/Untitled.png" alt></p><h2 id="ç½‘å€é‡‡é›†è§„åˆ™-ç½‘å€è·å–"><a href="#ç½‘å€é‡‡é›†è§„åˆ™-ç½‘å€è·å–" class="headerlink" title="ç½‘å€é‡‡é›†è§„åˆ™-ç½‘å€è·å–"></a>ç½‘å€é‡‡é›†è§„åˆ™-ç½‘å€è·å–</h2><p><img src="/2021/10/08/%E7%81%AB%E8%BD%A6%E5%A4%B4%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/Untitled%201.png" alt></p><ul><li>èµ·å§‹ç½‘å€å¡«ä¸Šã€ç¬¬ä¸€é¡µçš„URLã€‘</li><li><p>ç½‘å€è·å–é€‰é¡¹çš„æ„æ€ï¼šæå–å½“å‰é¡µé¢ä¸Šæƒ³è¦çˆ¬å–çš„æ¡ç›®çš„URLï¼Œæ¯”å¦‚xxç½‘ç¬¬ä¸€é¡µä¸Šçš„ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰å•†å“é“¾æ¥ã€‚</p>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;Z_list-box&quot;</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;pic-box&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;//test.com/4343434333555.html&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pic-wrap&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span><span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;lazy&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">alt</span>=<span class="string">&quot;ç«‹ç™½æ´—è¡£æ¶²&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">style</span>=<span class="string">&quot;display: inline&quot;</span></span></span><br><span class="line"><span class="tag">  /&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;ico ico-video&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;pic-box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;//test.com/434322425.html&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pic-wrap&quot;</span></span></span><br><span class="line"><span class="tag">      &gt;</span><span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">&quot;lazy&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">alt</span>=<span class="string">&quot;å¤–æ˜Ÿäººé¼ æ ‡&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">style</span>=<span class="string">&quot;display: inline&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;ico ico-video&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;Z_pages&quot;</span> <span class="attr">id</span>=<span class="string">&quot;page&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>  æ¯”å¦‚å½“å‰ç½‘é¡µçš„æºç æ˜¯è¿™æ ·çš„ï¼Œæƒ³è¦è·å–è¿™ä¸¤ä»¶å•†å“çš„é“¾æ¥ï¼Œåˆ†æç½‘é¡µæºç å¯çŸ¥å•†å“çš„é“¾æ¥ä¸º<code>//test.com/xx.html</code> ï¼Œæˆ‘ä»¬è¦æå–çš„é“¾æ¥å°±æ˜¯è¿™ä¸ª</p><ul><li>åœ¨æå–è§„åˆ™é‡Œé¢å¡«å…¥<code>&lt;div class=&quot;pic-box&quot;&gt;(*)href=&quot;[å‚æ•°]&quot;</code> è¿™é‡Œçš„<code>&lt;div class=&quot;pic-box&quot;&gt;</code> ä»£è¡¨å†…å®¹å¼€å¤´çš„åœ°æ–¹ï¼›<code>(*)</code> ä»£è¡¨åŒ¹é…æ‰€æœ‰å†…å®¹ï¼Œ<code>href=&quot;[å‚æ•°]&quot;</code> ä»£è¡¨å†…å®¹ç»“æŸï¼Œ<code>[å‚æ•°]</code> åˆ™è¡¨ç¤ºæƒ³è¦æå–çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œçš„é“¾æ¥ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯æŒ‡å®šæœæŸ¥çš„åŒºåŸŸï¼Œç„¶åä½¿ç”¨<code>[å‚æ•°]</code> æå–å‡ºå†…å®¹ã€‚</li><li>è®¾ç½®åŒºåŸŸå¯ä»¥å‡å°‘å™ªéŸ³ï¼Œé¿å…çˆ¬å–åŒºåŸŸå¤–çš„å†…å®¹</li></ul></li></ul><h2 id="ç½‘å€é‡‡é›†è§„åˆ™-åˆ†é¡µè®¾ç½®"><a href="#ç½‘å€é‡‡é›†è§„åˆ™-åˆ†é¡µè®¾ç½®" class="headerlink" title="ç½‘å€é‡‡é›†è§„åˆ™-åˆ†é¡µè®¾ç½®"></a>ç½‘å€é‡‡é›†è§„åˆ™-åˆ†é¡µè®¾ç½®</h2><p><img src="/2021/10/08/%E7%81%AB%E8%BD%A6%E5%A4%B4%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/Untitled%202.png" alt></p><p>è¿™é‡Œä¸»è¦è®¾ç½®åˆ†é¡µè§„åˆ™ï¼Œè¡¨ç¤ºä¸ä»…è¦çˆ¬å½“å‰é¡µï¼Œè¿˜è¦çˆ¬å–æ‰€æœ‰çš„é¡µé¢</p><ul><li>æ‰“å¼€æ— é™æåˆ†é¡µï¼šä»»åŠ¡å¯ä»¥é‡å¤è¿è¡Œï¼Œå¦‚æœURLå·²ç»çˆ¬å–è¿‡äº†ï¼Œé‚£ä¹ˆå°±ä¸ä¼šå¯¹è¯¥URLæ‰§è¡Œä»»åŠ¡ï¼Œè¯¥é€‰é¡¹ä¸€èˆ¬æ˜¯å…³é—­çš„ï¼Œå› ä¸ºæˆ‘ä»¬æƒ³è¦æƒ³è¦ä¸æ–­çˆ¬å–ä»è€Œä¸æ–­è·å–åˆ°æ–°çš„ä¿¡æ¯</li><li><p>åŒºåŸŸå¼€å§‹ç»“æŸä½ç½®ï¼šæ— é™æåˆ†é¡µæ¨¡å¼ä¸‹é¢çš„ä¸¤ä¸ªè¾“å…¥æ¡†å°±æ˜¯æŒ‡å®šè·å–ä¸‹ä¸€é¡µä½ç½®çš„å¼€å§‹ç»“æŸåŒºåŸŸ</p>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;Z_pages&quot;</span> <span class="attr">id</span>=<span class="string">&quot;page&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span></span></span><br><span class="line"><span class="tag">    <span class="attr">href</span>=<span class="string">&quot;//test.com?p=2&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span>2&lt;/a</span><br><span class="line">  &gt;</span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span></span></span><br><span class="line"><span class="tag">  <span class="attr">href</span>=<span class="string">&quot;//test.com?p=3&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span>3&lt;/a</span><br><span class="line">&gt;</span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;next&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">href</span>=<span class="string">&quot;//test.com/next&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span>ä¸‹ä¸€é¡µ&lt;/a</span><br><span class="line">  &gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;Z_bar&quot;</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>  è¿™é‡Œå¯ä»¥çœ‹åˆ°åˆ†é¡µä¿¡æ¯åŒºåŸŸçš„å¼€å§‹ç»“æŸä½ç½®ä¸º<code>&lt;div class=&quot;Z_pages&quot; id=&quot;page&quot;&gt;</code> <code>&lt;div class=&quot;Z_bar&quot;&gt;</code></p></li><li><p>åœ°å€æ ·å¼ï¼šè¿™é‡Œç”¨æ¥æå–ç¬¬å‡ é¡µï¼Œæ¯”å¦‚<code>&lt;a (*)&gt;[å‚æ•°]&lt;/a&gt;</code> ï¼Œå‚æ•°ä¼šæå–å‡ºæ•°å­—2ã€3</p></li><li>åˆ†é¡µåœ°å€ï¼šåœ°å€çš„æ‹¼æ¥è§„åˆ™</li></ul><h2 id="å†…å®¹é‡‡é›†è§„åˆ™"><a href="#å†…å®¹é‡‡é›†è§„åˆ™" class="headerlink" title="å†…å®¹é‡‡é›†è§„åˆ™"></a>å†…å®¹é‡‡é›†è§„åˆ™</h2><p><img src="/2021/10/08/%E7%81%AB%E8%BD%A6%E5%A4%B4%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/Untitled%203.png" alt></p><p>è¿™é‡Œè®¾å®šå¯¹å‰é¢é‡‡é›†åˆ°çš„URLé‡Œé¢çš„å†…å®¹æå–çš„è§„åˆ™ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªä¸ªå•†å“è¯¦æƒ…é¡µçš„å†…å®¹</p><ul><li>è¿™é‡Œä¸€èˆ¬è®¾ç½®ä¸ºä»æºç è·å–æ•°æ®ï¼Œä½¿ç”¨XPathæå–ï¼Œå› ä¸ºè¿™ä¸ªè§„åˆ™å¯ä»¥ç›´æ¥ä»Chromeä¸­å¤åˆ¶ç²˜è´´ï¼Œæ¯”è¾ƒæ–¹ä¾¿</li><li>å¯¹é‡‡é›†åˆ°çš„å†…å®¹å¯ä»¥è¿›ä¸€æ­¥ï¼Œæ¯”å¦‚å»é™¤HTMLæ ‡ç­¾ï¼Œæ•°æ®ä¸ºç©ºè·³è¿‡ç­‰ç­‰</li><li>è®¾ç½®å¥½è§„åˆ™åå¯ä»¥å¡«å…¥æŸä¸€ä¸ªé¡µé¢æµ‹è¯•æå–çš„è§„åˆ™æ˜¯å¦æ­£ç¡®</li></ul><h2 id="å†…å®¹å‘å¸ƒè§„åˆ™"><a href="#å†…å®¹å‘å¸ƒè§„åˆ™" class="headerlink" title="å†…å®¹å‘å¸ƒè§„åˆ™"></a>å†…å®¹å‘å¸ƒè§„åˆ™</h2><p>ç”¨æ¥æŒ‡å®šé‡‡é›†åˆ°çš„å†…å®¹æ€ä¹ˆå¤„ç†ï¼Œè¿™é‡Œæ˜¯è®¾ç½®ä¸ºå‘é€åˆ°æŸä¸ªapi</p><p><img src="/2021/10/08/%E7%81%AB%E8%BD%A6%E5%A4%B4%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/Untitled%204.png" alt></p><p>ç‚¹å‡»+å·æ·»åŠ è§„åˆ™</p><p><img src="/2021/10/08/%E7%81%AB%E8%BD%A6%E5%A4%B4%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/Untitled%205.png" alt></p><p>æ–°å»ºå‘å¸ƒæ¨¡å—</p><p><img src="/2021/10/08/%E7%81%AB%E8%BD%A6%E5%A4%B4%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/Untitled%206.png" alt></p><p>è¿™é‡ŒæŒ‡å®šæƒ³è¦å‘é€ç»™apiçš„å‚æ•°ï¼Œå…¶ä¸­nameå°±æ˜¯åœ¨ã€å†…å®¹é‡‡é›†è§„åˆ™ã€‘éƒ¨åˆ†è·å–åˆ°çš„ä¿¡æ¯ï¼Œå‚æ•°ä¸ºè§„åˆ™åã€‚</p><p>å…¶ä»–è®¾ç½®ä¸ç”¨åŠ¨å³å¯ï¼Œç›´æ¥ä¿å­˜ã€‚</p><p><img src="/2021/10/08/%E7%81%AB%E8%BD%A6%E5%A4%B4%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/Untitled%207.png" alt></p><p>æ¥ç€å¡«å…¥è¯·æ±‚çš„hostå³å¯</p><h2 id="å…¶ä»–è®¾ç½®"><a href="#å…¶ä»–è®¾ç½®" class="headerlink" title="å…¶ä»–è®¾ç½®"></a>å…¶ä»–è®¾ç½®</h2><p><img src="/2021/10/08/%E7%81%AB%E8%BD%A6%E5%A4%B4%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/Untitled%208.png" alt></p><p>è¿™é‡Œæœ‰ä¸€äº›å¸¸ç”¨è®¾ç½®ï¼Œå¯é€‰ã€‚</p><h1 id="æŸ¥çœ‹çˆ¬å–åˆ°æ•°æ®"><a href="#æŸ¥çœ‹çˆ¬å–åˆ°æ•°æ®" class="headerlink" title="æŸ¥çœ‹çˆ¬å–åˆ°æ•°æ®"></a>æŸ¥çœ‹çˆ¬å–åˆ°æ•°æ®</h1><p><img src="/2021/10/08/%E7%81%AB%E8%BD%A6%E5%A4%B4%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/Untitled%209.png" alt></p><h1 id="å®šæ—¶ä»»åŠ¡è®¾ç½®"><a href="#å®šæ—¶ä»»åŠ¡è®¾ç½®" class="headerlink" title="å®šæ—¶ä»»åŠ¡è®¾ç½®"></a>å®šæ—¶ä»»åŠ¡è®¾ç½®</h1><p><img src="/2021/10/08/%E7%81%AB%E8%BD%A6%E5%A4%B4%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/Untitled%2010.png" alt></p><p>è¿™é‡Œå¯ä»¥æŒ‡å®šä»»åŠ¡é‡å¤è¿è¡Œçš„è§„åˆ™</p><h1 id="å‘é€é€šçŸ¥"><a href="#å‘é€é€šçŸ¥" class="headerlink" title="å‘é€é€šçŸ¥"></a>å‘é€é€šçŸ¥</h1><p>å¯ä½¿ç”¨iosè½¯ä»¶barkæ¥å—é€šçŸ¥ï¼Œå…¶å†…å®¹ä¸ºçˆ¬å–åˆ°çš„è§„åˆ™ï¼Œè¿™é‡Œä½¿ç”¨Golangç®€å•æ–°å»ºäº†ä¸€ä¸ªapiï¼Œå½“è½¯ä»¶çˆ¬å–å®Œæˆåä¼šå°†ä¿¡æ¯å‘é€åˆ°è¯¥apiã€å†…å®¹å‘å¸ƒè§„åˆ™é‡Œé¢è®¾ç½®ã€‘ï¼Œç„¶åå°†æ¶ˆæ¯æ¨é€åˆ°ios</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;github.com/gogf/gf/frame/g&quot;</span></span><br><span class="line"><span class="string">&quot;github.com/gogf/gf/net/ghttp&quot;</span></span><br><span class="line"><span class="string">&quot;github.com/gogf/gf/os/glog&quot;</span></span><br><span class="line"><span class="string">&quot;github.com/gogf/gf/util/gconv&quot;</span></span><br><span class="line"><span class="string">&quot;github.com/gogf/gf/util/grand&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Info <span class="keyword">struct</span> &#123;</span><br><span class="line">Url <span class="keyword">string</span> <span class="string">`json:&quot;url&quot;`</span></span><br><span class="line">Name <span class="keyword">string</span> <span class="string">`json:&quot;name&quot;`</span></span><br><span class="line">TaskType <span class="keyword">string</span> <span class="string">`json:&quot;task_type&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">s := g.Server()</span><br><span class="line">s.SetPort(<span class="number">8080</span>)</span><br><span class="line">_ = glog.SetConfigWithMap(g.Map&#123;</span><br><span class="line"><span class="string">&quot;path&quot;</span>:  <span class="string">&quot;log&quot;</span>,</span><br><span class="line"><span class="string">&quot;level&quot;</span>: <span class="string">&quot;all&quot;</span>,</span><br><span class="line"><span class="string">&quot;file&quot;</span>:  <span class="string">&quot;&#123;Y-m-d&#125;.log&quot;</span>,</span><br><span class="line"><span class="string">&quot;flags&quot;</span>: glog.F_TIME_DATE | glog.F_TIME_MILLI | glog.F_FILE_LONG,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">s.BindHandler(<span class="string">&quot;/send_info&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(r *ghttp.Request)</span></span>&#123;</span><br><span class="line">requestId := grand.Letters(<span class="number">16</span>)</span><br><span class="line"><span class="keyword">var</span> info Info</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> err := r.ParseForm(&amp;info); err != <span class="literal">nil</span> &#123;</span><br><span class="line">glog.Error(requestId, err)</span><br><span class="line">_ = r.Response.WriteJsonExit(<span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">glog.Info(requestId, info)</span><br><span class="line"></span><br><span class="line">bark := <span class="string">&quot;https://api.day.app/&#123;xxxxxxxxxxxx&#125;&quot;</span></span><br><span class="line">body := gconv.String(g.Map&#123;</span><br><span class="line"><span class="string">&quot;device_key&quot;</span>: <span class="string">&quot;xxxxxxxxxxxxx&quot;</span>,</span><br><span class="line"><span class="string">&quot;body&quot;</span>: gconv.String(info),</span><br><span class="line"><span class="string">&quot;title&quot;</span>: <span class="string">&quot;å•†å“ä¿¡æ¯&quot;</span>,</span><br><span class="line"><span class="string">&quot;ext_params&quot;</span>: g.Map&#123;<span class="string">&quot;url&quot;</span>: info.Url&#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">glog.Info(requestId, body)</span><br><span class="line"><span class="keyword">if</span> _, err := g.Client().Post(bark, body); err != <span class="literal">nil</span>&#123;</span><br><span class="line">glog.Error(err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">s.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> èµ„æº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Golang </tag>
            
            <tag> çˆ¬è™« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åšå®¢é‡å¯</title>
      <link href="/2021/10/06/%E5%8D%9A%E5%AE%A2%E9%87%8D%E5%90%AF/"/>
      <url>/2021/10/06/%E5%8D%9A%E5%AE%A2%E9%87%8D%E5%90%AF/</url>
      
        <content type="html"><![CDATA[<h1 id="Hexoåšå®¢é‡å»º"><a href="#Hexoåšå®¢é‡å»º" class="headerlink" title="Hexoåšå®¢é‡å»º"></a>Hexoåšå®¢é‡å»º</h1><h2 id="ä¸ºå•¥è¿˜æ˜¯Hexo"><a href="#ä¸ºå•¥è¿˜æ˜¯Hexo" class="headerlink" title="ä¸ºå•¥è¿˜æ˜¯Hexo"></a>ä¸ºå•¥è¿˜æ˜¯Hexo</h2><p>åšå®¢ä¹‹å‰æ˜¯ä½¿ç”¨Hexo+Github Pageæ­å»ºçš„</p><ul><li>ä½¿ç”¨Github Pageè‚¯å®šæ˜¯æ²¡æœ‰é—®é¢˜ï¼Œå› ä¸ºåªæœ‰<del>ç™½å«–</del>çš„ä¸œè¥¿æ‰èƒ½æŒä¹…è¿è¡Œï¼Œå›½å†…è®¿é—®é€Ÿåº¦ä¸å…³é”®ï¼Œå¸¸å¹´ä½ æ‡‚çš„</li><li>è‡³äºé™æ€å†…å®¹ç”Ÿæˆæ¡†æ¶ï¼Œæœ‰è€ƒè™‘è¿‡Hugoï¼Œå› ä¸ºç”Ÿæˆé€Ÿåº¦æ¯”Hexoå¿«å¾ˆå¤šï¼Œè°ƒè¯•æ–¹ä¾¿ï¼ŒåŒæ—¶å®‰è£…èµ·æ¥æ¯”è¾ƒæ–¹ä¾¿ï¼ˆnpmé‚£å †ä¸œè¥¿æ¶å¿ƒä¸€æ‰¹ï¼‰ã€‚ä½†æ˜¯Hexoä¼—å¤šä¸»é¢˜è¿˜æ˜¯ç•™ä½æˆ‘äº†å“ˆå“ˆå“ˆï¼ˆçœŸé¦™è­¦å‘Šï¼‰</li></ul><h2 id="æ–°çš„ä¸»é¢˜"><a href="#æ–°çš„ä¸»é¢˜" class="headerlink" title="æ–°çš„ä¸»é¢˜"></a>æ–°çš„ä¸»é¢˜</h2><p>ä¹‹å‰çš„é…ç½®åšå®¢å·²ç»å¾ˆä¹…äº†ï¼Œå¾ˆå¤šä¸œè¥¿å·²ç»å¿˜è®°äº†ï¼Œæ‰€ä»¥è¿™æ¬¡æ‰“ç®—é‡æ–°é…ç½®ä¸‹ï¼Œä½¿ç”¨æ–°çš„ä¸»é¢˜ï¼Œæ–°å¹´æ–°æ°”è±¡ã€‚</p><h3 id="hexo-theme-butterfly"><a href="#hexo-theme-butterfly" class="headerlink" title="hexo-theme-butterfly"></a>hexo-theme-butterfly</h3><p>åŠŸèƒ½ä¸°å¯Œçš„Hexoåšå®¢ä¸»é¢˜<br>Featuresï¼š</p><ul><li>å¡ç‰‡å¼ä¸¤æ  UI è®¾è®¡</li><li>å“åº”å¼å¸ƒå±€</li><li>æ”¯æŒæœç´¢å’Œ TOC å±•ç¤º</li><li>å¯è‡ªå®šä¹‰åšå®¢ä¸»é¢˜è‰²</li><li>æ”¯æŒ Disqusã€Gitalkã€Valineã€Waline ç­‰è¯„è®ºç³»ç»Ÿ</li><li>ä¸°å¯Œçš„åŠ¨ç”»æ•ˆæœ</li><li>å†…ç½® Mathjax å’Œ Katex</li></ul><p>Butterfly ä¸»é¢˜çš„å¼€å‘åŸºäº Melody ä¸»é¢˜ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šåšäº†ä¸¤æ è®¾è®¡ï¼Œå¹¶å¸¦æ¥äº†å¾ˆå¤šä¸€çœ¼çœ‹ä¸å‡ºçš„å®ç”¨åŠŸèƒ½ã€‚åŒæ—¶ï¼Œä½œè€…ä¹Ÿæä¾›äº†ä¸€äº›æ–‡æ¡£ä¾¿äºå¤§å®¶å®‰è£…å’Œä½¿ç”¨ï¼Œæ¶µç›–å…¥é—¨è‡³è¿›é˜¶éœ€æ±‚ã€‚ä½†æˆ‘è®¤ä¸ºè¿™äº›æ–‡æ¡£ä¸å¤Ÿè¿è´¯ï¼Œæœ‰äº›åŠŸèƒ½ä¹Ÿæ²¡æœ‰è¿›è¡Œè¯¦ç»†ä»‹ç»ï¼Œå¦‚æœå¯ä»¥çš„è¯ç”¨ç±»ä¼¼ Gitbook çš„å¹³å°å·¥å…·æ¥å†™ä¼šæ›´å¥½ã€‚<br>Butterfly çš„ç€é™†é¡µå’Œå†…é¡µè®¾è®¡æ·±å¾—æˆ‘å¿ƒï¼Œheadingã€TOC å’Œä»£ç å—æ ·å¼ä¹Ÿæ°åˆ°å¥½å¤„ã€‚å®ƒä¸ç»å¯ä»¥æ»¡è¶³æ­£å¸¸çš„å›¾æ–‡éœ€æ±‚ï¼Œä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚æ’å…¥éŸ³è§†é¢‘ç´ ã€‚ä½œè€…è¿˜æä¾›äº† PWA å®ç°ã€æ’ä»¶æ³¨å…¥ç­‰è¿›é˜¶ç©æ³•ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯è¿›è¡Œå°è¯•<br>é¢‘é“ï¼š@NewlearnerChannel</p><h3 id="Valineè¿ç§»åˆ°Twikoo"><a href="#Valineè¿ç§»åˆ°Twikoo" class="headerlink" title="Valineè¿ç§»åˆ°Twikoo"></a>Valineè¿ç§»åˆ°Twikoo</h3><p><a href="https://github.com/imaegoo/twikoo">GitHub - imaegoo/twikoo: ğŸ’¬ ä¸€ä¸ªç®€æ´ã€å®‰å…¨ã€å…è´¹çš„é™æ€ç½‘ç«™è¯„è®ºç³»ç»Ÿ | A simple, safe, free comment system.</a></p><p>ä¹‹å‰é‡‡ç”¨çš„Valineä¹Ÿä¸é”™ï¼Œä¸éœ€è¦ç™»é™†å°±å¯ä»¥å›å¤ï¼Œç®€æ´ï¼Œè½»ä¾¿ï¼Œæœ€è¿‘å‡ºäº†ä¸€ä¸ªå’Œå…¶å·®ä¸å¤šçš„ï¼Œè…¾è®¯å¼€å‘ï¼ŒåŠŸèƒ½æ¯”è¾ƒä¸°å¯Œï¼Œç‰¹ç‚¹å¯åœ¨Githubä¸Šé¢æŸ¥çœ‹ã€‚</p><p>ä¸ªäººè§‰å¾—å¥½çš„åœ°æ–¹ï¼š</p><ul><li>è‡ªå¸¦è¯„è®ºç®¡ç†å·¥å…·</li><li>è®¾ç½®é‚®ä»¶æé†’æ¯”è¾ƒæ–¹ä¾¿</li><li>å¯ä»¥ç‚¹èµ</li></ul><p>å…¶éƒ¨ç½²åœ¨Vercelï¼Œä½¿ç”¨AWSå…è´¹çš„MongoDBä¿å­˜æ•°æ®ï¼Œé€‚ç”¨äºæƒ³è¦å…è´¹éƒ¨ç½²çš„ç”¨æˆ·ï¼Œåœ¨ä¸­å›½å¤§é™†è®¿é—®é€Ÿåº¦è¾ƒæ…¢ã€‚</p><p>ç›®å‰çš„ä¸€ä¸ªä¸ä¾¿ä¹‹å¤„åœ¨äºï¼š</p><ul><li>æ”¯æŒçš„å›¾åºŠä¸å¤Ÿä¸°å¯Œï¼ˆå†…ç½®çš„ä¸¤ä¸ªéƒ½ä¸æ€ä¹ˆå¥½ç”¨ï¼Œä¸è¿‡å¯ä»¥æ‰‹åŠ¨ä¸Šä¼ åˆ°sm.msè§£å†³ï¼‰</li><li>ç®¡ç†é¡µé¢ä¸èƒ½å…¨å±ï¼ˆè™½ç„¶æœ‰æ–¹æ³•æ”¹ä¸»é¢˜æ–‡ä»¶å»è§£å†³ï¼Œä½†æ˜¯å¸Œæœ›è¿˜æ˜¯å®˜æ–¹è§£å†³å¥½ï¼‰</li></ul><h2 id="ä½¿ç”¨Notionæ­é…"><a href="#ä½¿ç”¨Notionæ­é…" class="headerlink" title="ä½¿ç”¨Notionæ­é…"></a>ä½¿ç”¨Notionæ­é…</h2><p>å†™ä½œå·¥å…·è¿ç§»å†å²ï¼šæœ¬åœ°MarkDown+Github Pagesâ†’Notionâ†’ä¸‰è€…ç»“åˆ</p><p>ä¸ºä»€ä¹ˆè¦é‡æ–°æ­å»ºæ¿€æ´»åšå®¢</p><p>å› ä¸ºä½¿ç”¨Notionä¹‹åä¸æƒ³å†™ä½œäº†ï¼Œå†™ä½œæ¦‚ç‡æœ‰ç‚¹ä½ï¼Œè€Œä¸”Notionçš„å†…å®¹ä»æœç´¢å¼•æ“ä¸Šé¢å¾ˆå°‘æœç´¢å¾—åˆ°ï¼Œå¸Œæœ›æ¿€æ´»åšå®¢åèƒ½å¤Ÿæ‰¾å›é‡æ–°çš„æ¿€æƒ…ï¼Œæ¯•ç«Ÿæœ‰ä¸€ä¸ªè‡ªå·±çš„åšå®¢ï¼Œçœ‹åˆ°æœ‰æˆç¯‡çš„æ–‡ç« ï¼Œä¹Ÿè®¸ä¼šæœ‰ä¸€ç§æˆå°±æ„Ÿæ¿€åŠ±è‡ªå·±å†™ä½œå§ã€‚</p><p>Notionç¡®å®æ¯”è¾ƒæ–¹ä¾¿ï¼Œç›´æ¥ä½¿ç”¨ä¸€ä¸ªè¡¨æ ¼å°±èƒ½æ­å»ºä¸€ä¸ªç®€å•çš„åšå®¢ï¼Œä½¿ç”¨è¡¨æ ¼ä¸­è‡ªå¸¦çš„åŠŸèƒ½å°±èƒ½æ»¡è¶³éœ€æ±‚ï¼Œè€Œä¸”ç²˜è´´å›¾ç‰‡èµ·æ¥ä¹Ÿæ–¹ä¾¿ï¼Œä¸åƒæœ¬åœ°MarkDownå›¾ç‰‡è¦ä¹ˆå›¾åºŠè¦ä¹ˆæ”¾æœ¬åœ°</p><p>æ‰€ä»¥ï¼Œç»¼åˆä»¥ä¸Šï¼Œå…ˆåœ¨Notioné‡Œé¢å†™å¥½ï¼Œç„¶åå¯¼å‡ºåˆ°Hexoåšå®¢ï¼Œç»“åˆä¸¤è€…çš„ç‰¹ç‚¹ï¼ŒNotionå®æ—¶ä¿å­˜ï¼Œå†™ä½œæ–¹ä¾¿ï¼Œé€‚åˆç´ æçš„æ”¶é›†ï¼Œç”šè‡³å¯ä»¥åœ¨å¹³æ—¶ä¸­ä½¿ç”¨æ‰‹æœºå†™ä½œï¼›è€ŒGithub Pagesåˆ™æ˜¯æˆç¯‡æ–‡ç« çš„æ”¶é›†åœ°ï¼Œæ–¹ä¾¿å¤–å¯¹äº¤æµï¼Œæ›´é‡è¦çš„æ˜¯æ•°æ®ä¿å­˜åœ¨æœ¬åœ°ï¼Œä¸¤ä»½æ•°æ®äº’å­˜ï¼Œæ¯•ç«Ÿåœ¨çº¿æ–‡æ¡£çš„æ•°æ®ä¸æ˜¯åœ¨æœ¬åœ°ï¼Œå¯èƒ½ä¼šæ•°æ®ä¸¢å¤±çš„é£é™©ã€‚</p><h1 id="ç¬”è®°ç³»ç»Ÿ"><a href="#ç¬”è®°ç³»ç»Ÿ" class="headerlink" title="ç¬”è®°ç³»ç»Ÿ"></a>ç¬”è®°ç³»ç»Ÿ</h1><p>ç›®å‰ç¬”è®°ç³»ç»Ÿè¿˜åœ¨ç ”ç©¶ä¸­ï¼Œæš‚æ—¶æ‰¾ä¸åˆ°å®Œå…¨å¤åˆè‡ªå·±éœ€æ±‚çš„ï¼Œå¤§éƒ¨åˆ†å¤Ÿç”¨</p><h2 id="Inboxå’ŒNote"><a href="#Inboxå’ŒNote" class="headerlink" title="Inboxå’ŒNote"></a>Inboxå’ŒNote</h2><p>å…ˆä¸‹ç»“è®ºï¼Œç›®å‰çš„ç¬”è®°ç³»ç»Ÿï¼šå¤§æ¦‚åˆ†ä¸ºä¸¤ä¸ªæ¨¡å—ï¼šInboxå’ŒNote</p><ul><li>Inboxï¼šç”¨æ¥æ”¶é›†ä»»ä½•æ—¶åˆ»ã€ä»»ä½•æ–¹å¼å¾—åˆ°çš„é›¶ç¢èµ„è®¯</li><li>Noteï¼šç”¨æ¥å­˜æ”¾ Inbox ä¸­ç»è¿‡æ•´ç†çš„å®Œæ•´ç¬”è®°</li></ul><p>å¾ˆå¤šæ—¶å€™æˆ‘ä»¬é›¶é›¶æ•£æ•£çš„ä¸œè¥¿éƒ½å¯ä»¥æ”¾åœ¨Inboxé‡Œé¢ï¼Œç­‰åˆ°æ—¶é—´æˆç†Ÿï¼Œæˆ–è€…åŠ ä»¥åº”ç”¨åï¼Œå°±å¯ä»¥åŠ å·¥æˆNoteï¼Œå‘å¸ƒåˆ°Hexoåšå®¢é‡Œé¢ã€‚</p><h2 id="Inbox"><a href="#Inbox" class="headerlink" title="Inbox"></a>Inbox</h2><p>ä½œä¸ºç¨‹åºçŒ¿ä¸€æšï¼Œå…¶å®å¾ˆå¤šä¸œè¥¿ç½‘ä¸Šéƒ½æœ‰ï¼Œæˆ‘ä»¬å¾ˆå¤šæ–‡ç« åªæ˜¯ç¼åˆæ€ªç½¢äº†ï¼Œæ•…å¾ˆå¤šçŸ¥è¯†å…¶å®å¯ä»¥æ”¾åˆ°Inboxé‡Œé¢ï¼Œç›´æ¥ä¹¦ç­¾æˆ–è€…ä½¿ç”¨æ–‡ç« æ”¶é›†å·¥å…·å³å¯ï¼Œåˆ°æ—¶å€™å¯ä»¥ç›´æ¥åœ¨Noteé‡Œé¢å¼•ç”¨ã€‚</p><p>å…¶å®è¿™é‡Œé¢æ²¡æœ‰ä¸€ä¸ªå¥½çš„å·¥å…·å¯ä»¥ç®¡ç†è¿™ä¸€å—ï¼ŒInboxçš„æ¥æºæœ‰å¾ˆå¤šï¼Œæ¯”å¦‚pdfã€ç½‘é¡µã€æ‰‹æœºæ‘˜å½•ã€appç­‰ã€‚æ›´å¤šæ—¶å€™æˆ‘çš„éœ€æ±‚æ˜¯åœ¨è¿™äº›æ¥æºé‡Œé¢å»ºç«‹ç´¢å¼•ï¼Œè€Œä¸æ˜¯å¤åˆ¶ç²˜è´´å…¨éƒ¨å†…å®¹ï¼Œè¿™æ ·åè€Œä¼šä¸¢å¤±äº†ä¸Šä¸‹æ–‡å’Œå…¶ä»–å†…å®¹ã€‚ä¸€æ—¦å»ºç«‹ç´¢å¼•ï¼Œè¿™äº›ç´¢å¼•å’Œç´¢å¼•ä¹‹é—´çš„è”ç³»åè€Œæ‰æ˜¯æœ€é‡è¦çš„å§ï¼Œè¿™æ ·å¯ä»¥å»ºç«‹èµ·æ¥ä¸€ä¸ªçŸ¥è¯†ç½‘ç»œï¼Œé€šè¿‡è¿™ä¸ªç½‘ç»œæˆ‘ä»¬å¯ä»¥ç›´æ¥å®šä½åˆ°çŸ¥è¯†æºï¼Œè¿™ä¸ªçŸ¥è¯†æºå¯ä»¥æ˜¯pdfé‡Œé¢çš„æŸä¸€æ®µè¯ï¼Œä¹Ÿå¯ä»¥æ˜¯æŸç¯‡æ–‡ç« é‡Œé¢çš„ä¸€å¥è¯ï¼Œæˆ–è€…æ˜¯è‡ªå·±å†™çš„æ–‡ç« ç­‰ç­‰ã€‚è¿™æ ·æ”¶é›†èµ·æ¥æ¯”è¾ƒæ–¹ä¾¿ï¼Œè€Œä¸”çŸ¥è¯†ä¹Ÿæ–¹ä¾¿ç®¡ç†ã€‚</p><h3 id="ç®€æ‚¦"><a href="#ç®€æ‚¦" class="headerlink" title="ç®€æ‚¦"></a>ç®€æ‚¦</h3><p>ç®€æ‚¦ç»å¸¸ç”¨æ¥å°†ç½‘é¡µçš„å†…å®¹ä¿å­˜åˆ°Notionï¼Œç„¶ååœ¨Notionä¸Šé¢åˆ’é‡ç‚¹ï¼Œè®°ç¬”è®°ã€‚</p><p><img src="/2021/10/06/%E5%8D%9A%E5%AE%A2%E9%87%8D%E5%90%AF/Untitled.png" alt></p><h3 id="flomo"><a href="#flomo" class="headerlink" title="flomo"></a>flomo</h3><p>flomoæ›´å¤šæ˜¯æ‰‹æœºç«¯çœ‹åˆ°æ–‡ç« å¥½å¥ï¼Œç„¶ååœ¨é‡Œé¢æ‰“æ ‡ç­¾æ”¶é›†</p><p><img src="/2021/10/06/%E5%8D%9A%E5%AE%A2%E9%87%8D%E5%90%AF/Untitled%201.png" alt></p><h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><p>å…¶å®è¿˜æœ‰å¾ˆå¤šæˆ‘ä¸çŸ¥é“æ€ä¹ˆç®¡ç†ï¼Œæ¯”å¦‚æŸä¸€æœ¬ä¹¦ç±pdfé‡Œé¢çš„æ„Ÿå…´è¶£éƒ¨åˆ†ï¼ŒæŸç¯‡è®ºæ–‡é‡Œé¢çš„å†…å®¹ç­‰ç­‰ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘æ˜¯æœŸæœ›èƒ½å¤Ÿç›´æ¥å»ºç«‹ç´¢å¼•çš„æ–¹å¼ï¼Œè€Œä¸æ˜¯å¤åˆ¶ç²˜è´´çš„å½¢å¼ï¼ˆè‡ªå†™çš„é™¤å¤–ï¼‰ã€‚</p><h2 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h2><p>Noteçš„å½¢å¼æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚åšæ–‡ã€æ€ç»´å¯¼å›¾ã€PPTç­‰ï¼Œè¿™äº›éƒ½å°è¯•è¿‡ï¼Œä½†æ˜¯æ²¡æœ‰ä¸€ä¸ªå¥½çš„èƒ½å¤Ÿä¸å„ä¸ªInboxå»ºç«‹å…³è”ã€‚</p><p>åœ¨Noteéƒ¨åˆ†ï¼Œæˆ‘ä¹Ÿåªæ˜¯å†™å†™æ–‡ç« ï¼Œç„¶åä½¿ç”¨Notionç”»ç”»æ€ç»´å¯¼å›¾ï¼Œæ¯”å¦‚ä½¿ç”¨ç›®å½•å½“æ€ç»´å¯¼å›¾ï¼Œç‚¹å‡»ç›®å½•å¯ä»¥è·³è½¬åˆ°å¯¹åº”çš„æºï¼Œè¿™ä¸ªæ˜¯Notionçš„ä¸€ä¸ªåŠŸèƒ½ã€‚</p><p><img src="/2021/10/06/%E5%8D%9A%E5%AE%A2%E9%87%8D%E5%90%AF/Untitled%202.png" alt></p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>å…¶å®æ€ä¹ˆè¯´ï¼Œç¬”è®°è¿™ä¸œè¥¿è¿˜æ˜¯å¾—é ç”¨ï¼Œä¸ç„¶ä¹Ÿåªæ˜¯åƒç°ï¼Œæœ€è¿‘åœ¨è¯»ã€Šè´¹æ›¼å­¦ä¹ æ³•ã€‹ï¼Œæ„Ÿè§‰ä¼šæœ‰ä¸å°‘çš„æ„Ÿæ‚Ÿï¼Œæƒ³æ‰¾ä¸ªæ—¶é—´æ€»ç»“ä¸€ä¸‹ï¼Œä¸ç„¶çœ‹äº†ç­‰äºç™½çœ‹ï¼Œå…¶å®è¿™ä¸ªè¿‡ç¨‹å°±å¥½åƒInboxå’ŒNoteï¼ŒInboxçš„æ˜¯åœ¨çœ‹çš„æ—¶å€™ç”»é‡ç‚¹ï¼ŒNoteçš„åˆ™æ˜¯è‡ªå·±æƒ³è¦æ€»ç»“å‡ºæ¥çš„ã€‚</p><p>å¯¹äºå¾ˆå¤šç¬”è®°è½¯ä»¶ï¼Œæˆ‘å°è¯•è¿‡äº†å¾ˆå¤šï¼Œæ¯”å¦‚OneNoteã€Ankiã€MarginNoteã€Obsidianç­‰ç­‰ï¼Œæ„Ÿè§‰è¿˜æ˜¯æ²¡æœ‰ä¸€ä¸ªé€‚åˆæˆ‘ï¼Œèƒ½å¤Ÿå°†pdfã€ç½‘é¡µã€æ‘˜å½•ç­‰çš„ä¿¡æ¯å½¢æˆä¸€ä¸ªå¯è§†åŒ–çš„çŸ¥è¯†ç½‘ç»œï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯æ–¹æ³•ä¸å¯¹å§ã€‚</p><p>ä¸è¿‡ï¼Œè¿™ç§ä¸æ–­æ¢ç´¢çš„ç²¾ç¥å…¶å®æ˜¯è®©è‡ªå·±ä¿æŒå¥½å¥‡ï¼Œä¿æŒåˆå¿ƒï¼Œä¿æŒåŠ¨åŠ›å§ï¼Œè€Œä¸è‡³äºå±ˆæœäºå¹²æ¯çš„æ¬è¿å·¥ä½œä¸­ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ‚ é—²è°ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çŸ¥è¯†ä½“ç³» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>uniappå¾®ä¿¡å°ç¨‹åºcallMethodè°ƒç ”è®°å½•</title>
      <link href="/2021/02/25/uniapp%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8FcallMethod%E8%B0%83%E7%A0%94%E8%AE%B0%E5%BD%95/"/>
      <url>/2021/02/25/uniapp%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8FcallMethod%E8%B0%83%E7%A0%94%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h1 id="å®˜æ–¹æ¨¡æ¿é¡¹ç›®æ­å»º"><a href="#å®˜æ–¹æ¨¡æ¿é¡¹ç›®æ­å»º" class="headerlink" title="å®˜æ–¹æ¨¡æ¿é¡¹ç›®æ­å»º"></a>å®˜æ–¹æ¨¡æ¿é¡¹ç›®æ­å»º</h1><p><a href="https://uniapp.dcloud.io/collocation/auto/quick-start">uni-appå®˜ç½‘</a></p><p>è¿™é‡Œæ­å»ºèµ·æ¥çš„æ˜¯å®˜æ–¹é¡¹ç›®ï¼Œä¾¿äºç ”ç©¶è‡ªå¸¦çš„æµ‹è¯•api</p><h2 id="å‡†å¤‡æ¨¡æ¿"><a href="#å‡†å¤‡æ¨¡æ¿" class="headerlink" title="å‡†å¤‡æ¨¡æ¿"></a>å‡†å¤‡æ¨¡æ¿</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…¨å±€å®‰è£…vue-cli</span></span><br><span class="line">npm install -g @vue/cli</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºé¡¹ç›®ï¼Œé€‰æ‹©Hello uni-appæ¨¡æ¿</span></span><br><span class="line">vue create -p dcloudio/uni-preset-vue<span class="comment">#alpha my-project</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…æµ‹è¯•ä¾èµ–åŒ…</span></span><br><span class="line">npm install @dcloudio/uni-automator --save-dev</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹é…ç½®"><a href="#ä¿®æ”¹é…ç½®" class="headerlink" title="ä¿®æ”¹é…ç½®"></a>ä¿®æ”¹é…ç½®</h2><p>ä¿®æ”¹<code>jest.config.js</code> ä¸­çš„<code>testEnvironmentOptions</code> ï¼Œæ·»åŠ ä»¥ä¸‹é…ç½®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">testEnvironmentOptions: &#123;</span><br><span class="line">    <span class="string">&quot;mp-weixin&quot;</span>: &#123;</span><br><span class="line">      port: 9420, // é»˜è®¤ 9420</span><br><span class="line">      account: <span class="string">&quot;&quot;</span>, // æµ‹è¯•è´¦å·</span><br><span class="line">      args: <span class="string">&quot;&quot;</span>, // æŒ‡å®šå¼€å‘è€…å·¥å…·å‚æ•°</span><br><span class="line">      cwd: <span class="string">&quot;D:/software/å¾®ä¿¡webå¼€å‘è€…å·¥å…·&quot;</span>, // æŒ‡å®šå¼€å‘è€…å·¥å…·å·¥ä½œç›®å½•</span><br><span class="line">      launch: <span class="literal">true</span>, // æ˜¯å¦ä¸»åŠ¨æ‹‰èµ·å¼€å‘è€…å·¥å…·</span><br><span class="line">      teardown: <span class="string">&quot;disconnect&quot;</span>, // å¯é€‰å€¼ <span class="string">&quot;disconnect&quot;</span>|<span class="string">&quot;close&quot;</span> è¿è¡Œæµ‹è¯•ç»“æŸåï¼Œæ–­å¼€å¼€å‘è€…å·¥å…·æˆ–å…³é—­å¼€å‘è€…å·¥å…·</span><br><span class="line">      remote: <span class="literal">false</span>, // æ˜¯å¦çœŸæœºè‡ªåŠ¨åŒ–æµ‹è¯•</span><br><span class="line">      executablePath: <span class="string">&quot;D:/software/å¾®ä¿¡webå¼€å‘è€…å·¥å…·/cli.bat&quot;</span>, // å¼€å‘è€…å·¥å…·cliè·¯å¾„ï¼Œé»˜è®¤ä¼šè‡ªåŠ¨æŸ¥æ‰¾,  windows: C:/Program Files (x86)/Tencent/å¾®ä¿¡webå¼€å‘è€…å·¥å…·/cli.bat<span class="string">&quot;, mac: /Applications/wechatwebdevtools.app/Contents/MacOS/cli</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br></pre></td></tr></table></figure><h2 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run <span class="built_in">test</span>:mp-weixin</span><br></pre></td></tr></table></figure><p><em>å¦‚æœä¸€ç›´å¡åœ¨ç¼–è¯‘åçš„ç¬¬ä¸€æ¡RUNSï¼Œå¯ä»¥æ‰‹åŠ¨å¯åŠ¨ä¸€ä¸‹å¾®ä¿¡å¼€å‘è€…å·¥å…·</em></p><h1 id="å…³äºcallMethod"><a href="#å…³äºcallMethod" class="headerlink" title="å…³äºcallMethod"></a>å…³äºcallMethod</h1><p>è¿™é‡Œç ”ç©¶æ˜¯pageçš„callMethodæ–¹æ³•</p><p><a href="https://uniapp.dcloud.io/collocation/auto/api">uni-appå®˜ç½‘</a></p><p><img src="/2021/02/25/uniapp%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8FcallMethod%E8%B0%83%E7%A0%94%E8%AE%B0%E5%BD%95/Untitled.png" alt></p><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>è¿™é‡Œæ”¯æŒ<code>.nvue</code>å’Œ<code>.vue</code>æ–‡ä»¶ä¸­çš„<code>methods: &#123;&#125;</code>é‡Œé¢å®šä¹‰çš„æ–¹æ³•</p><p>å…³äºä¸¤è€…åŒºåˆ«å¯çœ‹<a href="https://ask.dcloud.net.cn/question/69854">https://ask.dcloud.net.cn/question/69854</a></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">describe(<span class="string">&#x27;pages/tabBar/component/component.nvue&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> page</span><br><span class="line">    beforeAll(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">        <span class="comment">// é‡æ–°reLaunchè‡³é¦–é¡µï¼Œå¹¶è·å–é¦–é¡µpageå¯¹è±¡ï¼ˆå…¶ä¸­ program æ˜¯uni-automatorè‡ªåŠ¨æ³¨å…¥çš„å…¨å±€å¯¹è±¡ï¼‰</span></span><br><span class="line">        page = <span class="keyword">await</span> program.reLaunch(<span class="string">&#x27;/pages/tabBar/component/component&#x27;</span>)</span><br><span class="line">        <span class="keyword">await</span> page.waitFor(<span class="number">1000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    it(<span class="string">&#x27;test-callmethod&#x27;</span>, <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> page = <span class="keyword">await</span> program.currentPage()</span><br><span class="line">        <span class="keyword">await</span> page.callMethod(<span class="string">&#x27;testCallMethod&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line"><span class="function"><span class="title">testCallMethod</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;success&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åŸç†è§£æ"><a href="#åŸç†è§£æ" class="headerlink" title="åŸç†è§£æ"></a>åŸç†è§£æ</h2><p>æœ¬è´¨æ˜¯uni-automatorè‡ªåŠ¨æ³¨å…¥äº†programå¯¹è±¡ï¼Œå‘å¾®ä¿¡å¼€å‘è€…å·¥å…·å‘é€ws(Websocket)è¯·æ±‚ï¼Œè°ƒç”¨å…¶<code>Page.callMethod</code> æ–¹æ³•</p><h3 id="ä½¿ç”¨webstormè°ƒè¯•"><a href="#ä½¿ç”¨webstormè°ƒè¯•" class="headerlink" title="ä½¿ç”¨webstormè°ƒè¯•"></a>ä½¿ç”¨webstormè°ƒè¯•</h3><p><img src="/2021/02/25/uniapp%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8FcallMethod%E8%B0%83%E7%A0%94%E8%AE%B0%E5%BD%95/Untitled%201.png" alt></p><p>æ·»åŠ ä¸Šè¿°å¯åŠ¨é…ç½®åå°±å¯ä»¥æ‰“æ–­ç‚¹è°ƒè¯•ä»£ç </p><p>å‘é€wsè¯·æ±‚çš„åœ°æ–¹åœ¨äº</p><p><img src="/2021/02/25/uniapp%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8FcallMethod%E8%B0%83%E7%A0%94%E8%AE%B0%E5%BD%95/Untitled%202.png" alt></p><p>è¿™é‡ŒpageIdæ˜¯å‘é€<code>getcurrentPage</code> wsè¯·æ±‚å¾—åˆ°çš„</p><p>å¤§æ¦‚è¯·æ±‚è¿‡æ¥çš„è·¯å¾„æ˜¯ï¼Œè¿™é‡Œé™¤äº†wsåŒ…å¤–ï¼Œå…¶ä½™çš„æ–¹æ³•éƒ½åœ¨<code>dist/index.js</code> ï¼Œä¹Ÿå°±æ˜¯ç¼–è¯‘æ„å»ºåçš„æ–‡ä»¶</p><p><img src="/2021/02/25/uniapp%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8FcallMethod%E8%B0%83%E7%A0%94%E8%AE%B0%E5%BD%95/Untitled%203.png" alt></p><h3 id="Page-3-not-exists"><a href="#Page-3-not-exists" class="headerlink" title="Page[3] not exists"></a>Page[3] not exists</h3><p>åˆšå¼€å§‹çš„æ—¶å€™ä½¿ç”¨å®˜æ–¹çš„ç¤ºä¾‹ä¸­</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">await</span> page.callMethod(<span class="string">&#x27;onShareAppMessage&#x27;</span>)</span><br></pre></td></tr></table></figure><p><img src="/2021/02/25/uniapp%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8FcallMethod%E8%B0%83%E7%A0%94%E8%AE%B0%E5%BD%95/Untitled%204.png" alt></p><p>é‡åˆ°äº†æŠ¥é”™ï¼Œæ ¹æ®ä¸Šé¢åŸç†åˆ†æï¼Œidæ˜¯ç”±å¾®ä¿¡å¼€å‘è€…å·¥å…·æä¾›çš„ï¼Œåº”è¯¥ä¸ä¼šæ‰¾ä¸åˆ°page</p><p>é€šè¿‡æœç´¢<code>not exists</code> å…³é”®å­—ï¼Œå°†ç›®æ ‡å®šä½åˆ°äº†distæ–‡ä»¶å¤¹é‡Œé¢çš„ä¸€ä¸ªæ–‡ä»¶</p><p><img src="/2021/02/25/uniapp%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8FcallMethod%E8%B0%83%E7%A0%94%E8%AE%B0%E5%BD%95/Untitled%205.png" alt></p><p>è¿™é‡Œçš„å˜é‡tå…¶å®wsä¼ è¾“è¿‡æ¥çš„å†…å®¹</p><p><img src="/2021/02/25/uniapp%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8FcallMethod%E8%B0%83%E7%A0%94%E8%AE%B0%E5%BD%95/Untitled%206.png" alt></p><p>åœ¨<code>return new Promise</code>é‡Œé¢<code>T()</code>ä¼šå¯¹è¦callçš„æ–¹æ³•è¿›è¡ŒéªŒè¯</p><p><img src="/2021/02/25/uniapp%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8FcallMethod%E8%B0%83%E7%A0%94%E8%AE%B0%E5%BD%95/Untitled%207.png" alt></p><p><img src="/2021/02/25/uniapp%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8FcallMethod%E8%B0%83%E7%A0%94%E8%AE%B0%E5%BD%95/Untitled%208.png" alt></p><p>ä¸Šé¢åˆ†åˆ«æ˜¯tï¼Œnï¼Œtå‚æ•°çš„å€¼</p><p>è¿™é‡Œtå…¶å®å°±æ˜¯å¯ä»¥callçš„æ–¹æ³•åˆ—è¡¨ï¼Œnæ˜¯æƒ³è¦è°ƒç”¨çš„æ–¹æ³•ï¼Œæ‰¾ä¸åˆ°çš„è¯ä¼šæŠ›å‡ºå¼‚å¸¸</p><p><img src="/2021/02/25/uniapp%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8FcallMethod%E8%B0%83%E7%A0%94%E8%AE%B0%E5%BD%95/Untitled%209.png" alt></p><p>ä»è¿™é‡Œçœ‹å‡ºï¼Œæ˜¯å› ä¸ºæ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯<code>page not exists</code></p><p>åé¢æ ¹æ®ä¸Šå›¾æ–¹æ³•åˆ—è¡¨ï¼Œç¡®å®šäº†å¯ä»¥è°ƒç”¨çš„æ–¹æ³•æœ‰å“ªäº›</p><h1 id="æœŸé—´é‡åˆ°çš„é—®é¢˜"><a href="#æœŸé—´é‡åˆ°çš„é—®é¢˜" class="headerlink" title="æœŸé—´é‡åˆ°çš„é—®é¢˜"></a>æœŸé—´é‡åˆ°çš„é—®é¢˜</h1><ul><li>ä½¿ç”¨<code>npm run test:weixin</code> æœ‰æ—¶å€™ä¸èƒ½å¯åŠ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼Œä¸€ç›´å¡ä½ï¼Œé‡æ–°æ‰§è¡Œå‘½ä»¤å³å¯è§£å†³</li><li>å‡ºç°äº†å‡ æ¬¡ä¿®æ”¹ç”¨ä¾‹ä¸ç”Ÿæ•ˆçš„æƒ…å†µï¼Œéœ€è¦æŠŠdistæ–‡ä»¶å¤¹åˆ é™¤åæ‰ç”Ÿæ•ˆï¼Œæˆ–è€…åœ¨<code>jest.config.js</code> çš„<code>testEnvironmentOptions</code> æ·»åŠ <code>compile: true</code> å‚æ•°</li><li>å¦‚æœ<code>npm run test:mp-weixin</code> æ—¶æç¤º<code>Wechat web devTools not found, please specify executablePath option</code> ï¼Œå¯èƒ½æ˜¯è·¯å¾„å¡«é”™äº†ï¼Œè€Œä¸æ˜¯æ²¡æœ‰å¡«è·¯å¾„</li></ul><h1 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h1><ul><li>uniappå¯¹è‡ªåŠ¨åŒ–æ–¹é¢æ”¯æŒåº¦æ¯”è¾ƒé«˜ï¼Œå’Œå¾®ä¿¡å®˜æ–¹çš„automatorç›¸ä¼¼åº¦å¾ˆé«˜ï¼Œå¯¹åº”çš„å¯æ“ä½œç©ºé—´ä¹Ÿå¾ˆé«˜ã€‚åœ¨æœ¬æ–‡ä¸­æé«˜çš„callMethodï¼Œå¯ä»¥è®©æˆ‘ä»¬è¿›ä¸€æ­¥æ·±å…¥æµ‹è¯•å‰ç«¯ç¨‹åºæé«˜æµ‹è¯•è¦†ç›–ç‡å’Œé€Ÿåº¦ï¼Œæ¯”å¦‚jsé€»è¾‘å±‚ï¼Œè€Œä¸æ˜¯åªåœç•™åœ¨UIæµ‹è¯•é˜¶æ®µï¼Œè¿›ä¸€æ­¥æ¥è¿‘åˆ†å±‚æµ‹è¯•ã€‚</li><li>è¿™ä¸ªå’Œmpvueçš„æµ‹è¯•é¡µæ–¹æ¡ˆæœ‰ç‚¹ç±»ä¼¼ï¼Œåªä¸è¿‡è¿™ä¸ªæ›´ä¸ºç®€ä¾¿ï¼Œç›´æ¥æä¾›äº†æ”¯æŒï¼Œä½†æ˜¯æœ€ç»ˆç»“æœéƒ½æ˜¯è°ƒåˆ°æŸä¸ªå‡½æ•°</li><li>è¿™é‡Œå¯¹æ¯”UIå±‚é¢æ¥è®²ï¼ŒUIå±‚é¢æ›´å¤šåªæ˜¯éªŒè¯ä¸€ä¸ªåŠŸèƒ½å¯ä¸å¯ç”¨ï¼Œæ¯”å¦‚æŒ‰ä¸€ä¸‹æŒ‰é’®ï¼Œè§‚å¯Ÿååº”æ˜¯å¦æ­£å¸¸ï¼Œä½†æ˜¯é‡Œé¢æä¾›çš„å…¶ä»–åŠŸèƒ½å¯èƒ½æ²¡æœ‰è¿›ä¸€æ­¥å»æµ‹è¯•ã€‚ä½†æ˜¯å¯¹äºè¿™ä¸ªæ¥è®²ï¼Œå¯ä»¥æ ¹æ®ä¸åŒçš„å‚æ•°å»éªŒè¯æ‰€æœ‰çš„åŠŸèƒ½çš„æ­£å¸¸æ€§ï¼ˆå‰ææ˜¯æ”¯æŒéªŒè¯ï¼‰</li></ul>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> uniapp </tag>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLæ…¢æŸ¥è¯¢ä¼˜åŒ–</title>
      <link href="/2021/01/30/MySQL%E6%85%A2%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96/"/>
      <url>/2021/01/30/MySQL%E6%85%A2%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼˜åŒ–å‡ºå‘ç‚¹"><a href="#ä¼˜åŒ–å‡ºå‘ç‚¹" class="headerlink" title="ä¼˜åŒ–å‡ºå‘ç‚¹"></a>ä¼˜åŒ–å‡ºå‘ç‚¹</h1><p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¸€èˆ¬æ˜¯è€ƒè™‘ç´¢å¼•ï¼Œä½†æ˜¯å…¶ä»–æ–¹é¢ä¹Ÿå€¼å¾—è€ƒè™‘ã€‚</p><h2 id="æ•°æ®åº“çº§åˆ«"><a href="#æ•°æ®åº“çº§åˆ«" class="headerlink" title="æ•°æ®åº“çº§åˆ«"></a>æ•°æ®åº“çº§åˆ«</h2><ul><li>è¡¨çš„ç»“æ„ï¼šåˆ—æ˜¯å¦å…·æœ‰æ­£ç¡®çš„æ•°æ®ç±»å‹ï¼Ÿè¡¨çš„ç»“æ„æ˜¯å¦è®¾è®¡æ­£ç¡®ï¼Œä¾‹å¦‚ï¼Œé¢‘ç¹æ›´æ–°çš„åº”ç”¨çš„è¡¨ç»“æ„åº”è¯¥æ˜¯å°‘åˆ—å¤šè¡¨ï¼Œåˆ†æå¤§é‡æ•°æ®çš„åº”ç”¨åº”è¯¥æ˜¯å°‘è¡¨å¤šåˆ—</li><li>æ˜¯å¦åˆ›å»ºç´¢å¼•ï¼Ÿç´¢å¼•æ˜¯å¦æœ‰ç”¨ï¼Ÿ</li><li>æ˜¯å¦é€‰æ‹©äº†åˆé€‚çš„å­˜å‚¨å¼•æ“ï¼Œè¿™ä¸ªç°åœ¨ä¸€èˆ¬æ˜¯<code>InnoDB</code></li><li>è¡¨æ˜¯å¦ä½¿ç”¨æ­£ç¡®çš„è¡Œæ ¼å¼(<code>ROW_FORMAT</code>)ï¼Ÿç‰¹åˆ«æ˜¯ROW_FORMATä¸º<code>COMPRESSED</code> çš„è¡¨ä½¿ç”¨è¾ƒå°‘çš„ç£ç›˜ç©ºé—´ï¼Œå› æ­¤éœ€è¦è¾ƒå°‘çš„ç£ç›˜I/Oæ¥è¯»å†™æ•°æ®</li><li>åº”ç”¨ç¨‹åºæ˜¯å¦ä½¿ç”¨äº†é€‚å½“çš„é”ç­–ç•¥ï¼Ÿä¾‹å¦‚åœ¨æŸç§æƒ…å†µä¸‹å…è®¸å…±äº«è¯»(<code>shared access</code>)ï¼Œä»¥ä¾¿æ•°æ®åº“æ“ä½œèƒ½å¤ŸåŒæ—¶è¿›è¡Œ</li><li>ç¼“å­˜å¤§å°æ˜¯å¦è®¾ç½®æ­£ç¡®ï¼Ÿè¶³å¤Ÿå¤§çš„ç¼“å­˜èƒ½å¤Ÿå®¹çº³ç»å¸¸è®¿é—®çš„æ•°æ®ï¼Œä½†æ˜¯åˆä¸èƒ½è¿‡å¤§ï¼Œè¿‡å¤§å¯¼è‡´ä½¿ç”¨è™šæ‹Ÿå†…å­˜I/Oæ€§èƒ½ä¸‹é™</li></ul><h2 id="ç¡¬ä»¶çº§åˆ«"><a href="#ç¡¬ä»¶çº§åˆ«" class="headerlink" title="ç¡¬ä»¶çº§åˆ«"></a>ç¡¬ä»¶çº§åˆ«</h2><p>ç£ç›˜ç§ç±»ã€é€Ÿåº¦ã€CPUã€å†…å­˜ç­‰å› ç´ </p><h1 id="æ•°æ®ç±»å‹ä¼˜åŒ–"><a href="#æ•°æ®ç±»å‹ä¼˜åŒ–" class="headerlink" title="æ•°æ®ç±»å‹ä¼˜åŒ–"></a>æ•°æ®ç±»å‹ä¼˜åŒ–</h1><p>å‡ ä¸ªç®€å•åŸåˆ™ï¼š</p><ol><li><p><strong>æ›´å°çš„é€šå¸¸æ›´å¥½</strong></p><p> åº”è¯¥å°½é‡ä½¿ç”¨å¯ä»¥æ­£ç¡®å­˜å‚¨æ•°æ®çš„æœ€å°æ•°æ®ç±»å‹ã€‚æ›´å°çš„æ•°æ®ç±»å‹å ç”¨æ›´å°‘ç£ç›˜ã€å†…å­˜å’ŒCPUç¼“å­˜ï¼Œå¹¶ä¸”å¤„ç†æ—¶éœ€è¦çš„CPUå‘¨æœŸæ›´å°‘ã€‚ï¼ˆç¡®ä¿æ²¡æœ‰ä½ä¼°ï¼Œå¦‚æœæ— æ³•ç¡®å®šå“ªä¸ªæ•°æ®ç±»å‹æœ€å¥½ï¼Œå°±é€‰æ‹©ä¸ä¼šè¶…è¿‡èŒƒå›´çš„æœ€å°ç±»å‹ï¼‰</p></li><li><p><strong>ç®€å•å°±å¥½</strong></p><p>  ç®€å•ç±»å‹æ“ä½œé€šå¸¸éœ€è¦æ›´å°‘çš„CPUå‘¨æœŸã€‚ä¾‹å¦‚æ•´å‹æ¯”å­—ç¬¦æ“ä½œä»£ä»·æ›´ä½ï¼Œå› ä¸ºå­—ç¬¦é›†å’Œæ’åºè§„åˆ™æ—¶å­—ç¬¦æ¯”è¾ƒæ¯”æ•´å‹æ¯”è¾ƒæ›´å¤æ‚ã€‚æ¯”å¦‚ä½¿ç”¨MySQLçš„å†…ç½®ç±»å‹ï¼ˆdate,time,datatimeï¼‰è€Œä¸æ˜¯å­—ç¬¦ä¸²æ¥å­˜å‚¨æ—¶é—´å’Œæ—¥æœŸ</p></li><li><p><strong>å°½é‡é¿å…NULL</strong></p><p> å¯ä¸ºNULLçš„åˆ—è¢«ç´¢å¼•æ—¶ä½¿ç”¨æ›´å¤šçš„å­˜å‚¨ç©ºé—´ï¼Œåœ¨MySQLé‡Œéœ€è¦è¢«ç‰¹æ®Šå¤„ç†ã€‚å½“å¯ä¸ºNULLçš„åˆ—è¢«ç´¢å¼•æ—¶ï¼Œæ¯ä¸ªç´¢å¼•è®°å½•éœ€è¦é¢å¤–çš„å­—èŠ‚è®°å½•ã€‚ï¼ˆæ³¨æ„ï¼Œé€šå¸¸æŠŠå¯NULLçš„åˆ—æ”¹ä¸ºNOT NULLå¸¦æ¥çš„æ€§èƒ½æå‡æ¯”è¾ƒå°ï¼Œä½†æ˜¯å¦‚æœè®¡åˆ’åœ¨åˆ—ä¸Šå»ºç´¢å¼•ï¼Œå°±åº”è¯¥å°½é‡é¿å…è®¾è®¡æˆå¯ä¸ºNULLçš„åˆ—ï¼‰</p></li></ol><h1 id="ç´¢å¼•å»ºç«‹ç­–ç•¥"><a href="#ç´¢å¼•å»ºç«‹ç­–ç•¥" class="headerlink" title="ç´¢å¼•å»ºç«‹ç­–ç•¥"></a>ç´¢å¼•å»ºç«‹ç­–ç•¥</h1><p>ä¸€èˆ¬åŠ ç´¢å¼•å°±èƒ½è§£å†³äº†å¾ˆå¤šæ…¢æŸ¥è¯¢é—®é¢˜</p><p>ä¸‹é¢é»˜è®¤è®²çš„ç´¢å¼•éƒ½æ˜¯btreeç´¢å¼•</p><h3 id="ç‹¬ç«‹åˆ—"><a href="#ç‹¬ç«‹åˆ—" class="headerlink" title="ç‹¬ç«‹åˆ—"></a>ç‹¬ç«‹åˆ—</h3><p>ç´¢å¼•åˆ—ä¸èƒ½æ˜¯è¡¨è¾¾å¼ä¸€éƒ¨åˆ†ï¼Œä¹Ÿä¸èƒ½æ˜¯å‡½æ•°å‚æ•°ï¼Œå¦åˆ™MySQLä¸ä¼šä½¿ç”¨ç´¢å¼•</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ... <span class="keyword">where</span> id<span class="operator">+</span><span class="number">1</span><span class="operator">=</span><span class="number">5</span>;</span><br><span class="line"><span class="keyword">select</span> ... <span class="keyword">where</span> TO_DAYS(<span class="built_in">CURRENT_DATE</span>) <span class="operator">-</span> TO_DAYS(date_col)<span class="operator">&lt;=</span><span class="number">10</span>;</span><br></pre></td></tr></table></figure><h3 id="å‰ç¼€ç´¢å¼•å’Œåç¼€ç´¢å¼•"><a href="#å‰ç¼€ç´¢å¼•å’Œåç¼€ç´¢å¼•" class="headerlink" title="å‰ç¼€ç´¢å¼•å’Œåç¼€ç´¢å¼•"></a>å‰ç¼€ç´¢å¼•å’Œåç¼€ç´¢å¼•</h3><ul><li><p>ç´¢å¼•å¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œä¼šè®©ç´¢å¼•å˜å¾—å¤§ä¸”æ…¢ï¼Œé€šå¸¸å¯ä»¥ç´¢å¼•å¼€å§‹çš„éƒ¨åˆ†å­—ç¬¦ï¼ˆå‰ç¼€ï¼‰ï¼Œå¯ä»¥å¤§å¤§èŠ‚çº¦ç´¢å¼•ç©ºé—´ï¼Œæé«˜ç´¢å¼•æ•ˆç‡</p>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> index table_index <span class="keyword">on</span> atdata_casedataon(<span class="keyword">user</span>(<span class="number">3</span>));</span><br></pre></td></tr></table></figure><p>  é€‰æ‹©çš„å‰ç¼€å°½é‡è®©å»ºç«‹çš„ç´¢å¼•åŒºåˆ†åº¦æ›´é«˜ã€‚å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹æ³•é€‰æ‹©åˆé€‚çš„å‰ç¼€ï¼Œå¦‚æœé€‰æ‹©æ€§èƒ½å¤Ÿæ¥è¿‘0.031ï¼ŒåŸºæœ¬ä¸Šå°±å¯ç”¨ã€‚å¦‚æœå…¨æ˜¯0ï¼Œå°±æ²¡æœ‰å¿…è¦ç”¨è¿™ä¸ªäº†ã€‚</p>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">    <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> <span class="keyword">LEFT</span>(<span class="keyword">user</span>, <span class="number">1</span>))<span class="operator">/</span><span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">as</span> user1,</span><br><span class="line">    <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> <span class="keyword">LEFT</span>(<span class="keyword">user</span>, <span class="number">2</span>))<span class="operator">/</span><span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">as</span> user2,</span><br><span class="line">    <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> <span class="keyword">LEFT</span>(<span class="keyword">user</span>, <span class="number">3</span>))<span class="operator">/</span><span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">as</span> user3</span><br><span class="line"><span class="keyword">from</span> atdata_casedata</span><br></pre></td></tr></table></figure><p>  ç¼ºç‚¹æ˜¯<strong>æ— æ³•ä½¿ç”¨å‰ç¼€ç´¢å¼•åšGroup byå’ŒOrder byï¼Œä¹Ÿæ— æ³•ä½¿ç”¨å‰ç¼€ç´¢å¼•åšè¦†ç›–ç´¢å¼•</strong></p></li><li><p>åç¼€ç´¢å¼•åœ¨æŸäº›æƒ…å†µä¸‹ä¼šæœ‰ç”¨é€”ï¼Œæ¯”å¦‚æ‰¾åˆ°æŸä¸ªåŸŸåæ‰€æœ‰ç”µå­é‚®ç®±åœ°å€ï¼Œä½†æ˜¯MySQLåŸç”Ÿä¸æ”¯æŒåå‘ç´¢å¼•ï¼Œä½†æ˜¯å¯ç”¨æŠŠå­—ç¬¦ä¸²åè½¬åå­˜å‚¨</p></li></ul><h3 id="å¤šåˆ—ç´¢å¼•"><a href="#å¤šåˆ—ç´¢å¼•" class="headerlink" title="å¤šåˆ—ç´¢å¼•"></a>å¤šåˆ—ç´¢å¼•</h3><p>åœ¨å¤šä¸ªåˆ—ä¸Šå»ºç«‹ç‹¬ç«‹çš„å•åˆ—ç´¢å¼•å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¸èƒ½æé«˜æŸ¥è¯¢æ€§èƒ½ï¼Œæ—§ç‰ˆæœ¬MySQLä¸­åªä¼šä½¿ç”¨å…¶ä¸­ä¸€ä¸ªç´¢å¼•ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT...WHERE name <span class="operator">=</span> x <span class="keyword">AND</span> age <span class="operator">=</span> t</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> INDEX name_index <span class="keyword">ON</span> <span class="keyword">table</span> (name);</span><br><span class="line"><span class="keyword">CREATE</span> INDEX age_index <span class="keyword">ON</span> <span class="keyword">table</span> (age);</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> INDEX name_age_index <span class="keyword">ON</span> <span class="keyword">table</span> (name, age);</span><br></pre></td></tr></table></figure><p>è™½ç„¶æ–°ç‰ˆæœ¬æœ‰ä¼˜åŒ–ï¼Œä½†æ˜¯åœ¨æœ‰å¤šä¸ªæŸ¥è¯¢æ¡ä»¶æƒ…å†µä¸‹æœ€å¥½ä½¿ç”¨å¤šåˆ—ç´¢å¼•ï¼Œä½¿å…¶ç´¢å¼•åˆ°æ‰€æœ‰æ¡ä»¶åˆ—ã€‚</p><h3 id="é€‰æ‹©åˆé€‚çš„ç´¢å¼•åˆ—é¡ºåº"><a href="#é€‰æ‹©åˆé€‚çš„ç´¢å¼•åˆ—é¡ºåº" class="headerlink" title="é€‰æ‹©åˆé€‚çš„ç´¢å¼•åˆ—é¡ºåº"></a>é€‰æ‹©åˆé€‚çš„ç´¢å¼•åˆ—é¡ºåº</h3><p>ç´¢å¼•åˆ—çš„é¡ºåºæ„å‘³ç€é¦–å…ˆæŒ‰ç…§æœ€å·¦åˆ—è¿›è¡Œæ’åºï¼Œå…¶æ¬¡æ˜¯ç¬¬äºŒåˆ—ï¼Œé‚£ä¹ˆå¦‚ä½•é€‰æ‹©åˆ—çš„é¡ºåºï¼Œæœ‰ä¸€ä¸ªç»éªŒæ³•åˆ™æ˜¯å°†é€‰æ‹©æ€§ï¼ˆå€¼ä¸åŒçš„ä¸ªæ•°ï¼‰æœ€é«˜çš„åˆ—æ”¾åˆ°ç´¢å¼•æœ€å‰åˆ—ï¼ˆæ›´å¤šé€‚ç”¨äºä¸è€ƒè™‘orderå’Œgroupbyï¼‰</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> payment <span class="keyword">WHERE</span> staff_id <span class="operator">=</span> <span class="number">2</span> <span class="keyword">and</span> customer_id <span class="operator">=</span> <span class="number">58</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">   <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> staff_id) <span class="keyword">AS</span> count_staff_id, </span><br><span class="line">   <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> customer_id) <span class="keyword">AS</span> count_customer_id</span><br><span class="line"><span class="keyword">FROM</span> payment</span><br><span class="line"></span><br><span class="line">count_staff_id: <span class="number">1001</span></span><br><span class="line">count_customer_id: <span class="number">1241334</span></span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆæ­¤æ—¶é€‰æ‹©customer_idä¼šæ›´å¥½ã€‚</p><p>æˆ–è€…æœ‰ä¸ªæ›´é€šç”¨çš„åšæ³•æ˜¯æŒ‰ç…§æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™ã€‚MySQLä¼šä¸€ç›´å‘å³åŒ¹é…ç›´åˆ°é‡åˆ°èŒƒå›´æŸ¥è¯¢(&gt;ã€&lt;ã€betweenã€like)å°±åœæ­¢åŒ¹é…ï¼Œæ¯”å¦‚a = 1 and b = 2 and c &gt; 3 and d = 4 å¦‚æœå»ºç«‹(a,b,c,d)é¡ºåºçš„ç´¢å¼•ï¼Œdæ˜¯ç”¨ä¸åˆ°ç´¢å¼•çš„ï¼Œå¦‚æœå»ºç«‹(a,b,d,c)çš„ç´¢å¼•åˆ™éƒ½å¯ä»¥ç”¨åˆ°ï¼Œa,b,dçš„é¡ºåºå¯ä»¥ä»»æ„è°ƒæ•´ã€‚=å’Œinå¯ä»¥ä¹±åºï¼Œæ¯”å¦‚a = 1 and b = 2 and c = 3 å»ºç«‹(a,b,c)ç´¢å¼•å¯ä»¥ä»»æ„é¡ºåºï¼ŒMySQLçš„æŸ¥è¯¢ä¼˜åŒ–å™¨ä¼šå¸®ä½ ä¼˜åŒ–æˆç´¢å¼•å¯ä»¥è¯†åˆ«çš„å½¢å¼</p><h3 id="ä½¿ç”¨ç´¢å¼•ä¼˜åŒ–order-by"><a href="#ä½¿ç”¨ç´¢å¼•ä¼˜åŒ–order-by" class="headerlink" title="ä½¿ç”¨ç´¢å¼•ä¼˜åŒ–order by"></a>ä½¿ç”¨ç´¢å¼•ä¼˜åŒ–order by</h3><p>æ¡ä»¶ï¼š</p><ul><li>å½“ç´¢å¼•åˆ—çš„é¡ºåºå’Œorder byå­å¥çš„é¡ºåºå®Œå…¨ä¸€è‡´ï¼Œå¹¶ä¸”æ‰€æœ‰åˆ—æ’åºæ–¹å‘ä¸€è‡´ï¼ˆæœ‰ä¸€ç‰¹æ®Šæƒ…å†µï¼Œå‰é¢åˆ—ä¸ºå¸¸é‡ï¼‰</li><li>å…³è”å¤šå¼ è¡¨ï¼Œorder byå­å¥å¼•ç”¨çš„å­—æ®µå…¨éƒ¨åœ¨ç¬¬ä¸€ä¸ªè¡¨</li></ul><p>æ¯”å¦‚æœ‰ä¸€ç´¢å¼•<code>KEY a_b_c_index(a,b,c)</code> </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WHERE</span> a <span class="operator">=</span> <span class="number">1</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> b  #å‰é¢åˆ—ä¸ºå¸¸é‡,<span class="literal">true</span></span><br><span class="line"><span class="keyword">WHERE</span> a <span class="operator">=</span> <span class="number">1</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> b,c #å‰é¢åˆ—ä¸ºå¸¸é‡,<span class="literal">true</span></span><br><span class="line"><span class="keyword">WHERE</span> a <span class="operator">&gt;</span> <span class="number">1</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> b,c #å‰é¢åˆ—ä¸ºèŒƒå›´æŸ¥è¯¢,<span class="literal">false</span></span><br><span class="line"><span class="keyword">WHERE</span> a <span class="operator">&gt;</span> <span class="number">1</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> a,b,c #ç´¢å¼•åˆ—é¡ºåºä¸€æ ·,<span class="literal">true</span></span><br><span class="line"><span class="keyword">WHERE</span> a <span class="operator">=</span> <span class="number">1</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> b <span class="keyword">DESC</span>,c <span class="keyword">ASC</span> #æ‰€æœ‰åˆ—æ’åºæ–¹å¼ä¸ä¸€æ ·,<span class="literal">false</span></span><br><span class="line"><span class="keyword">WHERE</span> a <span class="operator">=</span> <span class="number">1</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> c #æ²¡æœ‰ç¬¦åˆæœ€å·¦å‰ç¼€,<span class="literal">false</span></span><br></pre></td></tr></table></figure><h3 id="ä¼˜åŒ–group-by"><a href="#ä¼˜åŒ–group-by" class="headerlink" title="ä¼˜åŒ–group by"></a>ä¼˜åŒ–group by</h3><p>group byæ“ä½œåœ¨æ²¡æœ‰åˆé€‚çš„ç´¢å¼•å¯ç”¨æ—¶ï¼Œé€šå¸¸å…ˆæ‰«ææ•´ä¸ªè¡¨æå–æ•°æ®å¹¶åˆ›å»ºä¸€ä¸ªä¸´æ—¶è¡¨ï¼Œç„¶åæŒ‰ç…§group byæŒ‡å®šçš„åˆ—è¿›è¡Œæ’åºï¼Œéœ€è¦é€šè¿‡å»ºç«‹ç´¢å¼•é¿å…åˆ›å»ºä¸´æ—¶è¡¨ï¼Œä¸€èˆ¬ä¼šé€‰æ‹©å¤šåˆ—ç´¢å¼•</p><h3 id="ä¼˜åŒ–èšåˆå‡½æ•°"><a href="#ä¼˜åŒ–èšåˆå‡½æ•°" class="headerlink" title="ä¼˜åŒ–èšåˆå‡½æ•°"></a>ä¼˜åŒ–èšåˆå‡½æ•°</h3><p>å°†æ‰€æœ‰ä½¿ç”¨çš„åˆ—åŒ…æ‹¬åœ¨ç´¢å¼•ä¸­ï¼ˆâ€œè¦†ç›–ç´¢å¼•â€ï¼‰ï¼ŒMySQLä¸éœ€è¦è®¿é—®è¡¨æœ¬èº«ï¼Œå¹¶ä¸”å¯ä»¥ä»…è¯»å–ç´¢å¼•æ¥ç»§ç»­è¿›è¡Œæ“ä½œã€‚</p><p>è¦†ç›–ç´¢å¼•æ˜¯selectçš„æ•°æ®åˆ—åªç”¨ä»ç´¢å¼•ä¸­å°±èƒ½å¤Ÿå–å¾—ï¼Œä¸å¿…è¯»å–æ•°æ®è¡Œï¼Œæ¢å¥è¯è¯´æŸ¥è¯¢åˆ—è¦è¢«æ‰€å»ºçš„ç´¢å¼•è¦†ç›–ã€‚</p><h3 id="é‡å¤ç´¢å¼•"><a href="#é‡å¤ç´¢å¼•" class="headerlink" title="é‡å¤ç´¢å¼•"></a>é‡å¤ç´¢å¼•</h3><p>é¿å…åˆ›å»ºé‡å¤ç´¢å¼•ï¼ˆç›¸åŒçš„åˆ—ä¸ŠæŒ‰ç…§ç›¸åŒçš„é¡ºåºåˆ›å»ºç›¸åŒç±»å‹çš„ç´¢å¼•ï¼‰ï¼ŒMySQLéœ€è¦å•ç‹¬ç»´æŠ¤é‡å¤çš„ç´¢å¼•ï¼Œå¹¶ä¸”ä¼˜åŒ–å™¨åœ¨ä¼˜åŒ–æŸ¥è¯¢çš„æ—¶å€™ä¹Ÿéœ€è¦é€ä¸ªåœ°è¿›è¡Œè€ƒè™‘</p><p>å°½é‡çš„æ‰©å±•ç´¢å¼•ï¼Œä¸è¦æ–°å»ºç´¢å¼•ã€‚æ¯”å¦‚è¡¨ä¸­å·²ç»æœ‰açš„ç´¢å¼•ï¼Œç°åœ¨è¦åŠ (a,b)çš„ç´¢å¼•ï¼Œé‚£ä¹ˆåªéœ€è¦ä¿®æ”¹åŸæ¥çš„ç´¢å¼•å³å¯ã€‚</p><h1 id="æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–"><a href="#æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–"></a>æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–</h1><h3 id="é¿å…è®¿é—®æ‰€æœ‰åˆ—"><a href="#é¿å…è®¿é—®æ‰€æœ‰åˆ—" class="headerlink" title="é¿å…è®¿é—®æ‰€æœ‰åˆ—"></a>é¿å…è®¿é—®æ‰€æœ‰åˆ—</h3><ol><li>åªè¿”å›éœ€è¦çš„åˆ—</li><li>ä½¿ç”¨è¦†ç›–ç´¢å¼•æ¥å‡å°‘æŸ¥è¯¢æ‰«æçš„è¡Œæ•°</li></ol><h3 id="åˆ†è§£å…³è”æŸ¥è¯¢"><a href="#åˆ†è§£å…³è”æŸ¥è¯¢" class="headerlink" title="åˆ†è§£å…³è”æŸ¥è¯¢"></a>åˆ†è§£å…³è”æŸ¥è¯¢</h3><p>åœ¨å¾ˆå¤šåœºæ™¯ä¸‹é€šè¿‡é‡æ„æŸ¥è¯¢å°†å…³è”æ”¾åˆ°åº”ç”¨ç¨‹åºä¸­å°†ä¼šæ›´åŠ é«˜æ•ˆ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tag</span><br><span class="line"><span class="keyword">JOIN</span> tag_post <span class="keyword">ON</span> tag_post_id<span class="operator">=</span>tag.id</span><br><span class="line"><span class="keyword">JOIN</span> post <span class="keyword">ON</span> post.post_id<span class="operator">=</span>post.id</span><br><span class="line"><span class="keyword">WHERE</span> tag.tag<span class="operator">=</span><span class="string">&#x27;mysql&#x27;</span>;</span><br></pre></td></tr></table></figure><p>å¯ä»¥åˆ†è§£æˆä¸‹é¢è¿™äº›æŸ¥è¯¢æ¥ä»£æ›¿ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tag <span class="keyword">WHERE</span> tag<span class="operator">=</span><span class="string">&#x27;mysql&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tag_post <span class="keyword">WHERE</span> tag_id<span class="operator">=</span><span class="number">1234</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> post <span class="keyword">WHERE</span> post_id <span class="keyword">in</span> (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>);</span><br></pre></td></tr></table></figure><ol><li>è®©ç¼“å­˜æ•ˆç‡æ›´é«˜ï¼Œè®¸å¤šåº”ç”¨ç¨‹åºå¯ä»¥æ–¹ä¾¿åœ°ç¼“å­˜å•è¡¨æŸ¥è¯¢å¯¹åº”çš„ç»“æœé›†</li><li>å°†æŸ¥è¯¢åˆ†è§£åï¼Œæ‰§è¡Œå•ä¸ªæŸ¥è¯¢å¯ä»¥å‡å°‘é”çš„ç«äº‰</li><li>æŸ¥è¯¢æœ¬èº«æ•ˆç‡ä¹Ÿå¯èƒ½ä¼šæœ‰æ‰€æå‡ï¼šæ¯”å¦‚ä½¿ç”¨<code>IN()</code> ä»£æ›¿å…³è”æŸ¥è¯¢ï¼Œå¯ä»¥è®©MySQLæŒ‰ç…§IDé¡ºåºè¿›è¡ŒæŸ¥è¯¢ï¼Œè¿™å¯èƒ½æ¯”éšæœºçš„å…³è”è¦æ›´é«˜æ•ˆ</li><li>å‡å°‘å†—ä½™è®°å½•æŸ¥è¯¢ã€‚åœ¨åº”ç”¨å±‚åšå…³è”æŸ¥è¯¢ï¼Œæ„å‘³ç€å¯¹äºæŸæ¡è®°å½•åº”ç”¨åªéœ€è¦æŸ¥è¯¢ä¸€æ¬¡ï¼Œè€Œåœ¨æ•°æ®åº“ä¸­åšå…³è”æŸ¥è¯¢ï¼Œåˆ™å¯èƒ½éœ€è¦é‡å¤åœ°è®¿é—®ä¸€éƒ¨åˆ†æ•°æ®ã€‚</li></ol><h1 id="åŸç†åˆ†æ"><a href="#åŸç†åˆ†æ" class="headerlink" title="åŸç†åˆ†æ"></a>åŸç†åˆ†æ</h1><p>åŸç†æ¨èçœ‹è¿™ç¯‡</p><p><a href="https://tech.meituan.com/2014/06/30/mysql-index.html">MySQLç´¢å¼•åŸç†åŠæ…¢æŸ¥è¯¢ä¼˜åŒ–</a></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> MySQL </tag>
            
            <tag> ç´¢å¼• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Primary-Backup-Replication</title>
      <link href="/2020/12/14/Primary-Backup-Replication/"/>
      <url>/2020/12/14/Primary-Backup-Replication/</url>
      
        <content type="html"><![CDATA[<h1 id="What-kinds-of-failures-can-replication-deal-with"><a href="#What-kinds-of-failures-can-replication-deal-with" class="headerlink" title="What kinds of failures can replication deal with?"></a>What kinds of failures can replication deal with?</h1><ul><li>â€œfail-stopâ€ failure of a single replica<ul><li>fan stops working, CPU overheats and shuts itself down</li><li>someone trips over replicaâ€™s power cord or network cableï¼ˆç”µæºçº¿æˆ–ç½‘ç»œç”µç¼†ï¼‰</li><li>software notices it is out of disk space and stops</li></ul></li><li>Maybe not defects in h/w(Hardware/Software) or bugs in s/w or human configuration errors</li></ul><h1 id="Two-main-replication-approaches"><a href="#Two-main-replication-approaches" class="headerlink" title="Two main replication approaches"></a>Two main replication approaches</h1><h2 id="State-transfer"><a href="#State-transfer" class="headerlink" title="State transfer"></a>State transfer</h2><ul><li>Primary replica executes the service</li><li><strong>Primary sends [new] state to backups</strong></li></ul><h2 id="Replicated-state-machine"><a href="#Replicated-state-machine" class="headerlink" title="Replicated state machine"></a>Replicated state machine</h2><ul><li><strong>Clients send operations to primary, primary sequences and sends to backups</strong></li><li>All replicas execute all operations</li><li>If same start state, same operations, same order, deterministic, then same end state.</li><li>support only uni-processor (In fact, vmware has a solution for multi-core processor, but it seems to be based on state transfer)</li></ul><hr><h2 id="Compared"><a href="#Compared" class="headerlink" title="Compared"></a>Compared</h2><ul><li>State transfer is simpler, but state may be large, slow to transfer over network</li><li>Replicated state machine often generates less network traffice<ul><li>Operations are often small compared to state But complex to get right</li></ul></li></ul><h1 id="At-what-level-do-we-want-replicas-to-be-identical"><a href="#At-what-level-do-we-want-replicas-to-be-identical" class="headerlink" title="At what level do we want replicas to be identical"></a>At what level do we want replicas to be identical</h1><p>identical: similar in every detail</p><ul><li><code>VMware vSphere Fault Tolerance (VMware FT)</code>   replicates the low-level memory and machine registers ( <code>Machine level</code> )<ul><li>might allow us to replicate any existing server without modification</li><li>requires forwarding of machine events (interrupts, DMAï¼ˆæŒ‡å†…å­˜å’Œå¤–è®¾ç›´æ¥å­˜å–æ•°æ®è¿™ç§å†…å­˜è®¿é—®çš„è®¡ç®—æœºæŠ€æœ¯ï¼‰)</li><li>can run any existing O/S and server software. Appears like a single server to clients</li></ul></li><li>Most like GFS where it was replicating much more application level table of chunks<ul><li>Can be efficient; primary only sends high-level operations to backup</li><li>Application code (server) must understand fault tolerance, to e.g. forward op stream</li></ul></li></ul><h1 id="VMware-FT"><a href="#VMware-FT" class="headerlink" title="VMware FT"></a>VMware FT</h1><p><img src="/2020/12/14/Primary-Backup-Replication/test_1.png" alt></p><p>æœ‰ä¸¤å°æœºå™¨ï¼Œåˆ†åˆ«æ˜¯primaryå’Œbackupï¼Œå®ƒä»¬éƒ½æ˜¯é€šè¿‡VMMè™šæ‹ŸåŒ–è¿è¡ŒåŒä¸€ä¸ªOSï¼ŒæŒ‰ç…§FTæ¥è®²ï¼Œå®ƒä»¬è¿è¡Œçš„å†…å®¹ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œå®ƒä»¬çš„å­˜å‚¨æ•°æ®çš„ç£ç›˜å¯èƒ½ä¸æ˜¯åœ¨æœºå™¨ä¸Šé¢ï¼Œè€Œæ˜¯æœ‰ä¸ªDisk Serverï¼Œå¹¶ä¸”æœ‰ä¸ªClientè®¿é—®æ•°æ®ï¼Œè¿™äº›éƒ½é€šè¿‡ç½‘è·¯è¿æ¥åœ¨ä¸€èµ·ã€‚</p><p><img src="/2020/12/14/Primary-Backup-Replication/test_2.png" alt></p><ul><li>ç°åœ¨Clientå‘é€ä¸€ä¸ªç½‘ç»œæ•°æ®åŒ…ç»™Primaryï¼ŒPrimaryçš„VMMæ¥æ”¶åˆ°æ•°æ®åŒ…ï¼Œå¹¶äº§ç”Ÿä¸€ä¸ªä¸­æ–­ï¼Œå®ƒä¼šæ¨¡æ‹Ÿä¸€ä¸ªç½‘ç»œæ•°æ®åŒ…åˆ°è¾¾çš„ä¸­æ–­ç»™primaryä¸Šçš„osï¼Œä»¥å°†è¿™ä¸ªæ•°æ®åŒ…å‘é€ç»™åº”ç”¨ç¨‹åºã€‚</li><li>åŒæ—¶VMMè¿˜å°†æ•°æ®åŒ…çš„å‰¯æœ¬å‘é€ç»™Backupçš„VMMï¼ŒBackupçš„VMMä¹Ÿä¼šåšåŒæ ·çš„äº‹æƒ…ã€‚</li><li>åº”ç”¨ç¨‹åºä¼šäº§ç”ŸResponseï¼Œå¹¶é€šè¿‡VMMæ‰€æ¨¡æ‹Ÿçš„<code>NIC (Network Interface Card)</code> å°†å®ƒå‘é€å‡ºå»ã€‚å› ä¸ºBackupä¹Ÿåœ¨æ‰§è¡ŒåŒæ ·çš„æ“ä½œï¼Œæ‰€ä»¥Backupä¹Ÿä¼šäº§ç”ŸåŒæ ·çš„Responseï¼Œä½†æ˜¯FTä¼šå°†å…¶ä¸¢å¼ƒï¼Œæœ€ç»ˆåªæœ‰Primaryåº”ç­”ã€‚</li></ul><p>Primaryå°†æ‰€æœ‰<code>external events</code>ï¼ˆç½‘ç»œæ•°æ®åŒ…ç­‰ï¼‰éƒ½é€šè¿‡ç§°ä¸º<code>Logging channel</code>çš„ç½‘ç»œè¿æ¥å‘é€åˆ°Backupï¼Œå‘é€çš„å†…å®¹ç§°ä¸º<code>log entries</code></p><p>å¦‚æœBackupè¶…è¿‡ä¸€å®šæ—¶é—´æ²¡æœ‰ä»Logging channelä¸­æ‹¿åˆ°æ•°æ®ï¼Œé‚£ä¹ˆVMMä¼šè®©Backupä»£æ›¿Primaryã€‚</p><h1 id="What-sources-of-divergence-must-FT-handle"><a href="#What-sources-of-divergence-must-FT-handle" class="headerlink" title="What sources of divergence must FT handle?"></a>What sources of divergence must FT handle?</h1><p>divergence: the process or state of (of opinions or methods) differing</p><ul><li>Most instructions execute identically on primary and backup<ul><li>As long as memory+registers are identical, which weâ€™re assuming by induction</li></ul></li><li>Inputs from external world â€” just network packets<ul><li>These appear as DMAâ€™d data plus an interrupt.</li><li>This interrupt will occur somewhere in the instruction stream. So we must know which instruction occurred when primary and backup behave the same.Otherwise they will be different in execution and the state.</li></ul></li><li>Instructions that arenâ€™t functions of state, such as reading current time.</li><li>Not multi-core races, since uniprocessor only<ul><li>the instructions of the service are interleavedï¼ˆäº¤é”™çš„ï¼‰ in some way which is not predictableï¼ˆé¢„æµ‹çš„ï¼‰  ( such as get lock)</li></ul></li></ul><h1 id="FTâ€™s-handling-of-timer-interrupts"><a href="#FTâ€™s-handling-of-timer-interrupts" class="headerlink" title="FTâ€™s handling of timer interrupts"></a>FTâ€™s handling of timer interrupts</h1><ul><li><strong>Goal</strong>: primary and backup should see interrupt at the same point in the instruction stream</li><li><strong>Primary</strong><ol><li>FT fieldsï¼ˆå¤„ç†ï¼‰ the timer interrupt</li><li>FT reads instruction number from CPU</li><li>FT sends â€œtimer interrupt at instruction Xâ€ on logging channel</li><li>FT delivers interrupt to primary, and resumesï¼ˆæ¢å¤ï¼‰ itï¼ˆthis relies on CPU support to interrupt after the Xâ€™th instructionï¼‰</li></ol></li><li><strong>Backup</strong><ol><li>ignores its own timer hardware</li><li>FT sees log entry <em>before</em> backup gets to instruction X</li><li>FT tells CPU to interrupt (to FT) at instruction X</li><li>FT mimicsï¼ˆæ¨¡ä»¿ï¼‰ a timer interrupt to backup</li></ol></li></ul><h1 id="FTâ€™s-handling-of-network-packet-arrival-input"><a href="#FTâ€™s-handling-of-network-packet-arrival-input" class="headerlink" title="FTâ€™s handling of network packet arrival (input)"></a>FTâ€™s handling of network packet arrival (input)</h1><ul><li>Primary<ol><li>FT tells NIC to copy packet data into FTâ€™s private â€œbounce bufferâ€ï¼ˆWhen data travels between a device and high memory, it is first copied through the bounce bufferï¼‰</li><li>FT gets the interrupt from NIC</li><li>FT pauses the primary</li><li>FT copies the bounce buffer into the primaryâ€™s memory</li><li>FT simulatesï¼ˆæ¨¡æ‹Ÿï¼‰ a NIC interrupt in primary</li><li>FT sends the packet data and the instruction id to the backup</li></ol></li><li>Backup<ol><li>FT gets data and instruction id from log stream</li><li>FT tells CPU to interrupt (to FT) at instruction X</li><li>FT copies the data to backup memory, simulates NIC interrupt in backup</li></ol></li></ul><h1 id="output-rule"><a href="#output-rule" class="headerlink" title="output rule"></a>output rule</h1><p>Avoid data inconsistency caused by backup not receiving log after primary crash</p><ul><li>Primaryï¼š<ol><li>receives client â€œincrementâ€ request</li><li>sends client request on logging channel</li><li>about toï¼ˆå³å°†ï¼‰ send  reply to client</li><li>first waits for backup to acknowledgeï¼ˆæ‰¿è®¤ï¼‰ previous log entry</li><li>then sends reply to client</li></ol></li></ul><p><strong>what if the primary crashed <em>after</em> emitting the output? Will the backup emit the output a second time?</strong></p><p>Yes.<br>   OK for TCP, since receivers ignore duplicate sequence numbers.<br>   OK for writes to disk, since backup will write same data to same block id.</p><h1 id="could-it-suffer-from-split-brain"><a href="#could-it-suffer-from-split-brain" class="headerlink" title="could it suffer from split brain"></a>could it suffer from split brain</h1><p>The disk server breaks the tie.ï¼ˆæ‰“ç ´äº†åƒµå±€ï¼‰<br>Disk server supports <strong>atomic test-and-set</strong>.<br>If primary or backup thinks other is dead, <strong>attempts test-and-set</strong>.<br>If only one is alive, it will win test-and-set and go live.<br>If both try, one will lose, and halt.</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mit6.824 </tag>
            
            <tag> ä¸»ä»å¤‡ä»½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GFS</title>
      <link href="/2020/11/17/GFS/"/>
      <url>/2020/11/17/GFS/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦é˜…è¯»è¿™ç¯‡è®ºæ–‡"><a href="#ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦é˜…è¯»è¿™ç¯‡è®ºæ–‡" class="headerlink" title="ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦é˜…è¯»è¿™ç¯‡è®ºæ–‡?"></a>ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦é˜…è¯»è¿™ç¯‡è®ºæ–‡?</h1><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œåˆ†å¸ƒå¼å­˜å‚¨æ˜¯å…³é”®çš„éƒ¨åˆ†ï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆå»è®¾è®¡å®ƒï¼Œåˆ†å¸ƒå¼å­˜å‚¨çš„<code>interface/semantics</code> åº”è¯¥æ€ä¹ˆå®šä¹‰ï¼Œå®ƒæ˜¯æ€ä¹ˆå¹¶è¡Œå·¥ä½œçš„ç­‰ã€‚</p><p>GFS paperæ¶‰åŠåˆ°äº†å¾ˆå¤šåˆ†å¸ƒå¼ç³»ç»Ÿä¸»é¢˜ï¼š<code>parallel performance</code>, <code>fault tolerance</code>, <code>replication</code>, <code>consistency</code> ã€‚ä»appsåˆ°networkéƒ½æœ‰è¯¦ç»†çš„ä»‹ç»ï¼Œå¹¶ä¸”åœ¨ç°å®ç”Ÿæ´»ä¸­æœ‰ç€æˆåŠŸçš„åº”ç”¨ã€‚</p><h1 id="ä¸ºä»€ä¹ˆåˆ†å¸ƒå¼å­˜å‚¨è¿™ä¹ˆéš¾"><a href="#ä¸ºä»€ä¹ˆåˆ†å¸ƒå¼å­˜å‚¨è¿™ä¹ˆéš¾" class="headerlink" title="ä¸ºä»€ä¹ˆåˆ†å¸ƒå¼å­˜å‚¨è¿™ä¹ˆéš¾?"></a>ä¸ºä»€ä¹ˆåˆ†å¸ƒå¼å­˜å‚¨è¿™ä¹ˆéš¾?</h1><ul><li><code>high performance</code>â†’å°†æ•°æ®æ‹†åˆ†åˆ°å¾ˆå¤šæœåŠ¡å™¨ä¸Šé¢ï¼Œé€šè¿‡å¾ˆå¤šå°æœåŠ¡å™¨å¹¶è¡Œè¯»å–æ•°æ®</li><li><code>many servers</code>â†’æœºå™¨ä¸€å¤šï¼Œæœºå™¨å‘ç”Ÿæ•…éšœçš„æ¦‚ç‡ä¼šå˜å¤§ï¼Œéœ€è¦å®¹ç¾æœºåˆ¶ï¼Œèƒ½å¤Ÿè‡ªåŠ¨æ¢å¤</li><li><code>fault tolerance</code> â†’æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯é€šè¿‡å¤åˆ¶å¾—åˆ°å¤šä¸ªå‰¯æœ¬ï¼Œå½“ä¸€ä¸ªå‰¯æœ¬å‡ºç°é—®é¢˜æ—¶ï¼Œå…¶ä»–å‰¯æœ¬è¿˜èƒ½ç”¨</li><li><code>replication</code> â†’æœ‰æ•°æ®ä¸ä¸€è‡´çš„é£é™©</li><li><code>better consistency</code> â†’å¦‚æœéœ€è¦æ›´å¼ºçš„ä¸€è‡´æ€§çš„è¯ï¼Œåœ¨ç½‘ç»œä¸­æ‰€æœ‰ä¸åŒçš„æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´éœ€è¦è¿›è¡Œå¾ˆå¤šé¢å¤–çš„å·¥ä½œå’Œäº¤æµï¼Œé‚£ä¹ˆè¿™æ ·æ€§èƒ½å°±ä¼šé™ä½ï¼Œæ‰€ä»¥è¿™ä¸ªä¸æ˜¯æˆ‘ä»¬æœ€åˆæƒ³è¦çš„</li></ul><h1 id="æˆ‘ä»¬æƒ³è¦ä»€ä¹ˆæ ·çš„ä¸€è‡´æ€§ï¼Ÿ"><a href="#æˆ‘ä»¬æƒ³è¦ä»€ä¹ˆæ ·çš„ä¸€è‡´æ€§ï¼Ÿ" class="headerlink" title="æˆ‘ä»¬æƒ³è¦ä»€ä¹ˆæ ·çš„ä¸€è‡´æ€§ï¼Ÿ"></a>æˆ‘ä»¬æƒ³è¦ä»€ä¹ˆæ ·çš„ä¸€è‡´æ€§ï¼Ÿ</h1><ul><li>Ideal model: same behavior as a single server</li><li>server uses disk storage (persistence)</li><li>server executes client operations one at a time (even if concurrent)</li></ul><p>å‡è®¾ç°åœ¨æœ‰ä¸¤ä¸ªå®¢æˆ·ç«¯C1, C2ï¼ŒC1å‘é€ä¸€ä¸ªå†™è¯·æ±‚ï¼Œæƒ³å°†Xçš„å€¼è®¾ç½®ä¸º1ï¼ŒåŒæ—¶ï¼ŒC2ä¹Ÿå‘é€ä¸€ä¸ªå†™è¯·æ±‚ï¼Œæƒ³æŠŠXçš„å€¼è®¾ç½®ä¸º2ã€‚C1, C2éƒ½å®Œæˆåï¼Œæœ‰ä¸¤ä¸ªå®¢æˆ·ç«¯C3, C4æƒ³è¦è¯»å–Xçš„å€¼ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆ</p><p>æ˜¾ç„¶è¿™é‡Œä¸¤ä¸ªå®¢æˆ·ç«¯è¯»åˆ°çš„å€¼æ˜¯ä¸ç¡®å®šçš„ï¼Œ1æˆ–è€…2ï¼Œå› ä¸ºæ²¡æœ‰å®šä¹‰æœåŠ¡å™¨å¤„ç†å†™è¯·æ±‚çš„é¡ºåºã€‚ä½†æ˜¯C3å’ŒC4å¾—åˆ°çš„å€¼å¿…é¡»æ˜¯ä¸€æ ·çš„ï¼Œè¿™å°±æ˜¯å¼ºä¸€è‡´æ€§æ¨¡å‹ã€‚</p><hr><p>åœ¨å¤šå‰¯æœ¬ä¸­å¼ºä¸€è‡´æ€§å˜å¾—éº»çƒ¦èµ·æ¥ï¼Œä¸€ä¸ªç®€å•ä½†æ˜¯å¾ˆç³Ÿç³•çš„å¤åˆ¶æ–¹æ¡ˆï¼š</p><p>ç°æœ‰ä¸¤ä¸ªå‰¯æœ¬æœåŠ¡å™¨S1å’ŒS2ï¼Œç°åœ¨ä¸¤ä¸ªå®¢æˆ·ç«¯åŒæ—¶å‘ä¸¤è€…å‘é€å†™è¯·æ±‚ã€‚</p><p>C1å°†S1å’ŒS2ä¸­çš„Xè®¾ç½®ä¸º1ï¼ŒC2å°†S1å’ŒS2ä¸­çš„Xè®¾ç½®ä¸º2</p><p><img src="/2020/11/17/GFS/Untitled.png" alt></p><p>åœ¨è¿™é‡Œæˆ‘ä»¬å¹¶æ²¡æœ‰åšä»»ä½•äº‹æƒ…æ¥ä¿è¯ä¸¤ä¸ªæœåŠ¡å™¨æ˜¯ä»¥åŒæ ·çš„é¡ºåºæ¥å¤„ç†è¿™ä¸¤ä¸ªè¯·æ±‚ã€‚</p><p>å¦‚æœS1å…ˆæ¥å—C1çš„è®¾ç½®ï¼Œé‚£ä¹ˆXå…ˆè¢«è®¾ç½®ä¸º1ï¼Œæ¥ç€å¤„ç†C2ï¼Œé‚£ä¹ˆXå°±è¢«è¦†ç›–ä¸º2ï¼›å¦‚æœS2å¤„ç†çš„é¡ºåºåè¿‡æ¥çš„è¯ï¼ŒS2çš„Xä¼šä¸º1ï¼Œé‚£ä¹ˆè¯»å–åˆ°çš„æ•°æ®å°±ä¼šä¸ä¸€è‡´ã€‚æˆ–è€…æ˜¯S1å·²ç»å†™æ•°æ®äº†ï¼Œä½†æ˜¯S2çªç„¶å´©æºƒäº†ï¼Œæ²¡æœ‰æ‰§è¡ŒæˆåŠŸï¼Œè¿™æ ·æ•°æ®ä¹Ÿä¼šä¸ä¸€è‡´ã€‚</p><p>æ›´å¥½çš„ä¸€è‡´æ€§é€šå¸¸éœ€è¦ç¡®ä¿å‰¯æœ¬ä¹‹é—´çš„åŒæ­¥ï¼Œè¿™å¯èƒ½ä¼šæœ‰æ€§èƒ½é—®é¢˜ï¼Œæ‰€ä»¥è¿™ä¸ªå¾—çœ‹ä½¿ç”¨è€…å¯¹ä¸€è‡´æ€§çš„æ¥å—ç¨‹åº¦ã€‚</p><h1 id="GFS"><a href="#GFS" class="headerlink" title="GFS"></a>GFS</h1><h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>åœ¨2003å¹´æ—¶å€™Google file systemè®ºæ–‡å‘è¡¨ï¼Œæ˜¯ç¬¬ä¸€ä¸ªç”¨åˆ†å¸ƒå¼å­¦æœ¯æ€æƒ³è½åœ°çš„åº”ç”¨ï¼Œè™½ç„¶åœ¨æ­¤ä¹‹å‰åå¹´å·²ç»æœ‰åˆ†å¸ƒå¼çš„ç ”ç©¶äº†ã€‚</p><p>Googleè®¸å¤šæœåŠ¡éƒ½éœ€è¦ç”¨åˆ°å¤§å‹ä¸”å¿«é€Ÿçš„å­˜å‚¨ç³»ç»Ÿå»å­˜å‚¨æˆ–è€…è¯»å–å¤§é‡æ•°æ®é›†ï¼Œæ¯”å¦‚MapReduceã€ç´¢å¼•ã€æ—¥å¿—å­˜å‚¨/åˆ†æã€Youtubeè§†é¢‘ç­‰ã€‚</p><p>è¿™ä¸ªç³»ç»Ÿæ˜¯é€šç”¨æˆ–è€…å…¨å±€å¯å¤ç”¨çš„ï¼Œå…è®¸åœ¨åº”ç”¨ç¨‹åºä¹‹é—´å…±äº«æ•°æ®ï¼š</p><ul><li>ä¸ºäº†æé«˜å¹¶è¡Œæ€§èƒ½å’Œå¢åŠ å¯ç”¨ç©ºé—´ï¼Œåœ¨å¤šä¸ªæœåŠ¡å™¨/ç£ç›˜ä¸Šè‡ªåŠ¨â€œåˆ‡åˆ†â€æ¯ä¸ªæ–‡ä»¶</li><li>è‡ªåŠ¨ä»æ•…éšœä¸­æ¢å¤</li><li>å•ä¸ªGFSæ˜¯è¿è¡Œåœ¨ä¸€ä¸ªæ•°æ®ä¸­å¿ƒæˆ–è€…ä¸€ä¸ªå¤§å‹æœºæˆ¿ï¼Œè™½ç„¶éƒ¨ç½²å…¨çƒå‰¯æœ¬å¾ˆæœ‰ä»·å€¼ï¼Œä½†æ˜¯è¿™ä¸ªå¾ˆéš¾</li><li>GFSä»…é¢å‘Googleå†…éƒ¨ä½¿ç”¨ï¼Œä½†æ˜¯ä¼šå‘å¤–å‡ºå”®ä½¿ç”¨äº†GFSçš„æœåŠ¡ï¼Œå¹¶ä¸ä¼šç›´æ¥å‡ºå”®GFS</li><li>æ—¨åœ¨ç”¨äºå¤§æ–‡ä»¶ï¼ˆGBæˆ–è€…TBçº§åˆ«ï¼‰çš„é¡ºåºè®¿é—®å’Œå†™å…¥ï¼Œè€Œä¸æ˜¯éšæœºè®¿é—®å°æ–‡ä»¶</li><li>æ²¡æœ‰æŠŠé‡ç‚¹æ”¾åœ¨ä½å»¶è¿Ÿä¸Šé¢ï¼Œè€Œæ˜¯æ”¾åœ¨å¤§ååé‡ä¸Šé¢ï¼Œæ¯”å¦‚å‡ MBå¤§å°çš„æ“ä½œ</li></ul><h2 id="è®ºæ–‡åœ¨å½“æ—¶çš„ä¼˜ç‚¹"><a href="#è®ºæ–‡åœ¨å½“æ—¶çš„ä¼˜ç‚¹" class="headerlink" title="è®ºæ–‡åœ¨å½“æ—¶çš„ä¼˜ç‚¹"></a>è®ºæ–‡åœ¨å½“æ—¶çš„ä¼˜ç‚¹</h2><ul><li>æ„å»ºçš„ç³»ç»Ÿæ˜¯æ¯”ä¹‹å‰çš„ç±»ä¼¼çš„è®ºæ–‡ä¸­æ‰€æè¿°çš„ç³»ç»Ÿè¦åºå¤§å¾—å¤š</li><li>æœ‰ç€å®è·µçš„ç»éªŒ</li><li>è¯æ˜äº†å¼±ä¸€è‡´æ€§æ˜¯okçš„ï¼Œå€Ÿæ­¤è·å¾—æ›´å¥½çš„æ€§èƒ½</li><li>å•masteræˆåŠŸåº”ç”¨ã€‚å•ä¸ªmasterå¯ä»¥è®©ä¸€è‡´æ€§æ›´å¼ºï¼Œå¤šä¸ªçš„è¯éš¾ç»´æŠ¤è¾ƒå¼ºçš„ä¸€è‡´æ€§ï¼Œä½†ä¼šå¸¦æ¥åˆ«çš„æå‡ã€‚</li></ul><h2 id="æ¶æ„"><a href="#æ¶æ„" class="headerlink" title="æ¶æ„"></a>æ¶æ„</h2><p><img src="/2020/11/17/GFS/Untitled%201.png" alt></p><p>GFSç”±ä¸€ä¸ª<code>master</code>å’Œå¤šä¸ª<code>chunkserver</code>ç»„æˆã€‚</p><ul><li>æ–‡ä»¶è¢«åˆ†æˆå›ºå®šå¤§å°çš„<code>chunks</code>ï¼Œæ¯ä¸ªchunkéƒ½æ˜¯64MBå¤§å°ã€‚æ¯ä¸€å—éƒ½ç”±ä¸€ä¸ªä¸å¯å˜çš„ã€å…¨å±€å”¯ä¸€çš„64ä½<code>chunk handle</code> æ ‡è¯†ï¼Œè¿™ä¸ªæ ‡è¯†åœ¨å—chunkåˆ›å»ºçš„æ—¶å€™ç”±masteråˆ†é…</li><li>masterä¼šç»´æŠ¤æ–‡ä»¶åå’Œæ•°æ®ä¿å­˜ä½ç½®ä¹‹é—´çš„å…³ç³»ï¼Œç”¨æ¥å‘½åæ–‡ä»¶å’ŒæŸ¥è¯¢è¿™äº›chunkçš„ä½ç½®ä¿¡æ¯</li><li>chunkserverç”¨æ¥ä¿å­˜å®é™…æ•°æ®çš„</li></ul><h2 id="Master-Data"><a href="#Master-Data" class="headerlink" title="Master Data"></a>Master Data</h2><p>ä¸»è¦ä¿å­˜ä¸¤ä¸ªæ˜ å°„å…³ç³»ï¼Œ<code>nv</code>ï¼šéæ˜“å¤±æ€§ï¼š</p><ul><li>file nameâ†’array of chunk handles (nv)ï¼šå»å“ªé‡Œæ‰¾è¿™äº›æ•°æ®æˆ–è€…è¿™äº›chunkçš„æ ‡è¯†ç¬¦æ˜¯ä»€ä¹ˆ</li><li>chunk handleâ†’list of chunkservers (v)ï¼šæ¯ä¸ªchunkæœ‰å¤šä¸ªå‰¯æœ¬ï¼Œè¿™é‡Œä¸éœ€è¦æŒä¹…æ€§ï¼Œå½“masteré‡å¯åï¼Œmasterä¼šå’Œæ‰€æœ‰çš„chunkserveré€šä¿¡ä»¥ç¡®å®šè¿™äº›ä¿¡æ¯<ul><li>version (nv)ï¼šæ¯ä¸ªchunkéƒ½æœ‰ä¸€ä¸ªversion</li><li>primary (v)ï¼šæœ‰è®¸å¤šä¸ªå‰¯æœ¬ï¼Œprimaryæ˜¯å…¶ä¸­çš„ä¸€ä¸ªï¼Œmasteréœ€è¦è®°ä½primary chunkå¯¹åº”çš„chunkserverï¼Œä½†æ˜¯è¿™ä¸ªä¿¡æ¯ä¸éœ€è¦å­˜å‚¨ï¼Œmasterå¯ä»¥ç­‰å¾…60såleaseè¿‡æœŸï¼Œç„¶åå†æŒ‡å®šä¸€ä¸ªprimary</li><li>lease expirationï¼šmasterä¼šè®°ä½leaseçš„è¿‡æœŸæ—¶é—´</li></ul></li></ul><p>è¿™äº›æ•°æ®è¯»æ˜¯åœ¨å†…å­˜ä¸­è¿›è¡Œï¼Œä½†æ˜¯å†™ä¼šå†™åˆ°ç£ç›˜ä¸­ï¼ˆå®é™…ä¸Šä¿å­˜çš„æ˜¯æ“ä½œæ—¥å¿—ï¼‰ï¼Œå½“æ—¥å¿—è¾¾åˆ°ä¸€å®šå¤§å°æ—¶ï¼Œmasterä¼šå»ºç«‹<code>checkpoint</code>ï¼Œå½“masteré‡å¯åï¼Œä¼šæ¢å¤åˆ°æœ€è¿‘çš„checkpointã€‚</p><p>è¿™äº›æ—¥å¿—ä½¿ç”¨æ–‡ä»¶å­˜å‚¨ï¼Œè€Œä¸ä½¿ç”¨æ•°æ®åº“å­˜å‚¨ï¼Œæ˜¯å› ä¸ºåœ¨ç£ç›˜ä¸Šé¢å®ƒä»¬æœ‰äº›æ˜¯ç”¨Bæ ‘æˆ–è€…å“ˆå¸Œè¡¨è¿›è¡Œç»„ç»‡çš„ï¼Œè¿™æ ·çš„å¯¹æ—¥å¿—è¿›è¡Œè¿½åŠ æ“ä½œæ—¶å€™ä¼šéå¸¸é«˜æ•ˆï¼ˆå½“ç£ç›˜ç£è‡‚æ—‹è½¬åˆ°ä¸€ä¸ªä½ç½®æ—¶ï¼Œå¯ä»¥å†™å…¥å¤§é‡çš„æ•°æ®ï¼Œè€Œæ•°æ®åº“å­˜å‚¨å¹¶ä¸è€ƒè™‘é¡ºåºï¼Œè¦ç¬¦åˆçœŸå®çš„bæ ‘éœ€è¦å»å¯»æ‰¾å†è¿½åŠ ï¼‰ã€‚</p><h2 id="è¯»æ“ä½œ"><a href="#è¯»æ“ä½œ" class="headerlink" title="è¯»æ“ä½œ"></a>è¯»æ“ä½œ</h2><ol><li>Clientå‘Masterå‘å‡ºè¯»è¯·æ±‚ï¼Œé€šè¿‡ä¸€ä¸ªæ–‡ä»¶åå’Œä¸€ä¸ªæ–‡ä»¶ä¸­çš„åç§»é‡(<code>offset</code>)æ‰¾åˆ°å®ƒæƒ³è¦çš„æ•°æ®çš„èŒƒå›´ã€‚</li><li>Matseræ ¹æ®è¿™ä¸¤ä¸ªä¿¡æ¯æŸ¥ä¹‹å‰ä¿å­˜çš„æ˜ å°„å…³ç³»è¡¨å¾—åˆ°chunk handleåˆ—è¡¨å’Œchunkserveråˆ—è¡¨ï¼Œå¹¶è¿”å›ï¼ŒClientä¼šç¼“å­˜è¯¥ä¿¡æ¯ã€‚</li><li>Clientå‘æœ€è¿‘çš„chunkserverå‘é€è¯·æ±‚ï¼ŒåŒ…æ‹¬chunk handleå’Œoffsetï¼Œchunkserverè¯»å–ç£ç›˜ä¸Šçš„chunkæ•°æ®å¹¶è¿”å›</li></ol><h2 id="è¿½åŠ æ“ä½œ"><a href="#è¿½åŠ æ“ä½œ" class="headerlink" title="è¿½åŠ æ“ä½œ"></a>è¿½åŠ æ“ä½œ</h2><ol><li>Clientè¯¢é—®Masteræ–‡ä»¶æœ€åä¸€ä¸ªchunk</li><li>å†™æ“ä½œMasteréƒ½æ˜¯å’ŒPrimaryé€šä¿¡ï¼Œå¦‚æœæ­¤æ—¶æ²¡æœ‰Primaryï¼ˆæˆ–è€…leaseå·²ç»è¿‡æœŸï¼‰ï¼š<ul><li>éœ€è¦ç­‰å¾…Masteræ‰¾å‡ºéœ€è¦çš„ä¸€ç»„æœ‰ç€æœ€è¿‘chunkçš„chunkservers</li><li>ä»ä¸­é€‰æ‹©ä¸€ä¸ªä½œä¸ºPrimaryï¼Œå…¶ä»–ä½œä¸ºSecondary</li><li>é€’å¢ç‰ˆæœ¬å·ï¼Œå†™å…¥ç£ç›˜</li><li>å‘Šè¯‰æ‰€æœ‰å‰¯æœ¬å®ƒä»¬æ˜¯P(Primary)è¿˜æ˜¯Sï¼Œä»¥åŠæœ€æ–°çš„ç‰ˆæœ¬å·</li><li>å‰¯æœ¬å°†æœ€æ–°ç‰ˆæœ¬å·å†™å…¥ç£ç›˜</li></ul></li><li>Masterå›å¤Client Primaryå’ŒSecondariesçš„ä½ç½®ï¼Œç„¶å</li><li>Clientå‘Primaryå’ŒSecondarieså‘é€è¦è¿½åŠ çš„æ•°æ®ï¼Œæ‹¿åˆ°æ•°æ®ååªæ˜¯å°†è¿™äº›æ•°æ®å†™åˆ°ä¸´æ—¶åŒºåŸŸä¸Šã€‚ä¸€æ—¦æ‰€æœ‰å‰¯æœ¬éƒ½ç¡®è®¤æ¥æ”¶åˆ°äº†æ•°æ®ï¼ŒClientå°±å‘Primaryå‘é€å†™è¯·æ±‚ã€‚</li><li>Primaryä¼šæ£€æŸ¥leaseæ˜¯å¦è¿˜æœªè¿‡æœŸï¼ŒåŒæ—¶æ£€æŸ¥chunkæ˜¯å¦è¿˜æœ‰ç©ºé—´ã€‚</li><li>Primaryé€‰æ‹©ä¸€ä¸ªoffset(at end of chunk)ï¼Œå°†æ•°æ®å†™å…¥åˆ°chunkä¸­(Linuxæ–‡ä»¶)ã€‚åŒæ—¶Primaryä¼šå‘Secondariesä¼ é€’offsetï¼Œè®©å®ƒä»¬è¿½åŠ æ•°æ®åˆ°chunkä¸­ã€‚</li><li>Primaryä¼šç­‰å¾…Secondariesçš„å›å¤ï¼Œå¯èƒ½æ˜¯â€Yesâ€œï¼Œâ€errorâ€æˆ–è€…timeoutã€‚å¦‚æœå…¨éƒ¨å†™å…¥æˆåŠŸï¼Œåˆ™è¿”å›æˆåŠŸç»™Clientï¼Œå¦åˆ™å›å¤â€errorâ€ã€‚</li><li>å¦‚æœæ”¶åˆ°errorï¼ŒClientä¼šé‡è¯•è¿½åŠ æ“ä½œ</li></ol>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> gfs </tag>
            
            <tag> mit6.824 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MapReduce</title>
      <link href="/2020/11/06/MapReduce/"/>
      <url>/2020/11/06/MapReduce/</url>
      
        <content type="html"><![CDATA[<h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ä»ä¸€æ‰¹æ•°æ®ä¸­å¾—åˆ°ä¸€äº›ç»“æœï¼Œæ¯”å¦‚ä»æœ€é¢‘ç¹æŸ¥è¯¢çš„ç»“æœé›†ï¼Œæ¯ä¸ªå•è¯å‡ºç°çš„æ¬¡æ•°ã€‚éšç€è¾“å…¥çš„æ•°æ®è¶Šæ¥è¶Šå¤šï¼Œä¸ºäº†åœ¨åˆç†çš„æ—¶é—´å†…å®Œæˆï¼Œå•å°æœºå™¨å¯èƒ½ä¼šå®Œæˆä¸äº†è¿™ä¸ªä»»åŠ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»å°†è¿™ä¸ªè®¡ç®—å‹åŠ›åˆ†æ‹…åˆ°å¤šä¸ªæœºå™¨ä¸Šé¢ï¼Œå¹¶è¡Œè®¡ç®—ã€‚</p><p>ä½†æ˜¯è§£å†³è®¡ç®—çš„æ ‡å‡†åŒ–ï¼Œæ•°æ®çš„åˆ†é…ï¼Œæ•…éšœå¤„ç†ï¼Œè´Ÿè½½å‡è¡¡ç­‰é—®é¢˜æ˜¯ä¸ªå¤§å·¥ç¨‹ï¼Œè®©åŸæœ¬ç®€å•çš„ä»£ç å˜å¾—å¤æ‚èµ·æ¥ã€‚</p><p>ä¸ºæ­¤ï¼ŒGoogleå‘æ˜äº†<code>MapReduce</code>ç³»ç»Ÿï¼Œéš”ç¦»äº†å¤æ‚çš„åº•å±‚ï¼Œè®©ç¨‹åºå‘˜èƒ½å¤Ÿå®¹æ˜“ä½¿ç”¨è¿™ä¸ªç³»ç»Ÿè¿›è¡Œå¤§æ•°æ®é‡çš„åˆ†å¸ƒå¼è®¡ç®—ã€‚</p><h1 id="ç¼–ç¨‹æ¨¡å‹"><a href="#ç¼–ç¨‹æ¨¡å‹" class="headerlink" title="ç¼–ç¨‹æ¨¡å‹"></a>ç¼–ç¨‹æ¨¡å‹</h1><p>å°†ç”¨æˆ·çš„è®¡ç®—åˆ†ä¸ºä¸¤ä¸ªå‡½æ•°å¤„ç†ï¼š<code>Map</code>å’Œ<code>Reduce</code> å‡½æ•°</p><ul><li><code>Map</code>å‡½æ•°ï¼šè¾“å…¥æ•°æ®ï¼Œå¤„ç†åç”Ÿæˆä¸€ç»„é”®å€¼å¯¹ï¼ˆä¸­é—´å€¼ï¼‰</li><li><code>Reduce</code>å‡½æ•°ï¼šå¤„ç†å‰é¢å¾—åˆ°çš„ä¸­é—´å€¼ï¼Œç„¶åå°†è¿™äº›å€¼åˆå¹¶åœ¨ä¸€èµ·ï¼Œå½¢æˆæ›´å°çš„å€¼é›†ã€‚é€šå¸¸ï¼Œæ¯æ¬¡ Reduceè°ƒç”¨åªç”Ÿæˆé›¶ä¸ªæˆ–ä¸€ä¸ªè¾“å‡ºå€¼ã€‚</li></ul><p>ç®€çº¦æ¨¡å‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">map (k1,v1) â†’ list(k2,v2)</span><br><span class="line">//è¿™é‡Œæ˜¯æŒ‡å¯¹åº”k2çš„ç»“æœæœ‰å¤šä¸ª</span><br><span class="line">reduce (k2,list(v2)) â†’ list(v2)</span><br></pre></td></tr></table></figure><p><img src="/2020/11/06/MapReduce/mapreduce.png" alt></p><hr><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><p>ç°æœ‰å¤§é‡çš„æ–‡æœ¬æ•°æ®ï¼Œæƒ³ç»Ÿè®¡æ¯ä¸ªå•è¯å‡ºç°çš„æ¬¡æ•°</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">map</span>(<span class="keyword">string</span> documentName, <span class="keyword">string</span> documentValue):</span><br><span class="line"><span class="keyword">for</span> word in documentValue:</span><br><span class="line">EmitIntermediate(word, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">reduce(<span class="keyword">string</span> word, <span class="keyword">int</span>[] counts):</span><br><span class="line"><span class="keyword">int</span> result = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> count in counts:</span><br><span class="line">result += count</span><br><span class="line">Emit(result)</span><br></pre></td></tr></table></figure><p><code>Map</code>å‡½æ•°ç»Ÿè®¡æ¯ä¸ªå•è¯åŠå…¶å‡ºç°çš„æ¬¡æ•°ï¼ˆå‡è®¾åªæœ‰1ï¼‰ã€‚<code>Reduce</code> å‡½æ•°å°†è®¡ç®—æ¯ä¸ªç‰¹å®šå•è¯å‡ºç°çš„æ€»æ¬¡æ•°ã€‚</p><p>å®é™…ä¸Šï¼Œæˆ‘ä»¬ä¼šå°†è¦è¾“å…¥çš„æ•°æ®åˆ†å‰²æˆå¤šä»½ï¼Œ<code>Map</code>å’Œ<code>Reduce</code>å‡½æ•°ä¹Ÿä¼šèµ·å¤šä¸ªè¿›ç¨‹ï¼Œè¿™æ ·èƒ½å¤Ÿæ›´å¿«çš„å¤„ç†ä»»åŠ¡ï¼Œå¦‚ä¸‹å›¾</p><p><img src="/2020/11/06/MapReduce/Untitled.png" alt></p><h1 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h1><h2 id="æ‰§è¡Œæ¦‚è¿°"><a href="#æ‰§è¡Œæ¦‚è¿°" class="headerlink" title="æ‰§è¡Œæ¦‚è¿°"></a>æ‰§è¡Œæ¦‚è¿°</h2><p><img src="/2020/11/06/MapReduce/Untitled%201.png" alt></p><p>ä¸Šé¢æ˜¯è®ºæ–‡ä¸­MapReduceè¿è¡Œç¨‹åºçš„æ€»ä½“æµç¨‹ï¼Œå½“ç”¨æˆ·ç¨‹åºè°ƒç”¨ MapReduce å‡½æ•°æ—¶ï¼Œä¼šæœ‰ä»¥ä¸‹æ“ä½œï¼ˆç¼–å·å¯¹åº”ä¸Šå›¾ä¸­çš„ç¼–å·ï¼‰</p><ol><li>ç”¨æˆ·ç¨‹åºä¸­çš„MapReduceåº“é¦–å…ˆå°†è¾“å…¥æ–‡ä»¶æ‹†åˆ†ä¸º <code>m</code> ç‰‡ï¼Œæ¯ç‰‡é€šå¸¸ä¸º 16 åˆ° 64 MB(ç”¨æˆ·å¯ä»¥é€šè¿‡ä¸€ä¸ªå¯é€‰å‚æ•°è¿›è¡Œæ§åˆ¶)ã€‚ç„¶åï¼Œå®ƒåœ¨ä¸‰å°æœºå™¨ä¸Šå¯åŠ¨å¤šä¸ªç¨‹åºå‰¯æœ¬ã€‚</li><li>å…¶ä¸­æœ‰ä¸€ä¸ªæ˜¯ä¸»ç¨‹åº(<code>Master</code>)ï¼Œå®ƒä¼šç®¡ç†å…¶ä½™çš„ç¨‹åº(<code>Worker</code>)ï¼ŒMasterä¸»è¦ä½œç”¨æ˜¯åˆ†é…ä¸€ä¸ªMapæˆ–ä¸€ä¸ªReduceä»»åŠ¡ç»™é—²ç½®çš„Workerç¨‹åºï¼ˆå‡è®¾æœ‰<code>M</code>ä¸ªMapä»»åŠ¡å’Œ<code>R</code>ä¸ªReduceä»»åŠ¡ï¼‰</li><li>æœ‰Mapä»»åŠ¡çš„Worker ä¼šè¾“å…¥ç›¸åº”çš„åˆ†å‰²åçš„å†…å®¹ï¼Œæ¥ç€è§£æè¾“å…¥æ•°æ®ä¸­çš„é”®å€¼å¯¹ï¼Œå¹¶å°†æ¯ä¸ªé”®å€¼å¯¹ä¼ é€’ç»™ç”¨æˆ·å®šä¹‰çš„Mapå‡½æ•°ã€‚Map å‡½æ•°ç”Ÿæˆçš„ä¸­é—´é”®/å€¼å¯¹åœ¨å†…å­˜ä¸­è¿›è¡Œç¼“å†²</li><li>ç¼“å­˜ä¼šå®šæœŸå†™å…¥åˆ°æœ¬åœ°ç£ç›˜ï¼ˆç£ç›˜é€šè¿‡åˆ†åŒºå‡½æ•°è¢«åˆ’åˆ†ä¸ºRä¸ªåŒºåŸŸï¼‰ã€‚æœ¬åœ°ç£ç›˜ä¸Šæœ‰æ•°æ®çš„åŒºåŸŸçš„ä½ç½®ä¿¡æ¯ä¼šè¢«ä¸Šä¼ ç»™Masterï¼ŒMasterè´Ÿè´£å°†è¿™äº›ä½ç½®ä¿¡æ¯ä¼ é€’ç»™Reduce ä»»åŠ¡çš„Worker</li><li><p>å½“æœ‰Reduce ä»»åŠ¡çš„Worker æ¥æ”¶åˆ°Master ä¼ é€’è¿‡æ¥çš„ä½ç½®ä¿¡æ¯æ—¶ï¼Œå®ƒä¼šä½¿ç”¨<code>RPC</code>ä»Map Worker çš„æœ¬åœ°ç£ç›˜è¯»å–ç¼“å†²æ•°æ®ã€‚è¯»å–äº†æ‰€æœ‰çš„ä¸­é—´æ•°æ®åï¼Œå®ƒä¼šæŒ‰ç…§ä¸­é—´é”®å¯¹å…¶è¿›è¡Œæ’åºï¼Œä»¥ä¾¿å°†å‡ºç°çš„æ‰€æœ‰åŒä¸€ä¸ªé”®ç»„åˆåœ¨ä¸€èµ·ã€‚å¦‚æœä¸­é—´æ•°æ®é‡å¤ªå¤§ï¼Œå†…å­˜æ— æ³•å®¹çº³ï¼Œåˆ™ä½¿ç”¨å¤–æ’åºã€‚</p><blockquote><p>å¤–æ’åºï¼ˆExternal sortingï¼‰æ˜¯æŒ‡èƒ½å¤Ÿå¤„ç†æå¤§é‡æ•°æ®çš„æ’åºç®—æ³•ã€‚ é€šå¸¸æ¥è¯´ï¼Œå¤–æ’åºå¤„ç†çš„æ•°æ®ä¸èƒ½ä¸€æ¬¡è£…å…¥å†…å­˜ï¼Œåªèƒ½æ”¾åœ¨è¯»å†™è¾ƒæ…¢çš„å¤–å­˜å‚¨å™¨ï¼ˆé€šå¸¸æ˜¯ç¡¬ç›˜ï¼‰ä¸Šã€‚</p></blockquote></li><li>Reduce Workeréå†æ’åºåçš„ä¸­é—´é”®å€¼å¯¹æ•°æ®ï¼Œå¯¹æ¯ä¸ªç‰¹å®šçš„keyï¼Œä¼šå°†keyå’Œç›¸å¯¹åº”çš„ä¸­é—´å€¼é›†åˆä¼ é€’ç»™ç”¨æˆ·å®šä¹‰çš„Reduceå‡½æ•°ã€‚Reduceå‡½æ•°çš„è¾“å‡ºä¼šå†™åˆ°å¯¹åº”çš„åˆ†åŒºæ–‡ä»¶ä¸­ã€‚</li><li>å½“æ‰€æœ‰çš„Mapå’ŒReduceä»»åŠ¡å®Œæˆåï¼ŒMasterä¼šå”¤é†’ç”¨æˆ·ç¨‹åºã€‚æ­¤æ—¶ï¼Œç”¨æˆ·ç¨‹åºä¸­çš„MapReduceè°ƒç”¨ä¼šè¿”å›ã€‚ </li></ol><p>ä¸€èˆ¬å®Œæˆä¹‹åå¹¶ä¸æ˜¯å°†è¿™äº›åˆ†æ–‡ä»¶åˆå¹¶ï¼Œè€Œæ˜¯å°†è¿™äº›æ–‡ä»¶ä½œä¸ºè¾“å…¥ä¼ é€’ç»™å¦ä¸€ä¸ªMapReduceè°ƒç”¨ï¼Œæˆ–è€…ä»å¦ä¸€ä¸ªåˆ†å¸ƒå¼åº”ç”¨ç¨‹åºä½¿ç”¨å®ƒä»¬ã€‚</p><h2 id="Masterç»“æ„"><a href="#Masterç»“æ„" class="headerlink" title="Masterç»“æ„"></a>Masterç»“æ„</h2><p>å¯¹äºæ¯ä¸ªMapå’ŒReduceä»»åŠ¡ï¼ŒMasterå­˜å‚¨äº†è¿™äº›ä»»åŠ¡çš„çŠ¶æ€ï¼ˆé—²ç½®ï¼Œè¿›è¡Œä¸­ï¼Œå·²å®Œæˆï¼‰ä»¥åŠæœ‰éé—²ç½®çŠ¶æ€ä»»åŠ¡çš„Workerçš„æ ‡è¯†ã€‚</p><p>å¯¹äºæ¯ä¸ªå·²å®Œæˆçš„Mapä»»åŠ¡ï¼ŒMasterå­˜å‚¨äº†Mapä»»åŠ¡äº§ç”Ÿçš„Rä¸ªä¸­é—´é”®å€¼å¯¹æ–‡ä»¶çš„ä½ç½®å’Œå¤§å°ã€‚å½“æœ‰Mapä»»åŠ¡å®Œæˆæ—¶ï¼Œå°†æ›´æ–°ä½ç½®å’Œå¤§å°ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å°†ä¼šæ¨é€ç»™æ­£åœ¨Reduceæ“ä½œçš„Workerã€‚</p><h2 id="å®¹é”™"><a href="#å®¹é”™" class="headerlink" title="å®¹é”™"></a>å®¹é”™</h2><h3 id="Workeræ•…éšœ"><a href="#Workeræ•…éšœ" class="headerlink" title="Workeræ•…éšœ"></a>Workeræ•…éšœ</h3><p>Masterä¼šå®šæ—¶ç»™Workerå‘é€ä¿¡å·ï¼Œå¦‚æœåœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°å›å¤ï¼Œåˆ™å°†è¯¥Workeræ ‡è®°ä¸ºæ•…éšœçŠ¶æ€ã€‚ä»»ä½•Mapä»»åŠ¡æˆ–Reduceä»»åŠ¡åœ¨å¤±è´¥çš„Workerä¸Šè¿è¡Œæ—¶ä¼šè¢«é‡ç½®ä¸ºç©ºé—²çŠ¶æ€å¹¶æœ‰èµ„æ ¼è¿›è¡Œé‡æ–°è°ƒåº¦ã€‚</p><p>å·²ç»å®Œæˆçš„Mapä»»åŠ¡åœ¨æ•…éšœæ—¶ä¼šé‡æ–°æ‰§è¡Œï¼Œå› ä¸ºå®ƒä»¬çš„è¾“å‡ºåœ¨æ•…éšœçš„Workeræœ¬åœ°ç£ç›˜ä¸­ï¼Œä¸å¯è®¿é—®ã€‚å·²ç»å®Œæˆçš„Reduceä»»åŠ¡ä¸éœ€è¦é‡æ–°æ‰§è¡Œï¼Œå› ä¸ºå®ƒä»¬çš„è¾“å‡ºå­˜å‚¨åœ¨å…¨å±€æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚</p><p>å‡è®¾æœ‰ä¸€ä¸ªMapä»»åŠ¡é¦–å…ˆç”±Worker Aæ‰§è¡Œï¼ŒAå‡ºç°äº†æ•…éšœï¼Œç„¶åç”±Worker Bæ‰§è¡Œï¼Œæ‰§è¡ŒReduceä»»åŠ¡çš„Workerä¼šå¾—åˆ°é‡æ–°æ‰§è¡Œçš„é€šçŸ¥ã€‚ä»»ä½•è¿˜æ²¡æœ‰ä»Worker Aè¯»å–æ•°æ®çš„Reduceä»»åŠ¡å°†ä»Worker Bè¯»å–æ•°æ®ã€‚</p><p>å¦‚æœæ˜¯å¤§é‡çš„WorkeråŒæ—¶å‡ºç°æ•…éšœï¼ŒMapReduceåªæ˜¯ç®€å•å¾—é‡æ–°æ‰§è¡Œæ— æ³•è®¿é—®çš„Workeræœºå™¨æ‰€åšçš„å·¥ä½œï¼Œå¹¶æ¥ç€å¾€ä¸‹æ‰§è¡Œä»»åŠ¡ï¼Œæœ€ç»ˆå®ŒMapReduceçš„ä»»åŠ¡ã€‚</p><h3 id="Masteræ•…éšœ"><a href="#Masteræ•…éšœ" class="headerlink" title="Masteræ•…éšœ"></a>Masteræ•…éšœ</h3><p>å¦‚æœMasterå‡ºç°æ•…éšœ ï¼Œåˆ™å¯ä»¥ä»ä¸Šä¸€ä¸ª<code>checkpointed</code>çŠ¶æ€å¯åŠ¨æ–°çš„å‰¯æœ¬ã€‚ä½†æ˜¯ç”±äºåªæœ‰ä¸€ä¸ªmasterï¼Œå®ƒå‡ºç°æ•…éšœçš„å¯èƒ½æ€§å¾ˆå°ã€‚å› æ­¤ï¼Œå¦‚æœMasterå¤±è´¥ï¼Œç›®å‰çš„å®ç°æ˜¯å°†ä¸­æ­¢MapReduce è®¡ç®—ã€‚å¦‚æœ‰éœ€è¦ï¼Œå¯ä»¥æ‰§è¡Œé‡è¯•æ“ä½œã€‚</p><h3 id="å­˜å‚¨"><a href="#å­˜å‚¨" class="headerlink" title="å­˜å‚¨"></a>å­˜å‚¨</h3><p>å› ä¸ºç½‘ç»œå¸¦å®½æ˜¯æ¯”è¾ƒæ˜‚è´µçš„ï¼Œå¯ä»¥ç”¨åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼ˆè¿™é‡Œç”¨<code>GFS</code>ï¼‰å»ç®¡ç†æ•°æ®ã€‚GFS å°†æ¯ä¸ªæ–‡ä»¶æŒ‰ 64MB åˆ†å—ï¼Œå¹¶åœ¨ä¸åŒçš„è®¡ç®—æœºä¸Šå­˜å‚¨æ¯ä¸ªå—çš„å‡ ä¸ªå‰¯æœ¬(é€šå¸¸æ˜¯ 3 ä¸ªå‰¯æœ¬)ã€‚</p><p>Masterå°è¯•åœ¨åŒ…å«ç›¸åº”è¾“å…¥æ•°æ®å‰¯æœ¬çš„æœºå™¨ä¸Šé¢å®‰æ’Mapä»»åŠ¡ï¼Œå¦‚æœä¸è¡Œï¼Œåˆ™å°è¯•å°†Mapä»»åŠ¡å®‰æ’åœ¨ä»»åŠ¡è¾“å…¥æ•°æ®çš„å‰¯æœ¬é™„è¿‘ï¼ˆä¾‹å¦‚ï¼ŒåŒä¸€ä¸ªç½‘ç»œäº¤æ¢æœºï¼‰ï¼Œæ‰€ä»¥ç›¸å½“ä¸€éƒ¨åˆ†Workerè¾“å…¥çš„æ•°æ®éƒ½æ˜¯åœ¨æœ¬åœ°è¯»å–çš„ï¼Œä¸æ¶ˆè€—ç½‘ç»œå¸¦å®½ã€‚</p><h3 id="å¤‡ä»½ä»»åŠ¡"><a href="#å¤‡ä»½ä»»åŠ¡" class="headerlink" title="å¤‡ä»½ä»»åŠ¡"></a>å¤‡ä»½ä»»åŠ¡</h3><p>ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„é—®é¢˜æ˜¯éƒ¨åˆ†æœºå™¨è®¡ç®—ä»»åŠ¡æ‰€éœ€çš„æ—¶é—´è¿‡é•¿ï¼Œå¯¼è‡´æ•´ä¸ªMapReduceçš„æ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼Œè¿™å¯èƒ½æ˜¯å„ç§å„æ ·çš„é—®é¢˜å¯¼è‡´ï¼Œæ¯”è¾ƒå¸¸è§çš„æ˜¯CPUã€å†…å­˜ã€æœ¬åœ°ç£ç›˜ç­‰èµ„æºçš„ç«äº‰ã€‚</p><p>æœ‰ä¸€ä¸ªé€šç”¨çš„è§£å†³æ–¹æ³•æ˜¯ï¼šå½“ä¸€ä¸ªMapReduceè®¡ç®—æ¥è¿‘å®Œæˆæ—¶ï¼ŒMasterä¼šè°ƒåº¦ä¸€ä¸ªå¤‡ç”¨ï¼ˆbackupï¼‰ä»»åŠ¡æ¥æ‰§è¡Œå‰©ä¸‹çš„å¤„äºæ­£åœ¨æ‰§è¡Œä¸­ï¼ˆin-progressï¼‰çš„ä»»åŠ¡ã€‚æ— è®ºæ˜¯è¿™ä¸ªä¸»ä»»åŠ¡è¿˜æ˜¯è¿™ä¸ªå¤‡ç”¨ä»»åŠ¡å®Œæˆäº†ï¼Œæˆ‘ä»¬éƒ½ä¼šå°†è¿™ä¸ªä»»åŠ¡æ ‡è®°ä¸ºå®Œæˆã€‚</p><h1 id="Lab1"><a href="#Lab1" class="headerlink" title="Lab1"></a>Lab1</h1><h2 id="ä¸»è¦ä»»åŠ¡"><a href="#ä¸»è¦ä»»åŠ¡" class="headerlink" title="ä¸»è¦ä»»åŠ¡"></a>ä¸»è¦ä»»åŠ¡</h2><p>åœ¨æœ¬åœ°çš„ä¸€å°æœºå™¨ä¸Šå®ç°ä¸€ä¸ªç®€æ˜“ç‰ˆæœ¬çš„<code>MapReduce</code> ï¼Œå®ƒç”±ä¸¤ä¸ªç¨‹åºï¼ˆMasterå’ŒWorkerï¼‰ç»„æˆï¼Œåªæœ‰ä¸€ä¸ªMasterï¼Œä¸€ä¸ªæˆ–å¤šä¸ªWorkerè¿›ç¨‹å¹¶è¡Œæ‰§è¡Œã€‚æ¯ä¸ªWorkerè¿›ç¨‹éƒ½ä¼šå‘Masterç´¢è¦ä»»åŠ¡ï¼Œä»ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ä¸­è¯»å–ä»»åŠ¡çš„è¾“å…¥ï¼Œæ‰§è¡Œä»»åŠ¡ï¼Œå¹¶å°†ä»»åŠ¡çš„è¾“å‡ºå†™å…¥ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ã€‚è¿™é‡Œçš„æ•…éšœç‚¹åªæ˜¯ç®€å•çš„åˆ¤æ–­Workeræ˜¯å¦åœ¨10så†…å®Œæˆä»»åŠ¡ï¼Œå¦‚æœæ²¡æœ‰æŒ‰æ—¶é—´å®Œæˆåˆ™å°†è¯¥ä»»åŠ¡åˆ†é…ç»™å…¶ä»–å¯ç”¨Workerç»§ç»­æ‰§è¡Œã€‚</p><h2 id="ä¸»è¦æµç¨‹"><a href="#ä¸»è¦æµç¨‹" class="headerlink" title="ä¸»è¦æµç¨‹"></a>ä¸»è¦æµç¨‹</h2><p>ä¸€å¼€å§‹æ‹¿åˆ°ä»£ç æœ‰ç‚¹æ— ä»ä¸‹æ‰‹çš„æ„Ÿè§‰ï¼Œæˆ‘ä»¬å¾—å¼„æ¸…æ¥šä»£ç çš„æ¡†æ¶ã€‚</p><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p>é¦–å…ˆå¾—çŸ¥é“æ˜¯æ€ä¹ˆè·‘èµ·æ¥çš„ï¼ŒLab1æä¾›äº†ä¸€ä¸ªæµ‹è¯•è„šæœ¬<code>test-mr.sh</code> ï¼Œé‡Œé¢ä¼šæœ‰å‡ ä¸ªæµ‹è¯•ç‚¹ï¼Œå®ƒä¼šé€šè¿‡è¿™å‡ ä¸ªæµ‹è¯•ç‚¹æ£€æµ‹ä½ çš„ä»£ç æ˜¯å¦ç¼–å†™æ­£ç¡®ï¼Œå€¼å¾—ä¸€æçš„æ˜¯æœ€åä¸€ä¸ªæµ‹è¯•ç‚¹å°±æ˜¯æ¨¡æ‹Ÿäº†æ•…éšœæƒ…å†µï¼Œå®ƒä¼šåœ¨æ¯ä¸ªWorkerä¸­æ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æœ‰å‡ ç‡ä¼šè®©Workerè¿›ç¨‹é€€å‡º<code>(os.Exit(1))</code>æˆ–è€…è®©æ‰§è¡Œæ—¶é—´å¤§å¹…å»¶é•¿<code>(time.Sleep)</code> ã€‚</p><p>æµ‹è¯•è„šæœ¬ä¸»è¦æ˜¯ä½œäº†ä¸€ä¸‹å·¥ä½œï¼š</p><ol><li>æ¸…é™¤å†å²æ‰§è¡Œäº§ç”Ÿçš„æ•°æ®æ–‡ä»¶</li><li>go buildä»£ç </li><li>runä¸€ä¸ªMasterå’Œå¤šä¸ªWorkerè¿›ç¨‹</li><li>äº§ç”Ÿæ­£ç¡®çš„æ–‡ä»¶ä»¥åŠå¯¹æ¯”ä½ çš„ä»£ç åœ¨è¯¥æµ‹è¯•ç‚¹ä¸‹è¾“å‡ºçš„æ–‡ä»¶æ˜¯å¦ä¸€è‡´</li><li>ç›´åˆ°æ‰€æœ‰çš„æµ‹è¯•ç‚¹å®Œæˆ</li></ol><p><img src="/2020/11/06/MapReduce/Untitled%202.png" alt></p><h3 id="è°ƒç”¨æµç¨‹"><a href="#è°ƒç”¨æµç¨‹" class="headerlink" title="è°ƒç”¨æµç¨‹"></a>è°ƒç”¨æµç¨‹</h3><p><code>src/main/mrsequential.go</code> é‡Œé¢æä¾›äº†å•è¿›ç¨‹ç‰ˆæœ¬ï¼Œä¸»è¦ç”¨äºæµ‹è¯•ç‚¹ç”Ÿæˆæ­£ç¡®çš„è¾“å‡ºæ–‡ä»¶ï¼Œæˆ‘ä»¬å†™ä»£ç æ—¶å¯ä»¥éšæ„ä»é‡Œé¢æ‹¿ä»£ç ã€‚</p><p>ä¸æˆ‘ä»¬å†™ä»£ç æœ‰å…³ç³»çš„æ˜¯<code>src/main/mrmaster.go</code> <code>src/main/mrworker.go</code> ä»¥åŠ<code>src/mr</code> é‡Œé¢çš„æ‰€æœ‰æ–‡ä»¶</p><ul><li>æµ‹è¯•è„šæœ¬å¯åŠ¨ä¸€ä¸ª<code>src/main/mrmaster.go</code> è¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹ä¸»è¦æ˜¯ç”¨äºä¼ é€’ã€Œè¦å¤„ç†çš„æ–‡ä»¶åˆ—è¡¨ã€ä»¥åŠã€ŒReduceWorkerçš„ä¸ªæ•°ã€ç»™<code>src/mr/master.go</code> é‡Œé¢çš„<code>MakeMaster</code> å‡½æ•°</li><li>å¯åŠ¨å¤šä¸ª<code>src/main/mrworker.go</code> è¿›ç¨‹ï¼Œä¸»è¦ç”¨äºæ‰§è¡Œ<code>src/mr/worker.go</code> é‡Œé¢çš„<code>Worker</code> å‡½æ•°ã€‚</li></ul><p>æ‰€ä»¥åˆ°è¿™é‡Œæˆ‘ä»¬å¤§æ¦‚ç›´åˆ°äº†æˆ‘ä»¬è¦ç¼–å†™çš„ä»£ç å°±æ˜¯ä½äº<code>src/mr/master.go</code> å’Œ<code>src/mr/worker.go</code>ï¼Œè„šæœ¬åªæ˜¯æŠŠå¿…è¦çš„ä¿¡æ¯ä¼ ç»™æˆ‘ä»¬å’Œå¯åŠ¨å¯¹åº”çš„è¿›ç¨‹ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ç¼–å†™çš„ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p><ol><li>Masteråˆ†é…ä»»åŠ¡ç»™Workerï¼ˆMapå’ŒReduceä»»åŠ¡ï¼‰</li><li>Workerå¤„ç†ä»»åŠ¡ï¼Œä¸€ç›´åˆ°Mapä»»åŠ¡æˆ–è€…Reduceä»»åŠ¡å®Œæˆ</li><li>Masterå¯¹Workerå®¹é”™å¤„ç†ï¼Œå½“å‡ºç°Workerè¶…æ—¶æœªå®Œæˆæ—¶ï¼ŒåŠæ—¶å°†ä»»åŠ¡åˆ†é…ç»™å…¶ä»–çš„Worker</li></ol><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><ol><li>RPCè¯·æ±‚å’Œè¿”å›çš„ç»“æ„ä½“å­—æ®µé¦–å­—æ¯å¿…é¡»å¤§å†™ï¼Œå¦åˆ™æ‹¿åˆ°çš„å€¼ä¸ºç©º</li><li>å¯¹å¿…è¦çš„æ“ä½œåŠ é”ï¼Œå› ä¸ºæ¶‰åŠåˆ°å¹¶å‘æ“ä½œ</li><li>è¯¥å®éªŒå…ˆæ‰§è¡Œå®Œæ‰€æœ‰çš„Mapä»»åŠ¡å†æ‰§è¡ŒReduceä»»åŠ¡ï¼Œä½†æ˜¯Workerè¿˜æ˜¯é‚£ä¸€äº›ï¼Œåªä¸è¿‡ä¸åŒä»»åŠ¡è€Œå·²</li><li>æ¯æ¬¡æ‰§è¡Œä»»åŠ¡éƒ½éœ€è¦å¸¦ä¸Šä¸åŒçš„idï¼Œå³ä½¿æ˜¯åŒä¸€ä¸ªWorkerï¼Œå› ä¸ºç”Ÿæˆçš„ä¸­é—´æ–‡ä»¶å‘½åéœ€è¦ç”¨åˆ°è¯¥idï¼Œå¦‚æœidç›¸åŒåˆ™å¯èƒ½ä¼šæŠŠä¹‹å‰ç”Ÿæˆçš„æ–‡ä»¶ç»™è¦†ç›–æ‰</li></ol><h2 id="Masterå®ç°"><a href="#Masterå®ç°" class="headerlink" title="Masterå®ç°"></a>Masterå®ç°</h2><p>åˆšå¼€å§‹æ˜¯ç”¨ä¸¤ä¸ªsliceä½œä¸ºé˜Ÿåˆ—åˆ†åˆ«ä¿å­˜è¾“å…¥æ–‡ä»¶åˆ—è¡¨(<code>InputFiles</code>)å’Œä¸­é—´æ–‡ä»¶åˆ—è¡¨(<code>IntermediateFiles</code>)ï¼Œä¸»è¦å¤„ç†æµç¨‹å¦‚ä¸‹ï¼š</p><ol><li>ä»InputFileså–æ–‡ä»¶ä½œä¸ºMapä»»åŠ¡åˆ†é…åˆ°å„ä¸ªWorker</li><li>Mapä»»åŠ¡å®Œæˆåˆ™è°ƒç”¨Masterçš„æ–¹æ³•å°†è¿”å›çš„ä¸­é—´æ–‡ä»¶åæ”¾åˆ°IntermediateFiles</li><li>ç›´åˆ°InputFilesä¸ºç©ºï¼Œæ¥ç€å¯¹ä¸­é—´æ–‡ä»¶åˆ†ç±»ï¼ŒæŒ‰ç…§æ–‡ä»¶ååˆ†é…å¥½Reduceä»»åŠ¡</li><li>ä»IntermediateFileså–æ–‡ä»¶ä½œä¸ºReduceä»»åŠ¡åˆ†é…åˆ°å„ä¸ªWorker</li><li>ä»»åŠ¡å¤„ç†å®Œæˆ</li></ol><p>Workerä¸­æä¾›äº†<code>ihash</code>å‡½æ•°ï¼Œèƒ½å¤Ÿæ ¹æ®key(å•è¯)åˆ†é…Reduce Workerï¼Œæ‰€ä»¥æŒ‰ç…§<code>mr-X-Y</code>è§„åˆ™ç”Ÿæˆçš„ä¸­é—´æ–‡ä»¶åˆ—è¡¨å¦‚ä¸‹ï¼ŒæŒ‰ç…§<code>Y</code> æˆ‘ä»¬å¯ä»¥åˆ†ç±»æ–‡ä»¶ç»™ä¸åŒçš„Reduce Worker</p><p><img src="/2020/11/06/MapReduce/Untitled%203.png" alt></p><p>ä¸Šé¢æ–¹æ¡ˆæœ‰å‡ ä¸ªç¼ºç‚¹ï¼š</p><ol><li>æ²¡æœ‰å¯¹Workerè¿›è¡Œå®¹é”™å¤„ç†ï¼Œæ‰€ä»¥è¿˜éœ€è¦é¢å¤–çš„é˜Ÿåˆ—ä¿å­˜Workerï¼Œå‡ºé”™æ—¶æŠŠé‡æ–°æ”¾åˆ°é˜Ÿåˆ—ï¼Œè¿™é‡Œä¸‰ä¸ªé˜Ÿåˆ—çš„åŒæ­¥å…³ç³»ä¸å¥½å¤„ç†ï¼Œå› ä¸ºæ˜¯å¹¶å‘ï¼ŒåŠ é”å¹¶ä¸æ˜¯é‚£ä¹ˆå¥½åŠ </li><li>ç”¨é˜Ÿåˆ—ä¿å­˜ä¸­é—´æ–‡ä»¶è¿˜å¾—åˆ†ç±»ï¼Œå¦‚æœå‡ºé”™äº†åˆå¾—é‡æ–°æ”¾å›é˜Ÿåˆ—ï¼Œé‡æ–°å–ï¼Œä»£ç ä¸Šç¹çäº†ç‚¹ã€‚</li></ol><hr><p>é’ˆå¯¹ä¸Šé¢çš„å¹¶å‘å’Œç¹çé—®é¢˜ï¼Œåšäº†ä¸‹é¢æ›´æ”¹</p><ul><li><code>IntermediateFiles</code> ç”¨<code>sync.Map</code> ä»£æ›¿ï¼Œkeyä¸º<code>ReduceWorkerId</code>  ï¼ŒValueä¸ºå¾…å¤„ç†æ–‡ä»¶åˆ—è¡¨</li><li>ä½¿ç”¨<code>channel</code> ä½œä¸ºä¸­é—´ç¼“å†²å±‚å¤„ç†Mapå’ŒReduceçš„é€šä¿¡</li><li>åŒæ—¶ä½¿ç”¨ä¸€ä¸ª <code>sync.Map</code> è®°å½•Taskä¿¡æ¯ï¼Œkeyä¸º<code>WorkerId</code>ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªçŠ¶æ€ï¼šç©ºé—²å’Œè¿›è¡Œä¸­ï¼Œæ¯æ¬¡å¯åŠ¨ä¸€ä¸ªä»»åŠ¡ï¼Œåˆ™å¼€å¯ä¸ªåç§’çš„å®šæ—¶ä»»åŠ¡ï¼Œå¦‚æœæ£€æµ‹åˆ°æ²¡æœ‰å®Œæˆï¼Œåˆ™å°†è¯¥Workerå˜ä¸ºç©ºé—²çŠ¶æ€ï¼Œå¹¶å°†ä»»åŠ¡æ–‡ä»¶åˆ—è¡¨æ”¾åˆ°å¯¹åº”çš„channel</li></ul><p>sync.Mapå’Œchannelçš„ä¼˜åŠ¿æ˜¯å¹¶å‘ä¸‹ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼ŒèŠ‚çœäº†å¾ˆå¤šåŠ é”æ“ä½œ</p><h2 id="Workerå®ç°"><a href="#Workerå®ç°" class="headerlink" title="Workerå®ç°"></a>Workerå®ç°</h2><p>Workerå®ç°åˆ™æ˜¯æ ¹æ®Masterçš„ä»»åŠ¡æ¥é€‰æ‹©æ‰§è¡ŒMapæˆ–è€…æ˜¯Reduceä»»åŠ¡ï¼Œå…·ä½“çš„å¯¹æ–‡ä»¶å¤„ç†é€»è¾‘å¯ä»¥ç›´æ¥å‚è€ƒå•è¿›ç¨‹ç‰ˆæœ¬</p><h2 id="æ ¸å¿ƒä»£ç "><a href="#æ ¸å¿ƒä»£ç " class="headerlink" title="æ ¸å¿ƒä»£ç "></a>æ ¸å¿ƒä»£ç </h2><h3 id="channelåˆå§‹åŒ–"><a href="#channelåˆå§‹åŒ–" class="headerlink" title="channelåˆå§‹åŒ–"></a>channelåˆå§‹åŒ–</h3><p><code>MakeMaster</code>åï¼Œå°†è¾“å…¥æ–‡ä»¶æ”¾åˆ°<code>MapTaskChannel</code> ï¼Œå°†è¦æ‰§è¡ŒreduceWorkerIdæ”¾åˆ°<code>ReduceTaskChannel</code></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m *Master)</span> <span class="title">putTask</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; m.NReduce; i++ &#123;</span><br><span class="line">m.ReduceTaskChannel &lt;- strconv.Itoa(i)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> _, file := <span class="keyword">range</span> m.InputFiles &#123;</span><br><span class="line">m.MapTaskChannel &lt;- file</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Worker"><a href="#Worker" class="headerlink" title="Worker"></a>Worker</h3><p>Workerè¿™éƒ¨åˆ†æ¯”è¾ƒç®€å•ï¼Œè¯·æ±‚ä»»åŠ¡ï¼Œå¹¶æ ¹æ®ä»»åŠ¡ç±»å‹åˆ†å‘ä»»åŠ¡ï¼Œæ‰§è¡Œå®Œåå†ä¸æ–­è¯·æ±‚ï¼Œç›´åˆ°ä»»åŠ¡è¯·æ±‚å®Œæˆ</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Worker</span><span class="params">(mapf <span class="keyword">func</span>(<span class="keyword">string</span>, <span class="keyword">string</span>)</span> []<span class="title">KeyValue</span>, <span class="title">reducef</span> <span class="title">func</span><span class="params">(<span class="keyword">string</span>, []<span class="keyword">string</span>)</span> <span class="title">string</span>)</span> &#123;</span><br><span class="line">reply := &amp;TaskReply&#123;&#125;</span><br><span class="line">call(<span class="string">&quot;Master.AssignTask&quot;</span>, &amp;Args&#123;&#125;, reply)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> reply.IsDone &#123;</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> reply.WorkerType == Map &#123;</span><br><span class="line">StartMapTask(reply, mapf)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> reply.WorkerType == Reduce &#123;</span><br><span class="line">StartReduceTask(reply, reducef)</span><br><span class="line">&#125;</span><br><span class="line">Worker(mapf, reducef)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Masteråˆ†é…ä»»åŠ¡"><a href="#Masteråˆ†é…ä»»åŠ¡" class="headerlink" title="Masteråˆ†é…ä»»åŠ¡"></a>Masteråˆ†é…ä»»åŠ¡</h3><p>è¿™é‡Œæ˜¯æœ€æ ¸å¿ƒçš„äº†</p><p>è¿™é‡Œé¦–å…ˆæ‰§è¡Œçš„Mapä»»åŠ¡ï¼Œchannelä¸­æ²¡æœ‰äº†Mapä»»åŠ¡è€Œä¸”æ‰€æœ‰çš„Mapä»»åŠ¡éƒ½æ‰§è¡Œå®Œæˆï¼Œåˆ™æ‰§è¡ŒReduceä»»åŠ¡ã€‚</p><p>æ‰§è¡ŒMapä»»åŠ¡ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯ä»channelé‡Œé¢æ‹¿ä¸€ä¸ªä»»åŠ¡ï¼ŒReduceä¹ŸåŒç†ï¼Œåªä¸è¿‡MapTaskChannelæ‹¿åˆ°çš„æ˜¯æ–‡ä»¶ï¼ŒReduceTaskChannelæ‹¿åˆ°æ˜¯å…·ä½“æ‰§è¡Œå“ªä¸ªReduceWorkerã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m *Master)</span> <span class="title">AssignTask</span><span class="params">(args *Args, reply *TaskReply)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">workerType := Map</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(m.MapTaskChannel) == <span class="number">0</span> &amp;&amp; m.checkTaskIdle(Map) &#123;</span><br><span class="line">workerType = Reduce</span><br><span class="line">&#125;</span><br><span class="line">m.MU.Lock()</span><br><span class="line">reply.IsDone = m.isDone()</span><br><span class="line">m.MU.Unlock()</span><br><span class="line"><span class="keyword">if</span> workerType == Map &#123;</span><br><span class="line">mapFile := &lt;-m.MapTaskChannel</span><br><span class="line">m.startMapTask(mapFile, reply)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> workerType == Reduce &#123;</span><br><span class="line">reduceWorkerId := &lt;-m.ReduceTaskChannel</span><br><span class="line"><span class="keyword">if</span> id, ok := m.IntermediateFiles.Load(reduceWorkerId); ok &#123;</span><br><span class="line">m.startReduceTask(id.([]<span class="keyword">string</span>), reply)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ‰§è¡Œæ£€æµ‹Mapæˆ–è€…Reduceæ˜¯å¦éƒ½å·²ç»æ‰§è¡Œå®Œæˆ</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m *Master)</span> <span class="title">checkTaskIdle</span><span class="params">(workerType WorkerType)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">flag := <span class="literal">true</span></span><br><span class="line">f := <span class="function"><span class="keyword">func</span><span class="params">(k, v <span class="keyword">interface</span>&#123;&#125;)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">task := v.(Task)</span><br><span class="line"><span class="keyword">if</span> task.WorkerType == workerType &amp;&amp; task.State != Idle &#123;</span><br><span class="line">flag = <span class="literal">false</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line">m.TaskList.Range(f)</span><br><span class="line"><span class="keyword">return</span> flag</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ˜¯æ£€æµ‹å…¨éƒ¨ä»»åŠ¡æ˜¯å¦å®Œæˆ</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m *Master)</span> <span class="title">isDone</span><span class="params">()</span> <span class="title">bool</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> m.checkTaskIdle(Map) &amp;&amp; m.checkTaskIdle(Reduce) &amp;&amp; <span class="built_in">len</span>(m.MapTaskChannel) == <span class="number">0</span> </span><br><span class="line">&amp;&amp; <span class="built_in">len</span>(m.ReduceTaskChannel) == <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="MapTaskFinish"><a href="#MapTaskFinish" class="headerlink" title="MapTaskFinish"></a>MapTaskFinish</h3><p>Mapä»»åŠ¡æ‰§è¡Œå®Œåå‘Šè¯‰ç»™Masterï¼Œç„¶åMasterå°†ä¸­é—´æ–‡ä»¶è®°å½•ï¼Œè¿™é‡Œç”¨äº†sync.Mapï¼Œè®°å½•åŒæ—¶åˆ†ç±»</p><p>è®°å½•å®Œåè°ƒç”¨<code>initTaskState</code> åˆå§‹åŒ–Workerä¸ºç©ºé—²çŠ¶æ€</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m *Master)</span> <span class="title">MapTaskFinish</span><span class="params">(args *MapFinish, reply *TaskReply)</span> <span class="title">error</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> _, file := <span class="keyword">range</span> args.IntermediateFiles &#123;</span><br><span class="line">id := m.getReduceWorkerId(file)</span><br><span class="line"><span class="keyword">if</span> arr, ok := m.IntermediateFiles.Load(id); ok &#123;</span><br><span class="line">m.IntermediateFiles.Store(id, <span class="built_in">append</span>(arr.([]<span class="keyword">string</span>), file))</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">m.IntermediateFiles.Store(id, []<span class="keyword">string</span>&#123;file&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">m.initTaskState(args.WorkerId)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mit6.824 </tag>
            
            <tag> mapreduce </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¡¹ç›®Golangä¼˜åŒ–ç‚¹</title>
      <link href="/2020/10/26/%E9%A1%B9%E7%9B%AEGolang%E4%BC%98%E5%8C%96%E7%82%B9/"/>
      <url>/2020/10/26/%E9%A1%B9%E7%9B%AEGolang%E4%BC%98%E5%8C%96%E7%82%B9/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€å‰è¨€"><a href="#ä¸€ã€å‰è¨€" class="headerlink" title="ä¸€ã€å‰è¨€"></a>ä¸€ã€å‰è¨€</h1><p>æœ€è¿‘æ¥æ‰‹çš„ä¸€ä¸ªé¡¹ç›®éœ€è¦<del>é¢„å…ˆç”Ÿæˆå¤§é‡ç¼“å­˜ï¼ˆå¹¶ä¸æ˜¯ä¸€ä¸ªå¥½æ–¹æ¡ˆï¼Œæœ€ç»ˆbanæ‰äº†ï¼‰</del>ï¼Œåœ¨ç”Ÿæˆç¼“å­˜å¤„ç†æ•°æ®ä¸­å‘ç°äº†ä¸€äº›ä¼˜åŒ–ç‚¹ï¼Œå¯ä»¥æé«˜é€Ÿåº¦ï¼Œåœ¨æ­¤è®°å½•ä¸€ä¸‹ï¼Œé¦–å…ˆå¯ä»¥äº†è§£ä¸€ä¸‹å¦‚ä½•åˆ©ç”¨å·¥å…·æ‰¾å‡ºä»£ç ä¸­ä¸€äº›ä»£ç å—çš„æ‰§è¡Œé€Ÿåº¦ã€‚</p><h1 id="äºŒã€pprof"><a href="#äºŒã€pprof" class="headerlink" title="äºŒã€pprof"></a>äºŒã€pprof</h1><h2 id="2-1-ç®€ä»‹"><a href="#2-1-ç®€ä»‹" class="headerlink" title="2.1 ç®€ä»‹"></a>2.1 ç®€ä»‹</h2><p><a href="https://github.com/google/pprof">google/pprof</a></p><p>pprof æ˜¯ç”¨äºå¯è§†åŒ–å’Œåˆ†ææ€§èƒ½åˆ†ææ•°æ®çš„å·¥å…·ï¼Œè¿™é‡Œä¸»è¦ç”¨æ¥å®šä½æ€§èƒ½é—®é¢˜</p><p>ä¸»è¦æœ‰ä»¥ä¸‹æ•°æ®ï¼š</p><ul><li><code>CPU Profiling</code>ï¼šCPU åˆ†æï¼ŒæŒ‰ç…§ä¸€å®šçš„é¢‘ç‡é‡‡é›†æ‰€ç›‘å¬çš„åº”ç”¨ç¨‹åº CPUï¼ˆå«å¯„å­˜å™¨ï¼‰çš„ä½¿ç”¨æƒ…å†µï¼Œå¯ç¡®å®šåº”ç”¨ç¨‹åºåœ¨ä¸»åŠ¨æ¶ˆè€— CPU å‘¨æœŸæ—¶èŠ±è´¹æ—¶é—´çš„ä½ç½®</li><li><code>Memory Profiling</code>ï¼šå†…å­˜åˆ†æï¼Œåœ¨åº”ç”¨ç¨‹åºè¿›è¡Œå †åˆ†é…æ—¶è®°å½•å †æ ˆè·Ÿè¸ªï¼Œç”¨äºç›‘è§†å½“å‰å’Œå†å²å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œä»¥åŠæ£€æŸ¥å†…å­˜æ³„æ¼</li><li><code>Block Profiling</code>ï¼šé˜»å¡åˆ†æï¼Œè®°å½• goroutine é˜»å¡ç­‰å¾…åŒæ­¥ï¼ˆåŒ…æ‹¬å®šæ—¶å™¨é€šé“ï¼‰çš„ä½ç½®</li><li><code>Mutex Profiling</code>ï¼šäº’æ–¥é”åˆ†æï¼ŒæŠ¥å‘Šäº’æ–¥é”çš„ç«äº‰æƒ…å†µ</li></ul><p>è¿™é‡Œæˆ‘ä»¬ä¸»è¦ç”¨åˆ°ç¬¬ä¸€ç‚¹</p><h2 id="2-2-ç»“æœåˆ†æ"><a href="#2-2-ç»“æœåˆ†æ" class="headerlink" title="2.2 ç»“æœåˆ†æ"></a>2.2 ç»“æœåˆ†æ</h2><p>è¿™é‡Œä½¿ç”¨çš„æ˜¯webåº”ç”¨ï¼Œå¯ä»¥ä½¿ç”¨ <code>net/http/pprof</code>åº“ï¼Œå®ƒèƒ½å¤Ÿåœ¨æä¾› HTTP æœåŠ¡è¿›è¡Œåˆ†æ</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">go</span> tool pprof <span class="string">&quot;http://127.0.0.1:8090/debug/pprof/profile&quot;</span></span><br></pre></td></tr></table></figure><p>è¾“å…¥å‘½ä»¤åå¹¶è°ƒç”¨æ¥å£ï¼Œ30såä¼šæš‚åœï¼Œç„¶åè¾“å…¥<code>web</code>å‘½ä»¤å‡ºç°ä¸‹é¢çš„é¡µé¢</p><p>è¿™ä¸ªæ˜¯pprofçš„<code>Graph</code>è§†å›¾ï¼Œè®°å½•äº†è°ƒç”¨æ–¹æ³•æ‰€èŠ±çš„æ—¶é—´å’Œè°ƒç”¨é“¾ï¼Œ<strong>æˆ‘ä»¬ä¸€èˆ¬ä¼šå…³æ³¨çº¢è‰²é¢œè‰²æ¯”è¾ƒæ·±çš„é‚£ä¸€å—ï¼Œç„¶åæ‰¾åˆ°è‡ªå·±å†™çš„æ–¹æ³•</strong></p><p><img src="/2020/10/26/%E9%A1%B9%E7%9B%AEGolang%E4%BC%98%E5%8C%96%E7%82%B9/Untitled.png" alt></p><p><img src="/2020/10/26/%E9%A1%B9%E7%9B%AEGolang%E4%BC%98%E5%8C%96%E7%82%B9/pprof-graph_(1" alt>.png)</p><h2 id="2-3-æ‰¾åˆ°å…³é”®éƒ¨åˆ†"><a href="#2-3-æ‰¾åˆ°å…³é”®éƒ¨åˆ†" class="headerlink" title="2.3 æ‰¾åˆ°å…³é”®éƒ¨åˆ†"></a>2.3 æ‰¾åˆ°å…³é”®éƒ¨åˆ†</h2><p><img src="/2020/10/26/%E9%A1%B9%E7%9B%AEGolang%E4%BC%98%E5%8C%96%E7%82%B9/Untitled%201.png" alt></p><p>ä»é¡¶ç«¯å¼€å§‹æ‰¾åˆ°ç¬¬ä¸€ä¸ªè‡ªå·±çš„ä¸šåŠ¡æ–¹æ³•ï¼Œè¿™é‡Œä¸º<code>GetDetailsInfo</code> </p><p>ç„¶åæˆ‘ä»¬å¯ä»¥è¾“å…¥å‘½ä»¤<code>list GetDetailsInfo</code> è·å¾—è¯¦ç»†ä¿¡æ¯</p><p><img src="/2020/10/26/%E9%A1%B9%E7%9B%AEGolang%E4%BC%98%E5%8C%96%E7%82%B9/Untitled%202.png" alt></p><p>è¿™é‡Œå®šä½åˆ°60è¡ŒèŠ±é”€çš„æ—¶é—´æœ€å¤šï¼Œä½†æ˜¯è¿™ä¸ªè¿˜æ˜¯ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å›åˆ°ç»ˆç«¯è¾“å…¥<code>web GetDetailsInfo</code>  å‘½ä»¤æ˜¾ç¤ºè¯¦ç»†ä¸€ç‚¹ä¿¡æ¯ã€‚</p><p>![]é¡¹ç›®Golangä¼˜åŒ–ç‚¹/Untitled%203.png)</p><p>å®šä½128è¡Œï¼Œè¿™é‡Œæ˜¯ä½¿ç”¨çš„<code>GoFrame</code>æ¡†æ¶å¸¦çš„ormæŸ¥è¯¢è¯­å¥ï¼Œå†å¾€ä¸‹çš„ä»£ç åˆ™æ˜¯æ¡†æ¶çš„æºç ï¼Œè‡³æ­¤ï¼Œåˆ©ç”¨pprofæ‰¾é—®é¢˜å¯ä»¥å‘Šä¸€æ®µè½</p><h1 id="ä¸‰ã€ä¼˜åŒ–ç‚¹"><a href="#ä¸‰ã€ä¼˜åŒ–ç‚¹" class="headerlink" title="ä¸‰ã€ä¼˜åŒ–ç‚¹"></a>ä¸‰ã€ä¼˜åŒ–ç‚¹</h1><h2 id="3-1-ååºåˆ—åŒ–"><a href="#3-1-ååºåˆ—åŒ–" class="headerlink" title="3.1 ååºåˆ—åŒ–"></a>3.1 ååºåˆ—åŒ–</h2><h3 id="3-1-1-æ‰¾å‡ºå…³é”®ç‚¹"><a href="#3-1-1-æ‰¾å‡ºå…³é”®ç‚¹" class="headerlink" title="3.1.1 æ‰¾å‡ºå…³é”®ç‚¹"></a>3.1.1 æ‰¾å‡ºå…³é”®ç‚¹</h3><p>å¯¹åŒä¸€æ¥å£è°ƒç”¨ä¸‰æ¬¡ï¼Œç„¶ååˆ©ç”¨pprofæ‰¾å‡ºç¼ºé™·ç‚¹</p><p><img src="/2020/10/26/%E9%A1%B9%E7%9B%AEGolang%E4%BC%98%E5%8C%96%E7%82%B9/Untitled%204.png" alt></p><p>è¿™é‡Œé¢å¯ä»¥çœ‹åˆ°ï¼Œç»å¤§éƒ¨åˆ†æ—¶é—´éƒ½èŠ±åœ¨äº†<code>FindAll</code> æ–¹æ³•ä¸Šé¢äº†ï¼ŒæŸ¥çœ‹è¿™ä¸€éƒ¨åˆ†æºç </p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tapd_bugs.FindAll(tapd_bugs.Columns.WorkspaceName, workspaceName)</span><br></pre></td></tr></table></figure><p>è¿™ä¸€éƒ¨åˆ†ä»£ç çš„ä½œç”¨æ˜¯ä»æ•°æ®åº“æ‹¿å‡ºæ•°æ®å¹¶ååºåˆ—åŒ–åˆ°ç»“æ„ä½“ä¸Šé¢ï¼ŒSQLæŸ¥è¯¢è¯­å¥ç›¸å½“äº</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM tapd_bugs</span><br><span class="line">WHERE workspace_name = <span class="string">&quot;xxx&quot;</span>;</span><br></pre></td></tr></table></figure><p>é¦–å…ˆæˆ‘ä»¬å¾—æŸ¥çœ‹ä»æ•°æ®åº“æ‹¿å‡ºæ•°æ®å¤§æ¦‚éœ€è¦å¤šä¹…</p><p>ä»ç¨‹åºæ‰“å°å‡ºæ¥çš„logæ—¥å¿—ä¸­çœ‹åˆ°ï¼Œä»æ•°æ®åº“æ‹¿æ•°æ®èŠ±è´¹çš„æ—¶é—´ä¸åˆ°10msï¼ˆå¤§æ¦‚8wæ•°æ®ï¼‰</p><p>![]é¡¹ç›®Golangä¼˜åŒ–ç‚¹/Untitled%205.png)</p><p>é‚£ä¹ˆé—®é¢˜å¯èƒ½å‡ºåœ¨äº†ååºåˆ—åŒ–ä¸Šé¢äº†ï¼Œè¿™é‡Œçš„ååºåˆ—åŒ–æ„æ€å¤§æ¦‚æ˜¯</p><p>æ‹¿åˆ°çš„æ•°æ®æ ¼å¼å¤§æ¦‚æ˜¯è¿™æ ·ï¼Œæ˜¯ä¸€ä¸ªjsonæ•°ç»„ï¼ˆè¿™é‡Œå®é™…æ˜¯[]byteæ•°ç»„ï¼Œåªä¸è¿‡ideæ˜¾ç¤ºå‹å¥½åŒ–äº†ï¼‰</p><p><img src="/2020/10/26/%E9%A1%B9%E7%9B%AEGolang%E4%BC%98%E5%8C%96%E7%82%B9/Untitled%206.png" alt></p><p>ç»è¿‡æˆ‘ä»¬ååºåˆ—åŒ–åï¼Œå°±å¯ä»¥å°†è¿™äº›å€¼æ”¾åˆ°ç»“æ„ä½“ä¸­ï¼Œå°±ç›¸å½“äºç¡®å®šåŒ–äº†</p><p><img src="/2020/10/26/%E9%A1%B9%E7%9B%AEGolang%E4%BC%98%E5%8C%96%E7%82%B9/Untitled%207.png" alt></p><p>æˆ‘ä»¬æŸ¥çœ‹ä¸‹è¿™éƒ¨åˆ†æºç </p><p><img src="/2020/10/26/%E9%A1%B9%E7%9B%AEGolang%E4%BC%98%E5%8C%96%E7%82%B9/Untitled%208.png" alt></p><p>è¿™é‡Œå¯ä»¥æ˜æ˜¾çœ‹å‡ºä»£ç 346è¡Œæ˜¯å°†æŸ¥è¯¢çš„æ•°æ®<code>all</code>ååºåˆ—åŒ–åˆ°<code>entities</code> ï¼Œé‚£ä¹ˆé—®é¢˜å°±åº”è¯¥å‡ºç°åœ¨çº¢æ¡†é‚£ä¸€å—ï¼Œç‚¹è¿›å»æŸ¥çœ‹æºç çš„è¯</p><p><img src="/2020/10/26/%E9%A1%B9%E7%9B%AEGolang%E4%BC%98%E5%8C%96%E7%82%B9/Untitled%209.png" alt></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¾ˆå¤šå…³äº<code>reflect</code>åŒ…çš„å‡½æ•°ï¼Œå¯ä»¥å¾ˆæ˜æ˜¾çœ‹å‡ºè¿™é‡Œä½¿ç”¨äº†åå°„çš„æ–¹å¼ååºåˆ—åŒ–</p><h3 id="3-1-2-ååºåˆ—åŒ–å¤„ç†è¿‡ç¨‹"><a href="#3-1-2-ååºåˆ—åŒ–å¤„ç†è¿‡ç¨‹" class="headerlink" title="3.1.2 ååºåˆ—åŒ–å¤„ç†è¿‡ç¨‹"></a>3.1.2 ååºåˆ—åŒ–å¤„ç†è¿‡ç¨‹</h3><p>å‡è®¾æˆ‘ä»¬æœ‰å¦‚ä¸‹JSONï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;Name&quot;</span>: <span class="string">&quot;å¼ ä¸‰&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;Age&quot;</span>: <span class="number">21</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;Name&quot;</span>: <span class="string">&quot;æå››&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;Age&quot;</span>: <span class="number">31</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>å’Œå¦‚ä¸‹ç»“æ„ä½“ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">Name <span class="keyword">string</span></span><br><span class="line">Age <span class="keyword">int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆä½¿ç”¨è¯¥æ–¹æ³•ååºåˆ—åŒ–ä¸€èˆ¬çš„è¿‡ç¨‹æ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Œæ€ä¹ˆèƒ½å¤ŸæŠŠJSONé‡Œé¢çš„æ•°æ®æ˜ å°„åˆ°ç»“æ„ä½“é‡Œé¢å‘¢ï¼Ÿ</p><p><img src="/2020/10/26/%E9%A1%B9%E7%9B%AEGolang%E4%BC%98%E5%8C%96%E7%82%B9/unmarshal.png" alt></p><ul><li>é¦–å…ˆä¼šåˆ©ç”¨JSONæ‰«æçŠ¶æ€æœºå¯¹è¾“å…¥çš„JSON byteæ•°ç»„è¿›è¡Œåˆæ³•æ€§æ£€æŸ¥ï¼Œä»¥ä¿è¯åé¢æ“ä½œJSONçš„æ­£ç¡®æ€§</li><li>æ¥ç€ä¼šåˆ©ç”¨çŠ¶æ€æœºå¯¹JSONè¿›è¡Œè§£æï¼Œæå–å‡ºkeyï¼Œvalueç­‰ä¿¡æ¯</li><li>æœ€ååˆ©ç”¨åå°„ï¼Œå°†è¿™äº›ä¿¡æ¯æ˜ å°„åˆ°ç»“æ„ä½“ä¸­</li></ul><p>åˆ©ç”¨åå°„æˆ‘ä»¬å¯ä»¥åœ¨è¿è¡Œæ—¶å¯¹ç»“æ„ä½“åŠ¨æ€èµ‹å€¼ï¼Œå¯¹äºä¸€èˆ¬ç»“æ„ä½“èµ‹å€¼æˆ‘ä»¬å¯ä»¥è¿™æ ·æ˜¾å¼èµ‹å€¼ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User&#123;<span class="string">&quot;å¼ ä¸‰&quot;</span>, <span class="number">21</span>&#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™æ ·å°±å¤ªé™åˆ¶äº†ã€‚å› ä¸ºå¯¹äºä¸€èˆ¬çš„æƒ…å†µï¼Œæˆ‘ä»¬æ˜¯ä¸çŸ¥é“ä¼ å…¥çš„ç»“æ„ä½“å’ŒJSONçš„ç»“æ„æ˜¯æ€ä¹ˆæ ·çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦ä¸€ç§æŠ€æœ¯èƒ½å¤Ÿè®©æˆ‘ä»¬åœ¨è¿è¡Œæ—¶åŠ¨æ€è·å–åˆ°ç»“æ„ä½“ç›¸å…³çš„ä¿¡æ¯ï¼ˆæ¯”å¦‚ç±»å‹å’Œå€¼ï¼‰ï¼Œå¹¶ä¸”æœ‰ä¸€äº›æ–¹æ³•èƒ½å¤Ÿæ“çºµè¿™äº›æ•°æ®ï¼Œæ¯”å¦‚èµ‹å€¼ï¼Œè¿™æ ·çš„è¯æˆ‘ä»¬å°±èƒ½å¤ŸåŠ¨æ€å»å¤„ç†è¿™äº›æ•°æ®äº†ï¼Œåå°„èƒ½å¤Ÿæä¾›æ–¹æ³•æ”¯æŒï¼Œæ‰€ä»¥å°±æ˜¯æˆ‘ä»¬è¦ç”¨åå°„çš„åŸå› ã€‚</p><h3 id="3-1-3-åå°„"><a href="#3-1-3-åå°„" class="headerlink" title="3.1.3 åå°„"></a>3.1.3 åå°„</h3><ul><li>é€šè¿‡<code>reflect.TypeOf(i interface&#123;&#125;)</code> æˆ‘ä»¬èƒ½æ‹¿åˆ°å˜é‡çš„ç±»å‹</li><li>é€šè¿‡<code>reflect.ValueOf(i interface&#123;&#125;)</code> æˆ‘ä»¬èƒ½æ‹¿åˆ°å˜é‡çš„å€¼</li></ul><p>å¦‚æœæˆ‘ä»¬çŸ¥é“äº†ä¸€ä¸ªå˜é‡çš„ç±»å‹å’Œå€¼ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€çŸ¥é“äº†è¿™ä¸ªå˜é‡çš„å…¨éƒ¨ä¿¡æ¯ã€‚</p><p>æœ‰äº†å˜é‡çš„ç±»å‹ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>Method</code> æ–¹æ³•è·å¾—ç±»å‹å®ç°çš„æ–¹æ³•ï¼Œé€šè¿‡ <code>Field</code> è·å–ç±»å‹åŒ…å«çš„å…¨éƒ¨å­—æ®µã€‚å¯¹äºä¸åŒçš„ç±»å‹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è°ƒç”¨ä¸åŒçš„æ–¹æ³•è·å–ç›¸å…³ä¿¡æ¯ï¼š</p><ul><li>ç»“æ„ä½“ï¼šè·å–å­—æ®µçš„æ•°é‡å¹¶é€šè¿‡ä¸‹æ ‡å’Œå­—æ®µåè·å–å­—æ®µ <code>StructField</code>ï¼›</li><li>å“ˆå¸Œè¡¨ï¼šè·å–å“ˆå¸Œè¡¨çš„ <code>Key</code> ç±»å‹ï¼›</li><li>å‡½æ•°æˆ–æ–¹æ³•ï¼šè·å–å…¥å‚å’Œè¿”å›å€¼çš„ç±»å‹ï¼›</li><li>â€¦</li></ul><p>æ¥ç€æˆ‘ä»¬å¯ä»¥åˆ©ç”¨<code>reflect.Value.Set</code> æ–¹æ³•æ›´æ–°åå°„å¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸‹é¢çš„è¿™ä¸ªä»£ç ï¼Œä¼ å…¥ä¸€ä¸ªç©ºçš„<code>entitiesæ•°ç»„</code>ï¼Œç„¶åå°±å¯ä»¥å¾—åˆ°æœ‰å…·ä½“å€¼çš„<code>entitiesæ•°ç»„</code></p><p><img src="/2020/10/26/%E9%A1%B9%E7%9B%AEGolang%E4%BC%98%E5%8C%96%E7%82%B9/Untitled%208.png" alt></p><p>åå°„çš„åŸç†å¯ä»¥å¤§æ¦‚ç†è§£ä¸ºï¼š</p><p>å› ä¸ºä¼ å…¥çš„æ•°æ®éƒ½æ˜¯<code>interface&#123;&#125;</code>ç±»å‹ï¼Œå…¶åœ¨å†…éƒ¨å­˜å‚¨äº†<code>åˆ†é…ç»™è¯¥å˜é‡çš„å…·ä½“å€¼ï¼ˆthe concrete value assigned to the variableï¼‰</code>ä»¥åŠ<code>è¯¥å€¼çš„ç±»å‹æè¿°ç¬¦ï¼ˆvalue&#39;s type descriptorï¼‰</code></p><p>åœ¨<code>build</code>æ—¶ï¼Œ<code>Go linker</code>ä¼šå°†æœ‰å…³åº”ç”¨ç¨‹åºä½¿ç”¨çš„æ‰€æœ‰ç±»å‹çš„ä¿¡æ¯åµŒå…¥åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­</p><p>è½¬æ¢ã€ç¼–è¯‘æ—¶å·²çŸ¥çš„ç±»å‹ã€‘åˆ°ã€<code>interface&#123;&#125;</code>ã€‘çš„è¿‡ç¨‹ä¸­ï¼ŒGOç¼–è¯‘å™¨ä¼šå°†ç±»å‹æè¿°ç¬¦æŒ‡å‘å…·ä½“çš„ç±»å‹æè¿°ç¬¦ï¼Œè¿™æ˜¯ç¼–è¯‘æ—¶å·²çŸ¥çš„ï¼Œæ‰€ä»¥é€šè¿‡è¿™ä¸¤ä¸ªå°±èƒ½æ‹¿åˆ°ç›¸å…³çš„ä¿¡æ¯ã€‚</p><h3 id="3-1-4-åå°„ç¼ºç‚¹"><a href="#3-1-4-åå°„ç¼ºç‚¹" class="headerlink" title="3.1.4 åå°„ç¼ºç‚¹"></a>3.1.4 åå°„ç¼ºç‚¹</h3><p>å¯¹äºæœ¬é¡¹ç›®æ¥è®²ï¼Œç¼ºç‚¹å°±æ˜¯æ…¢ï¼Œç‰¹åˆ«æ˜¯æ•°æ®é‡å¤šéœ€è¦å¾ªç¯è°ƒç”¨åå°„çš„æ—¶å€™ï¼Œä¸»è¦çš„åŸå› åœ¨äºï¼š</p><ol><li>æ¶‰åŠåˆ°å†…å­˜åˆ†é…ä»¥åŠåç»­çš„GC</li><li>æ¯æ¬¡æ‰§è¡Œæ—¶éƒ½éœ€è¦éªŒè¯æ‰§è¡Œçš„æ¯ä¸ªæ­¥éª¤</li><li>æŸ¥æ‰¾ç±»å‹ä¿¡æ¯æ—¶<code>I/O</code>é€Ÿåº¦æ…¢</li><li>ç­‰ç­‰</li></ol><h3 id="3-1-5-è§£å†³æ–¹æ³•"><a href="#3-1-5-è§£å†³æ–¹æ³•" class="headerlink" title="3.1.5 è§£å†³æ–¹æ³•"></a>3.1.5 è§£å†³æ–¹æ³•</h3><p>æ—¢ç„¶ååºåˆ—åŒ–è¿‡ç¨‹æ¯”è¾ƒæ…¢ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹JSONåº“å»æé«˜æ•ˆç‡ã€‚ä»…éœ€è¦ä¿®æ”¹ä¸‹æºç ï¼Œå°†<code>structs</code>éƒ¨åˆ†å»æ‰ï¼Œæ”¹ä¸ºè°ƒç”¨ç¬¬ä¸‰æ–¹JSONåº“çš„è§£ææ–¹å¼ã€‚</p><p>å¯¹äºåºåˆ—åŒ–åº“çš„å®ç°æ¥è®²ï¼Œå¦‚æœåœ¨è¿è¡Œæ—¶é€šè¿‡åå°„çš„æ–¹å¼è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œæ€§èƒ½ä¸ä¼šå¤ªå¥½ï¼Œæ‰€ä»¥é«˜æ€§èƒ½çš„åºåˆ—åŒ–åº“å¾ˆå¤šéƒ½æ˜¯é€šè¿‡ä»£ç ç”Ÿæˆåœ¨ç¼–è¯‘çš„æ—¶å€™æä¾›åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„æ–¹æ³•ã€‚å› ä¸ºåœ¨ç¼–è¯‘çš„æ—¶å€™å·²ç»çŸ¥é“æ¯ä¸ªå­—æ®µçš„ç±»å‹ï¼Œæ‰€ä»¥æ— éœ€å…ƒæ•°æ®ï¼Œå¯ä»¥èªæ˜çš„å¯¹å­—èŠ‚æŒ‰ç…§æµçš„æ–¹å¼é¡ºåºå¤„ç†ä»¥åŠä½œæ›´å¤šçš„ä¼˜åŒ–ã€‚</p><p><img src="/2020/10/26/%E9%A1%B9%E7%9B%AEGolang%E4%BC%98%E5%8C%96%E7%82%B9/Untitled%2010.png" alt></p><p>æ•ˆç‡å¯¹æ¯”</p><p><img src="/2020/10/26/%E9%A1%B9%E7%9B%AEGolang%E4%BC%98%E5%8C%96%E7%82%B9/Untitled%204.png" alt></p><p><img src="/2020/10/26/%E9%A1%B9%E7%9B%AEGolang%E4%BC%98%E5%8C%96%E7%82%B9/Untitled%2011.png" alt></p><h3 id="3-1-6-æ–¹æ¡ˆç¼ºç‚¹"><a href="#3-1-6-æ–¹æ¡ˆç¼ºç‚¹" class="headerlink" title="3.1.6 æ–¹æ¡ˆç¼ºç‚¹"></a>3.1.6 æ–¹æ¡ˆç¼ºç‚¹</h3><ul><li>å› ä¸ºä»£ç æ˜¯æå‰ç”Ÿæˆçš„ï¼Œæ‰€ä»¥çµæ´»æ€§ä¸å¼º</li><li>é€‚ç”¨äºå¤§é‡æ•°æ®åºåˆ—åŒ–åœºæ™¯ï¼Œå¦‚æœæ•°æ®é‡ä¸å¼ºï¼Œæ•ˆæœä¸æ˜æ˜¾ï¼Œåè€Œå¢åŠ æˆæœ¬</li><li>éœ€è¦æ˜ç¡®ååºåˆ—åŒ–åçš„ç»“æ„</li></ul><h2 id="3-2-Redis-mset-key"><a href="#3-2-Redis-mset-key" class="headerlink" title="3.2 Redis mset key"></a>3.2 Redis mset key</h2><h3 id="3-2-1-æ‰¾å‡ºå…³é”®ç‚¹"><a href="#3-2-1-æ‰¾å‡ºå…³é”®ç‚¹" class="headerlink" title="3.2.1 æ‰¾å‡ºå…³é”®ç‚¹"></a>3.2.1 æ‰¾å‡ºå…³é”®ç‚¹</h3><p>é¡¹ç›®éœ€è¦ä¸€ä¸‹è®¾ç½®å¾ˆå¤šç¼“å­˜ï¼Œè¿™ä¸ªä¹Ÿæ˜¯ä¸ªä¼˜åŒ–ç‚¹ï¼Œå› ä¸ºpprofä¸èƒ½æ•è·åˆ°forå¾ªç¯ä¸­Redis set keyçš„æ‰€èŠ±è´¹çš„æ—¶é—´ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½æ‰‹åŠ¨æ‰“ç‚¹</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">start := time.Now()</span><br><span class="line"><span class="keyword">for</span> key, value := <span class="keyword">range</span> data&#123;</span><br><span class="line">g.Redis().Do(<span class="string">&quot;SETEX&quot;</span>, key, expiredTime, value)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(time.Now().Sub(start))</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ•°æ®å¤§æ¦‚æœ‰1kæ¡ï¼Œæ¯æ¡æ•°æ®åºåˆ—åé•¿åº¦ä¸åˆ°20000</p><p>è·‘äº†ä¸€ä¸‹ä¸Šé¢çš„æ‰“ç‚¹ï¼Œéœ€è¦èŠ±è´¹<code>8.8595475s</code></p><p>è¿™é‡Œç“¶é¢ˆä¸»è¦åœ¨äºå¾ªç¯è°ƒç”¨ï¼Œå¤šæ¬¡è°ƒç”¨ä¼šå¢åŠ å¼€é”€ï¼š</p><p>å› ä¸ºRedisæœ¬èº«æ˜¯åŸºäº<code>request/response</code>æ¨¡å¼ï¼Œæ¯ä¸€ä¸ªå‘½ä»¤éƒ½éœ€è¦ç­‰å¾…ä¸Šä¸€ä¸ªå‘½ä»¤å“åº”åè¿›è¡Œå¤„ç†ï¼Œä¸­é—´éœ€è¦ç»è¿‡RTTï¼ˆRound Time Tripï¼Œå¾€è¿”å»¶æ—¶ï¼Œè¡¨ç¤ºå‘é€ç«¯ä»å‘é€æ•°æ®å¼€å§‹ï¼Œåˆ°å‘é€ç«¯æ”¶åˆ°æ¥è‡ªæ¥æ”¶ç«¯çš„ç¡®è®¤ï¼Œæ‰€éœ€è¦çš„æ—¶é—´ã€‚ï¼‰ï¼Œå¹¶ä¸”éœ€è¦é¢‘ç¹è°ƒç”¨ç³»ç»ŸI/O</p><hr><p>å•æ¬¡setxçš„æ“ä½œæ‰€èŠ±è´¹çš„æ—¶é—´ä¸º<code>22.9419ms</code> å‹ç¼©å­—ç¬¦ä¸²åèƒ½å‡å°‘åˆ°<code>17.9522ms</code> ä½†æ˜¯æ•´ä½“è°ƒç”¨èµ·æ¥å·®åˆ«ä¸å¤§</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">g.Redis().Do(<span class="string">&quot;SETEX&quot;</span>, key, expiredTime, </span><br><span class="line">snappy.Encode(<span class="literal">nil</span>, gconv.Bytes(testPlanProcessData)))</span><br></pre></td></tr></table></figure><h3 id="3-2-2-mset"><a href="#3-2-2-mset" class="headerlink" title="3.2.2 mset"></a>3.2.2 mset</h3><p>å¯¹äºè¿™ç§éœ€æ±‚ï¼Œä¸€ä¸ªæ›´å¥½çš„æ–¹æ³•ä½¿ç”¨<code>MSET</code>å‘½ä»¤ï¼Œå¯ä»¥ä¸€æ¬¡æ€§è®¾ç½®å¤šä¸ªkey value</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MSET k1 <span class="string">&quot;good&quot;</span> k2 <span class="string">&quot;bye&quot;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤æ˜¯åŸå­çš„ï¼Œè¦ä¸å…¨éƒ¨å®Œæˆè¦ä¹ˆå®Œå…¨ä¸å®Œæˆï¼Œä¸ä¼šçœ‹åˆ°ä¸€éƒ¨åˆ†å€¼è¢«æ›´æ–°ï¼Œè€Œå…¶ä»–å€¼æœªæ›´æ–°è¿™ç§æƒ…å†µã€‚è¯¥å‘½ä»¤æ‰§è¡Œåä¼šè¿”å›â€okâ€å­—ç¬¦ä¸²ã€‚</p><p>ä»Rediså®˜æ–¹æ–‡æ¡£æ¥çœ‹ï¼Œè¯¥å‘½ä»¤æ¯æ¬¡éƒ½æ˜¯ä¼šè¿”å›æˆåŠŸï¼Œä¸ä¼šå¤±è´¥</p><blockquote><p>Return value<br>Simple string reply: always OK since MSET canâ€™t fail.</p></blockquote><p>è¿™é‡Œçš„æ„æ€æ˜¯ä¸ä¼šåœ¨<code>MSET</code> é˜¶æ®µè¿”å›é”™è¯¯ï¼Œæœ‰é”™è¯¯çš„è¯Redisä¼šæå‰è¿”å›ï¼š</p><p>åœ¨å¤„ç†å‘½ä»¤ä¹‹å‰ä¼šæ£€æŸ¥å†…å­˜å®¹é‡ï¼Œå¦‚æœå†…å­˜å®¹é‡ä¸å¤Ÿï¼Œæ— è®ºå‘½ä»¤çš„å®é™…å“åº”å¦‚ä½•ï¼Œéƒ½ä¼šè¿”å›é”™è¯¯å“åº”</p><p>æ•ˆç‡å¯¹æ¯”ï¼š</p><p><code>8.8595475s</code> â†’ <code>1.3812954s</code></p><h3 id="3-2-3-æ–¹æ¡ˆç¼ºç‚¹"><a href="#3-2-3-æ–¹æ¡ˆç¼ºç‚¹" class="headerlink" title="3.2.3 æ–¹æ¡ˆç¼ºç‚¹"></a>3.2.3 æ–¹æ¡ˆç¼ºç‚¹</h3><p>ä½¿ç”¨ <code>MSET</code> ä¸èƒ½è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>Lua</code>è„šæœ¬å¤„ç†ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªæ‰¹é‡è®¾ç½®<code>xx:xx:</code>å‰ç¼€çš„keyè¿‡æœŸæ—¶é—´è„šæœ¬çš„ç¤ºä¾‹ã€‚å¯ç›´æ¥åœ¨<code>Redis-cli</code>ä¸­æ‰§è¡Œã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">eval</span> </span><br><span class="line"><span class="string">&#x27;for i, name in ipairs(redis.call(&quot;KEYS&quot;, &quot;xx:xx:*&quot;)) </span></span><br><span class="line"><span class="string">do redis.call(&quot;EXPIRE&quot;, name, 10); end&#x27;</span> </span><br><span class="line">0</span><br></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨ <code>eval</code>å‘½ä»¤æ‰§è¡Œ<code>Lua</code>è„šæœ¬</p><p><code>EVAL script numkeys key [key ...] arg [arg ...]</code></p><ul><li>ä¸Šé¢æœ€å0ä»£è¡¨0ä¸ªkey</li><li><code>redis.call</code> æ‰§è¡ŒRedis å‘½ä»¤</li><li><code>ipairs</code>éå†é›†åˆ</li></ul><h2 id="3-3-å…¶ä»–ä¼˜åŒ–"><a href="#3-3-å…¶ä»–ä¼˜åŒ–" class="headerlink" title="3.3 å…¶ä»–ä¼˜åŒ–"></a>3.3 å…¶ä»–ä¼˜åŒ–</h2><p>å…¶ä»–ä¼˜åŒ–ç‚¹éƒ½æ˜¯å¾ˆå¸¸è§çš„ï¼Œæ¯”å¦‚ï¼š</p><ul><li>åŠ ç´¢å¼•</li><li>å¤šçº¿ç¨‹ä¼˜åŒ–</li><li>é¿å…å¤šæ¬¡è°ƒSQLï¼Œä¸€æ¬¡æ€§æŸ¥å‡ºæ¥æ˜ å°„åˆ°map</li><li>ç­‰ç­‰</li></ul><p>è¿™é‡Œå°±ä¸èµ˜è¿°ã€‚</p><hr><ul><li><p>å‚è€ƒï¼š</p><p>  <a href="https://stackoverflow.com/questions/34605415/how-does-golang-implement-reflection">How does golang implement reflection?</a></p><p>  <a href="https://blog.golang.org/laws-of-reflection">The Go Blog</a></p><p>  <a href="http://cnblogs.com/clannadxr/p/11314874.html">ä»unmarshalå¸¦jsonå­—ç¬¦ä¸²å­—æ®µçš„jsonè¯´èµ·</a></p><p>  <a href="https://draveness.me/golang/docs/part2-foundation/ch04-basic/golang-reflect/#43-%E5%8F%8D%E5%B0%84">Go è¯­è¨€åå°„çš„å®ç°åŸç†</a></p><p>  <a href="http://miloyip.github.io/rapidjson/md_doc_internals.html#IterativeParser">RapidJSON: Internals</a></p><p>  <a href="https://zhuanlan.zhihu.com/p/37165706">Goè¯­è¨€encoding/jsonåº“æºç åˆ†æ</a></p><p>  <a href="https://stackoverflow.com/questions/12911248/redis-set-command-cant-fail-but-can">https://stackoverflow.com/questions/12911248/redis-set-command-cant-fail-but-can</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Golang </tag>
            
            <tag> pprof </tag>
            
            <tag> ååºåˆ—åŒ– </tag>
            
            <tag> mset </tag>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Golangåå°„åº”ç”¨-æ’åº</title>
      <link href="/2020/10/19/Golang%E5%8F%8D%E5%B0%84%E5%BA%94%E7%94%A8-%E6%8E%92%E5%BA%8F/"/>
      <url>/2020/10/19/Golang%E5%8F%8D%E5%B0%84%E5%BA%94%E7%94%A8-%E6%8E%92%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€åå°„"><a href="#ä¸€ã€åå°„" class="headerlink" title="ä¸€ã€åå°„"></a>ä¸€ã€åå°„</h1><p><strong>GoåŸºç¡€æ•™ç¨‹å¯çœ‹</strong></p><p><a href="https://studygolang.com/articles/13178">Go ç³»åˆ—æ•™ç¨‹ â€” 34. åå°„</a></p><p><a href="https://yar999.gitbook.io/gopl-zh/ch12">åå°„</a></p><p><a href="https://draveness.me/golang/docs/part2-foundation/ch04-basic/golang-reflect/">Go è¯­è¨€åå°„çš„å®ç°åŸç†</a></p><p>è¿™é‡Œè®°ä¸‹ç”¨çš„éƒ¨åˆ†</p><h2 id="1-1-reflect-Value"><a href="#1-1-reflect-Value" class="headerlink" title="1.1 reflect.Value"></a>1.1 reflect.Value</h2><p><code>reflect.Value</code> å¯ä»¥è¡¨ç¤ºä¸€ä¸ªä»»æ„ç±»å‹çš„å€¼</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">Name <span class="keyword">string</span></span><br><span class="line">Age <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">u := User&#123;<span class="string">&quot;å¼ ä¸‰&quot;</span>, <span class="number">56</span>&#125;</span><br><span class="line">v := reflect.ValueOf(u)</span><br><span class="line">fmt.Println(v)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*output:</span></span><br><span class="line"><span class="comment">&#123;å¼ ä¸‰ 56&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="1-2-reflect-Kind"><a href="#1-2-reflect-Kind" class="headerlink" title="1.2 reflect.Kind"></a>1.2 reflect.Kind</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">Name <span class="keyword">string</span></span><br><span class="line">Age <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">u := User&#123;<span class="string">&quot;å¼ ä¸‰&quot;</span>, <span class="number">56</span>&#125;</span><br><span class="line">t := reflect.TypeOf(u)</span><br><span class="line">k := t.Kind()</span><br><span class="line">fmt.Println(t)</span><br><span class="line">fmt.Println(k)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*output:</span></span><br><span class="line"><span class="comment">main.User</span></span><br><span class="line"><span class="comment">struct</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="1-3-åå°„å­—æ®µ"><a href="#1-3-åå°„å­—æ®µ" class="headerlink" title="1.3 åå°„å­—æ®µ"></a>1.3 åå°„å­—æ®µ</h2><p>æƒ³è¦åˆ©ç”¨åå°„æ‹¿åˆ°ç»“æ„ä½“çš„å­—æ®µï¼Œç„¶åå¯¹å…¶æ“ä½œï¼Œéœ€è¦è¿™ä¸ªå­—æ®µæ˜¯å¯è®¿é—®çš„ï¼Œä¹Ÿå°±æ˜¯é¦–å­—æ¯å¤§å†™</p><p><code>reflect.Indirect()</code>å‡½æ•°ç”¨äºè·å–ä¼ å…¥å‚æ•°æŒ‡å‘çš„å€¼</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Indirect</span><span class="params">(v Value)</span> <span class="title">Value</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> v.Kind() != Ptr &#123;</span><br><span class="line"><span class="keyword">return</span> v</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> v.Elem()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">Name <span class="keyword">string</span></span><br><span class="line">Age <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">u := User&#123;<span class="string">&quot;å¼ ä¸‰&quot;</span>, <span class="number">56</span>&#125;</span><br><span class="line">indirect := reflect.Indirect(reflect.ValueOf(&amp;u)).FieldByName(<span class="string">&quot;Age&quot;</span>)</span><br><span class="line">fmt.Println(indirect)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*output:</span></span><br><span class="line"><span class="comment">56</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><hr><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Indirect</span><span class="params">(v Value)</span> <span class="title">Value</span></span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(v Value)</span> <span class="title">Elem</span><span class="params">()</span> <span class="title">Value</span></span> &#123;&#125;</span><br></pre></td></tr></table></figure><p>è¿™äºŒä¸ªé•¿çš„å¾ˆåƒçš„å…„å¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«</p><blockquote><p><strong>*Elem</strong> returns the value that the interface v contains or that the pointer v points to. It panics if vâ€™s Kind is not Interface or Ptr. It returns the zero Value if v is nil.*</p><p><strong>*Indirect</strong> returns the value that v points to. If v is a nil pointer, Indirect returns a zero Value. If v is not a pointer, Indirect returns v.*</p><ul><li>å¦‚æœ<code>reflect.Value</code>æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œ é‚£ä¹ˆ<code>v.Elem()</code>ç­‰ä»·äº<code>reflect.Indirect(v)</code></li><li>å¦‚æœä¸æ˜¯æŒ‡é’ˆ<ul><li>å¦‚æœæ˜¯<code>interface</code> ï¼Œé‚£ä¹ˆ<code>reflect.Indirect(v)</code>è¿”å›åŸå€¼ï¼Œè€Œ<code>v.Elem()</code>è¿”å›<code>interface</code>ä¸­åŒ…å«çš„å€¼</li><li>å¦‚æœæ˜¯å…¶å®ƒå€¼ï¼Œ <code>v.Elem()</code>ä¼š<code>panic</code>ï¼Œè€Œ<code>reflect.Indirect(v)</code>è¿”å›åŸå€¼</li></ul></li></ul></blockquote><h1 id="äºŒã€æ’åº"><a href="#äºŒã€æ’åº" class="headerlink" title="äºŒã€æ’åº"></a>äºŒã€æ’åº</h1><h2 id="2-1-åœºæ™¯"><a href="#2-1-åœºæ™¯" class="headerlink" title="2.1 åœºæ™¯"></a>2.1 åœºæ™¯</h2><p>ç»™å®šç‰¹å®šå­—æ®µå­—ç¬¦ä¸²å¯¹ç»“æ„ä½“åˆ‡ç‰‡è¿›è¡Œæ’åºï¼Œå¦‚ä¸‹</p><p><code>sortutil.DescByField</code> æŒ‰ç…§Userç»“æ„ä½“ä¸­çš„Ageå­—æ®µä»å¤§åˆ°å°å¯¹åˆ‡ç‰‡æ’åº</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">Name <span class="keyword">string</span></span><br><span class="line">Age <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">userSlice := []User&#123;&#123;<span class="string">&quot;å¼ ä¸‰&quot;</span>, <span class="number">56</span>&#125;, &#123;<span class="string">&quot;æå››&quot;</span>, <span class="number">13</span>&#125;, &#123;<span class="string">&quot;ç‹äº”&quot;</span>, <span class="number">24</span>&#125;&#125;</span><br><span class="line">sortutil.DescByField(userSlice, <span class="string">&quot;Age&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-2-sort-Slice"><a href="#2-2-sort-Slice" class="headerlink" title="2.2 sort.Slice"></a>2.2 sort.Slice</h2><p>Goä¸­æœ‰ä¸ª<code>sort.Slice</code> æ–¹æ³•å¯ä»¥å¯¹ç»“æ„ä½“åˆ‡ç‰‡æ’åº</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sort.Slice(userSlice , <span class="function"><span class="keyword">func</span><span class="params">(i, j <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> userSlice [i].Age &gt; userSlice [j].Age</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™æ ·å¾—é…åˆ<code>switch</code></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">userSlice := []User&#123;&#123;<span class="string">&quot;å¼ ä¸‰&quot;</span>, <span class="number">56</span>&#125;, &#123;<span class="string">&quot;æå››&quot;</span>, <span class="number">13</span>&#125;, &#123;<span class="string">&quot;ç‹äº”&quot;</span>, <span class="number">24</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line">field := <span class="string">&quot;Name&quot;</span></span><br><span class="line"><span class="keyword">switch</span> field&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;Age&quot;</span>:</span><br><span class="line">sort.Slice(userSlice , <span class="function"><span class="keyword">func</span><span class="params">(i, j <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> userSlice [i].Age &gt; userSlice [j].Age</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;Name&quot;</span>:</span><br><span class="line">sort.Slice(userSlice , <span class="function"><span class="keyword">func</span><span class="params">(i, j <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> userSlice [i].Name &gt; userSlice [j].Name</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _, user := <span class="keyword">range</span> userSlice&#123;</span><br><span class="line">fmt.Println(user)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*output:</span></span><br><span class="line"><span class="comment">&#123;ç‹äº” 24&#125;</span></span><br><span class="line"><span class="comment">&#123;æå›› 13&#125;</span></span><br><span class="line"><span class="comment">&#123;å¼ ä¸‰ 56&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="2-2-SortWrapper"><a href="#2-2-SortWrapper" class="headerlink" title="2.2 SortWrapper"></a>2.2 SortWrapper</h2><p><a href="https://golang.org/pkg/sort/#example_Interface">sort - The Go Programming Language</a></p><p>ä½¿ç”¨<code>SortWrapper</code>ä¼˜é›…åœ°å®ç°</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;sort&quot;</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">Name <span class="keyword">string</span></span><br><span class="line">Age <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯ä»¥å£°æ˜ä¸º[]*Userä¼ å…¥æŒ‡é’ˆ</span></span><br><span class="line"><span class="keyword">type</span> Users []User</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s Users)</span> <span class="title">Len</span><span class="params">()</span> <span class="title">int</span></span>      &#123; <span class="keyword">return</span> <span class="built_in">len</span>(s) &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s Users)</span> <span class="title">Swap</span><span class="params">(i, j <span class="keyword">int</span>)</span></span> &#123; s[i], s[j] = s[j], s[i] &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> ByName <span class="keyword">struct</span>&#123; Users &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u ByName)</span> <span class="title">Less</span><span class="params">(i, j <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123; <span class="keyword">return</span> u.Users[i].Name &lt; u.Users[j].Name &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> ByAge <span class="keyword">struct</span>&#123; Users &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u ByAge)</span> <span class="title">Less</span><span class="params">(i, j <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123; <span class="keyword">return</span> u.Users[i].Age &lt; u.Users[j].Age&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">userSlice := []User&#123;&#123;<span class="string">&quot;å¼ ä¸‰&quot;</span>, <span class="number">56</span>&#125;, &#123;<span class="string">&quot;æå››&quot;</span>, <span class="number">13</span>&#125;, &#123;<span class="string">&quot;ç‹äº”&quot;</span>, <span class="number">24</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line">sort.Sort(ByAge&#123;userSlice&#125;)</span><br><span class="line"><span class="keyword">for</span> _, user := <span class="keyword">range</span> userSlice&#123;</span><br><span class="line">fmt.Println(user)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åé…ä¸Š<code>map</code>å¯ä»¥<del>æ›²çº¿æ•‘å›½</del></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">m := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]sort.Interface)</span><br><span class="line">m[<span class="string">&quot;Age&quot;</span>] = ByAge&#123;userSlice&#125;</span><br><span class="line">m[<span class="string">&quot;Name&quot;</span>] = ByName&#123;userSlice&#125;</span><br><span class="line"></span><br><span class="line">field := <span class="string">&quot;Age&quot;</span></span><br><span class="line">sort.Sort(m[field])</span><br></pre></td></tr></table></figure><h2 id="2-3-åå°„"><a href="#2-3-åå°„" class="headerlink" title="2.3 åå°„"></a>2.3 åå°„</h2><p>ä½¿ç”¨åå°„æ’åºnå¤šå¹´å‰å°±æœ‰å¤§ä½¬å®ç°äº†ï¼Œåªä¸è¿‡æ˜¯åœæ­¢æ›´æ–°äº†ï¼Œä¸è¿‡è¿˜æ˜¯å¯ä»¥ç”¨çš„ï¼Œä½¿ç”¨èµ·æ¥æŒºç®€å•çš„ï¼ŒæŒ‰ç…§ç»™çš„ç¤ºä¾‹æ¨¡ä»¿å°±ok<br>ä¸è¿‡ç¼ºç‚¹å°±æ˜¯æ…¢ï¼Œå¤§æ¦‚åœ¨æ•°æ®é‡åœ¨å‡ ä¸‡ä»¥ä¸Šæ—¶ä¼šçœ‹å‡ºåŒºåˆ«ã€‚</p><p>ä¸»è¦æ˜¯å› ä¸ºæ¶‰åŠåˆ°å†…å­˜åˆ†é…ä»¥åŠåç»­çš„<code>GC</code>ä»¥åŠ<code>reflect</code>å®ç°é‡Œé¢æœ‰å¤§é‡çš„æšä¸¾ï¼Œä¹Ÿå°±æ˜¯forå¾ªç¯ï¼Œæ¯”å¦‚ç±»å‹ä¹‹ç±»çš„ã€‚</p><p><a href="https://github.com/patrickmn/sortutil">patrickmn/sortutil</a></p><p><a href="https://groups.google.com/g/golang-nuts/c/EZ9yGIw0IeI">How to sort an array of struct by field?</a></p><hr><p>æ‹¿<code>2.1</code>é‚£ä¸ªä»£ç æ¥è®²</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sortutil.DescByField(userSlice, <span class="string">&quot;Age&quot;</span>)</span><br></pre></td></tr></table></figure><p>è¯¥æ–¹æ³•ä¸»è¦æ˜¯é€šè¿‡åå°„æŒ‰ç…§ç»™å®šçš„å­—æ®µåä»ç»™å®šçš„åˆ‡ç‰‡ä¸­æ‹¿åˆ°å…³äºè¯¥å­—æ®µçš„åˆ—è¡¨</p><p><img src="/2020/10/19/Golang%E5%8F%8D%E5%B0%84%E5%BA%94%E7%94%A8-%E6%8E%92%E5%BA%8F/Untitled.png" alt></p><p>ç„¶ååˆ¤æ–­ç±»å‹</p><p><img src="/2020/10/19/Golang%E5%8F%8D%E5%B0%84%E5%BA%94%E7%94%A8-%E6%8E%92%E5%BA%8F/Untitled%201.png" alt></p><p><code>stringDescending</code> æ˜¯ä¸ºäº†å®ç°è‡ªå®šä¹‰çš„å¤§äºæ¯”è¾ƒè§„åˆ™ã€‚ä¸æ¯”å·²çŸ¥çš„<code>int</code>ï¼Œ<code>string</code>ç­‰ç±»å‹ï¼Œå¯¹äºæœªçŸ¥ç±»å‹Golangä¹Ÿä¸çŸ¥é“å¦‚ä½•æ¯”è¾ƒå¤§å°</p><p><img src="/2020/10/19/Golang%E5%8F%8D%E5%B0%84%E5%BA%94%E7%94%A8-%E6%8E%92%E5%BA%8F/Untitled%202.png" alt></p><p>ç„¶åå¯¹æ‰€å¾—åˆ°çš„åå°„åˆ—è¡¨æ’åº</p><p><img src="/2020/10/19/Golang%E5%8F%8D%E5%B0%84%E5%BA%94%E7%94%A8-%E6%8E%92%E5%BA%8F/Untitled%203.png" alt></p><p>è¿™é‡Œä¼šæ ¹æ®æ•°ç»„çš„ç‰¹ç‚¹é€‰æ‹©æ˜¯å¿«æ’è¿˜æ˜¯å †æ’</p><p><img src="/2020/10/19/Golang%E5%8F%8D%E5%B0%84%E5%BA%94%E7%94%A8-%E6%8E%92%E5%BA%8F/Untitled%204.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Golang </tag>
            
            <tag> åå°„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Arché…ç½®i3wm</title>
      <link href="/2020/10/18/Arch%E9%85%8D%E7%BD%AEi3wm/"/>
      <url>/2020/10/18/Arch%E9%85%8D%E7%BD%AEi3wm/</url>
      
        <content type="html"><![CDATA[<p>ä¸‹é¢çš„æŸäº›è½¯ä»¶å¯èƒ½åœ¨<code>archlinuxcn</code>æºï¼Œæ³¨æ„å…ˆé…ç½®</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><h2 id="Arch"><a href="#Arch" class="headerlink" title="Arch"></a>Arch</h2><p><a href="https://greenhathg.github.io/2019/02/15/Arch%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E7%AC%94%E8%AE%B0/">Archå®‰è£…é…ç½®ç¬”è®°</a></p><h2 id="i3"><a href="#i3" class="headerlink" title="i3"></a>i3</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S i3</span><br></pre></td></tr></table></figure><p>æ³¨æ„<code>i3-gaps</code>ä¼šå’Œ<code>i3-wm</code>å†²çªï¼Œé»˜è®¤é€‰æ‹©å‰è€…</p><p>é…ç½®æ–‡ä»¶ä½ç½®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/.config/i3/config</span><br></pre></td></tr></table></figure><h2 id="Display-manager"><a href="#Display-manager" class="headerlink" title="Display manager"></a>Display manager</h2><p>ä¸ºäº†æ–¹ä¾¿ç®¡ç†i3çš„å¯åŠ¨ï¼Œè¿™é‡Œé€‰æ‹©ä½¿ç”¨<code>lightdm</code> ä½œä¸ºå¯åŠ¨ç®¡ç†å™¨ï¼Œå®‰è£…å®Œåé‡å¯å³å¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S lightdm lightdm-gtk-greeter</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸éœ€è¦çš„è¯ä¹Ÿå¯ä»¥åœ¨<code>tty</code>è¾“å…¥<code>startx</code>å¯åŠ¨</p><h1 id="å¸¸ç”¨é”®ä½"><a href="#å¸¸ç”¨é”®ä½" class="headerlink" title="å¸¸ç”¨é”®ä½"></a>å¸¸ç”¨é”®ä½</h1><p><code>mod</code>ä¸º<code>win</code>é”®æˆ–è€…<code>alt</code>é”®ï¼Œåœ¨ç¬¬ä¸€æ¬¡è¿›å…¥æ¡Œé¢æ—¶ä¼šé€‰æ‹©</p><ol><li>æ‰“å¼€ç»ˆç«¯ï¼šmod+enter</li><li>å¯åŠ¨è½¯ä»¶ï¼šmod+d</li><li>æ¨ªå‘æ’åˆ—çª—å£ï¼šmod+h</li><li>çºµå‘æ’åˆ—çª—å£ï¼šmod+v</li><li>å°†æŸä¸ªçª—å£å…¨å±ï¼šmod+f</li><li>é€€å‡ºçª—å£ï¼šmod+shift+q</li><li>é‡å¯i3ï¼šmod+shift+r</li><li>æ‰“å¼€å·¥ä½œåŒºï¼šmod+num</li><li>å°†å½“å‰çª—å£ç§»åŠ¨åˆ°æŸå·¥ä½œåŒºï¼šmod+shift+num</li></ol><h1 id="ç¾åŒ–"><a href="#ç¾åŒ–" class="headerlink" title="ç¾åŒ–"></a>ç¾åŒ–</h1><h2 id="çª—å£"><a href="#çª—å£" class="headerlink" title="çª—å£"></a>çª—å£</h2><p>é…ç½®æ–‡ä»¶æœ«å°¾åŠ å…¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">new_window pixel 0</span><br><span class="line">gaps inner 7</span><br></pre></td></tr></table></figure><h2 id="å…³é—­picom-popup-menué€æ˜åŒ–"><a href="#å…³é—­picom-popup-menué€æ˜åŒ–" class="headerlink" title="å…³é—­picom popup_menué€æ˜åŒ–"></a>å…³é—­picom popup_menué€æ˜åŒ–</h2><p>å¤åˆ¶ä¸€ä»½é…ç½®æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /etc/xdg/picom.conf.example ~/.config/picom.conf</span><br></pre></td></tr></table></figure><p>é…ç½®ä¸­ä¿®æ”¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">popup_menu = &#123; fade = <span class="literal">true</span>; shadow = <span class="literal">false</span>; opacity = 1; focus = <span class="literal">false</span>; &#125;</span><br></pre></td></tr></table></figure><h1 id="è½¯ä»¶"><a href="#è½¯ä»¶" class="headerlink" title="è½¯ä»¶"></a>è½¯ä»¶</h1><h2 id="ç»ˆç«¯"><a href="#ç»ˆç«¯" class="headerlink" title="ç»ˆç«¯"></a>ç»ˆç«¯</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S alacrootty</span><br></pre></td></tr></table></figure><p>æ‹‰å–é»˜è®¤é…ç½®æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p ~/.config/alacritty</span><br><span class="line">wget https://raw.githubusercontent.com/alacritty/alacritty/master/alacritty.yml ~/.config/alacritty</span><br></pre></td></tr></table></figure><p>é…ç½®æ–‡ä»¶å†™å…¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> <span class="variable">$terminal</span> alacritty</span><br><span class="line">bindsym <span class="variable">$mod</span>+Return <span class="built_in">exec</span> <span class="variable">$terminal</span></span><br></pre></td></tr></table></figure><ul><li><p>ä¿®æ”¹å­—ä½“</p><p>  <img src="/2020/10/18/Arch%E9%85%8D%E7%BD%AEi3wm/Untitled.png" alt></p></li><li><p>è®¾ç½®é€æ˜åº¦</p><p>  <img src="/2020/10/18/Arch%E9%85%8D%E7%BD%AEi3wm/Untitled%201.png" alt></p></li></ul><h2 id="å£çº¸"><a href="#å£çº¸" class="headerlink" title="å£çº¸"></a>å£çº¸</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S variety feh picom</span><br></pre></td></tr></table></figure><p>å¼€æœºè‡ªå¯ï¼Œé…ç½®æ–‡ä»¶å†™å…¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">exec_always --no-startup-id variety</span><br><span class="line">exec_always --no-startup-id picom</span><br></pre></td></tr></table></figure><h2 id="å¿«æ·å¯åŠ¨"><a href="#å¿«æ·å¯åŠ¨" class="headerlink" title="å¿«æ·å¯åŠ¨"></a>å¿«æ·å¯åŠ¨</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S rofi</span><br></pre></td></tr></table></figure><h2 id="å‘½ä»¤è¡Œæ–‡ä»¶ç®¡ç†å™¨"><a href="#å‘½ä»¤è¡Œæ–‡ä»¶ç®¡ç†å™¨" class="headerlink" title="å‘½ä»¤è¡Œæ–‡ä»¶ç®¡ç†å™¨"></a>å‘½ä»¤è¡Œæ–‡ä»¶ç®¡ç†å™¨</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S ranger</span><br></pre></td></tr></table></figure><p>é…ç½®æ–‡ä»¶å†™å…¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bindsym ctrl+<span class="variable">$mod</span>+f <span class="built_in">exec</span> --no-startup-id <span class="variable">$terminal</span> -e ranger</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ³¨æ„å…ˆèµ°å®‰è£…<code>alacritty</code>è¿™ä¸€æ­¥</p><h1 id="polybar"><a href="#polybar" class="headerlink" title="polybar"></a>polybar</h1><h2 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S polybar</span><br></pre></td></tr></table></figure><h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><p>è¿™é‡Œæ¨èä½¿ç”¨å¤§ä½¬çš„é…ç½®</p><p><a href="https://github.com/jessun2017/dotfiles">jessun2017/dotfiles</a></p><ul><li><p>æµ‹è¯•</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">polybar -c <span class="variable">$HOME</span>/.config/polybar/config.ini example</span><br></pre></td></tr></table></figure></li><li><p>å¼€æœºè‡ªå¯</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exec_always ~/.config/polybar/launch.sh</span><br></pre></td></tr></table></figure></li></ul><h2 id="é…ç½®æ¸©åº¦"><a href="#é…ç½®æ¸©åº¦" class="headerlink" title="é…ç½®æ¸©åº¦"></a>é…ç½®æ¸©åº¦</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> /sys/class/hwmon/hwmon*/temp*_input; <span class="keyword">do</span> <span class="built_in">echo</span> <span class="string">&quot;<span class="subst">$(&lt;$(dirname $i)</span>/name): <span class="subst">$(cat $&#123;i%_*&#125;_label 2&gt;/dev/null || echo $(basename $&#123;i%_*&#125;)</span>) <span class="subst">$(readlink -f $i)</span>&quot;</span>; <span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>ä¸€èˆ¬é€‰æ‹©<code>Tdie</code>é‚£æ¡ç»“æœï¼Œå†™å…¥åˆ°é…ç½®æ–‡ä»¶<code>config.ini</code></p><p><img src="/2020/10/18/Arch%E9%85%8D%E7%BD%AEi3wm/Untitled%202.png" alt></p><h2 id="å®‰è£…å­—ä½“"><a href="#å®‰è£…å­—ä½“" class="headerlink" title="å®‰è£…å­—ä½“"></a>å®‰è£…å­—ä½“</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S ttf-font-awesome ttf-liberation adobe-source-han-sans-cn-fonts ttf-material-design-icons</span><br></pre></td></tr></table></figure><p>å¦‚æœæœ‰æŠ¥é”™<code>Dropping unmatched character</code> ï¼Œå¯ä»¥å°è¯•å®‰è£…ä»¥ä¸‹å­—ä½“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S siji-git ttf-unifont</span><br></pre></td></tr></table></figure><h2 id="ç½‘é€Ÿæ˜¾ç¤º"><a href="#ç½‘é€Ÿæ˜¾ç¤º" class="headerlink" title="ç½‘é€Ÿæ˜¾ç¤º"></a>ç½‘é€Ÿæ˜¾ç¤º</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S bc</span><br></pre></td></tr></table></figure><p>ç¼–è¾‘æ–‡ä»¶<code>~/.config/polybar/polybar-scripts/polybar-scripts/network-traffic/[network-traffic.sh](http://network-traffic.sh/)</code> ä¿®æ”¹ç½‘å¡åç§°</p><p><img src="/2020/10/18/Arch%E9%85%8D%E7%BD%AEi3wm/Untitled%203.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Arch </tag>
            
            <tag> i3wm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Golang-rangeä¸­çš„å‘</title>
      <link href="/2020/09/30/Golang-range%E4%B8%AD%E7%9A%84%E5%9D%91/"/>
      <url>/2020/09/30/Golang-range%E4%B8%AD%E7%9A%84%E5%9D%91/</url>
      
        <content type="html"><![CDATA[<p>rangeéå†æŒ‡é’ˆç±»å‹æ—¶æ³¨æ„äº‹é¡¹</p><span id="more"></span><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>  &#123;</span><br><span class="line">arr := []<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>&#125;</span><br><span class="line">odd := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">0</span>, <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _, v := <span class="keyword">range</span> arr&#123;</span><br><span class="line"><span class="keyword">if</span> v % <span class="number">2</span> == <span class="number">1</span>&#123;</span><br><span class="line">odd = <span class="built_in">append</span>(odd, v)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _, v := <span class="keyword">range</span> odd&#123;</span><br><span class="line">fmt.Println(v)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">output:</span></span><br><span class="line"><span class="comment">1</span></span><br><span class="line"><span class="comment">3</span></span><br><span class="line"><span class="comment">5</span></span><br><span class="line"><span class="comment">7</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>  &#123;</span><br><span class="line">arr := []<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>&#125;</span><br><span class="line">**odd := <span class="built_in">make</span>([]*<span class="keyword">int</span>, <span class="number">0</span>, <span class="number">5</span>)**</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _, v := <span class="keyword">range</span> arr&#123;</span><br><span class="line"><span class="keyword">if</span> v % <span class="number">2</span> == <span class="number">1</span>&#123;</span><br><span class="line">**odd = <span class="built_in">append</span>(odd, &amp;v)**</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _, v := <span class="keyword">range</span> odd&#123;</span><br><span class="line">**fmt.Println(*v)**</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">output:</span></span><br><span class="line"><span class="comment">8</span></span><br><span class="line"><span class="comment">8</span></span><br><span class="line"><span class="comment">8</span></span><br><span class="line"><span class="comment">8</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„åŒºåˆ«ä¸»è¦æ˜¯sliceé‡Œé¢è£…çš„æ˜¯æ ‡å‡†ç±»å‹è¿˜æ˜¯æŒ‡é’ˆç±»å‹ï¼Œæ ‡å‡†ç±»å‹å¯ä»¥å¾—åˆ°æ­£å¸¸ç»“æœï¼Œè€ŒæŒ‡é’ˆç±»å‹åˆ™å¾—åˆ°é‡å¤çš„ç»“æœ</p><hr><p><a href="https://golang.org/ref/spec#RangeClause">The Go Programming Language Specification</a></p><p>æ ¹æ®Go rangeçš„æ–‡æ¡£ä¸­å¾—åˆ°</p><blockquote><p>The iteration variables may be declared by the â€œrangeâ€ clause using a form of short variable declaration (:=). In this case their types are set to the types of the respective iteration values and their scope is the block of the â€œforâ€ statement; they are re-used in each iteration. If the iteration variables are declared outside the â€œforâ€ statement, after execution their values will be those of the last iteration.</p></blockquote><p><strong>å˜é‡åœ¨è¿­ä»£ä¸­ä¼šé‡å¤ä½¿ç”¨</strong>ï¼Œå¦‚æœå˜é‡å£°æ˜åœ¨forå¤–ï¼Œé‚£ä¹ˆè¿­ä»£ç»“æŸåå˜é‡å€¼ä¸ºæœ€åä¸€æ¬¡èµ‹å€¼ã€‚</p><p>å› ä¸ºå˜é‡vè¢«é‡å¤ä½¿ç”¨ï¼Œè€Œå®ƒçš„åœ°å€ä¸ä¼šå˜æ›´ã€‚</p><p>é‚£ä¹ˆä¸Šé¢æŒ‡é’ˆç±»å‹çš„å¾—åˆ°é”™è¯¯çš„ç»“æœåŸå› ä¹Ÿæ˜¯è¿™ä¸ª</p><hr><p><strong>è§£å†³æ–¹æ³•ä¸»è¦æœ‰ä¸¤ä¸ªï¼š</strong></p><ol><li><p>ä½¿ç”¨ä¸‹æ ‡</p> <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i, _ := <span class="keyword">range</span> arr&#123;</span><br><span class="line"><span class="keyword">if</span> arr[i] % <span class="number">2</span> == <span class="number">1</span>&#123;</span><br><span class="line">odd = <span class="built_in">append</span>(odd, &amp;arr[i])</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨ä¸´æ—¶å˜é‡</p> <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> _, v := <span class="keyword">range</span> arr&#123;</span><br><span class="line"><span class="keyword">if</span> v % <span class="number">2</span> == <span class="number">1</span>&#123;</span><br><span class="line">tmp := v</span><br><span class="line">odd = <span class="built_in">append</span>(odd, &amp;tmp)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> golang </tag>
            
            <tag> range </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Golangç”Ÿæˆåäº¿æ‰‹æœºå·ç çš„æ¢ç©¶</title>
      <link href="/2020/09/14/Golang%E7%94%9F%E6%88%90%E5%8D%81%E4%BA%BF%E6%89%8B%E6%9C%BA%E5%8F%B7%E7%A0%81%E7%9A%84%E6%8E%A2%E7%A9%B6/"/>
      <url>/2020/09/14/Golang%E7%94%9F%E6%88%90%E5%8D%81%E4%BA%BF%E6%89%8B%E6%9C%BA%E5%8F%B7%E7%A0%81%E7%9A%84%E6%8E%A2%E7%A9%B6/</url>
      
        <content type="html"><![CDATA[<p>ä¼˜åŒ–å¤§é‡ç”Ÿæˆæ‰‹æœºå·ç æ‰€ä½¿ç”¨çš„æ—¶é—´ï¼Œå–å¾—è¾ƒå¥½çš„æˆæœ</p><span id="more"></span><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><p>æ—¢ç„¶æ˜¯è®¡ç®—æ—¶é—´ï¼Œé‚£ä¹ˆè‚¯å®šå—ç”µè„‘é…ç½®å½±å“ï¼Œè¿™é‡Œè´´ä¸‹é…ç½®</p><p>win10</p><p><img src="/2020/09/14/Golang%E7%94%9F%E6%88%90%E5%8D%81%E4%BA%BF%E6%89%8B%E6%9C%BA%E5%8F%B7%E7%A0%81%E7%9A%84%E6%8E%A2%E7%A9%B6/4.png" alt></p><h1 id="éšæœºå­—ç¬¦ä¸²ç”Ÿæˆå‰æ™¯"><a href="#éšæœºå­—ç¬¦ä¸²ç”Ÿæˆå‰æ™¯" class="headerlink" title="éšæœºå­—ç¬¦ä¸²ç”Ÿæˆå‰æ™¯"></a>éšæœºå­—ç¬¦ä¸²ç”Ÿæˆå‰æ™¯</h1><p>ä»¥ä¸‹çœç•¥è®¡ç®—æ—¶é—´çš„ä»£ç </p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>  &#123;</span><br><span class="line">before := time.Now()</span><br><span class="line">fmt.Println(before.Format(<span class="string">&quot;2006-01-02 15:04:05&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line">after := time.Now()</span><br><span class="line">fmt.Println(after.Format(<span class="string">&quot;2006-01-02 15:04:05&quot;</span>))</span><br><span class="line">fmt.Println(after.Sub(before))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å•çº¯è·‘åäº¿æ¬¡å¾ªç¯"><a href="#å•çº¯è·‘åäº¿æ¬¡å¾ªç¯" class="headerlink" title="å•çº¯è·‘åäº¿æ¬¡å¾ªç¯"></a>å•çº¯è·‘åäº¿æ¬¡å¾ªç¯</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">idx := <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">1000000000</span>; i++&#123;</span><br><span class="line">    idx++</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2020-09-14 15:01:22</span></span><br><span class="line"><span class="comment">//2020-09-14 15:01:22</span></span><br><span class="line"><span class="comment">//232.3817ms</span></span><br></pre></td></tr></table></figure><h2 id="åäº¿æ¬¡éšæœºè·å–æ‰‹æœºå·ç "><a href="#åäº¿æ¬¡éšæœºè·å–æ‰‹æœºå·ç " class="headerlink" title="åäº¿æ¬¡éšæœºè·å–æ‰‹æœºå·ç "></a>åäº¿æ¬¡éšæœºè·å–æ‰‹æœºå·ç </h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> headerNums = [...]<span class="keyword">string</span>&#123;<span class="string">&quot;139&quot;</span>, <span class="string">&quot;138&quot;</span>, <span class="string">&quot;137&quot;</span>, <span class="string">&quot;136&quot;</span>, <span class="string">&quot;135&quot;</span>, <span class="string">&quot;134&quot;</span>, <span class="string">&quot;159&quot;</span>, <span class="string">&quot;158&quot;</span>, <span class="string">&quot;157&quot;</span>, <span class="string">&quot;150&quot;</span>, <span class="string">&quot;151&quot;</span>, <span class="string">&quot;152&quot;</span>, <span class="string">&quot;188&quot;</span>, <span class="string">&quot;187&quot;</span>, <span class="string">&quot;182&quot;</span>, <span class="string">&quot;183&quot;</span>, <span class="string">&quot;184&quot;</span>, <span class="string">&quot;178&quot;</span>, <span class="string">&quot;130&quot;</span>, <span class="string">&quot;131&quot;</span>, <span class="string">&quot;132&quot;</span>, <span class="string">&quot;156&quot;</span>, <span class="string">&quot;155&quot;</span>, <span class="string">&quot;186&quot;</span>, <span class="string">&quot;185&quot;</span>, <span class="string">&quot;176&quot;</span>, <span class="string">&quot;133&quot;</span>, <span class="string">&quot;153&quot;</span>, <span class="string">&quot;189&quot;</span>, <span class="string">&quot;180&quot;</span>, <span class="string">&quot;181&quot;</span>, <span class="string">&quot;177&quot;</span>&#125;</span><br><span class="line"><span class="keyword">var</span> headerNumsLen = <span class="built_in">len</span>(headerNums)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">randomPhone</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">header := headerNums[rand.Intn(headerNumsLen)]</span><br><span class="line">body := fmt.Sprintf(<span class="string">&quot;%08d&quot;</span>, rand.Intn(<span class="number">99999999</span>))</span><br><span class="line">phone := header + body</span><br><span class="line"><span class="keyword">return</span> phone</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    rand.Seed(time.Now().UTC().UnixNano())</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">1000000000</span>; i++&#123;</span><br><span class="line">randomPhone()</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2020-09-14 15:08:08</span></span><br><span class="line"><span class="comment">//2020-09-14 15:11:05</span></span><br><span class="line"><span class="comment">//2m56.9453851s</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æ—¶é—´å·®ä¸å¤šèŠ±åœ¨äº†ç”Ÿæˆéšæœºæ•°é‚£é‡Œ</p><h2 id="åç¨‹"><a href="#åç¨‹" class="headerlink" title="åç¨‹"></a>åç¨‹</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++&#123;</span><br><span class="line">    wg.Add(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">100000000</span>; i++&#123;</span><br><span class="line">            randomPhone()</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">defer</span> wg.Done()</span><br><span class="line">    &#125;()</span><br><span class="line">&#125;</span><br><span class="line">wg.Wait()</span><br><span class="line"></span><br><span class="line"><span class="comment">//2020-09-14 17:21:15</span></span><br><span class="line"><span class="comment">//2020-09-14 17:25:40</span></span><br><span class="line"><span class="comment">//4m25.289406s</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥æ˜æ˜¾çœ‹åˆ°æ—¶é—´èŠ±é•¿äº†ï¼Œè¿™ä¸€éƒ¨åˆ†åº”è¯¥æ˜¯<code>rand</code>å†…éƒ¨æœ‰äº’æ–¥é”çš„åŸå› ï¼Œå¹¶å‘æƒ…å†µä¸‹ç«äº‰é”</p><p><img src="/2020/09/14/Golang%E7%94%9F%E6%88%90%E5%8D%81%E4%BA%BF%E6%89%8B%E6%9C%BA%E5%8F%B7%E7%A0%81%E7%9A%84%E6%8E%A2%E7%A9%B6/1.jpg" alt></p><p><code>sync.mutex</code>é”çš„è¿‡ç¨‹å¤§æ¦‚å¦‚ä¸‹ï¼š</p><p><img src="/2020/09/14/Golang%E7%94%9F%E6%88%90%E5%8D%81%E4%BA%BF%E6%89%8B%E6%9C%BA%E5%8F%B7%E7%A0%81%E7%9A%84%E6%8E%A2%E7%A9%B6/2.jpg" alt></p><p>æœ‰ä¸¤ç§çŠ¶æ€ï¼š</p><ul><li>æ­£å¸¸çŠ¶æ€ï¼šç­‰å¾…é”çš„goroutineæŒ‰ç…§FIFOçš„é¡ºåºè·å¾—é”ï¼Œå¦‚æœ‰æ–°è¯·æ±‚çš„é”ï¼Œåˆ™ä¸è¢«å”¤é†’çš„ç«äº‰é”ï¼Œå¤±è´¥åˆ™åŠ å…¥é˜Ÿé¦–ï¼Œå¦‚æœä¸€ä¸ªç­‰å¾…çš„goroutineè¶…è¿‡1msæ²¡æœ‰è·å–é”ï¼Œé‚£ä¹ˆå®ƒå°†ä¼šæŠŠé”è½¬å˜ä¸ºé¥¥é¥¿æ¨¡å¼ã€‚</li><li>é¥¥é¥¿çŠ¶æ€ï¼šæŠŠé”äº¤ç»™ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªï¼ˆå·²ç»unlockçŠ¶æ€ï¼‰ï¼Œæ–°æ¥çš„goroutineå°†ä¸ä¼šå°è¯•å»è·å¾—é”ï¼Œå³ä½¿é”çœ‹èµ·æ¥æ˜¯unlockçŠ¶æ€, ä¹Ÿä¸ä¼šå»å°è¯•è‡ªæ—‹æ“ä½œï¼Œè€Œæ˜¯æ”¾åœ¨ç­‰å¾…é˜Ÿåˆ—çš„å°¾éƒ¨ã€‚</li></ul><h2 id="åç¨‹æ”¹è¿›"><a href="#åç¨‹æ”¹è¿›" class="headerlink" title="åç¨‹æ”¹è¿›"></a>åç¨‹æ”¹è¿›</h2><p>æ—¢ç„¶é‚£ä¹ˆå¤šä¸ªgoroutineä¼šç«äº‰é”ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç»™æ¯ä¸ªgoroutineå¼€ä¸€æŠŠé”ï¼Œä¹Ÿå°±æ˜¯å¤šä¸ªrandå®ä¾‹ï¼Œé‚£ä¹ˆå°±ä¸ç”¨ç«äº‰é”äº†</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;math/rand&quot;</span></span><br><span class="line"><span class="string">&quot;runtime&quot;</span></span><br><span class="line"><span class="string">&quot;sync&quot;</span></span><br><span class="line"><span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">var</span> headerNums = [...]<span class="keyword">string</span>&#123;<span class="string">&quot;139&quot;</span>, <span class="string">&quot;138&quot;</span>, <span class="string">&quot;137&quot;</span>, <span class="string">&quot;136&quot;</span>, <span class="string">&quot;135&quot;</span>, <span class="string">&quot;134&quot;</span>, <span class="string">&quot;159&quot;</span>, <span class="string">&quot;158&quot;</span>, <span class="string">&quot;157&quot;</span>, <span class="string">&quot;150&quot;</span>, <span class="string">&quot;151&quot;</span>, <span class="string">&quot;152&quot;</span>, <span class="string">&quot;188&quot;</span>, <span class="string">&quot;187&quot;</span>, <span class="string">&quot;182&quot;</span>, <span class="string">&quot;183&quot;</span>, <span class="string">&quot;184&quot;</span>, <span class="string">&quot;178&quot;</span>, <span class="string">&quot;130&quot;</span>, <span class="string">&quot;131&quot;</span>, <span class="string">&quot;132&quot;</span>, <span class="string">&quot;156&quot;</span>, <span class="string">&quot;155&quot;</span>, <span class="string">&quot;186&quot;</span>, <span class="string">&quot;185&quot;</span>, <span class="string">&quot;176&quot;</span>, <span class="string">&quot;133&quot;</span>, <span class="string">&quot;153&quot;</span>, <span class="string">&quot;189&quot;</span>, <span class="string">&quot;180&quot;</span>, <span class="string">&quot;181&quot;</span>, <span class="string">&quot;177&quot;</span>&#125;</span><br><span class="line"><span class="keyword">var</span> headerNumsLen = <span class="built_in">len</span>(headerNums)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">randomPhone</span><span class="params">(generator *rand.Rand)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">header := headerNums[generator.Intn(headerNumsLen)]</span><br><span class="line">body := fmt.Sprintf(<span class="string">&quot;%08d&quot;</span>, generator.Intn(<span class="number">99999999</span>))</span><br><span class="line">phone := header + body</span><br><span class="line"><span class="keyword">return</span> phone</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>  &#123;</span><br><span class="line">before := time.Now()</span><br><span class="line">fmt.Println(before.Format(<span class="string">&quot;2006-01-02 15:04:05&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line">nCPU := runtime.NumCPU()</span><br><span class="line">runtime.GOMAXPROCS(nCPU)</span><br><span class="line"></span><br><span class="line">loop := <span class="number">1000000000</span> / nCPU</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; nCPU; i++&#123;</span><br><span class="line">        <span class="comment">//é¿å…ç§å­ä¸€æ ·ï¼Œç”Ÿæˆçš„éšæœºæ•°ä¹Ÿä¸€æ ·</span></span><br><span class="line">generator := rand.New(rand.NewSource(time.Now().UnixNano() + <span class="keyword">int64</span>(i*<span class="number">1000</span>)))</span><br><span class="line">wg.Add(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(generator *rand.Rand)</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> j := <span class="number">0</span>; j &lt; loop; j++&#123;</span><br><span class="line">randomPhone(generator)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> wg.Done()</span><br><span class="line">&#125;(generator)</span><br><span class="line">&#125;</span><br><span class="line">wg.Wait()</span><br><span class="line"></span><br><span class="line">after := time.Now()</span><br><span class="line">fmt.Println(after.Format(<span class="string">&quot;2006-01-02 15:04:05&quot;</span>))</span><br><span class="line">fmt.Println(after.Sub(before))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2020-09-15 22:23:09</span></span><br><span class="line"><span class="comment">//2020-09-15 22:23:38</span></span><br><span class="line"><span class="comment">//28.8154403s</span></span><br></pre></td></tr></table></figure><h1 id="æ”¹å–„å­—ç¬¦ä¸²ç”Ÿæˆçš„æ–¹æ³•"><a href="#æ”¹å–„å­—ç¬¦ä¸²ç”Ÿæˆçš„æ–¹æ³•" class="headerlink" title="æ”¹å–„å­—ç¬¦ä¸²ç”Ÿæˆçš„æ–¹æ³•"></a>æ”¹å–„å­—ç¬¦ä¸²ç”Ÿæˆçš„æ–¹æ³•</h1><h2 id="rand-Intn"><a href="#rand-Intn" class="headerlink" title="rand.Intn"></a>rand.Intn</h2><p><img src="/2020/09/14/Golang%E7%94%9F%E6%88%90%E5%8D%81%E4%BA%BF%E6%89%8B%E6%9C%BA%E5%8F%B7%E7%A0%81%E7%9A%84%E6%8E%A2%E7%A9%B6/3.jpg" alt></p><p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>rand.Intn</code>å‡½æ•°æœ€ç»ˆä¼šè°ƒç”¨<code>Rand.Int63</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨è¯¥å‡½æ•°å³å¯</p><h2 id="åˆ©ç”¨æ©ç æé«˜æ•ˆç‡"><a href="#åˆ©ç”¨æ©ç æé«˜æ•ˆç‡" class="headerlink" title="åˆ©ç”¨æ©ç æé«˜æ•ˆç‡"></a>åˆ©ç”¨æ©ç æé«˜æ•ˆç‡</h2><p>æˆ‘ä»¬ç°åœ¨æœ‰10ä¸ªæ•°å­—ï¼Œ10ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºå°±æ˜¯<code>1010</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åªä½¿ç”¨<code>Rand.Int63()</code>è¿”å›æœ€ä½çš„4ä½æ•°å°±å¯ä»¥ã€‚ä¸ºäº†ä¿è¯å¹³å‡ï¼Œå¦‚æœè¿”å›çš„åªå¤§äº<code>len(letterBytes)-1</code>ï¼Œåˆ™èˆå¼ƒä¸ç”¨</p><p><code>Rand.Int63</code>å¯ä»¥ç”Ÿæˆ63ä¸ªéšæœºä½çš„æ•°ï¼Œæ‰€ä»¥å‰©ä¸‹çš„ä½æ•°æˆ‘ä»¬ä¾æ—§å¯ä»¥ä½¿ç”¨</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> letterBytes = <span class="string">&quot;0123456789&quot;</span></span><br><span class="line"><span class="keyword">var</span> src = rand.NewSource(time.Now().UnixNano())</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> headerNums = [...]<span class="keyword">string</span>&#123;<span class="string">&quot;139&quot;</span>, <span class="string">&quot;138&quot;</span>, <span class="string">&quot;137&quot;</span>, <span class="string">&quot;136&quot;</span>, <span class="string">&quot;135&quot;</span>, <span class="string">&quot;134&quot;</span>, <span class="string">&quot;159&quot;</span>, <span class="string">&quot;158&quot;</span>, <span class="string">&quot;157&quot;</span>, <span class="string">&quot;150&quot;</span>, <span class="string">&quot;151&quot;</span>, <span class="string">&quot;152&quot;</span>, <span class="string">&quot;188&quot;</span>, <span class="string">&quot;187&quot;</span>, <span class="string">&quot;182&quot;</span>, <span class="string">&quot;183&quot;</span>, <span class="string">&quot;184&quot;</span>, <span class="string">&quot;178&quot;</span>, <span class="string">&quot;130&quot;</span>, <span class="string">&quot;131&quot;</span>, <span class="string">&quot;132&quot;</span>, <span class="string">&quot;156&quot;</span>, <span class="string">&quot;155&quot;</span>, <span class="string">&quot;186&quot;</span>, <span class="string">&quot;185&quot;</span>, <span class="string">&quot;176&quot;</span>, <span class="string">&quot;133&quot;</span>, <span class="string">&quot;153&quot;</span>, <span class="string">&quot;189&quot;</span>, <span class="string">&quot;180&quot;</span>, <span class="string">&quot;181&quot;</span>, <span class="string">&quot;177&quot;</span>&#125;</span><br><span class="line"><span class="keyword">var</span> headerNumsLen = <span class="built_in">len</span>(headerNums)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    <span class="comment">//ä½¿ç”¨å››ä½äºŒè¿›åˆ¶å³å¯éšæœºé€‰æ‹©letterBytesé‡Œé¢çš„ä¸€ä½</span></span><br><span class="line">letterIdxBits = <span class="number">4</span></span><br><span class="line">    <span class="comment">//æ©ç ï¼Œå³4ä¸ª1</span></span><br><span class="line">letterIdxMask = <span class="number">1</span>&lt;&lt;letterIdxBits - <span class="number">1</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    <span class="comment">//ä½¿ç”¨å…­ä½äºŒè¿›åˆ¶å³å¯éšæœºé€‰æ‹©headerNumsé‡Œé¢çš„ä¸€ä½</span></span><br><span class="line">headerIdxBits = <span class="number">6</span></span><br><span class="line">headerIdxMask = <span class="number">1</span>&lt;&lt;headerIdxBits - <span class="number">1</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getHeaderIdx</span><span class="params">(cache <span class="keyword">int64</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> cache &gt; <span class="number">0</span>&#123;</span><br><span class="line">        <span class="comment">//å¾—åˆ°æ©ç å¯¹åº”çš„ä½æ•°ï¼Œæ¯”å¦‚1010110101 &amp; 111111 = 0000110101</span></span><br><span class="line">        <span class="comment">//è¿™æ ·å°±å¯ä»¥å–å‡ºäºŒè¿›åˆ¶å»éšæœºé€‰æ‹©æ•°å­—äº†</span></span><br><span class="line">idx := <span class="keyword">int</span>(cache &amp; headerIdxMask)</span><br><span class="line"><span class="keyword">if</span> idx &lt; headerNumsLen&#123;</span><br><span class="line"><span class="keyword">return</span> idx</span><br><span class="line">&#125;</span><br><span class="line">        <span class="comment">//å–åˆ°çš„æ•°å­—è¶…è¿‡headerNumsçš„é•¿åº¦ï¼Œé™¤å»å6ä½ï¼Œé‡æ–°é€‰æ‹©æ•°å­—</span></span><br><span class="line">cache &gt;&gt;= headerIdxBits</span><br><span class="line">&#125;</span><br><span class="line">    <span class="comment">//å¦åˆ™ä½¿ç”¨åº“å‡½æ•°ç”Ÿæˆ</span></span><br><span class="line"><span class="keyword">return</span> rand.Intn(headerNumsLen)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">randomPhone</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">    <span class="comment">//12ä½æ‰‹æœºå·ç </span></span><br><span class="line">b := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">12</span>)</span><br><span class="line">    <span class="comment">//è·å–ä¸€ä¸ª63ä½çš„éšæœºæ•°</span></span><br><span class="line">cache := src.Int63()</span><br><span class="line">    <span class="comment">//è·å–é€‰æ‹©æ‰‹æœºå·ç å‰3ä½çš„éšæœºæ•°</span></span><br><span class="line">headerIdx := getHeaderIdx(cache)</span><br><span class="line">    <span class="comment">//ä½¿ç”¨å¾—åˆ°çš„éšæœºæ•°å»è·å–æ‰‹æœºå·ç å‰3ä½</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">3</span>; i++&#123;</span><br><span class="line">b[i] = headerNums[headerIdx][i]</span><br><span class="line">&#125;</span><br><span class="line">    <span class="comment">//ç»§ç»­é€‰æ‹©å‰©ä¸‹çš„12ä½</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">3</span>; i &lt; <span class="number">12</span> ; &#123;</span><br><span class="line">        <span class="comment">//ç”Ÿæˆçš„éšæœºæ•°ç”¨å®Œäº†ï¼Œé‡æ–°ç”Ÿæˆ</span></span><br><span class="line"><span class="keyword">if</span> cache == <span class="number">0</span>&#123;</span><br><span class="line">cache = src.Int63()</span><br><span class="line">&#125;</span><br><span class="line">        <span class="comment">//å’ŒgetHeaderIdxä¸€æ ·</span></span><br><span class="line"><span class="keyword">if</span> idx := <span class="keyword">int</span>(cache &amp; letterIdxMask); idx &lt; <span class="built_in">len</span>(letterBytes) &#123;</span><br><span class="line">b[i] = letterBytes[idx]</span><br><span class="line">i++</span><br><span class="line">&#125;</span><br><span class="line">cache &gt;&gt;= letterIdxBits</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">string</span>(b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨strings-Builderæå‡å­—ç¬¦ä¸²æ‹¼æ¥é€Ÿåº¦ï¼ˆå¯é€‰ï¼‰"><a href="#ä½¿ç”¨strings-Builderæå‡å­—ç¬¦ä¸²æ‹¼æ¥é€Ÿåº¦ï¼ˆå¯é€‰ï¼‰" class="headerlink" title="ä½¿ç”¨strings.Builderæå‡å­—ç¬¦ä¸²æ‹¼æ¥é€Ÿåº¦ï¼ˆå¯é€‰ï¼‰"></a>ä½¿ç”¨strings.Builderæå‡å­—ç¬¦ä¸²æ‹¼æ¥é€Ÿåº¦ï¼ˆå¯é€‰ï¼‰</h2><p>è¿™ä¸ªæ˜¯G0 1.10 æ–°å¢çš„åŠŸèƒ½ï¼Œæå‡å­—ç¬¦ä¸²æ‹¼æ¥çš„æ•ˆç‡ï¼Œ<code>strings.Builder</code>çš„åŸç†å…¶å®å¾ˆç®€å•ï¼Œæ˜¯å†…ç½®äº†ä¸€ä¸ª<code>[]byte</code>å­˜å‚¨å­—ç¬¦ï¼Œæœ€ç»ˆè½¬æ¢ä¸º<code>string</code>çš„æ—¶å€™ä¸ºäº†é¿å…æ‹·è´ï¼Œä½¿ç”¨äº†<code>unsafe</code>åŒ…ï¼Œå¯ä»¥æŠŠ<code>string(b)</code>å˜ä¸º<code>*(*string)(unsafe.Pointer(&amp;b))</code></p><p>è¿™é‡Œå­—ç¬¦ä¸²é•¿åº¦æ¯”è¾ƒçŸ­ï¼Œæ‰€ä»¥å½±å“ä¸å¤§</p><h2 id="æœ€åçš„ä»£ç "><a href="#æœ€åçš„ä»£ç " class="headerlink" title="æœ€åçš„ä»£ç "></a>æœ€åçš„ä»£ç </h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;math/rand&quot;</span></span><br><span class="line"><span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> letterBytes = <span class="string">&quot;0123456789&quot;</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">letterIdxBits = <span class="number">4</span></span><br><span class="line">letterIdxMask = <span class="number">1</span>&lt;&lt;letterIdxBits - <span class="number">1</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">var</span> src = rand.NewSource(time.Now().UnixNano())</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> headerNums = [...]<span class="keyword">string</span>&#123;<span class="string">&quot;139&quot;</span>, <span class="string">&quot;138&quot;</span>, <span class="string">&quot;137&quot;</span>, <span class="string">&quot;136&quot;</span>, <span class="string">&quot;135&quot;</span>, <span class="string">&quot;134&quot;</span>, <span class="string">&quot;159&quot;</span>, <span class="string">&quot;158&quot;</span>, <span class="string">&quot;157&quot;</span>, <span class="string">&quot;150&quot;</span>, <span class="string">&quot;151&quot;</span>, <span class="string">&quot;152&quot;</span>, <span class="string">&quot;188&quot;</span>, <span class="string">&quot;187&quot;</span>, <span class="string">&quot;182&quot;</span>, <span class="string">&quot;183&quot;</span>, <span class="string">&quot;184&quot;</span>, <span class="string">&quot;178&quot;</span>, <span class="string">&quot;130&quot;</span>, <span class="string">&quot;131&quot;</span>, <span class="string">&quot;132&quot;</span>, <span class="string">&quot;156&quot;</span>, <span class="string">&quot;155&quot;</span>, <span class="string">&quot;186&quot;</span>, <span class="string">&quot;185&quot;</span>, <span class="string">&quot;176&quot;</span>, <span class="string">&quot;133&quot;</span>, <span class="string">&quot;153&quot;</span>, <span class="string">&quot;189&quot;</span>, <span class="string">&quot;180&quot;</span>, <span class="string">&quot;181&quot;</span>, <span class="string">&quot;177&quot;</span>&#125;</span><br><span class="line"><span class="keyword">var</span> headerNumsLen = <span class="built_in">len</span>(headerNums)</span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">headerIdxBits = <span class="number">6</span></span><br><span class="line">headerIdxMask = <span class="number">1</span>&lt;&lt;headerIdxBits - <span class="number">1</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getHeaderIdx</span><span class="params">(cache <span class="keyword">int64</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> cache &gt; <span class="number">0</span>&#123;</span><br><span class="line">idx := <span class="keyword">int</span>(cache &amp; headerIdxMask)</span><br><span class="line"><span class="keyword">if</span> idx &lt; headerNumsLen&#123;</span><br><span class="line"><span class="keyword">return</span> idx</span><br><span class="line">&#125;</span><br><span class="line">cache &gt;&gt;= headerIdxBits</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> rand.Intn(headerNumsLen)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">randomPhone</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">b := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">12</span>)</span><br><span class="line">cache := src.Int63()</span><br><span class="line">headerIdx := getHeaderIdx(cache)</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">3</span>; i++&#123;</span><br><span class="line">b[i] = headerNums[headerIdx][i]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">3</span>; i &lt; <span class="number">12</span> ; &#123;</span><br><span class="line"><span class="keyword">if</span> cache == <span class="number">0</span>&#123;</span><br><span class="line">cache = src.Int63()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> idx := <span class="keyword">int</span>(cache &amp; letterIdxMask); idx &lt; <span class="built_in">len</span>(letterBytes) &#123;</span><br><span class="line">b[i] = letterBytes[idx]</span><br><span class="line">i++</span><br><span class="line">&#125;</span><br><span class="line">cache &gt;&gt;= letterIdxBits</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">string</span>(b)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>  &#123;</span><br><span class="line">before := time.Now()</span><br><span class="line">fmt.Println(before.Format(<span class="string">&quot;2006-01-02 15:04:05&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">1000000000</span>; i++&#123;</span><br><span class="line">randomPhone()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">after := time.Now()</span><br><span class="line">fmt.Println(after.Format(<span class="string">&quot;2006-01-02 15:04:05&quot;</span>))</span><br><span class="line">fmt.Println(after.Sub(before))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2020-09-15 20:44:13</span></span><br><span class="line"><span class="comment">//2020-09-15 20:45:34</span></span><br><span class="line"><span class="comment">//1m21.0054747s</span></span><br></pre></td></tr></table></figure><p>é€Ÿåº¦æå‡è¿˜æ˜¯å¾ˆæ˜æ˜¾çš„ï¼Œåœ¨é…ç½®ä½çš„ç”µè„‘ä¸Šé¢å·®è·ä¼šæ›´å¤§</p><p>å¦‚æœæˆ‘ä»¬åŠ ä¸Šåç¨‹å‘¢ï¼ŒåŒæ—¶æ³¨æ„å»æ‰<code>var src = rand.NewSource(time.Now().UnixNano())</code>é¿å…ç«äº‰é”</p><p>è°ƒç”¨ä»£ç å’Œæ²¡æœ‰ä½¿ç”¨æ”¹å–„å­—ç¬¦ä¸²ç”Ÿæˆçš„æ–¹æ³•å·®ä¸å¤š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//2020-09-15 22:19:33</span></span><br><span class="line"><span class="comment">//2020-09-15 22:19:45</span></span><br><span class="line"><span class="comment">//11.851417s</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœå¼ºåŠ²</p><h1 id="æœ€ç»ˆæˆæœ"><a href="#æœ€ç»ˆæˆæœ" class="headerlink" title="æœ€ç»ˆæˆæœ"></a>æœ€ç»ˆæˆæœ</h1><ul><li><p>ä¸å¼€å¤šä¸ªåç¨‹ï¼š<code>2m56.9453851s &gt;&gt; 1m21.0054747s</code></p></li><li><p>å¼€å¤šä¸ªåç¨‹ï¼š<code>28.8154403s &gt;&gt; 11.851417s</code> </p></li></ul><hr><p>å‚è€ƒï¼š</p><p><a href="https://colobu.com/2018/12/18/dive-into-sync-mutex/">sync.mutex æºä»£ç åˆ†æ | é¸Ÿçª</a></p><p><a href="https://juejin.im/post/6844904029277913102">å›¾è§£Goé‡Œé¢çš„äº’æ–¥é”mutexäº†è§£ç¼–ç¨‹è¯­è¨€æ ¸å¿ƒå®ç°æºç  - æ˜é‡‘</a></p><p><a href="https://www.flysnow.org/2019/09/30/how-to-generate-a-random-string-of-a-fixed-length-in-go.html">ä¸€æ­¥æ­¥æå‡Goè¯­è¨€ç”Ÿæˆéšæœºå­—ç¬¦ä¸²çš„æ•ˆç‡ | é£é›ªæ— æƒ…çš„åšå®¢</a></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> golang </tag>
            
            <tag> éšæœºæ•°æ® </tag>
            
            <tag> éšæœºæ•° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue-admin-templateç¬¬ä¸‰æ–¹æ¥å…¥é…åˆåŠ¨æ€è·¯ç”±</title>
      <link href="/2020/09/10/vue-admin-template%E7%AC%AC%E4%B8%89%E6%96%B9%E6%8E%A5%E5%85%A5%E9%85%8D%E5%90%88%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1/"/>
      <url>/2020/09/10/vue-admin-template%E7%AC%AC%E4%B8%89%E6%96%B9%E6%8E%A5%E5%85%A5%E9%85%8D%E5%90%88%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1/</url>
      
        <content type="html"><![CDATA[<p>vue-admin-templateæ¥å…¥å…¬å¸å†…éƒ¨è®¤è¯ç³»ç»Ÿæ€»ç»“</p><span id="more"></span><h1 id="ä¸»è¦é€»è¾‘"><a href="#ä¸»è¦é€»è¾‘" class="headerlink" title="ä¸»è¦é€»è¾‘"></a>ä¸»è¦é€»è¾‘</h1><ol><li>æ£€æµ‹ç”¨æˆ·æœ‰æ²¡æœ‰ç™»å½•</li><li>æ²¡æœ‰åˆ™è·³è½¬è‡³<code>http://xxx.com?url=&lt;return_url&gt;</code></li><li>æˆæƒåè·³å›<code>return_url</code>ä»urlä¸­è·å–token</li><li>è§£ætokenï¼Œä¿å­˜ç”¨æˆ·æ•°æ®</li><li>ç™»å½•åçš„é€»è¾‘</li></ol><h1 id="è·³è½¬éƒ¨åˆ†"><a href="#è·³è½¬éƒ¨åˆ†" class="headerlink" title="è·³è½¬éƒ¨åˆ†"></a>è·³è½¬éƒ¨åˆ†</h1><h2 id="ä¿®æ”¹loginé¡µé¢"><a href="#ä¿®æ”¹loginé¡µé¢" class="headerlink" title="ä¿®æ”¹loginé¡µé¢"></a>ä¿®æ”¹loginé¡µé¢</h2><p>é‡Œé¢æˆ‘ä»¬åªéœ€è¦åœ¨æ¡†æ¶ä¸­æ·»åŠ è·³è½¬é¡µé¢ä»¥åŠè·³è½¬åå¤„ç†é¡µé¢å³å¯ï¼Œå…¶ä»–çš„æ¡†æ¶å·²ç»ä½¿ç”¨è·¯ç”±å¸®æˆ‘ä»¬å¤„ç†</p><p>å› ä¸ºåˆ¤æ–­åˆ°æ²¡æœ‰ç™»å½•ä¼šé‡å®šå‘åˆ°<code>/login</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä¿®æ”¹<code>/login</code>å¯¹åº”çš„é¡µé¢ï¼Œè®©å…¶ç›´æ¥è·³è½¬åˆ°è®¤è¯é¡µé¢</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/views/login/index.vue</span></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">window</span>.location.href = <span class="string">&#x27;http://passport.oa.com/modules/passport/signin.ashx?url=http://127.0.0.1:9527/#/ioa&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="æ·»åŠ è·³è½¬åå¤„ç†é¡µé¢"><a href="#æ·»åŠ è·³è½¬åå¤„ç†é¡µé¢" class="headerlink" title="æ·»åŠ è·³è½¬åå¤„ç†é¡µé¢"></a>æ·»åŠ è·³è½¬åå¤„ç†é¡µé¢</h2><p>è¿™é‡Œè·³è½¬åçš„é¡µé¢æ˜¯<code>/oauth</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ªå…¨æ–°é¡µé¢å»è·å–<code>token</code></p><h3 id="æ·»åŠ è·¯ç”±"><a href="#æ·»åŠ è·¯ç”±" class="headerlink" title="æ·»åŠ è·¯ç”±"></a>æ·»åŠ è·¯ç”±</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/oauth&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/login/oauth&#x27;</span>),</span><br><span class="line">    <span class="attr">hidden</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ å¤„ç†é¡µé¢"><a href="#æ·»åŠ å¤„ç†é¡µé¢" class="headerlink" title="æ·»åŠ å¤„ç†é¡µé¢"></a>æ·»åŠ å¤„ç†é¡µé¢</h3><p>è·³è½¬åçš„urlå¤§æ¦‚é•¿è¿™ä¸ªæ ·å­</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://xx.com/?token=xx#/oauth</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬éœ€è¦æå–å‡ºtokençš„å†…å®¹ï¼Œä½¿ç”¨ä¸‹é¢æ–¹æ³•å³å¯æå–</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">getQueryVariable</span>(<span class="params">variable</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> query = <span class="built_in">window</span>.location.search.substring(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">const</span> vars = query.split(<span class="string">&quot;&amp;&quot;</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; vars.length; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> pair = vars[i].split(<span class="string">&quot;=&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (pair[<span class="number">0</span>] === variable) &#123;</span><br><span class="line">      <span class="keyword">return</span> pair[<span class="number">1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> token = <span class="built_in">this</span>.getQueryVariable(<span class="string">&#x27;token&#x27;</span>)</span><br></pre></td></tr></table></figure><h1 id="å¤„ç†éƒ¨åˆ†"><a href="#å¤„ç†éƒ¨åˆ†" class="headerlink" title="å¤„ç†éƒ¨åˆ†"></a>å¤„ç†éƒ¨åˆ†</h1><h2 id="è§£ætoken"><a href="#è§£ætoken" class="headerlink" title="è§£ætoken"></a>è§£ætoken</h2><p>å‘é€getè¯·æ±‚åˆ°ç‰¹å®šçš„urlå³å¯è·å¾—åˆ°ç”¨æˆ·ä¿¡æ¯ï¼Œè¿™é‡Œä½¿ç”¨çš„æ–¹å¼æ˜¯åç«¯è·å–ï¼Œå› ä¸ºå‰ç«¯å­˜åœ¨è·¨åŸŸé—®é¢˜ï¼Œé…ç½®äº†ä¸€ä¸‹ä¸èƒ½è§£å†³ï¼Œæ‰€ä»¥æ”¹ä¸ºåç«¯è·å–</p><p>ç„¶ååç«¯è§£ælå®ŒæˆåæŠŠä¿¡æ¯å‘å›å‰ç«¯ï¼Œå¤§æ¦‚å®ç°å¦‚ä¸‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;user/login&#x27;</span>, ticket).then(...)</span><br></pre></td></tr></table></figure><p>è¿™é‡Œtokenæ˜¯éšæœºç»™çš„ï¼Œå› ä¸ºç”¨ä¸ä¸Štokenï¼ŒåŒæ—¶æ¡†æ¶åˆ¤æ–­ç™»å½•ç­‰é€»è¾‘éœ€è¦ç”¨åˆ°tokenï¼Œä¸ºäº†é¿å…å¤§æ”¹åŠ¨ï¼Œæ‰€ä»¥æ·»åŠ äº†ä¸ªéšæœºtoken</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//src/store/modules/user.js</span></span><br><span class="line"><span class="function"><span class="title">login</span>(<span class="params">&#123; commit &#125;, ticket</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      axios.post(<span class="string">&#x27;http://127.0.0.1:8090/api/login&#x27;</span>, &#123;</span><br><span class="line">        <span class="string">&quot;ticket&quot;</span>: ticket</span><br><span class="line">      &#125;, &#123;<span class="attr">timeout</span>: <span class="number">1000</span> * <span class="number">20</span>&#125;).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">const</span> token = <span class="built_in">Math</span>.random().toString(<span class="number">36</span>).slice(-<span class="number">8</span>)</span><br><span class="line">        commit(<span class="string">&#x27;SET_TOKEN&#x27;</span>, token)</span><br><span class="line">        setToken(token)</span><br><span class="line">        <span class="keyword">if</span>(res.data.code === <span class="number">0</span>)&#123;</span><br><span class="line">          setLocalStorage(<span class="string">&#x27;userInfo&#x27;</span>, res.data.data)</span><br><span class="line">          resolve()</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">           <span class="comment">//...</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;).catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        reject(error)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>æ•´ä¸ªå¤„ç†é¡µé¢çœ‹èµ·æ¥å°±æ˜¯è¿™æ ·<code>src/views/login/oauth.vue</code></p><p><img src="/2020/09/10/vue-admin-template%E7%AC%AC%E4%B8%89%E6%96%B9%E6%8E%A5%E5%85%A5%E9%85%8D%E5%90%88%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1/1.png" alt></p><p><strong>è·¯ç”±å¤„ç†æ˜¯æœ€æ ¸å¿ƒä¹Ÿæ˜¯æ¯”è¾ƒéš¾å¤„ç†çš„ä¸€ç‚¹</strong>ï¼Œå¤„ç†ä¸å¥½çš„è¯å¯èƒ½ä¼šå¯¼è‡´</p><ol><li>æµè§ˆå™¨æ— é™åŠ è½½ï¼Œç™½å±</li><li>æ­»å¾ªç¯ï¼Œæ€§èƒ½å ç”¨å¤§å¹…ä¸Šå‡ï¼Œå¯èƒ½ä¼šé€ æˆæµè§ˆå™¨å¡æ­»</li></ol><p><a href="https://greenhathg.github.io/2020/07/08/vue-admin-template%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1/">vue-admin-templateåŠ¨æ€è·¯ç”± - GreenHatHGã®Blog</a></p><p>ç›¸æ¯”ä¹‹å‰çš„æ–¹æ¡ˆè¿›è¡Œäº†ä¸€äº›è°ƒæ•´ï¼Œä¸»è¦æ›´æ”¹ç‚¹ï¼š</p><ol><li>å°†è¯·æ±‚åŠ¨æ€è·¯ç”±æ•°æ®éƒ¨åˆ†æ”¾åˆ°äº†beforeEaché‡Œé¢å¤„ç†</li><li>æ·»åŠ <code>ioa</code>é¡µé¢å¤„ç†</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; Message, MessageBox &#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="keyword">import</span> NProgress <span class="keyword">from</span> <span class="string">&#x27;nprogress&#x27;</span> <span class="comment">// progress bar</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;nprogress/nprogress.css&#x27;</span> <span class="comment">// progress bar style</span></span><br><span class="line"><span class="keyword">import</span> &#123; getToken &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/auth&#x27;</span> <span class="comment">// get token from cookie</span></span><br><span class="line"><span class="keyword">import</span> getPageTitle <span class="keyword">from</span> <span class="string">&#x27;@/utils/get-page-title&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Layout <span class="keyword">from</span> <span class="string">&#x27;@/layout/index&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;getLocalStorage, setLocalStorage&#125; <span class="keyword">from</span> <span class="string">&quot;@/utils/my-utils&quot;</span>;</span><br><span class="line"></span><br><span class="line">NProgress.configure(&#123; <span class="attr">showSpinner</span>: <span class="literal">false</span> &#125;) <span class="comment">// NProgress Configuration</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> whiteList = [<span class="string">&#x27;/login&#x27;</span>, <span class="string">&#x27;/ioa&#x27;</span>] <span class="comment">// no redirect whitelist</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> myRouterKey = <span class="string">&#x27;myRouter&#x27;</span></span><br><span class="line"><span class="keyword">let</span> getRouter = []; <span class="comment">//åå°æ‹¿åˆ°çš„è·¯ç”±</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addRouter</span>(<span class="params">to, next</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;addRouter&#x27;</span>, getRouter)</span><br><span class="line">  <span class="keyword">const</span> myRouters = filterAsyncRouter(getRouter)</span><br><span class="line">  router.addRoutes(myRouters)</span><br><span class="line">  router.addRoutes(  [&#123; <span class="attr">path</span>: <span class="string">&#x27;*&#x27;</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/404&#x27;</span>, <span class="attr">hidden</span>: <span class="literal">true</span> &#125;])</span><br><span class="line">  <span class="built_in">global</span>.antRouter = myRouters</span><br><span class="line">  next(&#123; ...to, <span class="attr">replace</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setRouter</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;data&#x27;</span>, data)</span><br><span class="line">  getRouter = []</span><br><span class="line">  <span class="keyword">let</span> children = []</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> name <span class="keyword">of</span> data) &#123;</span><br><span class="line">    children.push(&#123;</span><br><span class="line">      <span class="attr">path</span>: name,</span><br><span class="line">      <span class="attr">name</span>: name,</span><br><span class="line">      <span class="attr">component</span>: <span class="string">&#x27;@/views/table/sss&#x27;</span>,</span><br><span class="line">      <span class="attr">meta</span>: &#123;<span class="attr">title</span>: name, <span class="attr">icon</span>: <span class="string">&#x27;table&#x27;</span>&#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  getRouter.push(&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/ss&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="string">&#x27;Layout&#x27;</span>,</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/ss/table&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;ApiData&#x27;</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;<span class="attr">title</span>: <span class="string">&#x27;sss&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;el-icon-s-help&#x27;</span>&#125;,</span><br><span class="line">    <span class="attr">children</span>: children</span><br><span class="line">  &#125;)</span><br><span class="line">  setLocalStorage(myRouterKey, getRouter)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">router.beforeEach(<span class="keyword">async</span>(to, <span class="keyword">from</span>, next) =&gt; &#123;</span><br><span class="line">  <span class="comment">// start progress bar</span></span><br><span class="line">  NProgress.start()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// set page title</span></span><br><span class="line">  <span class="built_in">document</span>.title = getPageTitle(to.meta.title)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// determine whether the user has logged in</span></span><br><span class="line">  <span class="keyword">const</span> hasToken = getToken()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (hasToken) &#123;</span><br><span class="line">    <span class="keyword">if</span> (to.path === <span class="string">&#x27;/login&#x27;</span>) &#123;</span><br><span class="line">      <span class="comment">// if is logged in, redirect to the home page</span></span><br><span class="line">      next(&#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span> &#125;)</span><br><span class="line">      NProgress.done()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> hasGetUserInfo = store.getters.name</span><br><span class="line">      <span class="keyword">if</span> (hasGetUserInfo) &#123;</span><br><span class="line">        next()</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="comment">// get user info</span></span><br><span class="line">          <span class="keyword">await</span> store.dispatch(<span class="string">&#x27;user/getInfo&#x27;</span>)</span><br><span class="line">          <span class="comment">//ä¸åŠ è¿™ä¸ªåˆ¤æ–­ï¼Œè·¯ç”±ä¼šé™·å…¥æ­»å¾ªç¯</span></span><br><span class="line">          <span class="keyword">if</span> (getRouter.length === <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(!getLocalStorage(myRouterKey))&#123;</span><br><span class="line">              <span class="built_in">console</span>.log(<span class="string">&#x27;read from axios&#x27;</span>)</span><br><span class="line">              axios.get(<span class="string">&#x27;http://xx.com/getProjectList&#x27;</span>, &#123;<span class="attr">timeout</span>: <span class="number">5000</span>&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                setRouter(res.data)</span><br><span class="line">                addRouter(to, next)</span><br><span class="line">              &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.error(<span class="string">&#x27;addRouter&#x27;</span>, err)</span><br><span class="line">                setRouter([<span class="string">&#x27;xxx&#x27;</span>])</span><br><span class="line">                addRouter(to, next)</span><br><span class="line">              &#125;)</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">              <span class="built_in">console</span>.log(<span class="string">&#x27;read from local&#x27;</span>)</span><br><span class="line">              getRouter = <span class="built_in">JSON</span>.parse(getLocalStorage(myRouterKey))</span><br><span class="line">              addRouter(to, next)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;next&#x27;</span>)</span><br><span class="line">            next()</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">          <span class="comment">// remove token and go to login page to re-login</span></span><br><span class="line">          <span class="keyword">await</span> store.dispatch(<span class="string">&#x27;user/resetToken&#x27;</span>)</span><br><span class="line">          <span class="built_in">console</span>.error(error.message)</span><br><span class="line">          Message(&#123;</span><br><span class="line">            <span class="attr">message</span>: error.message,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">            <span class="attr">duration</span>: <span class="number">5</span> * <span class="number">1000</span></span><br><span class="line">          &#125;)</span><br><span class="line">          <span class="keyword">await</span> MessageBox.confirm(<span class="string">&#x27;ç™»å½•å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•&#x27;</span>, &#123;</span><br><span class="line">            <span class="attr">confirmButtonText</span>: <span class="string">&#x27;ç¡®å®š&#x27;</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span></span><br><span class="line">          &#125;)</span><br><span class="line">          next(<span class="string">`/login?redirect=<span class="subst">$&#123;to.path&#125;</span>`</span>)</span><br><span class="line">          NProgress.done()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">/* has no token*/</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (whiteList.indexOf(to.path) !== -<span class="number">1</span>) &#123;</span><br><span class="line">      <span class="comment">// in the free login whitelist, go directly</span></span><br><span class="line">      next()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// other pages that do not have permission to access are redirected to the login page.</span></span><br><span class="line">      next(<span class="string">`/login`</span>)</span><br><span class="line">      NProgress.done()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.afterEach(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// finish progress bar</span></span><br><span class="line">  NProgress.done()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// éå†åå°ä¼ æ¥çš„è·¯ç”±å­—ç¬¦ä¸²ï¼Œè½¬æ¢ä¸ºç»„ä»¶å¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filterAsyncRouter</span>(<span class="params">asyncRouterMap</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> asyncRouterMap.filter(<span class="function"><span class="params">route</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (route.component) &#123;</span><br><span class="line">      <span class="keyword">if</span> (route.component === <span class="string">&#x27;Layout&#x27;</span>) &#123;</span><br><span class="line">        route.component = Layout</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        route.component = <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/table/APIManage&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (route.children &amp;&amp; route.children.length) &#123;</span><br><span class="line">      route.children = filterAsyncRouter(route.children)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¤§éƒ¨åˆ†å’Œæ¡†æ¶åŸæœ¬ä¸€æ ·ï¼Œæ³¨æ„ç»†èŠ‚å³å¯</p><h1 id="å¤„ç†å"><a href="#å¤„ç†å" class="headerlink" title="å¤„ç†å"></a>å¤„ç†å</h1><h2 id="è·³åˆ°é¦–é¡µ"><a href="#è·³åˆ°é¦–é¡µ" class="headerlink" title="è·³åˆ°é¦–é¡µ"></a>è·³åˆ°é¦–é¡µ</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//src/views/login/oauth.vue</span></span><br><span class="line"><span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;user/login&#x27;</span>, ticket).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> originUrl = <span class="built_in">window</span>.location.origin</span><br><span class="line">  history.replaceState(&#123;&#125;, <span class="string">&#x27;&#x27;</span>, originUrl)</span><br><span class="line">  <span class="built_in">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">&#x27;/dashboard&#x27;</span> &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå› ä¸ºurlå·²ç»æ”¹å˜äº†(æ·»åŠ äº†<code>token</code>)ç­‰å‚æ•°ï¼Œæ‰€ä»¥éœ€è¦å¯¹urlè¿›è¡Œå¤„ç†ï¼Œç„¶åpushé¦–é¡µçš„è·¯å¾„åˆ°è·¯ç”±å³å¯</p><h1 id="ç»éªŒæ€»ç»“"><a href="#ç»éªŒæ€»ç»“" class="headerlink" title="ç»éªŒæ€»ç»“"></a>ç»éªŒæ€»ç»“</h1><ol><li>æ”¹äº†æºç f12å¤§é‡æŠ¥é”™æ€ä¹ˆåŠ<br>ï¼šå»ºè®®ä¸€å¼€å§‹ä¸è¦åˆ é™¤æºä»£ç ï¼Œè€Œä¸”ä¸è¦ä¹±æ”¹åŸæœ¬å˜é‡åï¼Œå¾…åŠŸèƒ½å¯è¡Œåå†åˆ æ‰ä¸ç”¨ä»£ç å’Œä¿®æ”¹ä¸€äº›å…¨å±€å˜é‡åç­‰</li><li>ä¿®æ”¹è·¯ç”±åæµè§ˆå™¨ç™½å±æ€ä¹ˆåŠ<ul><li>è¿™é‡Œä¸»è¦æ˜¯é€šè¿‡çœ‹f12æŠ¥çš„å¼‚å¸¸ä¿¡æ¯ï¼Œå¦‚æœæµè§ˆå™¨çªç„¶å¡é¡¿ï¼Œä¸èƒ½æ­£å¸¸é€€å‡ºï¼Œå¤šåŠæ˜¯è·¯ç”±æ­»å¾ªç¯ï¼Œå¯ä»¥çœ‹ä¸‹<code>src/permission.js</code>éƒ¨åˆ†<br>æœ¬æ¬¡å®æˆ˜ï¼šä¿®æ”¹<code>src/store/modules/user.js</code>ä¸­çš„<code>login</code>æ–¹æ³•åæœªåŒæ­¥ä¿®æ”¹<code>getInfo</code>æ–¹æ³•ï¼Œå¯¼è‡´<code>await store.dispatch(&#39;user/getInfo&#39;)</code>æŠ¥é”™ï¼Œåœ¨<code>src/permission.js</code>ä¸­try catchæ•æ‰ååˆé‡å®šå‘åˆ°loginé¡µé¢ï¼ˆå› ä¸ºå‡ºäº†å¼‚å¸¸è¿˜æ²¡æœ‰ç™»å½•æˆåŠŸï¼‰,æ‰€ä»¥æ¥ç€å¾ªç¯è¿™ä¸ªè¿‡ç¨‹ï¼Œå¯¼è‡´è·¯ç”±æ­»å¾ªç¯ï¼Œæµè§ˆå™¨ä¸æ–­åˆ·æ–°å¡æ­»<br>tipsï¼šåœ¨catché‡Œé¢å¯ä»¥æŠŠæ‰“å°errorå˜ä¸ºæ‰“å°error.messageï¼ŒåŒæ—¶æ·»åŠ sleepï¼Œé¿å…é¢‘ç¹åˆ·æ–°</li><li>æµè§ˆå™¨ä¸å¡é¡¿çš„è¯å¤šåŠæ˜¯<code>login</code>æ–¹æ³•å’Œ<code>getInfo</code>æ–¹æ³•æ²¡æœ‰ä¿®æ”¹å¯¹</li><li>åˆ·æ–°åä¸€ç›´ç™½å±ï¼šè¿™ç§å¯èƒ½æ˜¯å€¼æ²¡æœ‰ä¿å­˜å¥½ï¼Œå¯¼è‡´åˆ·æ–°åå€¼ä¸ºç©ºï¼Œè·¯ç”±éƒ¨åˆ†å¼‚å¸¸</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> åŠ¨æ€è·¯ç”± </tag>
            
            <tag> oauth2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é…ç½®æ— æ˜¾ç¤ºå™¨Linuxç¯å¢ƒè¿œç¨‹ä½¿ç”¨</title>
      <link href="/2020/09/03/%E9%85%8D%E7%BD%AE%E6%97%A0%E6%98%BE%E7%A4%BA%E5%99%A8Linux%E7%8E%AF%E5%A2%83%E8%BF%9C%E7%A8%8B%E4%BD%BF%E7%94%A8/"/>
      <url>/2020/09/03/%E9%85%8D%E7%BD%AE%E6%97%A0%E6%98%BE%E7%A4%BA%E5%99%A8Linux%E7%8E%AF%E5%A2%83%E8%BF%9C%E7%A8%8B%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨Windowså†…ç½‘è¿œç¨‹Linuxç”¨äºå¼€å‘ï¼Œè®©Linuxä¸“æ³¨äºå¼€å‘</p><span id="more"></span><h1 id="å®‰è£…Linuxä»¥åŠé…ç½®"><a href="#å®‰è£…Linuxä»¥åŠé…ç½®" class="headerlink" title="å®‰è£…Linuxä»¥åŠé…ç½®"></a>å®‰è£…Linuxä»¥åŠé…ç½®</h1><p>æœ¬æ¬¡å®‰è£…çš„æ˜¯Archï¼Œå…·ä½“æ•™ç¨‹ç•¥è¿‡ï¼Œå¯å‚è€ƒ</p><p><a href="https://greenhathg.github.io/2019/02/15/Arch%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E7%AC%94%E8%AE%B0/">Archå®‰è£…é…ç½®ç¬”è®° - GreenHatHGã®Blog</a></p><h1 id="å®‰è£…xorgä»¥åŠé…ç½®"><a href="#å®‰è£…xorgä»¥åŠé…ç½®" class="headerlink" title="å®‰è£…xorgä»¥åŠé…ç½®"></a>å®‰è£…xorgä»¥åŠé…ç½®</h1><ul><li><p>å®‰è£…xorg</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S xorg-server xorg-xinit</span><br></pre></td></tr></table></figure></li><li><p>æ— æ˜¾ç¤ºå™¨é…ç½®è¿˜éœ€è¦å®‰è£…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S xf86-video-dummy</span><br></pre></td></tr></table></figure></li><li><p>æ­£å¸¸æ¥è¯´ï¼Œæ–°ç‰ˆxorgèƒ½å¤Ÿè‡ªåŠ¨é…ç½®ï¼Œä½†æ˜¯å¯¹äºæ— æ˜¾ç¤ºå™¨æ–¹æ¡ˆï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±æ·»åŠ é…ç½®æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">/etc/X11/xorg.conf.d/10-headless.conf</span><br><span class="line"></span><br><span class="line">Section &quot;Monitor&quot;</span><br><span class="line">        Identifier &quot;dummy_monitor&quot;</span><br><span class="line">        HorizSync 28.0-80.0</span><br><span class="line">        VertRefresh 48.0-75.0</span><br><span class="line">        Modeline &quot;1920x1080&quot; 172.80 1920 2040 2248 2576 1080 1081 1084 1118</span><br><span class="line">EndSection</span><br><span class="line"></span><br><span class="line">Section &quot;Device&quot;</span><br><span class="line">        Identifier &quot;dummy_card&quot;</span><br><span class="line">        VideoRam 256000</span><br><span class="line">        Driver &quot;dummy&quot;</span><br><span class="line">EndSection</span><br><span class="line"></span><br><span class="line">Section &quot;Screen&quot;</span><br><span class="line">        Identifier &quot;dummy_screen&quot;</span><br><span class="line">        Device &quot;dummy_card&quot;</span><br><span class="line">        Monitor &quot;dummy_monitor&quot;</span><br><span class="line">        SubSection &quot;Display&quot;</span><br><span class="line">        EndSubSection</span><br><span class="line">EndSection</span><br></pre></td></tr></table></figure><p>å¦‚æ­¤ï¼Œå°±èƒ½å¤Ÿåœ¨è¿œç¨‹ä¸­ç›´æ¥æ˜¾ç¤ºå›¾åƒé¡µé¢ï¼Œä½†æ˜¯æœ‰ä¸ªæ³¨æ„ç‚¹ï¼Œæ’å…¥æ˜¾ç¤ºå™¨åä¸ä¼šå‡ºç°ä»»ä½•å†…å®¹ï¼Œå¦‚æœéœ€è¦å¯ä»¥å»æ‰é…ç½®</p></li></ul><h1 id="é…ç½®è¿œç¨‹"><a href="#é…ç½®è¿œç¨‹" class="headerlink" title="é…ç½®è¿œç¨‹"></a>é…ç½®è¿œç¨‹</h1><p>ä½¿ç”¨è¿‡ä¸¤ç§å¸¸è§çš„æ–¹æ¡ˆï¼Œä¸€ç§æ˜¯Teamviewerï¼Œå¦å¤–ä¸€ç§æ˜¯TigerVNC</p><ul><li>Teamviewer<ul><li>å¥½å¤„åœ¨äºä¸éœ€è¦é…ç½®ä»€ä¹ˆï¼Œç›´æ¥å®‰è£…å®Œå°±èƒ½å¤Ÿä½¿ç”¨ï¼Œå‰ªè´´æ¿ä¼ è¾“æ–‡ä»¶ä¼ è¾“ï¼Œå¤–ç½‘è¿æ¥ä»€ä¹ˆçš„æ–¹ä¾¿</li><li>ä¸è¶³ä¹‹å¤„åœ¨äºå†…ç½‘è¿æ¥å¯èƒ½é€Ÿåº¦ä¸å¦‚VNCå¿«ï¼Œè€Œä¸”Linuxç‰ˆæœ¬è‡ªå¯ä»€ä¹ˆçš„å¯èƒ½æœ‰é—®é¢˜</li></ul></li><li>TigerVNC<ul><li>å¥½å¤„åœ¨äºå†…ç½‘å†…ä¼ è¾“æ¯”è¾ƒå¿«ï¼Œå‡ºé—®é¢˜æ¯”è¾ƒå°‘</li><li>ä¸è¶³ä¹‹å¤„åœ¨äºé…ç½®ç•¥éº»çƒ¦ï¼Œå‰ªè´´æ¿ä¼ è¾“æœ‰ç‚¹é—®é¢˜ï¼Œæ¯”å¦‚ä¸­æ–‡ä¹±ç ï¼Œä¼ è¾“ä¸æˆåŠŸå¡é¡¿ï¼Œå¤–ç½‘ä½¿ç”¨éœ€è¦å†…ç½‘ç©¿é€</li><li>è¿™é‡Œé€‰æ‹©çš„æ˜¯VNC</li></ul></li></ul><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S tigervnc </span><br></pre></td></tr></table></figure><h2 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vncserver</span><br></pre></td></tr></table></figure><p><code>:1</code>å®é™…ä¸Šæ˜¯TCPç«¯å£5901ï¼ˆ5900 + 1ï¼‰</p><h2 id="é…ç½®å¯åŠ¨è„šæœ¬"><a href="#é…ç½®å¯åŠ¨è„šæœ¬" class="headerlink" title="é…ç½®å¯åŠ¨è„šæœ¬"></a>é…ç½®å¯åŠ¨è„šæœ¬</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">~/.vnc/xstartup</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line">unset SESSION_MANAGER</span><br><span class="line">unset DBUS_SESSION_BUS_ADDRESS</span><br><span class="line">exec startxfce4</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ˜¯xfce DEï¼Œå…¶ä»–çš„å¯ä»¥çœ‹ArchWiki</p><h2 id="å¯é€‰é…ç½®è‡ªå®šä¹‰æ–‡ä»¶"><a href="#å¯é€‰é…ç½®è‡ªå®šä¹‰æ–‡ä»¶" class="headerlink" title="å¯é€‰é…ç½®è‡ªå®šä¹‰æ–‡ä»¶"></a>å¯é€‰é…ç½®è‡ªå®šä¹‰æ–‡ä»¶</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">~/.vnc/config</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Supported server options to pass to vncserver upon invocation can be listed</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># in this file. See the following manpages for more: vncserver(1) Xvnc(1).</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Several common ones are shown below. Uncomment and modify to your liking.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">securitytypes=vncauth,tlsvnc</span></span><br><span class="line"><span class="meta">#</span><span class="bash">desktop=sandbox</span></span><br><span class="line">geometry=1920x1080</span><br><span class="line">dpi=130</span><br><span class="line"><span class="meta">#</span><span class="bash">localhost</span></span><br><span class="line"><span class="meta">#</span><span class="bash">alwaysshared</span></span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨systemctlç®¡ç†è‡ªå¯åŠ¨"><a href="#ä½¿ç”¨systemctlç®¡ç†è‡ªå¯åŠ¨" class="headerlink" title="ä½¿ç”¨systemctlç®¡ç†è‡ªå¯åŠ¨"></a>ä½¿ç”¨systemctlç®¡ç†è‡ªå¯åŠ¨</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/usr/lib/systemd/system/vncserver@:1.service</span><br><span class="line"></span><br><span class="line">[Unit]</span><br><span class="line">Description=Remote desktop service (VNC)</span><br><span class="line">After=syslog.target network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">User=cc</span><br><span class="line">WorkingDirectory=/home/cc</span><br><span class="line">ExecStartPre=/bin/sh -c &#x27;/usr/bin/vncserver -kill %i &gt; /dev/null 2&gt;&amp;1 || :&#x27;</span><br><span class="line">ExecStart=/usr/bin/vncserver %i -geometry 1440x900 -alwaysshared</span><br><span class="line">ExecStop=/usr/bin/vncserver -kill %i</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><h2 id="è¿æ¥"><a href="#è¿æ¥" class="headerlink" title="è¿æ¥"></a>è¿æ¥</h2><p>Windowsä¸Šå¯ä»¥ä½¿ç”¨VNC Viewerè¿æ¥</p><p><img src="/2020/09/03/%E9%85%8D%E7%BD%AE%E6%97%A0%E6%98%BE%E7%A4%BA%E5%99%A8Linux%E7%8E%AF%E5%A2%83%E8%BF%9C%E7%A8%8B%E4%BD%BF%E7%94%A8/1.png" alt></p><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><ul><li>å‰ªè´´æ¿ä¼ è¾“æœ‰ç‚¹é—®é¢˜ï¼Œå¶å°”å¤åˆ¶ç²˜è´´è¿‡å»å¯èƒ½å¯¼è‡´Linuxæš‚æ—¶å¡é¡¿ï¼Œæš‚æ—¶è¿˜æ²¡æœ‰è§£å†³ï¼Œå¯èƒ½æ˜¯VNCæœ¬èº«é—®é¢˜ï¼Œä¹Ÿå¯èƒ½æ˜¯VNC Viewerçš„é—®é¢˜</li><li>å›¾ç‰‡ä¼ è¾“ä»€ä¹ˆçš„æ˜¯ç”¨çŸ³å¢¨æ–‡æ¡£è¿›è¡Œå…±äº«çš„ï¼Œç­‰äºæŠŠåœ¨çº¿æ–‡æ¡£å½“å‰ªè´´æ¿</li></ul><h1 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h1><p>å¼€å¯å…¨å±ä¸‹æ•ˆæœæŒºå¥½</p><p><img src="/2020/09/03/%E9%85%8D%E7%BD%AE%E6%97%A0%E6%98%BE%E7%A4%BA%E5%99%A8Linux%E7%8E%AF%E5%A2%83%E8%BF%9C%E7%A8%8B%E4%BD%BF%E7%94%A8/2.png" alt></p><p>ä¼‘çœ çŠ¶æ€ä¸‹å¯ä»¥ä»¿MACå½“æ—¶é’Ÿï¼Œå®‰è£…åœ¨aurçš„gluqloï¼Œç„¶ååœ¨ScreenSaveré‡Œé¢é…ç½®å°±è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S gluqlo</span><br></pre></td></tr></table></figure><p><img src="/2020/09/03/%E9%85%8D%E7%BD%AE%E6%97%A0%E6%98%BE%E7%A4%BA%E5%99%A8Linux%E7%8E%AF%E5%A2%83%E8%BF%9C%E7%A8%8B%E4%BD%BF%E7%94%A8/3.png" alt></p><hr><p>å‚è€ƒï¼š</p><p><a href="https://htmlgtmk.github.io/blog/2019/10/18/Linux-%E8%BF%9C%E7%A8%8B%E6%8E%A7%E5%88%B6/">Linux è¿œç¨‹æ§åˆ¶ | GT Blog</a></p><p><a href="https://wiki.archlinux.org/index.php/Xorg">Xorg - ArchWiki</a></p><p><a href="https://wiki.archlinux.org/index.php/TigerVNC">TigerVNC - ArchWiki</a></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¿œç¨‹å¼€å‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äºŒè¿›åˆ¶å¸¸è§æ“ä½œæ€»ç»“</title>
      <link href="/2020/08/19/%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C%E6%80%BB%E7%BB%93/"/>
      <url>/2020/08/19/%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p>å¸¸è§äºŒè¿›åˆ¶å¥‡æŠ€æ·«å·§</p><span id="more"></span><h2 id="åˆ¤æ–­å¥‡å¶æ•°"><a href="#åˆ¤æ–­å¥‡å¶æ•°" class="headerlink" title="åˆ¤æ–­å¥‡å¶æ•°"></a>åˆ¤æ–­å¥‡å¶æ•°</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="number">0</span> == (a &amp; <span class="number">1</span>)) &#123;</span><br><span class="line"> <span class="comment">//å¶æ•°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ¤æ–­äºŒè¿›åˆ¶æŸä¸ªä½æ˜¯å¦ä¸º1"><a href="#åˆ¤æ–­äºŒè¿›åˆ¶æŸä¸ªä½æ˜¯å¦ä¸º1" class="headerlink" title="åˆ¤æ–­äºŒè¿›åˆ¶æŸä¸ªä½æ˜¯å¦ä¸º1"></a>åˆ¤æ–­äºŒè¿›åˆ¶æŸä¸ªä½æ˜¯å¦ä¸º1</h2><p>æŠŠ1å·¦ç§»N-1ä½ï¼Œå†è¿›è¡Œandæ“ä½œï¼Œå¦‚æœå¤§äº0åˆ™ä»£è¡¨è¯¥äºŒè¿›åˆ¶ä½å°±ä¸º1</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x&amp;(<span class="number">1</span>&lt;&lt;<span class="number">5</span>)</span><br></pre></td></tr></table></figure><h2 id="å‡å»ä½ä½çš„æœ€åä¸€ä¸ª1-å°†æœ€å³è¾¹çš„1å˜æˆ0"><a href="#å‡å»ä½ä½çš„æœ€åä¸€ä¸ª1-å°†æœ€å³è¾¹çš„1å˜æˆ0" class="headerlink" title="å‡å»ä½ä½çš„æœ€åä¸€ä¸ª1|å°†æœ€å³è¾¹çš„1å˜æˆ0"></a>å‡å»ä½ä½çš„æœ€åä¸€ä¸ª1|å°†æœ€å³è¾¹çš„1å˜æˆ0</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x = x&amp;(x<span class="number">-1</span>)</span><br></pre></td></tr></table></figure><h2 id="O-1-æ—¶é—´æ£€æµ‹æ•´æ•°-n-æ˜¯å¦æ˜¯-2-çš„å¹‚æ¬¡"><a href="#O-1-æ—¶é—´æ£€æµ‹æ•´æ•°-n-æ˜¯å¦æ˜¯-2-çš„å¹‚æ¬¡" class="headerlink" title="O(1) æ—¶é—´æ£€æµ‹æ•´æ•° n æ˜¯å¦æ˜¯ 2 çš„å¹‚æ¬¡"></a>O(1) æ—¶é—´æ£€æµ‹æ•´æ•° n æ˜¯å¦æ˜¯ 2 çš„å¹‚æ¬¡</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x&amp;(x<span class="number">-1</span>) == <span class="number">0</span> <span class="comment">//æ˜¯</span></span><br></pre></td></tr></table></figure><h2 id="é«˜ä½ä½äº¤æ¢"><a href="#é«˜ä½ä½äº¤æ¢" class="headerlink" title="é«˜ä½ä½äº¤æ¢"></a>é«˜ä½ä½äº¤æ¢</h2><p>ç»™å®šä¸€ä¸ª 16 ä½çš„æ— ç¬¦å·æ•´æ•°ï¼Œå°†å…¶é«˜ 8 ä½ä¸ä½ 8 ä½è¿›è¡Œäº¤æ¢ï¼Œæ±‚å‡ºäº¤æ¢åçš„å€¼</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = (a &gt;&gt; <span class="number">8</span>) | (a &lt;&lt; <span class="number">8</span>);</span><br></pre></td></tr></table></figure><h2 id="å°†æœ€å³è¾¹çš„0å˜æˆ1"><a href="#å°†æœ€å³è¾¹çš„0å˜æˆ1" class="headerlink" title="å°†æœ€å³è¾¹çš„0å˜æˆ1"></a>å°†æœ€å³è¾¹çš„0å˜æˆ1</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x|(x+<span class="number">1</span>)</span><br></pre></td></tr></table></figure><h2 id="åœ¨æœ€åä¸€ä½åŠ ä¸€ä¸ª1"><a href="#åœ¨æœ€åä¸€ä½åŠ ä¸€ä¸ª1" class="headerlink" title="åœ¨æœ€åä¸€ä½åŠ ä¸€ä¸ª1"></a>åœ¨æœ€åä¸€ä½åŠ ä¸€ä¸ª1</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a &lt;&lt; <span class="number">1</span>+<span class="number">1</span></span><br></pre></td></tr></table></figure><h2 id="æœ€åä¸€ä½å–å"><a href="#æœ€åä¸€ä½å–å" class="headerlink" title="æœ€åä¸€ä½å–å"></a>æœ€åä¸€ä½å–å</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x ^ <span class="number">1</span></span><br></pre></td></tr></table></figure><h2 id="æŠŠå³æ•°ç¬¬kä½å˜æˆ1"><a href="#æŠŠå³æ•°ç¬¬kä½å˜æˆ1" class="headerlink" title="æŠŠå³æ•°ç¬¬kä½å˜æˆ1"></a>æŠŠå³æ•°ç¬¬kä½å˜æˆ1</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x | (<span class="number">1</span> &lt;&lt; (k<span class="number">-1</span>))</span><br></pre></td></tr></table></figure><h2 id="æŠŠå³æ•°ç¬¬kä½å˜æˆ0"><a href="#æŠŠå³æ•°ç¬¬kä½å˜æˆ0" class="headerlink" title="æŠŠå³æ•°ç¬¬kä½å˜æˆ0"></a>æŠŠå³æ•°ç¬¬kä½å˜æˆ0</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x &amp; ~ (<span class="number">1</span> &lt;&lt; (k<span class="number">-1</span>))</span><br></pre></td></tr></table></figure><h2 id="å³æ•°ç¬¬kä½å–å"><a href="#å³æ•°ç¬¬kä½å–å" class="headerlink" title="å³æ•°ç¬¬kä½å–å"></a>å³æ•°ç¬¬kä½å–å</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x ^ (<span class="number">1</span> &lt;&lt; (k<span class="number">-1</span>))</span><br></pre></td></tr></table></figure><h2 id="å–æœ«kä½"><a href="#å–æœ«kä½" class="headerlink" title="å–æœ«kä½"></a>å–æœ«kä½</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x &amp; (<span class="number">1</span> &lt;&lt; k<span class="number">-1</span>)</span><br></pre></td></tr></table></figure><h2 id="å–å³æ•°ç¬¬kä½"><a href="#å–å³æ•°ç¬¬kä½" class="headerlink" title="å–å³æ•°ç¬¬kä½"></a>å–å³æ•°ç¬¬kä½</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x &gt;&gt; (k<span class="number">-1</span>) &amp; <span class="number">1</span></span><br></pre></td></tr></table></figure><hr><p>å‚è€ƒ:</p><p><a href="https://www.zhihu.com/question/38206659/answer/736472332">https://www.zhihu.com/question/38206659/answer/736472332</a></p><p><a href="https://zhuanlan.zhihu.com/p/37909700">https://zhuanlan.zhihu.com/p/37909700</a></p><p><a href="http://www.matrix67.com/blog/archives/263">http://www.matrix67.com/blog/archives/263</a></p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äºŒè¿›åˆ¶è¿ç®— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitæäº¤å‰æ ¡éªŒæ–¹æ¡ˆ</title>
      <link href="/2020/08/07/git%E6%8F%90%E4%BA%A4%E5%89%8D%E6%A0%A1%E9%AA%8C%E6%96%B9%E6%A1%88/"/>
      <url>/2020/08/07/git%E6%8F%90%E4%BA%A4%E5%89%8D%E6%A0%A1%E9%AA%8C%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<p>æ‹¦æˆªcommitäº‹ä»¶ï¼Œè¿›è¡Œå‰ç½®å¤„ç†ï¼Œæ ¡éªŒé€šè¿‡åˆ™å…è®¸commitå¦åˆ™æ‹’ç»</p><span id="more"></span><h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h1><p>Gitæœ‰ä¸€ç§åœ¨å‘ç”ŸæŸäº›é‡è¦æ“ä½œæ—¶è§¦å‘è‡ªå®šä¹‰è„šæœ¬çš„æ–¹æ³•ï¼Œç§°ä¸º<code>Git Hooks</code>ã€‚ è¿™äº›<code>hooks</code>æœ‰ä¸¤ç§ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ã€‚ å®¢æˆ·ç«¯<code>hooks</code>ç”±è¯¸å¦‚æäº¤å’Œåˆå¹¶ä¹‹ç±»çš„æ“ä½œè§¦å‘ï¼Œè€ŒæœåŠ¡å™¨<code>hooks</code>ç”±ç½‘ç»œæ“ä½œï¼ˆå¦‚æ¥æ”¶æ¨é€çš„æäº¤ï¼‰è¿è¡Œ</p><p><a href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks">https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks</a></p><p>æœ¬æ¬¡æ˜¯å®¢æˆ·ç«¯æ–¹æ¡ˆ</p><h1 id="æ–¹æ¡ˆä»‹ç»"><a href="#æ–¹æ¡ˆä»‹ç»" class="headerlink" title="æ–¹æ¡ˆä»‹ç»"></a>æ–¹æ¡ˆä»‹ç»</h1><ul><li><p>ç›®çš„ï¼šåœ¨<code>git commit</code>ä¹‹å‰ï¼Œå¯¹å˜æ›´çš„æ–‡ä»¶è¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœé€šè¿‡ï¼Œåˆ™å…è®¸æäº¤ï¼Œå¦åˆ™æ‹’ç»æäº¤</p></li><li><p>æµç¨‹ï¼š</p></li></ul><ol><li><code>git diff</code>è·å–å˜æ›´æ–‡ä»¶ </li><li>æ‰§è¡Œæ£€æŸ¥è„šæœ¬ï¼Œå°†æœªé€šè¿‡æ–‡ä»¶åˆ—è¡¨ä¿å­˜åˆ°æ–‡æœ¬ </li><li>ä»æ–‡æœ¬ä¸­è·å–æ‰€æœ‰å‡ºé”™æ–‡ä»¶ </li><li>ä¸å˜æ›´æ–‡ä»¶åˆ—è¡¨æ¯”è¾ƒ </li><li>å¦‚æœå­˜åœ¨å‡ºé”™æ–‡ä»¶åˆ™æ‹’ç»<code>commit</code>ï¼Œå¦åˆ™<code>commit</code></li></ol><h1 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h1><p><code>git diff</code>è·å–å˜æ›´æ–‡ä»¶æ—¶ï¼Œå¦‚æœgitä¸­å¯¹åº”çš„ç¼–ç æ²¡æœ‰è®¾ç½®å¯¹ï¼Œè·å–çš„æ–‡ä»¶åå¯èƒ½æ˜¯ä¸€ä¸²æ•°å­—</p><p>è¿™é‡Œæœ‰ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆï¼š</p><ul><li><p>æ‰‹åŠ¨è®¾ç½®gitç¼–ç æ­£ç¡®ï¼Œ<code>Windows</code>å’Œ<code>*nix</code>ä¸¤ä¸ªç³»ç»Ÿæ“ä½œæ–¹å¼ä¸ä¸€æ ·</p></li><li><p>æ·»åŠ ç¼–ç è®¾ç½®åˆ°<code>~/.gitconfig</code></p></li></ul><p>è¿™é‡Œé‡‡ç”¨ç¬¬äºŒç§æ–¹æ¡ˆ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add_git_config</span>():</span></span><br><span class="line">        git_config = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">#tapd</span></span><br><span class="line"><span class="string">[core]</span></span><br><span class="line"><span class="string">   quotepath = false</span></span><br><span class="line"><span class="string">[gui]</span></span><br><span class="line"><span class="string">   encoding = utf-8</span></span><br><span class="line"><span class="string">[i18n]</span></span><br><span class="line"><span class="string">   commitencoding = utf-8</span></span><br><span class="line"><span class="string">[svn]</span></span><br><span class="line"><span class="string">   pathnameencoding = utf-8</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">        git_config_path = os.path.join(os.path.expanduser(<span class="string">&quot;~&quot;</span>), <span class="string">&#x27;.gitconfig&#x27;</span>)</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(git_config_path, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            content = f.read()</span><br><span class="line">        <span class="keyword">if</span> content.find(<span class="string">&#x27;#tapd&#x27;</span>) == -<span class="number">1</span>:</span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(git_config_path, <span class="string">&#x27;a&#x27;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                f.write(git_config)</span><br></pre></td></tr></table></figure><h1 id="pre-commitå®ç°"><a href="#pre-commitå®ç°" class="headerlink" title="pre-commitå®ç°"></a>pre-commitå®ç°</h1><p>åœ¨<code>.git/hooks</code>æ–‡ä»¶å¤¹ä¸‹æ·»åŠ æ–‡ä»¶<code>pre-commit</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è·å–gitå˜æ›´æ–‡ä»¶</span></span><br><span class="line">diff=`git diff --cached --name-only`</span><br><span class="line">echo $diff</span><br><span class="line"><span class="meta">#</span><span class="bash"> è½¬æ¢æˆæ•°ç»„</span></span><br><span class="line">updated_file_arr=($&#123;diff// /&#125;)</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è·å–æ–‡ä»¶æ‰§è¡Œç»å¯¹è·¯å¾„</span></span><br><span class="line">SHELL_FOLDER=$(cd &quot;$(dirname &quot;$0&quot;)&quot;; pwd -P)</span><br><span class="line">echo $SHELL_FOLDER</span><br><span class="line">cd $SHELL_FOLDER</span><br><span class="line">cd ../../src</span><br><span class="line"></span><br><span class="line">PYTHON_PATH=`head -n +1 python_info.txt`</span><br><span class="line"><span class="meta">$</span><span class="bash">&#123;PYTHON_PATH&#125; local_conversion.py &gt; /dev/null</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è·å–é”™è¯¯åˆ—è¡¨</span></span><br><span class="line">content=`cat notification_list`</span><br><span class="line">error_file_arr=($&#123;content//~~~/ &#125;)</span><br><span class="line"></span><br><span class="line">for err_file in $&#123;error_file_arr[*]&#125;</span><br><span class="line">do</span><br><span class="line">  for updated_file in $&#123;updated_file_arr[*]&#125;</span><br><span class="line">  do</span><br><span class="line">    echo $err_file</span><br><span class="line">    echo $updated_file</span><br><span class="line">    [ &quot;$err_file&quot; == &quot;$updated_file&quot; ] &amp;&amp; echo &#x27;Check failed&#x27; &amp;&amp; exit 1</span><br><span class="line">  done</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">echo &#x27;success!&#x27;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œéœ€è¦æ³¨æ„äºŒç‚¹ï¼Œæœ‰äº›Shellå‘½ä»¤åœ¨Windowså’ŒMacä¸‹ä¸å…¼å®¹çš„ï¼Œè¿™é‡Œéœ€è¦éªŒè¯ä¸€ä¸‹ï¼Œ(ä¸Šé¢çš„å‘½ä»¤å·²ç»ç»è¿‡éªŒè¯)ï¼›éwindowsç³»ç»Ÿéœ€è¦æ‰§è¡Œ<code>chmod</code>å¯¹è¯¥æ–‡ä»¶æˆäºˆå¯æ‰§è¡Œæƒé™</p><p>ä¸»è¦æœ‰ä¸¤æ¡ä¸å…¼å®¹ï¼š</p><ul><li><p>è·å–æ–‡ä»¶æ‰§è¡Œç»å¯¹è·¯å¾„</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHELL_FOLDER=$(cd &quot;$(dirname &quot;$0&quot;)&quot;; pwd -P)</span><br></pre></td></tr></table></figure></li><li><p>æ–‡ä»¶æ›¿æ¢</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PROJECT_PATH=$&#123;SHELL_FOLDER/&#x27;.git/hooks&#x27;/ &#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id="è‡ªåŠ¨é…ç½®git-hooksè„šæœ¬"><a href="#è‡ªåŠ¨é…ç½®git-hooksè„šæœ¬" class="headerlink" title="è‡ªåŠ¨é…ç½®git hooksè„šæœ¬"></a>è‡ªåŠ¨é…ç½®git hooksè„šæœ¬</h1><p>è¿™é‡Œä¸»è¦æœ‰å‡ ä¸ªåŠŸèƒ½ç‚¹ï¼š</p><ol><li>æ–‡ä»¶å¤¹å’Œæ–‡ä»¶åˆæ³•æ€§æ£€éªŒ</li><li>å¤åˆ¶<code>pre-commit</code>åˆ°<code>.git/hooks</code>ï¼Œå¦‚æœæ˜¯éwindowsç³»ç»Ÿå†æ‰§è¡Œ<code>chmod</code>æˆäºˆæƒé™</li><li>è·å¾—pythonæ‰§è¡Œè·¯å¾„ä¿æŒåˆ°<code>src/python_info.txt</code>ï¼Œç”¨äº<code>pre-commit</code>è„šæœ¬æ‰§è¡Œpythonå‘½ä»¤</li><li>æ·»åŠ gitconfigé…ç½®ï¼Œé¿å…ä½¿ç”¨gitå‘½ä»¤å¾—åˆ°æ–‡ä»¶åˆ—è¡¨æ˜¯ä¹±ç çš„</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> platform</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> shutil <span class="keyword">import</span> copy</span><br><span class="line"><span class="keyword">from</span> sys <span class="keyword">import</span> platform <span class="keyword">as</span> _platform</span><br><span class="line"></span><br><span class="line">base_dir = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))</span><br><span class="line">pre_commit = os.path.join(base_dir, <span class="string">&#x27;pre-commit&#x27;</span>)</span><br><span class="line">git_path = os.path.join(base_dir, <span class="string">&#x27;.git&#x27;</span>)</span><br><span class="line">hooks_path = os.path.join(git_path, <span class="string">&#x27;hooks&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_file</span>():</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> (os.path.isfile(pre_commit) <span class="keyword">and</span> os.path.getsize(pre_commit) &gt; <span class="number">0</span>):</span><br><span class="line">        <span class="keyword">raise</span> Exception(pre_commit + <span class="string">&#x27;æ–‡ä»¶ä¸ºç©ºæˆ–è€…ä¸å­˜åœ¨&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">copy_pre_commit</span>():</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(git_path):</span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">&#x27;.gitæ–‡ä»¶å¤¹ä¸å­˜åœ¨&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(hooks_path):</span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">&#x27;hooksæ–‡ä»¶å¤¹ä¸å­˜åœ¨&#x27;</span>)</span><br><span class="line">    check_file()</span><br><span class="line">    copy(pre_commit, hooks_path)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> _platform == <span class="string">&quot;win32&quot;</span> <span class="keyword">and</span> <span class="keyword">not</span> _platform == <span class="string">&quot;win64&quot;</span>:</span><br><span class="line">        subprocess.Popen(<span class="string">&#x27;chmod +x &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(os.path.join(hooks_path, <span class="string">&#x27;pre-commit&#x27;</span>)), shell=<span class="literal">True</span>).wait()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_info</span>():</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;3.6&#x27;</span> &gt; platform.python_version():</span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">&#x27;è¯·æ›´æ–°åˆ°python3.6ç‰ˆæœ¬ä»¥ä¸Š&#x27;</span>)</span><br><span class="line">    python_path = sys.executable</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(os.path.join(base_dir, <span class="string">&#x27;src&#x27;</span>, <span class="string">&#x27;python_info.txt&#x27;</span>), <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(python_path)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;å¼€å§‹æ‰§è¡Œ.......&#x27;</span>)</span><br><span class="line">    copy_pre_commit()</span><br><span class="line">    get_info()</span><br><span class="line">    Util.add_git_config()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;æ‰§è¡Œå®Œæˆ.......&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hooks </tag>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Caddy2ä½¿ç”¨åœ¨vue-historyæ¨¡å¼</title>
      <link href="/2020/07/21/Caddy2%E4%BD%BF%E7%94%A8%E5%9C%A8vue-history%E6%A8%A1%E5%BC%8F/"/>
      <url>/2020/07/21/Caddy2%E4%BD%BF%E7%94%A8%E5%9C%A8vue-history%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>Caddy2åœ¨vue-historyæ¨¡å¼ä¸‹çš„é…ç½®</p><span id="more"></span><h1 id="Caddyæ˜¯ä»€ä¹ˆ"><a href="#Caddyæ˜¯ä»€ä¹ˆ" class="headerlink" title="Caddyæ˜¯ä»€ä¹ˆ"></a>Caddyæ˜¯ä»€ä¹ˆ</h1><p>Caddyæ˜¯ä¸€ä¸ªåƒ<code>Apache</code>ï¼Œ<code>Nginx</code>çš„webæœåŠ¡å™¨</p><p>åœ¨ä½¿ç”¨äº†webæœåŠ¡å™¨çš„ç½‘ç«™ä¸­ï¼Œæœ‰30%+ä½¿ç”¨äº†Nginxï¼Œæ˜¯å¸‚é¢ä¸Šä½¿ç”¨æœ€å¹¿æ³›çš„webæœåŠ¡å™¨ä¹‹ä¸€</p><p><strong>å¯¹äºä¸ªäººå¼€å‘è€…æ¥è¯´</strong>ï¼ŒCaddyå¯èƒ½æ˜¯ä½ çš„è¾ƒå¥½é€‰æ‹©ï¼Œåœ¨å¸‚é¢ä¸ŠCaddyå æœ‰é¢ä¼šéå¸¸çš„å¾®å°ï¼Œä½†æ˜¯å®ƒæ–¹ä¾¿çš„é…ç½®å°±è¶³å¤Ÿäº†</p><h1 id="Caddy2"><a href="#Caddy2" class="headerlink" title="Caddy2"></a>Caddy2</h1><p>Caddyçš„æœ€æ–°ç‰ˆæœ¬æ˜¯2.xï¼Œ åŠŸèƒ½å¼ºå¤§äº†å¾ˆå¤šï¼Œä½†æ˜¯èµ„æ–™/dome éƒ½æ¯”è¾ƒå°‘ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ä½¿ç”¨è¿‡ç¨‹ï¼Œä¸‹é¢æ˜¯ä¸€äº›Caddy2çš„å‚è€ƒèµ„æ–™ï¼š</p><p><a href="https://caddyserver.com/v2">https://caddyserver.com/v2</a></p><p><a href="https://caddyserver.com/docs/caddyfile/directives">https://caddyserver.com/docs/caddyfile/directives</a></p><p><a href="https://github.com/caddyserver/caddy/wiki">https://github.com/caddyserver/caddy/wiki</a></p><p><a href="https://caddy.community/">https://caddy.community/</a></p><h1 id="é…ç½®æœºå™¨"><a href="#é…ç½®æœºå™¨" class="headerlink" title="é…ç½®æœºå™¨"></a>é…ç½®æœºå™¨</h1><p><img src="/2020/07/21/Caddy2%E4%BD%BF%E7%94%A8%E5%9C%A8vue-history%E6%A8%A1%E5%BC%8F/1.png" alt></p><h1 id="å®‰è£…Caddy2"><a href="#å®‰è£…Caddy2" class="headerlink" title="å®‰è£…Caddy2"></a>å®‰è£…Caddy2</h1><p>ä¸‹è½½åœ°å€ï¼š<a href="https://github.com/caddyserver/caddy/releases">https://github.com/caddyserver/caddy/releases</a></p><p>è¿™é‡Œä¸‹çš„æ˜¯<a href="https://github.com/caddyserver/caddy/releases/download/v2.1.1/caddy_2.1.1_linux_amd64.tar.gz">https://github.com/caddyserver/caddy/releases/download/v2.1.1/caddy_2.1.1_linux_amd64.tar.gz</a></p><p>ä¸‹è½½åè§£å‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf caddy_2.1.1_linux_amd64.tar.xz</span><br></pre></td></tr></table></figure><p>ç§»åŠ¨åˆ°<code>/usr/local/bin</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv caddy /usr/local/bin</span><br></pre></td></tr></table></figure><p>è¾“å…¥å‘½ä»¤æ˜¾ç¤ºv2.1.1ç‰ˆæœ¬å·è¯æ˜å®‰è£…å®Œæˆ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">caddy version</span><br></pre></td></tr></table></figure><h1 id="é…ç½®systemctl"><a href="#é…ç½®systemctl" class="headerlink" title="é…ç½®systemctl"></a>é…ç½®systemctl</h1><p>ç”¨systemctlç®¡ç†Caddy2æ¯”è¾ƒæ–¹ä¾¿ï¼Œæ–¹ä¾¿å¼€æœºè‡ªå¯ï¼Œreloadæ–°çš„é…ç½®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> vim /lib/systemd/system/caddy.service</span></span><br><span class="line">[Unit]</span><br><span class="line">Description=Caddy</span><br><span class="line">Documentation=https://caddyserver.com/docs/</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">ExecStart=/usr/local/bin/caddy run --environ --config /usr/local/bin/Caddyfile</span><br><span class="line">ExecReload=/usr/local/bin/caddy reload --config /usr/local/bin/Caddyfile</span><br><span class="line">TimeoutStopSec=5s</span><br><span class="line">LimitNOFILE=1048576</span><br><span class="line">LimitNPROC=512</span><br><span class="line">PrivateTmp=true</span><br><span class="line">ProtectSystem=full</span><br><span class="line">AmbientCapabilities=CAP_NET_BIND_SERVICE</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™é‡Œæˆ‘æŠŠCaddyçš„é…ç½®æ–‡ä»¶Caddyfileä¹Ÿæ”¾åˆ°äº†<code>/usr/local/bin</code></p><p>æ¥ç€å°±å¯ä»¥ä½¿ç”¨<code>systemctl</code>ä¸€ç³»åˆ—æ“ä½œäº†</p><ul><li><p>å¼€å¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start caddy</span><br></pre></td></tr></table></figure></li><li><p>é‡å¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart caddy</span><br></pre></td></tr></table></figure></li><li><p>å¼€æœºè‡ªå¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable caddy</span><br></pre></td></tr></table></figure></li><li><p>å…³é—­å¼€æœºè‡ªå¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl disable caddy</span><br></pre></td></tr></table></figure></li><li><p>åœæ­¢</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop caddy</span><br></pre></td></tr></table></figure></li></ul><h1 id="é…åˆvue-router-historyæ¨¡å¼"><a href="#é…åˆvue-router-historyæ¨¡å¼" class="headerlink" title="é…åˆvue-router historyæ¨¡å¼"></a>é…åˆvue-router historyæ¨¡å¼</h1><p><a href="https://router.vuejs.org/zh/guide/essentials/history-mode.html">HTML5 History æ¨¡å¼ | Vue Router</a></p><p>å®˜æ–¹è¿™é‡Œç»™å‡ºçš„Caddyé…ç½®æ˜¯Caddy1çš„ï¼Œä½†æ˜¯Caddy2çš„é…ç½®å’ŒCaddy1çš„ä¸ä¸€æ ·</p><p><img src="/2020/07/21/Caddy2%E4%BD%BF%E7%94%A8%E5%9C%A8vue-history%E6%A8%A1%E5%BC%8F/2.png" alt></p><hr><p>ä¸‹é¢æ˜¯Caddy2çš„æ“ä½œ</p><ul><li><p>æ‰“åŒ…vueé¡¹ç›®ï¼Œå¾—åˆ°distæ–‡ä»¶å¤¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure></li><li><p>ç¼–è¾‘Caddyfile</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">:12345 &#123;</span><br><span class="line">        root * /root/gluten/dist</span><br><span class="line">        file_server</span><br><span class="line">        encode zstd gzip</span><br><span class="line">        try_files &#123;path&#125;  /index.html</span><br><span class="line">        log &#123;</span><br><span class="line">                output file /root/gluten/caddy_log</span><br><span class="line">                format single_field common_log</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œéœ€è¦æ³¨æ„å‡ ç‚¹ï¼š</p><ul><li>é…ç½®åä½¿ç”¨<code>localhost:12345</code>å°±å¯ä»¥æ‰“å¼€ç½‘é¡µï¼Œä½¿ç”¨çš„æ˜¯http</li><li>vue-router historyæ¨¡å¼Caddy1çš„<code>rewrite</code>åœ¨Caddyä¸­åº”è¯¥ç”¨<code>try_files</code>ï¼Œé…ç½®ä¸å¯¹çš„è¯å‡ºç°çš„é—®é¢˜å¯èƒ½æœ‰æ‰“å¼€é¡µé¢404ï¼Œåˆ·æ–°é¡µé¢404æˆ–è€…ç©ºç™½</li></ul></li><li><p>é‡æ–°åŠ è½½é…ç½®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart caddy</span><br></pre></td></tr></table></figure></li></ul><p>å‚è€ƒï¼š</p><p><a href="https://amattn.com/p/vuejs_vue-routers_history_mode_and_caddy2.html">https://amattn.com/p/vuejs_vue-routers_history_mode_and_caddy2.html</a></p><p><a href="https://caddy.community/t/rewrite-rule-for-vue-apps-in-caddy-v2/8438">https://caddy.community/t/rewrite-rule-for-vue-apps-in-caddy-v2/8438</a></p><h1 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h1><p>Caddy2çš„å‚è€ƒèµ„æ–™è¿˜å°‘ï¼Œéœ€è¦ä¸æ–­æŸ¥æ‰¾èµ„æ–™</p><p>å¸Œæœ›æ­¤ç¯‡æ–‡ç« èƒ½å¸®åˆ°ä½ </p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> caddy </tag>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ElasticSearchåˆ†è¯å…¥é—¨</title>
      <link href="/2020/07/14/ElasticSearch%E5%88%86%E8%AF%8D%E5%85%A5%E9%97%A8/"/>
      <url>/2020/07/14/ElasticSearch%E5%88%86%E8%AF%8D%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<p>ESåˆ†è¯çŸ¥è¯†å°æ•´ç†</p><span id="more"></span><p><img src="/2020/07/14/ElasticSearch%E5%88%86%E8%AF%8D%E5%85%A5%E9%97%A8/0001.jpg" alt></p><p><img src="/2020/07/14/ElasticSearch%E5%88%86%E8%AF%8D%E5%85%A5%E9%97%A8/0002.jpg" alt="0002"></p><p><img src="/2020/07/14/ElasticSearch%E5%88%86%E8%AF%8D%E5%85%A5%E9%97%A8/0003.jpg" alt="0003"></p><p><img src="/2020/07/14/ElasticSearch%E5%88%86%E8%AF%8D%E5%85%A5%E9%97%A8/0004.jpg" alt="0004"></p><p><img src="/2020/07/14/ElasticSearch%E5%88%86%E8%AF%8D%E5%85%A5%E9%97%A8/0005.jpg" alt="0005"></p><p><img src="/2020/07/14/ElasticSearch%E5%88%86%E8%AF%8D%E5%85%A5%E9%97%A8/0006.jpg" alt="0006"></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ElasticSearch </tag>
            
            <tag> åˆ†è¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ElasticSearchå…¥é—¨</title>
      <link href="/2020/07/13/ElasticSearch%E5%85%A5%E9%97%A8/"/>
      <url>/2020/07/13/ElasticSearch%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<p>æ•´ç†ä¸‹çŸ¥ä¹æŸç¯‡æ–‡ç« </p><span id="more"></span><p>æ¬è¿æ•´ç†è‡³</p><p><a href="https://zhuanlan.zhihu.com/p/62892586">ç»ˆäºæœ‰äººæŠŠElasticsearchåŸç†è®²é€äº†ï¼ - çŸ¥ä¹</a></p><hr><p><img src="/2020/07/13/ElasticSearch%E5%85%A5%E9%97%A8/es(0" alt>_1.JPG)</p><p><img src="/2020/07/13/ElasticSearch%E5%85%A5%E9%97%A8/es(0" alt>_2.JPG)</p><p><img src="/2020/07/13/ElasticSearch%E5%85%A5%E9%97%A8/es(0" alt>_3.JPG)</p><p><img src="/2020/07/13/ElasticSearch%E5%85%A5%E9%97%A8/es(0" alt>_4.JPG)</p><p><img src="/2020/07/13/ElasticSearch%E5%85%A5%E9%97%A8/es(0" alt>_5.JPG)</p><p><img src="/2020/07/13/ElasticSearch%E5%85%A5%E9%97%A8/es(0" alt>_6.JPG)</p><p><img src="/2020/07/13/ElasticSearch%E5%85%A5%E9%97%A8/es(0" alt>_7.JPG)</p><p><img src="/2020/07/13/ElasticSearch%E5%85%A5%E9%97%A8/es(0" alt>_8.JPG)</p><p><img src="/2020/07/13/ElasticSearch%E5%85%A5%E9%97%A8/es(0" alt>_9.JPG)</p><p><img src="/2020/07/13/ElasticSearch%E5%85%A5%E9%97%A8/es(0" alt>_10.JPG)</p><p><img src="/2020/07/13/ElasticSearch%E5%85%A5%E9%97%A8/es(0" alt>_11.JPG)</p><p><img src="/2020/07/13/ElasticSearch%E5%85%A5%E9%97%A8/es(0" alt>_12.JPG)</p><p><img src="/2020/07/13/ElasticSearch%E5%85%A5%E9%97%A8/es(0" alt>_13.JPG)</p><p><img src="/2020/07/13/ElasticSearch%E5%85%A5%E9%97%A8/es(0" alt>_14.JPG)</p><p><img src="/2020/07/13/ElasticSearch%E5%85%A5%E9%97%A8/es(0" alt>_15.JPG)</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ElasticSearch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pandasåº“æ€»ç»“</title>
      <link href="/2020/07/11/pandas%E5%BA%93%E6%80%BB%E7%BB%93/"/>
      <url>/2020/07/11/pandas%E5%BA%93%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p>å¸¸è§ç”¨æ³•æ€»ç»“ï¼Œæ–¹ä¾¿æŸ¥æ‰¾</p><span id="more"></span><h1 id="è¯»å–"><a href="#è¯»å–" class="headerlink" title="è¯»å–"></a>è¯»å–</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read_csv</span>():</span></span><br><span class="line">    csv_path = sys.argv[<span class="number">1</span>]</span><br><span class="line">    is_file_empty = <span class="literal">False</span> <span class="keyword">if</span> os.path.isfile(csv_path) <span class="keyword">and</span> os.path.getsize(csv_path) &gt; <span class="number">0</span> <span class="keyword">else</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">if</span> is_file_empty:</span><br><span class="line">        <span class="keyword">raise</span> SystemExit(<span class="string">&#x27;File Empty&#x27;</span>)</span><br><span class="line">    <span class="comment"># æ•°æ®å¤§æ—¶å¯èƒ½æœ‰å†…å­˜æº¢å‡ºå±é™©</span></span><br><span class="line">    df = pd.read_excel(csv_path)</span><br><span class="line">    <span class="comment"># pd.read_excel(&#x27;a.xlsx&#x27;, sheet_name=&#x27;sheet_name&#x27;, encoding=&#x27;utf-8-sig&#x27;)</span></span><br><span class="line">    <span class="keyword">return</span> df</span><br></pre></td></tr></table></figure><h1 id="éå†"><a href="#éå†" class="headerlink" title="éå†"></a>éå†</h1><h2 id="æŒ‰è¡Œéå†iterrows"><a href="#æŒ‰è¡Œéå†iterrows" class="headerlink" title="æŒ‰è¡Œéå†iterrows"></a>æŒ‰è¡Œéå†iterrows</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> index, row <span class="keyword">in</span> df.iterrows():</span><br><span class="line"><span class="built_in">print</span>(index) <span class="comment"># è¾“å‡ºæ¯è¡Œçš„ç´¢å¼•å€¼</span></span><br><span class="line"><span class="built_in">print</span>(row[<span class="string">&#x27;æ¨¡å—&#x27;</span>])</span><br></pre></td></tr></table></figure><h2 id="æŒ‰è¡Œéå†apply"><a href="#æŒ‰è¡Œéå†apply" class="headerlink" title="æŒ‰è¡Œéå†apply"></a>æŒ‰è¡Œéå†apply</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">row_global_parameter</span>(<span class="params">df_row</span>):</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> df_row[<span class="string">&#x27;å¯ç”¨&#x27;</span>] == <span class="string">&#x27;å¦&#x27;</span>:</span><br><span class="line">        <span class="comment"># éå†æ¯ä¸€åˆ—ï¼Œvä¸ºè¯¥åˆ—çš„å€¼</span></span><br><span class="line">        <span class="keyword">for</span> i, v <span class="keyword">in</span> df_row.items():</span><br><span class="line">            <span class="keyword">if</span> i == <span class="string">&#x27;æ¨¡å—&#x27;</span>:</span><br><span class="line">                <span class="built_in">print</span>(v)</span><br><span class="line">                </span><br><span class="line"><span class="comment"># å¤„ç†æ¯ä¸€è¡Œï¼Œå°†æ¯ä¸€è¡Œæ”¾åˆ°row_global_parameterå¤„ç†</span></span><br><span class="line">df.apply(row_global_parameter, axis=<span class="number">1</span>)</span><br></pre></td></tr></table></figure><h2 id="ç‰¹å®šå‡ åˆ—éå†"><a href="#ç‰¹å®šå‡ åˆ—éå†" class="headerlink" title="ç‰¹å®šå‡ åˆ—éå†"></a>ç‰¹å®šå‡ åˆ—éå†</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">modules = df[<span class="string">&#x27;æ¨¡å—&#x27;</span>]</span><br><span class="line">names = df[<span class="string">&#x27;åå­—&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> module, name <span class="keyword">in</span> <span class="built_in">zip</span>(module, names):</span><br><span class="line">    <span class="built_in">print</span>(module)</span><br><span class="line">    <span class="built_in">print</span>(name)</span><br></pre></td></tr></table></figure><h1 id="åˆ›å»ºDataFrame"><a href="#åˆ›å»ºDataFrame" class="headerlink" title="åˆ›å»ºDataFrame"></a>åˆ›å»ºDataFrame</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">columns = [<span class="string">&#x27;æ¨¡å—&#x27;</span>, <span class="string">&#x27;åå­—&#x27;</span>]</span><br><span class="line">df = pd.DataFrame(columns=columns)</span><br><span class="line"></span><br><span class="line">data = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> data:</span><br><span class="line">    <span class="comment"># æ’å…¥ä¸€è¡Œ</span></span><br><span class="line">    df.loc[df.shape[<span class="number">0</span>]] = [item, item]</span><br></pre></td></tr></table></figure><h1 id="æ–°å¢åˆ—"><a href="#æ–°å¢åˆ—" class="headerlink" title="æ–°å¢åˆ—"></a>æ–°å¢åˆ—</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å€¼ä¸ºNoneï¼ˆé»˜è®¤å€¼ï¼‰æ—¶ï¼Œåªæœ‰åˆ—åï¼Œæ²¡æœ‰æ•°æ®</span></span><br><span class="line">data[<span class="string">&#x27;profession&#x27;</span>] = <span class="literal">None</span></span><br></pre></td></tr></table></figure><h1 id="nan"><a href="#nan" class="headerlink" title="nan"></a>nan</h1><h2 id="åˆ é™¤æ‰€æœ‰çš„nan"><a href="#åˆ é™¤æ‰€æœ‰çš„nan" class="headerlink" title="åˆ é™¤æ‰€æœ‰çš„nan"></a>åˆ é™¤æ‰€æœ‰çš„nan</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.dropna(axis=<span class="number">0</span>, how=<span class="string">&#x27;all&#x27;</span>, inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><h2 id="åˆ¤æ–­æ˜¯ä¸æ˜¯nan"><a href="#åˆ¤æ–­æ˜¯ä¸æ˜¯nan" class="headerlink" title="åˆ¤æ–­æ˜¯ä¸æ˜¯nan"></a>åˆ¤æ–­æ˜¯ä¸æ˜¯nan</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.isna(...)</span><br></pre></td></tr></table></figure><h2 id="æ›¿æ¢æ‰€æœ‰çš„nan"><a href="#æ›¿æ¢æ‰€æœ‰çš„nan" class="headerlink" title="æ›¿æ¢æ‰€æœ‰çš„nan"></a>æ›¿æ¢æ‰€æœ‰çš„nan</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.fillna(&#x27;&#x27;, inplace=True)</span><br></pre></td></tr></table></figure><h1 id="åˆå¹¶å»é‡"><a href="#åˆå¹¶å»é‡" class="headerlink" title="åˆå¹¶å»é‡"></a>åˆå¹¶å»é‡</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">df_list = [read_csv(), read_csv()]</span><br><span class="line">all_pf = pd.concat(df_list)</span><br><span class="line"></span><br><span class="line"><span class="comment"># éœ€è¦å»é‡å¤çš„åˆ—å é‡åˆ°é‡å¤çš„æ—¶ä¿ç•™ç¬¬ä¸€ä¸ªè¿˜æ˜¯ä¿ç•™æœ€åä¸€ä¸ª å»é™¤é‡å¤é¡¹ï¼Œè¿˜æ˜¯ä¿ç•™é‡å¤é¡¹çš„å‰¯æœ¬</span></span><br><span class="line">all_df.drop_duplicates([<span class="string">&#x27;æ¨¡å—&#x27;</span>], keep=<span class="string">&#x27;first&#x27;</span>, inplace=<span class="literal">True</span>)</span><br><span class="line">all_df.drop_duplicates(subset=[<span class="string">&#x27;æ¨¡å—&#x27;</span>, <span class="string">&#x27;æ¥å£&#x27;</span>], keep=<span class="string">&#x27;first&#x27;</span>, inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><h1 id="æ›´æ–°ä¸€ä¸ªsheetä¿æŒå…¶ä»–sheetå†…å®¹ä¸å˜"><a href="#æ›´æ–°ä¸€ä¸ªsheetä¿æŒå…¶ä»–sheetå†…å®¹ä¸å˜" class="headerlink" title="æ›´æ–°ä¸€ä¸ªsheetä¿æŒå…¶ä»–sheetå†…å®¹ä¸å˜"></a>æ›´æ–°ä¸€ä¸ªsheetä¿æŒå…¶ä»–sheetå†…å®¹ä¸å˜</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">update_sheet</span>(<span class="params">xlsx_file_path, update_sheet_name, df</span>):</span></span><br><span class="line">    <span class="comment"># update one sheet data, but keep other sheet data</span></span><br><span class="line">    book = load_workbook(xlsx_file_path)</span><br><span class="line">    writer = pd.ExcelWriter(xlsx_file_path, engine=<span class="string">&#x27;openpyxl&#x27;</span>)</span><br><span class="line">    writer.book = book</span><br><span class="line">    writer.sheets = <span class="built_in">dict</span>((ws.title, ws) <span class="keyword">for</span> ws <span class="keyword">in</span> book.worksheets)</span><br><span class="line">    df.to_excel(writer, update_sheet_name, index=<span class="literal">None</span>, encoding=<span class="string">&#x27;utf-8-sig&#x27;</span>)</span><br><span class="line">    writer.save()</span><br><span class="line">    writer.close()  </span><br></pre></td></tr></table></figure><h1 id="æ ¹æ®df-aåˆ é™¤df-bä¸€è¡Œ"><a href="#æ ¹æ®df-aåˆ é™¤df-bä¸€è¡Œ" class="headerlink" title="æ ¹æ®df_aåˆ é™¤df_bä¸€è¡Œ"></a>æ ¹æ®df_aåˆ é™¤df_bä¸€è¡Œ</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> index, row <span class="keyword">in</span> df_a.iterrows():</span><br><span class="line">    <span class="keyword">if</span> row[<span class="string">&#x27;æ¨¡å—&#x27;</span>] == <span class="string">&#x27;a&#x27;</span>:</span><br><span class="line">        <span class="comment"># drop rows from df_b that contains row[&#x27;æ¨¡å—&#x27;] string in a æ¨¡å— column</span></span><br><span class="line">        df_b = df_b[~df_b[<span class="string">&#x27;æ¨¡å—&#x27;</span>].isin([row[<span class="string">&#x27;æ¨¡å—&#x27;</span>]])]</span><br></pre></td></tr></table></figure><h1 id="åˆ›å»ºexcel"><a href="#åˆ›å»ºexcel" class="headerlink" title="åˆ›å»ºexcel"></a>åˆ›å»ºexcel</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">writer = pd.ExcelWriter(<span class="string">&#x27;excel/a.xlsx&#x27;</span>)</span><br><span class="line">df_a.to_excel(writer, sheet_name=<span class="string">&#x27;name1&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>, index=<span class="literal">None</span>)</span><br><span class="line">df_b.to_excel(writer, sheet_name=<span class="string">&#x27;name2&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>, index=<span class="literal">None</span>)</span><br><span class="line">df_c.to_excel(writer, sheet_name=<span class="string">&#x27;name3&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>, index=<span class="literal">None</span>)</span><br><span class="line">writer.save()</span><br><span class="line">writer.close()</span><br></pre></td></tr></table></figure><h1 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h1><h2 id="åˆ é™¤ç‰¹å®šæ•°å€¼çš„è¡Œ"><a href="#åˆ é™¤ç‰¹å®šæ•°å€¼çš„è¡Œ" class="headerlink" title="åˆ é™¤ç‰¹å®šæ•°å€¼çš„è¡Œ"></a>åˆ é™¤ç‰¹å®šæ•°å€¼çš„è¡Œ</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ é™¤ä»·æ ¼å°äº10000</span></span><br><span class="line">df = df[ df[<span class="string">&#x27;ä»·æ ¼&#x27;</span>] &gt; <span class="number">10000</span>]</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤æŸåˆ—åŒ…å«ç‰¹å®šå­—ç¬¦çš„è¡Œ"><a href="#åˆ é™¤æŸåˆ—åŒ…å«ç‰¹å®šå­—ç¬¦çš„è¡Œ" class="headerlink" title="åˆ é™¤æŸåˆ—åŒ…å«ç‰¹å®šå­—ç¬¦çš„è¡Œ"></a>åˆ é™¤æŸåˆ—åŒ…å«ç‰¹å®šå­—ç¬¦çš„è¡Œ</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[ ~ df[<span class="string">&#x27;æ¨¡å—&#x27;</span>].<span class="built_in">str</span>.contains(<span class="string">&#x27;a&#x27;</span>) ]</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤æŸä¸€åˆ—"><a href="#åˆ é™¤æŸä¸€åˆ—" class="headerlink" title="åˆ é™¤æŸä¸€åˆ—"></a>åˆ é™¤æŸä¸€åˆ—</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df = df.drop(<span class="string">&#x27;æ¨¡å—&#x27;</span>,axis=<span class="number">1</span>)</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤æŸä¸€è¡Œ"><a href="#åˆ é™¤æŸä¸€è¡Œ" class="headerlink" title="åˆ é™¤æŸä¸€è¡Œ"></a>åˆ é™¤æŸä¸€è¡Œ</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ é™¤ç¬¬3,4è¡Œï¼Œè¿™é‡Œä¸‹è¡¨ä»¥0å¼€å§‹ï¼Œå¹¶ä¸”æ ‡é¢˜è¡Œä¸ç®—åœ¨ç±»</span></span><br><span class="line">df = df.drop([<span class="number">2</span>, <span class="number">3</span>], axis=<span class="number">0</span>)</span><br></pre></td></tr></table></figure><h1 id="å¯¹æ¯”ä¸¤ä¸ªexcel"><a href="#å¯¹æ¯”ä¸¤ä¸ªexcel" class="headerlink" title="å¯¹æ¯”ä¸¤ä¸ªexcel"></a>å¯¹æ¯”ä¸¤ä¸ªexcel</h1><h2 id="æ‰¾å‡ºæ–°excel-æ–°å¢å’Œä¿®æ”¹-å’Œ-åˆ é™¤-çš„è¡Œ"><a href="#æ‰¾å‡ºæ–°excel-æ–°å¢å’Œä¿®æ”¹-å’Œ-åˆ é™¤-çš„è¡Œ" class="headerlink" title="æ‰¾å‡ºæ–°excel[æ–°å¢å’Œä¿®æ”¹]å’Œ[åˆ é™¤]çš„è¡Œ"></a>æ‰¾å‡ºæ–°excel[æ–°å¢å’Œä¿®æ”¹]å’Œ[åˆ é™¤]çš„è¡Œ</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">merged = old_df.merge(new_df, indicator=<span class="literal">True</span>, how=<span class="string">&#x27;outer&#x27;</span>)</span><br><span class="line">diff_new_df = merged[merged[<span class="string">&#x27;_merge&#x27;</span>] == <span class="string">&#x27;right_only&#x27;</span>]</span><br></pre></td></tr></table></figure><p>è¿™é‡Œ<code>merged</code>ç”¨çš„ä¸Šé¢é‚£ä¸ªï¼Œ<code>left_only</code>å…¶å®æ˜¯æ—§excelå¯¹æ¯”æ–°excelæ‰€æœ‰çš„æ—§æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å–ä¸€åˆ—ä¸ºæ ‡å‡†ç­›é€‰å‡ºæ¥ï¼Œä¹Ÿå°±è¯´é€‰å–é‚£ä¸€åˆ—çš„å€¼åœ¨æ—§çš„excelä¸­æœ‰ï¼Œæ–°çš„æ²¡æœ‰ï¼Œé‚£ä¹ˆæ—§ä»£è¡¨æ–°çš„excelä¸­åˆ é™¤äº†</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">left_only = merged[merged[<span class="string">&#x27;_merge&#x27;</span>] == <span class="string">&#x27;left_only&#x27;</span>]</span><br><span class="line">diff_delete_df = left_only[~left_only[<span class="string">&#x27;ç”¨ä¾‹åç§°&#x27;</span>].isin(diff_new_df[<span class="string">&#x27;ç”¨ä¾‹åç§°&#x27;</span>])]</span><br></pre></td></tr></table></figure><h2 id="åˆ†åˆ«æ‰¾å‡ºexcel-æ–°å¢-ä¿®æ”¹-åˆ é™¤-çš„è¡Œ"><a href="#åˆ†åˆ«æ‰¾å‡ºexcel-æ–°å¢-ä¿®æ”¹-åˆ é™¤-çš„è¡Œ" class="headerlink" title="åˆ†åˆ«æ‰¾å‡ºexcel[æ–°å¢] [ä¿®æ”¹] [åˆ é™¤]çš„è¡Œ"></a>åˆ†åˆ«æ‰¾å‡ºexcel[æ–°å¢] [ä¿®æ”¹] [åˆ é™¤]çš„è¡Œ</h2><p>è¿™é‡Œå¯¹ä¸€è¡Œæ•°æ®åˆ¤å®šå”¯ä¸€çš„æ ‡å‡†æ˜¯ç”¨aåˆ—å’Œbåˆ—</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">diff_added_df = new_df[</span><br><span class="line">            (~new_df.set_index([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>]).index.isin(outdated_df.set_index([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>]).index))]</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">diff_removed_df = outdated_df[</span><br><span class="line">            (~outdated_df.set_index([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>]).index.isin(new_df.set_index([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>]).index))]</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">diff_changed_df = pd.DataFrame(columns=diff_removed_df.columns)</span><br><span class="line">changed_rows = []</span><br><span class="line"><span class="keyword">for</span> index1, outdated_row <span class="keyword">in</span> outdated_df.iterrows():</span><br><span class="line">    <span class="keyword">for</span> index2, new_row <span class="keyword">in</span> new_df.iterrows():</span><br><span class="line">        <span class="comment"># pd.DataFrame.equals: The data type of columns of the two parameters must be the same before comparison</span></span><br><span class="line">        <span class="keyword">if</span> outdated_row[<span class="string">&#x27;a&#x27;</span>] == new_row[<span class="string">&#x27;a&#x27;</span>] <span class="keyword">and</span> outdated_row[<span class="string">&#x27;b&#x27;</span>] == new_row[</span><br><span class="line">            <span class="string">&#x27;b&#x27;</span>] <span class="keyword">and</span> <span class="keyword">not</span> pd.DataFrame.equals(outdated_row.drop(<span class="string">&#x27;ID&#x27;</span>),</span><br><span class="line">                                                new_row.drop(<span class="string">&#x27;ID&#x27;</span>)):</span><br><span class="line">            changed_rows.append(new_row.values)</span><br><span class="line">            diff_changed_df = diff_changed_df.append(</span><br><span class="line">                pd.DataFrame(changed_rows, columns=diff_changed_df.columns)).reset_index()</span><br></pre></td></tr></table></figure><h2 id="åˆ¤æ–­ä¸¤ä¸ªexcelæ˜¯å¦å­˜åœ¨é‡å¤è¡Œ"><a href="#åˆ¤æ–­ä¸¤ä¸ªexcelæ˜¯å¦å­˜åœ¨é‡å¤è¡Œ" class="headerlink" title="åˆ¤æ–­ä¸¤ä¸ªexcelæ˜¯å¦å­˜åœ¨é‡å¤è¡Œ"></a>åˆ¤æ–­ä¸¤ä¸ªexcelæ˜¯å¦å­˜åœ¨é‡å¤è¡Œ</h2><p>è¿™é‡Œå¯¹ä¸€è¡Œæ•°æ®åˆ¤å®šå”¯ä¸€çš„æ ‡å‡†æ˜¯ç”¨aåˆ—å’Œbåˆ—</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Check the table for duplicate data(ç”¨ä¾‹åç§° ç”¨ä¾‹ç›®å½• are the same at the same time)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_multiple_name_directory</span>(<span class="params">df</span>):</span></span><br><span class="line">    res = df[df.duplicated(subset=[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>], keep=<span class="literal">False</span>)]</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span> <span class="keyword">if</span> res.empty <span class="keyword">else</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure><h1 id="æ”¹å˜åˆ—å®½"><a href="#æ”¹å˜åˆ—å®½" class="headerlink" title="æ”¹å˜åˆ—å®½"></a>æ”¹å˜åˆ—å®½</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">writer = pd.ExcelWriter(outfile, engine=<span class="string">&#x27;xlsxwriter&#x27;</span>)</span><br><span class="line">df.to_excel(writer, sheet_name=sheet_name, index=<span class="literal">None</span>)</span><br><span class="line">_w = (<span class="number">10</span>, <span class="number">30</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">60</span>, <span class="number">30</span>, <span class="number">60</span>, <span class="number">20</span>, <span class="number">60</span>, <span class="number">20</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line"><span class="keyword">for</span> width, col <span class="keyword">in</span> <span class="built_in">zip</span>(_w, string.ascii_uppercase[:<span class="number">12</span>]):</span><br><span class="line">    writer.sheets[sheet_name].set_column(<span class="string">f&#x27;<span class="subst">&#123;col&#125;</span>:<span class="subst">&#123;col&#125;</span>&#x27;</span>, width)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pandas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue-admin-templateåŠ¨æ€è·¯ç”±</title>
      <link href="/2020/07/08/vue-admin-template%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1/"/>
      <url>/2020/07/08/vue-admin-template%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1/</url>
      
        <content type="html"><![CDATA[<p>vue-admin-templateåŠ¨æ€è·¯ç”±å¡«å‘</p><span id="more"></span><h1 id="éœ€æ±‚èƒŒæ™¯"><a href="#éœ€æ±‚èƒŒæ™¯" class="headerlink" title="éœ€æ±‚èƒŒæ™¯"></a>éœ€æ±‚èƒŒæ™¯</h1><p>ä¸æ¶‰åŠæƒé™ç®€å•è¦æ±‚åŠ¨æ€ä¾§è¾¹æ åŠ¨æ€åŠ è½½èœå•ï¼ˆè·¯ç”±ä¿¡æ¯è¯·æ±‚åå°ï¼‰ï¼Œç„¶åæ ¹æ®ä¸åŒçš„è·¯ç”±æ˜¾ç¤ºä¸åŒçš„è¡¨æ ¼æ•°æ®</p><p><img src="/2020/07/08/vue-admin-template%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1/1.png" alt></p><h1 id="vue-admin-templateåˆ·æ–°é€»è¾‘"><a href="#vue-admin-templateåˆ·æ–°é€»è¾‘" class="headerlink" title="vue-admin-templateåˆ·æ–°é€»è¾‘"></a>vue-admin-templateåˆ·æ–°é€»è¾‘</h1><p><img src="/2020/07/08/vue-admin-template%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1/2.png" alt></p><p>åœ¨<code>src\layout\components\Sidebar\index.vue</code>æ–‡ä»¶ä¸­ï¼Œæ¯ä¸ªitemæ˜¯æ ¹æ®è·¯ç”±çš„å…ƒä¿¡æ¯ï¼ˆä¸€ä¸ªæ•°ç»„ï¼‰å»æ¸²æŸ“çš„</p><p><img src="/2020/07/08/vue-admin-template%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1/3.png" alt></p><p>åœ¨<code>src\router\index.js</code>é…ç½®äº†é¡¹ç›®çš„åŸºæœ¬è·¯ç”±è¡¨ï¼Œå› ä¸ºè¿™ä¸ªæ¨¡æ¿æ˜¯ç®€å•æ¨¡æ¿ï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰å¸¦æƒé™è·¯ç”±è¡¨</p><p>é¡¹ç›®å¯åŠ¨åï¼Œè¿™é‡Œä¼šåˆ›å»ºè·¯ç”±è¡¨ï¼Œç„¶åç”±ä¸Šé¢<code>sidebar</code>æ¸²æŸ“ï¼Œæ³¨æ„è¿™é‡Œæ˜¯å¼‚æ­¥åˆ›å»ºè·¯ç”±è¡¨</p><p>æ ¹æ®ä¸Šé¢æ‰€çŸ¥ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦ä¿®æ”¹æ˜¾ç¤ºçš„ä¾§è¾¹æ ï¼Œæ˜¯ä¸æ˜¯ç›´æ¥ä¿®æ”¹<code>constantRoutes</code>å˜é‡å°±è¡Œäº†ï¼Ÿ</p><p>è¿™ä¸ªæ˜¯å¯ä»¥çš„ï¼Œåœ¨æ¸²æŸ“å‰å°†æƒ³è¦åŠ è½½çš„ä¾§è¾¹æ æ·»åŠ åˆ°å˜é‡é‡Œé¢ï¼Œç„¶åæ¸²æŸ“æ—¶å°±å¯ä»¥åŠ è½½äº†ï¼Œä½†æ˜¯æœ‰ä¸ªé—®é¢˜</p><p>è™½ç„¶å¯ä»¥æ˜¾ç¤ºäº†ï¼Œä½†æ˜¯ç‚¹å‡»åŠ¨æ€æ˜¾ç¤ºçš„ä¾§è¾¹æ åå†åˆ·æ–°ä¼šæ˜¾ç¤º404</p><h1 id="vue-routeråˆ·æ–°å404"><a href="#vue-routeråˆ·æ–°å404" class="headerlink" title="vue-routeråˆ·æ–°å404"></a>vue-routeråˆ·æ–°å404</h1><p>ç‚¹å‡»æ˜¾ç¤ºå‡ºæ¥çš„sub-menuå¯ä»¥è·³è½¬è¿›å¯¹åº”çš„è¡¨æ ¼ï¼Œä½†æ˜¯åœ¨å½“å‰è¡¨æ ¼é¡µé¢åˆ·æ–°å°±ä¼šè·³è½¬åˆ°404ï¼Œ<strong>å› ä¸ºåˆ·æ–°é¡µé¢<code>vuex</code>å’Œ<code>router</code>å®ä¾‹ä¼šé‡æ–°åˆå§‹åŒ–åˆ°åˆå§‹çŠ¶æ€ï¼Œæ‰€ä»¥æ–°å¢çš„åŠ¨æ€è·¯ç”±ä¼šè¢«åˆ·æ‰ï¼ˆé¡µé¢åˆ·æ–°çš„æ—¶å€™vuexä¸­çš„æ•°æ®å’Œrouterå®ä¾‹å¯¹è±¡ä¼šè¢«é‡æ–°åˆå§‹åŒ–ï¼‰</strong></p><p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®¾ç½®å…¨å±€è·¯ç”±å‰ç½®å®ˆå«<code>beforeEach(to, from. next)</code>ï¼Œç”¨æˆ·åˆ·æ–°é¡µé¢æ—¶ï¼ŒåŒ…æ‹¬åœ¨åŠ¨æ€è·¯ç”±é¡µé¢åˆ·æ–°é¡µé¢ï¼Œæ­¤æ—¶è§¦å‘<code>beforeEach()</code>ï¼Œå†ä½¿ç”¨<code>this.$router.addRoutes(this.userDynamicRouters)</code>å‘routerå¯¹è±¡ä¸­æ·»åŠ åŠ¨æ€è·¯ç”±ï¼Œä¹‹åæ‰§è¡Œå‰ç½®å®ˆå«çš„<code>next()</code>æ–¹æ³•è·³è½¬è·¯ç”±</p><p><a href="[https://router.vuejs.org/zh/guide/advanced/navigation-guards.html#%E5%85%A8%E5%B1%80%E5%89%8D%E7%BD%AE%E5%AE%88%E5%8D%AB](https://router.vuejs.org/zh/guide/advanced/navigation-guards.html#å…¨å±€å‰ç½®å®ˆå«">å¯¼èˆªå®ˆå« | Vue Router</a>)</p><h1 id="ç®€åŒ–ç‰ˆå®ç°"><a href="#ç®€åŒ–ç‰ˆå®ç°" class="headerlink" title="ç®€åŒ–ç‰ˆå®ç°"></a>ç®€åŒ–ç‰ˆå®ç°</h1><h2 id="è·å–è·¯ç”±æ•°æ®"><a href="#è·å–è·¯ç”±æ•°æ®" class="headerlink" title="è·å–è·¯ç”±æ•°æ®"></a>è·å–è·¯ç”±æ•°æ®</h2><p>å› ä¸ºéœ€æ±‚æ˜¯åŠ è½½ä¸€æ¬¡åŠ¨æ€è·¯ç”±å°±è¡Œäº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æå‰è·å–è·¯ç”±ä¿¡æ¯ï¼Œç„¶åä¿å­˜åˆ°<code>localStorage</code></p><p>æ³¨æ„<code>localStorage</code>åªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦åºåˆ—åŒ–ä¸€ä¸‹å†ä¿å­˜</p><p><img src="/2020/07/08/vue-admin-template%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1/4.png" alt></p><h2 id="åŠ¨æ€è·¯ç”±æ·»åŠ "><a href="#åŠ¨æ€è·¯ç”±æ·»åŠ " class="headerlink" title="åŠ¨æ€è·¯ç”±æ·»åŠ "></a>åŠ¨æ€è·¯ç”±æ·»åŠ </h2><p>å› ä¸º<code>vue-admin-template</code>åœ¨<code>permission.js</code>å·²ç»æœ‰è·¯ç”±å®ˆå«äº†ï¼Œæ‰€ä»¥ç›´æ¥åœ¨åŸåŸºç¡€ä¸Šé¢æ”¹å°±è¡Œ</p><p><img src="/2020/07/08/vue-admin-template%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1/5.png" alt></p><p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯39è¡Œï¼Œ404é¡µé¢çš„è·¯ç”±éœ€è¦åœ¨æœ€åé¢åŠ ï¼Œå¦åˆ™å¯ä»¥ä¼šå¯¼è‡´æå‰åŒ¹é…åˆ°404é¡µé¢ï¼ŒåŒç†ä¹‹å‰<code>src\router\index.js</code>çš„<code>constantRoutes</code>è·¯ç”±è¡¨éœ€è¦å»æ‰è¯¥ä¿¡æ¯</p><p>åŒæ—¶éœ€è¦æ³¨æ„åº”è¯¥å°†41è¡Œæ”¹ä¸º42è¡Œé‚£æ ·ï¼š</p><p>ç›´æ¥ <code>next()</code>ä¼šå‘ç° <code>addRoutes</code> å¯èƒ½è¿˜æ²¡æœ‰æŠŠæ‰€æœ‰è·¯ç”±éƒ½æˆåŠŸæŒ‚è½½ï¼Œå°†ä¼šçœ‹åˆ°ä¸€ä¸ªç©ºç™½é¡µï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰ï¼›ä½†æ˜¯åœ¨nextä¸­æ·»åŠ ä¸€ä¸ªåœ°å€ï¼Œä¼šä¸­æ–­å½“å‰çš„å¯¼èˆªï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¼èˆªï¼Œæ–°çš„å¯¼èˆªåœ¨å¼€å§‹æ—¶ä¼šç¡®è®¤routesï¼Œä»è€Œä¿è¯äº†addrouteså®Œæˆå¹¶ç”Ÿæ•ˆ</p><h2 id="å°†å­—ç¬¦ä¸²è½¬ä¸ºå¯¹åº”çš„ç»„ä»¶"><a href="#å°†å­—ç¬¦ä¸²è½¬ä¸ºå¯¹åº”çš„ç»„ä»¶" class="headerlink" title="å°†å­—ç¬¦ä¸²è½¬ä¸ºå¯¹åº”çš„ç»„ä»¶"></a>å°†å­—ç¬¦ä¸²è½¬ä¸ºå¯¹åº”çš„ç»„ä»¶</h2><p><img src="/2020/07/08/vue-admin-template%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1/6.png" alt></p><p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯è½¬æ¢éâ€™Layoutâ€™ç»„ä»¶çš„æ–¹æ³•ï¼Œ79é‚£é‡Œä¸èƒ½ç›´æ¥<code>route.component = ()=&gt; import(route.component)</code></p><p>æ˜¯å› ä¸ºå½“å¼‚æ­¥æ‰§è¡Œçš„æ—¶å€™ï¼Œ<code>router.component</code>å·²ç»æˆäº†ä¸€ä¸ªå‡½æ•°ï¼Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²äº†</p><p>è¿˜æœ‰ä¸€ä¸ªæ³¨æ„çš„åœ°æ–¹ï¼Œ90è¡Œè¿™é‡Œ<code>@/views/$&#123;view&#125;</code>ä¸€å®šå¾—æ˜¯è¿™ç§æ ¼å¼ï¼Œå¦åˆ™ä¼šæŠ¥404ï¼Œè¿™ä¸ªåŸå› æœªæ˜</p><h2 id="æ‹¼æ¥æ¸²æŸ“è·¯ç”±"><a href="#æ‹¼æ¥æ¸²æŸ“è·¯ç”±" class="headerlink" title="æ‹¼æ¥æ¸²æŸ“è·¯ç”±"></a>æ‹¼æ¥æ¸²æŸ“è·¯ç”±</h2><p><img src="/2020/07/08/vue-admin-template%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1/7.png" alt></p><p>æœ€åæ¸²æŸ“æ—¶ï¼ŒåŸºç¡€è·¯ç”±å’ŒåŠ¨æ€è·¯ç”±åˆå¹¶</p><h2 id="è¯·æ±‚ä¸åŒçš„æ•°æ®"><a href="#è¯·æ±‚ä¸åŒçš„æ•°æ®" class="headerlink" title="è¯·æ±‚ä¸åŒçš„æ•°æ®"></a>è¯·æ±‚ä¸åŒçš„æ•°æ®</h2><p>å¯ä»¥ç”±<code>this.$route.name</code>å»è·å–å¯¹åº”çš„routeåå­—ï¼Œä»è€Œå‘ä¸åŒè¯·æ±‚è·å–ä¸åŒçš„æ•°æ®æ¸²æŸ“</p><hr><p>å‚è€ƒï¼š</p><p><a href="https://www.cnblogs.com/fqh123/p/11094296.html">vue-element-adminç™»å½•é€»è¾‘ï¼Œä»¥åŠåŠ¨æ€æ·»åŠ è·¯ç”±ï¼Œæ˜¾ç¤ºä¾§è¾¹æ  - å¤å¢©å¤å¢© - åšå®¢å›­</a></p><p><a href="https://forum.vuejs.org/t/vue-router-3-0-1-router-addroutes/33181/6">Vue-router-3.0.1 ä½¿ç”¨router.addRoutes()è®¾ç½®åŠ¨æ€è·¯ç”±ï¼Œé¡µé¢åˆ·æ–°åæ— æ•ˆ - ä¸­æ–‡ - Vue Forum</a></p><p><a href="https://github.com/PanJiaChen/vue-element-admin/issues/817">å¤§ç¥ æˆ‘è¿™ä¸ªåœ°æ–¹è¿™ä¹ˆå†™æ€ä¹ˆä¼šæ­»å¾ªç¯å‘¢ Â· Issue #817 Â· PanJiaChen/vue-element-admin</a></p><p><a href="https://www.cnblogs.com/langhaoabcd/p/11346227.html">vue-element-admin å®ç°åŠ¨æ€è·¯ç”±(ä»åå°æŸ¥è¯¢å‡ºèœå•åˆ—è¡¨ç»‘å®šä¾§è¾¹æ ) - èƒ¡æ¤’é¢ - åšå®¢å›­</a></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> åŠ¨æ€è·¯ç”± </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaæ‰§è¡ŒShellå‘½ä»¤ç¬”è®°</title>
      <link href="/2020/06/06/Java%E6%89%A7%E8%A1%8CShell%E5%91%BD%E4%BB%A4%E7%AC%94%E8%AE%B0/"/>
      <url>/2020/06/06/Java%E6%89%A7%E8%A1%8CShell%E5%91%BD%E4%BB%A4%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>ProcessBuilderç±»æµ…æä»¥åŠLinux Shellæ‰§è¡Œé€»è¾‘</p><span id="more"></span><p>ä»Javaä»£ç è¿è¡ŒShellå‘½ä»¤æœ‰ä¸¤ç§æ–¹å¼</p><ul><li>ä½¿ç”¨<code>Runtime</code>ç±»çš„<code>exec</code>æ–¹æ³•</li><li>ç¬¬äºŒç§æ˜¯ä½¿ç”¨<code>ProcessBuilder</code>ç±»</li></ul><p>ä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•èƒ½å¤Ÿå®šåˆ¶æ›´å¤šçš„å†…å®¹ï¼Œæœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯ç¬¬äºŒç§ï¼Œç¬¬ä¸€ç§ä»‹ç»ä¸‹ç”¨æ³•</p><p>ç¯å¢ƒçº¦å®šï¼š</p><ul><li><code>Arch Linux x86_64 Linux 5.4.44-1-lts</code></li><li><code>java version &quot;1.8.0_251&quot; Java HotSpot(TM) 64-Bit Server VM (build 25.251-b08, mixed mode)</code></li></ul><h2 id="Runtime"><a href="#Runtime" class="headerlink" title="Runtime"></a>Runtime</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">runTime</span><span class="params">()</span> <span class="keyword">throws</span> IOException, InterruptedException </span>&#123;</span><br><span class="line">    <span class="comment">//åœ¨å•ç‹¬çš„è¿›ç¨‹ä¸­æ‰§è¡ŒæŒ‡å®šçš„å­—ç¬¦ä¸²å‘½ä»¤ï¼ˆäº§ç”Ÿä¸€ä¸ªæ–°çš„å­è¿›ç¨‹ï¼‰</span></span><br><span class="line">    Process process = Runtime.getRuntime().exec(<span class="string">&quot;ls -al&quot;</span>);</span><br><span class="line">    <span class="comment">//å°†InputStreamä¸­çš„å†…å®¹è½¬æˆå­—ç¬¦ä¸²</span></span><br><span class="line">    String s = IoUtil.read(process.getInputStream(), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    System.out.println(s);</span><br><span class="line">    <span class="comment">//ä½¿å½“å‰çº¿ç¨‹ç­‰å¾…ï¼Œç›´åˆ°æ­¤Processå¯¹è±¡è¡¨ç¤ºçš„è¿›ç¨‹ç»ˆæ­¢</span></span><br><span class="line">    <span class="comment">//å¦‚æœå­è¿›ç¨‹å·²ç»ç»ˆæ­¢ï¼Œåˆ™æ­¤æ–¹æ³•ç«‹å³è¿”å›ã€‚ å¦‚æœå­è¿›ç¨‹å°šæœªç»ˆæ­¢ï¼Œåˆ™è°ƒç”¨çº¿ç¨‹å°†è¢«é˜»å¡ï¼Œç›´åˆ°å­è¿›ç¨‹é€€å‡º</span></span><br><span class="line">    <span class="comment">//åœ¨è¯»å–è¾“å‡ºä¹‹åæ‰è°ƒç”¨process.waitForï¼ˆï¼‰ï¼Œå› ä¸ºè¾“å‡ºç¼“å†²åŒºå¯èƒ½ä¼šä½¿è¿›ç¨‹åœæ­¢</span></span><br><span class="line">    <span class="keyword">int</span> exitCode = process.waitFor();</span><br><span class="line">    System.out.println(<span class="string">&quot;exitCode: &quot;</span> + exitCode);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2020/06/06/Java%E6%89%A7%E8%A1%8CShell%E5%91%BD%E4%BB%A4%E7%AC%94%E8%AE%B0/1.png" alt></p><p>ä¸€ä¸ªå¾ˆç®€å•çš„ä¾‹å­ï¼Œæ‰§è¡Œ<code>ls -al</code>å‘½ä»¤è·å–é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ä¿¡æ¯</p><p>æŸ¥çœ‹æºç ï¼Œåœ¨JDK1.0çš„æ—¶å€™å°±æä¾›ï¼Œä½¿ç”¨å•ä¾‹æ¨¡å¼è¿”å›ä¸€ä¸ªRuntimeå¯¹è±¡</p><p><img src="/2020/06/06/Java%E6%89%A7%E8%A1%8CShell%E5%91%BD%E4%BB%A4%E7%AC%94%E8%AE%B0/2.png" alt></p><p>åœ¨<code>exec</code>æ–¹æ³•ä¸­ï¼Œå®é™…æœ€ç»ˆä¹Ÿæ˜¯è°ƒç”¨äº†<code>ProcessBuilder</code>è¿™ä¸ªç±»å»æ‰§è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬ç ”ç©¶<code>ProcessBuilderå³å¯</code></p><p><img src="/2020/06/06/Java%E6%89%A7%E8%A1%8CShell%E5%91%BD%E4%BB%A4%E7%AC%94%E8%AE%B0/3.png" alt></p><h2 id="ProcessBuilder"><a href="#ProcessBuilder" class="headerlink" title="ProcessBuilder"></a>ProcessBuilder</h2><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><ol><li>æ­¤ç±»ç”¨äºåˆ›å»ºæ“ä½œç³»ç»Ÿè¿›ç¨‹</li><li>å‘½ä»¤çš„æœ‰æ•ˆæ€§å–å†³äºæ“ä½œç³»ç»Ÿ</li><li>æ­¤ç±»<strong>æœªåŒæ­¥</strong>ã€‚ å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ProcessBuilderå®ä¾‹ï¼Œå¹¶ä¸”è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨ç»“æ„ä¸Šä¿®æ”¹äº†å…¶ä¸­ä¸€ä¸ªå±æ€§ï¼Œåˆ™å¿…é¡»åœ¨å¤–éƒ¨å¯¹å…¶è¿›è¡ŒåŒæ­¥</li></ol><h3 id="ç®€å•ä½¿ç”¨"><a href="#ç®€å•ä½¿ç”¨" class="headerlink" title="ç®€å•ä½¿ç”¨"></a>ç®€å•ä½¿ç”¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">processBuilder</span><span class="params">()</span> <span class="keyword">throws</span> IOException, InterruptedException </span>&#123;</span><br><span class="line">    <span class="comment">//å‚æ•°å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºæ’åˆ—</span></span><br><span class="line">    Process process = <span class="keyword">new</span> ProcessBuilder(<span class="string">&quot;ls&quot;</span>, <span class="string">&quot;-al&quot;</span>).start();</span><br><span class="line">    String s = IoUtil.read(process.getInputStream(), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    System.out.println(s);</span><br><span class="line">    <span class="keyword">int</span> exitCode = process.waitFor();</span><br><span class="line">    System.out.println(<span class="string">&quot;exitCode: &quot;</span> + exitCode);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ä¼ å…¥çš„å‘½ä»¤æ˜¯åˆ†å‰²åçš„ï¼Œæ ¼å¼<code>new ProcessBuilder(&quot;cmd&quot;, &quot;arg1&quot;, &quot;arg2&quot;, ...);</code></p><p>å¦‚æœå‘½ä»¤å¤ªé•¿ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>split()</code>æ–¹æ³•åˆ†å‰²ï¼Œæˆ–è€…æ˜¯ä½¿ç”¨<code>bash -c</code>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.command(<span class="string">&quot;/usr/bin/java -Djava.library.path=/Users/myusername/myproject/lib/DynamoDBLocal_lib/ -jar /Users/myusername/myproject/lib/DynamoDBLocal.jar  -sharedDb&quot;</span>.split(<span class="string">&quot;\\s+&quot;</span>)).start();</span><br><span class="line"></span><br><span class="line">.command(<span class="string">&quot;bash&quot;</span>, <span class="string">&quot;-c&quot;</span>, <span class="string">&quot;/usr/bin/java -Djava.library.path=/Users/myusername/myproject/lib/DynamoDBLocal_lib/ -jar /Users/myusername/myproject/lib/DynamoDBLocal.jar  -sharedDb&quot;</span>.split(<span class="string">&quot;\\s+&quot;</span>)).start();</span><br></pre></td></tr></table></figure><h3 id="å„ä¸ªå®ä¾‹ç¯å¢ƒå˜é‡ç‹¬ç«‹"><a href="#å„ä¸ªå®ä¾‹ç¯å¢ƒå˜é‡ç‹¬ç«‹" class="headerlink" title="å„ä¸ªå®ä¾‹ç¯å¢ƒå˜é‡ç‹¬ç«‹"></a>å„ä¸ªå®ä¾‹ç¯å¢ƒå˜é‡ç‹¬ç«‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">processBuilder</span><span class="params">()</span> <span class="keyword">throws</span> IOException, InterruptedException </span>&#123;</span><br><span class="line">    ProcessBuilder processBuilder = <span class="keyword">new</span> ProcessBuilder();</span><br><span class="line">    <span class="comment">//è¿”å›æ­¤ProcessBuilderæ‰§è¡Œå‘½ä»¤æ—¶ä½¿ç”¨çš„ç¯å¢ƒå˜é‡</span></span><br><span class="line">    processBuilder.environment().forEach(((key, value) -&gt; System.out.println(key + value)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PATH: /usr/local/sbin:/usr/local/bin:/usr/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl</span><br><span class="line">XAUTHORITY: /home/cc/.Xauthority</span><br><span class="line">XDG_DATA_DIRS: /usr/local/share:/usr/share</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>åˆ›å»ºæ—¶ProcessBuilderæ—¶ï¼Œè¯¥å€¼éƒ½ä¼šåˆå§‹åŒ–ä¸ºå½“å‰ç¯å¢ƒå˜é‡çš„å‰¯æœ¬ï¼Œæ¯ä¸ªProcessBuilderå®ä¾‹å§‹ç»ˆåŒ…å«ç‹¬ç«‹çš„ç¯å¢ƒä¸­ï¼Œå¯¹æ¯ä¸ªProcessBuilderå®ä¾‹ä¿®æ”¹ç¯å¢ƒå˜é‡å¹¶ä¸ä¼šå½±å“åˆ°åˆ«çš„ProcessBuilderå®ä¾‹è·å–åˆ°çš„ç¯å¢ƒå˜é‡çš„å€¼</p><p><img src="/2020/06/06/Java%E6%89%A7%E8%A1%8CShell%E5%91%BD%E4%BB%A4%E7%AC%94%E8%AE%B0/4.png" alt></p><p>ä»ä¸Šé¢æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œæ¯æ¬¡è¿”å›çš„éƒ½æ˜¯ä¸€ä¸ª<code>clone()</code>åçš„å¯¹è±¡</p><p><code>environ()</code>æ˜¯ä¸ªnativeæ–¹æ³•ï¼Œè¿”å›çš„æ˜¯æˆ‘ä»¬ä¸Šé¢æ‰“å°å‡ºæ¥çš„é‚£äº›ç¯å¢ƒå˜é‡</p><p><code>ProcessEnvironment</code>ç±»æœ‰ä¸ª<code>String getenv(String name)</code>æ–¹æ³•</p><p><img src="/2020/06/06/Java%E6%89%A7%E8%A1%8CShell%E5%91%BD%E4%BB%A4%E7%AC%94%E8%AE%B0/5.png" alt></p><p>æ ¹æ®keyè¿”å›<code>theUnmodifiableEnvironment</code>é‡Œé¢å¯¹åº”çš„å€¼ï¼Œä»ä¸Šé¢çš„å›¾å¯ä»¥çœ‹å‡ºï¼Œ<code>theUnmodifiableEnvironment</code>å­˜å‚¨çš„åº”è¯¥æ˜¯ç¯å¢ƒå˜é‡ï¼ŒåŠ ä¸Šæ³¨é‡Šè¯´è¯¥æ–¹æ³•ä»…ç”¨äº<code>System.getenv(String)</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨è¯¥æ–¹æ³•è·å–ç¯å¢ƒå˜é‡</p><hr><h3 id="ä¿®æ”¹ç¯å¢ƒå˜é‡"><a href="#ä¿®æ”¹ç¯å¢ƒå˜é‡" class="headerlink" title="ä¿®æ”¹ç¯å¢ƒå˜é‡"></a>ä¿®æ”¹ç¯å¢ƒå˜é‡</h3><p><strong>æ³¨æ„ï¼Œè¿™é‡Œä¿®æ”¹çš„æ˜¯å¯åŠ¨æ–°è¿›ç¨‹çš„ç¯å¢ƒå˜é‡ï¼Œå½“æˆ‘ä»¬ä¿®æ”¹æ—¶åæ–°çš„è¿›ç¨‹è¿˜æ²¡æœ‰å¯åŠ¨ï¼Œæ‰€ä»¥æˆ‘ä»¬commandé‡Œé¢çš„å¯æ‰§è¡Œç¨‹åºä¼šåœ¨å½“å‰çš„PATHä¸­æ‰¾ï¼Œä¹Ÿå°±æ˜¯è¯´æ‰§è¡Œé¡ºåºæ˜¯å…ˆæ‰¾åˆ°å¯æ‰§è¡Œç¨‹åºï¼Œå†ä¼ é€’æˆ‘ä»¬ä¿®æ”¹åçš„ç¯å¢ƒå˜é‡ç»™å®ƒã€‚</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">processBuilder</span><span class="params">()</span> <span class="keyword">throws</span> IOException, InterruptedException </span>&#123;</span><br><span class="line">    ProcessBuilder processBuilder = <span class="keyword">new</span> ProcessBuilder();</span><br><span class="line">    processBuilder.command(<span class="string">&quot;/home/cc/sofeware/node/bin/w2&quot;</span>, <span class="string">&quot;help&quot;</span>);</span><br><span class="line">    processBuilder.environment().put(<span class="string">&quot;PATH&quot;</span>,</span><br><span class="line">                                     <span class="string">&quot;/home/cc/sofeware/node/bin/&quot;</span> + File.pathSeparator + System.getenv(<span class="string">&quot;PATH&quot;</span>));</span><br><span class="line">    Process process = processBuilder.start();</span><br><span class="line">    String s = IoUtil.read(process.getInputStream(), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    System.out.println(s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä¸»è¦ä½œç”¨æ˜¯æ·»åŠ äº†<code>/home/cc/sofeware/node/bin/</code>ç¯å¢ƒå˜é‡ï¼Œ<code>File.pathSeparator</code>å€¼å®é™…ä¸º<code>:</code>ï¼Œè¿™æ ·æˆ‘ä»¬å°±ç­‰äºç»™å…ˆè·å¾—å½“å‰ç¯å¢ƒå˜é‡ï¼Œç„¶åæŠŠæˆ‘ä»¬æƒ³è¦æ·»åŠ çš„ç¯å¢ƒå˜é‡é€šè¿‡<code>:</code>è¿æ¥è¿›è€Œæ·»åŠ åˆ°<code>PATH</code></li><li><code>w2</code>ç¨‹åºä¾èµ–äº†<code>node.js</code>ï¼Œ<code>node.js</code>ä½äº<code>/home/cc/sofeware/node/bin/</code>ï¼Œæ‰€ä»¥å¾—ç»™åŠ ä¸ŠPATHåŠ ä¸Šè¯¥å˜é‡ï¼Œä»¥ä¾¿<code>w2</code>ç¨‹åºè¿è¡Œæ—¶èƒ½å¤Ÿä»<code>PATH</code>ä¸­æ‰¾åˆ°<code>node.js</code></li></ul><p>FAQ:</p><ol><li><p><code>command(&quot;/home/cc/sofeware/node/bin/w2&quot;)</code>èƒ½ä¸èƒ½æ”¹ä¸º<code>command(&quot;w2&quot;)</code>ï¼Œå› ä¸º<code>w2</code>ä¹Ÿåœ¨<code>/home/cc/sofeware/node/bin/</code></p><p>ä¸è¡Œçš„ï¼Œå› ä¸ºè¿™é‡Œæ˜¯ç”¨Javaç¨‹åºçš„ç¯å¢ƒå˜é‡å»æ‰§è¡Œçš„w2ï¼Œè‡ªç„¶æ˜¯æ‰¾ä¸åˆ°w2ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Shellå»æ‰§è¡Œï¼Œå› ä¸ºå½“å‰PATHæ˜¯æœ‰bashçš„ç¯å¢ƒå˜é‡ï¼Œå½“bashå¯åŠ¨åï¼Œæ–°çš„PATHä¼šä¼ é€’ç»™bashï¼Œç„¶åbashå°±å¯ä»¥æ‰¾åˆ°w2</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">processBuilder.command(<span class="string">&quot;bash&quot;</span>, <span class="string">&quot;-c&quot;</span>, <span class="string">&quot;w2 stop -D /home/cc/test/whistle/config1&quot;</span>);</span><br></pre></td></tr></table></figure><p><code>-c</code>ï¼š<a href="https://www.jianshu.com/p/198d819d24d1">bash -c æ³¨æ„äº‹é¡¹ - ç®€ä¹¦</a></p><p>æˆ–è€…æ˜¯æˆ‘ä»¬å¯ä»¥æ”¹å˜ProcessBuilderçš„å·¥ä½œç›®å½•ï¼Œç„¶åç”¨<code>./w2</code>å¯åŠ¨ï¼Œ<code>./</code>è¡¨ç¤ºå½“å‰ç›®å½•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ProcessBuilder pb = <span class="keyword">new</span> ProcessBuilder(<span class="string">&quot;./w2&quot;</span>, <span class="string">&quot;help&quot;</span>);</span><br><span class="line">pb.directory(<span class="keyword">new</span> File(<span class="string">&quot;/home/cc/sofeware/node/bin/&quot;</span>));</span><br></pre></td></tr></table></figure></li></ol><h3 id="ä½¿ç”¨ä¿®æ”¹åçš„å·¥ä½œç›®å½•å¯åŠ¨è¿›ç¨‹"><a href="#ä½¿ç”¨ä¿®æ”¹åçš„å·¥ä½œç›®å½•å¯åŠ¨è¿›ç¨‹" class="headerlink" title="ä½¿ç”¨ä¿®æ”¹åçš„å·¥ä½œç›®å½•å¯åŠ¨è¿›ç¨‹"></a>ä½¿ç”¨ä¿®æ”¹åçš„å·¥ä½œç›®å½•å¯åŠ¨è¿›ç¨‹</h3><p>é»˜è®¤å€¼æ˜¯å½“å‰è¿›ç¨‹çš„å½“å‰å·¥ä½œç›®å½•ï¼Œé€šå¸¸æ˜¯ç”±ç³»ç»Ÿå±æ€§<code>user.dir</code>å‘½åçš„ç›®å½•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">processBuilder</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    ProcessBuilder processBuilder = <span class="keyword">new</span> ProcessBuilder();</span><br><span class="line">    processBuilder.command(<span class="string">&quot;ls&quot;</span>);</span><br><span class="line">    processBuilder.directory(<span class="keyword">new</span> File(<span class="string">&quot;/home/cc&quot;</span>));</span><br><span class="line">    Process process = processBuilder.start();</span><br><span class="line">    String s = IoUtil.read(process.getInputStream(), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    System.out.println(s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¨‹åºæˆ‘ä»¬å°†å·¥ä½œç›®å½•æ”¹ä¸º<code>/home/cc</code></p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦æ‰§è¡ŒæŸä¸ªæ–‡ä»¶å¤¹ä¸‹çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼šå…ˆä½¿ç”¨<code>directory</code>æ–¹æ³•å®šä½åˆ°è¯¥æ–‡ä»¶å¤¹ï¼Œç„¶åä½¿ç”¨<code>command</code>å‘½ä»¤å»æ‰§è¡Œï¼Œè¿™æ ·æ˜¯ä¸è¡Œçš„ã€‚</p><p>å› ä¸ºcommandä¼šä»ç¯å¢ƒå˜é‡ä¸­æ‰¾ï¼Œè€Œä¸æ˜¯å½“å‰ç›®å½•ï¼Œå¦‚æœè¦ä½¿ç”¨ï¼Œè®°å¾—åŠ <code>./</code>è¡¨ç¤ºå½“å‰ç›®å½•</p><h3 id="é‡å®šå‘æ ‡å‡†è¾“å…¥å’Œè¾“å‡º"><a href="#é‡å®šå‘æ ‡å‡†è¾“å…¥å’Œè¾“å‡º" class="headerlink" title="é‡å®šå‘æ ‡å‡†è¾“å…¥å’Œè¾“å‡º"></a>é‡å®šå‘æ ‡å‡†è¾“å…¥å’Œè¾“å‡º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Process processBuilder = <span class="keyword">new</span> ProcessBuilder(<span class="string">&quot;ls&quot;</span>, <span class="string">&quot;-l&quot;</span>)</span><br><span class="line">    .redirectOutput(<span class="keyword">new</span> File(<span class="string">&quot;/home/cc/ProcessBuilder.log&quot;</span>))</span><br><span class="line">    .start();</span><br></pre></td></tr></table></figure><p>ä¸Šé¢æ˜¯é‡å®šå‘ç»“æœè¾“å‡ºåˆ°æ–‡æœ¬ä¸­ï¼Œå†…å®¹ä¼šè¦†ç›–</p><p>è¿½åŠ åˆ°æ—¥å¿—æ–‡ä»¶è€Œä¸æ˜¯æ¯æ¬¡åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶æ—¶ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Process processBuilder = <span class="keyword">new</span> ProcessBuilder(<span class="string">&quot;ls&quot;</span>, <span class="string">&quot;-l&quot;</span>)</span><br><span class="line">    .redirectOutput(ProcessBuilder.Redirect.appendTo(<span class="keyword">new</span> File(<span class="string">&quot;/home/cc/ProcessBuilder.log&quot;</span>)))</span><br><span class="line">    .start();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>ä¸Šé¢éƒ½ä¸åŒ…æ‹¬é”™è¯¯è¾“å‡ºï¼Œè¾“å‡ºé”™è¯¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Process processBuilder = <span class="keyword">new</span> ProcessBuilder(<span class="string">&quot;ls&quot;</span>, <span class="string">&quot;-l&quot;</span>).redirectErrorStream(<span class="keyword">true</span>)</span><br></pre></td></tr></table></figure><p><strong>å¦‚æœ‰ä»»ä½•é”™è¯¯ï¼Œé”™è¯¯è¾“å‡ºå°†åˆå¹¶åˆ°æ­£å¸¸è¿‡ç¨‹è¾“å‡ºæ–‡ä»¶ä¸­</strong></p><p>ä¹Ÿå¯ä»¥é”™è¯¯è¾“å‡ºå’Œå†…å®¹è¾“å‡ºå®šä½åˆ°ä¸åŒæ–‡æœ¬</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Process processBuilder = <span class="keyword">new</span> ProcessBuilder(<span class="string">&quot;ls&quot;</span>, <span class="string">&quot;-l&quot;</span>)</span><br><span class="line">    .redirectErrorStream(<span class="keyword">true</span>)</span><br><span class="line">    .redirectOutput((<span class="keyword">new</span> File(<span class="string">&quot;/home/cc/ProcessBuilder.log&quot;</span>)))</span><br><span class="line">    .redirectError(<span class="keyword">new</span> File(<span class="string">&quot;/home/cc/ProcessBuilder_error.log&quot;</span>))</span><br><span class="line">    .start();</span><br></pre></td></tr></table></figure><hr><p>å‚è€ƒï¼š</p><p><a href="https://www.baeldung.com/run-shell-command-in-java">How to Run a Shell Command in Java | Baeldung</a></p><p><a href="https://www.baeldung.com/java-lang-processbuilder-api">Guide to java.lang.ProcessBuilder API | Baeldung</a></p><p><a href="https://blog.csdn.net/Pengjx2014/article/details/78607192">langåŒ…æºç è§£è¯»ä¹‹ProcessBuilder_å‡Œéœ„çš„ä¸“æ -CSDNåšå®¢_processbuilderåŒ…</a></p><h2 id="Linux-Shellæ‰§è¡Œé€»è¾‘"><a href="#Linux-Shellæ‰§è¡Œé€»è¾‘" class="headerlink" title="Linux Shellæ‰§è¡Œé€»è¾‘"></a>Linux Shellæ‰§è¡Œé€»è¾‘</h2><h3 id="ä»€ä¹ˆæ˜¯Shell"><a href="#ä»€ä¹ˆæ˜¯Shell" class="headerlink" title="ä»€ä¹ˆæ˜¯Shell"></a>ä»€ä¹ˆæ˜¯Shell</h3><p>Shellæ˜¯ç”¨æˆ·ä¸æ“ä½œç³»ç»Ÿçš„æ¥å£ï¼Œæ˜¯æ“ä½œç³»ç»Ÿçš„æœ€å¤–å±‚ã€‚Shellç»“åˆäº†ä¸€ç§ç¼–ç¨‹è¯­è¨€æ¥æ§åˆ¶è¿›ç¨‹å’Œæ–‡ä»¶ï¼Œä»¥åŠå¯åŠ¨å’Œæ§åˆ¶å…¶ä»–ç¨‹åºã€‚</p><p>Shellé€šè¿‡è§£æç”¨æˆ·è¾“å…¥ï¼Œç„¶åå¤„ç†æ“ä½œç³»ç»Ÿäº§ç”Ÿçš„ä»»ä½•è¾“å‡ºï¼Œæ¥ç®¡ç†ç”¨æˆ·å’Œæ“ä½œç³»ç»Ÿä¹‹é—´çš„äº¤äº’ã€‚</p><h3 id="Shellçš„å»ºç«‹-Linux-0-11"><a href="#Shellçš„å»ºç«‹-Linux-0-11" class="headerlink" title="Shellçš„å»ºç«‹(Linux 0.11)"></a>Shellçš„å»ºç«‹(Linux 0.11)</h3><h4 id="å¼€æœºåˆ°æ‰§è¡Œmainå‡½æ•°ä¹‹å‰"><a href="#å¼€æœºåˆ°æ‰§è¡Œmainå‡½æ•°ä¹‹å‰" class="headerlink" title="å¼€æœºåˆ°æ‰§è¡Œmainå‡½æ•°ä¹‹å‰"></a>å¼€æœºåˆ°æ‰§è¡Œmainå‡½æ•°ä¹‹å‰</h4><p>è®¡ç®—æœºé€šç”µåï¼Œå†…å­˜ä¸­ç©ºç©ºå¦‚ä¹Ÿï¼Œé€šè¿‡CPUç¡¬ä»¶çš„è®¾è®¡ï¼ˆIntelå°†æ‰€æœ‰<code>80x86</code>ç³»åˆ—çš„CPUï¼ŒåŒ…æ‹¬æœ€æ–°å‹å·çš„CPUçš„ç¡¬ä»¶è®¾è®¡ä¸ºåŠ ç”µå³è¿›å…¥16ä½å®æ¨¡å¼çŠ¶æ€è¿è¡Œï¼‰ï¼ŒåŠ ç”µç¬é—´å¼ºè¡Œå°†<code>CS:IP</code>ï¼ˆCSå¯„å­˜å™¨å’ŒIPå¯„å­˜å™¨ï¼‰æŒ‡å‘<code>0xFFFF0</code>ï¼Œè¿™å—åœ°æ–¹æ­£å¥½æ˜¯BIOSæ‰€åœ¨åœ°æ–¹ï¼Œç„¶åBIOSå°±å¯åŠ¨äº†ï¼Œå‡†å¤‡å®æ¨¡å¼ä¸‹çš„ä¸­æ–­å‘é‡è¡¨å’Œä¸­æ–­æœåŠ¡ç¨‹åºï¼ˆåç»­ç¨‹åºè¦åˆ©ç”¨è¿™äº›ä¸­æ–­æœåŠ¡ç¨‹åºæŠŠç³»ç»Ÿå†…æ ¸ä»ç¡¬ç›˜åŠ è½½è‡³å†…å­˜ï¼‰</p><p>ç„¶åç¨‹åºåŠ è½½ç¬¬ä¸€éƒ¨åˆ†å†…æ ¸ä»£ç â€”å¼•å¯¼ç¨‹åº(bootsect)ï¼Œå…¶ä½œç”¨æ˜¯é™†ç»­æŠŠé“¶ç›˜çš„æ“ä½œç¨‹åºåŠ è½½å…¥å†…å­˜ï¼Œæ¥ç€bootsectã€åˆ’åˆ†å†…å­˜å¹¶åŠ è½½ç¬¬äºŒéƒ¨åˆ†å†…æ ¸ä»£ç â€”setupã€‘å’Œã€åŠ è½½ç¬¬ä¸‰éƒ¨åˆ†å†…æ ¸ä»£ç â€”systemæ¨¡å—ã€‘ï¼Œä¹‹åsetupç¨‹åºå¼€å§‹è¿è¡Œï¼Œåšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯ä»è®¾å¤‡ä¸Šæå–å†…æ ¸è¿è¡Œæ‰€éœ€çš„æœºå™¨ç³»ç»Ÿæ•°æ®</p><p>æ¥ä¸‹æ¥æ˜¯å‘32ä½æ¨¡å¼è½¬å˜ï¼Œå¼€å§‹è®¾ç½®GDTå’ŒIDTï¼ˆä¸­æ–­æè¿°ç¬¦å’Œå…¨å±€æè¿°ç¬¦è¡¨ï¼‰ï¼Œæ‰“å¼€A20åœ°å€çº¿ï¼Œå®ç°32ä½å¯»å€ï¼Œä¸ºä¿æŠ¤æ¨¡å¼ä¸‹æ‰§è¡Œ<code>head.s</code>ï¼ˆsystemæ¨¡å—ç¬¬ä¸€éƒ¨åˆ†ä»£ç ï¼‰åšå‡†å¤‡ï¼Œhead.så¼€å§‹æ‰§è¡Œï¼Œé‡å»ºGDTï¼Œå»ºç«‹å†…æ ¸åˆ†é¡µæœºåˆ¶ï¼Œç„¶åæ‰§è¡ŒretæŒ‡ä»¤è·³åˆ°mainå‡½æ•°ç¨‹åºæ‰§è¡Œ</p><h4 id="è®¾å¤‡ç¯å¢ƒåˆå§‹åŒ–ä»¥åŠæ¿€æ´»è¿›ç¨‹0"><a href="#è®¾å¤‡ç¯å¢ƒåˆå§‹åŒ–ä»¥åŠæ¿€æ´»è¿›ç¨‹0" class="headerlink" title="è®¾å¤‡ç¯å¢ƒåˆå§‹åŒ–ä»¥åŠæ¿€æ´»è¿›ç¨‹0"></a>è®¾å¤‡ç¯å¢ƒåˆå§‹åŒ–ä»¥åŠæ¿€æ´»è¿›ç¨‹0</h4><p>ä¹‹åå†…æ ¸é¦–å…ˆåˆå§‹åŒ–æ ¹è®¾å¤‡å’Œç¡¬ç›˜ï¼Œè§„åˆ’ç‰©ç†å†…å­˜æ ¼å±€ï¼šé™¤äº†å†…æ ¸ä»£ç å’Œæ•°æ®æ‰€å ç©ºé—´ä¹‹å¤–ï¼Œå…¶ä½™ç‰©ç†å†…å­˜ä¸»è¦åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šä¸»å†…å­˜åŒºï¼ˆè¿›ç¨‹ä»£ç è¿è¡Œçš„ç©ºé—´ï¼‰ã€ç¼“å­˜åŒºï¼ˆä¸»æœºä¸å¤–è®¾è¿›è¡Œæ•°æ®äº¤äº’çš„ç©ºé—´&amp;å†…æ ¸ç®¡ç†è¿›ç¨‹çš„æ•°æ®ç»“æ„ï¼‰å’Œè™šæ‹Ÿç›˜ï¼ˆå¯é€‰ï¼Œå°†å¤–è®¾ä¸Šçš„æ•°æ®å…ˆå¤åˆ¶è¿›è™šæ‹Ÿç›˜åŒºï¼Œç„¶ååŠ ä»¥ä½¿ç”¨ï¼ŒåŠ å¿«æ‰§è¡Œæ•ˆç‡ï¼‰</p><p>æ¥ç€åˆå§‹åŒ–å†…å­˜ç®¡ç†ç»“æ„<code>mem_map</code>ï¼ˆå¯¹1MBä»¥ä¸Šçš„å†…å­˜åˆ†é¡µè¿›è¡Œç®¡ç†ï¼Œè®°å½•ä¸€ä¸ªé¡µé¢çš„ä½¿ç”¨æ¬¡æ•°ï¼‰ï¼Œå¼€æœºå¯åŠ¨æ—¶é—´è®¾ç½®ï¼ˆç»“åˆä¸»æ¿ä¸Šé¢çš„ä¸€ä¸ªå°å­˜å‚¨èŠ¯ç‰‡CMOSä¸Šé¢è®°å½•çš„æ—¶é—´æ•°æ®ï¼‰ç­‰</p><p>ç„¶ååˆå§‹åŒ–è¿›ç¨‹0ï¼ˆè¿›ç¨‹0æ˜¯è¿è¡Œçš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼Œæ˜¯Linuxæ“ä½œç³»ç»Ÿçˆ¶å­è¿›ç¨‹åˆ›å»ºæœºåˆ¶çš„ç¬¬ä¸€ä¸ªçˆ¶è¿›ç¨‹ï¼‰ã€‚å…·å¤‡æ”¯æŒå¤šçº¿ç¨‹è½®æµæ‰§è¡Œï¼Œå¤„ç†ç³»ç»Ÿè°ƒç”¨ç­‰èƒ½åŠ›ï¼Œè¿™æ ·æ‰èƒ½ä¿è¯å°†æ¥åœ¨ä¸»æœºæ­£å¸¸åœ°è¿è¡Œï¼Œå¹¶å°†è¿™äº›èƒ½åŠ›é—ä¼ ç»™åç»­å»ºç«‹çš„è¿›ç¨‹</p><p> æœ€åå¼€å¯ä¸­æ–­ï¼Œåˆå§‹åŒ–ç¼“å†²åŒºç®¡ç†ç»“æ„ï¼Œç¡¬ç›˜ç­‰ ï¼Œä»¥åŠç”¨ä»¿ä¸­æ–­çš„æ–¹æ³•å°†è¿›ç¨‹0çš„ç‰¹æƒçº§ç”±0å˜æˆ3ï¼ˆLinuxç³»ç»Ÿè§„å®šé™¤è¿›ç¨‹0ä¹‹å¤–ï¼Œæ‰€æœ‰è¿›ç¨‹éƒ½è¦ç”±ä¸€ä¸ªå·²æœ‰è¿›ç¨‹åœ¨3ç‰¹æƒçº§ä¸‹åˆ›å»ºï¼Œè¿›ç¨‹0çš„ä»£ç å’Œæ•°æ®éƒ½æ˜¯ç”±æ“ä½œç³»ç»Ÿçš„è®¾è®¡è€…å†™åœ¨å†…æ ¸ä»£ç ã€æ•°æ®åŒºï¼Œå¹¶ä¸”æ­¤å‰è¿˜å¤„åœ¨0ç‰¹æƒçº§ï¼Œä¸¥æ ¼è¯´è¿˜ä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„è¿›ç¨‹ï¼‰ï¼Œå®ç°æ¿€æ´»è¿›ç¨‹0                                                                                                                                                                       </p><h4 id="è¿›ç¨‹1çš„åˆ›å»ºåŠæ‰§è¡Œ"><a href="#è¿›ç¨‹1çš„åˆ›å»ºåŠæ‰§è¡Œ" class="headerlink" title="è¿›ç¨‹1çš„åˆ›å»ºåŠæ‰§è¡Œ"></a>è¿›ç¨‹1çš„åˆ›å»ºåŠæ‰§è¡Œ</h4><p>è¿›ç¨‹0ç°åœ¨å¤„åœ¨3ç‰¹æƒçº§çŠ¶æ€ï¼Œå³è¿›ç¨‹çŠ¶æ€ã€‚æ­£å¼å¼€å§‹è¿è¡Œè¦åšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯ä½œä¸ºçˆ¶è¿›ç¨‹è°ƒç”¨forkå‡½æ•°åˆ›å»ºç¬¬ä¸€ä¸ªå­è¿›ç¨‹â€”â€”è¿›ç¨‹1ï¼Œè¿™æ˜¯çˆ¶å­è¿›ç¨‹åˆ›å»ºæœºåˆ¶ç¬¬ä¸€æ¬¡å®é™…è¿ç”¨ã€‚ä¹‹åæ‰€æœ‰è¿›ç¨‹éƒ½æ˜¯åŸºäºçˆ¶å­è¿›ç¨‹æœºåˆ¶ç”±çˆ¶è¿›ç¨‹åˆ›å»ºå‡ºæ¥çš„ã€‚</p><p>è®¾ç½®è¿›ç¨‹1çš„åˆ†é¡µç®¡ç†å’Œè¿›ç¨‹1åœ¨GDTä¸­çš„è¡¨é¡¹ï¼Œå°†è¿›ç¨‹1çš„çŠ¶æ€è®¾ç½®ä¸ºå°±ç»ªæ€ï¼Œä½¿å®ƒå¯ä»¥å‚ä¸è¿›ç¨‹è°ƒåº¦ã€‚å†…æ ¸ç¬¬ä¸€æ¬¡è°ƒåº¦ï¼Œè¿›ç¨‹0åˆ‡æ¢åˆ°è¿›ç¨‹1æ‰§è¡Œï¼Œè¿›ç¨‹1ç¬¬ä¸€æ¬¡æ‰§è¡Œåå¼€å§‹è®¾ç½®ç¡¬ç›˜ä¿¡æ¯ï¼Œæ ¼å¼åŒ–è™šæ‹Ÿç›˜ï¼ŒåŠ è½½æ ¹æ–‡ä»¶ç³»ç»Ÿç­‰å·¥ä½œ</p><h4 id="è¿›ç¨‹2çš„åˆ›å»º"><a href="#è¿›ç¨‹2çš„åˆ›å»º" class="headerlink" title="è¿›ç¨‹2çš„åˆ›å»º"></a>è¿›ç¨‹2çš„åˆ›å»º</h4><p>è¿›ç¨‹1æ‰“å¼€åˆ›å»ºshellæ‰€éœ€è¦çš„ç»ˆç«¯æ ‡å‡†è¾“å…¥æ–‡ä»¶ã€æ ‡å‡†è¾“å‡ºè®¾å¤‡å’Œæ ‡å‡†é”™è¯¯è¾“å‡ºè®¾å¤‡ï¼ˆæ„å‘³ç€å¯ä»¥åœ¨ç¨‹åºä¸­ä½¿ç”¨<code>printf()</code>å‡½æ•°ï¼‰ã€‚è¿›ç¨‹1é€šè¿‡fork()åˆ›å»ºè¿›ç¨‹2ï¼Œåˆ›å»ºåforkå‡½æ•°è¿”å›2ï¼Œè°ƒç”¨<code>wait()</code>å‡½æ•°ï¼ˆå‡½æ•°ä½œç”¨æ˜¯å¦‚æœè¿›ç¨‹1æœ‰ç­‰å¾…é€€å‡ºçš„å­è¿›ç¨‹ï¼Œå°±ä¸ºè¯¥è¿›ç¨‹çš„é€€å‡ºåšå–„åå·¥ä½œï¼›å¦‚æœæœ‰å­è¿›ç¨‹ï¼Œä½†å¹¶ä¸ç­‰å¾…é€€å‡ºï¼Œåˆ™è¿›è¡Œè¿›ç¨‹åˆ‡æ¢ï¼Œå¦‚æœæ²¡æœ‰å­è¿›ç¨‹ï¼Œå‡½æ•°è¿”å›ï¼‰</p><h4 id="è¿›ç¨‹2æ‰§è¡Œä»¥åŠåŠ è½½shellç¨‹åº"><a href="#è¿›ç¨‹2æ‰§è¡Œä»¥åŠåŠ è½½shellç¨‹åº" class="headerlink" title="è¿›ç¨‹2æ‰§è¡Œä»¥åŠåŠ è½½shellç¨‹åº"></a>è¿›ç¨‹2æ‰§è¡Œä»¥åŠåŠ è½½shellç¨‹åº</h4><p>è½®è½¬åˆ°è¿›ç¨‹2ï¼Œå…³é—­æ ‡å‡†è¾“å…¥è®¾å¤‡æ–‡ä»¶ï¼Œå¹¶ç”¨rcæ–‡ä»¶æ›¿æ¢å®ƒï¼ˆrcæ–‡ä»¶æ˜¯è„šæœ¬æ–‡ä»¶ï¼Œè®°å½•ç€ä¸€äº›å‘½ä»¤ï¼Œåº”ç”¨ç¨‹åºé€šè¿‡è§£æå‘½ä»¤æ¥æ‰§è¡Œä»»åŠ¡ï¼‰ã€‚rcæ–‡ä»¶æ‰“å¼€åï¼Œè°ƒç”¨<code>execve()</code>å‡½æ•°åŠ è½½shellç¨‹åºï¼Œå‚æ•°ï¼ˆ<code>/bin/sh</code>ï¼‰å’Œç¯å¢ƒå˜é‡ï¼ˆ<code>HOME=/</code>ï¼‰éƒ½å·²åœ¨å†…æ ¸ä¸­äº‹å…ˆå‡†å¤‡å¥½ï¼Œç„¶åæ£€æŸ¥shellç¨‹åºçš„æ­£ç¡®æ€§</p><p>æ¥ç€åŠ è½½å‚æ•°å’Œç¯å¢ƒå˜é‡åˆ°è¿›ç¨‹2çš„æ ˆç©ºé—´ä¸­ã€‚è¿›ç¨‹2æœ‰äº†ä¸»æœºå¯¹åº”çš„ç¨‹åºshellï¼Œå› æ­¤è¦è°ƒæ•´è‡ªå·±å¯¹åº”çš„ç®¡ç†ç»“æ„å’ŒEIPã€ESPï¼Œè¿™æ ·è½¯ä¸­æ–­iretè¿”å›åï¼Œè¿›ç¨‹2å°†ä»shellç¨‹åºå¼€å§‹æ‰§è¡Œã€‚</p><h4 id="æ‰§è¡Œshellç¨‹åº"><a href="#æ‰§è¡Œshellç¨‹åº" class="headerlink" title="æ‰§è¡Œshellç¨‹åº"></a>æ‰§è¡Œshellç¨‹åº</h4><p>shellç¨‹åºå¼€å§‹æ‰§è¡Œåï¼Œå…¶çº¿æ€§åœ°å€ç©ºé—´å¯¹åº”çš„ç¨‹åºå¹¶æœªåŠ è½½ï¼Œäº§ç”Ÿç¼ºé¡µä¸­æ–­ï¼Œè°ƒç”¨ä¸­æ–­å¤„ç†ç¨‹åºæ¥åˆ†é…é¡µé¢å¹¶åŠ è½½ä¸€é¡µshellç¨‹åºã€‚ä¹‹åå†…æ ¸ä¼šå°†è¯¥é¡µå†…å®¹æ˜ å°„åˆ°shellè¿›ç¨‹çš„çº¿æ€§åœ°å€ç©ºé—´å†…ï¼Œå»ºç«‹é¡µç›®å½•è¡¨-&gt;é¡µè¡¨-&gt;é¡µé¢çš„ä¸‰çº§æ˜ å°„ç®¡ç†å…³ç³»</p><p>ç³»ç»Ÿåˆ›å»ºupdateè¿›ç¨‹ï¼ˆæœ‰ä¸€é¡¹å¾ˆé‡è¦çš„ä»»åŠ¡ï¼šå°†ç¼“å†²åŒºä¸­çš„æ•°æ®åŒæ­¥åˆ°å¤–è®¾ï¼Œä¸ºäº†æé«˜ç³»ç»Ÿæ•´ä½“æ•ˆç‡ï¼‰ï¼Œé‡å»ºshellä¹‹åï¼Œæ“ä½œç³»ç»Ÿç”¨æˆ·å°†é€šè¿‡shellè¿›ç¨‹æä¾›çš„å¹³å°ä¸è®¡ç®—æœºäº¤äº’ã€‚</p><hr><h3 id="shellå¤„ç†ç”¨æˆ·æŒ‡ä»¤å·¥ä½œåŸç†"><a href="#shellå¤„ç†ç”¨æˆ·æŒ‡ä»¤å·¥ä½œåŸç†" class="headerlink" title="shellå¤„ç†ç”¨æˆ·æŒ‡ä»¤å·¥ä½œåŸç†"></a>shellå¤„ç†ç”¨æˆ·æŒ‡ä»¤å·¥ä½œåŸç†</h3><p>ç”¨æˆ·é€šè¿‡é”®ç›˜è¾“å…¥çš„ä¿¡æ¯ï¼Œå­˜å‚¨åœ¨æŒ‡å®šçš„å­—ç¬¦ç¼“å†²é˜Ÿåˆ—ä¸Šã€‚è¯¥ç¼“å†²é˜Ÿåˆ—ä¸Šçš„å†…å®¹ï¼Œå°±æ˜¯tty0æ–‡ä»¶çš„å†…å®¹ã€‚shellè¿›ç¨‹ä¼šä¸æ–­è¯»å–ç¼“å†²é˜Ÿåˆ—ä¸Šçš„æ•°æ®ä¿¡æ¯ã€‚å¦‚æœç”¨æˆ·æ²¡æœ‰ä¸‹è¾¾æŒ‡ä»¤ï¼Œç¼“å†²é˜Ÿåˆ—ä¸­å°±ä¸ä¼šæœ‰æ•°æ®ã€‚</p><p>shellè¿›ç¨‹å°†ä¼šè¢«è®¾ç½®ä¸ºå¯ä¸­æ–­ç­‰å¾…çŠ¶æ€ï¼Œå³è¢«æŒ‚èµ·ã€‚å¦‚æœç”¨æˆ·é€šè¿‡é”®ç›˜ä¸‹è¾¾æŒ‡ä»¤ï¼Œå°†äº§ç”Ÿé”®ç›˜ä¸­æ–­ï¼Œä¸­æ–­æœåŠ¡ç¨‹åºä¼šå°†å­—ç¬¦ä¿¡æ¯å­˜å‚¨åœ¨ç¼“å†²é˜Ÿåˆ—ä¸Šï¼Œå¹¶ç»™shell<br>è¿›ç¨‹å‘ä¿¡å·ï¼Œä¿¡å·å°†å¯¼è‡´shellè¿›ç¨‹è¢«è®¾ç½®ä¸ºå°±ç»ªçŠ¶æ€ï¼Œå³è¢«å”¤é†’ï¼Œå”¤é†’åçš„shellç»§ç»­ä»ç¼“å†²é˜Ÿåˆ—ä¸­è¯»å–æ•°æ®ä¿¡æ¯å¹¶å¤„ç†ï¼Œå®Œæ¯•åï¼Œshellè¿›ç¨‹å°†å†æ¬¡è¢«æŒ‚èµ·ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡é”®ç›˜ä¸­æ–­è¢«å”¤é†’ã€‚</p><p>å‡è®¾ç”¨æˆ·è¾“å…¥ä¸€ä¸ª<code>date</code>å‘½ä»¤åï¼Œshellåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œæå–ç¬¬ä¸€ä¸ªå‘½ä»¤ï¼Œæœç´¢è¿™ä¸ªç¨‹åºï¼Œå¦‚æœæ‰¾åˆ°è¿™ä¸ªç¨‹åºï¼Œå°†è¿è¡Œ<code>date</code>ç¨‹åºä½œä¸ºå­è¿›ç¨‹ã€‚åœ¨è¯¥å­è¿›ç¨‹è¿è¡ŒæœŸé—´ï¼Œshellä¼šå°†è‡ªå·±æŒ‚èµ·ç­‰å¾…å®ƒç»“æŸã€‚åœ¨å­è¿›ç¨‹ç»“æŸåï¼Œshellå†æ¬¡æ˜¾ç¤ºæç¤ºç¬¦ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡è¾“å…¥</p><hr><p>å‚è€ƒï¼š</p><p>ã€ŠLinuxå†…æ ¸è®¾è®¡çš„è‰ºæœ¯ï¼ˆç¬¬2ç‰ˆï¼‰ã€‹</p><p><a href="https://www.ibm.com/support/knowledgecenter/ssw_aix_72/osmanagement/shells.htm">Operating system shells</a></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­¦ä¹ Gsonåºåˆ—åŒ–æºç ç®€å•è®°å½•</title>
      <link href="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/"/>
      <url>/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<p>ç®€å•æŒ‰ç…§æºç å®ç°ä¸‹ã€Œ List to JsonStrã€ã€‚ç›´æ¥å®ç°ä¹Ÿå¾ˆç®€å•ï¼Œä¸è¿‡ä¸ºäº†é”»ç‚¼ä¸‹é˜…è¯»æºç çš„èƒ½åŠ›ï¼Œè¿˜æ˜¯ç»ƒä¹ è·Ÿè¸ªä¸‹æºç ï¼Œæ‰¾å‡ºå¤§ä½“æ¡†æ¶ï¼Œä¸æ²‰è¿·ç»†èŠ‚ï¼ŒæŠŠæ¡æ•´ä½“ã€‚ </p><span id="more"></span><h1 id="Gsonçš„ä½¿ç”¨"><a href="#Gsonçš„ä½¿ç”¨" class="headerlink" title="Gsonçš„ä½¿ç”¨"></a>Gsonçš„ä½¿ç”¨</h1><h2 id="ç¯å¢ƒçº¦å®š"><a href="#ç¯å¢ƒçº¦å®š" class="headerlink" title="ç¯å¢ƒçº¦å®š"></a>ç¯å¢ƒçº¦å®š</h2><p>è¿™é‡Œä½¿ç”¨çš„ Java ç¯å¢ƒï¼Œä½¿ç”¨ Maven ç®¡ç†ä¾èµ–</p><ul><li>Oracle JDK8</li></ul><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/1.png" alt></p><ul><li><p>Gson2.8.6</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;gson&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">2.8</span><span class="number">.6</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> GreenHatHG</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2020-05-12</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GsonTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">double</span> grade;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(<span class="keyword">int</span> id, String name, <span class="keyword">double</span> grade)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.id = id;</span><br><span class="line">            <span class="keyword">this</span>.name = name;</span><br><span class="line">            <span class="keyword">this</span>.grade = grade;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//getteræ–¹æ³•çœç•¥</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Gson gson = <span class="keyword">new</span> Gson();</span><br><span class="line">        ArrayList&lt;Student&gt; students = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        students.add(<span class="keyword">new</span> Student(<span class="number">2020</span>, <span class="string">&quot;æå››&quot;</span>, <span class="number">78</span>));</span><br><span class="line">        students.add(<span class="keyword">new</span> Student(<span class="number">3030</span>, <span class="string">&quot;ç‹äº”&quot;</span>, <span class="number">85</span>));</span><br><span class="line">        students.add(<span class="keyword">new</span> Student(<span class="number">4040</span>, <span class="string">&quot;å¼ ä¸‰&quot;</span>, <span class="number">99</span>));</span><br><span class="line">        String s = gson.toJson(students);</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/2.png" alt></p><h1 id="è·Ÿè¸ªè¿‡ç¨‹"><a href="#è·Ÿè¸ªè¿‡ç¨‹" class="headerlink" title="è·Ÿè¸ªè¿‡ç¨‹"></a>è·Ÿè¸ªè¿‡ç¨‹</h1><h2 id="æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªæŠ½è±¡writeæ–¹æ³•"><a href="#æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªæŠ½è±¡writeæ–¹æ³•" class="headerlink" title="æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªæŠ½è±¡writeæ–¹æ³•"></a>æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªæŠ½è±¡writeæ–¹æ³•</h2><ol><li>æŸ¥çœ‹ <code>gson.toJson(students)</code>çš„æºç ï¼Œä½äº<code>Gson.java</code></li></ol><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/3.png" alt></p><ol><li>è¿™é‡Œé¢å¾ˆæ˜æ˜¾ï¼Œ 615 è¡Œä»£ç ä¸ä¼šæ‰§è¡Œï¼Œè½¬å‘ 618 è¡Œçš„æºç ï¼Œä½äº<code>Gson.java</code>ã€‚</li></ol><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/4.png" alt></p><ol><li><p>è¿™æ—¶å€™ä¸€çœ‹å°±æ˜¯çŸ¥é“æ˜¯ 638 è¡Œä»£ç æ‰§è¡Œèµ·çš„åºåˆ—åŒ–ä½œç”¨ï¼Œè¯¥è¡Œæºä»£ç åŒæ ·ä½äº<code>Gson.java</code></p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/5.png" alt></p></li><li><p>ä¾æ—§ç‚¹è¿›å» 683 è¡Œçš„æºä»£ç ï¼Œä½äº<code>Gson.java</code></p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/6.png" alt></p><p>ä¸€çœ‹ä»£ç æœ‰ç‚¹å¤šï¼Œä½†æ˜¯ä¸»è¦éƒ¨åˆ†è¿˜æ˜¯å®¹æ˜“çœ‹å‡ºæ¥çš„</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/7.png" alt></p></li><li><p>æ‰€ä»¥å¯ä»¥ç›´æ¥è·³åˆ° 704 è¡Œä»£ç ï¼Œä½äº<code>TypeAdapter.java</code></p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/8.png" alt></p><p>ä»ç±»åå¸¦ <code>Adapter</code> æ¥çœ‹ï¼Œè¿ç”¨äº†é€‚é…å™¨æ¨¡å¼ï¼Œè¿™æ–¹é¢è¿™é‡Œä¸å±•å¼€</p><p>è¿™é‡Œæ˜¯æŠ½è±¡æ–¹æ³•ï¼Œæˆ‘ä»¬ä¸çŸ¥é“ä¼šè°ƒç”¨äº†å“ªä¸ªå®ç°äº†å®ƒçš„æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ‰“ä¸Šæ–­ç‚¹å»è°ƒè¯•ï¼Œç„¶åå¼€å¯è°ƒè¯•</p></li></ol><h2 id="æ‰¾åˆ°çš„ç¬¬äºŒä¸ªæŠ½è±¡writeæ–¹æ³•"><a href="#æ‰¾åˆ°çš„ç¬¬äºŒä¸ªæŠ½è±¡writeæ–¹æ³•" class="headerlink" title="æ‰¾åˆ°çš„ç¬¬äºŒä¸ªæŠ½è±¡writeæ–¹æ³•"></a>æ‰¾åˆ°çš„ç¬¬äºŒä¸ªæŠ½è±¡writeæ–¹æ³•</h2><ol><li><p>æ ¹æ®ä¸Šé¢å¼€å¯è°ƒè¯•ï¼Œä¼šç«‹é©¬å®šä½åˆ°è¯¥æ–¹æ³•ï¼Œä½äº<code>CollectionTypeAdapterFactory.java</code></p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/9.png" alt></p></li><li><p>ä¸ºäº†ææ˜ç™½ï¼Œæˆ‘ä»¬ä¾æ—§å¾—åˆ©ç”¨è°ƒè¯•å»æŸ¥çœ‹æ¯ä¸ªæ–¹æ³•çš„ä½œç”¨ï¼Œé¦–å…ˆåœ¨ 95 è¡Œæ–­ç‚¹ï¼ŒæŒ‰ç…§è¿™é‡Œæ¥çœ‹ï¼Œåºåˆ—åŒ–çš„å†…å®¹åº”è¯¥ä¼šè¾“å‡ºåœ¨<code>out</code>è¿™ä¸ªå˜é‡é‡Œé¢ï¼Œç›®å‰<code>out</code>å˜é‡é‡Œé¢çš„å†…å®¹ï¼š</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/10.png" alt></p><p>ç»è¿‡ 95 è¡Œåï¼Œå˜æˆ</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/11.png" alt></p><p>å¯è§<code>out.beginArray();</code>å’Œ<code>out.endArray();</code>åªæ˜¯åœ¨åºåˆ—åŒ–å­—ç¬¦ä¸²å‰ååŠ ä¸ª<code>[ ]</code>ï¼Œæˆ‘ä»¬ç›´æ¥æ¨¡æ‹Ÿå®ç°å³å¯</p></li><li><p>é‚£ä¹ˆé‡ç‚¹åº”è¯¥æ˜¯ 96 é‚£é‡Œäº†ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹<code>collection</code>å˜é‡é‡Œé¢çš„å†…å®¹</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/12.png" alt></p><p>é‡Œé¢æ˜¯æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ä¸‰ä¸ª<code>Student</code>å¯¹è±¡ï¼Œé‚£ä¹ˆè‡ªç„¶ 97 è¡Œä»£ç ä¹Ÿå°±æ˜¯å¯¹æ¯ä¸ªå¯¹è±¡è¿›è¡Œåºåˆ—åŒ–äº†</p></li><li><p>ç‚¹è¿›å»ååŒæ ·è·³åˆ°äº†æŠ½è±¡çš„<code>write</code>æ–¹æ³•ï¼Œä½äº<code>TypeAdapter.java</code>ï¼Œç”¨åŒæ ·çš„åŠ æ–­ç‚¹æ–¹æ³•è¿›è¡Œè°ƒè¯•</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/13.png" alt></p></li></ol><h2 id="æ‰¾åˆ°çš„ç¬¬ä¸‰ä¸ªæŠ½è±¡writeæ–¹æ³•"><a href="#æ‰¾åˆ°çš„ç¬¬ä¸‰ä¸ªæŠ½è±¡writeæ–¹æ³•" class="headerlink" title="æ‰¾åˆ°çš„ç¬¬ä¸‰ä¸ªæŠ½è±¡writeæ–¹æ³•"></a>æ‰¾åˆ°çš„ç¬¬ä¸‰ä¸ªæŠ½è±¡writeæ–¹æ³•</h2><ol><li><p>æ ¹æ®ä¸Šé¢è°ƒè¯•ï¼Œè·³åˆ°å¦‚ä¸‹ä½ç½®ï¼Œä½äº<code>TypeAdapterRuntimeTypeWrapper.java</code></p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/14.png" alt></p><p>è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥é€‰æ‹©ç›´æ¥æ–­ç‚¹åœ¨ 69 è¡Œï¼ŒæŸ¥çœ‹åºåˆ—åŒ–å­—ç¬¦ä¸²å˜åŒ–æƒ…å†µã€‚ç°åœ¨æ–­ç‚¹åœ¨ 53 è¡Œçš„æƒ…å†µï¼š</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/15.png" alt></p><p>å¾…ç¨‹åºæ‰§è¡Œåˆ° 69 è¡Œï¼Œ<code>out</code>å˜é‡é‡Œé¢çš„å†…å®¹ä¾æ—§æ²¡æœ‰å˜åŒ–</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/16.png" alt></p><p>é‚£ä¹ˆå¯ä»¥ç¡®å®šåºåˆ—åŒ–ä»£ç åœ¨ 69 è¡Œäº†ã€‚</p></li><li><p>ç‚¹è¿› 69 è¡Œä»£ç ï¼Œä½äº<code>TypeAdapter.java</code>ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/17.png" alt></p><p>è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…¶å®æ¯æ¬¡è°ƒç”¨çš„è¿™äº›çš„æŠ½è±¡<code>write</code>æ–¹æ³•éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å®ç°ç±»å´ä¸ä¸€æ ·ï¼Œæ¯ä¸ªéƒ½æœ‰è‡ªå·±çš„åŠŸèƒ½ã€‚</p><p><del>è¿™ä¸ªè¿‡ç¨‹å°±å¥½åƒå¥—å¨ƒä¸€æ ·ï¼Œè€åƒå±‚é¥¼äº†</del></p><p>é‚£ä¹ˆä¾æ—§æ–­ç‚¹åœ¨ 127 è¡Œè¿™ä¸ªæŠ½è±¡çš„<code>write</code>æ–¹æ³•ï¼Œä¸ºäº†é¿å…å…¶ä»–çš„æ–­ç‚¹çš„å¹²æ‰°ï¼Œä»¥åŠæ–¹ä¾¿è·³åˆ°æˆ‘ä»¬æƒ³è¦çš„åœ°æ–¹ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå…¶ä»–æ–­ç‚¹å»æ‰å…ˆï¼Œé€‰æ‹©åæŒ‰<code>delete</code>é”®å¯ä»¥åˆ é™¤</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/18.png" alt></p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/20.png" alt></p><p>ç„¶åæˆ‘ä»¬å†ç»™ 127 è¡Œæ‰“ä¸Šæ–­ç‚¹</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/21.png" alt></p><p><strong>å½“ç„¶ä¸Šé¢åªæ˜¯ä¸€ç§æ–¹æ³•ï¼Œè¦æ˜¯ä½ è§‰å¾—è¿™ç§æ–¹æ³•æ¯”è¾ƒéº»çƒ¦ï¼Œä½ å¯ä»¥ç›´æ¥æŒ‰ä¸‹é¢çš„çº¢è‰²å°ç®­å¤´ç›´æ¥è¿›å…¥æºç ï¼Œçœå»æ–­ç‚¹åœ¨æ¥å£çš„éº»çƒ¦ï¼Œä½†æ˜¯è¿™æ ·å°±ç•¥å»äº†æ¥å£çš„ç»†èŠ‚</strong></p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/22.png" alt></p><p>FAQï¼šä¸ºä»€ä¹ˆä¸ç‚¹è“è‰²ç®­å¤´ï¼Ÿ</p><p>å› ä¸ºè“è‰²é‚£ä¸ªæœ‰çš„åœ°æ–¹è·³ä¸è¿›å»</p></li></ol><h2 id="2020-years-later"><a href="#2020-years-later" class="headerlink" title="2020 years later"></a>2020 years later</h2><ol><li><p>æ ¹æ®ä¸Šé¢ï¼Œè·³åˆ°<code>ObjectTypeAdapter.java</code></p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/23.png" alt></p><p>è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥åˆ¤æ–­ç¨‹åºæœ‰æ²¡æœ‰æ‰§è¡Œ 101 è¡Œé‡Œé¢çš„å†…å®¹ï¼Œ<code>Step over F8</code>èµ°ä¸‹å»ï¼Œå‘ç°å¹¶æ²¡æœ‰è¿›å»ï¼Œé‚£ä¹ˆä¹Ÿå°±è¯´ï¼Œåˆåˆ°äº†æˆ‘ä»¬æœ€å–œæ¬¢çš„æŠ½è±¡<code>write</code>æ–¹æ³•ç¯èŠ‚äº†ï¼Œemmmï¼Œç‚¹è¿›å»ä¸€å¦‚æ—¢å¾€ï¼š</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/17.png" alt></p><p>ä¸ºäº†æ–¹ä¾¿ï¼Œå°±ä¸è°ƒè¯•æ–­ç‚¹ï¼Œç›´æ¥<code>Step into</code>è¿›å»</p></li><li><p>è¿›åˆ°<code>ReflectiveTypeAdapterFactory.java</code></p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/24.png" alt></p><p>åŒæ ·æˆ‘ä»¬éœ€è¦ç¡®å®š 240 è¡Œçš„ä½œç”¨ï¼Œå…ˆæŸ¥çœ‹ç°åœ¨<code>out</code>å˜é‡çš„å†…å®¹ï¼š</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/25.png" alt></p><p>æ‰§è¡Œå®Œ 240 è¡Œå</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/26.png" alt></p><p>å¯ä»¥çœ‹åˆ° 240 è¡Œä½œç”¨åªä¸è¿‡æ˜¯æ·»åŠ ä¸ª<code>&#123;</code>è€Œå·²ï¼Œä½†æ˜¯ç»å¯¹ä¸æ˜¯ç›´æ¥æ·»åŠ <code>&#123;</code>é‚£ä¹ˆç®€å•</p><p>è‡ªç„¶ 251 è¡Œä½œç”¨å°±æ˜¯æ·»åŠ ä¸ª<code>&#125;</code></p></li><li><p>ç„¶åæ¥ç€<code>step over</code>æ‰§è¡Œåˆ° 244 è¡Œï¼Œä¸ºäº†ç¡®å®š 244 è¡Œä½œç”¨ï¼Œæˆ‘ä»¬é€‰æ‹©çš„åšæ³•ä¾æ—§æ˜¯å…ˆæ‰§è¡ŒæŸ¥çœ‹ç»“æœåå†å†³å®šè¦ä¸è¦<code>step into</code>è¿›å»ã€‚</p><p>è¿™é‡Œ 244 è¡Œå¹¶æ²¡æœ‰ä»€ä¹ˆå˜åŒ–ï¼Œåè€Œæ˜¯æ‰§è¡Œäº† 245 è¡Œåæœ‰å˜åŒ–äº†</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/27.png" alt></p></li></ol><h2 id="æ‰¾åˆ°åºåˆ—åŒ–å±æ€§åçš„ä»£ç "><a href="#æ‰¾åˆ°åºåˆ—åŒ–å±æ€§åçš„ä»£ç " class="headerlink" title="æ‰¾åˆ°åºåˆ—åŒ–å±æ€§åçš„ä»£ç "></a>æ‰¾åˆ°åºåˆ—åŒ–å±æ€§åçš„ä»£ç </h2><ol><li><p>è¿›å…¥åˆ° 245 è¡Œåçš„ä»£ç ï¼Œä½äº<code>ReflectiveTypeAdapterFactory.java</code></p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/28.png" alt></p></li><li><p>åŒæ ·ä¸ºäº†ç¡®å®šä¸»è¦ä»£ç éƒ¨åˆ†ï¼Œå…ˆè®©ç¨‹åºæ‰§è¡Œåˆ° 127 è¡Œ</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/29.png" alt></p><p>é‚£ä¹ˆå°±å¯ä»¥ç¡®å®šæ˜¯ 127 è¡Œä»£ç æ˜¯ä¸»è¦éƒ¨åˆ†ï¼Œè·³è¿›å»ï¼Œåˆæ˜¯ä¸€æ¬¡å¥—å¨ƒï¼Œemmmï¼Œè¿™ä¸ªæˆ‘ä»¬åœ¨ã€Œæ‰¾åˆ°ç¬¬ä¸‰ä¸ªæŠ½è±¡writeæ–¹æ³•ã€é‚£é‡Œå°±æœ‰å‡ºç°è¿‡</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/14.png" alt></p><p>è¿™é‡Œæˆ‘ä»¬é€‰æ‹©çš„æ˜¯<code>step over</code>ä¸€æ­¥æ­¥è¿›è¡Œï¼ŒåŒæ—¶æŸ¥çœ‹<code>out</code>æ–¹æ³•çš„å˜åŒ–</p><p><code>step over</code>åï¼Œå‘ç°ç¨‹åºæ‰§è¡Œåˆ° 69 è¡Œ<code>out</code>å˜é‡è¿˜æ²¡æœ‰å˜åŒ–ï¼Œé‚£ä¹ˆåŒæ ·ä½¿ç”¨<code>step into</code>è¿›å» 69 è¡Œåï¼Œä½äº<code>TypeAdapters.java</code>ï¼Œæ–­ç‚¹è°ƒè¯•è¿™è¡Œè¯­å¥</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/30.png" alt></p><p>å‘ç°<code>out</code>å˜é‡å†…å®¹ç”±<code>[&#123;</code>å˜æˆäº†<code>[&#123;&quot;id&quot;:2020</code>ï¼Œé‚£ä¹ˆè‡ªç„¶å¾—è¿›å»çœ‹è¿™ä¸ªä»£ç </p></li><li><p>è°ƒè¯• 233 è¡Œï¼Œæºç è¿›å…¥åˆ°<code>JsonWriter.java</code></p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/31.png" alt></p><p>å¾…æ‰§è¡Œå®Œ 526 è¡Œï¼Œåºåˆ—åŒ–å­—ç¬¦ä¸²å†…å®¹æ·»åŠ äº†ä¸ª<code>&quot;id&quot;</code></p></li></ol><h2 id="ç®€å•åˆ†æå†™å…¥å±æ€§å"><a href="#ç®€å•åˆ†æå†™å…¥å±æ€§å" class="headerlink" title="ç®€å•åˆ†æå†™å…¥å±æ€§å"></a>ç®€å•åˆ†æå†™å…¥å±æ€§å</h2><ol><li><p>è°ƒè¯• 526 è¡Œä»£ç ï¼Œæºç ä½äº<code>JsonWriter.java</code></p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/32.png" alt></p><p>â€‹    è¿™é‡Œå¯ä»¥çœ‹åˆ°<code>defferredName</code>çš„å€¼ä¸º<code>id</code>ï¼Œé‚£ä¹ˆ 401 è¡Œä»£ç è‡ªç„¶å°±æ˜¯å°†å…¶å†™å…¥åˆ°åºåˆ—åŒ–å­—ç¬¦ä¸²ä¸­</p></li><li><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/33.png" alt></p><p>è¿™é‡Œæ˜¯æœ‰åšäº†å­—ç¬¦ä¸²æ›¿æ¢å¤„ç†ï¼Œä¼šå°†ä¸€äº›ç‰¹æ®Šå­—ç¬¦è½¬æ¢ä¸ºunicodeç¼–ç¨‹æ ¼å¼ã€‚</p><p><code>replacements</code>æ­£æ˜¯ä¸€ç³»åˆ—ä»£æ›¿è§„åˆ™ï¼Œ<code>htmlSafe</code>æ˜¯é»˜è®¤ä¸º<code>true</code>ï¼Œæ›¿æ¢è§„åˆ™é»˜è®¤å¦‚ä¸‹ï¼š</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/34.png" alt></p><p>â€‹    å†™å…¥åºåˆ—åŒ–å­—ç¬¦ä¸²çš„è¿‡ç¨‹ï¼Œæ¯”å¦‚ 592 è¡Œï¼Œä½¿ç”¨äº†<code>synchronized</code>è¿›è¡ŒåŠ é”ï¼Œ<code>lock</code>å˜é‡æ˜¯ä¸ª<code>Object</code>çš„å®ä¾‹</p><p>â€‹    <img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/35.png" alt></p><p>â€‹    </p></li></ol><h3 id="htmlSafeæ˜¯åœ¨å“ªé‡Œç½®ä¸ºtrueçš„"><a href="#htmlSafeæ˜¯åœ¨å“ªé‡Œç½®ä¸ºtrueçš„" class="headerlink" title="htmlSafeæ˜¯åœ¨å“ªé‡Œç½®ä¸ºtrueçš„"></a>htmlSafeæ˜¯åœ¨å“ªé‡Œç½®ä¸ºtrueçš„</h3><p>æˆ‘ä»¬å…ˆåœ¨åŸåœ°æ–¹<code>JsonWrite.java</code>æŸ¥çœ‹<code>htmlSafe</code>å˜é‡çš„ä½¿ç”¨æƒ…å†µ</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/36.png" alt></p><p>å‘ç°æœ‰ä¸ª<code>htmlSafe</code>å±æ€§ï¼Œæˆ‘ä»¬æŠŠå…¶ä»–çš„æ–­ç‚¹æƒ…å†µï¼Œå°†æ–­ç‚¹æ–­åœ¨å±æ€§ä¸Šé¢ï¼Œè¿è¡Œdebug</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/37.png" alt></p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/38.png" alt></p><p>å¯ä»¥çœ‹åˆ°æ˜¯æœ‰åœ°æ–¹è°ƒäº†<code>setHtmlSafe</code>æ–¹æ³•å°†å…¶ç½®ä¸ºtrue</p><p>æŸ¥çœ‹è¯¥æ–¹æ³•çš„ä½¿ç”¨æƒ…å†µï¼Œå‘ç°åœ¨<code>Gson.java</code>æœ‰åœ°æ–¹è°ƒç”¨äº†è¯¥æ–¹æ³•</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/39.png" alt></p><p>ç¢°å·§ç¬¬ 700 è¡Œæœ‰ä¸ª<code>htmlSafe</code>å˜é‡ï¼Œæ¥ç€ä¸€æ ·æ˜¯æŸ¥çœ‹è¯¥å˜é‡ä½¿ç”¨æƒ…å†µï¼Œç„¶åå®šä½åˆ°<code>Gson.java</code>ä¹Ÿæœ‰ä¸ª<code>htmlSafe</code>çš„å˜é‡ï¼ŒåŒæ ·æ–­ç‚¹è¯¥å˜é‡</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/40.png" alt></p><p>å‘ç°è¿™é‡Œæœ‰ä¸ªæ„é€ å‡½æ•°ï¼Œç»™è¯¥å˜é‡èµ‹å€¼ä¸ºtrueï¼Œæ­£å¥½æ˜¯ä½¿ç”¨é»˜è®¤æ„é€ å‡½æ•°åˆ›å»º<code>Gson</code>å¯¹è±¡çš„æ—¶å€™ä¼šå°†<code>htmlSafe</code>å˜ä¸ºtrue</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/41.png" alt></p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/42.png" alt></p><h2 id="æ‰¾åˆ°åºåˆ—åŒ–å±æ€§å€¼çš„ä»£ç "><a href="#æ‰¾åˆ°åºåˆ—åŒ–å±æ€§å€¼çš„ä»£ç " class="headerlink" title="æ‰¾åˆ°åºåˆ—åŒ–å±æ€§å€¼çš„ä»£ç "></a>æ‰¾åˆ°åºåˆ—åŒ–å±æ€§å€¼çš„ä»£ç </h2><p>ä¸Šé¢æˆ‘ä»¬çœ‹åˆ°ï¼Œåœ¨<code>JsonWrite.java</code>é‡Œé¢çš„ 526 è¡Œï¼Œä½œç”¨æ˜¯åºåˆ—åŒ–ä¸Šå±æ€§åï¼Œæˆ‘ä»¬æ¥ç€æ‰§è¡Œ</p><p>æ‰§è¡Œåˆ° 532 è¡Œä»£ç ï¼Œè¿™ä¸ªå‡½æ•°ä½œç”¨æ˜¯ç»™åºåˆ—åŒ–å­—ç¬¦ä¸²åŠ ä¸ªâ€:â€</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/43.png" alt></p><p>é‚£ä¹ˆï¼Œå½“æˆ‘ä»¬æ‰§è¡Œç© 533 è¡Œæ—¶ï¼Œå°±å·²ç»åºåˆ—åŒ–å¥½äº†å±æ€§åå’Œå±æ€§å€¼</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/44.png" alt></p><h2 id="æ˜¯å¦‚ä½•è·å–å±æ€§åå’Œå±æ€§å€¼çš„"><a href="#æ˜¯å¦‚ä½•è·å–å±æ€§åå’Œå±æ€§å€¼çš„" class="headerlink" title="æ˜¯å¦‚ä½•è·å–å±æ€§åå’Œå±æ€§å€¼çš„"></a>æ˜¯å¦‚ä½•è·å–å±æ€§åå’Œå±æ€§å€¼çš„</h2><p>åœ¨ä¸Šé¢ï¼Œæˆ‘ä»¬åœ¨ 521 è¡Œè¿™ä¸ªå‡½æ•°ä¸­å¾—åˆ°äº†ä¸€ä¸ªvalueå€¼ï¼Œè¿™ä¸ªæ˜¯å±æ€§å€¼ï¼Œä½†æ˜¯å®ƒæ˜¯æ€ä¹ˆå¾—åˆ°çš„å‘¢</p><p>æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹è¿™ä¸ªå‡½æ•°çš„è°ƒç”¨é“¾ï¼š</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/45.png" alt></p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/46.png" alt></p><p>ä»ç¬¬ä¸€ä¸ªå‡½æ•°æ¥çœ‹ï¼Œçœ‹ä¸åˆ°ä»€ä¹ˆ</p><p>å½“æˆ‘ä»¬æŸ¥çœ‹ç¬¬äºŒä¸ªå‡½æ•°æ—¶ï¼Œå‘ç°æœ‰ä¸ª<code>deferredName</code>å¯ç–‘ï¼Œäºæ˜¯debugä¸€ä¸‹ï¼Œæ­£å¥½è¿™ä¸ªå€¼å°±æ˜¯å±æ€§åï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å¾—çŸ¥å®ƒæ˜¯å¦‚ä½•è¢«èµ‹å€¼çš„</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/47.png" alt></p><p><code>Find Usages</code>åï¼Œå‘ç°æ˜¯ä¸ª<code>JsonWrite</code>çš„ä¸€ä¸ªå±æ€§ï¼Œäºæ˜¯æˆ‘ä»¬æŒ‰ç…§ä¹‹å‰çš„æ–¹æ³•ç»™å±æ€§æ–­ç‚¹</p><p>ç„¶åæ–­ç‚¹åœåœ¨äº†<code>JsonWriter.java</code>é‡Œ</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/48.png" alt></p><p>å¾ˆæ˜¾ç„¶ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“è¿™ä¸ª<code>name</code>å¦‚ä½•æ¥ï¼ŒæŸ¥çœ‹è°ƒç”¨é“¾</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/49.png" alt></p><p>è¿™é‡Œæ‰¾åˆ°ä¸€ä¸ªæ¯”è¾ƒå¯ç–‘çš„å˜é‡<code>boundField</code>ï¼Œä½äº<code>ReflectiveTypeAdapterFactory.java</code>ï¼Œä¹‹æ‰€ä»¥è¯´æ˜¯å¯ç–‘ï¼Œå› ä¸ºå®ƒå¯¹æ¯”å…¶ä»–çš„å˜é‡ç‰¹å¾æ˜¾è‘—ï¼Œèµ·ç ç±»å‹ä¸æ˜¯æ³›å‹ï¼Œè€Œæ˜¯ä¸ªå…·ä½“çš„ã€‚</p><p>ä¸€çœ‹ï¼Œåœ¨ 201 è¡Œæœ‰è¢«ç”¨åˆ°</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/50.png" alt></p><p>æŸ¥çœ‹ 201 è¡Œé‚£ä¸ªå‡½æ•°çš„ä½¿ç”¨æƒ…å†µï¼Œæ‰¾åˆ°å¦‚ä¸‹</p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/51.png" alt></p><p><img src="/2020/05/12/%E5%AD%A6%E4%B9%A0Gson%E5%BA%8F%E5%88%97%E5%8C%96%E6%BA%90%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/52.png" alt></p><p>è¿™é‡Œçœ‹åˆ°ï¼Œæœ‰å¥½å‡ å¤„è¿ç”¨åˆ°äº†åå°„ï¼Œæ¯”å¦‚ 152 166ç­‰è¡Œï¼Œå†ç»“åˆåå°„ç‰¹ç‚¹ï¼Œæ‰€ä»¥æ¨æ–­å‡ºåº”è¯¥æ˜¯ç”¨åå°„è·å¾—åˆ°å±æ€§å€¼å’Œå±æ€§åçš„</p><h1 id="ç®€å•å®ç°"><a href="#ç®€å•å®ç°" class="headerlink" title="ç®€å•å®ç°"></a>ç®€å•å®ç°</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationTargetException;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">double</span> grade;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(<span class="keyword">int</span> id, String name, <span class="keyword">double</span> grade)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.id = id;</span><br><span class="line">            <span class="keyword">this</span>.name = name;</span><br><span class="line">            <span class="keyword">this</span>.grade = grade;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> id;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getGrade</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> grade;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">studentListToJson</span><span class="params">(List&lt;Student&gt; studentList)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="comment">//beginArray</span></span><br><span class="line">        sb.append(<span class="string">&quot;[&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; studentList.size(); i++)&#123;</span><br><span class="line">            Student student = studentList.get(i);</span><br><span class="line"></span><br><span class="line">            sb.append(<span class="string">&quot;&#123;&quot;</span>);</span><br><span class="line">            <span class="comment">//ç»‘å®šå½“å‰studentå¯¹è±¡çš„å±æ€§åå’Œå€¼</span></span><br><span class="line">            Map&lt;String, Object&gt; boundField = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//è·å–å±æ€§åå’Œå€¼</span></span><br><span class="line">            Class clazz = student.getClass();</span><br><span class="line">            Field[] fields = clazz.getDeclaredFields();</span><br><span class="line">            <span class="keyword">for</span> (Field field : fields)&#123;</span><br><span class="line">                field.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">                String fieldName = field.getName();</span><br><span class="line"></span><br><span class="line">                String methodName = <span class="string">&quot;get&quot;</span>+fieldName.substring(<span class="number">0</span>,<span class="number">1</span>)</span><br><span class="line">                    .toUpperCase()+fieldName.substring(<span class="number">1</span>);</span><br><span class="line">                Method method = clazz.getMethod(methodName, <span class="keyword">null</span>);</span><br><span class="line">                Object fieldValue = method.invoke(student, <span class="keyword">null</span>);</span><br><span class="line">                boundField.put(fieldName, fieldValue);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">boolean</span>[] internalFirst = &#123;<span class="keyword">true</span>&#125;;</span><br><span class="line">            boundField.forEach((k,v) -&gt;&#123;</span><br><span class="line">                <span class="keyword">if</span>(!internalFirst[<span class="number">0</span>])&#123;</span><br><span class="line">                    sb.append(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                sb.append(<span class="string">&quot;\&quot;&quot;</span>).append(k).append(<span class="string">&quot;\&quot;&quot;</span>).append(<span class="string">&quot;:&quot;</span>);</span><br><span class="line">                <span class="keyword">if</span>(v <span class="keyword">instanceof</span> Number)&#123;</span><br><span class="line">                    sb.append(v);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    sb.append(<span class="string">&quot;\&quot;&quot;</span>).append(v).append(<span class="string">&quot;\&quot;&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                internalFirst[<span class="number">0</span>] = <span class="keyword">false</span>;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            sb.append(<span class="string">&quot;&#125;&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span>(i != studentList.size() - <span class="number">1</span>)&#123;</span><br><span class="line">                sb.append(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//endArray</span></span><br><span class="line">        sb.append(<span class="string">&quot;]&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        List&lt;Student&gt; students = <span class="keyword">new</span> ArrayList&lt;Student&gt;();</span><br><span class="line">        students.add(<span class="keyword">new</span> Student(<span class="number">1</span>,<span class="string">&quot;11&quot;</span>, <span class="number">1.11</span>));</span><br><span class="line">        students.add(<span class="keyword">new</span> Student(<span class="number">2</span>,<span class="string">&quot;22&quot;</span>, <span class="number">2.22</span>));</span><br><span class="line">        students.add(<span class="keyword">new</span> Student(<span class="number">3</span>,<span class="string">&quot;33&quot;</span>, <span class="number">3.33</span>));</span><br><span class="line">        System.out.println(Main.studentListToJson(students));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æºç  </tag>
            
            <tag> gson </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‡ªç”¨ä¹¦ç­¾ï¼ˆç§»è‡³notionæ›´æ–°ï¼ï¼‰</title>
      <link href="/2020/02/11/bookmarks/"/>
      <url>/2020/02/11/bookmarks/</url>
      
        <content type="html"><![CDATA[<p>UpdateTime: 2020/03/12</p><span id="more"></span><h1 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h1><p><a href="https://yeasy.gitbooks.io/docker_practice/">Docker â€”â€” ä»å…¥é—¨åˆ°å®è·µ Â· GitBook (Legacy)</a></p><p><a href="https://segmentfault.com/a/1190000000628247">åˆ›å»ºå°½å¯èƒ½å°çš„ Docker å®¹å™¨ - yexiaoxiaobai - SegmentFault æ€å¦</a></p><p><a href="https://www.cnblogs.com/sparkdev/p/7821376.html">æŸ¥çœ‹ docker å®¹å™¨ä½¿ç”¨çš„èµ„æº - sparkdev - åšå®¢å›­</a></p><p><a href="https://cizixs.com/2017/08/04/docker-resources-limit/">ä½¿ç”¨ docker å¯¹å®¹å™¨èµ„æºè¿›è¡Œé™åˆ¶ | Cizixs Write Here</a></p><p><a href="https://www.v2ex.com/t/348535">[æ±‚åŠ©]docker build é€Ÿåº¦éå¸¸æ…¢ - V2EX</a></p><h1 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h1><p><a href="http://shenzekun.cn/hexo%E7%9A%84next%E4%B8%BB%E9%A2%98%E4%B8%AA%E6%80%A7%E5%8C%96%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B.html">hexoçš„nextä¸»é¢˜ä¸ªæ€§åŒ–æ•™ç¨‹:æ‰“é€ ç‚«é…·ç½‘ç«™ | Moorez</a></p><p><a href="https://linghucong.js.org/2016/04/15/2016-04-15-hexo-github-pages-blog/">æ‰‹æŠŠæ‰‹æ•™ä½ ä½¿ç”¨Hexo + Github Pagesæ­å»ºä¸ªäººç‹¬ç«‹åšå®¢ | ä»¤ç‹è‘±@å‰ç«¯ç¬”è®°</a></p><p><a href="http://mashirosorata.vicp.io/HEXO-NEXT%E4%B8%BB%E9%A2%98%E4%B8%AA%E6%80%A7%E5%8C%96%E9%85%8D%E7%BD%AE.html">HEXO+NEXTä¸»é¢˜ä¸ªæ€§åŒ–é…ç½® | SORA</a></p><p><a href="https://sevencho.github.io/archives/14534beb.html">Hexoåšå®¢NexTä¸»é¢˜ä»v5.x.xæ›´æ–°åˆ°v6.x.xçš„è®°å½•åŠæ€»ç»“ | æ›¹é›ªæ¾deåšå®¢|CoderBoyâ€™s Blog</a></p><p><a href="https://www.jianshu.com/p/e8d433a2c5b7">å¦‚ä½•åœ¨ hexo ä¸­æ”¯æŒ Mathjaxï¼Ÿ - ç®€ä¹¦</a></p><p><a href="http://www.mohu.org/info/symbols/symbols.htm">å¸¸ç”¨æ•°å­¦ç¬¦å·çš„ LaTeX è¡¨ç¤ºæ–¹æ³•</a></p><p><a href="https://godweiyang.com/2018/04/13/hexo-blog/">è¶…è¯¦ç»†Hexo+Githubåšå®¢æ­å»ºå°ç™½æ•™ç¨‹ | éŸ¦é˜³çš„åšå®¢</a></p><p><a href="https://www.zybuluo.com/knight/note/96093">MathJaxä½¿ç”¨LaTeXè¯­æ³•ç¼–å†™æ•°å­¦å…¬å¼æ•™ç¨‹ - ä½œä¸šéƒ¨è½ Cmd Markdown ç¼–è¾‘é˜…è¯»å™¨</a></p><p><a href="https://www.zhijunkang.com/2019/06/05/front-matter-jie-shao/">Front-matter é€‰é¡¹è¯¦è§£ | BOLG_ZJK</a></p><p><a href="https://github.com/huiwang/hexo-recommended-posts/blob/master/README.md">Hexoè·¨åšå®¢æ–‡ç« æ¨èæ’ä»¶</a></p><p><a href="https://www.itfanr.cc/2017/08/09/using-travis-ci-automatic-deploy-hexo-blogs/">ä½¿ç”¨Travis CIè‡ªåŠ¨éƒ¨ç½²Hexoåšå®¢ | ITèŒƒå„¿</a></p><h1 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h1><p><a href="https://www.kancloud.cn/thinkphp/mysql-design-optimalize/39325">å­—æ®µç±»å‹ä¸åˆç†çš„é€‰æ‹©å­—æ®µç±»å‹ Â· Mysqlè®¾è®¡ä¸ä¼˜åŒ–ä¸“é¢˜ Â· çœ‹äº‘</a></p><h1 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h1><h2 id="ç½‘ç«™"><a href="#ç½‘ç«™" class="headerlink" title="ç½‘ç«™"></a>ç½‘ç«™</h2><p><a href="http://www.cplusplus.com/reference/">å‚è€ƒ - C ++å‚è€ƒ</a><br><a href="https://zh.cppreference.com/w/%E9%A6%96%E9%A1%B5">cppreference.com</a><br><a href="http://google.github.io/styleguide/cppguide.html">Google C++ Style Guide</a><br><a href="https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/naming/">å‘½åçº¦å®š â€” Google å¼€æºé¡¹ç›®é£æ ¼æŒ‡å—</a></p><p><a href="https://www.cprogramming.com/">Learn C and C++ Programming - Cprogramming.com</a></p><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p><a href="https://www.cnblogs.com/invisible2/p/6905892.html">c++å¤šä¸ªæ–‡ä»¶ä¸­å¦‚ä½•å…±ç”¨ä¸€ä¸ªå…¨å±€å˜é‡ - invisible_man - åšå®¢å›­</a></p><h1 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h1><h2 id="ç½‘ç«™-1"><a href="#ç½‘ç«™-1" class="headerlink" title="ç½‘ç«™"></a>ç½‘ç«™</h2><p><a href="http://www.javahelp.com.cn/ittp.html">Javaå¸®å¸®-ITæŠ€æœ¯å›¾è°±</a></p><p><a href="https://github.com/TeamStuQ/skill-map/issues/43">ã€ Java ã€å­¦ä¹ èµ„æº Â· Issue #43 Â· TeamStuQ/skill-map</a></p><p><a href="https://www.52pojie.cn/thread-627889-1-1.html">Java api 1.8 ä¸­æ–‡ å¸®åŠ©æ–‡æ¡£ å„ä¸ªç¿»è¯‘ç‰ˆæœ¬</a></p><p><a href="https://blog.csdn.net/qq_26761229/article/details/78963593">JDK8 APIæ–‡æ¡£(ä¸‹è½½)è®°å½• - CSDNåšå®¢</a></p><p><a href="https://how2j.cn/?p=76631">How2J çš„ Javaæ•™ç¨‹</a></p><p><a href="http://blog.didispace.com/">ç¨‹åºçŒ¿DD</a></p><p><a href="https://www.funtl.com/">åƒé”‹æ•™è‚²-æå«æ°‘</a></p><h2 id="æ–‡ç« "><a href="#æ–‡ç« " class="headerlink" title="æ–‡ç« "></a>æ–‡ç« </h2><p><a href="https://www.zhihu.com/question/39888195">åç«¯ç¨‹åºå‘˜æŠ€èƒ½æ ‘? - çŸ¥ä¹</a></p><p><a href="https://zhuanlan.zhihu.com/p/25418336">Java IOå­¦ä¹ æ•´ç† - çŸ¥ä¹</a></p><p><a href="https://zhuanlan.zhihu.com/p/28286559">Java IOï¼Œç¡¬éª¨å¤´ä¹Ÿèƒ½å˜è½¯ - çŸ¥ä¹</a></p><p><a href="https://www.douban.com/doulist/2545443/">ä»è¡¨åˆ°é‡Œå­¦ä¹ JVMå®ç° - è±†ç“£</a></p><p><a href="https://jeremyxu2010.github.io/2016/04/jvm%E5%BA%95%E5%B1%82%E7%9F%A5%E8%AF%86%E5%A4%87%E5%BF%98/#%E6%89%A7%E8%A1%8C%E5%BC%95%E6%93%8E-jvm-runtime">JVMåº•å±‚çŸ¥è¯†å¤‡å¿˜ - jeremyçš„æŠ€æœ¯ç‚¹æ»´</a></p><p><a href="https://juejin.im/post/5c875a766fb9a049f06b1991">ç¨‹åºå‘˜ç¬”è®°â€”â€”springboot ä¹‹å¸¸ç”¨æ³¨è§£ - æ˜é‡‘</a></p><p><a href="https://www.javazhiyin.com/22480.html">SpringBootå¸¸ç”¨æ³¨è§£å¤§å…¨-JavaçŸ¥éŸ³</a></p><p><a href="https://www.ibm.com/developerworks/cn/java/j-lo-classloader/index.html">æ·±å…¥æ¢è®¨ Java ç±»åŠ è½½å™¨</a></p><p><a href="https://www.zhihu.com/question/36021012"> java web ä¸­dao å±‚å’Œserviceå±‚éƒ½ä½¿ç”¨æ¥å£ï¼Œæ˜¯å¦æ˜¯ä¸ºä½¿ç”¨æ¥å£è€Œä½¿ç”¨æ¥å£ï¼Ÿ - çŸ¥ä¹</a></p><p><a href="https://www.ibm.com/developerworks/cn/web/1103_chenyan_restapi/index.html">æœ€ä½³å®è·µï¼šæ›´å¥½çš„è®¾è®¡ä½ çš„ REST API</a></p><p><a href="https://choerodon.io/zh/docs/contributor-guide/development/conventions/restful/">RESTful API è§„èŒƒ</a></p><p><a href="https://segmentfault.com/a/1190000013725928">Spring Data REST APIé›†æˆSpringfoxã€Swagger - Javaç å†œ - SegmentFault æ€å¦</a></p><p><a href="https://www.twelve21.io/how-to-use-argon2-for-password-hashing-in-java/">How to Use Argon2 for Password Hashing in Java - Twelve 21</a></p><p><a href="http://tengj.top/2017/05/05/javabook/#more">Javaåç«¯2019ä¹¦å•æ¨è | å˜Ÿå˜Ÿç‹¬ç«‹åšå®¢</a></p><p><a href="http://ifeve.com/introduction-to-optional-and-excludes-dependencies/">ã€ŠMavenå®˜æ–¹æŒ‡å—ã€‹å¯é€‰çš„ä¾èµ–å’Œä¾èµ–æ’é™¤ | å¹¶å‘ç¼–ç¨‹ç½‘ â€“ ifeve.com</a></p><h1 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h1><p><a href="https://pythonguidecn.readthedocs.io/zh/latest/">Pythonæœ€ä½³å®è·µæŒ‡å—ï¼ â€” The Hitchhikerâ€™s Guide to Python</a></p><p><a href="https://www.liaoxuefeng.com/wiki/1016959663602400">Pythonæ•™ç¨‹ - å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™</a></p><p><a href="https://blog.csdn.net/IDIOThh/article/details/82688095">Python3-æ¨¡å—è°ƒç”¨ç¤ºä¾‹(ä»ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­è°ƒç”¨å¦å¤–ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­çš„ç±»ï¼‰ - CSDNåšå®¢</a></p><h1 id="è®¡ç»„"><a href="#è®¡ç»„" class="headerlink" title="è®¡ç»„"></a>è®¡ç»„</h1><p><a href="https://www.cnblogs.com/zhangziqiu/archive/2011/03/30/ComputerCode.html">åŸç , åç , è¡¥ç  è¯¦è§£ - ziqiu.zhang - åšå®¢å›­</a></p><p><a href="https://blog.csdn.net/u012861978/article/details/45562483">åœ°å€æ€»çº¿ï¼Œå­—é•¿ï¼Œå†…å­˜å®¹é‡ï¼Œå¯»å€èŒƒå›´ ä¹‹é—´çš„è®¡ç®— - u012861978çš„ä¸“æ  - CSDNåšå®¢</a></p><p><a href="https://blog.csdn.net/u012468263/article/details/77920234">æŒ‰å­—èŠ‚ç¼–å€ä¸æŒ‰å­—ç¼–å€ - Lyonsæˆé•¿ä¸“æ  - CSDNåšå®¢</a></p><p><a href="https://blog.csdn.net/loverszhaokai/article/details/5988772">å­—ã€å­—é•¿ã€å­—èŠ‚ã€ä½ - loverszhaokai - CSDNåšå®¢</a></p><p><a href="https://zhidao.baidu.com/question/349691474/answer/2898335743?entrytime=1546051427400&amp;fr=index_ans&amp;word=%E5%9C%B0%E5%9D%80%E7%BA%BF%2C%E6%95%B0%E6%8D%AE%E7%BA%BF">ä»€ä¹ˆæ˜¯åœ°å€çº¿å’Œæ•°æ®çº¿ï¼Œä»¥åŠä»–ä»¬å’Œè®¡ç®—æœºå†…å­˜ä¹‹é—´çš„å…³ç³»ï¼Ÿ</a></p><h1 id="åœ¨çº¿ide"><a href="#åœ¨çº¿ide" class="headerlink" title="åœ¨çº¿ide"></a>åœ¨çº¿ide</h1><p><a href="https://www.tutorialspoint.com/codingground.htm">Free Online IDE and Terminal</a></p><h1 id="ç®—æ³•ä¸æ•°æ®ç»“æ„"><a href="#ç®—æ³•ä¸æ•°æ®ç»“æ„" class="headerlink" title="ç®—æ³•ä¸æ•°æ®ç»“æ„"></a>ç®—æ³•ä¸æ•°æ®ç»“æ„</h1><h2 id="ç½‘ç«™-2"><a href="#ç½‘ç«™-2" class="headerlink" title="ç½‘ç«™"></a>ç½‘ç«™</h2><p><a href="https://visualgo.net/en">VisuAlgo - é€šè¿‡åŠ¨ç”»å¯è§†åŒ–æ•°æ®ç»“æ„å’Œç®—æ³•</a></p><p><a href="https://csacademy.com/app/graph_editor/">Graph Editor</a></p><p><a href="https://algorithm.yuanbin.me/zh-hans/">æ•°æ®ç»“æ„ä¸ç®—æ³•/leetcode/lintcodeé¢˜è§£</a></p><p><a href="https://www.kancloud.cn/digest/pieces-algorithm/163604">ç‚¹æ»´ç®—æ³• Â· çœ‹äº‘</a></p><p><a href="https://wizardforcel.gitbooks.io/the-art-of-programming-by-july/content/00.01.html">ç¨‹åºå‘˜å¦‚ä½•å‡†å¤‡é¢è¯•ä¸­çš„ç®—æ³• | ç¼–ç¨‹ä¹‹æ³•ï¼šé¢è¯•å’Œç®—æ³•å¿ƒå¾—</a></p><h2 id="æ–‡ç« -1"><a href="#æ–‡ç« -1" class="headerlink" title="æ–‡ç« "></a>æ–‡ç« </h2><p><a href="https://www.cnblogs.com/zhangtianq/p/5839909.html">ä»å¤´åˆ°å°¾å½»åº•ç†è§£KMP - Chris_z - åšå®¢å›­</a></p><p><a href="https://blog.csdn.net/mengxiang000000/article/details/50532266">KMPç®—æ³•ï¼šKMPç®—æ³•ä¸ªäººç†è§£+nextæ•°ç»„ç»†èŠ‚å¤„ç†çš„æ–¹æ³•_ mengxiang000000-CSDNåšå®¢</a></p><h1 id="ACM"><a href="#ACM" class="headerlink" title="ACM"></a>ACM</h1><h2 id="ç½‘ç«™-3"><a href="#ç½‘ç«™-3" class="headerlink" title="ç½‘ç«™"></a>ç½‘ç«™</h2><p><a href="https://oi-wiki.org/">OI Wiki</a></p><p><a href="http://oeis.org/">The On-Line Encyclopedia of Integer SequencesÂ® (OEISÂ®)</a></p><p><a href="https://www.acwing.com/about/">AcWing</a></p><h2 id="æ–‡ç« -2"><a href="#æ–‡ç« -2" class="headerlink" title="æ–‡ç« "></a>æ–‡ç« </h2><p><a href="http://acmicpc.info/archives/224">å„å¤§OJè¿‘æœŸæ¯”èµ›æ±‡æ€» - ACM/ICPCä¿¡æ¯ç«™</a></p><p><a href="https://github.com/lyy289065406/POJ-Solving-Reports">åŒ—å¤§ACMï¼šPOJè¯•é¢˜åˆ†ç±» Â· è§£é¢˜æŠ¥å‘Š</a></p><p><a href="http://exp-blog.com/gitbook/book/markdown/technical/algorithm/acm/ACM%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95%E6%A8%A1%E6%9D%BF.html">ACM å¸¸ç”¨ç®—æ³•æ¨¡æ¿ Â· EXP-BLOG</a></p><p><a href="http://exp-blog.com/gitbook/book/markdown/technical/algorithm/acm/ACMç»ç‰ˆèµ„æºå…¬å¼€.html">ACM ç»ç‰ˆèµ„æºå…¬å¼€ Â· EXP-BLOG</a></p><p><a href="http://blog.greenwicher.com/2017/01/03/codeforces-problemset/?_client_version=7.0.0.0&amp;cuid=E25EB8FF3FC2477B203588E26E393EF5%7C864180730330268&amp;timestamp=1521915043054">Codeforcesç§‘å­¦åˆ·é¢˜æŒ‡å—ï¼Œä¸€å›¾ä¸€è¡¨ä¾¿å¤Ÿäº† | Greenwicherâ€™s Blog</a></p><p><a href="https://blog.csdn.net/hbhszxyb/article/details/19845559">OJ(Online Judge)ç³»ç»ŸåŠACMæµ‹è¯•é¢˜åº“å¤§å…¨_é¢˜åº“_hbhszxybçš„ä¸“æ -CSDNåšå®¢</a></p><p><a href="https://wenku.baidu.com/view/40f6eb1bc281e53a5802ffab?pcf=2">acmå¸¸ç”¨è¯æ±‡ - ç™¾åº¦æ–‡åº“</a></p><p><a href="https://github.com/Smith-Cruise/ACM_difficult_words_list">Smith-Cruise/ACM_difficult_words_list: ä¸ºä¸­å›½ACMé€‰æ‰‹æä¾›çš„å•è¯è¡¨!</a></p><p><a href="https://menyf.gitbooks.io/acm-icpc-template/">ACMæ¨¡æ¿</a></p><h1 id="ä¸ªäººåšå®¢"><a href="#ä¸ªäººåšå®¢" class="headerlink" title="ä¸ªäººåšå®¢"></a>ä¸ªäººåšå®¢</h1><p><a href="http://blog.greenwicher.com/">Greenwicherâ€™s Blog</a></p><p><a href="http://exp-blog.com/gitbook/book/index.html">é¦–é¡µ Â· EXP-BLOG</a></p><p><a href="https://moeclub.org/page/1/?spm=17.9">èŒå’– | MoeClub.org</a></p><p><a href="https://laod.cn/">è€Dåšå®¢ | å…³æ³¨è°·æ­ŒæœåŠ¡ï¼Œåˆ†äº«äº’è”ç½‘ç²¾ç¥ï¼</a></p><p><a href="https://www.yangzhiping.com/">Home - é˜³å¿—å¹³çš„ç½‘å¿—</a></p><p><a href="https://teddysun.com/">ç§‹æ°´é€¸å†°</a></p><p><a href="https://www.flyzy2005.com/">flyzyå°ç«™ - Learning on the way</a></p><p><a href="https://lala.im/">è’å²›-åˆ†äº«åˆ›é€ å¿«ä¹</a></p><p><a href="https://www.94ish.me/">å°±æ˜¯çˆ±ç”Ÿæ´»-å‘ç°ç”Ÿæ´»çš„å¦ä¸€é¢</a></p><p><a href="https://www.moerats.com/">Ratâ€™s Blog - ç›¸é€¢çš„äººä¼šå†ç›¸é€¢</a></p><p><a href="https://odcn.top/">oD^Blog &gt; è®°å½•ç‚¹æ»´</a></p><p><a href="http://mindhacks.cn/">åˆ˜æœªé¹ | Mind Hacks â€“ æ€ç»´æ”¹å˜ç”Ÿæ´»</a></p><p><a href="https://hqidi.com/">ç¬›å£° â€“ å¯»å¸¸çš„äººå„¿ä¾æ—§</a></p><p><a href="http://xzm2001.cn/">æŸæ¸£æ¸£xzmçš„blog</a></p><p><a href="https://hui-wang.info/">ç‹è¾‰çš„åšå®¢</a></p><p><a href="http://xiehongfeng100.github.io/">Maxâ€™s Blog</a></p><p><a href="https://xzos.net/">xzOS - For Coding Life</a></p><h1 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h1><p><a href="http://www.thinkwiki.org/wiki/Fan_control_scripts#Other">é£æ‰‡æ§åˆ¶è„šæœ¬ - ThinkWiki</a></p><p><a href="https://sdkman.io/">Home - SDKMAN! the Software Development Kit Manager</a></p><p><a href="http://linux.vbird.org/new_linux.php">é³¥å“¥çš„ Linux ç§æˆ¿èœ â€” å­¸ç¿’ Linux æ–°æ‰‹çš„å»ºè­°</a></p><p><a href="http://www.ttlsa.com/tools/axel-multi-thread-download-tool-detailed/">Axelå¤šçº¿ç¨‹ä¸‹è½½å·¥å…·ä½¿ç”¨è¯¦è§£ â€“ è¿ç»´ç”Ÿå­˜æ—¶é—´</a></p><p><a href="https://upload.wikimedia.org/wikipedia/commons/9/96/Linux_Distribution_Timeline_08_Aug_2017.svg">GNU/Linux Distributions Timeline</a></p><p><a href="https://www.lulinux.com/archives/3614">è®ºæœ€é€‚åˆå¼€å‘ç”¨çš„å‡ æ¬¾Linuxæ¡Œé¢ç³»ç»Ÿ | æ’¸Linux</a></p><p><a href="https://alim0x.gitbooks.io/awesome-linux-software-zh_cn/content/">Introduction Â· è¶…èµçš„ Linux è½¯ä»¶</a></p><p><a href="https://mp.weixin.qq.com/s/wTrd8B_KTp3jGYc6QdFldg">ä¸€æ–‡äº†è§£åå¤§ Linux å‘½ä»¤è¡Œå·¥å…·ï¼</a></p><p><a href="https://linux.cn/article-9767-1.html">åˆ†äº«|Linux ä¸­ä¸€ç§å‹å¥½çš„ find æ›¿ä»£å·¥å…·</a></p><p><a href="https://ubuntuqa.com/article/416.html">æ˜¯å¦æœ‰å¯èƒ½è·å¾—æœ€è¿‘å®‰è£…çš„è½¯ä»¶åŒ…åˆ—è¡¨ï¼Ÿ - Ubuntué—®ç­”</a></p><p><a href="https://linux.cn/article-10139-1.html?utm_source=oschina-app">æŠ€æœ¯|åœ¨ Linux å‘½ä»¤è¡Œä¸­ä½¿ç”¨ ls åˆ—å‡ºæ–‡ä»¶çš„æŠ€å·§</a></p><p><a href="https://linux.cn/article-5777-1.html">æŠ€æœ¯|Linux ä¸‹å¦‚ä½•å¤„ç†åŒ…å«ç©ºæ ¼å’Œç‰¹æ®Šå­—ç¬¦çš„æ–‡ä»¶å</a></p><p><a href="https://twitter.com/shellexy/status/442631642549456896">åŒå­é›ªæ¢¨ çš„ Twitter: â€œ#tip ç”¨ rsync -avP ä»£æ›¿ cp -av æ‹·è´æ–‡ä»¶å¤¹é€Ÿåº¦å¿«ä¸”å¯ä»¥æ˜¾ç¤ºè¿›åº¦æ¡ã€‚â€</a></p><p><a href="https://man.linuxde.net/">Linuxå‘½ä»¤å¤§å…¨(æ‰‹å†Œ)_Linuxå¸¸ç”¨å‘½ä»¤è¡Œå®ä¾‹è¯¦è§£_Linuxå‘½ä»¤å­¦ä¹ æ‰‹å†Œ</a></p><p><a href="https://linux.cn/article-9172-1.html">æŠ€æœ¯|è¯¦è§£å¦‚ä½•ç”¨æºä»£ç å®‰è£…è½¯ä»¶ï¼Œä»¥åŠå¦‚ä½•å¸è½½å®ƒ</a></p><p><a href="https://blog.csdn.net/u014114990/article/details/50310667">linuxå¤šæ ¸å¤„ç†ä¸‹æé«˜ç¼–è¯‘é€Ÿåº¦ make -j - u014114990çš„ä¸“æ  - CSDNåšå®¢</a></p><p><a href="https://www.xuebuyuan.com/1796326.html">Linux make ä¿å­˜é”™è¯¯æ—¥å¿— | å­¦æ­¥å›­</a></p><p><a href="https://linux.cn/article-10480-1.html">æŠ€æœ¯|tmuxï¼šé€‚ç”¨äºé‡åº¦å‘½ä»¤è¡Œ Linux ç”¨æˆ·çš„ç»ˆç«¯å¤ç”¨å™¨</a></p><p><a href="https://alternativeto.net/">AlternativeTo - Linuxä¸‹è½¯ä»¶ä»£æ›¿æ–¹æ¡ˆ</a></p><p><a href="http://www.ruanyifeng.com/blog/2019/08/xargs-tutorial.html">xargs å‘½ä»¤æ•™ç¨‹ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—</a></p><p><a href="https://askubuntu.com/questions/142300/how-to-fix-error-unknown-filesystem-grub-rescue">å¦‚ä½•è§£å†³â€œé”™è¯¯ï¼šæœªçŸ¥çš„æ–‡ä»¶ç³»ç»Ÿã€‚grub rescue&gt; - è¯·æ±‚Ubuntu</a></p><p><a href="https://blog.jae.sh/article/zqle60.html#4.%E5%AE%89%E8%A3%85Powerline%E5%AD%97%E4%BD%93">Ubuntuç»ˆç«¯ç¾åŒ–:oh-my-zsh+Powerlevel9k|åŒé±¼åº§</a></p><h1 id="Arch"><a href="#Arch" class="headerlink" title="Arch"></a>Arch</h1><p><a href="https://github.com/helmuthdu/aui">helmuthdu/aui: Archlinux Ultimate Installâ€”ä¸€é”®å®‰è£…è„šæœ¬</a></p><p><a href="https://github.com/NiiiKlaus/Get-my-Arch-Linux">ä¿å§†çº§Arch Linuxå®‰è£…+é…ç½®æ–‡æ¡£</a></p><p><a href="https://www.liushike.com/virtual/docker/%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2-v2ray.html">pacman/Tips and tricks (ç®€ä½“ä¸­æ–‡) - ArchWiki</a></p><p><a href="https://wiki.archlinux.org/index.php/General_recommendations">General recommendations (ç®€ä½“ä¸­æ–‡) - ArchWiki</a></p><p><a href="https://szp15.com/2017/08/16/pc-config/#_2-1-%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86">PCç³»ç»Ÿé…ç½® | æ©¡æ ‘å±‹</a></p><p><a href="https://blog.csdn.net/listener_ri/article/details/46230437">archä½¿ç”¨create_apåˆ›å»ºwifiçƒ­ç‚¹_ListenerRiçš„åšå®¢-CSDNåšå®¢</a></p><p><a href="https://www.iteye.com/blog/willam2004-1299151">ArchLinuxå¦‚ä½•è®¾å€¼æ–‡ä»¶çš„é»˜è®¤æ‰“å¼€ç¨‹åº - - ITeyeåšå®¢</a></p><p><a href="https://www.lulinux.com/archives/2327">antergos/ArchLinuxäº2017å¹´5æœˆ7æ—¥æ»šæŒ‚ä¹‹åä¿®å¤è¿‡ç¨‹è®°å½•ä¸ç»éªŒ | æ’¸Linux</a></p><p><a href="https://www.cnblogs.com/bluestorm/p/5929172.html">Arch Linux å®‰è£…ã€é…ç½®ã€ç¾åŒ–å’Œä¼˜åŒ– - petercao - åšå®¢å›­</a></p><p><a href="https://www.cnblogs.com/vachester/p/5649813.html">Archlinuxä¸‹i3wmä¸urxvtçš„é…ç½® - va_chester - åšå®¢å›­</a></p><p><a href="https://ohmyarch.github.io/2017/01/15/Linux%E4%B8%8B%E7%BB%88%E6%9E%81%E5%AD%97%E4%BD%93%E9%85%8D%E7%BD%AE%E6%96%B9%E6%A1%88/">Linuxä¸‹ç»ˆæå­—ä½“é…ç½®æ–¹æ¡ˆ | Michealâ€™s Blog</a></p><p><a href="https://segmentfault.com/a/1190000008280278">ArchLinuxæ­å»ºé«˜æ•ˆä¾¿æ·çš„å¹³é“ºå¼æ¡Œé¢ - ç–¯ç‹‚çš„çˆ±å› æ–¯å¦ - SegmentFault æ€å¦</a></p><h1 id="V2ray"><a href="#V2ray" class="headerlink" title="V2ray"></a>V2ray</h1><p><a href="https://www.liushike.com/virtual/docker/%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2-v2ray.html">ä½¿ç”¨Dockerå®¹å™¨å¿«é€Ÿéƒ¨ç½² V2Ray-ç•™æ—¶åˆ»è¿ç»´ç½‘</a></p><h1 id="äº‘æœåŠ¡å™¨"><a href="#äº‘æœåŠ¡å™¨" class="headerlink" title="äº‘æœåŠ¡å™¨"></a>äº‘æœåŠ¡å™¨</h1><p><a href="https://xiaozhou.net/introduction-of-cn2-and-cn2-vps-2017-12-11.html">CN2çš„é‚£äº›äº‹-CN2çº¿è·¯ä¸VPSæœåŠ¡å•†ä»‹ç» | iTimothy</a></p><p><a href="https://www.vpscang.com/">VPSå¤§å…¨ - ä½ çš„VPSä»“åº“,æä¾›VPSåˆ—è¡¨, åº“å­˜, æœºæˆ¿, ä»·æ ¼ç­‰ä¿¡æ¯</a></p><p><a href="https://www.zhujiceping.com/">å›½å¤–ä¸»æœºæµ‹è¯„ - å›½å¤–VPSï¼Œå›½å¤–æœåŠ¡å™¨ï¼Œå›½å¤–ä¸»æœºï¼Œæµ‹è¯„åŠä¼˜æƒ ç </a></p><p><a href="https://www.vpsgo.com/domain-ns-cloudflare-dnspod.html#NS">åŸŸåè§£ææ•™ç¨‹ï¼šCloudflareè§£æä¸DNSPodè§£æ - VPS GO</a></p><p><a href="https://www.douban.com/note/692461372/">VPSæœåŠ¡å™¨è¡Œä¸šæœ¯è¯­é»‘è¯å¤§å…¨</a></p><p><a href="https://www.vpsgo.com/vps-ceping-properties.html">VPSæµ‹è¯„çš„åŸºæœ¬å±æ€§ä»‹ç»ï¼šæ€§èƒ½ / è·¯ç”± / å»¶è¿Ÿ / ä¸‹è½½é€Ÿåº¦ - VPS GO</a></p><p><a href="https://affyun.com/">Affyun ğŸ›’ â€“ æ¯æ—¥æ¨é€æ–°offers</a></p><p><a href="https://www.zrj96.com/post-762.html">åˆ†äº«æˆ‘å¯¹äºVPSä¸»æœºçš„ä¸€äº›ç»éªŒç»™å…¥å‘èŒæ–° | åˆè¡Œåšå®¢</a></p><h1 id="Vim"><a href="#Vim" class="headerlink" title="Vim"></a>Vim</h1><p><a href="https://linux.cn/article-8337-1.html">æŠ€æœ¯|å¦‚ä½•ä» Vim ä¸­è®¿é—® shell æˆ–è€…è¿è¡Œå¤–éƒ¨å‘½ä»¤</a></p><p><a href="http://blog.sina.cn/dpool/blog/s/blog_6fd48bff0102vcdm.html">Vim ä¸åŒçª—å£ä¹‹é—´çš„å¤åˆ¶ç²˜è´´_ç››dmgy</a></p><p><a href="https://vimawesome.com/?q=solar">Vim Awesome</a></p><p><a href="http://www.360doc.com/content/14/0818/15/15064667_402843521.shtml">æ‹¼è£…çš„è‰ºæœ¯ï¼švimä¹‹IDEè¿›åŒ–å®å½•</a></p><p><a href="https://blog.csdn.net/u010871058/article/details/54253774">Vimçš„å¼ºå¤§é…ç½®æ–‡ä»¶ï¼ˆä¸€é”®é…ç½®ï¼‰_u010871058çš„ä¸“æ -CSDNåšå®¢</a></p><h1 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h1><p><a href="https://segmentfault.com/a/1190000019203847">VsCodeä»é›¶å¼€å§‹é…ç½®ä¸€ä¸ªå±äºè‡ªå·±çš„Vueå¼€å‘ç¯å¢ƒ - æ—¥å¸¸è®°å½• - SegmentFault æ€å¦</a></p><p><a href="http://www.javanx.cn/20180720/vue-plug/">vueæ’ä»¶æ€»ç»“â€”â€”æ€»æœ‰ä½ èƒ½ç”¨ä¸Šçš„æ’ä»¶ _ Webç§€</a></p><h1 id="æ–è®¯N1"><a href="#æ–è®¯N1" class="headerlink" title="æ–è®¯N1"></a>æ–è®¯N1</h1><p><a href="https://www.mivm.cn/phicomm-n1-linux/">æ–è®¯N1æŠ˜è…¾è®°ï¼šè¿è¡Œ Linux åŠä¼˜åŒ– | ç±³Vç±³</a></p><p><a href="https://www.right.com.cn/FORUM/forum.php?extra=page=1&amp;filter=typeid&amp;mod=viewthread&amp;tid=321218&amp;typeid=21">N1å®‰è£…Linuxã€ç§æœ‰äº‘NextCloudã€è¿…é›·è¿œç¨‹Xwareã€Aria2ç­‰</a></p><p><a href="https://www.right.com.cn/forum/forum.php?extra=page=1&amp;filter=typeid&amp;mod=viewthread&amp;tid=323198&amp;typeid=21">[2018-6-9] æ–è®¯T1/N1 Uç›˜å¯åŠ¨åŸºäº Linux çš„ç¬¬ä¸‰æ–¹ç³»ç»Ÿ</a></p><p><a href="https://www.right.com.cn/forum/forum.php?extra=page=9&amp;filter=typeid&amp;mod=viewthread&amp;tid=329008&amp;typeid=21">åˆ†äº«ä¸€ä¸ªentwareé•œåƒ,å†…ç½®aria2,transmission,å¯é“äº‘,samba,frp</a></p><p><a href="https://www.right.com.cn/forum/forum.php?extra=page=10&amp;filter=typeid&amp;mod=viewthread&amp;tid=322991&amp;typeid=21">åº”å¹¿å¤§äººæ°‘ç¾¤ä¼—è¦æ±‚,æä¸ªN1é€šè¿‡Uç›˜è·‘LINUX(armbian)çš„æ•™ç¨‹ </a></p><p><a href="https://www.right.com.cn/forum/forum.php?extra=page=7&amp;filter=typeid&amp;mod=viewthread&amp;tid=326034&amp;typeid=21">[2018-6-16] æ–è®¯T1/N1 Armbian Linux è¿›é˜¶ä½¿ç”¨</a></p><p><a href="https://www.right.com.cn/forum/forum.php?extra=page=1&amp;filter=typeid&amp;mod=viewthread&amp;tid=327496&amp;typeid=21">æˆåŠŸï¼æŠŠArmbian å®‰è£…åˆ° emmcå¹¶ç›´æ¥ä» emmc å¯åŠ¨</a></p><p><a href="https://www.right.com.cn/forum/thread-327967-1-1.html">N1åˆ·å…¥Linuxåå¯ä»¥åˆ é™¤æ‰çš„åŸåˆ†åŒºåŠå†…å®¹ </a></p><p><a href="https://www.right.com.cn/forum/forum.php?mod=viewthread&amp;tid=342164">phicomm N1 armbianç¯å¢ƒä¸‹å®‰è£…åŠŸèƒ½ä¸°å¯Œçš„å¼€æºNASç³»ç»Ÿ OpenMediaVault</a></p><p><a href="https://www.right.com.cn/forum/forum.php?mod=viewthread&amp;tid=341724">N1 ç›’å­ Ubuntu 3.14 å†…æ ¸å¼€å¯æ— çº¿çƒ­ç‚¹ + é…ç½® dnsmasq è§£æè‡ªå®šä¹‰åŸŸå</a></p><p><a href="https://www.right.com.cn/forum/thread-335609-1-1.html">[2018-09-08æ›´æ–°5.60ç‰ˆæœ¬4.18.7å†…æ ¸]ç»™N1/T1è£…ä¸ŠåŸç”ŸArmbian_4.18å†…æ ¸</a></p><p><a href="https://yadi.sk/d/pHxaRAs-tZiei">ARMBIAN â€” Yandex.Disk</a></p><p><a href="https://www.right.com.cn/forum/forum.php?extra=page=1&amp;filter=typeid&amp;mod=viewthread&amp;tid=335867&amp;typeid=21">(9.27æ›´æ–°å›¾)4.18å†…æ ¸åˆ·å…¥emmcåæ¢å¤åˆ†åŒºè¡¨æ–¹æ³•</a></p><p><a href="https://www.right.com.cn/forum/forum.php?extra=page=1&amp;filter=typeid&amp;mod=viewthread&amp;tid=342558&amp;typeid=21">å°ç™½æ•™ç¨‹N1 armbian5.62åŠä»¥ä¸Šå†™å…¥eMMCï¼Œä½¿ç”¨armbian-configå®‰è£…OpenMediaVaultç­‰â€¦</a></p><p><a href="https://www.right.com.cn/forum/thread-330262-1-1.html">N1åˆ·Armbianè¿›emmcåï¼Œå¦‚ä½•é‡åˆ·ï¼Ÿ</a></p><p><a href="https://www.right.com.cn/forum/forum.php?mod=viewthread&amp;page=1&amp;tid=345514">N1èƒ½é‡å¤è£…armbianè¿›emmcå—</a></p><p><a href="https://www.right.com.cn/FORUM/thread-338759-1-1.html">[2018-9-22]æ–è®¯å¤©å¤©é“¾N1 å®˜æ”¹v2.2çº¿åˆ·åŒ…ï¼Œç²¾ç®€ç‰ˆï¼Œæ‰©å±•åŠŸèƒ½å¯é€‰</a></p><p><a href="https://github.com/HouCoder/blog/blob/master/hacking/install-armbian-on-phicomm-n1/README.md">æ–è®¯ N1 å®‰è£… Armbian æ•™ç¨‹</a></p><h1 id="æ‰‹æœº"><a href="#æ‰‹æœº" class="headerlink" title="æ‰‹æœº"></a>æ‰‹æœº</h1><p><a href="http://www.fanzicai.com/blog_hexo/Phone/20160729-V5Max%E4%BC%98%E5%8C%96GPS%E8%AE%BE%E7%BD%AE.html">V5Maxä¼˜åŒ–GPSè®¾ç½® | fanzi.home@web</a></p><p><a href="https://bbs.letitfly.me/u/HuanZHIY/discussions">æ¡“æ¸…å±±æœåŠ¡ç¦ç”¨é…ç½®</a><br><a href="http://www.sqlsec.com/2018/05/termux.html">Termux é«˜çº§ç»ˆç«¯å®‰è£…ä½¿ç”¨é…ç½®æ•™ç¨‹ | å›½å…‰</a></p><p><a href="https://tonybai.com/2017/11/09/hello-termux/">Helloï¼ŒTermux | Tony Bai</a></p><p><a href="https://wiki.termux.com/wiki/Hardware_Keyboard">ç¡¬ä»¶é”®ç›˜ - Termux Wiki</a></p><p><a href="http://en.miui.com/">en-miui</a></p><p><a href="https://atmb.top/">ä¸»é¡µ-ç§‹ä¹‹ç›’</a></p><h1 id="GCU"><a href="#GCU" class="headerlink" title="GCU"></a>GCU</h1><p><a href="http://yxxt.gcu.edu.cn/">è¿æ–°ç³»ç»Ÿ</a></p><p><a href="http://jwxt.gcu.edu.cn/default2.aspx">æ­£æ–¹æ•™åŠ¡ç®¡ç†ç³»ç»Ÿ</a></p><p><a href="http://sc.gcu.edu.cn/#a1_408">åå¹¿æ™ºæ…§æ ¡å›­</a></p><p><a href="http://gcu.fy.chaoxing.com/portal">åå—ç†å·¥å¤§å­¦å¹¿å·å­¦é™¢ç½‘ç»œæ•™å­¦å¹³å°</a></p><p><a href="http://sms.gcu.edu.cn/sms2/acegilogin.jsp">å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿ</a></p><p><a href="http://cst.gcu.edu.cn/">åå—ç†å·¥å¤§å­¦å¹¿å·å­¦é™¢è®¡ç®—æœºå·¥ç¨‹å­¦é™¢</a></p><h1 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h1><p><a href="https://github.com/xirong/my-markdown">xirong/my-markdown: markdown ä»‹ç»/å­¦ä¹ /å·¥å…·/èµ„æ–™</a></p><p><a href="https://www.docs4dev.com/">é¦–é¡µ | Docs4dev</a></p><p><a href="http://www.ruanyifeng.com/blog/2019/02/password.html">æ‰¾å›å¯†ç çš„åŠŸèƒ½è®¾è®¡ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—</a></p><p><a href="https://www.zhihu.com/question/36991788">ITè¡Œä¸šéƒ½æœ‰å“ªäº›èŒä½ï¼Œåˆå­¦è€…ï¼ˆ0åŸºç¡€ï¼Œæ–°äººï¼‰è¯¥å¦‚ä½•é€‰æ‹©ï¼Œæ‰èƒ½å¤Ÿå¿«é€Ÿè¿›å…¥è¿™ä¸ªè¡Œä¸šï¼Ÿ - çŸ¥ä¹</a></p><p><a href="https://www.zhihu.com/question/48219401">ä½ æ˜¯å¦‚ä½•å­¦ä¼šæ­£åˆ™è¡¨è¾¾å¼çš„ï¼Ÿ - çŸ¥ä¹</a></p><p><a href="https://www.drivereasy.com/knowledge/samsung-mtp-usb-device-driver-was-not-successfully-installed-in-windows-7/">MTP USBè®¾å¤‡é©±åŠ¨ç¨‹åºå¤±è´¥[å·²è§£å†³] - é©±åŠ¨ç¨‹åºç®€å•</a></p><p><a href="http://www.bubuko.com/infodetail-3068682.html">ç½‘ç»œå•ä½æ¢ç®—</a></p><p><a href="https://www.zhihu.com/question/21123049">å›½å†…å¤–ç¼–ç¨‹å­¦ä¹ ç½‘ç«™æ¨èï¼Ÿ - çŸ¥ä¹</a></p><p><a href="https://www.zhihu.com/question/36149122">åœ¨æ ¡ç”Ÿä¸ºäº†é¢è¯•ï¼Œæœ‰å¿…è¦å¼ºè¡Œè®°ä½ä¸€äº›å¤æ‚ç®—æ³•å¦‚çº¢é»‘æ ‘ã€KMPç­‰çš„å®ç°å—ï¼Ÿ - çŸ¥ä¹</a></p><p><a href="https://www.geeksforgeeks.org/quiz-corner-gq/#C%20Programming%20Mock%20Tests">TOPIC WISE Previous Year GATE Questions with Solutions</a></p><p><a href="https://www.androiddevtools.cn/">Android Studioç‰ˆæœ¬å¤§å…¨</a></p><p><a href="https://grunmin.github.io/2018/09/%E6%8F%90%E9%AB%98pdf%E7%9A%84%E5%AF%B9%E6%AF%94%E5%BA%A6/">æé«˜PDFçš„å¯¹æ¯”åº¦</a></p>]]></content>
      
      
      <categories>
          
          <category> èµ„æº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¹¦ç­¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‡ªç”¨å·¥å…·ï¼ˆç§»è‡³notionæ›´æ–°ï¼ï¼‰</title>
      <link href="/2020/02/11/tools/"/>
      <url>/2020/02/11/tools/</url>
      
        <content type="html"><![CDATA[<p>UpdateTime: 2020/03/12</p><span id="more"></span><h1 id="è‹±è¯­"><a href="#è‹±è¯­" class="headerlink" title="è‹±è¯­"></a>è‹±è¯­</h1><p><a href="https://www.polishmywriting.com/">Check Spelling, Style, and Grammar with After the Deadline</a></p><p><a href="http://www.en998.com/sentence/">è‹±è¯­å¥å­æˆåˆ†åˆ†æ åœ¨çº¿è‹±è¯­å¥å­ç»“æ„åˆ†æå™¨ è¯­æ³•åˆ†æè½¯ä»¶ å¥è§£éœ¸</a></p><p><a href="https://www.nounplus.net/grammarcheck/">Grammar Check Online - Itâ€™s a Free tool by NOUNPLUS</a></p><h1 id="èµ„æº"><a href="#èµ„æº" class="headerlink" title="èµ„æº"></a>èµ„æº</h1><p><a href="https://github.com/timmy3131/design-resource">timmy3131/design-resource: A list of design resources.</a></p><p><a href="https://linux.cn/article-9443-1.html">åˆ†äº«|440+ ä¸ªå…è´¹çš„ç¼–ç¨‹ &amp; è®¡ç®—æœºç§‘å­¦çš„åœ¨çº¿è¯¾ç¨‹</a></p><p><a href="http://jinxuliang.com/home/index">é‡‘è€å¸ˆçš„è®¡ç®—æœºæŠ€æœ¯è‡ªå­¦ç½‘ç«™</a></p><p><a href="https://www.houtouke.com/">çŒ´å¤´å®¢ | ä¸“æ³¨ä¼˜è´¨è§†é¢‘æ•™ç¨‹ã€ç½‘ç»œèµ„æºçš„ä¼‘é—²å°ç«™</a></p><p><a href="https://windsys.whatk.me/">Windsys Project</a></p><p><a href="https://www.winos.me/">WINOS | å‰æ²¿çš„ç²¾ç®€ç³»ç»Ÿä¸‹è½½</a></p><h1 id="PDFä¸‹è½½"><a href="#PDFä¸‹è½½" class="headerlink" title="PDFä¸‹è½½"></a>PDFä¸‹è½½</h1><h2 id="è®¡ç®—æœº"><a href="#è®¡ç®—æœº" class="headerlink" title="è®¡ç®—æœº"></a>è®¡ç®—æœº</h2><p><a href="http://bestcbooks.com/">è®¡ç®—æœºä¹¦ç±æ§</a></p><p><a href="http://it-ebooks.flygon.net/">è®¡ç®—æœºç”µå­ä¹¦</a></p><p><a href="https://github.com/justjavac/free-programming-books-zh_CN">å…è´¹çš„è®¡ç®—æœºç¼–ç¨‹ç±»ä¸­æ–‡ä¹¦ç±</a></p><p><a href="https://itbook.download/">å…è´¹ITè®¡ç®—æœºç”µå­ä¹¦ä¸‹è½½ç½‘ç«™</a></p><p><a href="https://itpanda.net/book/">ITç†ŠçŒ«-è®¡ç®—æœºä¹¦ç±ä¸‹è½½</a></p><h2 id="ç»¼åˆ"><a href="#ç»¼åˆ" class="headerlink" title="ç»¼åˆ"></a>ç»¼åˆ</h2><p><a href="https://www.pdfdrive.com/">PDF Drive - Search and download PDF files for free.</a></p><p><a href="https://www.jiumodiary.com/">Jiumo Search é¸ æ‘©æœç´¢ - æ–‡æ¡£æœç´¢å¼•æ“</a></p><p><a href="http://shuxiangjia.cn/">ä¹¦äº«å®¶-ç”µå­ä¹¦ä¸‹è½½å¯¼èˆª</a></p><p><a href="http://gen.lib.rus.ec/">Library Genesis è‹±æ–‡pdfæœç´¢å¼•æ“</a></p><p><a href="https://en.booksee.org/">Electronic Library. Download books for free. Over 2 million books and magazines</a></p><h1 id="å¯¼èˆª"><a href="#å¯¼èˆª" class="headerlink" title="å¯¼èˆª"></a>å¯¼èˆª</h1><p><a href="http://ilxdh.com/">é¾™è½©å¯¼èˆª-åšä¸ªæœ‰ç”¨çš„å¯¼èˆª</a></p><p><a href="http://www.giffox.com/">è€å¸æœºå¯¼èˆª</a></p><p><a href="https://www.jubt.net/cn/index.html">èšBT - èšåˆæœ€ä¼˜è´¨çš„BTã€ç£åŠ›èµ„æº | BTæœç´¢ ç£åŠ›æœç´¢ äº‘ç›˜æœç´¢ å½±è§†APP åœ¨çº¿å½±è§† ç£åŠ›å½±è§†</a></p><p><a href="https://www.volf.club/">ç‹¼ç‰Œå·¥ä½œç½‘å€å¯¼èˆª - å¯¼èˆª</a></p><p><a href="https://www.egouz.com/">å›½å¤–ç½‘ç«™æ¨è-åˆ†äº«äº’è”ç½‘-å¤–å›½ç½‘ç«™å¤§å…¨</a></p><p><a href="http://lackar.com/aa/">AnywhereAnything</a></p><p><a href="http://code.giffox.com/">ç¨‹åºå‘˜å¯¼èˆª - ä»£ç å¦‚è¯—ï¼</a></p><p><a href="http://chuangzaoshi.com/code">åˆ›é€ ç‹® åˆ›æ„å·¥ä½œè€…å¯¼èˆª</a></p><p><a href="https://wht.im/">ä¸‡èŠ±ç­’</a></p><h1 id="èµ„è®¯"><a href="#èµ„è®¯" class="headerlink" title="èµ„è®¯"></a>èµ„è®¯</h1><p><a href="https://www.solidot.org/">Solidot:å¥‡å®¢çš„èµ„è®¯</a></p><p><a href="https://readspike.com/#top">Readspike - Simple news aggregator</a></p><p><a href="https://readhub.cn/topics">Readhub</a></p><p><a href="https://arxiv.org/">è®ºæ–‡â€”arXiv.org e-Print archive</a></p><p><a href="https://www.ershicimi.com/">äºŒåæ¬¡å¹‚-å¸®ä½ å‘ç°æ›´å¥½çš„å…¬ä¼—å·å†…å®¹</a></p><h1 id="æœç´¢"><a href="#æœç´¢" class="headerlink" title="æœç´¢"></a>æœç´¢</h1><p><a href="https://search.chongbuluo.com/">å¿«æœ - æœç´¢å¿«äººä¸€æ­¥ - Google</a></p><p><a href="http://data.chongbuluo.com/">æ•°æ®æœç´¢ - è®©æ•°æ®æœç´¢æ›´ç®€å• - å›½å®¶æ•°æ®</a></p><p><a href="https://weixin.sogou.com/">æœç‹—å¾®ä¿¡æœç´¢_è®¢é˜…å·åŠæ–‡ç« å†…å®¹ç‹¬å®¶æ”¶å½•ï¼Œä¸€æœå³è¾¾</a></p><p><a href="http://www.4243.net/">Googleå­¦æœ¯æœç´¢é•œåƒ<em>sci-hubç½‘å€</em>å¤§æœ¨è™«å­¦æœ¯å¯¼èˆª</a></p><p><a href="https://xtea.io/ts.html">ååˆ€ç”µæŠ¥ç¾¤ç»„æœç´¢</a></p><p><a href="http://zhishi.sssoou.com/">telegramé¢‘é“æœç´¢</a></p><h1 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h1><p><a href="https://flyoffline.enjoymore.fun/">é©¬ä¸Šä¸‹ ç§å­,ç£åŠ›é“¾ç¦»çº¿ä¸‹è½½ æŒ‰éœ€ä¸‹è½½ æƒ³ä¸‹å°±ä¸‹</a></p><p><a href="https://www.loadbt.com/zh">åŸºäºäº‘ç«¯çš„BTç§å­ç¦»çº¿ä¸‹è½½å’Œåœ¨çº¿æ’­æ”¾å™¨ - Loadbt</a></p><p><a href="http://heikeyun.com/">é»‘ç§‘ä¸‹è½½å™¨-å®˜æ–¹ç½‘ç«™</a></p><h1 id="Windowsè½¯ä»¶"><a href="#Windowsè½¯ä»¶" class="headerlink" title="Windowsè½¯ä»¶"></a>Windowsè½¯ä»¶</h1><p><a href="https://www.mpyit.com/">è€æ® | æ®æ¼‚é¥ | äº’è”ç½‘åˆ†äº«ç²¾ç¥ï¼Œä¸“æ³¨æ”¶è—åˆ†äº«ã€Œå®˜æ–¹ã€</a></p><p><a href="https://www.appinn.com/">å°ä¼—è½¯ä»¶</a></p><p><a href="https://www.portablesoft.org/">ç²¾å“ç»¿è‰²ä¾¿æºè½¯ä»¶</a></p><p><a href="https://www.appcgn.com/">è½¯ä»¶ç¼˜ - ç²¾å“ç»¿è½¯ï¼Œå“é‰´ç‹¬ç‰¹ï¼</a></p><p><a href="http://www.qiuquan.cc/">QiuQuanâ€™ Blog | ç²¾å“è½¯ä»¶åˆ†äº«åšå®¢ï¼Œä¸“æ³¨äºè½¯ä»¶çš„ç»¿åŒ–ã€ç²¾ç®€ä¸ä¼˜åŒ–ã€‚</a></p><p><a href="https://www.naodai.org/">è„‘è¢‹ç“œå­</a></p><p><a href="https://masuit.com/misc/5">ç¨€ç¼ºèµ„æºç»Ÿä¸€ä¸‹è½½åœ°å€é¡µ<em>æ‡’å¾—å‹¤å¿«çš„åšå®¢</em>å…¨æ ˆå¼€å‘è€…_äº’è”ç½‘åˆ†äº«ç²¾ç¥</a></p><h1 id="è®ºå›"><a href="#è®ºå›" class="headerlink" title="è®ºå›"></a>è®ºå›</h1><p><a href="https://yaohuo.me/">å¦–ç«ç½‘ - åˆ†äº«ä½ æˆ‘</a></p><p><a href="https://www.v2ex.com/">V2EX</a></p><p><a href="https://www.hostloc.com/">å…¨çƒä¸»æœºäº¤æµè®ºå› - Powered by Discuz!</a></p><h1 id="åœ¨çº¿å·¥å…·"><a href="#åœ¨çº¿å·¥å…·" class="headerlink" title="åœ¨çº¿å·¥å…·"></a>åœ¨çº¿å·¥å…·</h1><h2 id="å·¥å…·é›†"><a href="#å·¥å…·é›†" class="headerlink" title="å·¥å…·é›†"></a>å·¥å…·é›†</h2><p><a href="åœ¨çº¿å·¥å…· - ç¨‹åºå‘˜çš„å·¥å…·ç®±">åœ¨çº¿å·¥å…· - ç¨‹åºå‘˜çš„å·¥å…·ç®±</a></p><p><a href="http://tool.mkblog.cn/">é¦–é¡µ - å­Ÿå¤å·¥å…·ç®±ç½‘é¡µç‰ˆ</a></p><p><a href="https://www.toolfk.com/">åœ¨çº¿å·¥å…·ç®±,ä¸€ä¸ªä¸ºç¨‹åºå‘˜æœåŠ¡å¹¶åˆ›å»ºä»·å€¼çš„åœ¨çº¿å·¥å…·è½¬æ¢ç½‘ç«™ </a></p><p><a href="http://www.nicetool.net/">åœ¨çº¿å·¥å…·å¤§å…¨ï¼Œç”¨å®Œå³èµ°ï¼Œè§¦æ‰‹å¯åŠ_å¥½å·¥å…·ç½‘</a></p><p><a href="http://c.runoob.com/">èœé¸Ÿå·¥å…· - ä¸æ­¢äºå·¥å…·</a></p><p><a href="https://tool.oschina.net/">åœ¨çº¿å·¥å…· â€”â€” OSCHINA.NETç¤¾åŒº</a></p><p><a href="http://www.atool9.com/classification_dev_tools.html">å·¥å…·åˆ†ç±» - åœ¨çº¿ä»£ç è½¬æ¢ - aToolåœ¨çº¿å·¥å…·</a></p><p><a href="https://tools.miku.ac/">MikuTools - ä¸€ä¸ªè½»é‡çš„å·¥å…·é›†åˆ</a></p><p><a href="https://zh.numberempire.com/">æ•°å­—å¸å›½ - æ•°å­¦å·¥å…·</a></p><h2 id="å•ä¸€å·¥å…·"><a href="#å•ä¸€å·¥å…·" class="headerlink" title="å•ä¸€å·¥å…·"></a>å•ä¸€å·¥å…·</h2><p><a href="https://www.draw.io/">åœ¨çº¿ç”»å›¾</a></p><p><a href="http://jsonviewer.stack.hu/">Online JSON Viewer</a></p><p><a href="https://asciinema.org/">asciinema - ä»¥æ­£ç¡®çš„æ–¹å¼è®°å½•å’Œåˆ†äº«æ‚¨çš„ç»ˆç«¯ä¼šè¯</a></p><p><a href="https://www.ilovepdf.com/zh-cn/powerpoint_to_pdf">iLovePDF | ä¸ºPDFçˆ±å¥½è€…æä¾›çš„PDFæ–‡ä»¶åœ¨çº¿å¤„ç†å·¥å…·</a></p><p><a href="https://carbon.now.sh">åœ¨çº¿ä»£ç é«˜äº®æˆªå›¾1</a></p><p><a href="https://www.dute.org/code-snapshot">åœ¨çº¿ä»£ç é«˜äº®æˆªå›¾2</a></p><p><a href="https://tinypng.com/">åœ¨çº¿å‹ç¼©å›¾ç‰‡</a></p><p><a href="https://browserframe.com">åœ¨çº¿ç”Ÿæˆæµè§ˆå™¨å¤–å£³æˆªå›¾</a></p><p><a href="https://colorspark.app/">åœ¨çº¿éšæœºé¢œè‰²</a></p><p><a href="https://fontspark.app/">åœ¨çº¿é¢„è§ˆå­—ä½“</a></p><p><a href="https://explainshell.com/">åˆ†æLinuxShell</a></p><p><a href="https://unbug.github.io/codelf">å˜é‡åæœç´¢</a></p><h2 id="ä¸´æ—¶ä¼ è¾“"><a href="#ä¸´æ—¶ä¼ è¾“" class="headerlink" title="ä¸´æ—¶ä¼ è¾“"></a>ä¸´æ—¶ä¼ è¾“</h2><p><a href="https://cp.anyknew.com/">æ‹·è´å…”(Copytool) - è½»é‡çº§çº¯Webè·¨å¹³å°æ–‡ä»¶ã€æ–‡å­—åˆ†äº«å·¥å…·</a></p><p><a href="https://send.firefox.com/">Firefox Send</a></p><p><a href="https://cowtransfer.com/">å¥¶ç‰›å¿«ä¼  | æ–‡ä»¶ä¼ è¾“æœåŠ¡</a></p><p><a href="https://www.wenshushu.cn/">æ–‡å”å” - ä¼ æ–‡ä»¶ï¼Œæ‰¾æ–‡å”å”ï¼ˆæ°¸ä¸é™é€Ÿï¼‰</a></p><h2 id="ä¸´æ—¶å‰ªè´´æ¿"><a href="#ä¸´æ—¶å‰ªè´´æ¿" class="headerlink" title="ä¸´æ—¶å‰ªè´´æ¿"></a>ä¸´æ—¶å‰ªè´´æ¿</h2><p><a href="https://paste.ubuntu.com/">Ubuntu Pastebin</a></p><p><a href="https://pastebin.aosc.io/">AOSC Pastebin</a></p><p><a href="https://cooltext.cn/">CoolText - å…è´¹åœ¨çº¿æ–‡æœ¬å‚¨å­˜åº“</a></p><h1 id="è¡¨æƒ…åŒ…æœç´¢"><a href="#è¡¨æƒ…åŒ…æœç´¢" class="headerlink" title="è¡¨æƒ…åŒ…æœç´¢"></a>è¡¨æƒ…åŒ…æœç´¢</h1><p><a href="http://www.dbbqb.com/">é€—æ¯”æ‹¯æ•‘ä¸–ç•Œâ€”ä¸“ä¸šçš„è¡¨æƒ…åŒ…æœç´¢ç½‘ç«™</a></p><p><a href="http://www.doutula.com/">æ–—å›¾å•¦ - æ–—å›¾å¤§ä¼š - é‡‘é¦†é•¿è¡¨æƒ…åº“ - çœŸæ­£çš„æ–—å›¾ç½‘ç«™ - doutula.com</a></p><h1 id="idea"><a href="#idea" class="headerlink" title="idea"></a>idea</h1><p><a href="https://zhile.io/2018/08/17/jetbrains-license-server-crack.html">Jetbrainsç³»åˆ—äº§å“2019.3.3æœ€æ–°æ¿€æ´»æ–¹æ³•[æŒç»­æ›´æ–°] | çŸ¥äº†</a></p><p><a href="http://idea.medeming.com/jets/">ç¨‹åºå‘˜å¼€å‘ä¸“å±æ¿€æ´»ç ï¼Œå¼€å¯ç¨‹åºäººç”Ÿ</a></p><h1 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h1><p><a href="http://git.aakkc.com/">Githubä¸­è½¬ä¸‹è½½</a></p><p><a href="https://docs.rsshub.app/">ä»‹ç» | RSSHub</a></p><p><a href="http://387099.blogspot.com/2018/03/ssssr.html">æµ…è°ˆéƒ¨åˆ†æœºåœºï¼ˆSS/SSRæä¾›å•†ï¼‰çš„ä½¿ç”¨æ„Ÿå—â€”æŒç»­æ›´æ–°ä¸­</a></p><p><a href="https://products.office.com/en-us/free-office-online-for-the-web">Free Microsoft Office for the web, Word, Excel, PowerPoint</a></p><p><a href="https://speechlogger.appspot.com/zh/">è‡ªåŠ¨è¯­éŸ³è¯†åˆ«å’Œå³æ—¶ç¿»è¯‘è½¯ä»¶</a></p><p><a href="https://www.netnr.com/home/list/105">Gitæ‰˜ç®¡ ä»£ç æ‰˜ç®¡ PagesæœåŠ¡ é™æ€ç½‘ç«™æ‰˜ç®¡ NETç‰›äºº</a></p><p><a href="https://whoer.net/zh">æŸ¥çœ‹è‡ªå·±çš„IPåœ°å€</a></p><p><a href="http://www.ucdrs.superlib.net/">å…¨å›½å›¾ä¹¦é¦†å‚è€ƒå’¨è¯¢è”ç›Ÿ</a></p><p><a href="http://www.suiyuanka.com/">Research - æ¢ç´¢æœªçŸ¥</a></p><p><a href="https://jex.im/regulex/">æ­£åˆ™å¯è§†åŒ–å·¥å…·</a></p><p><a href="https://www.zhihu.com/question/22867411">ä½œä¸ºç¨‹åºå‘˜çš„ä½ ï¼Œå¸¸ç”¨çš„å·¥å…·è½¯ä»¶æœ‰å“ªäº›ï¼Ÿ - çŸ¥ä¹</a></p>]]></content>
      
      
      <categories>
          
          <category> èµ„æº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¹¦ç­¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€šä¿—ç†è§£æ•°æ®åº“ä¸‰å¤§èŒƒå¼</title>
      <link href="/2020/02/08/%E9%80%9A%E4%BF%97%E7%90%86%E8%A7%A3%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F/"/>
      <url>/2020/02/08/%E9%80%9A%E4%BF%97%E7%90%86%E8%A7%A3%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>1NF 2NF 3NF</p><span id="more"></span><h1 id="1NF"><a href="#1NF" class="headerlink" title="1NF"></a>1NF</h1><p><em>åœ¨ä»»ä½•ä¸€ä¸ªå…³ç³»æ•°æ®åº“ä¸­ï¼Œç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰æ˜¯å¯¹å…³ç³»æ¨¡å¼çš„åŸºæœ¬è¦æ±‚ï¼Œä¸æ»¡è¶³ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰çš„æ•°æ®åº“å°±ä¸æ˜¯å…³ç³»æ•°æ®åº“ã€‚</em></p><p>ç¬¬ä¸€èŒƒå¼æ˜¯æŒ‡æ•°æ®åº“è¡¨çš„æ¯ä¸€åˆ—éƒ½æ˜¯ä¸å¯åˆ†å‰²çš„åŸºæœ¬æ•°æ®é¡¹ï¼ŒåŒä¸€åˆ—ä¸­ä¸èƒ½æœ‰å¤šä¸ªå€¼ï¼Œ<strong>å³æ¯ä¸€ä¸ªå±æ€§éƒ½æ˜¯åŸå­çš„ï¼Œä¸èƒ½å†åˆ†ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºä¸èƒ½è¡¨ä¸­å¥—è¡¨</strong>ã€‚</p><hr><p>å¦‚ä¸‹äººå‘˜åŸºæœ¬ä¿¡æ¯è¡¨ï¼š</p><p><img src="/2020/02/08/%E9%80%9A%E4%BF%97%E7%90%86%E8%A7%A3%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F/1.png" alt></p><p>è¿™æ ·çš„è¡¨æ˜¯ä¸èƒ½åˆ›å»ºçš„ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªè¡¨æ‹†ä¸ºåŸºæœ¬ä¿¡æ¯è¡¨å’Œåœ°å€è¡¨ï¼Œé€šè¿‡äººå‘˜ç¼–å·æ¥å»ºç«‹è”ç³»</p><p><img src="/2020/02/08/%E9%80%9A%E4%BF%97%E7%90%86%E8%A7%A3%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F/2.png" alt></p><p>æˆ–è€…æ˜¯</p><p><img src="/2020/02/08/%E9%80%9A%E4%BF%97%E7%90%86%E8%A7%A3%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F/3.png" alt></p><h1 id="2NF"><a href="#2NF" class="headerlink" title="2NF"></a>2NF</h1><p>ç¬¬äºŒèŒƒå¼æ˜¯åœ¨ç¬¬ä¸€èŒƒå¼åŸºç¡€ä¸Šé¢æå‡ºæ¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ»¡è¶³ç¬¬äºŒèŒƒå¼æ„å‘³åŒæ—¶æ»¡è¶³äº†ç¬¬ä¸€èŒƒå¼ã€‚</p><p>ç¬¬äºŒèŒƒå¼ï¼šä¸€å¼ è¡¨ä¸­æ¯ä¸ªå±æ€§éƒ½æ˜¯åŸå­çš„ï¼Œ<strong>å¹¶ä¸”ä¸å­˜åœ¨å¯¹ä¸»é”®çš„éƒ¨åˆ†å‡½æ•°ä¾èµ–</strong>ã€‚ï¼ˆéƒ¨åˆ†å‡½æ•°ä¾èµ–æ¯”è¾ƒæ™¦æ¶©ï¼Œçœ‹ä¾‹å­å¥½æ‡‚ï¼‰</p><hr><p>ä¸‹é¢æ˜¯å­¦ç”Ÿä¿¡æ¯è¡¨ï¼Œæœ€åä¸¤é¡¹ä¸ºè¯¾ç¨‹å·å’Œè¯¥é—¨è¯¾æˆç»©</p><p><img src="/2020/02/08/%E9%80%9A%E4%BF%97%E7%90%86%E8%A7%A3%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F/4.png" alt></p><p>åœ¨è¿™å¼ è¡¨é‡Œé¢å­¦å·æ˜¯ä¸»é”®å—ï¼Ÿ<strong>å­¦å·ä¸æ˜¯ä¸»é”®ï¼Œå­¦å·èƒ½å†³å®šå§“åï¼Œå¹´é¾„ï¼Œåœ°å€ï¼Œä½†æ˜¯å‡­å­¦å·è¿™ä¸€é¡¹ï¼Œæ˜¯å†³å®šä¸äº†æˆç»©è¿™ä¸€é¡¹ï¼Œæ‰€ä»¥è¿™é‡Œå­¦å·ä¸æ˜¯ä¸»é”®ã€‚</strong></p><p><strong>æ‰€ä»¥è¿™å¼ è¡¨çš„ä¸»é”®æ˜¯ï¼ˆå­¦å·ï¼Œè¯¾ç¨‹å·ï¼‰</strong></p><p>å‡­ï¼ˆå­¦å·ï¼Œè¯¾ç¨‹å·ï¼‰å¯ä»¥å†³å®šæˆç»©ï¼›ä½†æ˜¯å‡­å­¦å·å°±å¯ä»¥å†³å®šå§“åï¼Œå¹´é¾„å’Œåœ°å€ï¼Œä¸éœ€è¦è¯¾ç¨‹å·ã€‚</p><p><strong>æ‰€ä»¥åœ¨è¿™é‡Œå°½ç®¡ä¸»é”®æ˜¯ï¼ˆå­¦å·ï¼Œè¯¾ç¨‹å·ï¼‰ï¼Œä½†æ˜¯å§“åï¼Œå¹´é¾„å’Œåœ°å€åªè¦å­¦å·å°±å¯ä»¥å†³å®šçš„ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸‰ä¸ªå±æ€§å¯¹ä¸»é”®å­˜åœ¨éƒ¨åˆ†å‡½æ•°ä¾èµ–ï¼Œå®ƒåªä¾èµ–äºä¸»é”®é‡Œé¢çš„å­¦å·è¿™ä¸€é¡¹ï¼Œåªä¾èµ–äºä¸»é”®çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥ä¸æ˜¯ç¬¬äºŒèŒƒå¼ã€‚</strong></p><p><img src="/2020/02/08/%E9%80%9A%E4%BF%97%E7%90%86%E8%A7%A3%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F/5.jpg" alt></p><p>ç®€å•åœ°è¯´ï¼Œç¬¬äºŒèŒƒå¼è¦æ±‚æ¯ä¸ªéä¸»å±æ€§å®Œå…¨ä¾èµ–äºä¸»é”®ï¼Œè€Œä¸æ˜¯ä»…ä¾èµ–äºå…¶ä¸­ä¸€éƒ¨åˆ†å±æ€§ã€‚</p><h2 id="ä¸æ»¡è¶³2NFé—®é¢˜"><a href="#ä¸æ»¡è¶³2NFé—®é¢˜" class="headerlink" title="ä¸æ»¡è¶³2NFé—®é¢˜"></a>ä¸æ»¡è¶³2NFé—®é¢˜</h2><h3 id="æ’å…¥å¼‚å¸¸"><a href="#æ’å…¥å¼‚å¸¸" class="headerlink" title="æ’å…¥å¼‚å¸¸"></a>æ’å…¥å¼‚å¸¸</h3><p>å¦‚è®¡åˆ’å¼€æ–°è¯¾ï¼Œç”±äºæ²¡äººé€‰ä¿®ï¼Œæ²¡æœ‰è¯¾ç¨‹å·ä¿¡æ¯ï¼Œé‚£ä¹ˆå› ä¸ºï¼ˆå­¦å·ï¼Œè¯¾ç¨‹å·ï¼‰æ˜¯ä¸»é”®ï¼Œæ‰€ä»¥è¿å­¦ç”ŸåŸºæœ¬ä¿¡æ¯ä¹Ÿä¸èƒ½æ’å…¥ï¼Œåªæœ‰å­¦ç”Ÿé€‰è¯¾ä¹‹åï¼Œæ‰èƒ½æ’å…¥ä¿¡æ¯ã€‚</p><h3 id="åˆ é™¤å¼‚å¸¸"><a href="#åˆ é™¤å¼‚å¸¸" class="headerlink" title="åˆ é™¤å¼‚å¸¸"></a>åˆ é™¤å¼‚å¸¸</h3><p>è‹¥å­¦ç”Ÿç”³è¯·ç—…å‡ä¼‘å­¦ä¸€å­¦æœŸï¼Œä»å½“å‰æ•°æ®åº“åˆ é™¤é€‰ä¿®è®°å½•ï¼Œé‚£ä¹ˆå­¦ç”Ÿçš„åŸºæœ¬ä¿¡æ¯ä¹Ÿå°±ä¸¢äº†ã€‚</p><h3 id="æ•°æ®å†—ä½™"><a href="#æ•°æ®å†—ä½™" class="headerlink" title="æ•°æ®å†—ä½™"></a>æ•°æ®å†—ä½™</h3><p>å‡è®¾ä¸€ä¸ªå­¦ç”Ÿé€‰ä¿®50é—¨è¯¾ï¼Œé‚£ä¹ˆå­¦ç”ŸåŸºæœ¬ä¿¡æ¯å°±é‡å¤äº†å¾ˆå¤šæ¬¡ï¼Œé€ æˆæ•°æ®å†—ä½™ã€‚</p><h3 id="æ›´æ–°å¼‚å¸¸"><a href="#æ›´æ–°å¼‚å¸¸" class="headerlink" title="æ›´æ–°å¼‚å¸¸"></a>æ›´æ–°å¼‚å¸¸</h3><p>éš¾ä»¥ç»´æŠ¤ä¸€è‡´æ€§ï¼Œå› ä¸ºå­˜åœ¨æ•°æ®å†—ä½™ï¼Œå¯èƒ½æ›´æ”¹çš„æ—¶å€™æ¼æ‰äº†å“ªæ¡è®°å½•</p><h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><p>æ‹†åˆ†æˆä¸¤ä¸ªè¡¨ï¼Œå­¦ç”ŸåŸºæœ¬ä¿¡æ¯è¡¨å’Œé€‰è¯¾æˆç»©è¡¨</p><p>æ€»çš„æ¥è¯´ï¼Œ<strong>ä¸€å¼ è¡¨åªç®¡ä¸€ä»¶äº‹æƒ…</strong>ï¼Œå°±ä¸ä¼šå‡ºç°è¿™ç§é—®é¢˜ã€‚</p><h1 id="3NF"><a href="#3NF" class="headerlink" title="3NF"></a>3NF</h1><p>åœ¨2NFåŸºç¡€ä¸Šï¼Œä¸å­˜åœ¨å±æ€§å¯¹ä¸»é”®çš„<strong>ä¼ é€’ä¾èµ–</strong>ã€‚çœ‹ä¸‹é¢ä¾‹å­ï¼š</p><p>æœ‰ä¸€å‘˜å·¥ä¿¡æ¯è¡¨ï¼Œå±æ€§åˆ†åˆ«æ˜¯å‘˜å·¥å·ï¼Œå·¥èµ„çº§åˆ«ï¼Œå·¥èµ„</p><p><img src="/2020/02/08/%E9%80%9A%E4%BF%97%E7%90%86%E8%A7%A3%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F/5.png" alt></p><p>è¿™å¼ è¡¨çš„ä¸»é”®æ˜¯å‘˜å·¥å·ï¼Œä¸€æ—¦å‘˜å·¥å·ç¡®å®šäº†ï¼Œå·¥èµ„çº§åˆ«ä¹Ÿç¡®å®šäº†ï¼Œé‚£ä¹ˆå·¥èµ„ä¹Ÿå°±ç¡®å®šäº†ã€‚</p><p><strong>ä½†æ˜¯å·¥èµ„å¯¹å‘˜å·¥å·å­˜åœ¨ä¼ é€’ä¾èµ–</strong></p><p>å…·ä½“çœ‹ä¸‹å›¾</p><p><img src="/2020/02/08/%E9%80%9A%E4%BF%97%E7%90%86%E8%A7%A3%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F/6.jpg" alt></p><h2 id="3NFé—®é¢˜"><a href="#3NFé—®é¢˜" class="headerlink" title="3NFé—®é¢˜"></a>3NFé—®é¢˜</h2><h3 id="æ’å…¥å¼‚å¸¸-1"><a href="#æ’å…¥å¼‚å¸¸-1" class="headerlink" title="æ’å…¥å¼‚å¸¸"></a>æ’å…¥å¼‚å¸¸</h3><p>å½“å·¥èµ„çº§åˆ«è¿˜æ²¡æœ‰ç¡®å®šçš„æ—¶å€™ï¼Œå·¥èµ„å°±æ— æ³•ç¡®å®šã€‚</p><h3 id="åˆ é™¤å¼‚å¸¸-1"><a href="#åˆ é™¤å¼‚å¸¸-1" class="headerlink" title="åˆ é™¤å¼‚å¸¸"></a>åˆ é™¤å¼‚å¸¸</h3><p>å‡è®¾åªæœ‰ä¸€ä¸ªå‘˜å·¥æ‹¿ä¸‰çº§å·¥èµ„ï¼Œå½“è¿™ä¸ªå‘˜å·¥ä¸åœ¨è¿™ä¸ªå…¬å¸çš„æ—¶å€™ï¼Œæ•°æ®è¢«åˆ æ‰ï¼Œé‚£ä¹ˆè¿™ä¸ªå·¥èµ„çº§åˆ«ä¸å·¥èµ„çš„å¯¹ç…§å…³ç³»å°±ä¸å­˜åœ¨äº†ã€‚</p><h3 id="æ•°æ®å†—ä½™-1"><a href="#æ•°æ®å†—ä½™-1" class="headerlink" title="æ•°æ®å†—ä½™"></a>æ•°æ®å†—ä½™</h3><p>åŒ2NFï¼Œå·¥èµ„çº§åˆ«ä¸å·¥èµ„ä¿¡æ¯å¤§é‡é‡å¤</p><h3 id="æ›´æ–°å¼‚å¸¸-1"><a href="#æ›´æ–°å¼‚å¸¸-1" class="headerlink" title="æ›´æ–°å¼‚å¸¸"></a>æ›´æ–°å¼‚å¸¸</h3><p>åŒ2NFï¼Œéš¾ä»¥ç»´æŠ¤ä¸€è‡´æ€§</p><h2 id="è§£å†³é—®é¢˜"><a href="#è§£å†³é—®é¢˜" class="headerlink" title="è§£å†³é—®é¢˜"></a>è§£å†³é—®é¢˜</h2><p>åŒ2NFï¼Œæ‹†è¡¨ï¼Œä¸€å¼ è¡¨åªç»´æŠ¤ä¸€ä»¶äº‹ã€‚</p><hr><p>å‚è€ƒï¼š</p><p><a href="https://baike.baidu.com/item/1NF">ç¬¬ä¸€èŒƒå¼_ç™¾åº¦ç™¾ç§‘</a></p><p><a href="[https://baike.baidu.com/item/%E7%AC%AC%E4%BA%8C%E8%8C%83%E5%BC%8F](https://baike.baidu.com/item/ç¬¬äºŒèŒƒå¼">ç¬¬äºŒèŒƒå¼_ç™¾åº¦ç™¾ç§‘</a>)</p><p><a href="[https://baike.baidu.com/item/%E7%AC%AC%E4%B8%89%E8%8C%83%E5%BC%8F](https://baike.baidu.com/item/ç¬¬ä¸‰èŒƒå¼">ç¬¬ä¸‰èŒƒå¼_ç™¾åº¦ç™¾ç§‘</a>)</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> ä¸‰å¤§èŒƒå¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ°´SpringBootä¸SpringCloud</title>
      <link href="/2019/11/21/%E6%B0%B4SpringBoot%E4%B8%8ESpringCloud/"/>
      <url>/2019/11/21/%E6%B0%B4SpringBoot%E4%B8%8ESpringCloud/</url>
      
        <content type="html"><![CDATA[<p>é¡¹ç›®æœ‰æ„Ÿ<br><span id="more"></span></p><h1 id="å¾®æœåŠ¡"><a href="#å¾®æœåŠ¡" class="headerlink" title="å¾®æœåŠ¡"></a>å¾®æœåŠ¡</h1><p>å¾®æœåŠ¡çš„å…·ä½“æ¦‚å¿µæˆ–è€…ä¼˜ç¼ºç‚¹å¯ä»¥çœ‹è¿™ä¸ªï¼š</p><p><a href="https://www.funtl.com/zh/micro-service-intro/å¾®æœåŠ¡-è§£å†³å¤æ‚é—®é¢˜.html#æ¦‚è¿°">å¾®æœåŠ¡-è§£å†³å¤æ‚é—®é¢˜ | åƒé”‹æ•™è‚²-æå«æ°‘</a></p><p>å¾®æœåŠ¡æ¶æ„ï¼Œæ›´å¥½çš„è¿›è¡Œåˆ†å¸ƒå¼ç³»ç»Ÿå¼€å‘ï¼Œæ‹†åˆ†å•ä½“åº”ç”¨ï¼Œå°†ä¸€ä¸ªåº”ç”¨æ‹†åˆ†æˆå¤šä¸ªæœåŠ¡ï¼Œæ¯ä¸€ä¸ªæœåŠ¡éƒ½æ˜¯ä¸€ä¸ªå¯ä»¥ç‹¬ç«‹è¿è¡Œçš„é¡¹ç›®ã€‚</p><p>å¾®æœåŠ¡åˆ†å¸ƒå¼å¼€å‘ä¼šé‡åˆ°è¿™å››ä¸ªé—®é¢˜ï¼š</p><ol><li><strong>è¿™ä¹ˆå¤šæœåŠ¡ï¼Œå®¢æˆ·ç«¯å¦‚ä½•è®¿é—®</strong></li><li><strong>è¿™ä¹ˆå¤šæœåŠ¡ï¼ŒæœåŠ¡ä¹‹é—´å¦‚ä½•é€šä¿¡</strong></li><li><strong>è¿™ä¹ˆå¤šæœåŠ¡ï¼Œå¦‚ä½•æ²»ç†</strong></li><li><strong>æœåŠ¡æŒ‚äº†ï¼Œæ€ä¹ˆåŠï¼Ÿ</strong></li></ol><p>è§£å†³æ–¹æ¡ˆï¼š</p><p><code>Spring Cloud</code>ï¼Œæ˜¯ä¸€å¥—ç”Ÿæ€ï¼Œæ˜¯ä¸ºäº†è§£å†³å¾®æœåŠ¡æ¶æ„é‡åˆ°çš„é—®é¢˜ï¼Œæƒ³è¦ä½¿ç”¨<code>Spring Cloud</code>å¿…é¡»åŸºäº<code>Spring Boot</code></p><hr><p>åæ¥å»äº†è§£äº†ä¸‹ï¼Œç°åœ¨<code>Spring Cloud</code>å¾®æœåŠ¡æ–¹æ¡ˆæœ‰ä¸‰å¥—ï¼š</p><h2 id="Spring-Cloud-Netflix"><a href="#Spring-Cloud-Netflix" class="headerlink" title="Spring Cloud Netflix"></a>Spring Cloud Netflix</h2><p> ç›®å‰å¸‚åœºä¸Šä¸»æµçš„ <strong>ç¬¬ä¸€å¥—å¾®æœåŠ¡æ¶æ„è§£å†³æ–¹æ¡ˆï¼šSpring Boot + Spring Cloud Netflix</strong> </p><ul><li><code>Spring Cloud Netflix</code>ä¸ºäº†è§£å†³ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæå‡ºäº†<code>API</code>ç½‘å…³ç»„ä»¶â€”-&gt;<code>Zuul</code></li><li>ä¸ºäº†è§£å†³æœåŠ¡ä¹‹é—´å¦‚ä½•é€šä¿¡é—®é¢˜ï¼Œæå‡ºäº†<code>Feign</code>ï¼Œå®ƒæ˜¯åŸºäº<code>HTTP</code>é€šä¿¡çš„ï¼ŒåŒæ­¥å¹¶é˜»å¡çš„</li><li>ä¸ºäº†è§£å†³å¦‚ä½•æ²»ç†æœåŠ¡é—®é¢˜ï¼Œæå‡ºäº†æœåŠ¡æ³¨å†Œä¸å‘ç°ç»„ä»¶â€”&gt;<code>Eureka</code></li><li>ä¸ºäº†è§£å†³æœåŠ¡æŒ‚äº†çš„é—®é¢˜ï¼Œæå‡ºäº†ç†”æ–­æœºåˆ¶â€”&gt;<code>Hystrix</code>ç»„ä»¶</li></ul><p><img src="/2019/11/21/%E6%B0%B4SpringBoot%E4%B8%8ESpringCloud/5.png" alt></p><p>å¸‚é¢ä¸Šé¢çš„æ•™ç¨‹å¾ˆå¤šéƒ½æ˜¯è¿™ä¸€å¥—ï¼Œä¸è¿‡è¿™ä¸€å¥—å·²ç»ä¸ç»´æŠ¤äº†ï¼Œæ‰€ä»¥ä¸è€ƒè™‘è¿™ä¸€ä¸ª</p><h2 id="Dubbo-Zookeeper"><a href="#Dubbo-Zookeeper" class="headerlink" title="Dubbo + Zookeeper"></a>Dubbo + Zookeeper</h2><p> ç›®å‰å¸‚åœºä¸Šä¸»æµçš„ <strong>ç¬¬äºŒå¥—å¾®æœåŠ¡æ¶æ„è§£å†³æ–¹æ¡ˆï¼šSpring Boot + Dubbo + Zookeeper</strong> </p><ul><li><code>Apache Dubbo</code> æ˜¯ä¸€æ¬¾é«˜æ€§èƒ½ã€è½»é‡çº§çš„å¼€æº<code>Java RPC</code>æ¡†æ¶ã€‚<strong>ç”¨äºè§£å†³æœåŠ¡ä¹‹é—´çš„é€šä¿¡é—®é¢˜</strong>ã€‚</li><li><code>ZooKeeper</code> æ˜¯ä¸€ç§åˆ†å¸ƒå¼åè°ƒæœåŠ¡ï¼Œç”¨äºç®¡ç†å¤§å‹ä¸»æœºã€‚åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­åè°ƒå’Œç®¡ç†æœåŠ¡æ˜¯ä¸€ä¸ªå¤æ‚çš„è¿‡ç¨‹ã€‚<strong>ç”¨äºè§£å†³æ²»ç†æœåŠ¡çš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯æœåŠ¡æ³¨å†Œä¸å‘ç°</strong></li><li><strong><code>API</code>ç½‘å…³æ²¡æœ‰ç°æˆçš„ï¼Œå¾—æ‰¾ç¬¬ä¸‰æ–¹ç»„ä»¶æˆ–è‡ªå·±å®ç°</strong></li><li><strong>ç†”æ–­æœºåˆ¶ç»„ä»¶ä¹Ÿæ²¡æœ‰ç°æˆ</strong></li></ul><p>æ‰€ä»¥è¯¥å¥—æ–¹æ¡ˆä¸æ˜¯å¾ˆå®Œå–„ï¼Œä½†æ˜¯æ–°ç‰ˆåœ¨å­µåŒ–ï¼Œä¼°è®¡æ–°ç‰ˆä¼šè§£å†³è¿™äº›é—®é¢˜</p><h2 id="Spring-Cloud-Alibaba"><a href="#Spring-Cloud-Alibaba" class="headerlink" title="Spring Cloud Alibaba"></a>Spring Cloud Alibaba</h2><p> ç›®å‰å¸‚åœºä¸Šä¸»æµçš„ <strong>ç¬¬ä¸‰å¥—å¾®æœåŠ¡æ¶æ„è§£å†³æ–¹æ¡ˆï¼šSpring Boot + Spring Cloud Alibaba</strong> </p><p><code>Spring Cloud Alibaba</code>è‡´åŠ›äºæä¾›å¾®æœåŠ¡å¼€å‘çš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆã€‚æ­¤é¡¹ç›®åŒ…å«å¼€å‘åˆ†å¸ƒå¼åº”ç”¨å¾®æœåŠ¡çš„å¿…éœ€ç»„ä»¶ï¼Œæ–¹ä¾¿å¼€å‘è€…é€šè¿‡<code>Spring Cloud</code> ç¼–ç¨‹æ¨¡å‹è½»æ¾ä½¿ç”¨è¿™äº›ç»„ä»¶æ¥å¼€å‘åˆ†å¸ƒå¼åº”ç”¨æœåŠ¡ã€‚</p><p>ä¾æ‰˜<code>Spring Cloud Alibaba</code>ï¼Œæ‚¨åªéœ€è¦æ·»åŠ ä¸€äº›æ³¨è§£å’Œå°‘é‡é…ç½®ï¼Œå°±å¯ä»¥å°†<code>Spring Cloud</code>åº”ç”¨æ¥å…¥é˜¿é‡Œåˆ†å¸ƒå¼åº”ç”¨è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡é˜¿é‡Œä¸­é—´ä»¶æ¥è¿…é€Ÿæ­å»ºåˆ†å¸ƒå¼åº”ç”¨ç³»ç»Ÿã€‚</p><ul><li>åœ¨<code>Spring Cloud Netflix</code>é˜¶æ®µæˆ‘ä»¬é‡‡ç”¨<code>Eureka</code>åšä½œä¸ºæˆ‘ä»¬çš„<strong>æœåŠ¡æ³¨å†Œä¸å‘ç°æœåŠ¡å™¨</strong>ï¼Œç°åˆ©ç”¨<code>Spring Cloud Alibaba</code> æä¾›çš„<code>Nacos</code>ç»„ä»¶æ›¿ä»£è¯¥æ–¹æ¡ˆã€‚ </li><li><strong>æœåŠ¡ä¹‹é—´é€šä¿¡</strong>ï¼š<code>Feign</code></li><li><strong>ç†”æ–­æœºåˆ¶ç»„ä»¶</strong>ï¼š é˜¿é‡Œå·´å·´å¼€æºäº† <code>Sentinel</code> ç»„ä»¶ï¼Œå®ç°äº†ç†”æ–­å™¨æ¨¡å¼ </li><li><code>API</code>ç½‘å…³ï¼š <code>Spring Cloud Gateway</code>ï¼Œ <strong>Spring Cloud Gateway ä½œä¸º Spring Cloud ç”Ÿæ€ç³»ä¸­çš„ç½‘å…³ï¼Œç›®æ ‡æ˜¯æ›¿ä»£ Netflix ZUUL</strong>ï¼Œå…¶ä¸ä»…æä¾›ç»Ÿä¸€çš„è·¯ç”±æ–¹å¼ï¼Œå¹¶ä¸”åŸºäº <code>Filter</code>é“¾çš„æ–¹å¼æä¾›äº†ç½‘å…³åŸºæœ¬çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼šå®‰å…¨ï¼Œç›‘æ§/åŸ‹ç‚¹ï¼Œå’Œé™æµç­‰ã€‚ </li></ul><p><img src="/2019/11/21/%E6%B0%B4SpringBoot%E4%B8%8ESpringCloud/6.png" alt></p><h2 id="ä¸‹ä¸€ä»£å¾®æœåŠ¡æ¶æ„â€”æœåŠ¡ç½‘æ ¼-service-mesh"><a href="#ä¸‹ä¸€ä»£å¾®æœåŠ¡æ¶æ„â€”æœåŠ¡ç½‘æ ¼-service-mesh" class="headerlink" title="ä¸‹ä¸€ä»£å¾®æœåŠ¡æ¶æ„â€”æœåŠ¡ç½‘æ ¼(service mesh)"></a>ä¸‹ä¸€ä»£å¾®æœåŠ¡æ¶æ„â€”æœåŠ¡ç½‘æ ¼(service mesh)</h2><p>å¯ä»¥å»äº†è§£ä¸‹å¾®æœåŠ¡ç®¡ç†æ¡†æ¶<code>service mesh</code>â€”â€”<code>Istio</code></p><h1 id="SpringBootè½¬SringCloudAlibaba"><a href="#SpringBootè½¬SringCloudAlibaba" class="headerlink" title="SpringBootè½¬SringCloudAlibaba"></a>SpringBootè½¬SringCloudAlibaba</h1><p>ä¸ºä»€ä¹ˆè¦è½¬ï¼Ÿä¸€æ–¹é¢æ˜¯å› ä¸ºé¡¹ç›®ä½¿ç”¨äº†<code>shiro</code>ï¼Œå¾ˆå¤šæ—¶å€™å…¶ä»–æ¥å£éƒ½è¦ä¾èµ–<code>shiro</code>çš„æ£€æŸ¥ä¹‹åæ‰èƒ½ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´æµé‡å¾—ç»è¿‡<code>shiro</code>æ£€æŸ¥ï¼Œæ²¡æœ‰é—®é¢˜æ‰æ”¾è¡Œç»™æ¥å£å¤„ç†é€»è¾‘ï¼Œè¿™æ ·çš„è¯æ¥å£å°±å’Œ<code>shiro</code>è€¦åˆåœ¨ä¸€èµ·äº†ï¼Œå¦‚æœæˆ‘ä»¬æŠŠ<code>shiro</code>æ‹†å‡ºæ¥ï¼Œå½“ä¸€ä¸ªæœåŠ¡ï¼Œæµé‡ç»è¿‡è¿™ä¸ªæœåŠ¡æ£€æŸ¥ï¼Œæ²¡é—®é¢˜æ‰æ”¾è¡Œç»™å…¶ä»–æœåŠ¡ä½¿ç”¨ï¼Œè¿™é‡Œæˆ‘ä»¬è®²çš„å…¶å®å°±æ˜¯å¾®æœåŠ¡é‡Œé¢çš„ç½‘å…³ã€‚å¦ä¸€æ–¹é¢å°±æ˜¯ä¹‹å‰æ²¡æœ‰ç”¨è¿‡ï¼Œæƒ³ç”¨ç”¨ã€‚å½“ç„¶ï¼Œå¾®æœåŠ¡ä¹Ÿæœ‰å¾ˆå¤šç¼ºç‚¹ï¼Œæ¯”å¦‚å¢åŠ å¼€å‘æˆæœ¬ï¼ŒæœåŠ¡å™¨å¼€é”€ç­‰ç­‰ã€‚</p><h1 id="SpringCloudè‡ªåŠ¨éƒ¨ç½²é—®é¢˜"><a href="#SpringCloudè‡ªåŠ¨éƒ¨ç½²é—®é¢˜" class="headerlink" title="SpringCloudè‡ªåŠ¨éƒ¨ç½²é—®é¢˜"></a>SpringCloudè‡ªåŠ¨éƒ¨ç½²é—®é¢˜</h1><p>å½“æˆ‘ä»¬ä½¿ç”¨<code>SpringCloud</code>çš„æ—¶å€™ï¼Œæ„å‘³ç€æˆ‘ä»¬ä¸€ä¸ªé¡¹ç›®ä¼šæœ‰å¾ˆå¤šä¸ªæœåŠ¡ï¼Œæ¯ä¸ªé¡¹ç›®éƒ½æ˜¯æ‰“åŒ…éƒ¨ç½²çš„ï¼Œè€Œæˆ‘ä»¬å¯èƒ½ä¼šæœ‰å‡ ç™¾ä¸ªæœåŠ¡ï¼Œæ‰€ä»¥è¦æ˜¯åƒæˆ‘ä»¬ä¹‹å‰ä½¿ç”¨<code>SpringBoot</code>æ‰‹åŠ¨æ‰“åŒ…é¡¹ç›®æˆ<code>Jar</code>ï¼Œç„¶åå†æ‰‹åŠ¨ä¸Šä¼ åˆ°æœåŠ¡å™¨é‚£æ ·çš„è¯ï¼Œé‚£ä¹ˆè‚¯å®šä¼šç´¯siã€‚æ‰€ä»¥å½“æˆ‘ä»¬è¿™ä¸ªå¾ˆç®€å•ç‰ˆçš„<code>SpringCloud</code>é¡¹ç›®å®Œæˆåï¼Œæˆ‘å°±è€ƒè™‘å¦‚ä½•å»éƒ¨ç½²å®ƒã€‚</p><p>æ—¢ç„¶è¿™ä¹ˆå¤šé¡¹ç›®éœ€è¦æ‰“åŒ…äº†ï¼Œé‚£ä¹ˆç›´è§‰å°±å¯ä»¥å‘Šè¯‰æˆ‘ä»¬è¦ä¸Šè‡ªåŠ¨éƒ¨ç½²äº†ï¼Œæ‰€ä»¥è¿™å‡ å¤©ä¸€ç›´éƒ½åœ¨å†™é‚£ä¸ªè‡ªåŠ¨éƒ¨ç½²çš„è„šæœ¬ã€‚å›å½’æ­£é¢˜ï¼Œå…¶å®è¿™ä¸œè¥¿ç°åœ¨çœ‹æ¥æ˜¯ä¸€ä¸ª<code>CI/CD</code>çš„è¿‡ç¨‹ï¼Œ<code>CI/CD</code>åˆå…³ç³»åˆ°<code>devops</code>ï¼Œä¹‹å‰å¯¹è¿™ä¸ªè¯æœ‰ç‚¹æ¨¡ç³Šï¼Œç°åœ¨å¯ä»¥è¶æœºè¡¥ä¹ ä¸€ä¸‹ã€‚</p><h2 id="CI-CDä¸devops"><a href="#CI-CDä¸devops" class="headerlink" title="CI/CDä¸devops"></a>CI/CDä¸devops</h2><p>å…¶å®ï¼Œ<code>CI</code>çš„å…¨ç§°æ˜¯<code>continuous integration</code>ï¼Œ<code>CD</code>çš„å…¨ç§°æ˜¯<code>continuous delivery</code></p><p>ç¿»è¯‘è¿‡æ¥åˆ†åˆ«æ˜¯<strong>æŒç»­é›†æˆ</strong>å’Œ<strong>æŒç»­äº¤ä»˜</strong></p><p>é‚£ä¹ˆ<code>devops</code>å‘¢</p><blockquote><p>DevOps is a set of practices that combines software development (Dev) and information-technology operations (Ops) which aims to shorten the systems development life cycle and provide continuous delivery with high software quality.</p><p><a href="https://en.wikipedia.org/wiki/DevOps#Definition">DevOps - Wikipedia</a></p><p>DevOpsï¼ˆDevelopmentå’ŒOperationsçš„ç»„åˆè¯ï¼‰æ˜¯ä¸€ç»„è¿‡ç¨‹ã€æ–¹æ³•ä¸ç³»ç»Ÿçš„ç»Ÿç§°ï¼Œç”¨äºä¿ƒè¿›å¼€å‘ï¼ˆåº”ç”¨ç¨‹åº/è½¯ä»¶å·¥ç¨‹ï¼‰ã€æŠ€æœ¯è¿è¥å’Œè´¨é‡ä¿éšœï¼ˆQAï¼‰éƒ¨é—¨ä¹‹é—´çš„æ²Ÿé€šã€åä½œä¸æ•´åˆã€‚</p><p><a href="https://baike.baidu.com/item/devops/2613029">devops_ç™¾åº¦ç™¾ç§‘</a></p></blockquote><p>babaä»€ä¹ˆçš„ï¼Œå…¶å®æˆ‘æ„Ÿè§‰å®ƒçš„ä½œç”¨åº”è¯¥å°±æ˜¯è®©è½¯ä»¶æ›´å¿«æ›´å¥½åœ°äº¤ä»˜ç»™å®¢æˆ·ä½¿ç”¨ï¼Œæ‰€ä»¥å®ƒä»¬çš„å…³ç³»åº”è¯¥æ˜¯</p><p><strong><code>CI</code>ä¸<code>CD</code>æ˜¯<code>devops</code>çš„æœ€ä½³å®è·µä¹‹ä¸€ï¼Œå¯ä»¥æ›´é¢‘ç¹æ›´å¯é å¾—äº¤ä»˜</strong></p><p>æ›´å¤šå¯ç‚¹ä¸‹é¢é“¾æ¥äº†è§£</p><p><a href="https://www.infoworld.com/article/3271126/what-is-cicd-continuous-integration-and-continuous-delivery-explained.html">What is CI/CD? Continuous integration and continuous delivery explained | InfoWorld</a></p><p><a href="https://www.infoq.cn/article/WHt0wFMDRrBU-dtkh1Xp">å¦‚ä½•ä»é›¶å¼€å§‹æ­å»º CI/CD æµæ°´çº¿-InfoQ</a></p><p><strong>æ€»ç»“</strong></p><blockquote><p>DevOps æ˜¯ä¸€ç§è½¯ä»¶å¼€å‘æ–¹æ³•ã€‚å®ƒå°†æŒç»­å¼€å‘ã€æŒç»­æµ‹è¯•ã€æŒç»­é›†æˆã€æŒç»­éƒ¨ç½²å’ŒæŒç»­ç›‘æ§è´¯ç©¿äºè½¯ä»¶å¼€å‘çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸ</p><p>CI/CDå¯ä»¥å°†å®ƒä»¬çœ‹ä½œæ˜¯ç±»ä¼¼äºè½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸçš„è¿‡ç¨‹</p></blockquote><h2 id="æ­å»ºCI-CDæµæ°´çº¿"><a href="#æ­å»ºCI-CDæµæ°´çº¿" class="headerlink" title="æ­å»ºCI/CDæµæ°´çº¿"></a>æ­å»ºCI/CDæµæ°´çº¿</h2><p>æ­å»º<code>CI/CD</code>æµæ°´çº¿çš„æ–¹æ³•ç”¨å¾ˆå¤šï¼Œæ¯”å¦‚ç”¨<code>Jenkins</code>ï¼Œ<code>GitLab</code>ï¼Œ<code>Travis</code>ï¼Œæˆ–è€…æ˜¯æœ€è¿‘åˆšå‡ºçš„<code>Github Actions</code>ç­‰ç­‰ã€‚ä¹‹å‰æˆ‘ä»¬å›¢é˜Ÿå°è¯•è¿‡ä½¿ç”¨<code>Jenkins</code>ï¼Œä¼˜ç‚¹å°±æ˜¯è‡ªå®šä¹‰ä»»åŠ¡å¾ˆå¤šå¹¶ä¸”å¯ä»¥è‡ªå·±æŠŠæ§ï¼Œç¼ºç‚¹å°±æ˜¯å¾—æœ‰æœåŠ¡å™¨éƒ¨ç½²å®ƒï¼Œï¼ˆæˆ–è®¸æ˜¯æœ¬åœ°è™šæ‹Ÿæœº+å†…ç½‘ç©¿é€ä¹Ÿè¡Œï¼‰ã€‚</p><p>æƒè¡¡äº†ä¸‹ï¼Œå†³å®šä½¿ç”¨<code>Travis</code>ã€‚</p><hr><p>ç¬¬ä¸€æ­¥æ˜¯åœ¨é¡¹ç›®çš„æ ¹ç›®å½•æ·»åŠ <code>.travis.yml</code></p><p><img src="/2019/11/21/%E6%B0%B4SpringBoot%E4%B8%8ESpringCloud/2.png" alt></p><p>è¿™ä¸ªæ–‡ä»¶ä¼šè¢«<code>travis</code>å‘ç°ï¼Œå¹¶ä¸”æ‰§è¡Œé‡Œé¢è®¾ç½®çš„é€»è¾‘è¾¾åˆ°è‡ªåŠ¨éƒ¨ç½²çš„ç›®çš„ï¼Œå…¶å®è¿™ä¸ªæœ¬è´¨ä¸Šå°±æ˜¯<code>travis</code>ç»™ä½ å¼€ä¸€å°æœºå™¨ï¼Œä½ å†™è„šæœ¬å»æ§åˆ¶å®ƒï¼Œè®©è¿™ä¸ªæœºå™¨å¸®ä½ åšä¸€äº›äº‹æƒ…ï¼Œè¿™ä¸ªè„šæœ¬çš„å†…å®¹å…¶å®å°±æ˜¯<code>Linux</code>ä¸Šçš„ä¸€äº›å‘½ä»¤ã€‚<code>travis</code>è„šæœ¬çš„ä¸€äº›åŸºç¡€çš„å‘½ä»¤å¯ä»¥åœ¨ç½‘ä¸Šå¾ˆå®¹æ˜“çš„æ‰¾åˆ°ã€‚</p><h3 id="travis-yml"><a href="#travis-yml" class="headerlink" title=".travis.yml"></a>.travis.yml</h3><p>ä¸‹é¢æ˜¯æˆ‘å½“æ—¶å†™çš„<code>.travis.yml</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">language: java</span><br><span class="line"></span><br><span class="line">jdk:</span><br><span class="line">  - openjdk8</span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">  - docker</span><br><span class="line"></span><br><span class="line">addons:</span><br><span class="line">  apt:</span><br><span class="line">    packages:</span><br><span class="line">    - sshpass</span><br><span class="line"></span><br><span class="line">cache:</span><br><span class="line">  directories:</span><br><span class="line">  - <span class="variable">$HOME</span>/.m2</span><br><span class="line"></span><br><span class="line">install:</span><br><span class="line">  - ssh-keyscan <span class="variable">$&#123;gatewayip&#125;</span> &gt;&gt; ~/.ssh/known_hosts</span><br><span class="line"></span><br><span class="line">script:</span><br><span class="line">  - bash start.sh acm-dependencies acm-commons-controller acm-commons-utils</span><br><span class="line"></span><br><span class="line">branches:</span><br><span class="line">  only:</span><br><span class="line">    - master</span><br><span class="line"></span><br><span class="line">notifications:</span><br><span class="line">  email: <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">env:</span><br><span class="line">  global:</span><br><span class="line">  - GH_REF=https://github.com/GreenHatHG/ACMRecentContests_SpringCloudAlibaba.git</span><br></pre></td></tr></table></figure><p>æœ‰å‡ ç‚¹è¯´æ˜ä¸€ä¸‹ï¼š</p><ol><li><p>å› ä¸ºJavaé¡¹ç›®ï¼Œæ‰€ä»¥<code>language</code>é‡Œé¢æ˜¯<code>Java</code>ï¼Œ <code>travis</code>æ”¯æŒå¤šè¯­è¨€ï¼Œè¯¦æƒ…å¯çœ‹ï¼š<a href="https://stackoverflow.com/questions/27644586/how-to-set-up-travis-ci-with-multiple-languages">How to set up Travis CI with multiple languages - Stack Overflow</a>ï¼Œå¤§æ¦‚æ˜¯è¿™æ ·çš„</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">matrix:</span><br><span class="line">  include:</span><br><span class="line">    - language: python</span><br><span class="line">      python: 2.7</span><br><span class="line">      script: ...</span><br><span class="line">        ...</span><br><span class="line">    - language: objective-c</span><br><span class="line">      os: osx</span><br><span class="line">      script: ...</span><br><span class="line">       ...</span><br></pre></td></tr></table></figure></li><li><p>å½“å‰<code>SpringCloud</code>é¡¹ç›®ä½¿ç”¨äº†<code>maven</code>æ„å»ºå·¥å…·ï¼Œå› ä¸º<code>maven</code>åœ¨æ„å»ºçš„æ—¶å€™éœ€è¦ä¸‹è½½å¾ˆå¤šä¾èµ–ï¼Œæ‰€ä»¥ä¸ºäº†åŠ å¿«æ„å»ºçš„é€Ÿåº¦ï¼Œæˆ‘ä»¬ç¼“å­˜äº†<code>maven</code>æ‰€ä¸‹è½½çš„ä¾èµ–ï¼Œå½“<code>travis</code>æ„å»ºå®Œæˆæ—¶æ¸…ç©ºå…¶ä»–ä¸œè¥¿è€Œä¿å­˜äº†ä¾èµ–ï¼Œä¸‹æ¬¡å†æ¬¡æ„å»ºçš„æ—¶å€™å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cache:</span><br><span class="line">  directories:</span><br><span class="line">  - <span class="variable">$HOME</span>/.m2</span><br></pre></td></tr></table></figure></li></ol><ol><li>å› ä¸ºè¦ç”¨<code>sshpass</code>è¿œç¨‹æ§åˆ¶æœåŠ¡å™¨ï¼Œæ‰€ä»¥å¾—<code>install</code>é‚£é‡ŒæŠŠipåœ°å€å¡«åˆ°<code>~/.ssh/known_hosts</code>æ–‡ä»¶ï¼Œä»¥å…å‡ºç°ä¸èƒ½è®¿é—®çš„æƒ…å†µ</li></ol><h3 id="start-sh"><a href="#start-sh" class="headerlink" title="start.sh"></a>start.sh</h3><p>å› ä¸ºè¦æ‰§è¡Œçš„é€»è¾‘æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥æŠŠè„šæœ¬å†™åˆ°äº†ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ã€‚<code>start.sh</code>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -----------------installçˆ¶ç±»ä¾èµ–---------------------</span></span><br><span class="line"><span class="keyword">for</span> arg;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    mvn clean install -f <span class="variable">$arg</span>/pom.xml</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -----------------åˆ›å»ºdockerfile---------------------</span></span><br><span class="line"><span class="comment"># $1:é¡¹ç›®åï¼Œ$2:jarçš„ç›¸å¯¹è·¯å¾„</span></span><br><span class="line"><span class="function"><span class="title">createDokcerfiler</span></span>()&#123;</span><br><span class="line">    rm <span class="variable">$1</span>/dockerfile || <span class="literal">true</span></span><br><span class="line">    touch <span class="variable">$1</span>/dockerfile</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;FROM openjdk:8-alpine&#x27;</span> &gt;&gt; <span class="variable">$1</span>/dockerfile</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;RUN mkdir /app&#x27;</span> &gt;&gt; <span class="variable">$1</span>/dockerfile</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;COPY&#x27;</span> <span class="variable">$2</span>  <span class="string">&#x27; /app/&#x27;</span> &gt;&gt; <span class="variable">$1</span>/dockerfile</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;CMD java -jar /app/&#x27;</span><span class="variable">$2</span> &gt;&gt; <span class="variable">$1</span>/dockerfile</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># -----------------æ‰“åŒ…---------------------</span></span><br><span class="line">baseFolder=<span class="string">&#x27;/root/spring-cloud-alibaba/&#x27;</span></span><br><span class="line"><span class="comment"># åˆ›å»ºæ–‡ä»¶å¤¹ç”¨æ¥å­˜æ”¾jar</span></span><br><span class="line"><span class="comment"># sshpass -p $pwd ssh -o StrictHostKeyChecking=no root@$ip &#x27;mkdir -p &#x27;$&#123;baseFolder&#125; || true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> path <span class="keyword">in</span> `ls`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    flag=1</span><br><span class="line">    <span class="comment"># åˆ¤æ–­æ˜¯å¦æ˜¯çˆ¶ç±»ä¾èµ–ï¼Œæ˜¯çš„è¯åˆ™ç›´æ¥è·³è¿‡</span></span><br><span class="line">    <span class="keyword">for</span> arg;</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$path</span> == <span class="variable">$arg</span> ]; <span class="keyword">then</span></span><br><span class="line">            flag=0</span><br><span class="line">            <span class="built_in">break</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    <span class="comment"># åˆ¤æ–­æ˜¯ä¸æ˜¯æ–‡ä»¶å¤¹</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$flag</span> == 1 ]&amp;&amp;[ -d <span class="variable">$path</span> ]; <span class="keyword">then</span></span><br><span class="line">        mvn clean package -f <span class="variable">$path</span>/pom.xml</span><br><span class="line">        <span class="comment"># sshpass -p $pwd scp $path/target/*.jar root@$ip:$&#123;baseFolder&#125;</span></span><br><span class="line">        jarPath=`ls <span class="variable">$path</span>/target | grep <span class="string">&#x27;.jar$&#x27;</span>`</span><br><span class="line">        createDokcerfiler <span class="variable">$path</span> <span class="variable">$jarPath</span></span><br><span class="line">        mv <span class="string">&quot;<span class="variable">$path</span>/target/<span class="variable">$jarPath</span>&quot;</span> <span class="variable">$path</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -----------------ä¸Šä¼ åˆ°é˜¿é‡Œäº‘dockerä»“åº“---------------------</span></span><br><span class="line">time=$(date <span class="string">&quot;+%Y%m%d%H&quot;</span>)</span><br><span class="line"></span><br><span class="line">docker login --username=<span class="variable">$registryu</span> registry.cn-hongkong.aliyuncs.com --password=<span class="variable">$registryp</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> path <span class="keyword">in</span> `ls`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [ -f <span class="variable">$path</span>/dockerfile ]; <span class="keyword">then</span></span><br><span class="line">        docker build -t <span class="variable">$path</span>:<span class="variable">$time</span> <span class="variable">$path</span></span><br><span class="line">        docker tag <span class="variable">$path</span>:<span class="variable">$time</span> registry.cn-hongkong.aliyuncs.com/acm-recentcontests/<span class="variable">$path</span>:<span class="variable">$time</span></span><br><span class="line">        docker push registry.cn-hongkong.aliyuncs.com/acm-recentcontests/<span class="variable">$path</span>:<span class="variable">$time</span></span><br><span class="line">    <span class="keyword">fi</span> </span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>é‡Œé¢æ‰§è¡Œçš„é€»è¾‘å…¶å®å¾ˆç®€å•ï¼Œ<strong>é¦–å…ˆå°±æ˜¯å¯¹<code>maven</code>æ‰€è¦ä¾èµ–çš„å…¬å…±é¡¹ç›®è¿›è¡Œç¼–è¯‘å®‰è£…ï¼Œç„¶åå†å»ç¼–è¯‘å…¶ä»–ç‹¬ç«‹çš„ä¸€ä¸ªä¸ªé¡¹ç›®ï¼Œæœ€ååˆ¶ä½œ<code>dockerfile</code>æ–‡ä»¶ï¼Œç¼–è¯‘æ‰“åŒ…ä¸Šä¼ åˆ°é˜¿é‡Œäº‘çš„<code>docker</code>ä»“åº“</strong>ã€‚</p><p>è¿™é‡Œé¢æœ‰å‡ ä¸ªå‘ç‚¹ï¼Œä¸€ä¸ªæ˜¯å¤šæ¨¡å—çš„<code>maven</code>é¡¹ç›®æ€ä¹ˆæ‰“åŒ…ï¼Œè¿™é‡Œé¢ä¹ŸèŠ±äº†æˆ‘æŒºé•¿æ—¶é—´ï¼Œå› ä¸ºæ¯ä¸ªé¡¹ç›®éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¸åƒå•ä½“åº”ç”¨é‚£ä¹ˆç®€å•ã€‚é™¤äº†æˆ‘è¿™ä¸ªæ–¹æ³•ï¼Œè¿˜æœ‰ä¸€ä¸ªæ–¹æ³•å°±æ˜¯æ„å»ºä¸€ä¸ª<code>maven</code>ç§æœï¼ŒæŠŠè‡ªå·±çš„<code>jar</code>åŒ…ä¸Šä¼ ä¸Šå»ï¼Œå½“æ„å»ºåˆ«çš„é¡¹ç›®çš„æ—¶å€™ï¼Œå®ƒä¾èµ–äº†æŸä¸ªé¡¹ç›®ï¼Œè¿™æ—¶å€™æ‰€è¦ä¾èµ–çš„<code>jar</code>åŒ…å¯ä»¥ä»ç§æœä¸Šé¢æ‰¾åˆ°ã€‚</p><p>ç¬¬äºŒç‚¹å°±æ˜¯<code>dockerfile</code>è¦å’Œ<code>jar</code>æ–‡ä»¶å¤¹å¤„åœ¨åŒä¸€çº§ç›®å½•æ‰å¥½æ‰“åŒ…ï¼Œä¸ç„¶ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥è„šæœ¬æœ‰ä¸€å¤„æ˜¯å°†<code>jar</code>åŒ…ç§»åŠ¨åˆ°<code>dockerfile</code>çš„ç›®å½•</p><p>ç¬¬ä¸‰ç‚¹å°±æ˜¯ä¸€äº›é›¶é›¶ç¢ç¢çš„<code>Linux Shell</code>çŸ¥è¯†äº†ï¼Œæ¯”å¦‚èµ‹å€¼ç­‰å·ä¸èƒ½æœ‰ç©ºæ ¼ï¼ŒåŒå¼•å·ä¸å•å¼•å·çš„åŒºåˆ«ç­‰ç­‰ï¼Œéœ€è¦æ³¨æ„ã€‚</p><h3 id="debugæ¨¡å¼"><a href="#debugæ¨¡å¼" class="headerlink" title="debugæ¨¡å¼"></a>debugæ¨¡å¼</h3><p>ä¸è¿‡è¿™é‡Œæœ‰ä¸ªå¥½æ–¹æ³•å¯ä»¥å»è§£å†³è„šæœ¬é—®é¢˜ï¼Œå°±æ˜¯å¼€å¯<code>debug</code>æ¨¡å¼ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥<code>ssh</code>åˆ°<code>travis</code>çš„æœºå™¨ä¸Šé¢ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥åœ¨<code>travis</code>é‡Œé¢ä¸æ–­ä¿®æ”¹æˆ‘ä»¬çš„è„šæœ¬ã€‚</p><p><a href="https://docs.travis-ci.com/user/running-build-in-debug-mode/">Running Build in Debug Mode - Travis CI</a></p><p>è·Ÿç€å®˜ç½‘çš„è„šæœ¬èµ°å°±è¡Œäº†ï¼Œä¸è¿‡éœ€è¦æ³¨æ„å‡ ç‚¹å°±æ˜¯</p><ol><li>éœ€è¦ç»™å®˜æ–¹å‘é‚®ä»¶å«å·¥ä½œäººå‘˜å¯¹ä½ çš„æŸä¸ªé…ç½®å¼€å¯<code>debug</code>æ¨¡å¼åä½ æ‰èƒ½ç”¨è¿™ä¸ªæ¨¡å¼ï¼Œæ³¨æ„æ—¶åŒº2333ï¼Œé‚£æ—¶å€™å·¥ä½œäººå‘˜å¯èƒ½è¿˜åœ¨ç¡è§‰</li></ol><p><img src="/2019/11/21/%E6%B0%B4SpringBoot%E4%B8%8ESpringCloud/3.png" alt></p><ol><li>å› ä¸º<code>travis</code>æœåŠ¡å™¨å¤„äºå¤–å›½ï¼Œç›´æ¥è¿æ¥ä¼šæ¯”è¾ƒæ…¢ï¼Œæ‰€ä»¥å¯ä»¥è€ƒè™‘ç»™<code>ssh</code>å¥—ä»£ç†ï¼Œåœ¨<code>linux</code>ä½¿ç”¨<code>ssh</code>å‘½ä»¤<code>æˆ‘</code>å¹¶æ²¡æœ‰æ‰¾åˆ°ä»€ä¹ˆçš„å¥½çš„è®©<code>ssh</code>èµ°ä»£ç†çš„æ–¹æ³•ï¼Œæˆ‘æ˜¯ç”¨<code>putty</code>è§£å†³çš„</li><li><code>ssh</code>ä¸Šå»åå¦‚æœæ‰§è¡Œ<code>exit</code>çš„è¯ä¼šç›´æ¥å¯¼è‡´è¿™æ¬¡çš„<code>debug</code>ç›´æ¥ç»“æŸï¼Œå¦‚æœéœ€è¦é€€å‡ºï¼Œç›´æ¥å…³é—­çª—å£å°±è¡Œï¼Œä¸‹æ¬¡è¿æ¥çš„æ—¶å€™è¿˜æ˜¯å¤„äºä¸Šæ¬¡æ“ä½œçš„ä½ç½®ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€æ¬¡<code>debug</code>æ¨¡å¼åªæœ‰ä¸‰ååˆ†é’Ÿï¼Œè¶…æ—¶äº†åªèƒ½å†å‘ä¸€æ¬¡è¯·æ±‚ï¼Œå¹¶ä¸”æ•°æ®ä¼šæ¸…ç©ºã€‚</li></ol><h3 id="travisç½‘é¡µçš„è®¾ç½®"><a href="#travisç½‘é¡µçš„è®¾ç½®" class="headerlink" title="travisç½‘é¡µçš„è®¾ç½®"></a>travisç½‘é¡µçš„è®¾ç½®</h3><p>è„šæœ¬é…ç½®å¥½äº†åï¼Œå°±å¯ä»¥å»<code>travis</code><a href="https://travis-ci.com/">å®˜ç½‘</a>è®¾ç½®è¦å…³è”çš„ä»“åº“ï¼Œå¥½åƒç°åœ¨<code>travis</code>åªèƒ½å…³è”<code>Github</code>ä»“åº“ï¼Œå¹¶ä¸”å¾—æ˜¯å…¬å¼€çš„ï¼Œç§æœ‰ä»“åº“å¾—è¦é’±ã€‚</p><p>ç„¶ååœ¨å³ä¸Šè§’å¤´åƒé‚£é‡Œæ‰“å¼€<code>setting</code>ï¼Œè¿›å»ä¹‹åå°±æœ‰ä¸ª<code>repositories</code></p><p><img src="/2019/11/21/%E6%B0%B4SpringBoot%E4%B8%8ESpringCloud/1.png" alt></p><p>è®°å¾—ä¹‹å‰å®˜ç½‘æ˜¯<code>travis.org</code>çš„æ—¶å€™æœ‰å…³è”çš„è®¾ç½®ï¼Œæ–°ç‰ˆå®˜æ–¹å¥½åƒæ˜¯æ²¡æœ‰ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨æˆ‘ä»¬è¦è‡ªåŠ¨éƒ¨ç½²çš„ä»“åº“é‡Œé¢ç‚¹ä¸€æ¬¡æ„å»ºï¼Œä¹‹åå°±å¯ä»¥ä¸€ç›´æ„å»ºäº†ã€‚</p><p><img src="/2019/11/21/%E6%B0%B4SpringBoot%E4%B8%8ESpringCloud/4.png" alt></p><p>ç„¶åæŸ¥çœ‹æ¯æ¬¡çš„æ„å»ºæ—¥å¿—å°±è¡Œå•¦ã€‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>æ€»ç»“æ¥è¯´ï¼Œä¸€å…±2æ­¥ï¼š</p><ol><li><strong>ç¼–å†™<code>.travis.yml</code>æ–‡ä»¶æ”¾åˆ°é¡¹ç›®æ ¹ç›®å½•å¹¶ä¸”æ¨ä¸Šä»“åº“</strong></li><li><strong>åœ¨<code>travis</code>å®˜ç½‘è®¾ç½®è¦å…³è”çš„ä»“åº“</strong></li></ol><h2 id="ä¸ªäººæ€»ç»“"><a href="#ä¸ªäººæ€»ç»“" class="headerlink" title="ä¸ªäººæ€»ç»“"></a>ä¸ªäººæ€»ç»“</h2><p>ä¸ªäººè¸©è¿‡çš„å‘åœ¨<code>maven</code>çš„æ„å»ºå’Œ<code>travis</code>è„šæœ¬çš„ç¼–å†™ä¸Šé¢ï¼Œå› ä¸ºé‚£æ—¶å€™åœ¨æ•´ä¸€ä¸ªé¡¹ç›®ä¸‹æ–°å»ºä¸€ä¸ªå­é¡¹ç›®éƒ½æ˜¯æ‰‹åŠ¨çš„ï¼Œæœ‰æ—¶å€™ä¼šæ‰“é”™æŸä¸ªæ–‡ä»¶å¤¹åå­—ï¼Œ<strong>ä½†æ˜¯<code>idea</code>å¯ä»¥è¿è¡Œï¼Œå‘½ä»¤è¡Œæ‰“åŒ…ä¼šæŠ¥é”™ï¼Œè¿™æ—¶å€™å¯èƒ½æ˜¯æŸä¸ªæ–‡ä»¶å¤¹çš„åå­—é”™äº†ï¼Œæˆ–è€…æ˜¯æŸä¸ªæ–‡ä»¶çš„åå­—é”™äº†ï¼Œ</strong>æ‰€ä»¥æ‰‹æ®‹å…šæ–°å»ºä¸€ä¸ª<code>SpringBoot</code>å­é¡¹ç›®çš„æ—¶å€™å¯ä»¥æ–°å»ºä¸€ä¸ª<code>maven</code>çš„<code>module</code>ï¼Œç„¶ååˆ é™¤å¤šä½™çš„ä¸œè¥¿å°±è¡Œå•¦ã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªå°±æ˜¯<code>pom.xml</code>æ‰¾ä¸åˆ°çˆ¶æ¨¡å—çš„é—®é¢˜ï¼Œæˆ–è€…æ‰˜ç®¡è¿™ä¸ª<code>maven</code>å­é¡¹ç›®åˆ°<code>idea</code>çš„æ—¶å€™ä¼šæŠ¥é”™ï¼Œè¿™æ—¶å€™<strong>åªéœ€è¦æŠŠ<code>idea2019</code>ç‰ˆæœ¬æ¢å›<code>idea2018.2</code></strong>å°±è¡Œå•¦ã€‚</p><p>è¿™2ä¸ªå‰æœŸæœ€çƒ¦çš„é—®é¢˜ï¼Œè§£å†³å°±é¡ºç•…å¾ˆå¤šäº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> SpringCloud </tag>
            
            <tag> å¾®æœåŠ¡ </tag>
            
            <tag> devops </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2019ä¸Šæµ·ç½‘ç»œèµ›Bé¢˜</title>
      <link href="/2019/10/08/2019%E4%B8%8A%E6%B5%B7%E7%BD%91%E7%BB%9C%E8%B5%9BB%E9%A2%98/"/>
      <url>/2019/10/08/2019%E4%B8%8A%E6%B5%B7%E7%BD%91%E7%BB%9C%E8%B5%9BB%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>ä¸Šæµ·ç«™ï¼¢é¢˜Light bulbs<br><span id="more"></span></p><h1 id="ä¸Šæµ·ç«™Bé¢˜Light-bulbs"><a href="#ä¸Šæµ·ç«™Bé¢˜Light-bulbs" class="headerlink" title="ä¸Šæµ·ç«™ï¼¢é¢˜Light bulbs"></a><a href="https://nanti.jisuanke.com/t/41399">ä¸Šæµ·ç«™ï¼¢é¢˜Light bulbs</a></h1><p><img src="/2019/10/08/2019%E4%B8%8A%E6%B5%B7%E7%BD%91%E7%BB%9C%E8%B5%9BB%E9%A2%98/timu1.png" alt></p><h1 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h1><p>ç­¾åˆ°é¢˜</p><p><img src="/2019/10/08/2019%E4%B8%8A%E6%B5%B7%E7%BD%91%E7%BB%9C%E8%B5%9BB%E9%A2%98/1.png" alt></p><ul><li>æ’åº</li><li>å‰ç¼€å’Œ</li><li>å·®åˆ†</li></ul><p><em>æ³¨æ„æ­¤é¢˜å¡æ—¶é—´åˆå¡ç©ºé—´ï¼Œå•çº¯æ™®é€šç±»å‹ä¸€ç»´æ•°ç»„é•¿åº¦ä¸èƒ½è¶…è¿‡1e6</em></p><hr><h2 id="å‰ç¼€å’Œ"><a href="#å‰ç¼€å’Œ" class="headerlink" title="å‰ç¼€å’Œ"></a>å‰ç¼€å’Œ</h2><h3 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h3><p>å‰ç¼€å’Œæ˜¯ä¸€ç§é‡è¦çš„é¢„å¤„ç†ï¼Œèƒ½å¤§å¤§é™ä½æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦ã€‚æˆ‘ä»¬å¯ä»¥ç®€å•ç†è§£ä¸º<br>â€œæ•°åˆ—çš„å‰né¡¹çš„å’Œâ€</p><h3 id="é€šå¼"><a href="#é€šå¼" class="headerlink" title="é€šå¼"></a>é€šå¼</h3><p>ç»™å®šä¸€ä¸ªæ•°ç»„A[1..n]ï¼Œå‰ç¼€å’Œæ•°ç»„PrefixSum[1..n]å®šä¹‰ä¸ºï¼š<br>PrefixSum[i] = A[0]+A[1]+â€¦+A[i-1]ï¼›<br><strong>ä¸¾ä¾‹</strong><br>A[5,6,7,8] â€”&gt; PrefixSum[5,11,18,26]</p><p>PrefixSum[0] =A[0] ;<br>PrefixSum[1] =A[0] + A[1] ;<br>PrefixSum[2] =A[0] + A[1] + A[2] ;<br>PrefixSum[3] =A[0] + A[1] + A[2] + A[3] ;</p><h2 id="å·®åˆ†"><a href="#å·®åˆ†" class="headerlink" title="å·®åˆ†"></a>å·®åˆ†</h2><h3 id="å®šä¹‰-1"><a href="#å®šä¹‰-1" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h3><p><strong>å·®åˆ†å°±æ˜¯å°†æ•°åˆ—ä¸­çš„æ¯ä¸€é¡¹åˆ†åˆ«ä¸å‰ä¸€é¡¹æ•°åšå·®</strong>ï¼Œä¾‹å¦‚ï¼š<br>ä¸€ä¸ªåºåˆ—1 2 5 4 7 3ï¼Œå·®åˆ†åå¾—åˆ°1 1 3 -1 3 -4 -3</p><p>æ³¨æ„ï¼š</p><ul><li>å¾—åˆ°çš„å·®åˆ†åºåˆ—ç¬¬ä¸€ä¸ªæ•°å’ŒåŸæ¥çš„ç¬¬ä¸€ä¸ªæ•°ä¸€æ ·ï¼ˆç›¸å½“äºç¬¬ä¸€ä¸ªæ•°å‡0ï¼‰</li><li>å·®åˆ†åºåˆ—æœ€åæ¯”åŸåºåˆ—å¤šä¸€ä¸ªæ•°ï¼ˆç›¸å½“äº0å‡æœ€åä¸€ä¸ªæ•°ï¼‰</li></ul><h3 id="æ€§è´¨ï¼ˆçœå»è¯æ˜ï¼‰"><a href="#æ€§è´¨ï¼ˆçœå»è¯æ˜ï¼‰" class="headerlink" title="æ€§è´¨ï¼ˆçœå»è¯æ˜ï¼‰"></a>æ€§è´¨ï¼ˆçœå»è¯æ˜ï¼‰</h3><p>â‘ å·®åˆ†åºåˆ—æ±‚å‰ç¼€å’Œå¯å¾—åŸåºåˆ—ï¼›</p><p>â‘¡åŸåºåˆ—åŒºé—´[L,R]ä¸­çš„å…ƒç´ å…¨éƒ¨+Kï¼Œå¯ä»¥è½¬åŒ–æ“ä½œä¸ºå·®åˆ†åºåˆ—Lå¤„+Kï¼ŒR+1å¤„-Kï¼›</p><h2 id="è§£é¢˜"><a href="#è§£é¢˜" class="headerlink" title="è§£é¢˜"></a>è§£é¢˜</h2><ul><li><p>æˆ‘ä»¬å¯ä»¥å¯¹é¢˜æ„è¿›è¡Œè½¬æ¢</p><p>  <strong>nä¸ªç‚¹mä¸ªåŒºé—´ï¼Œæ¯æ¬¡åŒºé—´å†…çš„æ•°+1ï¼Œæ±‚æœ€ånä¸ªç‚¹ä¸­è®¡æ•°ä¸ºå¥‡æ•°çš„ç‚¹çš„ä¸ªæ•°</strong>ã€‚<br>  <strong>è¿™ä¸ªå°±æ˜¯ç»å…¸çš„å·®åˆ†é—®é¢˜</strong></p></li><li><p>å› ä¸ºnæ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¯¹må…¥æ‰‹ï¼Œå­˜å‚¨æ‰€æœ‰æ“ä½œåŒºé—´çš„ç«¯ç‚¹ï¼Œæ‰€ä»¥ä¸‹é¢æ“ä½œçš„éƒ½æ˜¯è¢«æ“ä½œåçš„åŒºé—´ï¼Œè€Œä¸æ˜¯æ‰€æœ‰çš„å€¼ã€‚<br>  <strong>å¦‚æœä¸å¯¹åŒºé—´æ“ä½œï¼Œåºåˆ—ä¸­æ¯ä¸ªåŸå§‹çš„å€¼å¯ä»¥ä¸º0ï¼Œä»£è¡¨æ˜¯æš—çš„ï¼Œé‚£ä¹ˆå·®åˆ†åºåˆ—çš„å€¼å…¨æ˜¯0ï¼›å¯¹åŒºé—´[L,R]+1ï¼Œç­‰äºLå¤„+1ï¼ŒR+1å¤„-1ï¼›æ“ä½œå®Œæˆåï¼Œè¿™æ—¶å€™æ±‚å‰ç¼€å’Œæ­£å¥½å¯¹åº”çš„æ˜¯æ“ä½œæ¬¡æ•°ã€‚)</strong></p></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 359ms256kB     c++14</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å·¦ä¾§ä»£è¡¨ç«¯ç‚¹ï¼Œå³ä¾§ä»£è¡¨æ“ä½œ</span></span><br><span class="line">pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;p[<span class="number">2020</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> t1,t,n,m,l,r;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;t1);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=t1;k++)</span><br><span class="line">    &#123;</span><br><span class="line"><span class="keyword">int</span> tot=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;l,&amp;r);</span><br><span class="line">p[tot++]=<span class="built_in">make_pair</span>(l,<span class="number">1</span>);</span><br><span class="line">p[tot++]=<span class="built_in">make_pair</span>(r+<span class="number">1</span>,<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">sort</span>(p,p+tot);</span><br><span class="line"><span class="comment">//nowè¡¨ç¤ºå½“å‰çš„ä½ç½®</span></span><br><span class="line"><span class="comment">//sumè¡¨ç¤ºä»nowåˆ°å½“å‰ç¯æ³¡çš„å¼€å…³çŠ¶æ€</span></span><br><span class="line"><span class="keyword">int</span> sum=<span class="number">0</span>,now=<span class="number">0</span>,ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;tot;i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//ä¸é‡å </span></span><br><span class="line"><span class="keyword">if</span>(now!=p[i].first)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(sum % <span class="number">2</span> != <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">ans+=p[i].first-now;</span><br><span class="line">&#125;</span><br><span class="line">now=p[i].first;</span><br><span class="line">&#125;</span><br><span class="line">sum+=p[i].second;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Case #%d: %d\n&quot;</span>,k,ans);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Javaè®¾è®¡æ¨¡å¼-è§‚å¯Ÿè€…æ¨¡å¼</title>
      <link href="/2019/10/05/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/10/05/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>ã€ŠHead First Design Patternsã€‹â€”The Observer Pattern</p><span id="more"></span><h1 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h1><h2 id="æŠ¥çº¸è®¢é˜…"><a href="#æŠ¥çº¸è®¢é˜…" class="headerlink" title="æŠ¥çº¸è®¢é˜…"></a>æŠ¥çº¸è®¢é˜…</h2><p>å¯ä»¥ä»æŠ¥çº¸æˆ–æ‚å¿—çš„è®¢é˜…æ–¹å¼å»äº†è§£è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä»€ä¹ˆ</p><p>æŠ¥çº¸æˆ–æ‚å¿—çš„è®¢é˜…æ–¹å¼ï¼š</p><p><img src="/2019/10/05/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/1.png" alt></p><p>ä»ä¸Šé¢çš„è®¢é˜…æ–¹å¼å¯ä»¥è¿™æ ·è®¤ä¸ºè§‚å¯Ÿè€…æ¨¡å¼ï¼š</p><p><strong>Publishers + Subscribers = Observer Pattern</strong><br>æŠ¥çº¸å‡ºç‰ˆå•† + è®¢é˜…è€… = è§‚å¯Ÿè€…æ¨¡å¼</p><p>we call the publisher the <strong>SUBJECT</strong> and the subscribers the <strong>OBSERVERS</strong>.<br>æŠ¥çº¸å‡ºç‰ˆå•†ç§°ä¸ºSUBJECT(ç›®æ ‡)ï¼Œè®¢é˜…è€…ç§°ä¸ºOBSERVERS(è§‚å¯Ÿè€…)</p><h2 id="ç»§ç»­è§£é‡Š"><a href="#ç»§ç»­è§£é‡Š" class="headerlink" title="ç»§ç»­è§£é‡Š"></a>ç»§ç»­è§£é‡Š</h2><h2 id="å¼€å§‹æ—¶"><a href="#å¼€å§‹æ—¶" class="headerlink" title="å¼€å§‹æ—¶"></a>å¼€å§‹æ—¶</h2><p><img src="/2019/10/05/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/2.png" alt></p><h2 id="çŠ¶æ€æ”¹å˜æ—¶"><a href="#çŠ¶æ€æ”¹å˜æ—¶" class="headerlink" title="çŠ¶æ€æ”¹å˜æ—¶"></a>çŠ¶æ€æ”¹å˜æ—¶</h2><p><img src="/2019/10/05/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/3.png" alt></p><hr><p><img src="/2019/10/05/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/4.png" alt></p><hr><p><img src="/2019/10/05/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/5.png" alt></p><hr><p><img src="/2019/10/05/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/6.png" alt></p><hr><p><img src="/2019/10/05/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/7.png" alt></p><hr><p><img src="/2019/10/05/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/8.png" alt></p><h1 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h1><p>é€šè¿‡ä¸Šé¢ä¾‹å­å·²ç»ç”ŸåŠ¨å½¢è±¡å¾—å±•ç¤ºäº†ä»€ä¹ˆæ˜¯è§‚å¯Ÿè€…æ¨¡å¼</p><h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p><strong>The Observer Pattern</strong> defines a one-to-many dependency between objects so that when one object changes state, all of its dependents are notified and updated automatically.</p><p><strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>å®šä¹‰äº†å¯¹è±¡ä¹‹é—´çš„ä¸€å¯¹å¤šä¾èµ–ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå½“ä¸€ä¸ªå¯¹è±¡æ”¹å˜çŠ¶æ€æ—¶ï¼Œå®ƒçš„æ‰€æœ‰ä¾èµ–è€…éƒ½ä¼šæ”¶åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°ã€‚</p><h2 id="ç»“åˆå®šä¹‰ä¸ä¹‹å‰çš„ä¾‹å­"><a href="#ç»“åˆå®šä¹‰ä¸ä¹‹å‰çš„ä¾‹å­" class="headerlink" title="ç»“åˆå®šä¹‰ä¸ä¹‹å‰çš„ä¾‹å­"></a>ç»“åˆå®šä¹‰ä¸ä¹‹å‰çš„ä¾‹å­</h2><p><img src="/2019/10/05/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/9.png" alt></p><p><code>Subject</code>å’Œ<code>Observer</code>å®šä¹‰äº†ä¸€å¯¹å¤šçš„å…³ç³»ã€‚<code>Observer</code>ä¾èµ–äºæ­¤<code>Subject</code>ï¼Œåªè¦<code>Subject</code>çŠ¶æ€ä¸€æœ‰å˜åŒ–ï¼Œ<code>Observer</code>å°±ä¼šè¢«é€šçŸ¥ã€‚æ ¹æ®é€šçŸ¥çš„é£æ ¼ï¼Œ<code>Observer</code>å¯èƒ½å› ä¸ºå€¼çš„æ›´æ–°è€Œæ›´æ–°ã€‚<br>å®ç°è§‚å¯Ÿè€…æ¨¡å¼çš„æ–¹æ³•ä¸åªä¸€ç§ï¼Œä½†æ˜¯ä»¥åŒ…å«<code>Subject</code>ä¸<code>Observer</code>æ¥å£çš„ç±»è®¾è®¡çš„åšæ³•æœ€å¸¸è§ã€‚</p><h2 id="ç±»å›¾"><a href="#ç±»å›¾" class="headerlink" title="ç±»å›¾"></a>ç±»å›¾</h2><p><img src="/2019/10/05/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/10.png" alt></p><p><img src="/2019/10/05/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/11.png" alt></p><p>è§‚å¯Ÿè€…æ¨¡å¼æä¾›äº†ä¸€ç§å¯¹è±¡è®¾è®¡ï¼Œè®©<code>Subject</code>å’Œ<code>Observer</code>ä¹‹é—´æ¾è€¦åˆã€‚</p><p>å½“ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´æ¾è€¦åˆï¼Œå®ƒä»¬ä¾ç„¶å¯ä»¥äº¤äº’ï¼Œä½†æ˜¯ä¸å¤ªæ¸…æ¥šå½¼æ­¤çš„ç»†èŠ‚ã€‚</p><hr><p><strong>ä¸ºä»€ä¹ˆå¯ä»¥æ¾è€¦åˆï¼Ÿ</strong></p><ol><li><p><strong>å…³äº<code>Observer</code>çš„ä¸€åˆ‡ï¼Œ<code>Subject</code>åªçŸ¥é“<code>Observer</code>å®ç°äº†æŸä¸ªæ¥å£ï¼ˆä¹Ÿå°±æ˜¯<code>Observer</code>æ¥å£ï¼‰</strong>ã€‚<code>Subject</code>ä¸éœ€è¦çŸ¥é“<code>Observer</code>çš„å…·ä½“ç±»æ˜¯è°ã€åšäº†äº›ä»€ä¹ˆæˆ–å…¶ä»–ä»»ä½•ç»†èŠ‚ã€‚</p></li><li><p><strong>ä»»ä½•æ—¶å€™æˆ‘ä»¬éƒ½å¯ä»¥å¢åŠ æ–°çš„<code>Observer</code></strong>ã€‚å› ä¸º<code>Subject</code>å”¯ä¸€ä¾èµ–çš„ä¸œè¥¿æ˜¯ä¸€ä¸ªå®ç°<code>Observer</code>æ¥å£çš„å¯¹è±¡åˆ—è¡¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥éšæ—¶å¢åŠ <code>Observer</code>ã€‚äº‹å®ä¸Šï¼Œåœ¨è¿è¡Œæ—¶æˆ‘ä»¬å¯ä»¥ç”¨æ–°çš„<code>Observer</code>å–ä»£ç°æœ‰çš„<code>Observer</code>ï¼Œ<code>Subject</code>ä¸ä¼šå—åˆ°ä»»ä½•å½±å“ã€‚åŒæ ·çš„ï¼Œä¹Ÿå¯ä»¥åœ¨ä»»ä½•æ—¶å€™åˆ é™¤æŸäº›<code>Observer</code>ã€‚</p></li><li><p><strong>æœ‰æ–°ç±»å‹çš„<code>Observer</code>å‡ºç°æ—¶ï¼Œ<code>Subject</code>çš„ä»£ç ä¸éœ€è¦ä¿®æ”¹</strong>ã€‚å‡å¦‚æˆ‘ä»¬æœ‰ä¸ªæ–°çš„å…·ä½“ç±»éœ€è¦å½“<code>Observer</code>ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä¸ºäº†å…¼å®¹æ–°ç±»å‹è€Œä¿®æ”¹<code>Subject</code>çš„ä»£ç ï¼Œæ‰€æœ‰è¦åšçš„å°±æ˜¯åœ¨æ–°çš„ç±»é‡Œå®ç°æ­¤<code>Observer</code>æ¥å£ï¼Œç„¶åæ³¨å†Œä¸º<code>Observer</code>å³å¯ã€‚<code>Subject</code>ä¸åœ¨ä¹åˆ«çš„ï¼Œå®ƒåªä¼šå‘é€é€šçŸ¥ç»™æ‰€æœ‰å®ç°äº†<code>Observer</code>æ¥å£çš„å¯¹è±¡ã€‚</p></li><li><p><strong>æˆ‘ä»¬å¯ä»¥ç‹¬ç«‹åœ°å¤ç”¨<code>Subject</code>æˆ–<code>Observer</code></strong>ã€‚å¦‚æœæˆ‘ä»¬åœ¨å…¶ä»–åœ°æ–¹éœ€è¦ä½¿ç”¨<code>Subject</code>æˆ–<code>Observer</code>ï¼Œå¯ä»¥è½»æ˜“åœ°å¤ç”¨ï¼Œå› ä¸ºäºŒè€…å¹¶éç´§è€¦åˆã€‚</p></li><li>æ”¹å˜<code>Subject</code>æˆ–<code>Observer</code>å…¶ä¸­ä¸€æ–¹ï¼Œå¹¶ä¸ä¼šå½±å“å¦ä¸€æ–¹ã€‚å› ä¸ºä¸¤è€…æ˜¯æ¾è€¦åˆçš„ï¼Œæ‰€ä»¥åªè¦ä»–ä»¬ä¹‹é—´çš„æ¥å£ä»è¢«éµå®ˆï¼Œæˆ‘ä»¬å°±å¯ä»¥è‡ªç”±åœ°æ”¹å˜ä»–ä»¬ã€‚</li></ol><h1 id="æ°”è±¡ç›‘æµ‹åº”ç”¨"><a href="#æ°”è±¡ç›‘æµ‹åº”ç”¨" class="headerlink" title="æ°”è±¡ç›‘æµ‹åº”ç”¨"></a>æ°”è±¡ç›‘æµ‹åº”ç”¨</h1><h2 id="æƒ…å†µä»‹ç»"><a href="#æƒ…å†µä»‹ç»" class="headerlink" title="æƒ…å†µä»‹ç»"></a>æƒ…å†µä»‹ç»</h2><p><img src="/2019/10/05/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/13.png" alt></p><hr><p><img src="/2019/10/05/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/12.png" alt></p><hr><p><img src="/2019/10/05/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/14.png" alt></p><hr><p><img src="/2019/10/05/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/15.png" alt></p><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p><img src="/2019/10/05/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/17.png" alt></p><hr><p><img src="/2019/10/05/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/16.png" alt></p><h3 id="Subjectæ¥å£"><a href="#Subjectæ¥å£" class="headerlink" title="Subjectæ¥å£"></a>Subjectæ¥å£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> GreenHatHG</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½éœ€è¦ä¸€ä¸ªObserverä½œä¸ºå˜é‡ï¼Œè¯¥Observeræ˜¯ç”¨æ¥æ³¨å†Œæˆ–è¢«åˆ é™¤çš„ã€‚</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> o</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">regeisterObserver</span><span class="params">(Observer o)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeObserver</span><span class="params">(Observer o)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å½“SubjectçŠ¶æ€æ”¹å˜æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œç”¨ä»¥é€šçŸ¥æ‰€æœ‰çš„Observer</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notifyObservers</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Observeræ¥å£"><a href="#Observeræ¥å£" class="headerlink" title="Observeræ¥å£"></a>Observeræ¥å£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‰€æœ‰çš„Observeréƒ½å¿…é¡»å®ç°update()æ–¹æ³•ï¼Œä»¥å®ç°Observeræ¥å£ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> GreenHatHG</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å½“æ°”è±¡è§‚æµ‹å€¼æ”¹å˜æ—¶ï¼ŒSubjectä¼šæŠŠè¿™äº›çŠ¶æ€ä½œä¸ºæ–¹æ³•å‚æ•°ä¼ é€’ç»™Observer</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> temp æ¸©åº¦</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> humidity æ¹¿åº¦</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pressure æ°”å‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">float</span> temp, <span class="keyword">float</span> humidity, <span class="keyword">float</span> pressure)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="DisplayElementæ¥å£"><a href="#DisplayElementæ¥å£" class="headerlink" title="DisplayElementæ¥å£"></a>DisplayElementæ¥å£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> GreenHatHG</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">DisplayElement</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å½“å¸ƒå‘Šæ¿éœ€è¦æ˜¾ç¤ºæ—¶ï¼Œè°ƒç”¨æ­¤æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="WeatherData"><a href="#WeatherData" class="headerlink" title="WeatherData"></a>WeatherData</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> GreenHatHG</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WeatherData</span> <span class="keyword">implements</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ArrayList&lt;Observer&gt; observers;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> temperature;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> humidity;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> pressure;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WeatherData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        observers = <span class="keyword">new</span> ArrayList&lt;Observer&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ³¨å†ŒObserver</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> o</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerObserver</span><span class="params">(Observer o)</span> </span>&#123;</span><br><span class="line">        observers.add(o);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç§»é™¤Observer</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> o</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeObserver</span><span class="params">(Observer o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = observers.indexOf(o);</span><br><span class="line">        <span class="keyword">if</span> (i &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            observers.remove(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æˆ‘ä»¬æŠŠçŠ¶æ€å‘Šè¯‰æ¯ä¸€ä¸ªObserverï¼Œå› ä¸ºObserveréƒ½å®ç°äº†apdateï¼ˆï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬çŸ¥é“å¦‚ä½•é€šçŸ¥å®ƒä»¬ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notifyObservers</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (Observer observer : observers) &#123;</span><br><span class="line">            observer.update(temperature, humidity, pressure);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å½“æ°”è±¡ç«™å¾—åˆ°æ›´æ–°è§‚æµ‹å€¼æ—¶ï¼Œæˆ‘ä»¬é€šçŸ¥Observer</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">measurementsChanged</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        notifyObservers();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¯ä»¥ä»åˆ«çš„åœ°æ–¹è®¾ç½®è§‚æµ‹å€¼ï¼Œä¸ä¸€å®šä»æ°”è±¡ç«™</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> temperature</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> humidity</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pressure</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMeasurements</span><span class="params">(<span class="keyword">float</span> temperature, <span class="keyword">float</span> humidity, <span class="keyword">float</span> pressure)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.temperature = temperature;</span><br><span class="line">        <span class="keyword">this</span>.humidity = humidity;</span><br><span class="line">        <span class="keyword">this</span>.pressure = pressure;</span><br><span class="line">        measurementsChanged();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getTemperature</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> temperature;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getHumidity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> humidity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getPressure</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> pressure;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¸ƒå‘Šæ¿"><a href="#å¸ƒå‘Šæ¿" class="headerlink" title="å¸ƒå‘Šæ¿"></a>å¸ƒå‘Šæ¿</h3><h4 id="CurrentConditionsDisplay"><a href="#CurrentConditionsDisplay" class="headerlink" title="CurrentConditionsDisplay"></a>CurrentConditionsDisplay</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®ç°äº†Observeræ¥å£ï¼Œæ‰€ä»¥å¯ä»¥ä»WeatherDataå¯¹è±¡è·å¾—å€¼</span></span><br><span class="line"><span class="comment"> * ä¹Ÿå®ç°äº†DisplayElementæ¥å£ï¼Œå› ä¸ºè§„å®šæ‰€æœ‰çš„å¸ƒå‘Šæ¿éƒ½å¿…é¡»å®ç°æ­¤æ¥å£</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> GreenHatHG</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CurrentConditionsDisplay</span> <span class="keyword">implements</span> <span class="title">Observer</span>, <span class="title">DisplayElement</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> temperature;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> humidity;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸ºä»€ä¹ˆè¦ä¿å­˜WeacherDataçš„å¼•ç”¨ï¼Ÿ</span></span><br><span class="line"><span class="comment">     * ä»¥åæˆ‘ä»¬å¯èƒ½æƒ³è¦å–æ¶ˆæ³¨å†Œï¼Œå¦‚æœå·²ç»æœ‰äº†å¯¹Subjectçš„å¼•ç”¨ä¼šæ¯”è¾ƒæ–¹ä½¿ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Subject weatherData;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ³¨å†Œ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> weatherData</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CurrentConditionsDisplay</span><span class="params">(Subject weatherData)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.weatherData = weatherData;</span><br><span class="line">        weatherData.registerObserver(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å½“updateè¢«è°ƒç”¨æ—¶ï¼Œ æŠŠæ¸©åº¦å’Œæ¹¿åº¦ä¿å­˜èµ·æ¥ï¼Œè°ƒç”¨display()æ˜¾ç¤º</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> temperature</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> humidity æ¹¿åº¦</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pressure æ°”å‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">float</span> temperature, <span class="keyword">float</span> humidity, <span class="keyword">float</span> pressure)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.temperature = temperature;</span><br><span class="line">        <span class="keyword">this</span>.humidity = humidity;</span><br><span class="line">        display();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åªæ˜¯å°†æœ€è¿‘çš„æ¸©åº¦å’Œæ¹¿åº¦æ˜¾ç¤ºå‡ºæ¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Current conditions: &quot;</span> + temperature</span><br><span class="line">                + <span class="string">&quot;F degrees and &quot;</span> + humidity + <span class="string">&quot;% humidity&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="StatisticsDisplay"><a href="#StatisticsDisplay" class="headerlink" title="StatisticsDisplay"></a>StatisticsDisplay</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> GreenHatHG</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StatisticsDisplay</span> <span class="keyword">implements</span> <span class="title">Observer</span>, <span class="title">DisplayElement</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> maxTemp = <span class="number">0.0f</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> minTemp = <span class="number">200</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> tempSum= <span class="number">0.0f</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> numReadings;</span><br><span class="line">    <span class="keyword">private</span> WeatherData weatherData;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">StatisticsDisplay</span><span class="params">(WeatherData weatherData)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.weatherData = weatherData;</span><br><span class="line">        weatherData.registerObserver(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">float</span> temp, <span class="keyword">float</span> humidity, <span class="keyword">float</span> pressure)</span> </span>&#123;</span><br><span class="line">        tempSum += temp;</span><br><span class="line">        numReadings++;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (temp &gt; maxTemp) &#123;</span><br><span class="line">            maxTemp = temp;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (temp &lt; minTemp) &#123;</span><br><span class="line">            minTemp = temp;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        display();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Avg/Max/Min temperature = &quot;</span> + (tempSum / numReadings)</span><br><span class="line">                + <span class="string">&quot;/&quot;</span> + maxTemp + <span class="string">&quot;/&quot;</span> + minTemp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> GreenHatHG</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WeatherStation</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        WeatherData weatherData = <span class="keyword">new</span> WeatherData();</span><br><span class="line"></span><br><span class="line">        CurrentConditionsDisplay currentDisplay =</span><br><span class="line">                <span class="keyword">new</span> CurrentConditionsDisplay(weatherData);</span><br><span class="line">        StatisticsDisplay statisticsDisplay = <span class="keyword">new</span> StatisticsDisplay(weatherData);</span><br><span class="line"></span><br><span class="line">        weatherData.setMeasurements(<span class="number">80</span>, <span class="number">65</span>, <span class="number">30.4f</span>);</span><br><span class="line">        weatherData.setMeasurements(<span class="number">82</span>, <span class="number">70</span>, <span class="number">29.2f</span>);</span><br><span class="line">        weatherData.setMeasurements(<span class="number">78</span>, <span class="number">90</span>, <span class="number">29.2f</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡º:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Current conditions: <span class="number">80.0F</span> degrees and <span class="number">65.0</span>% humidity</span><br><span class="line">Avg/Max/Min temperature = <span class="number">80.0</span>/<span class="number">80.0</span>/<span class="number">80.0</span></span><br><span class="line">Current conditions: <span class="number">82.0F</span> degrees and <span class="number">70.0</span>% humidity</span><br><span class="line">Avg/Max/Min temperature = <span class="number">81.0</span>/<span class="number">82.0</span>/<span class="number">80.0</span></span><br><span class="line">Current conditions: <span class="number">78.0F</span> degrees and <span class="number">90.0</span>% humidity</span><br><span class="line">Avg/Max/Min temperature = <span class="number">80.0</span>/<span class="number">82.0</span>/<span class="number">78.0</span></span><br></pre></td></tr></table></figure><h2 id="JDKå†…ç½®å®ç°"><a href="#JDKå†…ç½®å®ç°" class="headerlink" title="JDKå†…ç½®å®ç°"></a>JDKå†…ç½®å®ç°</h2><h3 id="Implementation-with-Observer"><a href="#Implementation-with-Observer" class="headerlink" title="Implementation with Observer"></a>Implementation with Observer</h3><p>é¦–å…ˆéœ€è¦è¯´æ˜çš„æ˜¯<code>java.util.observer</code>å·²ç»åœ¨<code>jdk9</code>ä¸­è¢«å¼ƒç”¨äº†ï¼š</p><p><a href="https://bugs.openjdk.java.net/browse/JDK-8154801">[JDK-8154801] deprecate Observer and Observable - Java Bug System</a></p><p><img src="/2019/10/05/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/18.png" alt></p><h3 id="Implementation-with-PropertyChangeListener"><a href="#Implementation-with-PropertyChangeListener" class="headerlink" title="Implementation with PropertyChangeListener"></a>Implementation with PropertyChangeListener</h3><p><a href="https://stackoverflow.com/questions/46380073/observer-is-deprecated-in-java-9-what-should-we-use-instead-of-it">Observer is deprecated in Java 9. What should we use instead of it? - Stack Overflow</a></p><p><code>stackoverflow</code>ç›¸å…³è®¨è®ºæŒ‡å‡ºï¼šæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <strong>PropertyChangeEvent</strong> and <strong>PropertyChangeListener</strong>å®ç°</p><h4 id="WeacherData"><a href="#WeacherData" class="headerlink" title="WeacherData"></a>WeacherData</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> jdk9;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.beans.PropertyChangeListener;</span><br><span class="line"><span class="keyword">import</span> java.beans.PropertyChangeSupport;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> GreenHatHG</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WeatherData</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> temperature;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> humidity;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> pressure;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¿…é¡»æœ‰PropertyChangeSupportå®ä¾‹çš„å¼•ç”¨</span></span><br><span class="line"><span class="comment">     * å½“ç±»å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæœ‰åŠ©äºå‘é€é€šçŸ¥ç»™Observers</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> PropertyChangeSupport support;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WeatherData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        support = <span class="keyword">new</span> PropertyChangeSupport(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ Observer</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pcl</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addPropertyChangeListener</span><span class="params">(PropertyChangeListener pcl)</span> </span>&#123;</span><br><span class="line">        support.addPropertyChangeListener(pcl);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removePropertyChangeListener</span><span class="params">(PropertyChangeListener pcl)</span> </span>&#123;</span><br><span class="line">        support.removePropertyChangeListener(pcl);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> temperature</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> humidity</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pressure</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMeasurements</span><span class="params">(<span class="keyword">float</span> temperature, <span class="keyword">float</span> humidity, <span class="keyword">float</span> pressure)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//å½“çŠ¶æ€æ”¹å˜æ—¶ï¼Œé€šçŸ¥Observers</span></span><br><span class="line">        <span class="comment">//å‚æ•°:å±æ€§åç§°,æ–°å€¼,æ—§å€¼</span></span><br><span class="line">        support.firePropertyChange(<span class="string">&quot;temperature&quot;</span>, <span class="keyword">this</span>.temperature, temperature);</span><br><span class="line">        support.firePropertyChange(<span class="string">&quot;humidity&quot;</span>, <span class="keyword">this</span>.humidity, humidity);</span><br><span class="line">        support.firePropertyChange(<span class="string">&quot;pressure&quot;</span>, <span class="keyword">this</span>.pressure, pressure);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//è¿™é‡Œè®¾ç½®çš„é¡ºåºå’ŒObserverè·å¾—é¡ºåºä¿æŒä¸€æ ·</span></span><br><span class="line">        <span class="keyword">this</span>.temperature = temperature;</span><br><span class="line">        <span class="keyword">this</span>.humidity = humidity;</span><br><span class="line">        <span class="keyword">this</span>.pressure = pressure;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getTemperature</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> temperature;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getHumidity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> humidity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getPressure</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> pressure;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="CurrentConditionsDisplay-1"><a href="#CurrentConditionsDisplay-1" class="headerlink" title="CurrentConditionsDisplay"></a>CurrentConditionsDisplay</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> jdk9;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.beans.PropertyChangeEvent;</span><br><span class="line"><span class="keyword">import</span> java.beans.PropertyChangeListener;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> GreenHatHG</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CurrentConditionsDisplay</span> <span class="keyword">implements</span> <span class="title">PropertyChangeListener</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> temperature;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> humidity;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> pressure;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">propertyChange</span><span class="params">(PropertyChangeEvent evt)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//è·å–å€¼çš„é¡ºåºå’ŒWeatherDataè®¾ç½®çš„é¡ºåºä¸€æ ·</span></span><br><span class="line">        <span class="keyword">this</span>.temperature = (<span class="keyword">float</span>) evt.getNewValue();</span><br><span class="line">        <span class="keyword">this</span>.humidity = (<span class="keyword">float</span>) evt.getNewValue();</span><br><span class="line">        <span class="keyword">this</span>.pressure = (<span class="keyword">float</span>) evt.getNewValue();</span><br><span class="line">        display();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Current conditions: &quot;</span> + temperature</span><br><span class="line">                + <span class="string">&quot;F degrees and &quot;</span> + humidity + <span class="string">&quot;% humidity&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="WeatherStation"><a href="#WeatherStation" class="headerlink" title="WeatherStation"></a>WeatherStation</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> jdk9;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> GreenHatHG</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WeatherStation</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        WeatherData weatherData = <span class="keyword">new</span> WeatherData();</span><br><span class="line"></span><br><span class="line">        CurrentConditionsDisplay currentDisplay =</span><br><span class="line">                <span class="keyword">new</span> CurrentConditionsDisplay();</span><br><span class="line"></span><br><span class="line">        weatherData.addPropertyChangeListener(currentDisplay);</span><br><span class="line"></span><br><span class="line">        weatherData.setMeasurements(<span class="number">78</span>, <span class="number">90</span>, <span class="number">29.2f</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="è§‚å¯Ÿè€…æ¨¡å¼ä¸MVC"><a href="#è§‚å¯Ÿè€…æ¨¡å¼ä¸MVC" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼ä¸MVC"></a>è§‚å¯Ÿè€…æ¨¡å¼ä¸MVC</h1><p><strong>æ¨¡å‹</strong>(Model)ï¼Œ<strong>è§†å›¾</strong>(View)å’Œ<strong>æ§åˆ¶å™¨</strong>(Controller)</p><p><strong>æ¨¡å‹</strong>å¯å¯¹åº”äºè§‚å¯Ÿè€…æ¨¡å¼ä¸­çš„<code>Subject</code>ï¼Œè€Œ<strong>è§†å›¾</strong>å¯¹åº”äº<code>Observer</code>ï¼Œ<strong>æ§åˆ¶å™¨</strong>å¯å……å½“ä¸¤è€…ä¹‹é—´çš„ä¸­ä»‹è€…</p><p>å½“<strong>æ¨¡å‹å±‚</strong>çš„æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶ï¼Œ<strong>è§†å›¾å±‚</strong>å°†è‡ªåŠ¨æ”¹å˜å…¶æ˜¾ç¤ºå†…å®¹</p><p><img src="/2019/10/05/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/19.png" alt></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ol><li><p>å¯ä»¥å®ç°<strong>è¡¨ç¤ºå±‚å’Œæ•°æ®é€»è¾‘å±‚çš„åˆ†ç¦»</strong></p></li><li><p>åœ¨è§‚å¯Ÿç›®æ ‡å’Œè§‚å¯Ÿè€…ä¹‹é—´<strong>å»ºç«‹ä¸€ä¸ªæŠ½è±¡çš„è€¦åˆ</strong></p></li><li><p>æ”¯æŒ<strong>å¹¿æ’­é€šä¿¡ï¼Œç®€åŒ–äº†ä¸€å¯¹å¤šç³»ç»Ÿè®¾è®¡çš„éš¾åº¦</strong></p></li><li><p><strong>ç¬¦åˆå¼€é—­åŸåˆ™</strong>ï¼Œå¢åŠ æ–°çš„å…·ä½“è§‚å¯Ÿè€…æ— é¡»ä¿®æ”¹åŸæœ‰ç³»ç»Ÿä»£ç ï¼Œåœ¨å…·ä½“è§‚å¯Ÿè€…ä¸è§‚å¯Ÿç›®æ ‡ä¹‹é—´ä¸å­˜åœ¨å…³è”å…³ç³»çš„æƒ…å†µä¸‹ï¼Œå¢åŠ æ–°çš„è§‚å¯Ÿç›®æ ‡ä¹Ÿå¾ˆæ–¹ä¾¿</p></li></ol><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><ol><li><p>å°†æ‰€æœ‰çš„è§‚å¯Ÿè€…éƒ½é€šçŸ¥åˆ°ä¼š<strong>èŠ±è´¹å¾ˆå¤šæ—¶é—´</strong></p></li><li><p>å¦‚æœå­˜åœ¨<strong>å¾ªç¯ä¾èµ–</strong>æ—¶<strong>å¯èƒ½å¯¼è‡´ç³»ç»Ÿå´©æºƒ</strong></p></li><li><p><strong>æ²¡æœ‰ç›¸åº”çš„æœºåˆ¶è®©è§‚å¯Ÿè€…çŸ¥é“æ‰€è§‚å¯Ÿçš„ç›®æ ‡å¯¹è±¡æ˜¯æ€ä¹ˆå‘ç”Ÿå˜åŒ–çš„</strong>ï¼Œè€Œåªæ˜¯çŸ¥é“è§‚å¯Ÿç›®æ ‡å‘ç”Ÿäº†å˜åŒ–</p></li></ol><h2 id="é€‚ç”¨ç¯å¢ƒ"><a href="#é€‚ç”¨ç¯å¢ƒ" class="headerlink" title="é€‚ç”¨ç¯å¢ƒ"></a>é€‚ç”¨ç¯å¢ƒ</h2><ol><li><p>ä¸€ä¸ªæŠ½è±¡æ¨¡å‹æœ‰ä¸¤ä¸ªæ–¹é¢ï¼Œå…¶ä¸­<strong>ä¸€ä¸ªæ–¹é¢ä¾èµ–äºå¦ä¸€ä¸ªæ–¹é¢</strong>ï¼Œå°†è¿™ä¸¤ä¸ªæ–¹é¢å°è£…åœ¨ç‹¬ç«‹çš„å¯¹è±¡ä¸­ä½¿å®ƒä»¬<strong>å¯ä»¥å„è‡ªç‹¬ç«‹åœ°æ”¹å˜å’Œå¤ç”¨</strong></p></li><li><p><strong>ä¸€ä¸ªå¯¹è±¡çš„æ”¹å˜å°†å¯¼è‡´ä¸€ä¸ªæˆ–å¤šä¸ªå…¶ä»–å¯¹è±¡å‘ç”Ÿæ”¹å˜ï¼Œä¸”å¹¶ä¸çŸ¥é“å…·ä½“æœ‰å¤šå°‘å¯¹è±¡å°†å‘ç”Ÿæ”¹å˜ï¼Œä¹Ÿä¸çŸ¥é“è¿™äº›å¯¹è±¡æ˜¯è°</strong></p></li><li><p>éœ€è¦åœ¨ç³»ç»Ÿä¸­<strong>åˆ›å»ºä¸€ä¸ªè§¦å‘é“¾</strong></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
            <tag> è§‚å¯Ÿè€…æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2019å¾å·ç½‘ç»œèµ›è¡¥é¢˜</title>
      <link href="/2019/09/08/2019%E5%BE%90%E5%B7%9E%E7%BD%91%E7%BB%9C%E8%B5%9B%E8%A1%A5%E9%A2%98/"/>
      <url>/2019/09/08/2019%E5%BE%90%E5%B7%9E%E7%BD%91%E7%BB%9C%E8%B5%9B%E8%A1%A5%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>B-so easy</p><span id="more"></span><h1 id="B-so-easy"><a href="#B-so-easy" class="headerlink" title="B-so easy"></a><a href="https://nanti.jisuanke.com/t/41384">B-so easy</a></h1><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/liufengwei1/article/details/100606177">2019å¾å·ç½‘ç»œèµ› B so easy - binarycopycode - CSDNåšå®¢</a></p><h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><ul><li>2000ms</li><li>262144K</li></ul><p><img src="/2019/09/08/2019%E5%BE%90%E5%B7%9E%E7%BD%91%E7%BB%9C%E8%B5%9B%E8%A1%A5%E9%A2%98/1.png" alt></p><h2 id="å¤§æ„"><a href="#å¤§æ„" class="headerlink" title="å¤§æ„"></a>å¤§æ„</h2><p>æœ‰nä¸ªç‚¹ï¼Œåˆ†åˆ«æ ‡å·ä¸º<code>1-n</code>ï¼Œä¸¤ç§æ“ä½œï¼š</p><ul><li><code>1 X</code>ï¼Œè¡¨ç¤ºå»æ‰ç¬¬Xä¸ªç‚¹</li><li><code>2 X</code>ï¼Œè¡¨ç¤ºæŸ¥è¯¢<code>[x,n]</code>å†…ç¬¬ä¸€ä¸ªå­˜åœ¨çš„ç‚¹ã€‚</li></ul><h2 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>æ¨¡æ‹Ÿå¹¶æŸ¥é›†æ“ä½œå³å¯ï¼ˆå½“æ—¶å¹¶æ²¡æœ‰æƒ³åˆ°ç³»åˆ—ï¼‰ï¼Œå…·ä½“çœ‹ä»£ç </p><p>æ³¨æ„ï¼Œå› ä¸ºæ•°æ®é‡å¤§ï¼Œæ‰€ä»¥å¾—ç”¨<code>unordered_map</code>ä»£æ›¿æ•°ç»„</p><p><em>ï¼ˆ<code>unorderd_map</code>çš„å­˜å–æŸ¥è¯¢æ“ä½œéƒ½è¿‘ä¼¼äº<code>O(1)</code>ï¼Œ<code>map</code>æ˜¯å¸¦<code>log</code>çš„ï¼Œè€Œä¸”<code>1e6</code>å¤ªå¤§ï¼Œ<code>map</code>ä¼šTï¼‰</em></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 2019-09-08 21:36</span></span><br><span class="line"><span class="comment"> * 1089ms</span></span><br><span class="line"><span class="comment"> * 20096kB</span></span><br><span class="line"><span class="comment"> * c++11</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Map[x]å­˜xå³è¾¹ç¬¬ä¸€ä¸ªåœ¨å“ªï¼Œåˆå§‹çš„æ˜¯Map[x]=x+1</span></span><br><span class="line">unordered_map&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;Map;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">father</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(Map.<span class="built_in">count</span>(x) == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">return</span> Map[x] = <span class="built_in">father</span>(Map[x]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, q;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;q);</span><br><span class="line">    <span class="keyword">int</span> op, x, ans;</span><br><span class="line">    <span class="keyword">while</span>(q--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;op, &amp;x);</span><br><span class="line">        <span class="keyword">if</span>(op == <span class="number">1</span>)</span><br><span class="line">            Map[x] = <span class="built_in">father</span>(x+<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">father</span>(x));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>STLä¸­ï¼Œ<code>map</code> å¯¹åº”çš„æ•°æ®ç»“æ„æ˜¯ çº¢é»‘æ ‘ã€‚çº¢é»‘æ ‘æ˜¯ä¸€ç§è¿‘ä¼¼äºå¹³è¡¡çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œé‡Œé¢çš„æ•°æ®æ˜¯æœ‰åºçš„ã€‚åœ¨çº¢é»‘æ ‘ä¸ŠåšæŸ¥æ‰¾æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸º <code>O(logN)</code>ã€‚è€Œ <code>unordered_map</code> å¯¹åº” å“ˆå¸Œè¡¨ï¼Œå“ˆå¸Œè¡¨çš„ç‰¹ç‚¹å°±æ˜¯æŸ¥æ‰¾æ•ˆç‡é«˜ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºå¸¸æ•°çº§åˆ« <code>O(1)</code>ï¼Œ è€Œé¢å¤–ç©ºé—´å¤æ‚åº¦åˆ™è¦é«˜å‡ºè®¸å¤šã€‚æ‰€ä»¥å¯¹äºéœ€è¦é«˜æ•ˆç‡æŸ¥è¯¢çš„æƒ…å†µï¼Œä½¿ç”¨ <code>unordered_map</code> å®¹å™¨ã€‚è€Œå¦‚æœå¯¹å†…å­˜å¤§å°æ¯”è¾ƒæ•æ„Ÿæˆ–è€…æ•°æ®å­˜å‚¨è¦æ±‚æœ‰åºçš„è¯ï¼Œåˆ™å¯ä»¥ç”¨ <code>map</code> å®¹å™¨ã€‚</p><p><a href="https://www.sczyh30.com/posts/C-C/cpp-stl-hashmap/">C++ STL ä¹‹å“ˆå¸Œè¡¨ | unordered_map | ã€Œæµ®ç”Ÿè‹¥æ¢¦ã€ - sczyh30â€™s blog</a></p></blockquote><h1 id="E-XKCâ€™s-basketball-team"><a href="#E-XKCâ€™s-basketball-team" class="headerlink" title="E.XKCâ€™s basketball team"></a><a href="https://nanti.jisuanke.com/t/41387">E.XKCâ€™s basketball team</a></h1><h2 id="é¢˜ç›®-1"><a href="#é¢˜ç›®-1" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p><img src="/2019/09/08/2019%E5%BE%90%E5%B7%9E%E7%BD%91%E7%BB%9C%E8%B5%9B%E8%A1%A5%E9%A2%98/2.png" alt></p><h2 id="å¤§æ„-1"><a href="#å¤§æ„-1" class="headerlink" title="å¤§æ„"></a>å¤§æ„</h2><p>ç»™å®šnä¸ªæ•°ï¼Œä¸ä¸€ä¸ªæ•°mï¼Œæ±‚aiå³è¾¹æœ€åä¸€ä¸ªè‡³å°‘æ¯”aiå¤§mçš„æ•°ä¸è¿™ä¸ªæ•°ä¹‹é—´æœ‰å¤šå°‘ä¸ªæ•°</p><h2 id="é¢˜è§£-1"><a href="#é¢˜è§£-1" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><h3 id="çº¿æ®µæ ‘"><a href="#çº¿æ®µæ ‘" class="headerlink" title="çº¿æ®µæ ‘"></a>çº¿æ®µæ ‘</h3><p>å‚è€ƒï¼š<a href="https://www.codetd.com/article/7225701">2019 å¾å·icpcç½‘ç»œèµ› E. XKCâ€™s basketball team - ä»£ç å¤©åœ°</a></p><p>å¯¹äºæ¯ä¸€ä¸ªæ•°ï¼Œåˆ©ç”¨äºŒåˆ†çš„æ–¹æ³•æ±‚ä»–å³è¾¹å¤§äºç­‰äº<code>ai+m</code>çš„æ•°çš„æœ€åä¸€ä¸ªå€¼</p><p>å…³é”®åœ¨äºæ€ä¹ˆäºŒåˆ†å‘¢ï¼Ÿ</p><p>åˆ©ç”¨çº¿æ®µæ ‘å­˜å‚¨åŒºé—´æœ€å¤§å€¼ï¼Œçœ‹è¿™ä¸ªåŒºé—´çš„æœ€å¤§å€¼æ˜¯ä¸æ˜¯æ¯”<code>ai+m</code>å¤§</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 2019-09-08 22:05</span></span><br><span class="line"><span class="comment"> * 445ms</span></span><br><span class="line"><span class="comment"> * 51132kB</span></span><br><span class="line"><span class="comment"> * c++11</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 1000005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mod 1000000007</span></span><br><span class="line"><span class="keyword">int</span> a[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> l,r,ma;</span><br><span class="line">&#125;tree[maxn*<span class="number">4</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tree[p].l = l;</span><br><span class="line">    tree[p].r = r;</span><br><span class="line">    tree[p].ma = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span>(l == r)</span><br><span class="line">    &#123;</span><br><span class="line">        tree[p].ma = a[l];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> mid = (l+r)/<span class="number">2</span>;</span><br><span class="line">    <span class="built_in">build</span>(l,mid,p*<span class="number">2</span>);</span><br><span class="line">    <span class="built_in">build</span>(mid+<span class="number">1</span>,r,p*<span class="number">2</span>+<span class="number">1</span>);</span><br><span class="line">    tree[p].ma = <span class="built_in">max</span>(tree[p*<span class="number">2</span>].ma,tree[p*<span class="number">2</span>+<span class="number">1</span>].ma);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x == tree[p].l &amp;&amp; y == tree[p].r)</span><br><span class="line">        <span class="keyword">return</span> tree[p].ma;</span><br><span class="line">    <span class="keyword">int</span> mid = (tree[p].l + tree[p].r)/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span>(x &gt; mid)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">query</span>(x,y,p*<span class="number">2</span>+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(y &lt;= mid)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">query</span>(x,y,p*<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">max</span>(<span class="built_in">query</span>(x,mid,p*<span class="number">2</span>),<span class="built_in">query</span>(mid+<span class="number">1</span>,y,p*<span class="number">2</span>+<span class="number">1</span>));</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> T,i,j,k,n,q,x,y,m,s,l,r,mid;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;++i)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">    <span class="built_in">build</span>(<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        s=m+a[i];</span><br><span class="line">        l=i+<span class="number">1</span>;</span><br><span class="line">        r=n;</span><br><span class="line">        <span class="keyword">while</span>(l&lt;r)</span><br><span class="line">        &#123;</span><br><span class="line">              mid=(l+r+<span class="number">1</span>)/<span class="number">2</span>;</span><br><span class="line">             <span class="keyword">if</span>(<span class="built_in">query</span>(mid,r,<span class="number">1</span>)&gt;=s)</span><br><span class="line">            &#123;</span><br><span class="line">                l=mid;</span><br><span class="line">             &#125;</span><br><span class="line">             <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">query</span>(l,mid,<span class="number">1</span>)&gt;=s)</span><br><span class="line">             &#123;</span><br><span class="line">                 r=mid<span class="number">-1</span>;</span><br><span class="line">             &#125;</span><br><span class="line">             <span class="keyword">else</span> </span><br><span class="line">             &#123;</span><br><span class="line">                  <span class="keyword">break</span>;</span><br><span class="line">             &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(a[l]&gt;=s)</span><br><span class="line">        cout&lt;&lt;l-i<span class="number">-1</span>&lt;&lt;<span class="string">&#x27; &#x27;</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;-1&quot;</span>&lt;&lt;<span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;-1&quot;</span>&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å•è°ƒé˜Ÿåˆ—"><a href="#å•è°ƒé˜Ÿåˆ—" class="headerlink" title="å•è°ƒé˜Ÿåˆ—"></a>å•è°ƒé˜Ÿåˆ—</h3><p>ä»åå‘å‰ç»´æŠ¤ä¸€ä¸ªé€’å¢çš„é˜Ÿï¦œï¼Œä»åå¾€å‰éå†ï¼š</p><ul><li>è‹¥å½“å‰çš„æ•°å¤§äºé˜Ÿå°¾å°±è¿›é˜Ÿï¼Œå¦åˆ™ä»è¯¥é˜Ÿï¦œä¸­äºŒåˆ†æ‰¾æœ€å°çš„æ¯”è‡ªå·±å¤§è‡³å°‘ çš„æ•°ï¼ŒäºŒè€…ä¹‹é—´çš„è·ç¦»å³ä¸ºç­”æ¡ˆ</li><li>è‹¥å½“å‰æ•°å°äºé˜Ÿå°¾ï¼Œé‚£è¿™ä¸ªæ•°ä¸€å®šæ²¡æœ‰é˜Ÿå°¾çš„æ•°ä¼˜ï¼Œå› ä¸ºå®ƒæ—¢æ¯”é˜Ÿå°¾çš„æ•°é å‰ï¼Œåˆæ¯”å®ƒå°ã€‚</li></ul><p>æ—¶é—´å¤æ‚åº¦ï¼š<code>O(nlogn)</code></p><h3 id="STè¡¨"><a href="#STè¡¨" class="headerlink" title="STè¡¨"></a>STè¡¨</h3><p>æ­¤é¢˜ä¹Ÿå¯ä»¥ç”¨STè¡¨+äºŒåˆ†ç­‰æ–¹æ³•å†™å‡º</p>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot+Shiro+Jwtå¡«å‘-3</title>
      <link href="/2019/09/07/SpringBoot+Shiro+Jwt%E5%A1%AB%E5%9D%91-3/"/>
      <url>/2019/09/07/SpringBoot+Shiro+Jwt%E5%A1%AB%E5%9D%91-3/</url>
      
        <content type="html"><![CDATA[<p>æ•´åˆSpringBoot</p><span id="more"></span><p>çœå»å»ºè¡¨ï¼Œæ•°æ®åº“è¯»å–ä»£ç ã€‚</p><h1 id="ç¨‹åºé€»è¾‘"><a href="#ç¨‹åºé€»è¾‘" class="headerlink" title="ç¨‹åºé€»è¾‘"></a>ç¨‹åºé€»è¾‘</h1><p>åœ¨<code>SpringBoot</code>ä¸­ä½¿ç”¨<code>JWT</code>æ¥åšæ¥å£æƒé™è®¤è¯ï¼Œå®‰å…¨æ¡†æ¶ä¾æ—§ä½¿ç”¨<code>Shiro</code></p><ol><li>æˆ‘ä»¬<code>POST</code>ç”¨æˆ·åä¸å¯†ç åˆ°<code>/login</code>è¿›è¡Œç™»å…¥ï¼Œå¦‚æœæˆåŠŸè¿”å›ä¸€ä¸ªåŠ å¯†<code>token</code>ï¼Œå¤±è´¥çš„è¯ç›´æ¥è¿”å›401é”™è¯¯ã€‚</li><li>ä¹‹åç”¨æˆ·è®¿é—®æ¯ä¸€ä¸ªéœ€è¦æƒé™çš„ç½‘å€è¯·æ±‚å¿…é¡»åœ¨<code>header</code>ä¸­æ·»åŠ <code>Authorization</code>å­—æ®µï¼Œä¾‹å¦‚<code>Authorization: token</code>ï¼Œ<code>token</code>ä¸ºå¯†é’¥ã€‚</li><li>åå°ä¼šè¿›è¡Œ<code>token</code>çš„æ ¡éªŒï¼Œå¦‚æœä¸é€šè¿‡ç›´æ¥è¿”å›401ã€‚</li></ol><h2 id="TokenåŠ å¯†è¯´æ˜"><a href="#TokenåŠ å¯†è¯´æ˜" class="headerlink" title="TokenåŠ å¯†è¯´æ˜"></a>TokenåŠ å¯†è¯´æ˜</h2><ul><li>æºå¸¦äº† <code>username</code> ä¿¡æ¯åœ¨ token ä¸­ã€‚</li><li>è®¾å®šäº†è¿‡æœŸæ—¶é—´ã€‚</li><li>ä½¿ç”¨ç§˜é’¥å¯¹ <code>token</code> è¿›è¡ŒåŠ å¯†ã€‚</li></ul><h2 id="Tokenæ ¡éªŒæµç¨‹"><a href="#Tokenæ ¡éªŒæµç¨‹" class="headerlink" title="Tokenæ ¡éªŒæµç¨‹"></a>Tokenæ ¡éªŒæµç¨‹</h2><p>æœåŠ¡ç«¯æ¥æ”¶åˆ°<code>token</code> ä¹‹åï¼Œä¼šé€†å‘æ„é€ è¿‡ç¨‹ï¼Œ<code>decode</code> å‡º<code>JWT</code> çš„ä¸‰ä¸ªéƒ¨åˆ†ï¼Œè¿™ä¸€æ­¥å¯ä»¥å¾—åˆ°<code>sign</code>çš„ç®—æ³•åŠ <code>payload</code>ï¼Œç»“åˆæœåŠ¡ç«¯é…ç½®çš„ <code>secretKey</code>ï¼Œå¯ä»¥å†æ¬¡è¿›è¡Œ <code>Signature</code> çš„ç”Ÿæˆå¾—åˆ°æ–°çš„ <code>â€‹Signature</code>ï¼Œä¸åŸæœ‰çš„ â€‹<code>Signature</code> æ¯”å¯¹ä»¥éªŒè¯ <code>token</code> æ˜¯å¦æœ‰æ•ˆï¼Œå®Œæˆç”¨æˆ·èº«ä»½çš„è®¤è¯ã€‚</p><h1 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h1><p>æ·»åŠ ä¾èµ–</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;com.auth0&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;java-jwt&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;<span class="number">3.8</span><span class="number">.2</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.apache.shiro&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;shiro-spring&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;<span class="number">1.4</span><span class="number">.1</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h1 id="JWTå·¥å…·ç±»"><a href="#JWTå·¥å…·ç±»" class="headerlink" title="JWTå·¥å…·ç±»"></a>JWTå·¥å…·ç±»</h1><p>æˆ‘ä»¬å†™ä¸€ä¸ªç®€å•çš„<code>JWT</code>åŠ å¯†ï¼Œæ ¡éªŒå·¥å…·ï¼Œå¹¶ä¸”ä½¿ç”¨ç”¨æˆ·è‡ªå·±çš„å¯†ç å……å½“åŠ å¯†å¯†é’¥ï¼Œ è¿™æ ·ä¿è¯äº†<code>token</code> å³ä½¿è¢«ä»–äººæˆªè·ä¹Ÿæ— æ³•ç ´è§£ã€‚å¹¶ä¸”æˆ‘ä»¬åœ¨<code>token</code>ä¸­é™„å¸¦äº†<code>username</code>ä¿¡æ¯ï¼Œå¹¶ä¸”è®¾ç½®å¯†é’¥1å¤©å°±ä¼šè¿‡æœŸã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JWTUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿‡æœŸæ—¶é—´1å¤©</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> EXPIRE_TIME = <span class="number">24</span> * <span class="number">60</span> * <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¡éªŒtokenæ˜¯å¦æ­£ç¡®</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> token    å¯†é’¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> username ç™»å½•å</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> secret ç§˜é’¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">verify</span><span class="params">(String token, String username, String secret)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//å¯¹ç§˜é’¥è¿›è¡ŒåŠ å¯†åå†ä¸ç”¨æˆ·åæ··æ·†åœ¨ä¸€èµ·</span></span><br><span class="line">            Algorithm algorithm = Algorithm.HMAC256(secret);</span><br><span class="line">            JWTVerifier verifier = JWT.require(algorithm)</span><br><span class="line">                    .withClaim(<span class="string">&quot;username&quot;</span>, username)</span><br><span class="line">                    .build();</span><br><span class="line">            DecodedJWT jwt = verifier.verify(token);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å¾—tokenä¸­çš„ä¿¡æ¯æ— éœ€secretè§£å¯†ä¹Ÿèƒ½è·å¾—</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> tokenä¸­åŒ…å«çš„ç”¨æˆ·å</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getUsername</span><span class="params">(String token)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            DecodedJWT jwt = JWT.decode(token);</span><br><span class="line">            <span class="keyword">return</span> jwt.getClaim(<span class="string">&quot;username&quot;</span>).asString();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (JWTDecodeException e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆç­¾å</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> username ç”¨æˆ·å</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> secret   ç”¨æˆ·çš„å¯†ç </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> åŠ å¯†çš„token</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">sign</span><span class="params">(String username, String secret)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æŒ‡å®šè¿‡æœŸæ—¶é—´</span></span><br><span class="line">        Date date = <span class="keyword">new</span> Date(System.currentTimeMillis() + EXPIRE_TIME);</span><br><span class="line">        Algorithm algorithm = Algorithm.HMAC256(secret);</span><br><span class="line">        <span class="comment">// é™„å¸¦usernameä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">return</span> JWT.create()</span><br><span class="line">                .withClaim(<span class="string">&quot;username&quot;</span>, username)</span><br><span class="line">                .withExpiresAt(date)</span><br><span class="line">                .sign(algorithm);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆå‰ç«¯éœ€è¦çš„ç”¨æˆ·ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š</span></span><br><span class="line"><span class="comment">     * 1. token</span></span><br><span class="line"><span class="comment">     * 2. userInfo</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userInfo</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title">generateUserInfo</span><span class="params">(UserInfo userInfo)</span> </span>&#123;</span><br><span class="line">        Map&lt;String, Object&gt; responseBean = <span class="keyword">new</span> HashMap&lt;&gt;(<span class="number">2</span>);</span><br><span class="line">        String token = sign(userInfo.getUsername(), userInfo.getPassword());</span><br><span class="line">        responseBean.put(<span class="string">&quot;token&quot;</span>, token);</span><br><span class="line">        userInfo.setPassword(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        responseBean.put(<span class="string">&quot;userInfo&quot;</span>, userInfo);</span><br><span class="line">        <span class="keyword">return</span> ResultFactory.buildSuccessResult(responseBean);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åˆ›å»ºJWTTokenæ›¿æ¢ShiroåŸç”ŸToken"><a href="#åˆ›å»ºJWTTokenæ›¿æ¢ShiroåŸç”ŸToken" class="headerlink" title="åˆ›å»ºJWTTokenæ›¿æ¢ShiroåŸç”ŸToken"></a>åˆ›å»ºJWTTokenæ›¿æ¢ShiroåŸç”ŸToken</h1><ol><li><code>Shiro</code> åŸç”Ÿçš„ <code>Token</code> ä¸­å­˜åœ¨ç”¨æˆ·åå’Œå¯†ç ä»¥åŠå…¶ä»–ä¿¡æ¯ [éªŒè¯ç ï¼Œè®°ä½æˆ‘]ï¼Œå› ä¸ºæ˜¯å‰åç«¯åˆ†ç¦»ï¼ŒæœåŠ¡å™¨æ— éœ€ä¿å­˜ç”¨æˆ·çŠ¶æ€ï¼Œæ‰€ä»¥ä¸éœ€è¦<code>RememberMe</code>è¿™ç±»åŠŸèƒ½ï¼Œ æˆ‘ä»¬ç®€å•çš„å®ç°ä¸‹<code>AuthenticationToken</code>æ¥å£å³å¯</li><li>åœ¨ <code>JWT</code> çš„ <code>Token</code> ä¸­å› ä¸º<strong>å·²å°†ç”¨æˆ·åå’Œå¯†ç é€šè¿‡åŠ å¯†å¤„ç†æ•´åˆåˆ°ä¸€ä¸ªåŠ å¯†ä¸²ä¸­</strong>ï¼Œæ‰€ä»¥åªéœ€è¦ä¸€ä¸ª <code>token</code> å­—æ®µå³å¯</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JWTToken</span> <span class="keyword">implements</span> <span class="title">AuthenticationToken</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String token;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">JWTToken</span><span class="params">(String token)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(token.contains(<span class="string">&quot;Bearer&quot;</span>))&#123;</span><br><span class="line">            token = token.substring(<span class="number">7</span>, token.length());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.token = token;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getPrincipal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> token;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getCredentials</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> token;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åˆ›å»ºJWTFilterå®ç°å‰ç«¯è¯·æ±‚ç»Ÿä¸€æ‹¦æˆªåŠå¤„ç†"><a href="#åˆ›å»ºJWTFilterå®ç°å‰ç«¯è¯·æ±‚ç»Ÿä¸€æ‹¦æˆªåŠå¤„ç†" class="headerlink" title="åˆ›å»ºJWTFilterå®ç°å‰ç«¯è¯·æ±‚ç»Ÿä¸€æ‹¦æˆªåŠå¤„ç†"></a>åˆ›å»ºJWTFilterå®ç°å‰ç«¯è¯·æ±‚ç»Ÿä¸€æ‹¦æˆªåŠå¤„ç†</h1><p>æ‰€æœ‰çš„è¯·æ±‚éƒ½ä¼šå…ˆç»è¿‡<code>Filter</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬ç»§æ‰¿å®˜æ–¹çš„<code>BasicHttpAuthenticationFilter</code>ï¼Œå¹¶ä¸”é‡å†™é‰´æƒçš„æ–¹æ³•ï¼Œ å¦å¤–é€šè¿‡é‡å†™<code>preHandle</code>ï¼Œå®ç°è·¨åŸŸè®¿é—®ã€‚</p><p><strong>ä»£ç çš„æ‰§è¡Œæµç¨‹<code>preHandle-&gt;isAccessAllowed-&gt;isLoginAttempt-&gt;executeLogin</code></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ›å»ºJWTFilterå®ç°å‰ç«¯è¯·æ±‚ç»Ÿä¸€æ‹¦æˆªåŠå¤„ç†</span></span><br><span class="line"><span class="comment"> * æ‰€æœ‰çš„è¯·æ±‚éƒ½ä¼šå…ˆç»è¿‡ Filterï¼Œæ‰€ä»¥æˆ‘ä»¬ç»§æ‰¿å®˜æ–¹çš„ BasicHttpAuthenticationFilter</span></span><br><span class="line"><span class="comment"> * å¹¶ä¸”é‡å†™é‰´æƒçš„æ–¹æ³•</span></span><br><span class="line"><span class="comment"> * ä»£ç çš„æ‰§è¡Œæµç¨‹ preHandle -&gt; isAccessAllowed -&gt; isLoginAttempt -&gt; executeLogin</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> GreenHatHG</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JWTFilter</span> <span class="keyword">extends</span> <span class="title">BasicHttpAuthenticationFilter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç™»å½•æ ‡è¯†</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String LOGIN_SIGN = <span class="string">&quot;Authorization&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ£€æµ‹ç”¨æˆ·æ˜¯å¦ç™»å½•</span></span><br><span class="line"><span class="comment">     * æ£€æµ‹headeré‡Œé¢æ˜¯å¦åŒ…å«Authorizationå­—æ®µå³å¯</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">isLoginAttempt</span><span class="params">(ServletRequest request, ServletResponse response)</span> </span>&#123;</span><br><span class="line">        HttpServletRequest req = (HttpServletRequest) request;</span><br><span class="line">        String authorization = req.getHeader(LOGIN_SIGN);</span><br><span class="line">        <span class="keyword">return</span> authorization != <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * executeLogin() æ–¹æ³•ä¸­çš„ getSubject(request, response).login(token)</span></span><br><span class="line"><span class="comment">     * å°±æ˜¯è§¦å‘ Shiro Realm è‡ªèº«çš„ç™»å½•æ§åˆ¶ï¼Œå…·ä½“å†…å®¹éœ€è¦æ‰‹åŠ¨å®ç°</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">executeLogin</span><span class="params">(ServletRequest request, ServletResponse response)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        HttpServletRequest httpServletRequest = (HttpServletRequest) request;</span><br><span class="line">        String authorization = httpServletRequest.getHeader(LOGIN_SIGN);</span><br><span class="line">        JWTToken token = <span class="keyword">new</span> JWTToken(authorization);</span><br><span class="line">        <span class="comment">// æäº¤ç»™realmè¿›è¡Œç™»å…¥ï¼Œå¦‚æœé”™è¯¯ä»–ä¼šæŠ›å‡ºå¼‚å¸¸å¹¶è¢«æ•è·</span></span><br><span class="line">        getSubject(request, response).login(token);</span><br><span class="line">        <span class="comment">// å¦‚æœæ²¡æœ‰æŠ›å‡ºå¼‚å¸¸åˆ™ä»£è¡¨ç™»å…¥æˆåŠŸï¼Œè¿”å›true</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸€èˆ¬åœ¨isAccessAllowedä¸­æ‰§è¡Œè®¤è¯é€»è¾‘</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">isAccessAllowed</span><span class="params">(ServletRequest request, ServletResponse response, Object mappedValue)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isLoginAttempt(request, response)) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                executeLogin(request, response);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                <span class="comment">// è®¤è¯å‡ºç°å¼‚å¸¸ï¼Œä¼ é€’é”™è¯¯ä¿¡æ¯msg</span></span><br><span class="line">                String msg = e.getMessage();</span><br><span class="line">                <span class="comment">// Tokenè®¤è¯å¤±è´¥ç›´æ¥è¿”å›Responseä¿¡æ¯</span></span><br><span class="line">                <span class="keyword">this</span>.response401(response, msg);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿™é‡Œæˆ‘ä»¬è¯¦ç»†è¯´æ˜ä¸‹ä¸ºä»€ä¹ˆé‡å†™</span></span><br><span class="line"><span class="comment">     * å¯ä»¥å¯¹æ¯”çˆ¶ç±»æ–¹æ³•ï¼Œåªæ˜¯å°†executeLoginæ–¹æ³•è°ƒç”¨å»é™¤äº†</span></span><br><span class="line"><span class="comment">     * å¦‚æœæ²¡æœ‰å»é™¤å°†ä¼šå¾ªç¯è°ƒç”¨doGetAuthenticationInfoæ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">onAccessDenied</span><span class="params">(ServletRequest request, ServletResponse response)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sendChallenge(request, response);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¯¹è·¨åŸŸæä¾›æ”¯æŒ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(ServletRequest request, ServletResponse response)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        HttpServletRequest httpServletRequest = WebUtils.toHttp(request);</span><br><span class="line">        HttpServletResponse httpServletResponse = WebUtils.toHttp(response);</span><br><span class="line">        httpServletResponse.setHeader(<span class="string">&quot;Access-control-Allow-Origin&quot;</span>, httpServletRequest.getHeader(<span class="string">&quot;Origin&quot;</span>));</span><br><span class="line">        httpServletResponse.setHeader(<span class="string">&quot;Access-Control-Allow-Methods&quot;</span>, <span class="string">&quot;GET,POST,OPTIONS,PUT,DELETE&quot;</span>);</span><br><span class="line">        httpServletResponse.setHeader(<span class="string">&quot;Access-Control-Allow-Headers&quot;</span>, httpServletRequest.getHeader(<span class="string">&quot;Access-Control-Request-Headers&quot;</span>));</span><br><span class="line">        <span class="comment">// è·¨åŸŸæ—¶ä¼šé¦–å…ˆå‘é€ä¸€ä¸ªOPTIONSè¯·æ±‚ï¼Œè¿™é‡Œæˆ‘ä»¬ç»™OPTIONSè¯·æ±‚ç›´æ¥è¿”å›æ­£å¸¸çŠ¶æ€</span></span><br><span class="line">        <span class="keyword">if</span> (httpServletRequest.getMethod().equals(RequestMethod.OPTIONS.name())) &#123;</span><br><span class="line">            httpServletResponse.setStatus(HttpStatus.OK.value());</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.preHandle(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ— éœ€è½¬å‘ï¼Œç›´æ¥è¿”å›Responseä¿¡æ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">response401</span><span class="params">(ServletResponse response, String msg)</span> </span>&#123;</span><br><span class="line">        HttpServletResponse httpServletResponse = WebUtils.toHttp(response);</span><br><span class="line">        httpServletResponse.setStatus(HttpStatus.UNAUTHORIZED.value());</span><br><span class="line">        httpServletResponse.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        httpServletResponse.setContentType(<span class="string">&quot;application/json; charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> (PrintWriter out = httpServletResponse.getWriter()) &#123;</span><br><span class="line">            Result result = ResultFactory.buildUnauthorizedResult(<span class="string">&quot;æ— æƒè®¿é—®(Unauthorized):&quot;</span> + msg);</span><br><span class="line">            JSONObject jsonObject = JSONUtil.parseObj(result);</span><br><span class="line">            out.append(jsonObject.toString());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> CustomException(<span class="string">&quot;ç›´æ¥è¿”å›Responseä¿¡æ¯å‡ºç°IOExceptionå¼‚å¸¸:&quot;</span> + e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å®ç°Realm"><a href="#å®ç°Realm" class="headerlink" title="å®ç°Realm"></a>å®ç°Realm</h1><p><code>realm</code>çš„ç”¨äºå¤„ç†ç”¨æˆ·æ˜¯å¦åˆæ³•çš„è¿™ä¸€å—ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShiroRealm</span> <span class="keyword">extends</span> <span class="title">AuthorizingRealm</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> UserRepository userRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserRepository</span><span class="params">(UserRepository userRepository)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userRepository = userRepository;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é‡å†™Realmçš„supports()æ–¹æ³•æ˜¯é€šè¿‡JWTè¿›è¡Œç™»å½•åˆ¤æ–­çš„å…³é”®</span></span><br><span class="line"><span class="comment">     * å› ä¸ºå‰æ–‡ä¸­åˆ›å»ºäº†JWTTokenç”¨äºæ›¿æ¢ Shiro åŸç”Ÿ token</span></span><br><span class="line"><span class="comment">     * æ‰€ä»¥å¿…é¡»åœ¨æ­¤æ–¹æ³•ä¸­æ˜¾å¼çš„è¿›è¡Œæ›¿æ¢ï¼Œå¦åˆ™åœ¨è¿›è¡Œåˆ¤æ–­æ—¶ä¼šä¸€ç›´å¤±è´¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">supports</span><span class="params">(AuthenticationToken token)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> token <span class="keyword">instanceof</span> JWTToken;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰§è¡Œæˆæƒé€»è¾‘</span></span><br><span class="line"><span class="comment">     * åªæœ‰å½“éœ€è¦æ£€æµ‹ç”¨æˆ·æƒé™çš„æ—¶å€™æ‰ä¼šè°ƒç”¨æ­¤æ–¹æ³•ï¼Œä¾‹å¦‚checkRole,checkPermissionä¹‹ç±»çš„</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> AuthorizationInfo <span class="title">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principalCollection)</span> </span>&#123;</span><br><span class="line">        String username = JWTUtil.getUsername(principalCollection.toString());</span><br><span class="line">        UserInfo userInfo = userRepository.findByUsername(username);</span><br><span class="line">        List&lt;String&gt; permissionList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        List&lt;String&gt; roleNameList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        Set&lt;SysRole&gt; roleSet = userInfo.getRoleList();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (CollectionUtils.isNotEmpty(roleSet)) &#123;</span><br><span class="line">            <span class="keyword">for</span> (SysRole role : roleSet) &#123;</span><br><span class="line">                <span class="comment">// æ·»åŠ è§’è‰²</span></span><br><span class="line">                roleNameList.add(role.getName());</span><br><span class="line">                <span class="comment">// æ ¹æ®ç”¨æˆ·è§’è‰²æŸ¥è¯¢æƒé™</span></span><br><span class="line">                Set&lt;SysPermission&gt; permissionSet = role.getPermissions();</span><br><span class="line">                <span class="keyword">if</span> (CollectionUtils.isNotEmpty(permissionSet)) &#123;</span><br><span class="line">                    <span class="keyword">for</span> (SysPermission permission : permissionSet) &#123;</span><br><span class="line">                        <span class="comment">// æ·»åŠ æƒé™</span></span><br><span class="line">                        permissionList.add(permission.getUrl());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        SimpleAuthorizationInfo info = <span class="keyword">new</span> SimpleAuthorizationInfo();</span><br><span class="line">        info.addStringPermissions(permissionList);</span><br><span class="line">        info.addRoles(roleNameList);</span><br><span class="line">        <span class="keyword">return</span> info;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰§è¡Œè®¤è¯é€»è¾‘</span></span><br><span class="line"><span class="comment">     * é»˜è®¤ä½¿ç”¨æ­¤æ–¹æ³•è¿›è¡Œç”¨æˆ·åæ­£ç¡®ä¸å¦éªŒè¯ï¼Œé”™è¯¯æŠ›å‡ºå¼‚å¸¸å³å¯ã€‚</span></span><br><span class="line"><span class="comment">     * ç™»å½•çš„åˆæ³•éªŒè¯é€šå¸¸åŒ…æ‹¬ token æ˜¯å¦æœ‰æ•ˆ ã€ç”¨æˆ·åæ˜¯å¦å­˜åœ¨ ã€å¯†ç æ˜¯å¦æ­£ç¡®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> AuthenticationInfo <span class="title">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken auth)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">        String token = (String) auth.getCredentials();</span><br><span class="line">        String userName = JWTUtil.getUsername(token);</span><br><span class="line">        String secert = userRepository.getCredentials(userName);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * tokenä¸ºç©ºæˆ–è€…ä¸é€šè¿‡</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isBlank(token) || !JWTUtil.verify(token, userName, secert)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> AuthenticationException(<span class="string">&quot;tokenæ ¡éªŒä¸é€šè¿‡&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¤è¯æˆåŠŸï¼Œå°†ç”¨æˆ·ä¿¡æ¯å°è£…æˆSimpleAuthenticationInfo</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> SimpleAuthenticationInfo(token, token, <span class="string">&quot;shiroRealm&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="é…ç½®Shiro"><a href="#é…ç½®Shiro" class="headerlink" title="é…ç½®Shiro"></a>é…ç½®Shiro</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShiroConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Primary</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®è¿‡æ»¤å™¨ï¼Œå°†è‡ªå®šä¹‰çš„FilteråŠ å…¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ShiroFilterFactoryBean <span class="title">shiroFilterFactoryBean</span><span class="params">(SecurityManager securityManager)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//ç”¨äºå®šä¹‰ä¸»Shiro Filter</span></span><br><span class="line">        ShiroFilterFactoryBean shiroFilterFactoryBean = <span class="keyword">new</span> ShiroFilterFactoryBean();</span><br><span class="line">        <span class="comment">//è®¾ç½®è¦æ„é€ çš„Shiro Filterä½¿ç”¨çš„SecurityManagerå®ä¾‹</span></span><br><span class="line">        <span class="comment">//è¿™æ˜¯å¿…å¡«å±æ€§-è®¾ç½®å¤±è´¥å°†å¼•å‘åˆå§‹åŒ–å¼‚å¸¸</span></span><br><span class="line">        shiroFilterFactoryBean.setSecurityManager(securityManager);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åœ¨ Shiroè¿‡æ»¤å™¨é“¾ä¸ŠåŠ å…¥ JWTFilter</span></span><br><span class="line">        LinkedHashMap&lt;String, Filter&gt; filters = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</span><br><span class="line">        filters.put(<span class="string">&quot;jwt&quot;</span>, <span class="keyword">new</span> JWTFilter());</span><br><span class="line">        shiroFilterFactoryBean.setFilters(filters);</span><br><span class="line"></span><br><span class="line">        LinkedHashMap&lt;String, String&gt; filterChainDefinitionMap = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</span><br><span class="line">        <span class="comment">// æ‰€æœ‰è¯·æ±‚éƒ½è¦ç»è¿‡ jwtè¿‡æ»¤å™¨</span></span><br><span class="line">        filterChainDefinitionMap.put(<span class="string">&quot;/**&quot;</span>, <span class="string">&quot;jwt&quot;</span>);</span><br><span class="line"></span><br><span class="line">        shiroFilterFactoryBean.setFilterChainDefinitionMap(filterChainDefinitionMap);</span><br><span class="line">        <span class="keyword">return</span> shiroFilterFactoryBean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Primary</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DefaultWebSecurityManager <span class="title">securityManager</span><span class="params">(ShiroRealm shiroRealm)</span> </span>&#123;</span><br><span class="line">        DefaultWebSecurityManager securityManager = <span class="keyword">new</span> DefaultWebSecurityManager();</span><br><span class="line">        <span class="comment">// é…ç½® SecurityManagerï¼Œå¹¶æ³¨å…¥ shiroRealm</span></span><br><span class="line">        securityManager.setRealm(shiroRealm());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å…³é—­Shiroè‡ªå¸¦çš„session</span></span><br><span class="line">        DefaultSubjectDAO subjectDAO = <span class="keyword">new</span> DefaultSubjectDAO();</span><br><span class="line">        DefaultSessionStorageEvaluator defaultSessionStorageEvaluator = <span class="keyword">new</span> DefaultSessionStorageEvaluator();</span><br><span class="line">        defaultSessionStorageEvaluator.setSessionStorageEnabled(<span class="keyword">false</span>);</span><br><span class="line">        subjectDAO.setSessionStorageEvaluator(defaultSessionStorageEvaluator);</span><br><span class="line">        securityManager.setSubjectDAO(subjectDAO);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> securityManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Primary</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ShiroRealm <span class="title">shiroRealm</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// é…ç½® Realm</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ShiroRealm();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="controller"><a href="#controller" class="headerlink" title="controller"></a>controller</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/login&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Result <span class="title">login</span><span class="params">(<span class="meta">@RequestBody</span> Map&lt;String, String&gt; payload)</span></span>&#123;</span><br><span class="line">    String username = payload.get(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">    String password = payload.get(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">    <span class="keyword">final</span> String errorMessage = <span class="string">&quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&quot;</span>;</span><br><span class="line"></span><br><span class="line">    UserInfo userInfo = userRepository.findByUsername(username);</span><br><span class="line">    <span class="keyword">if</span>(userInfo == <span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> ResultFactory.buildFailResult(errorMessage);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!Argon2Util.verify(userInfo.getPassword(), password))&#123;</span><br><span class="line">        <span class="keyword">return</span> ResultFactory.buildFailResult(errorMessage);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> JWTUtil.generateUserInfo(userInfo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/123&quot;)</span></span><br><span class="line"><span class="comment">//éœ€è¦ç™»å½•æ‰èƒ½è·å–</span></span><br><span class="line">    <span class="meta">@RequiresAuthentication</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Result <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="number">111</span>);</span><br><span class="line">        <span class="keyword">return</span> ResultFactory.buildSuccessResult(<span class="string">&quot;æˆåŠŸ&quot;</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><hr><p>å‚è€ƒï¼š</p><p><a href="https://www.xncoding.com/2017/07/09/spring/sb-jwt.html">SpringBootç³»åˆ— - é›†æˆJWTå®ç°æ¥å£æƒé™è®¤è¯ | é£æ±¡ç†Šåšå®¢</a></p><p><a href="https://www.inlighting.org/archives/spring-boot-shiro-jwt.html">Shiro + JWT + Spring Boot Restful ç®€æ˜“æ•™ç¨‹ - æ²§æµ·æœˆæ˜</a></p><p><a href="http://asing1elife.com/java/springboot/shiro/vue/2018/08/09/SpringBoot+Shiro%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E9%A1%B9%E7%9B%AE%E9%80%9A%E8%BF%87JWT%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E7%99%BB%E5%BD%95/">SpringBoot+Shiro+Vueå‰åç«¯åˆ†ç¦»é¡¹ç›®é€šè¿‡JWTå®ç°è‡ªåŠ¨ç™»å½• | asing1elifeâ€™s blog</a></p><hr>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> Shiro </tag>
            
            <tag> jwt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot+Shiro+Jwtå¡«å‘-1</title>
      <link href="/2019/09/02/SpringBoot+Shiro+Jwt%E5%A1%AB%E5%9D%91-1/"/>
      <url>/2019/09/02/SpringBoot+Shiro+Jwt%E5%A1%AB%E5%9D%91-1/</url>
      
        <content type="html"><![CDATA[<p>shiroä»‹ç»</p><span id="more"></span><h1 id="RBAC"><a href="#RBAC" class="headerlink" title="RBAC"></a>RBAC</h1><p>åœ¨äº†è§£<code>Shiro</code>ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦è®¤çŸ¥ç”¨æˆ·æƒé™æ¨¡å‹ã€‚</p><p>åŸºäºè§’è‰²çš„æƒé™è®¿é—®æ§åˆ¶ï¼ˆ<code>Role-Based Access Control</code>ï¼‰ä½œä¸ºä¼ ç»Ÿè®¿é—®æ§åˆ¶ï¼ˆè‡ªä¸»è®¿é—®ï¼Œå¼ºåˆ¶è®¿é—®ï¼‰çš„æœ‰å‰æ™¯çš„ä»£æ›¿å—åˆ°å¹¿æ³›çš„å…³æ³¨ã€‚åœ¨<code>RBAC</code>ä¸­ï¼Œ<strong>æƒé™ä¸è§’è‰²ç›¸å…³è”</strong>ï¼Œç”¨æˆ·é€šè¿‡æˆä¸ºé€‚å½“è§’è‰²çš„æˆå‘˜è€Œå¾—åˆ°è¿™äº›è§’è‰²çš„æƒé™ã€‚è¿™å°±æå¤§åœ°ç®€åŒ–äº†æƒé™çš„ç®¡ç†ã€‚</p><p>ä¸ºå®ç°ä¸€ä¸ªè¾ƒä¸ºçµæ´»çš„ç”¨æˆ·æƒé™æ•°æ®æ¨¡å‹ï¼Œé€šå¸¸æŠŠ<strong>ç”¨æˆ·ä¿¡æ¯å•ç‹¬ç”¨ä¸€ä¸ªå®ä½“è¡¨ç¤ºï¼Œç”¨æˆ·æƒé™ä¿¡æ¯ç”¨ä¸¤ä¸ªå®ä½“è¡¨ç¤º</strong>ã€‚</p><ol><li>ç”¨æˆ·ä¿¡æ¯ç”¨<code>LoginAccount</code>è¡¨ç¤ºï¼Œæœ€ç®€å•çš„ç”¨æˆ·ä¿¡æ¯å¯èƒ½åªåŒ…å«ç”¨æˆ·å<code>loginName</code>åŠå¯†ç <code>password</code>ä¸¤ä¸ªå±æ€§ã€‚å®é™…åº”ç”¨ä¸­å¯èƒ½ä¼šåŒ…å«ç”¨æˆ·æ˜¯å¦è¢«ç¦ç”¨ï¼Œç”¨æˆ·ä¿¡æ¯æ˜¯å¦è¿‡æœŸç­‰ä¿¡æ¯ã€‚</li><li>ç”¨æˆ·æƒé™ä¿¡æ¯ç”¨<code>Role</code>ä¸<code>Permission</code>è¡¨ç¤ºï¼Œ<code>Role</code>ä¸<code>Permission</code>ä¹‹é—´æ„æˆå¤šå¯¹å¤šå…³ç³»ã€‚<code>Permission</code>å¯ä»¥ç†è§£ä¸ºå¯¹ä¸€ä¸ªèµ„æºçš„æ“ä½œï¼Œ<code>Role</code>å¯ä»¥ç®€å•ç†è§£ä¸º<code>Permission</code>çš„é›†åˆã€‚</li><li>ç”¨æˆ·ä¿¡æ¯ä¸<code>Role</code>ä¹‹é—´æ„æˆå¤šå¯¹å¤šå…³ç³»ã€‚è¡¨ç¤ºåŒä¸€ä¸ªç”¨æˆ·å¯ä»¥æ‹¥æœ‰å¤šä¸ª<code>Role</code>ï¼Œä¸€ä¸ª<code>Role</code>å¯ä»¥è¢«å¤šä¸ªç”¨æˆ·æ‰€æ‹¥æœ‰ã€‚</li></ol><p><img src="/2019/09/02/SpringBoot+Shiro+Jwt%E5%A1%AB%E5%9D%91-1/3.jpg" alt></p><p>(å›¾æºï¼š<a href="http://www.woshipm.com/pd/1150093.html">RBACæ¨¡å‹ï¼šåŸºäºç”¨æˆ·-è§’è‰²-æƒé™æ§åˆ¶çš„ä¸€äº›æ€è€ƒ | äººäººéƒ½æ˜¯äº§å“ç»ç†</a>)</p><p><img src="/2019/09/02/SpringBoot+Shiro+Jwt%E5%A1%AB%E5%9D%91-1/4.jpg" alt></p><p>(å›¾æºï¼š<a href="https://www.ibm.com/developerworks/cn/java/j-lo-shiro/">åœ¨ Web é¡¹ç›®ä¸­åº”ç”¨ Apache Shiro</a>)</p><h1 id="Shiro"><a href="#Shiro" class="headerlink" title="Shiro"></a>Shiro</h1><h2 id="Javaå¸¸è§å®‰å…¨ç®¡ç†æ¡†æ¶"><a href="#Javaå¸¸è§å®‰å…¨ç®¡ç†æ¡†æ¶" class="headerlink" title="Javaå¸¸è§å®‰å…¨ç®¡ç†æ¡†æ¶"></a>Javaå¸¸è§å®‰å…¨ç®¡ç†æ¡†æ¶</h2><p>ä¸€èˆ¬é¡¹ç›®éƒ½ä¼šæœ‰ä¸¥æ ¼çš„è®¤è¯å’Œæˆæƒæ“ä½œï¼Œåœ¨ Java å¼€å‘é¢†åŸŸå¸¸è§å®‰å…¨æ¡†æ¶æœ‰<code>Shiro</code>å’Œ<code>Spring Security</code></p><ul><li><p><code>Shiro</code>æ˜¯ä¸ªè½»çº§çš„å®‰å…¨ç®¡ç†æ¡†æ¶ï¼Œæä¾›äº†è®¤è¯ã€æˆæƒã€ä¼šè¯ç®¡ç†ã€å¯†ç ç®¡ç†ã€ç¼“å­˜ç®¡ç†ç­‰åŠŸèƒ½</p></li><li><p><code>Spring Security</code>æ˜¯ä¸ªç›¸å¯¹å¤æ‚çš„å®‰å…¨ç®¡ç†æ¡†æ¶ï¼ŒåŠŸèƒ½æ¯”<code>Shiro</code>æ›´åŠ å¼ºå¤§ï¼Œæƒé™æ§åˆ¶ç»†ç²’åº¦æ›´é«˜ï¼Œå¯¹ <code>OAuth</code>æ”¯æŒ æ›´å‹å¥½ï¼Œåˆå› ä¸º<code>Spring Security</code>æºè‡ª<code>Spring</code>å®¶æ—ï¼Œå› æ­¤å¯ä»¥å’Œ<code>Spring</code>æ¡†æ¶æ— ç¼æ•´åˆï¼Œç‰¹åˆ«æ˜¯<code>Spring Boot</code>ä¸­æä¾›çš„è‡ªåŠ¨åŒ–é… æ–¹æ¡ˆï¼Œå¯ä»¥è®©<code>Spring Security</code>çš„ä½¿ç”¨æ›´åŠ ä¾¿æ·</p></li></ul><p><img src="/2019/09/02/SpringBoot+Shiro+Jwt%E5%A1%AB%E5%9D%91-1/1.jpg" alt></p><p>(å›¾æºï¼š<a href="http://www.liuhaihua.cn/archives/546461.html">å­¦ä¹ springBootï¼ˆ11ï¼‰shiroå®‰å…¨æ¡†æ¶ | Harries Blogâ„¢</a>)</p><h2 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h2><ul><li>éªŒè¯ç”¨æˆ·èº«ä»½</li><li>ç”¨æˆ·è®¿é—®æƒé™æ§åˆ¶ï¼Œæ¯”å¦‚ï¼š1ã€åˆ¤æ–­ç”¨æˆ·æ˜¯å¦åˆ†é…äº†ä¸€å®šçš„å®‰å…¨è§’è‰²ã€‚2ã€åˆ¤æ–­ç”¨æˆ·æ˜¯å¦è¢«æˆäºˆå®ŒæˆæŸä¸ªæ“ä½œçš„æƒé™</li><li>åœ¨é <code>Web</code> æˆ– <code>EJB</code>å®¹å™¨çš„ç¯å¢ƒä¸‹å¯ä»¥ä»»æ„ä½¿ç”¨ <code>Session API</code></li><li>å¯ä»¥å“åº”è®¤è¯ã€è®¿é—®æ§åˆ¶ï¼Œæˆ–è€… <code>Session</code> ç”Ÿå‘½å‘¨æœŸä¸­å‘ç”Ÿçš„äº‹ä»¶</li><li>å¯å°†ä¸€ä¸ªæˆ–ä»¥ä¸Šç”¨æˆ·å®‰å…¨æ•°æ®æºæ•°æ®ç»„åˆæˆä¸€ä¸ªå¤åˆçš„ç”¨æˆ· <code>view</code>(è§†å›¾)</li><li>æ”¯æŒå•ç‚¹ç™»å½•(<code>SSO</code>)åŠŸèƒ½</li><li>æ”¯æŒæä¾›<code>Remember Me</code>æœåŠ¡ï¼Œè·å–ç”¨æˆ·å…³è”ä¿¡æ¯è€Œæ— éœ€ç™»å½•<br>â€¦</li></ul><p>ä¸‹å›¾æ˜¯Shiroçš„åŠŸèƒ½æ¨¡å—ï¼š</p><p><img src="/2019/09/02/SpringBoot+Shiro+Jwt%E5%A1%AB%E5%9D%91-1/2.png" alt></p><p>(å›¾æºï¼š<a href="https://shiro.apache.org/introduction.html">Apache Shiro | Simple. Java. Security.</a>)</p><ul><li><p><code>Authentication</code>ï¼š<strong>è®¤è¯</strong>ï¼Œæœ‰æ—¶ä¹Ÿç®€ç§°ä¸ºâ€œç™»å½•â€ï¼Œè¿™æ˜¯ä¸€ä¸ªè¯æ˜ç”¨æˆ·æ˜¯ä»–ä»¬æ‰€è¯´çš„ä»–ä»¬æ˜¯è°çš„è¡Œä¸º</p></li><li><p><code>Authorization</code>ï¼š<strong>æˆæƒ</strong>ï¼Œè®¿é—®æ§åˆ¶çš„è¿‡ç¨‹ï¼Œä¾‹å¦‚â€œç”¨æˆ·æ˜¯å¦å…è®¸ç¼–è¾‘å¸æˆ·â€ï¼Œâ€œè¯¥ç”¨æˆ·æ˜¯å¦å…è®¸æŸ¥çœ‹æ­¤ç½‘é¡µâ€ï¼Œâ€œè¯¥ç”¨æˆ·æ˜¯å¦å¯ä»¥è®¿é—®â€åˆ°è¿™ä¸ªæŒ‰é’®ï¼Ÿâ€œè¿™äº›éƒ½æ˜¯å†³å®šç”¨æˆ·æœ‰æƒè®¿é—®çš„å†³å®šï¼Œå› æ­¤éƒ½ä»£è¡¨æˆæƒæ£€æŸ¥</p></li><li><code>Cryptography</code>ï¼šå¯†ç æœ¯æ˜¯é€šè¿‡éšè—ä¿¡æ¯æˆ–å°†å…¶è½¬æ¢ä¸ºæ— æ„ä¹‰çš„ä¿¡æ¯æ¥ä¿æŠ¤æºä¿¡æ¯å…å—ä¸è‰¯è®¿é—®çš„åšæ³•ï¼Œå› æ­¤æ²¡æœ‰å…¶ä»–äººå¯ä»¥é˜…è¯»å®ƒã€‚<code>Shiro</code>ä¸“æ³¨äºå¯†ç å­¦çš„ä¸¤ä¸ªæ ¸å¿ƒè¦ç´ ï¼šä½¿ç”¨å…¬é’¥æˆ–ç§é’¥åŠ å¯†æ•°æ®çš„å¯†ç ï¼Œä»¥åŠå¯¹å¯†ç ç­‰æ•°æ®è¿›è¡Œä¸å¯é€†è½¬åŠ å¯†çš„å“ˆå¸Œï¼ˆä¹Ÿç§°ä¸ºæ¶ˆæ¯æ‘˜è¦ï¼‰</li><li><code>Session Management</code>ï¼š<code>Session</code>ä¼šè¯ï¼Œä¼šè¯æ˜¯æ‚¨çš„ç”¨æˆ·åœ¨ä½¿ç”¨æ‚¨çš„åº”ç”¨ç¨‹åºæ—¶æºå¸¦ä¸€æ®µæ—¶é—´çš„æ•°æ®æ¡¶ã€‚ä¼ ç»Ÿä¸Šï¼Œä¼šè¯ä¸“ç”¨äº<code>Web</code>æˆ–<code>EJB</code>ç¯å¢ƒã€‚Shiroæ”¯æŒä»»ä½•åº”ç”¨ç¨‹åºç¯å¢ƒçš„ä¼šè¯ï¼ˆå³ä½¿åœ¨é<code>Web</code>æˆ–<code>EJB</code>åº”ç”¨ç¨‹åºä¸­ï¼Œä¹Ÿå¯ä»¥ç®¡ç†ç‰¹å®šäºç”¨æˆ·çš„ä¼šè¯ï¼‰ã€‚æ­¤å¤–ï¼ŒShiroè¿˜æä¾›è®¸å¤šå…¶ä»–å¼ºå¤§åŠŸèƒ½æ¥å¸®åŠ©æ‚¨ç®¡ç†ä¼šè¯</li><li><code>Web Support</code>ï¼š<code>Shiro</code>çš„<code>web</code>æ”¯æŒçš„<code>API</code>èƒ½å¤Ÿè½»æ¾åœ°å¸®åŠ©ä¿æŠ¤ <code>Web</code> åº”ç”¨ç¨‹åºã€‚ä¸»è¦å°±æ˜¯ç”¨æ¥å¯¹<code>Web</code>ç¨‹åºè¿›è¡Œä¸€ä¸ªå¥½çš„æ”¯æŒçš„</li><li><code>Caching</code>ï¼šç¡®ä¿å®‰å…¨æ“ä½œå¿«é€Ÿè€Œåˆé«˜æ•ˆ</li><li><code>Concurrency</code>ï¼šåˆ©ç”¨å®ƒçš„å¹¶å‘ç‰¹æ€§æ¥æ”¯æŒå¤šçº¿ç¨‹åº”ç”¨ç¨‹åº</li><li><code>Testing</code>ï¼šæµ‹è¯•æ”¯æŒçš„å­˜åœ¨æ¥å¸®åŠ©ä½ ç¼–å†™å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ï¼Œå¹¶ç¡®ä¿ä½ çš„èƒ½å¤Ÿå¦‚é¢„æœŸçš„ä¸€æ ·å®‰å…¨</li><li><code>&quot;Run As&quot;</code>ï¼šå…¶å®è¿™ä¸ªå°±æ˜¯æœ‰æ˜¯æœ‰å…è®¸ä¸€ä¸ªç”¨æˆ·å‡è®¾ä¸ºå¦å¤–ä¸€ä¸ªç”¨æˆ·èº«ä»½çš„åŠŸèƒ½ï¼Œæœ‰æ—¶å€™åœ¨ç®¡ç†è„šæœ¬çš„æ—¶å€™å¾ˆæœ‰æ•ˆæœ</li><li><code>Remember Me</code>ï¼šåœ¨ä¼šè¯ä¸­è®°ä½ç”¨æˆ·çš„èº«ä»½</li></ul><h2 id="æ ¸å¿ƒ"><a href="#æ ¸å¿ƒ" class="headerlink" title="æ ¸å¿ƒ"></a>æ ¸å¿ƒ</h2><p>ä¸‰å¤§æ ¸å¿ƒç»„ä»¶ï¼Œ<code>Subject</code>ã€<code>SecurityManager</code>å’Œ<code>Realms</code>ã€‚</p><ul><li><p><code>Subject</code>ï¼šå³â€œå½“å‰æ“ä½œç”¨æˆ·â€ã€‚ä½†æ˜¯ï¼Œåœ¨<code>Shiro</code>ä¸­ï¼Œ<code>Subject</code>è¿™ä¸€æ¦‚å¿µå¹¶ä¸ä»…ä»…æŒ‡äººï¼Œä¹Ÿå¯ä»¥æ˜¯ç¬¬ä¸‰æ–¹è¿›ç¨‹ã€åå°å¸æˆ·(<code>Daemon Account</code>)æˆ–å…¶ä»–ç±»ä¼¼äº‹ç‰©ã€‚å®ƒä»…ä»…æ„å‘³ç€â€œå½“å‰è·Ÿè½¯ä»¶äº¤äº’çš„ä¸œè¥¿â€ã€‚ä½†è€ƒè™‘åˆ°å¤§å¤šæ•°ç›®çš„å’Œç”¨é€”ï¼Œä½ å¯ä»¥æŠŠå®ƒè®¤ä¸ºæ˜¯<code>Shiro</code>çš„â€œç”¨æˆ·â€æ¦‚å¿µã€‚Subjectä»£è¡¨äº†å½“å‰ç”¨æˆ·çš„å®‰å…¨æ“ä½œï¼Œ<code>SecurityManager</code>åˆ™ç®¡ç†æ‰€æœ‰ç”¨æˆ·çš„å®‰å…¨æ“ä½œã€‚</p></li><li><p><code>SecurityManager</code>ï¼šå®ƒæ˜¯<code>Shiro</code>æ¡†æ¶çš„æ ¸å¿ƒï¼Œå…¸å‹çš„<code>Facade</code>æ¨¡å¼ï¼Œ<code>Shiro</code>é€šè¿‡<code>SecurityManager</code>æ¥ç®¡ç†å†…éƒ¨ç»„ä»¶å®ä¾‹ï¼Œå¹¶é€šè¿‡å®ƒæ¥æä¾›å®‰å…¨ç®¡ç†çš„å„ç§æœåŠ¡ã€‚å¯ä»¥ç†è§£æˆæ§åˆ¶ä¸­å¿ƒï¼Œæ‰€æœ‰è¯·æ±‚æœ€ç»ˆåŸºæœ¬ä¸Šéƒ½é€šè¿‡å®ƒæ¥ä»£ç†è½¬å‘ï¼Œä¸€èˆ¬æˆ‘ä»¬ç¨‹åºä¸­ä¸éœ€è¦ç›´æ¥è·Ÿä»–æ‰“äº¤é“ã€‚</p><blockquote><p>å¤–è§‚æ¨¡å¼(<code>Facade Pattern</code>)ï¼šå¤–éƒ¨ä¸ä¸€ä¸ªå­ç³»ç»Ÿçš„é€šä¿¡å¿…é¡»é€šè¿‡ä¸€ä¸ªç»Ÿä¸€çš„å¤–è§‚å¯¹è±¡è¿›è¡Œï¼Œä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£æä¾›ä¸€ä¸ªä¸€è‡´çš„ç•Œé¢ï¼Œå¤–è§‚æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä½¿å¾—è¿™ä¸€å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨ã€‚ å¤–è§‚æ¨¡å¼åˆç§°ä¸ºé—¨é¢æ¨¡å¼ï¼Œå®ƒæ˜¯ä¸€ç§å¯¹è±¡ç»“æ„å‹æ¨¡å¼ã€‚</p></blockquote></li><li><p><code>Realm</code>ï¼š <code>Realm</code>å……å½“äº†<code>Shiro</code>ä¸åº”ç”¨å®‰å…¨æ•°æ®é—´çš„â€œæ¡¥æ¢â€æˆ–è€…â€œè¿æ¥å™¨â€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“å¯¹ç”¨æˆ·æ‰§è¡Œè®¤è¯ï¼ˆç™»å½•ï¼‰å’Œæˆæƒï¼ˆè®¿é—®æ§åˆ¶ï¼‰éªŒè¯æ—¶ï¼Œ<code>Shiro</code>ä¼šä»åº”ç”¨é…ç½®çš„<code>Realm</code>ä¸­æŸ¥æ‰¾ç”¨æˆ·åŠå…¶æƒé™ä¿¡æ¯ã€‚ä»è¿™ä¸ªæ„ä¹‰ä¸Šè®²ï¼Œ<code>Realm</code>å®è´¨ä¸Šæ˜¯ä¸€ä¸ªå®‰å…¨ç›¸å…³çš„<code>DAO</code>ï¼š<strong>å®ƒå°è£…äº†æ•°æ®æºçš„è¿æ¥ç»†èŠ‚ï¼Œå¹¶åœ¨éœ€è¦æ—¶å°†ç›¸å…³æ•°æ®æä¾›ç»™<code>Shiro</code></strong>ã€‚å½“é…ç½®<code>Shiro</code>æ—¶ï¼Œä½ å¿…é¡»è‡³å°‘æŒ‡å®šä¸€ä¸ª<code>Realm</code>ï¼Œç”¨äºè®¤è¯å’Œæˆ–æˆæƒã€‚<em>é…ç½®å¤šä¸ª<code>Realm</code>æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯è‡³å°‘éœ€è¦ä¸€ä¸ª</em>ã€‚â€ƒ</p></li></ul><h2 id="è®¤è¯ä¸æˆæƒå¤„ç†è¿‡ç¨‹"><a href="#è®¤è¯ä¸æˆæƒå¤„ç†è¿‡ç¨‹" class="headerlink" title="è®¤è¯ä¸æˆæƒå¤„ç†è¿‡ç¨‹"></a>è®¤è¯ä¸æˆæƒå¤„ç†è¿‡ç¨‹</h2><ol><li>è¢«<code>Shiro</code>ä¿æŠ¤çš„èµ„æºï¼Œæ‰ä¼šç»è¿‡è®¤è¯ä¸æˆæƒè¿‡ç¨‹</li><li>ç”¨æˆ·è®¿é—®å—<code>Shiro</code>ä¿æŠ¤çš„<code>URL</code></li><li><code>Shiro</code> <strong>é¦–å…ˆæ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç»é€šè¿‡è®¤è¯ï¼Œå¦‚æœæœªé€šè¿‡è®¤è¯æ£€æŸ¥ï¼Œåˆ™è·³è½¬åˆ°ç™»å½•é¡µé¢ï¼Œå¦åˆ™è¿›è¡Œæˆæƒæ£€æŸ¥</strong>ã€‚<strong>è®¤è¯è¿‡ç¨‹éœ€è¦é€šè¿‡ <code>Realm</code> æ¥è·å–ç”¨æˆ·åŠå¯†ç ä¿¡æ¯ï¼Œé€šå¸¸æƒ…å†µæˆ‘ä»¬å®ç° <code>JDBC Realm</code>ï¼Œæ­¤æ—¶ç”¨æˆ·è®¤è¯æ‰€éœ€è¦çš„ä¿¡æ¯ä»æ•°æ®åº“è·å–</strong>ã€‚å¦‚æœä½¿ç”¨äº†ç¼“å­˜ï¼Œé™¤ç¬¬ä¸€æ¬¡å¤–ç”¨æˆ·ä¿¡æ¯ä»ç¼“å­˜è·å–ã€‚</li><li><strong>è®¤è¯é€šè¿‡åæ¥å—<code>Shiro</code>æˆæƒæ£€æŸ¥ï¼Œæˆæƒæ£€æŸ¥åŒæ ·éœ€è¦é€šè¿‡<code>Realm</code>è·å–ç”¨æˆ·æƒé™ä¿¡æ¯</strong>ã€‚<code>Shiro</code> éœ€è¦çš„ç”¨æˆ·æƒé™ä¿¡æ¯åŒ…æ‹¬<code>Role</code>æˆ–<code>Permission</code>ï¼Œå¯ä»¥æ˜¯å…¶ä¸­ä»»ä½•ä¸€ç§æˆ–åŒæ—¶ä¸¤è€…ï¼Œå…·ä½“å–å†³äºå—ä¿æŠ¤èµ„æºçš„é…ç½®ã€‚å¦‚æœç”¨æˆ·æƒé™ä¿¡æ¯æœªåŒ…å«<code>Shiro</code>éœ€è¦çš„<code>Role</code>æˆ–<code>Permission</code>ï¼Œæˆæƒä¸é€šè¿‡ã€‚<strong>åªæœ‰æˆæƒé€šè¿‡ï¼Œæ‰å¯ä»¥è®¿é—®å—ä¿æŠ¤<code>URL</code>å¯¹åº”çš„èµ„æºï¼Œå¦åˆ™è·³è½¬åˆ°â€œæœªç»æˆæƒé¡µé¢â€ã€‚</strong></li></ol><p><img src="/2019/09/02/SpringBoot+Shiro+Jwt%E5%A1%AB%E5%9D%91-1/5.png" alt></p><p>(å›¾æºï¼š<a href="https://whetherlove.github.io/2018/11/30/Shiro%E7%AE%80%E4%BB%8B/">Shiroç®€ä»‹ Â· ç–¯ç‹‚çš„å°é¸¡</a>)</p><h2 id="Shiroçš„Filteré“¾"><a href="#Shiroçš„Filteré“¾" class="headerlink" title="Shiroçš„Filteré“¾"></a>Shiroçš„Filteré“¾</h2><p><code>Shiro</code>çš„è®¤è¯å’Œæˆæƒéƒ½ç¦»ä¸å¼€<code>Filter</code>ï¼Œå› æ­¤éœ€è¦å¯¹<code>Shiro</code>çš„<code>Filter</code>çš„è¿è¡Œæµç¨‹å¾ˆæ¸…æ¥šï¼Œæ‰èƒ½è‡ªå®šä¹‰<code>Filter</code>æ¥æ»¡è¶³ä¼ä¸šçš„å®é™…éœ€è¦ã€‚å¦å¤–<code>Shiro</code>çš„<code>Filter</code>è™½ç„¶åŸç†éƒ½å’Œ<code>Servlet</code>çš„<code>Filter</code>ç›¸ä¼¼ï¼Œç”šè‡³éƒ½æœ€ç»ˆç»§æ‰¿ç›¸åŒçš„æ¥å£ï¼Œä½†æ˜¯å®é™…è¿˜æ˜¯æœ‰äº›å·®åˆ«ã€‚<code>Shiro</code>ä¸­çš„<code>Filter</code>ä¸»è¦æ˜¯åœ¨<code>ShiroFilter</code>å†…ï¼Œå¯¹æŒ‡å®šåŒ¹é…çš„<code>URL</code>è¿›è¡Œæ‹¦æˆªå¤„ç†ï¼Œå®ƒæœ‰è‡ªå·±çš„<code>Filter</code>é“¾ï¼›è€Œ<code>Servlet</code>çš„<code>Filter</code>å’Œ<code>ShiroFilter</code>æ˜¯åŒä¸€ä¸ªçº§åˆ«çš„ï¼Œå³å…ˆèµ°<code>Shiro</code>è‡ªå·±çš„<code>Filter</code>ä½“ç³»ï¼Œç„¶åæ‰ä¼šå§”æ‰˜ç»™<code>Servlet</code>å®¹å™¨çš„<code>FilterChain</code>è¿›è¡Œ<code>Servlet</code>å®¹å™¨çº§åˆ«çš„<code>Filter</code>é“¾æ‰§è¡Œ</p><h1 id="ä¸SpringBooté›†æˆ-æ²¡æœ‰jwt"><a href="#ä¸SpringBooté›†æˆ-æ²¡æœ‰jwt" class="headerlink" title="ä¸SpringBooté›†æˆ(æ²¡æœ‰jwt)"></a>ä¸SpringBooté›†æˆ(æ²¡æœ‰jwt)</h1><h2 id="ä¾èµ–"><a href="#ä¾èµ–" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h2><h3 id="shiro-spring"><a href="#shiro-spring" class="headerlink" title="shiro-spring"></a>shiro-spring</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="spring-boot-starter-web"><a href="#spring-boot-starter-web" class="headerlink" title="spring-boot-starter-web"></a>spring-boot-starter-web</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><p>å…¶ä»–è‡ªå·±éœ€è¦çš„ä¾èµ–å¯ä»¥è‡ªè¡Œè¡¥å…¨</p><h2 id="RBACæ€æƒ³å»ºè¡¨"><a href="#RBACæ€æƒ³å»ºè¡¨" class="headerlink" title="RBACæ€æƒ³å»ºè¡¨"></a>RBACæ€æƒ³å»ºè¡¨</h2><p>è¿™é‡Œä½¿ç”¨<code>Spring Data JPA</code>æ¥å¤„ç†æŒä¹…å±‚</p><p>æŒ‰ç…§<code>RBAC</code>æ€æƒ³ï¼Œæœ€ç®€å•çš„å¾—æœ‰ç”¨æˆ·ä¿¡æ¯ï¼Œè§’è‰²ä¿¡æ¯ï¼Œæƒé™ä¿¡æ¯</p><h3 id="ç”¨æˆ·ä¿¡æ¯"><a href="#ç”¨æˆ·ä¿¡æ¯" class="headerlink" title="ç”¨æˆ·ä¿¡æ¯"></a>ç”¨æˆ·ä¿¡æ¯</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserInfo</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span></span><br><span class="line">    <span class="keyword">private</span> Integer uid;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//å¸å·</span></span><br><span class="line">    <span class="meta">@Column(unique =true)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//åç§°ï¼ˆæ˜µç§°æˆ–è€…çœŸå®å§“åï¼Œä¸åŒç³»ç»Ÿä¸åŒå®šä¹‰ï¼‰</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//å¯†ç ;</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//åŠ å¯†å¯†ç çš„ç›</span></span><br><span class="line">    <span class="keyword">private</span> String salt;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//ç”¨æˆ·çŠ¶æ€,0:åˆ›å»ºæœªè®¤è¯ï¼ˆæ¯”å¦‚æ²¡æœ‰æ¿€æ´»ï¼Œæ²¡æœ‰è¾“å…¥éªŒè¯ç ç­‰ç­‰ï¼‰--ç­‰å¾…éªŒè¯çš„ç”¨æˆ·</span></span><br><span class="line">    <span class="comment">//1:æ­£å¸¸çŠ¶æ€,2ï¼šç”¨æˆ·è¢«é”å®š.</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">byte</span> state;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤šå¯¹å¤šé…ç½®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">//ç«‹å³ä»æ•°æ®åº“ä¸­è¿›è¡ŒåŠ è½½æ•°æ®;</span></span><br><span class="line">    <span class="meta">@ManyToMany(fetch = FetchType.EAGER)</span></span><br><span class="line">    <span class="meta">@JoinTable(name = &quot;SysUserRole&quot;, joinColumns = &#123; @JoinColumn(name = &quot;uid&quot;) &#125;, inverseJoinColumns =&#123;@JoinColumn(name = &quot;roleId&quot;) &#125;)</span></span><br><span class="line">    <span class="comment">// ä¸€ä¸ªç”¨æˆ·å…·æœ‰å¤šä¸ªè§’è‰²</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;SysRole&gt; roleList;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// çœç•¥ get set æ–¹æ³•</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h3 id="è§’è‰²ä¿¡æ¯"><a href="#è§’è‰²ä¿¡æ¯" class="headerlink" title="è§’è‰²ä¿¡æ¯"></a>è§’è‰²ä¿¡æ¯</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SysRole</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ç¼–å·</span></span><br><span class="line">    <span class="keyword">private</span> Integer id; </span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è§’è‰²æ ‡è¯†ç¨‹åºä¸­åˆ¤æ–­ä½¿ç”¨,å¦‚&quot;admin&quot;,è¿™ä¸ªæ˜¯å”¯ä¸€çš„:</span></span><br><span class="line">    <span class="keyword">private</span> String role; </span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è§’è‰²æè¿°,UIç•Œé¢æ˜¾ç¤ºä½¿ç”¨</span></span><br><span class="line">    <span class="keyword">private</span> String description;   </span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ˜¯å¦å¯ç”¨,å¦‚æœä¸å¯ç”¨å°†ä¸ä¼šæ·»åŠ ç»™ç”¨æˆ·</span></span><br><span class="line">    <span class="keyword">private</span> Boolean available = Boolean.FALSE;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//è§’è‰² -- æƒé™å…³ç³»ï¼šå¤šå¯¹å¤šå…³ç³»;</span></span><br><span class="line">    <span class="meta">@ManyToMany(fetch= FetchType.EAGER)</span></span><br><span class="line">    <span class="meta">@JoinTable(name=&quot;SysRolePermission&quot;,joinColumns=&#123;@JoinColumn(name=&quot;roleId&quot;)&#125;,inverseJoinColumns=&#123;@JoinColumn(name=&quot;permissionId&quot;)&#125;)</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;SysPermission&gt; permissions;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨æˆ· - è§’è‰²å…³ç³»å®šä¹‰;</span></span><br><span class="line">    <span class="meta">@ManyToMany</span></span><br><span class="line">    <span class="meta">@JoinTable(name=&quot;SysUserRole&quot;,joinColumns=&#123;@JoinColumn(name=&quot;roleId&quot;)&#125;,inverseJoinColumns=&#123;@JoinColumn(name=&quot;uid&quot;)&#125;)</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä¸€ä¸ªè§’è‰²å¯¹åº”å¤šä¸ªç”¨æˆ·</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;UserInfo&gt; userInfos;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// çœç•¥ get set æ–¹æ³•</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h3 id="æƒé™ä¿¡æ¯"><a href="#æƒé™ä¿¡æ¯" class="headerlink" title="æƒé™ä¿¡æ¯"></a>æƒé™ä¿¡æ¯</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SysPermission</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//ä¸»é”®</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//åç§°</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Column(columnDefinition=&quot;enum(&#x27;menu&#x27;,&#x27;button&#x27;)&quot;)</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//èµ„æºç±»å‹ï¼Œ[menu|button]</span></span><br><span class="line">    <span class="keyword">private</span> String resourceType;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//èµ„æºè·¯å¾„</span></span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æƒé™å­—ç¬¦ä¸²,menuä¾‹å­ï¼šrole:*ï¼Œbuttonä¾‹å­ï¼šrole:create,role:update,role:delete,role:view</span></span><br><span class="line">    <span class="keyword">private</span> String permission; </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//çˆ¶ç¼–å·</span></span><br><span class="line">    <span class="keyword">private</span> Long parentId; </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//çˆ¶ç¼–å·åˆ—è¡¨</span></span><br><span class="line">    <span class="keyword">private</span> String parentIds; </span><br><span class="line">    <span class="keyword">private</span> Boolean available = Boolean.FALSE;</span><br><span class="line">    <span class="meta">@ManyToMany</span></span><br><span class="line">    <span class="meta">@JoinTable(name=&quot;SysRolePermission&quot;,joinColumns=&#123;@JoinColumn(name=&quot;permissionId&quot;)&#125;,inverseJoinColumns=&#123;@JoinColumn(name=&quot;roleId&quot;)&#125;)</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;SysRole&gt; roles;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// çœç•¥ get set æ–¹æ³•</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>æ ¹æ®ä»¥ä¸Šçš„ä»£ç ä¼šè‡ªåŠ¨ç”Ÿæˆ <code>user_info</code>ï¼ˆç”¨æˆ·ä¿¡æ¯è¡¨ï¼‰ã€<code>sys_role</code>ï¼ˆè§’è‰²è¡¨ï¼‰ã€<code>sys_permission</code>ï¼ˆæƒé™è¡¨ï¼‰ã€<code>sys_user_role</code>ï¼ˆç”¨æˆ·è§’è‰²è¡¨ï¼‰ã€<code>sys_role_permission</code>ï¼ˆè§’è‰²æƒé™è¡¨ï¼‰è¿™äº”å¼ è¡¨</p><p>æµ‹è¯•æ•°æ®å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO `user_info` (`uid`,`username`,`name`,`password`,`salt`,`state`) VALUES (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;admin&#x27;</span>, <span class="string">&#x27;ç®¡ç†å‘˜&#x27;</span>, <span class="string">&#x27;d3c59d25033dbf980d29554025c23a75&#x27;</span>, <span class="string">&#x27;8d78869f470951332959580424d4bf4f&#x27;</span>, <span class="number">0</span>);</span><br><span class="line">INSERT INTO `sys_permission` (`id`,`available`,`name`,`parent_id`,`parent_ids`,`permission`,`resource_type`,`url`) VALUES (<span class="number">1</span>,<span class="number">0</span>,<span class="string">&#x27;ç”¨æˆ·ç®¡ç†&#x27;</span>,<span class="number">0</span>,<span class="string">&#x27;0/&#x27;</span>,<span class="string">&#x27;userInfo:view&#x27;</span>,<span class="string">&#x27;menu&#x27;</span>,<span class="string">&#x27;userInfo/userList&#x27;</span>);</span><br><span class="line">INSERT INTO `sys_permission` (`id`,`available`,`name`,`parent_id`,`parent_ids`,`permission`,`resource_type`,`url`) VALUES (<span class="number">2</span>,<span class="number">0</span>,<span class="string">&#x27;ç”¨æˆ·æ·»åŠ &#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;0/1&#x27;</span>,<span class="string">&#x27;userInfo:add&#x27;</span>,<span class="string">&#x27;button&#x27;</span>,<span class="string">&#x27;userInfo/userAdd&#x27;</span>);</span><br><span class="line">INSERT INTO `sys_permission` (`id`,`available`,`name`,`parent_id`,`parent_ids`,`permission`,`resource_type`,`url`) VALUES (<span class="number">3</span>,<span class="number">0</span>,<span class="string">&#x27;ç”¨æˆ·åˆ é™¤&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;0/1&#x27;</span>,<span class="string">&#x27;userInfo:del&#x27;</span>,<span class="string">&#x27;button&#x27;</span>,<span class="string">&#x27;userInfo/userDel&#x27;</span>);</span><br><span class="line">INSERT INTO `sys_role` (`id`,`available`,`description`,`role`) VALUES (<span class="number">1</span>,<span class="number">0</span>,<span class="string">&#x27;ç®¡ç†å‘˜&#x27;</span>,<span class="string">&#x27;admin&#x27;</span>);</span><br><span class="line">INSERT INTO `sys_role` (`id`,`available`,`description`,`role`) VALUES (<span class="number">2</span>,<span class="number">0</span>,<span class="string">&#x27;VIPä¼šå‘˜&#x27;</span>,<span class="string">&#x27;vip&#x27;</span>);</span><br><span class="line">INSERT INTO `sys_role` (`id`,`available`,`description`,`role`) VALUES (<span class="number">3</span>,<span class="number">1</span>,<span class="string">&#x27;test&#x27;</span>,<span class="string">&#x27;test&#x27;</span>);</span><br><span class="line">INSERT INTO `sys_role_permission` VALUES (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">INSERT INTO `sys_role_permission` (`permission_id`,`role_id`) VALUES (<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">INSERT INTO `sys_role_permission` (`permission_id`,`role_id`) VALUES (<span class="number">2</span>,<span class="number">1</span>);</span><br><span class="line">INSERT INTO `sys_role_permission` (`permission_id`,`role_id`) VALUES (<span class="number">3</span>,<span class="number">2</span>);</span><br><span class="line">INSERT INTO `sys_user_role` (`role_id`,`uid`) VALUES (<span class="number">1</span>,<span class="number">1</span>);</span><br></pre></td></tr></table></figure><h2 id="Shiroé…ç½®"><a href="#Shiroé…ç½®" class="headerlink" title="Shiroé…ç½®"></a>Shiroé…ç½®</h2><h3 id="ShiroConfig"><a href="#ShiroConfig" class="headerlink" title="ShiroConfig"></a>ShiroConfig</h3><p>é¦–å…ˆè¦é…ç½®çš„æ˜¯ <code>ShiroConfig</code> ç±»ï¼Œ<code>Apache Shiro</code> æ ¸å¿ƒé€šè¿‡ <code>Filter</code>æ¥å®ç°ï¼Œå°±å¥½åƒ <code>SpringMvc</code> é€šè¿‡ <code>DispachServlet</code> æ¥ä¸»æ§åˆ¶ä¸€æ ·ã€‚<br><strong>æ—¢ç„¶æ˜¯ä½¿ç”¨ <code>Filter</code> ä¸€èˆ¬ä¹Ÿå°±èƒ½çŒœåˆ°ï¼Œæ˜¯é€šè¿‡ <code>URL</code> è§„åˆ™æ¥è¿›è¡Œè¿‡æ»¤å’Œæƒé™æ ¡éªŒï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ç³»åˆ—å…³äº <code>URL</code> çš„è§„åˆ™å’Œè®¿é—®æƒé™ã€‚</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShiroConfig</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Primary</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ShiroFilterFactoryBean <span class="title">shirFilter</span><span class="params">(SecurityManager securityManager)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//ç”¨äºå®šä¹‰ä¸»Shiro Filter</span></span><br><span class="line">        ShiroFilterFactoryBean shiroFilterFactoryBean = <span class="keyword">new</span> ShiroFilterFactoryBean();</span><br><span class="line">        <span class="comment">//è®¾ç½®è¦æ„é€ çš„Shiro Filterä½¿ç”¨çš„SecurityManagerå®ä¾‹</span></span><br><span class="line">        <span class="comment">//è¿™æ˜¯å¿…å¡«å±æ€§-è®¾ç½®å¤±è´¥å°†å¼•å‘åˆå§‹åŒ–å¼‚å¸¸</span></span><br><span class="line">        shiroFilterFactoryBean.setSecurityManager(securityManager);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//æ‹¦æˆªå™¨</span></span><br><span class="line">        <span class="comment">//LinkedHashMapæ˜¯æœ‰åºçš„</span></span><br><span class="line">        Map&lt;String,String&gt; filterChainDefinitionMap = <span class="keyword">new</span> LinkedHashMap&lt;String,String&gt;();</span><br><span class="line">        <span class="comment">// é…ç½®ä¸ä¼šè¢«æ‹¦æˆªçš„é“¾æ¥</span></span><br><span class="line">        filterChainDefinitionMap.put(<span class="string">&quot;/static/**&quot;</span>, <span class="string">&quot;anon&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//é…ç½®é€€å‡º è¿‡æ»¤å™¨,å…¶ä¸­çš„å…·ä½“çš„é€€å‡ºä»£ç Shiroå·²ç»æ›¿æˆ‘ä»¬å®ç°äº†</span></span><br><span class="line">        filterChainDefinitionMap.put(<span class="string">&quot;/logout&quot;</span>, <span class="string">&quot;logout&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//è¿‡æ»¤é“¾å®šä¹‰ï¼Œä»ä¸Šå‘ä¸‹é¡ºåºæ‰§è¡Œï¼Œä¸€èˆ¬å°†/**æ”¾åœ¨æœ€ä¸ºä¸‹è¾¹ --&gt;:è¿™æ˜¯ä¸€ä¸ªå‘å‘¢ï¼Œä¸€ä¸å°å¿ƒä»£ç å°±ä¸å¥½ä½¿äº†;</span></span><br><span class="line">        <span class="comment">//authc:æ‰€æœ‰urléƒ½å¿…é¡»è®¤è¯é€šè¿‡æ‰å¯ä»¥è®¿é—®; anon:æ‰€æœ‰urléƒ½éƒ½å¯ä»¥åŒ¿åè®¿é—®</span></span><br><span class="line">        filterChainDefinitionMap.put(<span class="string">&quot;/**&quot;</span>, <span class="string">&quot;authc&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å¦‚æœä¸è®¾ç½®é»˜è®¤ä¼šè‡ªåŠ¨å¯»æ‰¾Webå·¥ç¨‹æ ¹ç›®å½•ä¸‹çš„&quot;/login&quot;é¡µé¢</span></span><br><span class="line">        shiroFilterFactoryBean.setLoginUrl(<span class="string">&quot;/login&quot;</span>);</span><br><span class="line">        <span class="comment">// ç™»å½•æˆåŠŸåè¦è·³è½¬çš„é“¾æ¥</span></span><br><span class="line">        shiroFilterFactoryBean.setSuccessUrl(<span class="string">&quot;/index&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æœªæˆæƒç•Œé¢;</span></span><br><span class="line">        shiroFilterFactoryBean.setUnauthorizedUrl(<span class="string">&quot;/403&quot;</span>);</span><br><span class="line">        shiroFilterFactoryBean.setFilterChainDefinitionMap(filterChainDefinitionMap);</span><br><span class="line">        <span class="keyword">return</span> shiroFilterFactoryBean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è‡ªå®šä¹‰MyShiroRealmç±»</span></span><br><span class="line">    <span class="meta">@Primary</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MyShiroRealm <span class="title">myShiroRealm</span><span class="params">()</span></span>&#123;</span><br><span class="line">        MyShiroRealm myShiroRealm = <span class="keyword">new</span> MyShiroRealm();</span><br><span class="line">        <span class="keyword">return</span> myShiroRealm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Primary</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DefaultWebSecurityManager <span class="title">securityManager</span><span class="params">()</span></span>&#123;</span><br><span class="line">        DefaultWebSecurityManager securityManager =  <span class="keyword">new</span> DefaultWebSecurityManager();</span><br><span class="line">        securityManager.setRealm(myShiroRealm());</span><br><span class="line">        <span class="keyword">return</span> securityManager;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>Filter Chain</code> å®šä¹‰è¯´æ˜ï¼š</p><ul><li>ä¸€ä¸ª<code>URL</code>å¯ä»¥é…ç½®å¤šä¸ª <code>Filter</code>ï¼Œä½¿ç”¨é€—å·åˆ†éš”</li><li>å½“è®¾ç½®å¤šä¸ªè¿‡æ»¤å™¨æ—¶ï¼Œå…¨éƒ¨éªŒè¯é€šè¿‡ï¼Œæ‰è§†ä¸ºé€šè¿‡</li><li>éƒ¨åˆ†è¿‡æ»¤å™¨å¯æŒ‡å®šå‚æ•°ï¼Œå¦‚ <code>perms</code>ï¼Œ<code>roles</code></li></ul><h3 id="ç™»å½•è®¤è¯å®ç°"><a href="#ç™»å½•è®¤è¯å®ç°" class="headerlink" title="ç™»å½•è®¤è¯å®ç°"></a>ç™»å½•è®¤è¯å®ç°</h3><p>åœ¨è®¤è¯ã€æˆæƒå†…éƒ¨å®ç°æœºåˆ¶ä¸­éƒ½æœ‰æåˆ°ï¼Œæœ€ç»ˆå¤„ç†éƒ½å°†äº¤ç»™<code>Real</code>è¿›è¡Œå¤„ç†ã€‚å› ä¸ºåœ¨ <code>Shiro</code> ä¸­ï¼Œ<strong>æœ€ç»ˆæ˜¯é€šè¿‡ <code>Realm</code>æ¥è·å–åº”ç”¨ç¨‹åºä¸­çš„ç”¨æˆ·ã€è§’è‰²åŠæƒé™ä¿¡æ¯çš„</strong>ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œåœ¨ <code>Realm</code> ä¸­ä¼šç›´æ¥ä»æˆ‘ä»¬çš„æ•°æ®æºä¸­è·å– <code>Shiro</code> éœ€è¦çš„éªŒè¯ä¿¡æ¯ã€‚å¯ä»¥è¯´ï¼Œ<code>Realm</code> æ˜¯ä¸“ç”¨äºå®‰å…¨æ¡†æ¶çš„ <code>DAO</code>.<br><code>Shiro</code> çš„è®¤è¯è¿‡ç¨‹æœ€ç»ˆä¼šäº¤ç”± <code>Realm</code> æ‰§è¡Œï¼Œè¿™æ—¶ä¼šè°ƒç”¨ <code>Realm</code> çš„<code>getAuthenticationInfo(token)</code>æ–¹æ³•ã€‚</p><p>è¯¥æ–¹æ³•ä¸»è¦æ‰§è¡Œä»¥ä¸‹æ“ä½œ:</p><ol><li><p>æ£€æŸ¥æäº¤çš„è¿›è¡Œè®¤è¯çš„ä»¤ç‰Œä¿¡æ¯</p></li><li><p>æ ¹æ®ä»¤ç‰Œä¿¡æ¯ä»æ•°æ®æº(é€šå¸¸ä¸ºæ•°æ®åº“)ä¸­è·å–ç”¨æˆ·ä¿¡æ¯</p></li><li><p>å¯¹ç”¨æˆ·ä¿¡æ¯è¿›è¡ŒåŒ¹é…éªŒè¯ã€‚</p></li><li><p>éªŒè¯é€šè¿‡å°†è¿”å›ä¸€ä¸ªå°è£…äº†ç”¨æˆ·ä¿¡æ¯çš„<code>AuthenticationInfo</code>å®ä¾‹ã€‚</p></li><li><p>éªŒè¯å¤±è´¥åˆ™æŠ›å‡º<code>AuthenticationException</code>å¼‚å¸¸ä¿¡æ¯ã€‚</p></li></ol><p><strong>è€Œåœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­è¦åšçš„å°±æ˜¯è‡ªå®šä¹‰ä¸€ä¸ª <code>Realm</code> ç±»ï¼Œç»§æ‰¿<code>AuthorizingRealm</code> æŠ½è±¡ç±»ï¼Œé‡å†™<code>doGetAuthenticationInfo()</code></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *ä¸»è¦æ˜¯ç”¨æ¥è¿›è¡Œèº«ä»½è®¤è¯çš„ï¼Œä¹Ÿå°±æ˜¯è¯´éªŒè¯ç”¨æˆ·è¾“å…¥çš„è´¦å·å’Œå¯†ç æ˜¯å¦æ­£ç¡®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> AuthenticationInfo <span class="title">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken token)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//è·å–ç”¨æˆ·çš„è¾“å…¥çš„è´¦å·.</span></span><br><span class="line">    String username = (String)token.getPrincipal();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é€šè¿‡usernameä»æ•°æ®åº“ä¸­æŸ¥æ‰¾ Userå¯¹è±¡ï¼Œå¦‚æœæ‰¾åˆ°ï¼Œæ²¡æ‰¾åˆ°.</span></span><br><span class="line">    <span class="comment">//å®é™…é¡¹ç›®ä¸­ï¼Œè¿™é‡Œå¯ä»¥æ ¹æ®å®é™…æƒ…å†µåšç¼“å­˜ï¼Œå¦‚æœä¸åšï¼ŒShiroè‡ªå·±ä¹Ÿæ˜¯æœ‰æ—¶é—´é—´éš”æœºåˆ¶ï¼Œ2åˆ†é’Ÿå†…ä¸ä¼šé‡å¤æ‰§è¡Œè¯¥æ–¹æ³•</span></span><br><span class="line">    UserInfo userInfo = userInfoService.findByUsername(username);</span><br><span class="line">    <span class="keyword">if</span>(userInfo == <span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    SimpleAuthenticationInfo authenticationInfo = <span class="keyword">new</span> SimpleAuthenticationInfo(</span><br><span class="line">            userInfo, <span class="comment">//ç”¨æˆ·å</span></span><br><span class="line">            userInfo.getPassword(), <span class="comment">//å¯†ç </span></span><br><span class="line">            ByteSource.Util.bytes(userInfo.getCredentialsSalt()),<span class="comment">//salt=username+salt</span></span><br><span class="line">            getName()  <span class="comment">//realm name</span></span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">return</span> authenticationInfo;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é“¾æ¥æƒé™çš„å®ç°"><a href="#é“¾æ¥æƒé™çš„å®ç°" class="headerlink" title="é“¾æ¥æƒé™çš„å®ç°"></a>é“¾æ¥æƒé™çš„å®ç°</h3><p><code>Shiro</code>çš„æƒé™æˆæƒæ˜¯é€šè¿‡ç»§æ‰¿<code>AuthorizingRealm</code>æŠ½è±¡ç±»ï¼Œé‡è½½<code>doGetAuthorizationInfo()</code>ï¼›<strong>å½“è®¿é—®åˆ°é¡µé¢çš„æ—¶å€™ï¼Œé“¾æ¥é…ç½®äº†ç›¸åº”çš„æƒé™æˆ–è€… <code>Shiro</code> æ ‡ç­¾æ‰ä¼šæ‰§è¡Œæ­¤æ–¹æ³•å¦åˆ™ä¸ä¼šæ‰§è¡Œï¼Œæ‰€ä»¥å¦‚æœåªæ˜¯ç®€å•çš„èº«ä»½è®¤è¯æ²¡æœ‰æƒé™çš„æ§åˆ¶çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•å¯ä»¥ä¸è¿›è¡Œå®ç°ï¼Œç›´æ¥è¿”å› <code>null</code> å³å¯</strong>ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ä¸»è¦æ˜¯ä½¿ç”¨ç±»<code>SimpleAuthorizationInfo</code>è¿›è¡Œè§’è‰²çš„æ·»åŠ å’Œæƒé™çš„æ·»åŠ ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> AuthorizationInfo <span class="title">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principals)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    SimpleAuthorizationInfo authorizationInfo = <span class="keyword">new</span> SimpleAuthorizationInfo();</span><br><span class="line">    UserInfo userInfo  = (UserInfo)principals.getPrimaryPrincipal();</span><br><span class="line">    <span class="keyword">for</span>(SysRole role:userInfo.getRoleList())&#123;</span><br><span class="line">        authorizationInfo.addRole(role.getRole());</span><br><span class="line">        <span class="keyword">for</span>(SysPermission p:role.getPermissions())&#123;</span><br><span class="line">            authorizationInfo.addStringPermission(p.getPermission());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> authorizationInfo;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ç„¶ä¹Ÿå¯ä»¥æ·»åŠ  <code>set</code> é›†åˆï¼š<code>roles</code> æ˜¯ä»æ•°æ®åº“æŸ¥è¯¢çš„å½“å‰ç”¨æˆ·çš„è§’è‰²ï¼Œ<code>stringPermissions</code> æ˜¯ä»æ•°æ®åº“æŸ¥è¯¢çš„å½“å‰ç”¨æˆ·å¯¹åº”çš„æƒé™</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">authorizationInfo.setRoles(roles);</span><br><span class="line">authorizationInfo.setStringPermissions(stringPermissions);</span><br></pre></td></tr></table></figure><p>å¦‚æœåœ¨<code>shiro</code>é…ç½®æ–‡ä»¶ä¸­æ·»åŠ äº†<code>filterChainDefinitionMap.put(â€œ/addâ€, â€œperms[æƒé™æ·»åŠ ]â€);</code>å°±è¯´æ˜è®¿é—®<code>/add</code>è¿™ä¸ªé“¾æ¥å¿…é¡»è¦æœ‰â€œæƒé™æ·»åŠ â€è¿™ä¸ªæƒé™æ‰å¯ä»¥è®¿é—®ï¼›</p><p>å¦‚æœåœ¨<code>shiro</code>é…ç½®æ–‡ä»¶ä¸­æ·»åŠ äº†<code>filterChainDefinitionMap.put(â€œ/addâ€, â€œroles[100002]ï¼Œperms[æƒé™æ·»åŠ ]â€);</code>å°±è¯´æ˜è®¿é—®<code>/add</code>è¿™ä¸ªé“¾æ¥å¿…é¡»è¦æœ‰â€œæƒé™æ·»åŠ â€è¿™ä¸ªæƒé™å’Œå…·æœ‰â€œ<code>100002</code>â€è¿™ä¸ªè§’è‰²æ‰å¯ä»¥è®¿é—®</p><h3 id="ç™»å½•å®ç°"><a href="#ç™»å½•å®ç°" class="headerlink" title="ç™»å½•å®ç°"></a>ç™»å½•å®ç°</h3><p>ç™»å½•è¿‡ç¨‹å…¶å®åªæ˜¯å¤„ç†å¼‚å¸¸çš„ç›¸å…³ä¿¡æ¯ï¼Œå…·ä½“çš„ç™»å½•éªŒè¯äº¤ç»™ Shiro æ¥å¤„ç†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/login&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">login</span><span class="params">(HttpServletRequest request, Map&lt;String, Object&gt; map)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç™»å½•å¤±è´¥ä»requestä¸­è·å–shiroå¤„ç†çš„å¼‚å¸¸ä¿¡æ¯ã€‚</span></span><br><span class="line">    <span class="comment">// shiroLoginFailure:å°±æ˜¯shiroå¼‚å¸¸ç±»çš„å…¨ç±»å.</span></span><br><span class="line">    String exception = (String) request.getAttribute(<span class="string">&quot;shiroLoginFailure&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;exception=&quot;</span> + exception);</span><br><span class="line">    String msg = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (exception != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (UnknownAccountException.class.getName().equals(exception)) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;UnknownAccountException -- &gt; è´¦å·ä¸å­˜åœ¨ï¼š&quot;</span>);</span><br><span class="line">            msg = <span class="string">&quot;UnknownAccountException -- &gt; è´¦å·ä¸å­˜åœ¨ï¼š&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (IncorrectCredentialsException.class.getName().equals(exception)) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;IncorrectCredentialsException -- &gt; å¯†ç ä¸æ­£ç¡®ï¼š&quot;</span>);</span><br><span class="line">            msg = <span class="string">&quot;IncorrectCredentialsException -- &gt; å¯†ç ä¸æ­£ç¡®ï¼š&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;kaptchaValidateFailed&quot;</span>.equals(exception)) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;kaptchaValidateFailed -- &gt; éªŒè¯ç é”™è¯¯&quot;</span>);</span><br><span class="line">            msg = <span class="string">&quot;kaptchaValidateFailed -- &gt; éªŒè¯ç é”™è¯¯&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            msg = <span class="string">&quot;else &gt;&gt; &quot;</span>+exception;</span><br><span class="line">            System.out.println(<span class="string">&quot;else -- &gt;&quot;</span> + exception);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    map.put(<span class="string">&quot;msg&quot;</span>, msg);</span><br><span class="line">    <span class="comment">// æ­¤æ–¹æ³•ä¸å¤„ç†ç™»å½•æˆåŠŸ,ç”±shiroè¿›è¡Œå¤„ç†</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;/login&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>å‚è€ƒ:</p><p><a href="http://www.justdojava.com/2019/04/12/java-Shiro/">Shiroæ¡†æ¶è¯¦è§£ | Just Do Java</a></p><p><a href="http://www.liuhaihua.cn/archives/546461.html">å­¦ä¹ springBootï¼ˆ11ï¼‰shiroå®‰å…¨æ¡†æ¶ | Harries Blogâ„¢</a></p><p><a href="https://www.ibm.com/developerworks/cn/java/j-lo-shiro/">åœ¨ Web é¡¹ç›®ä¸­åº”ç”¨ Apache Shiro</a></p><p><a href="https://baike.baidu.com/item/RBAC/1328788">RBAC_ç™¾åº¦ç™¾ç§‘</a></p><p><a href="https://www.cnblogs.com/ityouknow/p/7089177.html">Spring Boot (åå››)ï¼š Spring Boot æ•´åˆ Shiro-ç™»å½•è®¤è¯å’Œæƒé™ç®¡ç† - çº¯æ´çš„å¾®ç¬‘ - åšå®¢å›­</a></p><p><a href="https://www.javazhiyin.com/42283.html">Shrioä½¿ç”¨Jwtè¾¾åˆ°å‰åç«¯åˆ†ç¦»-JavaçŸ¥éŸ³</a></p><hr>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RBAC </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> Shiro </tag>
            
            <tag> jwt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot+Shiro+Jwtå¡«å‘-2</title>
      <link href="/2019/09/02/SpringBoot+Shiro+Jwt%E5%A1%AB%E5%9D%91-2/"/>
      <url>/2019/09/02/SpringBoot+Shiro+Jwt%E5%A1%AB%E5%9D%91-2/</url>
      
        <content type="html"><![CDATA[<p>jwtä»‹ç»</p><span id="more"></span><p>è½¬è½½è‡ªï¼š<a href="https://blog.csdn.net/xlgen157387/article/details/79191900">ä¸€æ­¥æ­¥å¸¦ä½ äº†è§£å‰åç«¯åˆ†ç¦»åˆ©å™¨ä¹‹JWT - å¾åˆ˜æ ¹çš„åšå®¢ - CSDNåšå®¢</a></p><h1 id="RESTful-APIè®¤è¯æ–¹å¼"><a href="#RESTful-APIè®¤è¯æ–¹å¼" class="headerlink" title="RESTful APIè®¤è¯æ–¹å¼"></a>RESTful APIè®¤è¯æ–¹å¼</h1><p>ä¸€èˆ¬æ¥è®²ï¼Œå¯¹äº<code>RESTful API</code>éƒ½ä¼šæœ‰è®¤è¯(<code>Authentication</code>)å’Œæˆæƒ(<code>Authorization</code>)è¿‡ç¨‹ï¼Œä¿è¯<code>API</code>çš„å®‰å…¨æ€§ã€‚</p><p><em><code>Authentication</code>æŒ‡çš„æ˜¯ç¡®å®šè¿™ä¸ªç”¨æˆ·çš„èº«ä»½ï¼Œ<code>Authorization</code>æ˜¯ç¡®å®šè¯¥ç”¨æˆ·æ‹¥æœ‰ä»€ä¹ˆæ“ä½œæƒé™ã€‚</em></p><h2 id="Basic-Authentication"><a href="#Basic-Authentication" class="headerlink" title="Basic Authentication"></a>Basic Authentication</h2><p>è¿™ç§æ–¹å¼æ˜¯ç›´æ¥å°†ç”¨æˆ·åå’Œå¯†ç æ”¾åˆ°<code>Header</code>ä¸­ï¼Œä½¿ç”¨<code>Authorization: Basic Zm9vOmJhcg==</code>ï¼Œä½¿ç”¨æœ€ç®€å•ä½†æ˜¯æœ€ä¸å®‰å…¨ã€‚</p><h2 id="TOKENè®¤è¯"><a href="#TOKENè®¤è¯" class="headerlink" title="TOKENè®¤è¯"></a>TOKENè®¤è¯</h2><p>è¿™ç§æ–¹å¼ä¹Ÿæ˜¯å†HTTPå¤´ä¸­ï¼Œä½¿ç”¨<code>Authorization: Bearer &lt;token&gt;</code>ï¼Œä½¿ç”¨æœ€å¹¿æ³›çš„<code>TOKEN</code>æ˜¯<code>JWT</code>ï¼Œé€šè¿‡ç­¾åè¿‡çš„<code>TOKEN</code>ã€‚</p><h2 id="OAuth2-0"><a href="#OAuth2-0" class="headerlink" title="OAuth2.0"></a>OAuth2.0</h2><p>è¿™ç§æ–¹å¼å®‰å…¨ç­‰çº§æœ€é«˜ï¼Œä½†æ˜¯ä¹Ÿæ˜¯æœ€å¤æ‚çš„ã€‚å¦‚æœä¸æ˜¯å¤§å‹APIå¹³å°æˆ–è€…éœ€è¦ç»™ç¬¬ä¸‰æ–¹APPä½¿ç”¨çš„ï¼Œæ²¡å¿…è¦æ•´è¿™ä¹ˆå¤æ‚ã€‚</p><p>ä¸€èˆ¬é¡¹ç›®ä¸­çš„<code>RESTful API</code>ä½¿ç”¨<code>JWT</code>æ¥åšè®¤è¯å°±è¶³å¤Ÿäº†</p><p>ä¸‹é¢æ˜¯<code>JWT</code>ä»‹ç»</p><h1 id="HTTPçš„æ— çŠ¶æ€æ€§"><a href="#HTTPçš„æ— çŠ¶æ€æ€§" class="headerlink" title="HTTPçš„æ— çŠ¶æ€æ€§"></a>HTTPçš„æ— çŠ¶æ€æ€§</h1><p><code>HTTP</code> æ˜¯æ— çŠ¶æ€åè®®ï¼Œå®ƒä¸å¯¹ä¹‹å‰å‘é€è¿‡çš„è¯·æ±‚å’Œå“åº”çš„çŠ¶æ€è¿›è¡Œç®¡ç†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>æ— æ³•æ ¹æ®ä¹‹å‰çš„çŠ¶æ€è¿›è¡Œæœ¬æ¬¡çš„è¯·æ±‚å¤„ç†ã€‚å‡è®¾è¦æ±‚ç™»å½•è®¤è¯çš„ <code>Web</code> é¡µé¢æœ¬èº«æ— æ³•è¿›è¡ŒçŠ¶æ€çš„ç®¡ç†ï¼ˆä¸è®°å½•å·²ç™»å½•çš„çŠ¶æ€ï¼‰ï¼Œé‚£ä¹ˆæ¯æ¬¡è·³è½¬æ–°é¡µé¢ä¸æ˜¯è¦å†æ¬¡ç™»å½•ï¼Œå°±æ˜¯è¦åœ¨æ¯æ¬¡è¯·æ±‚æŠ¥æ–‡ä¸­é™„åŠ å‚æ•°æ¥ç®¡ç†ç™»å½•çŠ¶æ€ã€‚</strong></p><p>ä¸å¯å¦è®¤ï¼Œæ— çŠ¶æ€åè®®å½“ç„¶ä¹Ÿæœ‰å®ƒçš„ä¼˜ç‚¹ã€‚ç”±äºä¸å¿…ä¿å­˜çŠ¶æ€ï¼Œè‡ªç„¶å¯å‡å°‘æœåŠ¡å™¨çš„ <code>CPU</code> åŠå†…å­˜èµ„æºçš„æ¶ˆè€—ã€‚ä»å¦ä¸€ä¾§é¢æ¥è¯´ï¼Œä¹Ÿæ­£æ˜¯å› ä¸º <code>HTTP</code> åè®®æœ¬èº«æ˜¯éå¸¸ç®€å•çš„ï¼Œæ‰€ä»¥æ‰ä¼šè¢«åº”ç”¨åœ¨å„ç§åœºæ™¯é‡Œã€‚</p><h1 id="Cookie-æŠ€æœ¯çš„å¼•å…¥"><a href="#Cookie-æŠ€æœ¯çš„å¼•å…¥" class="headerlink" title="Cookie æŠ€æœ¯çš„å¼•å…¥"></a>Cookie æŠ€æœ¯çš„å¼•å…¥</h1><p>å¦‚æœè®©æœåŠ¡å™¨ç®¡ç†å…¨éƒ¨å®¢æˆ·ç«¯çŠ¶æ€åˆ™ä¼šæˆä¸ºè´Ÿæ‹…ï¼Œä¿ç•™æ— çŠ¶æ€åè®®è¿™ä¸ªç‰¹å¾çš„åŒæ—¶åˆè¦è§£å†³ç±»ä¼¼çš„çŸ›ç›¾é—®é¢˜ï¼Œäºæ˜¯å¼•å…¥äº†<code>Cookie</code>æŠ€æœ¯ã€‚<strong><code>Cookie</code>æŠ€æœ¯é€šè¿‡åœ¨è¯·æ±‚å’Œå“åº”æŠ¥æ–‡ä¸­å†™å…¥<code>Cookie</code>ä¿¡æ¯æ¥æ§åˆ¶å®¢æˆ·ç«¯çš„çŠ¶æ€ã€‚</strong></p><p><code>Cookie</code>ä¼šæ ¹æ®ä»æœåŠ¡å™¨ç«¯å‘é€çš„å“åº”æŠ¥æ–‡å†…çš„ä¸€ä¸ªå«åš<code>Set-Cookie</code>çš„é¦–éƒ¨å­—æ®µä¿¡æ¯ï¼Œé€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜ <code>Cookie</code>ã€‚<strong>å½“ä¸‹æ¬¡å®¢æˆ·ç«¯å†å¾€è¯¥æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨åœ¨è¯·æ±‚æŠ¥æ–‡ä¸­åŠ å…¥<code>Cookie</code>å€¼åå‘é€å‡ºå»ã€‚</strong></p><ul><li>æ²¡æœ‰ <code>Cookie</code> ä¿¡æ¯çŠ¶æ€ä¸‹çš„è¯·æ±‚</li></ul><p><img src="/2019/09/02/SpringBoot+Shiro+Jwt%E5%A1%AB%E5%9D%91-2/1.png" alt></p><ul><li>ç¬¬ 2 æ¬¡ä»¥åï¼ˆå­˜æœ‰ <code>Cookie</code> ä¿¡æ¯çŠ¶æ€ï¼‰ çš„è¯·æ±‚</li></ul><p><img src="/2019/09/02/SpringBoot+Shiro+Jwt%E5%A1%AB%E5%9D%91-2/2.png" alt></p><ul><li>Cookie ä¼ è¾“è¿‡ç¨‹</li></ul><p><img src="/2019/09/02/SpringBoot+Shiro+Jwt%E5%A1%AB%E5%9D%91-2/3.png" alt></p><p>æœåŠ¡å™¨ç«¯å‘ç°å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„ Cookie åï¼Œ ä¼šå»æ£€æŸ¥ç©¶ç«Ÿæ˜¯ä»å“ªä¸€ä¸ªå®¢æˆ·ç«¯å‘æ¥çš„è¿æ¥è¯·æ±‚ï¼Œ ç„¶å<strong>å¯¹æ¯”æœåŠ¡å™¨ä¸Šçš„è®°å½•</strong>ï¼Œ æœ€åå¾—åˆ°ä¹‹å‰çš„çŠ¶æ€ä¿¡æ¯ã€‚</p><h1 id="åŸºäºè¡¨å•çš„è®¤è¯"><a href="#åŸºäºè¡¨å•çš„è®¤è¯" class="headerlink" title="åŸºäºè¡¨å•çš„è®¤è¯"></a>åŸºäºè¡¨å•çš„è®¤è¯</h1><p>ç›®å‰ç”¨æˆ·çš„è®¤è¯å¤šåŠæ˜¯åŸºäºè¡¨å•çš„è®¤è¯ï¼ŒåŸºäºè¡¨å•çš„è®¤è¯ä¸€èˆ¬ä¼šä½¿ç”¨ <code>Cookie</code> æ¥ç®¡ç†<code>Session</code>ï¼ˆ<code>Session</code>ä¼šè¯ï¼Œ<code>Session</code>ä»£è¡¨ç€æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¸€æ¬¡ä¼šè¯çš„è¿‡ç¨‹ï¼Œç›´åˆ°<code>Session</code>å¤±æ•ˆï¼ˆæœåŠ¡ç«¯å…³é—­ï¼‰æˆ–è€…å®¢æˆ·ç«¯å…³é—­æ—¶ç»“æŸ<strong>ï¼‰ã€‚</strong>åŸºäºè¡¨å•è®¤è¯æœ¬èº«æ˜¯é€šè¿‡æœåŠ¡å™¨ç«¯çš„ <code>Web</code>åº”ç”¨ï¼Œå°†å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„ç”¨æˆ·IDå’Œå¯†ç ä¸ä¹‹å‰ç™»å½•è¿‡çš„ä¿¡æ¯åšåŒ¹é…æ¥è¿›è¡Œè®¤è¯çš„ã€‚**</p><p>ä½†é‰´äº HTTP æ˜¯æ— çŠ¶æ€åè®®ï¼Œ ä¹‹å‰å·²è®¤è¯æˆåŠŸçš„ç”¨æˆ·çŠ¶æ€æ— æ³•é€šè¿‡åè®®å±‚é¢ä¿å­˜ä¸‹æ¥ã€‚ å³æ— æ³•å®ç°çŠ¶æ€ç®¡ç†ï¼Œ å› æ­¤å³ä½¿å½“è¯¥ç”¨æˆ·ä¸‹ä¸€æ¬¡ç»§ç»­è®¿é—®ï¼Œä¹Ÿæ— æ³•åŒºåˆ†ä»–ä¸å…¶ä»–çš„ç”¨æˆ·ã€‚<strong>äºæ˜¯æˆ‘ä»¬ä¼šä½¿ç”¨<code>Cookie</code>æ¥ç®¡ç† <code>Session</code>ï¼Œä»¥å¼¥è¡¥ <code>HTTP</code>åè®®ä¸­ä¸å­˜åœ¨çš„çŠ¶æ€ç®¡ç†åŠŸèƒ½ã€‚</strong></p><p><img src="/2019/09/02/SpringBoot+Shiro+Jwt%E5%A1%AB%E5%9D%91-2/4.png" alt></p><p>ç®€å•çš„æ¥è¯´å°±æ˜¯ï¼Œ<strong>ç”¨æˆ·åœ¨ç™»å½•çš„æ—¶å€™ï¼Œä¼šåœ¨<code>Web</code>æœåŠ¡å™¨ä¸­å¼€è¾Ÿä¸€æ®µå†…å­˜ç©ºé—´<code>Session</code>ç”¨äºä¿å­˜ç”¨æˆ·çš„è®¤è¯ä¿¡æ¯å’Œå…¶ä»–ä¿¡æ¯ï¼Œç”¨æˆ·ç™»å½•æˆåŠŸä¹‹åä¼šé€šè¿‡<code>Set-Cookie</code>çš„é¦–éƒ¨å­—æ®µä¿¡æ¯ï¼Œé€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜<code>Cookie</code>ï¼Œè€Œè¿™<code>Cookie</code>ä¿å­˜çš„å°±æ˜¯æœåŠ¡å™¨ç«¯<code>Session</code>çš„<code>ID</code></strong>ï¼Œä¸‹æ¬¡è¯·æ±‚çš„æ—¶å€™å®¢æˆ·ç«¯ä¼šå¸¦ä¸Šè¯¥<code>Cookie</code>å‘æœåŠ¡å™¨ç«¯å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨ç«¯è¿›è¡Œæ ¡éªŒï¼Œ<strong>å¦‚æœ<code>Session</code>ä¸­ä¿å­˜çš„æœ‰è¯¥<code>ID</code>çš„<code>Session</code>å°±è¡¨ç¤ºç”¨æˆ·è®¤è¯é€šè¿‡ï¼Œå¦åˆ™å¤±è´¥ï¼</strong><br><img src="/2019/09/02/SpringBoot+Shiro+Jwt%E5%A1%AB%E5%9D%91-2/5.png" alt></p><h1 id="Sessionå­˜å‚¨ä½ç½®ä»¥åŠé›†ç¾¤æƒ…å†µä¸‹çš„é—®é¢˜"><a href="#Sessionå­˜å‚¨ä½ç½®ä»¥åŠé›†ç¾¤æƒ…å†µä¸‹çš„é—®é¢˜" class="headerlink" title="Sessionå­˜å‚¨ä½ç½®ä»¥åŠé›†ç¾¤æƒ…å†µä¸‹çš„é—®é¢˜"></a>Sessionå­˜å‚¨ä½ç½®ä»¥åŠé›†ç¾¤æƒ…å†µä¸‹çš„é—®é¢˜</h1><p><code>Session</code> æ˜¯å­˜å‚¨åœ¨<code>Web</code>æœåŠ¡å™¨ï¼ˆä¾‹å¦‚ï¼š<code>Tomcat</code>ï¼‰ä¸­çš„ï¼Œå¹¶é’ˆå¯¹æ¯ä¸ªå®¢æˆ·ç«¯ï¼ˆå®¢æˆ·ï¼‰ï¼Œé€šè¿‡<code>SessionID</code>æ¥åŒºåˆ«ä¸åŒç”¨æˆ·çš„ã€‚<strong><code>Session</code>æ˜¯ä»¥<code>Cookie</code>æŠ€æœ¯æˆ–<code>URL</code>é‡å†™å®ç°ï¼Œé»˜è®¤ä»¥<code>Cookie</code>æŠ€æœ¯å®ç°ï¼ŒæœåŠ¡ç«¯ä¼šç»™è¿™æ¬¡ä¼šè¯åˆ›é€ ä¸€ä¸ª<code>JSESSIONID</code>çš„<code>Cookie</code>å€¼ã€‚</strong></p><p>ä½†æ˜¯ä¸€ä¸ªæ˜¾è‘—çš„é—®é¢˜å°±æ˜¯ï¼Œ<strong>åœ¨é›†ç¾¤æ¨¡å¼ä¸‹å¦‚æœé€šè¿‡<code>Nginx</code>è´Ÿè½½å‡è¡¡çš„æ—¶å€™ï¼Œå¦‚æœæœ‰ä¸€ä¸ªç”¨æˆ·ç™»å½•çš„æ—¶å€™è¯·æ±‚è¢«åˆ†é…åˆ°æœåŠ¡å™¨Aä¸Šï¼Œç™»å½•æˆåŠŸåè®¾ç½®çš„<code>Session</code>å°±ä¼šå­˜æ”¾åœ¨æœåŠ¡å™¨Aä¸Šäº†ï¼Œä½†æ˜¯åœ¨æœåŠ¡å™¨Bä¸Šå´æ²¡æœ‰è¯¥ç”¨æˆ·çš„<code>Session</code>æ•°æ®ï¼Œå½“ç”¨æˆ·å†æ¬¡å‘èµ·ä¸€ä¸ªè¯·æ±‚çš„æ—¶å€™ï¼Œæ­¤æ—¶è¯·æ±‚å¦‚æœè¢«åˆ†é…åˆ°æœåŠ¡å™¨Bä¸Šï¼Œåˆ™å°±ä¸ä¼šæŸ¥è¯¢åˆ°è¯¥ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ï¼Œå°±ä¼šå‡ºç°ç™»å½•å¤±è´¥çš„æƒ…å†µï¼</strong></p><p>ä¸€ç§å¯ä»¥æƒ³åˆ°çš„æ–¹å¼å°±æ˜¯å°†å¤šä¸ªWebæœåŠ¡å™¨ä¸Šå­˜å‚¨çš„<code>Session</code>ç»Ÿä¸€å­˜å‚¨åˆ°æŸä¸€å­˜å‚¨ä»‹è´¨ä¸­ï¼Œä¿è¯è¿›é›†ç¾¤ä¸­çš„æ¯ä¸€å°æœºå™¨éƒ½å¯ä»¥çœ‹åˆ°æ‰€æœ‰ç›¸åŒ<code>Session</code>æ•°æ®ï¼Œè¿™é‡Œçš„åŒæ­¥ä½“ç°åœ¨æ‰€æœ‰çš„<code>Session</code>å­˜å‚¨åœ¨åŒä¸€çš„å­˜å‚¨ä»‹è´¨é‡Œè¾¹ã€‚</p><p>å¹¸è¿çš„æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„<code>Tomcat</code>å®¹å™¨å·²ç»ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæ¥å£ï¼Œå¯ä»¥è®©æˆ‘ä»¬å®ç°å°†<code>Session</code>å­˜å‚¨åˆ°é™¤å½“å‰æœåŠ¡å™¨ä¹‹å¤–çš„å…¶ä»–å­˜å‚¨ä»‹è´¨ä¸Šï¼Œä¾‹å¦‚<code>Redis</code>ç­‰ã€‚</p><p><img src="/2019/09/02/SpringBoot+Shiro+Jwt%E5%A1%AB%E5%9D%91-2/6.png" alt></p><h1 id="å°ç»“ä¸éœ€æ±‚ç—›ç‚¹"><a href="#å°ç»“ä¸éœ€æ±‚ç—›ç‚¹" class="headerlink" title="å°ç»“ä¸éœ€æ±‚ç—›ç‚¹"></a>å°ç»“ä¸éœ€æ±‚ç—›ç‚¹</h1><p><code>Session</code>å’Œ<code>Cookie</code>çš„ç›®çš„ç›¸åŒï¼Œéƒ½æ˜¯ä¸ºäº†å…‹æœ<code>HTTP</code>åè®®æ— çŠ¶æ€çš„ç¼ºé™·ï¼Œä½†å®Œæˆçš„æ–¹æ³•ä¸åŒã€‚<code>Session</code>é€šè¿‡<code>Cookie</code>ï¼Œåœ¨å®¢æˆ·ç«¯ä¿å­˜<code>SessionID</code>ï¼Œè€Œå°†ç”¨æˆ·çš„å…¶ä»–ä¼šè¯æ¶ˆæ¯ä¿å­˜åœ¨æœåŠ¡ç«¯çš„<code>Session</code>å¯¹è±¡ä¸­ï¼Œä¸æ­¤ç›¸å¯¹çš„ï¼Œ<code>Cookie</code>éœ€è¦å°†æ‰€æœ‰ä¿¡æ¯éƒ½ä¿å­˜åœ¨å®¢æˆ·ç«¯ã€‚å› æ­¤<code>Cookie</code>å­˜åœ¨ç€ä¸€å®šçš„å®‰å…¨éšæ‚£ï¼Œä¾‹å¦‚æœ¬åœ°<code>Cookie</code>ä¸­ä¿å­˜çš„ç”¨æˆ·åå¯†ç è¢«ç ´è¯‘ï¼Œæˆ–<code>Cookie</code>è¢«å…¶ä»–ç½‘ç«™æ”¶é›†ã€‚</p><p>ä¸Šè¿°è¿‡ç¨‹æˆ‘ä»¬ç®€å•çš„æè¿°äº†<code>Session</code>çš„æ¼”è¿›è¿‡ç¨‹è¿˜æœ‰ä½¿ç”¨åŒæ­¥çš„æ–¹å¼è§£å†³<code>Session</code>åœ¨é›†ç¾¤çš„æ—¶å€™å‡ºç°çš„é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬æ„è¯†åˆ°äº†ä½¿ç”¨<code>Spring Session</code>çš„æ–¹å¼æ¥å®ç°<code>Session</code>çš„åŒæ­¥æ˜¯ä¸€ä»¶ç›¸å¯¹æ¯”è¾ƒéº»çƒ¦çš„äº‹æƒ…ï¼Œæˆ‘ä»¬è™½ç„¶ä½¿ç”¨<code>Redis</code>æ¥è¿›è¡ŒåŒæ­¥ï¼Œä½†æ˜¯<code>Redis</code>å¹¶ä¸æ˜¯100%å¯é çš„ï¼Œ<strong>æˆ‘ä»¬éœ€è¦å¯¹<code>Redis</code>æ­å»ºé›†ç¾¤ã€è¿›è¡Œä¸»ä»åŒæ­¥å¤åˆ¶ã€è¿›è¡ŒæŒä¹…åŒ–ç­‰ï¼Œæ˜¾ç„¶è¿™æ˜¯ä¸€ä»¶å¾ˆå¤æ‚çš„äº‹æƒ…ï¼Œå› æ­¤æœ‰æ²¡æœ‰ä¸€ç§å°è€Œè½»ä¾¿çš„æ–¹å¼æ¥å®ç°æˆ‘ä»¬çš„è¿™ç§è®¤è¯éœ€æ±‚ï¼é‚£å°±æ˜¯<code>JWT</code>äº†ï¼</strong></p><p><em>é™¤äº†ä¸Šè¿°æˆ‘ä»¬é‡åˆ°çš„é—®é¢˜ä¹‹å¤–ï¼Œåœ¨ç›®å‰å‰åç«¯åˆ†ç¦»çš„å¤§ç¯å¢ƒä¸‹ç»å¸¸ä¼šé‡åˆ°éœ€è¦æ ¹æ®ç”¨æˆ·æ¥åˆ†é…æƒé™å’Œæ˜¾ç¤ºç›¸å¯¹åº”ä¿¡æ¯çš„é—®é¢˜ï¼Œè™½ç„¶ä¼ ç»Ÿçš„<code>Cookie</code>å’Œ<code>Session</code>æœºåˆ¶å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†å°±é€šç”¨æ€§è€Œè¨€ï¼Œ<code>JWTï¼ˆJSON Web Tokensï¼‰</code>ç›¸å¯¹æ¥è¯´æ›´å¥½ã€‚</em></p><h1 id="JWTæ˜¯ä»€ä¹ˆ"><a href="#JWTæ˜¯ä»€ä¹ˆ" class="headerlink" title="JWTæ˜¯ä»€ä¹ˆ"></a>JWTæ˜¯ä»€ä¹ˆ</h1><p><code>Json web tokens (JWT)</code>ï¼Œæ˜¯ä¸ºäº†åœ¨ç½‘ç»œåº”ç”¨ç¯å¢ƒé—´ä¼ é€’å£°æ˜è€Œæ‰§è¡Œçš„ä¸€ç§åŸºäº<code>JSON</code>çš„å¼€æ”¾æ ‡å‡†(<code>RFC 7519</code>)ã€‚è¯¥æ ‡å‡†è¢«è®¾è®¡ä¸ºç´§å‡‘ä¸”å®‰å…¨çš„ï¼Œä¸€èˆ¬è¢«ç”¨æ¥åœ¨èº«ä»½æä¾›è€…å’ŒæœåŠ¡æä¾›è€…é—´ä¼ é€’è¢«è®¤è¯çš„ç”¨æˆ·èº«ä»½ä¿¡æ¯ï¼Œä»¥ä¾¿äºä»èµ„æºæœåŠ¡å™¨è·å–èµ„æºï¼Œä¹Ÿå¯ä»¥å¢åŠ ä¸€äº›é¢å¤–çš„å…¶å®ƒä¸šåŠ¡é€»è¾‘æ‰€å¿…é¡»çš„å£°æ˜ä¿¡æ¯ã€‚å½“ç„¶è¯¥æ ‡å‡†ä¹Ÿå¯ç›´æ¥è¢«ç”¨äºè®¤è¯ï¼Œä¹Ÿå¯è¢«åŠ å¯†ã€‚</p><h2 id="JWTçš„å‡ ä¸ªç‰¹ç‚¹"><a href="#JWTçš„å‡ ä¸ªç‰¹ç‚¹" class="headerlink" title="JWTçš„å‡ ä¸ªç‰¹ç‚¹"></a><strong>JWTçš„å‡ ä¸ªç‰¹ç‚¹</strong></h2><ol><li><p>ç”±äºå®ƒä»¬çš„å°ºå¯¸è¾ƒå°ï¼Œ<code>JWT</code>å¯ä»¥é€šè¿‡<code>URL</code>ï¼Œ<code>POST</code>å‚æ•°æˆ–<code>HTTP</code>å¤´éƒ¨å‘é€ã€‚ å¦å¤–ï¼Œå°ºå¯¸è¶Šå°æ„å‘³ç€ä¼ è¾“é€Ÿåº¦è¶Šå¿«ã€‚</p></li><li><p>æœ‰æ•ˆè½½è·åŒ…å«æœ‰å…³ç”¨æˆ·çš„æ‰€æœ‰å¿…éœ€ä¿¡æ¯ï¼Œé¿å…äº†å¤šæ¬¡æŸ¥è¯¢æ•°æ®åº“çš„éœ€è¦ã€‚</p></li></ol><h2 id="JWTçš„ä½¿ç”¨åœºæ™¯"><a href="#JWTçš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="JWTçš„ä½¿ç”¨åœºæ™¯"></a><strong>JWTçš„ä½¿ç”¨åœºæ™¯</strong></h2><h3 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h3><p>è¿™æ˜¯ä½¿ç”¨<code>JWT</code>æœ€å¸¸è§çš„æƒ…å†µã€‚ <strong>ä¸€æ—¦ç”¨æˆ·ç™»å½•ï¼Œæ¯ä¸ªåç»­è¯·æ±‚å°†åŒ…æ‹¬<code>JWT</code>ã€‚å®ƒå°†å…è®¸ç”¨æˆ·è®¿é—®è¯¥ä»¤ç‰Œå…è®¸çš„è·¯ç”±ï¼ŒæœåŠ¡å’Œèµ„æºã€‚ å•ç‚¹ç™»å½•æ˜¯å½“ä»Šå¹¿æ³›ä½¿ç”¨<code>JWT</code>çš„ä¸€é¡¹åŠŸèƒ½ï¼Œå› ä¸ºå®ƒçš„å¼€é”€å¾ˆå°ï¼Œè€Œä¸”èƒ½å¤Ÿè½»æ¾åœ°è·¨ä¸åŒåŸŸä½¿ç”¨ã€‚</strong></p><h3 id="ä¿¡æ¯äº¤æ¢"><a href="#ä¿¡æ¯äº¤æ¢" class="headerlink" title="ä¿¡æ¯äº¤æ¢"></a>ä¿¡æ¯äº¤æ¢</h3><p><code>JWT</code>æ˜¯åœ¨å„æ–¹ä¹‹é—´å®‰å…¨ä¼ è¾“ä¿¡æ¯çš„å¥½æ–¹æ³•ï¼Œ å› ä¸º<code>JWT</code>å¯ä»¥è¢«ç­¾åï¼ˆä¾‹å¦‚ä½¿ç”¨å…¬é’¥/ç§é’¥å¯¹è¿›è¡Œç­¾åï¼‰ã€‚æ‰€ä»¥ä½ å¯ä»¥ç¡®å®šå‘ä»¶äººæ˜¯ä»–ä»¬è¯´çš„é‚£ä¸ªäººã€‚ æ­¤å¤–ï¼Œç”±äºä½¿ç”¨å¤´éƒ¨ï¼ˆ<code>header</code>ï¼‰å’Œæœ‰æ•ˆè½½è·ï¼ˆ<code>payload</code>ï¼‰è®¡ç®—ç­¾åï¼Œå› æ­¤æ‚¨è¿˜å¯ä»¥éªŒè¯å†…å®¹æ˜¯å¦æœªè¢«ç¯¡æ”¹ã€‚</p><h1 id="JWTçš„ç»“æ„"><a href="#JWTçš„ç»“æ„" class="headerlink" title="JWTçš„ç»“æ„"></a>JWTçš„ç»“æ„</h1><h2 id="æ€»ä½“ç»“æ„"><a href="#æ€»ä½“ç»“æ„" class="headerlink" title="æ€»ä½“ç»“æ„"></a>æ€»ä½“ç»“æ„</h2><p><strong>JWTåŒ…å«ä¸‰ä¸ªç”±ç‚¹ï¼ˆ.ï¼‰åˆ†éš”çš„éƒ¨åˆ†</strong>ï¼Œå®ƒä»¬æ˜¯ï¼š</p><ol><li>å¤´éƒ¨ï¼ˆ<code>header</code>ï¼‰</li><li>æœ‰æ•ˆè´Ÿè½½ï¼ˆ<code>payload</code>ï¼‰</li><li>ç­¾åï¼ˆ<code>signature</code>ï¼‰</li></ol><p>å› æ­¤ï¼Œ<code>JWT</code>é€šå¸¸çœ‹èµ·æ¥å¦‚ä¸‹æ‰€ç¤º:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xxxxx.yyyyy.zzzzz</span><br></pre></td></tr></table></figure><h2 id="å¤´éƒ¨ï¼ˆheaderï¼‰"><a href="#å¤´éƒ¨ï¼ˆheaderï¼‰" class="headerlink" title="å¤´éƒ¨ï¼ˆheaderï¼‰"></a>å¤´éƒ¨ï¼ˆheaderï¼‰</h2><p>å¤´éƒ¨ï¼ˆ<code>heade</code>ï¼‰é€šå¸¸ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šä»¤ç‰Œçš„ç±»å‹ï¼ˆå³<code>JWT</code>ï¼‰å’Œæ­£åœ¨ä½¿ç”¨çš„æ•£åˆ—ç®—æ³•ï¼ˆå¦‚<code>HMAC SHA256</code>æˆ–<code>RSA</code>ï¼‰ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;alg&quot;</span>: <span class="string">&quot;HS256&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;typ&quot;</span>: <span class="string">&quot;JWT&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œå°†è¿™ä¸ª<code>JSON</code>ç”¨<code>Base64</code>ç¼–ç ï¼Œå½¢æˆ<code>JWT</code>çš„ç¬¬ä¸€éƒ¨åˆ†ã€‚</p><blockquote><p><strong>Base64</strong>æ˜¯ä¸€ç§åŸºäº64ä¸ªå¯æ‰“å°å­—ç¬¦æ¥è¡¨ç¤º<a href="https://zh.wikipedia.org/wiki/äºŒè¿›åˆ¶">äºŒè¿›åˆ¶æ•°æ®</a>çš„è¡¨ç¤ºæ–¹æ³•</p><p>Base64å¸¸ç”¨äºåœ¨é€šå¸¸å¤„ç†æ–‡æœ¬<a href="https://zh.wikipedia.org/wiki/æ•°æ®">æ•°æ®</a>çš„åœºåˆï¼Œè¡¨ç¤ºã€ä¼ è¾“ã€å­˜å‚¨ä¸€äº›äºŒè¿›åˆ¶æ•°æ®ï¼ŒåŒ…æ‹¬<a href="https://zh.wikipedia.org/wiki/MIME">MIME</a>çš„<a href="https://zh.wikipedia.org/wiki/ç”µå­é‚®ä»¶">ç”µå­é‚®ä»¶</a>åŠ<a href="https://zh.wikipedia.org/wiki/XML">XML</a>çš„ä¸€äº›å¤æ‚æ•°æ®ã€‚</p></blockquote><h2 id="æœ‰æ•ˆè´Ÿè½½ï¼ˆpayloadï¼‰"><a href="#æœ‰æ•ˆè´Ÿè½½ï¼ˆpayloadï¼‰" class="headerlink" title="æœ‰æ•ˆè´Ÿè½½ï¼ˆpayloadï¼‰"></a>æœ‰æ•ˆè´Ÿè½½ï¼ˆpayloadï¼‰</h2><p>ä»¤ç‰Œçš„ç¬¬äºŒéƒ¨åˆ†æ˜¯åŒ…å«å£°æ˜çš„æœ‰æ•ˆè½½è·ã€‚ å£°æ˜æ˜¯å…³äºå®ä½“ï¼ˆé€šå¸¸æ˜¯ç”¨æˆ·ï¼‰å’Œé™„åŠ å…ƒæ•°æ®çš„å£°æ˜ã€‚ æœ‰ä¸‰ç§ç±»å‹çš„å£°æ˜ï¼š</p><ol><li>æ ‡å‡†ä¸­æ³¨å†Œçš„å£°æ˜ï¼›</li><li>å…¬å¼€å£°æ˜ï¼›</li><li>ç§äººå£°æ˜ï¼›</li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;sub&quot;</span>: <span class="string">&quot;123&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;John&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;admin&quot;</span>: <span class="string">&quot;true&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ ‡å‡†ä¸­æ³¨å†Œçš„å£°æ˜"><a href="#æ ‡å‡†ä¸­æ³¨å†Œçš„å£°æ˜" class="headerlink" title="æ ‡å‡†ä¸­æ³¨å†Œçš„å£°æ˜"></a>æ ‡å‡†ä¸­æ³¨å†Œçš„å£°æ˜</h3><p>æ ‡å‡†ä¸­æ³¨å†Œçš„å£°æ˜ï¼šè¿™æ˜¯ä¸€ç»„é¢„å…ˆå®šä¹‰çš„å£°æ˜ï¼Œè¿™äº›å£°æ˜ä¸æ˜¯å¼ºåˆ¶æ€§çš„ï¼Œä½†å»ºè®®æä¾›ä¸€å¥—æœ‰ç”¨çš„ï¼Œå¯äº’æ“ä½œçš„å£°æ˜ã€‚ å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">iss: jwtç­¾å‘è€…</span><br><span class="line"></span><br><span class="line">sub: jwtæ‰€é¢å‘çš„ç”¨æˆ·</span><br><span class="line"></span><br><span class="line">aud: æ¥æ”¶jwtçš„ä¸€æ–¹</span><br><span class="line"></span><br><span class="line">exp: jwtçš„è¿‡æœŸæ—¶é—´ï¼Œè¿™ä¸ªè¿‡æœŸæ—¶é—´å¿…é¡»è¦å¤§äºç­¾å‘æ—¶é—´</span><br><span class="line"></span><br><span class="line">nbf: å®šä¹‰åœ¨ä»€ä¹ˆæ—¶é—´ä¹‹å‰ï¼Œè¯¥jwtéƒ½æ˜¯ä¸å¯ç”¨çš„.</span><br><span class="line"></span><br><span class="line">iat: jwtçš„ç­¾å‘æ—¶é—´</span><br><span class="line"></span><br><span class="line">jti: jwtçš„å”¯ä¸€èº«ä»½æ ‡è¯†ï¼Œä¸»è¦ç”¨æ¥ä½œä¸ºä¸€æ¬¡æ€§token,ä»è€Œå›é¿é‡æ”¾æ”»å‡»ã€‚</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šå£°æ˜åç§°åªæœ‰ä¸‰ä¸ªå­—ç¬¦é•¿ï¼Œå› ä¸º<code>JWT</code>æ˜¯ç´§å‡‘çš„ã€‚</p><h3 id="å…¬å¼€å£°æ˜"><a href="#å…¬å¼€å£°æ˜" class="headerlink" title="å…¬å¼€å£°æ˜"></a>å…¬å¼€å£°æ˜</h3><p>å…¬å…±çš„å£°æ˜å¯ä»¥æ·»åŠ ä»»ä½•çš„ä¿¡æ¯ï¼Œä¸€èˆ¬æ·»åŠ ç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯æˆ–å…¶ä»–ä¸šåŠ¡éœ€è¦çš„å¿…è¦ä¿¡æ¯ã€‚ä½†ä¸å»ºè®®æ·»åŠ æ•æ„Ÿä¿¡æ¯ï¼Œå› ä¸ºè¯¥éƒ¨åˆ†åœ¨å®¢æˆ·ç«¯å¯è§£å¯†ã€‚</p><h3 id="ç§äººå£°æ˜"><a href="#ç§äººå£°æ˜" class="headerlink" title="ç§äººå£°æ˜"></a>ç§äººå£°æ˜</h3><p>ç§æœ‰å£°æ˜æ˜¯æä¾›è€…å’Œæ¶ˆè´¹è€…æ‰€å…±åŒå®šä¹‰çš„å£°æ˜ï¼Œä¸€èˆ¬ä¸å»ºè®®å­˜æ”¾æ•æ„Ÿä¿¡æ¯ï¼Œå› ä¸º<code>base64</code>æ˜¯å¯¹ç§°è§£å¯†çš„ï¼Œæ„å‘³ç€è¯¥éƒ¨åˆ†ä¿¡æ¯å¯ä»¥å½’ç±»ä¸ºæ˜æ–‡ä¿¡æ¯ã€‚</p><h2 id="ç­¾åï¼ˆsignatureï¼‰"><a href="#ç­¾åï¼ˆsignatureï¼‰" class="headerlink" title="ç­¾åï¼ˆsignatureï¼‰"></a>ç­¾åï¼ˆsignatureï¼‰</h2><p>è¦åˆ›å»ºç­¾åéƒ¨åˆ†ï¼Œæ‚¨å¿…é¡»é‡‡ç”¨å¤´éƒ¨ï¼ˆ<code>header</code>ï¼‰ï¼Œæœ‰æ•ˆè½½è·ï¼ˆ<code>payload</code>ï¼‰ï¼Œå¯†é’¥ï¼ˆ<code>secret</code>ï¼‰ï¼Œä»¥åŠå¤´éƒ¨ä¸­æŒ‡å®šçš„ç®—æ³•ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨<code>HMAC SHA256</code>ç®—æ³•ï¼Œç­¾åå°†æŒ‰ä»¥ä¸‹æ–¹å¼åˆ›å»ºï¼š</p><p><img src="/2019/09/02/SpringBoot+Shiro+Jwt%E5%A1%AB%E5%9D%91-2/7.png" alt></p><p><strong>ç­¾åé€šå¸¸ç”¨äºéªŒè¯<code>JWT</code>çš„å‘ä»¶äººæ˜¯è°ï¼Œå¹¶JWTåœ¨ä¼ é€çš„è¿‡ç¨‹ä¸­ä¸è¢«ç¯¡æ”¹</strong>ã€‚</p><p>æ³¨æ„ï¼š<strong>ä¸Šå›¾çº¢æ¡†ä¸­çš„<code>secret</code>æ˜¯ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯çš„ï¼Œ<code>JWT</code>çš„ç­¾å‘ç”Ÿæˆä¹Ÿæ˜¯åœ¨æœåŠ¡å™¨ç«¯çš„ï¼Œ<code>secret</code>å°±æ˜¯ç”¨æ¥è¿›è¡Œ<code>JWT</code>çš„ç­¾å‘å’Œ<code>JWT</code>çš„éªŒè¯ï¼Œæ‰€ä»¥ï¼Œå®ƒå°±æ˜¯ä½ æœåŠ¡ç«¯çš„ç§é’¥ï¼Œåœ¨ä»»ä½•åœºæ™¯éƒ½ä¸åº”è¯¥æµéœ²å‡ºå»ã€‚ä¸€æ—¦å®¢æˆ·ç«¯å¾—çŸ¥è¿™ä¸ª<code>secret</code>ï¼Œé‚£å°±æ„å‘³ç€å®¢æˆ·ç«¯æ˜¯å¯ä»¥è‡ªæˆ‘ç­¾å‘<code>JWT</code>äº†ã€‚</strong></p><h1 id="æ¡ˆä¾‹æ¼”ç¤º"><a href="#æ¡ˆä¾‹æ¼”ç¤º" class="headerlink" title="æ¡ˆä¾‹æ¼”ç¤º"></a>æ¡ˆä¾‹æ¼”ç¤º</h1><p>ä¸‹é¢æ˜¾ç¤ºäº†ä¸€ä¸ªç™»å½•è¯·æ±‚æˆåŠŸä¹‹åæœåŠ¡ç«¯è¿”å›çš„<code>Token</code>ï¼Œå®ƒç”±ç¼–ç å¤´éƒ¨ï¼ˆ<code>header</code>ï¼‰ã€ç¼–ç æœ‰æ•ˆè½½è·ï¼ˆ<code>payload</code>ï¼‰å’Œç­¾åï¼ˆ<code>signature</code>ï¼‰é€šè¿‡ï¼ˆ.ï¼‰æ‹¼æ¥è€Œæˆï¼š</p><p><img src="/2019/09/02/SpringBoot+Shiro+Jwt%E5%A1%AB%E5%9D%91-2/8.png" alt></p><p>å¦‚æœéœ€è¦ï¼Œä½ å¯ä»¥ä½¿ç”¨<a href="https://jwt.io/">jwt.io</a>çš„<code>Debugger</code>å·¥å…·ï¼Œæ¥ç¼–ç ã€éªŒè¯å’Œç”Ÿæˆ<code>JWT</code>ã€‚æ“ä½œç•Œé¢å¦‚ä¸‹</p><p>åˆšå¼€å§‹æ²¡æœ‰è¾“å…¥<code>secret</code>åˆ™æ˜¾ç¤ºéªŒè¯é”™è¯¯</p><p><img src="/2019/09/02/SpringBoot+Shiro+Jwt%E5%A1%AB%E5%9D%91-2/9.png" alt></p><p><img src="/2019/09/02/SpringBoot+Shiro+Jwt%E5%A1%AB%E5%9D%91-2/14.png" alt></p><p>è¾“å…¥å<code>jwt</code>æ˜¯ä¸€æ ·çš„ï¼Œå¹¶ä¸”éªŒè¯é€šè¿‡äº†</p><h1 id="JWTçš„å·¥ä½œåŸç†"><a href="#JWTçš„å·¥ä½œåŸç†" class="headerlink" title="JWTçš„å·¥ä½œåŸç†"></a>JWTçš„å·¥ä½œåŸç†</h1><p>åœ¨èº«ä»½éªŒè¯ä¸­ï¼Œå½“ç”¨æˆ·ä½¿ç”¨ä»–ä»¬çš„å‡­è¯ï¼ˆå¦‚ç”¨æˆ·åã€å¯†ç ï¼‰æˆåŠŸç™»å½•æ—¶ï¼Œåå°æœåŠ¡å™¨å°†è¿”å›ä¸€ä¸ª<code>token</code>ï¼Œå‰ç«¯æ¥æ”¶åˆ°è¿™ä¸ª<code>token</code>å°†å…¶ä¿å­˜åœ¨æœ¬åœ°ï¼ˆé€šå¸¸åœ¨æœ¬åœ°å­˜å‚¨ä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>Cookie</code>ï¼Œä½†ä¸æ˜¯ä¼ ç»Ÿæ–¹æ³•ä¸­åˆ›å»ºä¼šè¯ï¼ŒæœåŠ¡å™¨å¹¶è¿”å›ä¸€ä¸ª<code>cookie</code>ï¼‰ã€‚<strong>ä¸‹æ¬¡ç”¨æˆ·æƒ³è¦è®¿é—®å—ä¿æŠ¤çš„è·¯ç”±æˆ–èµ„æºæ—¶ï¼Œå°±å°†æœ¬åœ°ä¿å­˜çš„<code>token</code>æ”¾åœ¨å¤´éƒ¨<code>Header</code>ä¸­å‘é€åˆ°åå°æœåŠ¡å™¨ã€‚æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚ï¼Œæ£€æŸ¥å¤´éƒ¨ä¸­<code>token</code>çš„å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±å…è®¸è®¿é—®å—ä¿æŠ¤çš„è·¯ç”±æˆ–èµ„æºï¼Œå¦åˆ™å°±ä¸å…è®¸</strong>ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š<br><img src="/2019/09/02/SpringBoot+Shiro+Jwt%E5%A1%AB%E5%9D%91-2/10.png" alt></p><p>ä¸€èˆ¬é»˜è®¤çš„<code>Value</code>æ˜¯ä»¥<code>Bearer</code>å¼€å§‹ï¼Œæ³¨æ„è¿™é‡Œçš„<code>Bearer</code>ä¹‹åæœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œ<strong>ä»¥ä¾¿åç«¯è¿›è¡Œåˆ†å‰²</strong>ã€‚</p><p>è¿™æ˜¯ä¸€ç§æ— çŠ¶æ€èº«ä»½éªŒè¯æœºåˆ¶ï¼Œå› ä¸ºç”¨æˆ·çŠ¶æ€æ°¸è¿œä¸ä¼šä¿å­˜åœ¨æœåŠ¡å™¨å†…å­˜ä¸­ã€‚ ç”±äº<code>JWT</code>æ˜¯ç‹¬ç«‹çš„ï¼Œæ‰€æœ‰å¿…è¦çš„ä¿¡æ¯éƒ½åœ¨é‚£é‡Œï¼Œæ‰€ä»¥å‡å°‘äº†å¤šæ¬¡æŸ¥è¯¢æ•°æ®åº“çš„éœ€æ±‚ã€‚</p><h1 id="JWTæ€»ç»“"><a href="#JWTæ€»ç»“" class="headerlink" title="JWTæ€»ç»“"></a>JWTæ€»ç»“</h1><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ol><li><p>å› ä¸º<code>Json</code>çš„é€šç”¨æ€§ï¼Œæ‰€ä»¥JWTæ˜¯å¯ä»¥è¿›è¡Œè·¨è¯­è¨€æ”¯æŒçš„ï¼Œåƒ<code>Java</code>ã€<code>JavaScript</code>ã€<code>NodeJS</code>ã€<code>PHP</code>ç­‰å¾ˆå¤šè¯­è¨€éƒ½å¯ä»¥ä½¿ç”¨ã€‚</p></li><li><p>å› ä¸ºæœ‰äº†<code>payload</code>éƒ¨åˆ†ï¼Œæ‰€ä»¥<code>JWT</code>å¯ä»¥åœ¨è‡ªèº«å­˜å‚¨ä¸€äº›å…¶ä»–ä¸šåŠ¡é€»è¾‘æ‰€å¿…è¦çš„éæ•æ„Ÿä¿¡æ¯ã€‚</p></li><li><p>ä¾¿äºä¼ è¾“ï¼Œ<code>JWT</code>çš„æ„æˆéå¸¸ç®€å•ï¼Œå­—èŠ‚å ç”¨å¾ˆå°ï¼Œæ‰€ä»¥å®ƒæ˜¯éå¸¸ä¾¿äºä¼ è¾“çš„ã€‚</p></li><li><p>å®ƒä¸éœ€è¦åœ¨æœåŠ¡ç«¯ä¿å­˜ä¼šè¯ä¿¡æ¯, æ‰€ä»¥å®ƒæ˜“äºåº”ç”¨çš„æ‰©å±•</p></li></ol><h2 id="å®‰å…¨ç›¸å…³"><a href="#å®‰å…¨ç›¸å…³" class="headerlink" title="å®‰å…¨ç›¸å…³"></a>å®‰å…¨ç›¸å…³</h2><ol><li><p>ä¸åº”è¯¥åœ¨<code>JWT</code>çš„<code>payload</code>éƒ¨åˆ†å­˜æ”¾æ•æ„Ÿä¿¡æ¯ï¼Œå› ä¸ºè¯¥éƒ¨åˆ†æ˜¯å®¢æˆ·ç«¯å¯è§£å¯†çš„éƒ¨åˆ†ã€‚</p></li><li><p>ä¿æŠ¤å¥½<code>secret</code>ç§é’¥ï¼Œè¯¥ç§é’¥éå¸¸é‡è¦ã€‚</p></li><li><p>å¦‚æœå¯ä»¥ï¼Œè¯·ä½¿ç”¨<code>HTTPS</code>åè®®ï¼Œä¸ï¼æ˜¯åŠ¡å¿…ä½¿ç”¨<code>HTTPS</code>!</p></li></ol><h1 id="session-cookie-jwt"><a href="#session-cookie-jwt" class="headerlink" title="session cookie jwt"></a>session cookie jwt</h1><p>è½¬è‡ªï¼š<a href="https://mp.weixin.qq.com/s/SY-5ETSjwSB28o95NIsxGw">äº”åˆ†é’Ÿå¸¦ä½ äº†è§£Cookieã€Sessionã€Token å’Œ JWT</a></p><h2 id="åŸºäºsessionçš„ç”¨æˆ·è®¤è¯"><a href="#åŸºäºsessionçš„ç”¨æˆ·è®¤è¯" class="headerlink" title="åŸºäºsessionçš„ç”¨æˆ·è®¤è¯"></a>åŸºäºsessionçš„ç”¨æˆ·è®¤è¯</h2><p><img src="/2019/09/02/SpringBoot+Shiro+Jwt%E5%A1%AB%E5%9D%91-2/11.jpg" alt>![](</p><h2 id="åŸºäºtokençš„è®¤è¯æ–¹æ¡ˆ"><a href="#åŸºäºtokençš„è®¤è¯æ–¹æ¡ˆ" class="headerlink" title="åŸºäºtokençš„è®¤è¯æ–¹æ¡ˆ"></a>åŸºäºtokençš„è®¤è¯æ–¹æ¡ˆ</h2><p><img src="/2019/09/02/SpringBoot+Shiro+Jwt%E5%A1%AB%E5%9D%91-2/12.jpg" alt></p><h2 id="JWT"><a href="#JWT" class="headerlink" title="JWT"></a>JWT</h2><p><img src="/2019/09/02/SpringBoot+Shiro+Jwt%E5%A1%AB%E5%9D%91-2/13.jpg" alt></p><hr><p>å‚è€ƒï¼š</p><p><a href="https://www.xncoding.com/2017/07/09/spring/sb-jwt.html">SpringBootç³»åˆ— - é›†æˆJWTå®ç°æ¥å£æƒé™è®¤è¯ | é£æ±¡ç†Šåšå®¢</a></p><hr>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> Shiro </tag>
            
            <tag> jwt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè®¾è®¡æ¨¡å¼-å•ä¾‹æ¨¡å¼</title>
      <link href="/2019/08/28/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/08/28/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>å¯¹äºç³»ç»Ÿä¸­çš„æŸäº›ç±»æ¥è¯´ï¼Œåªæœ‰ä¸€ä¸ªå®ä¾‹å¾ˆé‡è¦</p><span id="more"></span><h1 id="æ¨¡å¼åŠ¨æœº"><a href="#æ¨¡å¼åŠ¨æœº" class="headerlink" title="æ¨¡å¼åŠ¨æœº"></a>æ¨¡å¼åŠ¨æœº</h1><p><strong>å¯¹äºç³»ç»Ÿä¸­çš„æŸäº›ç±»æ¥è¯´ï¼Œåªæœ‰ä¸€ä¸ªå®ä¾‹å¾ˆé‡è¦</strong>ï¼Œä¾‹å¦‚ï¼Œä¸€ä¸ªç³»ç»Ÿä¸­å¯ä»¥å­˜åœ¨å¤šä¸ªæ‰“å°ä»»åŠ¡ï¼Œä½†æ˜¯åªèƒ½æœ‰ä¸€ä¸ªæ­£åœ¨å·¥ä½œçš„ä»»åŠ¡ï¼›ä¸€ä¸ªç³»ç»Ÿåªèƒ½æœ‰ä¸€ä¸ªçª—å£ç®¡ç†å™¨æˆ–æ–‡ä»¶ç³»ç»Ÿï¼›ä¸€ä¸ªç³»ç»Ÿåªèƒ½æœ‰ä¸€ä¸ªè®¡æ—¶å·¥å…·æˆ–IDï¼ˆåºå·ï¼‰ç”Ÿæˆå™¨ã€‚</p><hr><p>å¦‚ä½•ä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹å¹¶ä¸”è¿™ä¸ªå®ä¾‹æ˜“äºè¢«è®¿é—®å‘¢ï¼Ÿ</p><p>å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡å¯ä»¥ç¡®ä¿å¯¹è±¡éšæ—¶éƒ½å¯ä»¥è¢«è®¿é—®ï¼Œä½†<strong>ä¸èƒ½é˜²æ­¢æˆ‘ä»¬å®ä¾‹åŒ–å¤šä¸ªå¯¹è±¡</strong></p><p>ä¸€ä¸ªæ›´å¥½çš„è§£å†³åŠæ³•æ˜¯<strong>è®©ç±»è‡ªèº«è´Ÿè´£ä¿å­˜å®ƒçš„å”¯ä¸€å®ä¾‹</strong>ã€‚è¿™ä¸ªç±»å¯ä»¥ä¿è¯æ²¡æœ‰å…¶ä»–å®ä¾‹è¢«åˆ›å»ºï¼Œå¹¶ä¸”å®ƒå¯ä»¥æä¾›ä¸€ä¸ªè®¿é—®è¯¥å®ä¾‹çš„æ–¹æ³•ã€‚è¿™å°±æ˜¯å•ä¾‹æ¨¡å¼çš„æ¨¡å¼åŠ¨æœºã€‚</p><h1 id="å•ä¾‹æ¨¡å¼-Singleton-Pattern"><a href="#å•ä¾‹æ¨¡å¼-Singleton-Pattern" class="headerlink" title="å•ä¾‹æ¨¡å¼(Singleton Pattern)"></a>å•ä¾‹æ¨¡å¼(Singleton Pattern)</h1><p>å•ä¾‹æ¨¡å¼ç¡®ä¿æŸä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œè€Œä¸”<strong>è‡ªè¡Œå®ä¾‹åŒ–å¹¶å‘æ•´ä¸ªç³»ç»Ÿæä¾›è¿™ä¸ªå®ä¾‹</strong>ï¼Œè¿™ä¸ªç±»ç§°ä¸ºå•ä¾‹ç±»ï¼Œå®ƒæä¾›å…¨å±€è®¿é—®çš„æ–¹æ³•ã€‚</p><p>å•ä¾‹æ¨¡å¼æ˜¯ä¸€ç§å¯¹è±¡åˆ›å»ºå‹æ¨¡å¼ã€‚å•ä¾‹æ¨¡å¼åˆåå•ä»¶æ¨¡å¼æˆ–å•æ€æ¨¡å¼ã€‚</p><h2 id="è¦ç‚¹"><a href="#è¦ç‚¹" class="headerlink" title="è¦ç‚¹"></a>è¦ç‚¹</h2><ul><li>æŸä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹</li><li>å®ƒå¿…é¡»è‡ªè¡Œåˆ›å»ºè¿™ä¸ªå®ä¾‹</li><li>å®ƒå¿…é¡»è‡ªè¡Œå‘æ•´ä¸ªç³»ç»Ÿæä¾›è¿™ä¸ªå®ä¾‹</li></ul><h2 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h2><p><img src="/2019/08/28/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/1.png" alt></p><p>(å›¾æºï¼š<a href="http://www.jtahstu.com/blog/Singleton.html">è®¾è®¡æ¨¡å¼ä»å…¥é—¨åˆ°æ”¾å¼ƒ - å•ä¾‹æ¨¡å¼ - jtahstuçš„åšå®¢</a>)</p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>å•ä¾‹æ¨¡å¼çš„ç›®çš„æ˜¯ä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ã€‚å•ä¾‹æ¨¡å¼åŒ…å«çš„è§’è‰²åªæœ‰ä¸€ä¸ªï¼Œå°±æ˜¯å•ä¾‹ç±»â€”â€”<code>Singleton</code></p><p>å•ä¾‹ç±»æ‹¥æœ‰ä¸€ä¸ªç§æœ‰æ„é€ å‡½æ•°ï¼Œç¡®ä¿ç”¨æˆ·æ— æ³•é€šè¿‡newå…³é”®å­—ç›´æ¥å®ä¾‹åŒ–å®ƒã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¯¥æ¨¡å¼ä¸­åŒ…å«ä¸€ä¸ªé™æ€ç§æœ‰æˆå‘˜å˜é‡ä¸é™æ€å…¬æœ‰çš„å·¥å‚æ–¹æ³•ï¼Œ<strong>è¯¥å·¥å‚æ–¹æ³•è´Ÿè´£æ£€éªŒå®ä¾‹çš„å­˜åœ¨æ€§å¹¶å®ä¾‹åŒ–è‡ªå·±ï¼Œç„¶åå­˜å‚¨åœ¨é™æ€æˆå‘˜å˜é‡ä¸­ï¼Œä»¥ç¡®ä¿åªæœ‰ä¸€ä¸ªå®ä¾‹è¢«åˆ›å»º</strong>ã€‚</p><h1 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h1><p>åœ¨å•ä¾‹æ¨¡å¼çš„å®ç°è¿‡ç¨‹ä¸­ï¼Œéœ€è¦æ³¨æ„å¦‚ä¸‹ä¸‰ç‚¹ï¼š</p><ul><li>å•ä¾‹ç±»çš„æ„é€ å‡½æ•°ä¸ºç§æœ‰ï¼›</li><li>æä¾›ä¸€ä¸ªè‡ªèº«çš„é™æ€ç§æœ‰æˆå‘˜å˜é‡ï¼›</li><li>æä¾›ä¸€ä¸ªå…¬æœ‰çš„é™æ€å·¥å‚æ–¹æ³•ã€‚</li></ul><p><strong>é€šå¸¸å•ä¾‹æ¨¡å¼åœ¨Javaè¯­è¨€ä¸­ï¼Œæœ‰ä¸¤ç§æ„å»ºæ–¹å¼ï¼š</strong></p><ul><li>æ‡’æ±‰æ–¹å¼ã€‚æŒ‡å…¨å±€çš„å•ä¾‹å®ä¾‹åœ¨ç¬¬ä¸€æ¬¡è¢«ä½¿ç”¨æ—¶æ„å»ºã€‚</li><li>é¥¿æ±‰æ–¹å¼ã€‚æŒ‡å…¨å±€çš„å•ä¾‹å®ä¾‹åœ¨ç±»è£…è½½æ—¶æ„å»ºã€‚</li></ul><h2 id="æ‡’æ±‰å¼ï¼Œçº¿ç¨‹ä¸å®‰å…¨"><a href="#æ‡’æ±‰å¼ï¼Œçº¿ç¨‹ä¸å®‰å…¨" class="headerlink" title="æ‡’æ±‰å¼ï¼Œçº¿ç¨‹ä¸å®‰å…¨"></a>æ‡’æ±‰å¼ï¼Œçº¿ç¨‹ä¸å®‰å…¨</h2><blockquote><p>æ˜¯å¦ Lazy åˆå§‹åŒ–ï¼šæ˜¯<br>æ˜¯å¦å¤šçº¿ç¨‹å®‰å…¨ï¼šå¦<br>å®ç°éš¾åº¦ï¼šæ˜“<br>æè¿°ï¼šè¿™ç§æ–¹å¼æ˜¯æœ€åŸºæœ¬çš„å®ç°æ–¹å¼ï¼Œè¿™ç§å®ç°æœ€å¤§çš„é—®é¢˜å°±æ˜¯ä¸æ”¯æŒå¤šçº¿ç¨‹ã€‚å› ä¸ºæ²¡æœ‰åŠ é” <code>synchronized</code>ï¼Œæ‰€ä»¥ä¸¥æ ¼æ„ä¹‰ä¸Šå®ƒå¹¶ä¸ç®—å•ä¾‹æ¨¡å¼ã€‚<br>è¿™ç§æ–¹å¼ <code>lazy loading</code> å¾ˆæ˜æ˜¾ï¼Œä¸è¦æ±‚çº¿ç¨‹å®‰å…¨ï¼Œåœ¨å¤šçº¿ç¨‹ä¸èƒ½æ­£å¸¸å·¥ä½œã€‚</p></blockquote><p><em>å»¶è¿Ÿåˆå§‹åŒ–(<code>lazy initialization</code>)ï¼Œä¹Ÿå°±æ˜¯åœ¨çœŸæ­£è¢«ä½¿ç”¨çš„æ—¶å€™æ‰å¼€å§‹åˆå§‹åŒ–çš„æŠ€å·§ã€‚ä¸»è¦ç”¨äºæé«˜æ€§èƒ½ï¼Œé¿å…æµªè´¹è®¡ç®—ï¼Œå¹¶å‡å°‘ç¨‹åºå†…å­˜è¦æ±‚ã€‚(å»¶è¿Ÿåˆå§‹åŒ–=å»¶è¿Ÿå®ä¾‹åŒ–)</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> indi.greenhat.designpattern;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> GreenHatHG</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é™æ€ç§æœ‰æˆå‘˜å˜é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç§æœ‰æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é™æ€å…¬æœ‰å·¥å‚æ–¹æ³•ï¼Œè¿”å›å”¯ä¸€å®ä¾‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">            instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ¥ä¸‹æ¥ä»‹ç»çš„å‡ ç§å®ç°æ–¹å¼éƒ½æ”¯æŒå¤šçº¿ç¨‹ï¼Œä½†æ˜¯åœ¨æ€§èƒ½ä¸Šæœ‰æ‰€å·®å¼‚ã€‚</strong></p><h2 id="æ‡’æ±‰å¼ï¼Œçº¿ç¨‹å®‰å…¨"><a href="#æ‡’æ±‰å¼ï¼Œçº¿ç¨‹å®‰å…¨" class="headerlink" title="æ‡’æ±‰å¼ï¼Œçº¿ç¨‹å®‰å…¨"></a>æ‡’æ±‰å¼ï¼Œçº¿ç¨‹å®‰å…¨</h2><blockquote><p>æ˜¯å¦ Lazy åˆå§‹åŒ–ï¼šæ˜¯<br>æ˜¯å¦å¤šçº¿ç¨‹å®‰å…¨ï¼šæ˜¯<br>å®ç°éš¾åº¦ï¼šæ˜“<br>æè¿°ï¼šè¿™ç§æ–¹å¼å…·å¤‡å¾ˆå¥½çš„ <code>lazy loading</code>ï¼Œèƒ½å¤Ÿåœ¨å¤šçº¿ç¨‹ä¸­å¾ˆå¥½çš„å·¥ä½œï¼Œä½†æ˜¯ï¼Œæ•ˆç‡å¾ˆä½ï¼Œ99% æƒ…å†µä¸‹ä¸éœ€è¦åŒæ­¥ã€‚<br>ä¼˜ç‚¹ï¼šç¬¬ä¸€æ¬¡è°ƒç”¨æ‰åˆå§‹åŒ–ï¼Œé¿å…å†…å­˜æµªè´¹ã€‚<br>ç¼ºç‚¹ï¼šå¿…é¡»åŠ é” <code>synchronized</code> æ‰èƒ½ä¿è¯å•ä¾‹ï¼Œä½†åŠ é”ä¼šå½±å“æ•ˆç‡ã€‚<br><code>getInstance()</code> çš„æ€§èƒ½å¯¹åº”ç”¨ç¨‹åºä¸æ˜¯å¾ˆå…³é”®ï¼ˆè¯¥æ–¹æ³•ä½¿ç”¨ä¸å¤ªé¢‘ç¹ï¼‰ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> indi.greenhat.designpattern;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> GreenHatHG</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">            instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é¥¿æ±‰å¼"><a href="#é¥¿æ±‰å¼" class="headerlink" title="é¥¿æ±‰å¼"></a>é¥¿æ±‰å¼</h2><blockquote><p>æ˜¯å¦ Lazy åˆå§‹åŒ–ï¼šå¦<br>æ˜¯å¦å¤šçº¿ç¨‹å®‰å…¨ï¼šæ˜¯<br>å®ç°éš¾åº¦ï¼šæ˜“<br>æè¿°ï¼šè¿™ç§æ–¹å¼æ¯”è¾ƒå¸¸ç”¨ï¼Œä½†å®¹æ˜“äº§ç”Ÿåƒåœ¾å¯¹è±¡ã€‚<br>ä¼˜ç‚¹ï¼šæ²¡æœ‰åŠ é”ï¼Œæ‰§è¡Œæ•ˆç‡ä¼šæé«˜ã€‚<br>ç¼ºç‚¹ï¼šç±»åŠ è½½æ—¶å°±åˆå§‹åŒ–ï¼Œæµªè´¹å†…å­˜ã€‚<br>å®ƒåŸºäº<code>classloder</code>æœºåˆ¶é¿å…äº†å¤šçº¿ç¨‹çš„åŒæ­¥é—®é¢˜ï¼Œä¸è¿‡ï¼Œ<code>instance</code>åœ¨ç±»è£…è½½æ—¶å°±å®ä¾‹åŒ–ï¼Œè™½ç„¶å¯¼è‡´ç±»è£…è½½çš„åŸå› æœ‰å¾ˆå¤šç§ï¼Œåœ¨å•ä¾‹æ¨¡å¼ä¸­å¤§å¤šæ•°éƒ½æ˜¯è°ƒç”¨<code>getInstance</code>æ–¹æ³•ï¼Œ ä½†æ˜¯ä¹Ÿä¸èƒ½ç¡®å®šæœ‰å…¶ä»–çš„æ–¹å¼ï¼ˆæˆ–è€…å…¶ä»–çš„é™æ€æ–¹æ³•ï¼‰å¯¼è‡´ç±»è£…è½½ï¼Œè¿™æ—¶å€™åˆå§‹åŒ–<code>instance</code>æ˜¾ç„¶æ²¡æœ‰è¾¾åˆ°<code>lazy loading</code>çš„æ•ˆæœ</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> indi.greenhat.designpattern;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> GreenHatHG</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span> <span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åŒæ£€é”-åŒæ£€æŸ¥é”ï¼ˆDCLï¼Œå³-double-checked-lockingï¼‰"><a href="#åŒæ£€é”-åŒæ£€æŸ¥é”ï¼ˆDCLï¼Œå³-double-checked-lockingï¼‰" class="headerlink" title="åŒæ£€é”/åŒæ£€æŸ¥é”ï¼ˆDCLï¼Œå³ double-checked lockingï¼‰"></a>åŒæ£€é”/åŒæ£€æŸ¥é”ï¼ˆDCLï¼Œå³ double-checked lockingï¼‰</h2><blockquote><p>JDK ç‰ˆæœ¬ï¼šJDK1.5 èµ·<br>æ˜¯å¦ Lazy åˆå§‹åŒ–ï¼šæ˜¯<br>æ˜¯å¦å¤šçº¿ç¨‹å®‰å…¨ï¼šæ˜¯<br>å®ç°éš¾åº¦ï¼šè¾ƒå¤æ‚<br>æè¿°ï¼šè¿™ç§æ–¹å¼ç§°ä¸ºåŒé‡æ£€æŸ¥é”(Double-Check Locking)ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½¿ç”¨åŒé‡æ£€æŸ¥é”å®šæ¥å®ç°æ‡’æ±‰å¼å•ä¾‹ç±»ï¼Œéœ€è¦åœ¨é™æ€æˆå‘˜å˜é‡<code>instance</code>ä¹‹å‰å¢åŠ <strong>ä¿®é¥°ç¬¦volatile</strong>ï¼Œè¢«<code>volatile</code>ä¿®é¥°çš„æˆå‘˜å˜é‡å¯ä»¥ç¡®ä¿å¤šä¸ªçº¿ç¨‹éƒ½èƒ½å¤Ÿæ­£ç¡®å¤„ç†ï¼Œä¸”è¯¥ä»£ç åªèƒ½åœ¨JDK 1.5åŠä»¥ä¸Šç‰ˆæœ¬ä¸­æ‰èƒ½æ­£ç¡®æ‰§è¡Œã€‚ç”±äº<code>volatile</code>å…³é”®å­—ä¼šå±è”½Javaè™šæ‹Ÿæœºæ‰€åšçš„ä¸€äº›ä»£ç ä¼˜åŒ–ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿè¿è¡Œæ•ˆç‡é™ä½ï¼Œå› æ­¤å³ä½¿ä½¿ç”¨åŒé‡æ£€æŸ¥é”å®šæ¥å®ç°å•ä¾‹æ¨¡å¼ä¹Ÿä¸æ˜¯ä¸€ç§å®Œç¾çš„å®ç°æ–¹å¼ã€‚</p></blockquote><p><img src="/2019/08/28/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/2.png" alt></p><p>(å›¾æºï¼š<a href="[https://zh.wikipedia.org/wiki/Volatile%E5%8F%98%E9%87%8F#Java%E4%B8%AD%E7%9A%84volatile](https://zh.wikipedia.org/wiki/Volatileå˜é‡#Javaä¸­çš„volatile">Volatileå˜é‡ - Wikipedia</a>))</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> indi.greenhat.designpattern;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> GreenHatHG</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> Singleton singleton;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span> <span class="params">()</span></span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getSingleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (singleton == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (Singleton.class) &#123;</span><br><span class="line">                <span class="keyword">if</span> (singleton == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    singleton = <span class="keyword">new</span> Singleton();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> singleton;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é™æ€å†…éƒ¨ç±»"><a href="#é™æ€å†…éƒ¨ç±»" class="headerlink" title="é™æ€å†…éƒ¨ç±»"></a>é™æ€å†…éƒ¨ç±»</h2><blockquote><p>æ˜¯å¦ Lazy åˆå§‹åŒ–ï¼šæ˜¯<br>æ˜¯å¦å¤šçº¿ç¨‹å®‰å…¨ï¼šæ˜¯<br>å®ç°éš¾åº¦ï¼šä¸€èˆ¬<br>æè¿°ï¼šé¥¿æ±‰å¼å•ä¾‹ç±»ä¸èƒ½å®ç°å»¶è¿ŸåŠ è½½ï¼Œä¸ç®¡å°†æ¥ç”¨ä¸ç”¨å§‹ç»ˆå æ®å†…å­˜ï¼›æ‡’æ±‰å¼å•ä¾‹ç±»çº¿ç¨‹å®‰å…¨æ§åˆ¶çƒ¦çï¼Œè€Œä¸”æ€§èƒ½å—å½±å“ã€‚å¯è§ï¼Œæ— è®ºæ˜¯é¥¿æ±‰å¼å•ä¾‹è¿˜æ˜¯æ‡’æ±‰å¼å•ä¾‹éƒ½å­˜åœ¨è¿™æ ·é‚£æ ·çš„é—®é¢˜ï¼Œæœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•ï¼Œèƒ½å¤Ÿå°†ä¸¤ç§å•ä¾‹çš„ç¼ºç‚¹éƒ½å…‹æœï¼Œè€Œå°†ä¸¤è€…çš„ä¼˜ç‚¹åˆäºŒä¸ºä¸€å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼šYesï¼ä¸‹é¢æˆ‘ä»¬æ¥å­¦ä¹ è¿™ç§æ›´å¥½çš„è¢«ç§°ä¹‹ä¸º<strong>Initialization Demand Holder (IoDH)</strong>çš„æŠ€æœ¯ã€‚åœ¨<code>IoDH</code>ä¸­ï¼Œæˆ‘ä»¬åœ¨å•ä¾‹ç±»ä¸­å¢åŠ ä¸€ä¸ª<strong>é™æ€(static)å†…éƒ¨ç±»</strong>ï¼Œåœ¨è¯¥å†…éƒ¨ç±»ä¸­åˆ›å»ºå•ä¾‹å¯¹è±¡ï¼Œå†å°†è¯¥å•ä¾‹å¯¹è±¡é€šè¿‡<code>getInstance()</code>æ–¹æ³•è¿”å›ç»™å¤–éƒ¨ä½¿ç”¨ã€‚ç”±äºé™æ€å•ä¾‹å¯¹è±¡æ²¡æœ‰ä½œä¸º<code>Singleton</code>çš„æˆå‘˜å˜é‡ç›´æ¥å®ä¾‹åŒ–ï¼Œå› æ­¤ç±»åŠ è½½æ—¶ä¸ä¼šå®ä¾‹åŒ–<code>Singleton</code>ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨<code>getInstance()</code>æ—¶å°†åŠ è½½å†…éƒ¨ç±»<code>SingletonHolder</code>ï¼Œåœ¨è¯¥å†…éƒ¨ç±»ä¸­å®šä¹‰äº†ä¸€ä¸ª<code>static</code>ç±»å‹çš„å˜é‡<code>instance</code>ï¼Œæ­¤æ—¶ä¼šé¦–å…ˆåˆå§‹åŒ–è¿™ä¸ªæˆå‘˜å˜é‡ï¼Œç”±Javaè™šæ‹Ÿæœºæ¥ä¿è¯å…¶çº¿ç¨‹å®‰å…¨æ€§ï¼Œç¡®ä¿è¯¥æˆå‘˜å˜é‡åªèƒ½åˆå§‹åŒ–ä¸€æ¬¡ã€‚ç”±äº<code>getInstance()</code>æ–¹æ³•æ²¡æœ‰ä»»ä½•çº¿ç¨‹é”å®šï¼Œå› æ­¤å…¶æ€§èƒ½ä¸ä¼šé€ æˆä»»ä½•å½±å“ã€‚<strong>é€šè¿‡ä½¿ç”¨<code>IoDH</code>ï¼Œæˆ‘ä»¬æ—¢å¯ä»¥å®ç°å»¶è¿ŸåŠ è½½ï¼Œåˆå¯ä»¥ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œä¸å½±å“ç³»ç»Ÿæ€§èƒ½ï¼Œä¸å¤±ä¸ºä¸€ç§æœ€å¥½çš„Javaè¯­è¨€å•ä¾‹æ¨¡å¼å®ç°æ–¹å¼</strong>ï¼ˆå…¶ç¼ºç‚¹æ˜¯ä¸ç¼–ç¨‹è¯­è¨€æœ¬èº«çš„ç‰¹æ€§ç›¸å…³ï¼Œå¾ˆå¤šé¢å‘å¯¹è±¡è¯­è¨€ä¸æ”¯æŒ<code>IoDH</code>ï¼‰</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> indi.greenhat.designpattern;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> GreenHatHG</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonHolder</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton INSTANCE = <span class="keyword">new</span> Singleton();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span> <span class="params">()</span></span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> SingletonHolder.INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æšä¸¾"><a href="#æšä¸¾" class="headerlink" title="æšä¸¾"></a>æšä¸¾</h2><blockquote><p>JDK ç‰ˆæœ¬ï¼šJDK1.5 èµ·</p><p>æ˜¯å¦ Lazy åˆå§‹åŒ–ï¼šå¦<br>æ˜¯å¦å¤šçº¿ç¨‹å®‰å…¨ï¼šæ˜¯<br>å®ç°éš¾åº¦ï¼šæ˜“<br>æè¿°ï¼šè¿™ç§å®ç°æ–¹å¼è¿˜æ²¡æœ‰è¢«å¹¿æ³›é‡‡ç”¨ï¼Œä½†è¿™æ˜¯å®ç°å•ä¾‹æ¨¡å¼çš„æœ€ä½³æ–¹æ³•ã€‚å®ƒæ›´ç®€æ´ï¼Œè‡ªåŠ¨æ”¯æŒåºåˆ—åŒ–æœºåˆ¶ï¼Œç»å¯¹é˜²æ­¢å¤šæ¬¡å®ä¾‹åŒ–ã€‚<br>è¿™ç§æ–¹å¼æ˜¯<code>Effective Java</code>ä½œè€…<code>Josh Bloch</code>æå€¡çš„æ–¹å¼ï¼Œå®ƒä¸ä»…èƒ½é¿å…å¤šçº¿ç¨‹åŒæ­¥é—®é¢˜ï¼Œè€Œä¸”è¿˜è‡ªåŠ¨æ”¯æŒåºåˆ—åŒ–æœºåˆ¶ï¼Œé˜²æ­¢ååºåˆ—åŒ–é‡æ–°åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œç»å¯¹é˜²æ­¢å¤šæ¬¡å®ä¾‹åŒ–ã€‚ä¸è¿‡ï¼Œç”±äº JDK1.5 ä¹‹åæ‰åŠ å…¥ enum ç‰¹æ€§ï¼Œç”¨è¿™ç§æ–¹å¼å†™ä¸å…è®©äººæ„Ÿè§‰ç”Ÿç–ï¼Œåœ¨å®é™…å·¥ä½œä¸­ï¼Œä¹Ÿå¾ˆå°‘ç”¨ã€‚<br>ä¸èƒ½é€šè¿‡<code>reflection attack</code>æ¥è°ƒç”¨ç§æœ‰æ„é€ æ–¹æ³•ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">Singleton</span> </span>&#123;  </span><br><span class="line">    INSTANCE;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">whateverMethod</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é¥¿æ±‰å¼å•ä¾‹ä¸æ‡’æ±‰å¼å•ä¾‹ç±»æ¯”è¾ƒ"><a href="#é¥¿æ±‰å¼å•ä¾‹ä¸æ‡’æ±‰å¼å•ä¾‹ç±»æ¯”è¾ƒ" class="headerlink" title="é¥¿æ±‰å¼å•ä¾‹ä¸æ‡’æ±‰å¼å•ä¾‹ç±»æ¯”è¾ƒ"></a>é¥¿æ±‰å¼å•ä¾‹ä¸æ‡’æ±‰å¼å•ä¾‹ç±»æ¯”è¾ƒ</h2><ul><li>é¥¿æ±‰å¼å•ä¾‹ç±»åœ¨è‡ªå·±è¢«åŠ è½½æ—¶å°±å°†è‡ªå·±å®ä¾‹åŒ–ã€‚å•ä»<strong>èµ„æºåˆ©ç”¨æ•ˆç‡è§’åº¦æ¥è®²ï¼Œè¿™ä¸ªæ¯”æ‡’æ±‰å¼å•ä¾‹ç±»ç¨å·®äº›ã€‚ä»é€Ÿåº¦å’Œååº”æ—¶é—´è§’åº¦æ¥è®²ï¼Œåˆ™æ¯”æ‡’æ±‰å¼å•ä¾‹ç±»ç¨å¥½äº›</strong>ã€‚</li><li>æ‡’æ±‰å¼å•ä¾‹ç±»åœ¨å®ä¾‹åŒ–æ—¶ï¼Œå¿…é¡»<strong>å¤„ç†å¥½åœ¨å¤šä¸ªçº¿ç¨‹åŒæ—¶é¦–æ¬¡å¼•ç”¨æ­¤ç±»æ—¶çš„è®¿é—®é™åˆ¶é—®é¢˜</strong>ï¼Œç‰¹åˆ«æ˜¯å½“å•ä¾‹ç±»ä½œä¸ºèµ„æºæ§åˆ¶å™¨ï¼Œåœ¨å®ä¾‹åŒ–æ—¶å¿…ç„¶æ¶‰åŠèµ„æºåˆå§‹åŒ–ï¼Œè€Œèµ„æºåˆå§‹åŒ–å¾ˆæœ‰å¯èƒ½è€—è´¹å¤§é‡æ—¶é—´ï¼Œè¿™æ„å‘³ç€å‡ºç°å¤šçº¿ç¨‹åŒæ—¶é¦–æ¬¡å¼•ç”¨æ­¤ç±»çš„æœºç‡å˜å¾—è¾ƒå¤§ï¼Œéœ€è¦é€šè¿‡åŒæ­¥åŒ–æœºåˆ¶è¿›è¡Œæ§åˆ¶</li></ul><h2 id="é€‰æ‹©"><a href="#é€‰æ‹©" class="headerlink" title="é€‰æ‹©"></a>é€‰æ‹©</h2><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸å»ºè®®ä½¿ç”¨ç¬¬ 1 ç§å’Œç¬¬ 2 ç§æ‡’æ±‰æ–¹å¼ï¼Œå»ºè®®ä½¿ç”¨ç¬¬ 3 ç§é¥¿æ±‰æ–¹å¼ã€‚åªæœ‰åœ¨è¦æ˜ç¡®å®ç°<code>lazy loading</code>æ•ˆæœæ—¶ï¼Œæ‰ä¼šä½¿ç”¨ç¬¬ 5 ç§ç™»è®°æ–¹å¼ã€‚å¦‚æœæ¶‰åŠåˆ°ååºåˆ—åŒ–åˆ›å»ºå¯¹è±¡æ—¶ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨ç¬¬ 6 ç§æšä¸¾æ–¹å¼ã€‚å¦‚æœæœ‰å…¶ä»–ç‰¹æ®Šçš„éœ€æ±‚ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ç¬¬ 4 ç§åŒæ£€é”æ–¹å¼ã€‚</p><h1 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h1><h2 id="èº«ä»½è¯å·ç "><a href="#èº«ä»½è¯å·ç " class="headerlink" title="èº«ä»½è¯å·ç "></a>èº«ä»½è¯å·ç </h2><p>åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œå±…æ°‘èº«ä»½è¯å·ç å…·æœ‰å”¯ä¸€æ€§ï¼ŒåŒä¸€ä¸ªäººä¸å…è®¸æœ‰å¤šä¸ªèº«ä»½è¯å·ç ï¼Œç¬¬ä¸€æ¬¡ç”³è¯·èº«ä»½è¯æ—¶å°†ç»™å±…æ°‘åˆ†é…ä¸€ä¸ªèº«ä»½è¯å·ç ï¼Œå¦‚æœä¹‹åå› ä¸ºé—å¤±ç­‰åŸå› è¡¥åŠæ—¶ï¼Œè¿˜æ˜¯ä½¿ç”¨åŸæ¥çš„èº«ä»½è¯å·ç ï¼Œä¸ä¼šäº§ç”Ÿæ–°çš„å·ç ã€‚ç°ä½¿ç”¨å•ä¾‹æ¨¡å¼æ¨¡æ‹Ÿè¯¥åœºæ™¯</p><p><img src="/2019/08/28/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/3.png" alt></p><p>(å›¾æºï¼š<a href="https://blog.csdn.net/leehsiao/article/details/48297911">è®¾è®¡æ¨¡å¼ä¹‹å•ä¾‹æ¨¡å¼ - leehsiaoçš„ä¸“æ  - CSDNåšå®¢</a>ï¼‰</p><h2 id="æ‰“å°æ± "><a href="#æ‰“å°æ± " class="headerlink" title="æ‰“å°æ± "></a>æ‰“å°æ± </h2><p>åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œæ‰“å°æ± (<code>Print Spooler</code>)æ˜¯ä¸€ä¸ªç”¨äºç®¡ç†æ‰“å°ä»»åŠ¡çš„åº”ç”¨ç¨‹åºï¼Œé€šè¿‡æ‰“å°æ± ç”¨æˆ·å¯ä»¥åˆ é™¤ã€ä¸­æ­¢æˆ–è€…æ”¹å˜æ‰“å°ä»»åŠ¡çš„ä¼˜å…ˆçº§ï¼Œåœ¨ä¸€ä¸ªç³»ç»Ÿä¸­åªå…è®¸è¿è¡Œä¸€ä¸ªæ‰“å°æ± å¯¹è±¡ï¼Œå¦‚æœé‡å¤åˆ›å»ºæ‰“å°æ± åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚ç°ä½¿ç”¨å•ä¾‹æ¨¡å¼æ¥æ¨¡æ‹Ÿå®ç°æ‰“å°æ± çš„è®¾è®¡</p><p><img src="/2019/08/28/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/4.png" alt></p><p>(å›¾æºï¼š<a href="https://blog.csdn.net/leehsiao/article/details/48297911">è®¾è®¡æ¨¡å¼ä¹‹å•ä¾‹æ¨¡å¼ - leehsiaoçš„ä¸“æ  - CSDNåšå®¢</a>ï¼‰</p><h2 id="java-lang-Runtime"><a href="#java-lang-Runtime" class="headerlink" title="java.lang.Runtime"></a>java.lang.Runtime</h2><p><code>Runtime</code>ç±»å°è£…äº†Javaè¿è¡Œæ—¶çš„ç¯å¢ƒã€‚<strong>æ¯ä¸€ä¸ªjavaç¨‹åºå®é™…ä¸Šéƒ½æ˜¯å¯åŠ¨äº†ä¸€ä¸ªJVMè¿›ç¨‹ï¼Œé‚£ä¹ˆæ¯ä¸ªJVMè¿›ç¨‹éƒ½æ˜¯å¯¹åº”è¿™ä¸€ä¸ªRuntimeå®ä¾‹ï¼Œæ­¤å®ä¾‹æ˜¯ç”±JVMä¸ºå…¶å®ä¾‹åŒ–çš„ã€‚æ¯ä¸ª Java åº”ç”¨ç¨‹åºéƒ½æœ‰ä¸€ä¸ª Runtime ç±»å®ä¾‹ï¼Œä½¿åº”ç”¨ç¨‹åºèƒ½å¤Ÿä¸å…¶è¿è¡Œçš„ç¯å¢ƒç›¸è¿æ¥</strong>ã€‚</p><p>ç”±äºJavaæ˜¯å•è¿›ç¨‹çš„ï¼Œæ‰€ä»¥ï¼Œåœ¨ä¸€ä¸ªJVMä¸­ï¼ŒRuntimeçš„å®ä¾‹åº”è¯¥åªæœ‰ä¸€ä¸ªã€‚æ‰€ä»¥åº”è¯¥ä½¿ç”¨å•ä¾‹æ¥å®ç°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Runtime</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Runtime currentRuntime = <span class="keyword">new</span> Runtime();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Runtime <span class="title">getRuntime</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> currentRuntime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Runtime</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç ä¸ºJDKä¸­<code>Runtime</code>ç±»çš„éƒ¨åˆ†å®ç°ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œè¿™å…¶å®æ˜¯é¥¿æ±‰å¼å•ä¾‹æ¨¡å¼ã€‚åœ¨è¯¥ç±»ç¬¬ä¸€æ¬¡è¢«<code>classloader</code>åŠ è½½çš„æ—¶å€™ï¼Œè¿™ä¸ªå®ä¾‹å°±è¢«åˆ›å»ºå‡ºæ¥äº†ã€‚</p><h1 id="ä¼˜ç¼ºç‚¹"><a href="#ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h1><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul><li><strong>æä¾›äº†å¯¹å”¯ä¸€å®ä¾‹çš„å—æ§è®¿é—®</strong>ã€‚å› ä¸ºå•ä¾‹ç±»å°è£…äº†å®ƒçš„å”¯ä¸€å®ä¾‹ï¼Œæ‰€ä»¥å®ƒå¯ä»¥ä¸¥æ ¼æ§åˆ¶å®¢æˆ·æ€æ ·ä»¥åŠä½•æ—¶è®¿é—®å®ƒï¼Œå¹¶ä¸ºè®¾è®¡åŠå¼€å‘å›¢é˜Ÿæä¾›äº†å…±äº«çš„æ¦‚å¿µã€‚</li><li>ç”±äºåœ¨ç³»ç»Ÿå†…å­˜ä¸­åªå­˜åœ¨ä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤<strong>å¯ä»¥èŠ‚çº¦ç³»ç»Ÿèµ„æº</strong>ï¼Œå¯¹äºä¸€äº›éœ€è¦é¢‘ç¹åˆ›å»ºå’Œé”€æ¯çš„å¯¹è±¡ï¼Œå•ä¾‹æ¨¡å¼æ— ç–‘å¯ä»¥æé«˜ç³»ç»Ÿçš„æ€§èƒ½ã€‚</li><li><strong>å…è®¸å¯å˜æ•°ç›®çš„å®ä¾‹</strong>ã€‚æˆ‘ä»¬å¯ä»¥åŸºäºå•ä¾‹æ¨¡å¼è¿›è¡Œæ‰©å±•ï¼Œä½¿ç”¨ä¸å•ä¾‹æ§åˆ¶ç›¸ä¼¼çš„æ–¹æ³•æ¥è·å¾—æŒ‡å®šä¸ªæ•°çš„å¯¹è±¡å®ä¾‹ã€‚</li></ul><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><ul><li>ç”±äºå•ä¾‹æ¨¡å¼ä¸­æ²¡æœ‰æŠ½è±¡å±‚ï¼Œå› æ­¤<strong>å•ä¾‹ç±»çš„æ‰©å±•æœ‰å¾ˆå¤§çš„å›°éš¾</strong>ã€‚</li><li><strong>å•ä¾‹ç±»çš„èŒè´£è¿‡é‡</strong>ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šè¿èƒŒäº†â€œå•ä¸€èŒè´£åŸåˆ™â€ã€‚å› ä¸ºå•ä¾‹ç±»æ—¢å……å½“äº†å·¥å‚è§’è‰²ï¼Œæä¾›äº†å·¥å‚æ–¹æ³•ï¼ŒåŒæ—¶åˆå……å½“äº†äº§å“è§’è‰²ï¼ŒåŒ…å«ä¸€äº›ä¸šåŠ¡æ–¹æ³•ï¼Œå°†äº§å“çš„åˆ›å»ºå’Œäº§å“çš„æœ¬èº«çš„åŠŸèƒ½èåˆåˆ°ä¸€èµ·ã€‚</li><li><strong>æ»¥ç”¨å•ä¾‹å°†å¸¦æ¥ä¸€äº›è´Ÿé¢é—®é¢˜</strong>ï¼Œå¦‚ä¸ºäº†èŠ‚çœèµ„æºå°†æ•°æ®åº“è¿æ¥æ± å¯¹è±¡è®¾è®¡ä¸ºå•ä¾‹ç±»ï¼Œå¯èƒ½ä¼šå¯¼è‡´å…±äº«è¿æ¥æ± å¯¹è±¡çš„ç¨‹åºè¿‡å¤šè€Œå‡ºç°è¿æ¥æ± æº¢å‡ºï¼›ç°åœ¨å¾ˆå¤šé¢å‘å¯¹è±¡è¯­è¨€(å¦‚Javaã€C#)çš„è¿è¡Œç¯å¢ƒéƒ½æä¾›äº†è‡ªåŠ¨åƒåœ¾å›æ”¶çš„æŠ€æœ¯ï¼Œå› æ­¤ï¼Œå¦‚æœå®ä¾‹åŒ–çš„å¯¹è±¡é•¿æ—¶é—´ä¸è¢«åˆ©ç”¨ï¼Œç³»ç»Ÿä¼šè®¤ä¸ºå®ƒæ˜¯åƒåœ¾ï¼Œä¼šè‡ªåŠ¨é”€æ¯å¹¶å›æ”¶èµ„æºï¼Œä¸‹æ¬¡åˆ©ç”¨æ—¶åˆå°†é‡æ–°å®ä¾‹åŒ–ï¼Œè¿™å°†å¯¼è‡´å¯¹è±¡çŠ¶æ€çš„ä¸¢å¤±ã€‚</li></ul><h1 id="é€‚ç”¨ç¯å¢ƒ"><a href="#é€‚ç”¨ç¯å¢ƒ" class="headerlink" title="é€‚ç”¨ç¯å¢ƒ"></a>é€‚ç”¨ç¯å¢ƒ</h1><p>åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼š</p><ul><li><strong>ç³»ç»Ÿåªéœ€è¦ä¸€ä¸ªå®ä¾‹å¯¹è±¡</strong>ï¼Œå¦‚ç³»ç»Ÿè¦æ±‚æä¾›ä¸€ä¸ªå”¯ä¸€çš„åºåˆ—å·ç”Ÿæˆå™¨ï¼Œæˆ–è€…éœ€è¦è€ƒè™‘èµ„æºæ¶ˆè€—å¤ªå¤§è€Œåªå…è®¸åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚</li><li>å®¢æˆ·è°ƒç”¨ç±»çš„å•ä¸ªå®ä¾‹<strong>åªå…è®¸ä½¿ç”¨ä¸€ä¸ªå…¬å…±è®¿é—®ç‚¹</strong>ï¼Œé™¤äº†è¯¥å…¬å…±è®¿é—®ç‚¹ï¼Œä¸èƒ½é€šè¿‡å…¶ä»–é€”å¾„è®¿é—®è¯¥å®ä¾‹ã€‚</li><li><strong>åœ¨ä¸€ä¸ªç³»ç»Ÿä¸­è¦æ±‚ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹æ—¶æ‰åº”å½“ä½¿ç”¨å•ä¾‹æ¨¡å¼ã€‚åè¿‡æ¥ï¼Œå¦‚æœä¸€ä¸ªç±»å¯ä»¥æœ‰å‡ ä¸ªå®ä¾‹å…±å­˜ï¼Œå°±éœ€è¦å¯¹å•ä¾‹æ¨¡å¼è¿›è¡Œæ”¹è¿›ï¼Œä½¿ä¹‹æˆä¸ºå¤šä¾‹æ¨¡å¼</strong>ã€‚</li></ul><hr><p>å‚è€ƒï¼š</p><p><a href="http://tengj.top/2016/04/06/sjms4singleton/">è®¾è®¡æ¨¡å¼å¹²è´§ç³»åˆ—ï¼šï¼ˆå››ï¼‰å•ä¾‹æ¨¡å¼ã€å­¦ä¹ éš¾åº¦ï¼šâ˜…â˜†â˜†â˜†â˜†ï¼Œä½¿ç”¨é¢‘ç‡ï¼šâ˜…â˜…â˜…â˜…â˜†ã€‘ | å˜Ÿå˜Ÿç‹¬ç«‹åšå®¢</a></p><p><a href="[https://zh.wikipedia.org/wiki/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F](https://zh.wikipedia.org/wiki/å•ä¾‹æ¨¡å¼">å•ä¾‹æ¨¡å¼ - ç»´åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦</a>)</p><p><a href="https://www.hollischuang.com/archives/1383">è®¾è®¡æ¨¡å¼ï¼ˆä¸‰ï¼‰â€”â€”JDKä¸­çš„é‚£äº›å•ä¾‹-HollisChuangâ€™s Blog</a></p><hr>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
            <tag> å•ä¾‹æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDK8æ–°ç‰¹æ€§ä¹‹Lambdaè¡¨è¾¾å¼çš„åŸºæœ¬è¯­æ³•</title>
      <link href="/2019/08/28/JDK8%E6%96%B0%E7%89%B9%E6%80%A7%E4%B9%8BLambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/"/>
      <url>/2019/08/28/JDK8%E6%96%B0%E7%89%B9%E6%80%A7%E4%B9%8BLambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>ä¸ªäººæ„Ÿè§‰Lambdaç”¨äºå†…éƒ¨ç±»å³å¯ï¼Œå…¶ä»–åœ°æ–¹å¯èƒ½è¿˜ä¼šé€ æˆæ•ˆç‡ä½ä¸‹ï¼Œéš¾äºdebug</p><span id="more"></span><h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>å®˜æ–¹æ–‡æ¡£:<a href="https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html">Lambda Expressions (The Javaâ„¢ Tutorials &gt; Learning the Java Language &gt; Classes and Objects)</a></p><hr><p><code>Lambda</code>è¡¨è¾¾å¼ï¼Œä¹Ÿå¯ç§°ä¸ºé—­åŒ…ï¼Œå®ƒæ˜¯æ¨åŠ¨ <code>Java8</code> å‘å¸ƒçš„æœ€é‡è¦æ–°ç‰¹æ€§ã€‚</p><p><code>Lambda</code> å…è®¸æŠŠå‡½æ•°ä½œä¸ºä¸€ä¸ªæ–¹æ³•çš„å‚æ•°ï¼ˆå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’è¿›æ–¹æ³•ä¸­ï¼‰ã€‚</p><p>ä½¿ç”¨ <code>Lambda</code> è¡¨è¾¾å¼å¯ä»¥ä½¿ä»£ç å˜çš„æ›´åŠ ç®€æ´ç´§å‡‘</p><h1 id="è¡¨è¾¾å¼æ ¼å¼"><a href="#è¡¨è¾¾å¼æ ¼å¼" class="headerlink" title="è¡¨è¾¾å¼æ ¼å¼"></a>è¡¨è¾¾å¼æ ¼å¼</h1><p>åœ¨<code>Java8</code>è¯­è¨€ä¸­å¼•å…¥çš„ä¸€ç§æ–°çš„è¯­è¨€å…ƒç´ å’Œæ“ä½œç¬¦ï¼Œè¿™ä¸ªæ“ä½œç¬¦ä¸º<code>-&gt;</code>ï¼Œè¯¥æ“ä½œç¬¦è¢«ç§°ä¸º<code>Lambda</code>æ“ä½œç¬¦æˆ–ç®­å¤´æ“ä½œç¬¦,å®ƒå°†<code>Lambda</code>åˆ†ä¸ºä»¥ä¸‹ä¸¤ä¸ªéƒ¨åˆ†</p><ol><li>å·¦ä¾§ : æŒ‡å®š<code>Lambda</code>è¡¨è¾¾å¼éœ€è¦çš„å‚æ•°åˆ—è¡¨</li><li>å³ä¾§ : åˆ¶å®šäº†<code>Lambda</code>ä½“,æ˜¯æŠ½è±¡æ–¹æ³•çš„å®ç°é€»è¾‘ï¼Œä¹Ÿæ—¢<code>Lambda</code>è¡¨è¾¾å¼è¦æ‰§è¡Œçš„åŠŸèƒ½</li></ol><p>è¡¨è¾¾å¼çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(parameters) -&gt; expression</span><br><span class="line">æˆ–</span><br><span class="line">(parameters) -&gt;&#123; statements; &#125;</span><br></pre></td></tr></table></figure><p>æœ¬è´¨ï¼šä½œä¸ºæ¥å£çš„å®ä¾‹</p><h1 id="ç‰¹å¾"><a href="#ç‰¹å¾" class="headerlink" title="ç‰¹å¾"></a>ç‰¹å¾</h1><ul><li>å¯é€‰ç±»å‹å£°æ˜ : ä¸éœ€è¦å£°æ˜å‚æ•°ç±»å‹,ç¼–è¯‘å™¨å¯ä»¥ç»Ÿä¸€è¯†åˆ«å‚æ•°å€¼</li><li>å¯é€‰çš„å‚æ•°åœ†æ‹¬å· : <strong>ä¸€ä¸ªå‚æ•°æ— éœ€å®šä¹‰åœ†æ‹¬å·,ä½†å¤šä¸ªå‚æ•°éœ€è¦å®šä¹‰åœ†æ‹¬å·</strong></li><li>å¯é€‰çš„å¤§æ‹¬å· : å¦‚æœä¸»ä½“åŒ…å«äº†ä¸€ä¸ªè¯­å¥,å°±ä¸éœ€è¦ä½¿ç”¨å¤§æ‹¬å·</li><li>å¯é€‰çš„è¿”å›å…³é”®å­— : <strong>å¦‚æœä¸»ä½“åªæœ‰ä¸€ä¸ªè¡¨è¾¾å¼è¿”å›å€¼åˆ™ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¿”å›å€¼,å¤§æ‹¬å·éœ€è¦æŒ‡å®šæ˜è¡¨è¾¾å¼è¿”å›äº†ä¸€ä¸ªæ•°å€¼</strong></li></ul><h1 id="ç”¨äºå†…éƒ¨ç±»çš„è¯­æ³•"><a href="#ç”¨äºå†…éƒ¨ç±»çš„è¯­æ³•" class="headerlink" title="ç”¨äºå†…éƒ¨ç±»çš„è¯­æ³•"></a>ç”¨äºå†…éƒ¨ç±»çš„è¯­æ³•</h1><h2 id="æ— å‚-æ— è¿”å›å€¼"><a href="#æ— å‚-æ— è¿”å›å€¼" class="headerlink" title="æ— å‚,æ— è¿”å›å€¼"></a>æ— å‚,æ— è¿”å›å€¼</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Runnable r1 = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Test1&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">r1.run();</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Runnable r2 = () -&gt; System.out.println(<span class="string">&quot;Test1&quot;</span>);</span><br><span class="line">r2.run();</span><br></pre></td></tr></table></figure><h2 id="éœ€è¦ä¸€ä¸ªå‚æ•°-ä½†æ˜¯æ²¡æœ‰è¿”å›å€¼"><a href="#éœ€è¦ä¸€ä¸ªå‚æ•°-ä½†æ˜¯æ²¡æœ‰è¿”å›å€¼" class="headerlink" title="éœ€è¦ä¸€ä¸ªå‚æ•°,ä½†æ˜¯æ²¡æœ‰è¿”å›å€¼"></a>éœ€è¦ä¸€ä¸ªå‚æ•°,ä½†æ˜¯æ²¡æœ‰è¿”å›å€¼</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Consumer&lt;String&gt; c1 = <span class="keyword">new</span> Consumer&lt;String&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">c1.accept(<span class="string">&quot;Test2&quot;</span>);</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Consumer&lt;String&gt; c2 = (String s) -&gt; &#123;</span><br><span class="line">    System.out.println(s);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">c2.accept(<span class="string">&quot;Test2&quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="æ•°æ®ç±»å‹å¯ä»¥çœç•¥"><a href="#æ•°æ®ç±»å‹å¯ä»¥çœç•¥" class="headerlink" title="æ•°æ®ç±»å‹å¯ä»¥çœç•¥"></a>æ•°æ®ç±»å‹å¯ä»¥çœç•¥</h2><p>æ•°æ®ç±»å‹å¯ä»¥çœç•¥ï¼Œå› ä¸ºå¯ç”±ç¼–è¯‘å™¨æ¨æ–­å¾—å‡º,ç§°ä¸ºâ€ç±»å‹æ¨æ–­â€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Consumer&lt;String&gt; c1 = <span class="keyword">new</span> Consumer&lt;String&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">c1.accept(<span class="string">&quot;Test2&quot;</span>);</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Consumer&lt;String&gt; c2 = (s) -&gt; &#123;</span><br><span class="line">    System.out.println(s);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">c2.accept(<span class="string">&quot;Test2&quot;</span>);</span><br></pre></td></tr></table></figure><p>å…¶ä»–â€ç±»å‹æ¨æ–­â€ä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();</span></span><br><span class="line">ArrayList&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">//int[] arr = new int[]&#123;1,2,3&#125;;</span></span><br><span class="line"><span class="keyword">int</span> [] arr = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br></pre></td></tr></table></figure><h2 id="è‹¥éœ€è¦ä¸€ä¸ªå‚æ•°æ—¶-å‚æ•°çš„å°æ‹¬å·å¯ä»¥çœç•¥"><a href="#è‹¥éœ€è¦ä¸€ä¸ªå‚æ•°æ—¶-å‚æ•°çš„å°æ‹¬å·å¯ä»¥çœç•¥" class="headerlink" title="è‹¥éœ€è¦ä¸€ä¸ªå‚æ•°æ—¶,å‚æ•°çš„å°æ‹¬å·å¯ä»¥çœç•¥"></a>è‹¥éœ€è¦ä¸€ä¸ªå‚æ•°æ—¶,å‚æ•°çš„å°æ‹¬å·å¯ä»¥çœç•¥</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Consumer&lt;String&gt; c1 = <span class="keyword">new</span> Consumer&lt;String&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">c1.accept(<span class="string">&quot;Test2&quot;</span>);</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Consumer&lt;String&gt; c2 = s -&gt; &#123;</span><br><span class="line">    System.out.println(s);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">c2.accept(<span class="string">&quot;Test2&quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="éœ€è¦ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„å‚æ•°-å¤šæ¡æ‰§è¡Œè¯­å¥-å¹¶ä¸”å¯ä»¥æœ‰è¿”å›å€¼"><a href="#éœ€è¦ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„å‚æ•°-å¤šæ¡æ‰§è¡Œè¯­å¥-å¹¶ä¸”å¯ä»¥æœ‰è¿”å›å€¼" class="headerlink" title="éœ€è¦ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„å‚æ•°,å¤šæ¡æ‰§è¡Œè¯­å¥,å¹¶ä¸”å¯ä»¥æœ‰è¿”å›å€¼"></a>éœ€è¦ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„å‚æ•°,å¤šæ¡æ‰§è¡Œè¯­å¥,å¹¶ä¸”å¯ä»¥æœ‰è¿”å›å€¼</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Comparator&lt;Integer&gt; com1 = <span class="keyword">new</span> Comparator&lt;Integer&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Integer o1, Integer o2)</span> </span>&#123;</span><br><span class="line">        System.out.println(o1);</span><br><span class="line">        System.out.println(o2);</span><br><span class="line">        <span class="keyword">return</span> o1.compareTo(o2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Comparator&lt;Integer&gt; com2 = (o1, o2) -&gt;&#123;</span><br><span class="line">    System.out.println(o1);</span><br><span class="line">    System.out.println(o2);</span><br><span class="line">    <span class="keyword">return</span> o1.compareTo(o2);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="Lambdaä½“åªæœ‰ä¸€æ¡è¯­å¥æ—¶-returnä¸å¤§æ‹¬å·è‹¥æœ‰-éƒ½å¯ä»¥çœç•¥"><a href="#Lambdaä½“åªæœ‰ä¸€æ¡è¯­å¥æ—¶-returnä¸å¤§æ‹¬å·è‹¥æœ‰-éƒ½å¯ä»¥çœç•¥" class="headerlink" title="Lambdaä½“åªæœ‰ä¸€æ¡è¯­å¥æ—¶,returnä¸å¤§æ‹¬å·è‹¥æœ‰,éƒ½å¯ä»¥çœç•¥"></a>Lambdaä½“åªæœ‰ä¸€æ¡è¯­å¥æ—¶,returnä¸å¤§æ‹¬å·è‹¥æœ‰,éƒ½å¯ä»¥çœç•¥</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Comparator&lt;Integer&gt; comparator = <span class="keyword">new</span> Comparator&lt;Integer&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Integer x, Integer y)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> Integer.compare(x, y);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">System.out.println(comparator.compare(<span class="number">1</span>, <span class="number">2</span>));</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Comparator&lt;Integer&gt; comparator = (x, y) -&gt; Integer.compare(x, y);</span><br><span class="line">System.out.println(comparator.compare(<span class="number">1</span>, <span class="number">2</span>));</span><br></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Comparator&lt;Integer&gt; comparator = Integer::compare;</span><br></pre></td></tr></table></figure><p>åŒå†’å·è¿ç®—å°±æ˜¯<code>Java</code>ä¸­çš„[æ–¹æ³•å¼•ç”¨],[æ–¹æ³•å¼•ç”¨]çš„æ ¼å¼æ˜¯ <strong>ç±»å::æ–¹æ³•å</strong>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è°ƒç”¨å®ä¾‹personçš„getNameæ–¹æ³•</span></span><br><span class="line">person -&gt; person.getName();</span><br><span class="line"></span><br><span class="line">Person::getName</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">() -&gt; <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">HashMap::<span class="keyword">new</span></span><br></pre></td></tr></table></figure><hr><p>å‚è€ƒ:</p><p><a href="https://www.runoob.com/java/java8-lambda-expressions.html">Java 8 Lambda è¡¨è¾¾å¼ | èœé¸Ÿæ•™ç¨‹</a></p><p><a href="https://github.com/YUbuntu0109/YUbuntu0109.github.io/blob/HexoBackup/source/_posts/JDK-8æ–°ç‰¹æ€§ä¹‹Lambdaè¡¨è¾¾å¼çš„åŸºæœ¬è¯­æ³•.md">JDK-8æ–°ç‰¹æ€§ä¹‹Lambdaè¡¨è¾¾å¼çš„åŸºæœ¬è¯­æ³•.md</a></p><hr>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lambda </tag>
            
            <tag> Jdk8 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>synchronizedä¿è¯çº¿ç¨‹å®‰å…¨</title>
      <link href="/2019/08/26/synchronized%E4%BF%9D%E8%AF%81%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/"/>
      <url>/2019/08/26/synchronized%E4%BF%9D%E8%AF%81%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/</url>
      
        <content type="html"><![CDATA[<p>synchronizedç¬”è®°</p><span id="more"></span><h1 id="çº¿ç¨‹å®‰å…¨"><a href="#çº¿ç¨‹å®‰å…¨" class="headerlink" title="çº¿ç¨‹å®‰å…¨"></a>çº¿ç¨‹å®‰å…¨</h1><h2 id="ä¸»è¦è¯±å› "><a href="#ä¸»è¦è¯±å› " class="headerlink" title="ä¸»è¦è¯±å› "></a>ä¸»è¦è¯±å› </h2><ul><li>å­˜åœ¨å…±äº«æ•°æ®(ä¹Ÿç§°ä¸´ç•Œèµ„æº)</li><li>å­˜åœ¨å¤šæ¡çº¿ç¨‹å…±åŒæ“ä½œå…±äº«æ•°æ®</li></ul><h2 id="è§£å†³é—®é¢˜æ ¹æœ¬"><a href="#è§£å†³é—®é¢˜æ ¹æœ¬" class="headerlink" title="è§£å†³é—®é¢˜æ ¹æœ¬"></a>è§£å†³é—®é¢˜æ ¹æœ¬</h2><p><strong>åŒä¸€æ—¶åˆ»æœ‰ä¸”åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨æ“ä½œå…±äº«æ•°æ®ï¼Œå…¶ä»–çº¿ç¨‹å¿…é¡»ç­‰åˆ°è¯¥çº¿ç¨‹å¤„ç†å®Œæ•°æ®åå†å¯¹å…±äº«æ•°æ®è¿›è¡Œæ“ä½œ</strong>ã€‚æ‰€ä»¥å¯ä»¥å¼•å…¥äº’æ–¥é”å»è§£å†³é—®é¢˜</p><h3 id="äº’æ–¥é”"><a href="#äº’æ–¥é”" class="headerlink" title="äº’æ–¥é”"></a>äº’æ–¥é”</h3><ul><li><p>äº’æ–¥æ€§ï¼šå³åœ¨åŒä¸€æ—¶é—´åªå…è®¸ä¸€ä¸ªçº¿ç¨‹æŒæœ‰æŸä¸ªå¯¹è±¡é”ï¼Œé€šè¿‡è¿™ç§ç‰¹æ€§æ¥å®ç°å¤šçº¿ç¨‹çš„åè°ƒæœºåˆ¶ï¼Œ<strong>è¿™æ ·åœ¨åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹éœ€è¦åŒæ­¥çš„ä»£ç å—ï¼ˆå¤åˆæ“ä½œï¼‰è¿›è¡Œè®¿é—®</strong>ã€‚äº’æ–¥æ€§ä¹Ÿç§°ä¸ºæ“ä½œçš„åŸå­æ€§ã€‚</p></li><li><p>å¯è§æ€§ï¼šå¿…é¡»ç¡®ä¿åœ¨é”è¢«é‡Šæ”¾ä¹‹å‰ï¼Œå¯¹å…±äº«å˜é‡æ‰€åšçš„ä¿®æ”¹ï¼Œå¯¹äºéšåè·å¾—è¯¥é”çš„å¦ä¸€ä¸ªçº¿ç¨‹æ˜¯å¯è§çš„ï¼ˆå³<strong>åœ¨è·å¾—é”æ—¶åº”è·å¾—æœ€æ–°å…±äº«å˜é‡çš„å€¼</strong>ï¼‰ï¼Œå¦åˆ™å¦ä¸€ä¸ªçº¿ç¨‹å¯èƒ½æ˜¯åœ¨æœ¬åœ°ç¼“å­˜çš„æŸä¸ªå‰¯æœ¬ä¸Šç»§ç»­æ“ä½œï¼Œä»è€Œå¼•èµ·ä¸ä¸€è‡´ã€‚</p></li></ul><hr><p>åœ¨ Java ä¸­ï¼Œå…³é”®å­—<code>synchronized</code>å¯ä»¥ä¿è¯<strong>åœ¨åŒä¸€ä¸ªæ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ‰§è¡ŒæŸä¸ªæ–¹æ³•æˆ–è€…æŸä¸ªä»£ç å—</strong>(ä¸»è¦æ˜¯å¯¹æ–¹æ³•æˆ–è€…ä»£ç å—ä¸­å­˜åœ¨å…±äº«æ•°æ®çš„æ“ä½œ)ï¼ŒåŒæ—¶æˆ‘ä»¬è¿˜åº”è¯¥æ³¨æ„åˆ°<code>synchronized</code>å¦å¤–ä¸€ä¸ªé‡è¦çš„ä½œç”¨ï¼Œ<code>synchronized</code>å¯<strong>ä¿è¯ä¸€ä¸ªçº¿ç¨‹çš„å˜åŒ–(ä¸»è¦æ˜¯å…±äº«æ•°æ®çš„å˜åŒ–)è¢«å…¶ä»–çº¿ç¨‹æ‰€çœ‹åˆ°</strong>ï¼ˆä¿è¯å¯è§æ€§ï¼Œå®Œå…¨å¯ä»¥æ›¿ä»£<code>Volatile</code>åŠŸèƒ½ï¼‰ï¼Œè¿™ç‚¹ç¡®å®ä¹Ÿæ˜¯å¾ˆé‡è¦çš„</p><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><p>Javaè¯­è¨€çš„å…³é”®å­—ï¼Œå¯ç”¨æ¥ç»™<strong>å¯¹è±¡</strong>å’Œ<strong>æ–¹æ³•æˆ–è€…ä»£ç å—</strong>åŠ é”ï¼ˆ<strong>æ³¨æ„ï¼Œè¿™é‡ŒåŠ é”æ˜¯è¯´å¯ä»¥ç”¨åœ¨å¯¹è±¡æˆ–ä»£ç å—ä¸Šé¢ï¼Œä½†æ˜¯<code>synchronized</code>é”çš„æ˜¯å¯¹è±¡ï¼Œä¸æ˜¯ä»£ç ï¼Œé‡è¦ï¼ï¼ï¼</strong>ï¼‰ï¼Œå½“å®ƒé”å®šä¸€ä¸ªæ–¹æ³•æˆ–è€…ä¸€ä¸ªä»£ç å—çš„æ—¶å€™ï¼ŒåŒä¸€æ—¶åˆ»æœ€å¤šåªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè¿™æ®µä»£ç ã€‚</p><p>å½“ä¸¤ä¸ªå¹¶å‘çº¿ç¨‹è®¿é—®åŒä¸€ä¸ªå¯¹è±¡objectä¸­çš„è¿™ä¸ªåŠ é”åŒæ­¥ä»£ç å—æ—¶ï¼Œä¸€ä¸ªæ—¶é—´å†…åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å¾—åˆ°æ‰§è¡Œã€‚å¦ä¸€ä¸ªçº¿ç¨‹å¿…é¡»ç­‰å¾…å½“å‰çº¿ç¨‹æ‰§è¡Œå®Œè¿™ä¸ªä»£ç å—ä»¥åæ‰èƒ½æ‰§è¡Œè¯¥ä»£ç å—ã€‚ç„¶è€Œï¼Œ<strong>å½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®objectçš„ä¸€ä¸ªåŠ é”ä»£ç å—æ—¶ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ä»å¯ä»¥è®¿é—®è¯¥objectä¸­çš„éåŠ é”ä»£ç å—</strong>ã€‚</p><h1 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h1><p>æ ¹æ®è·å–çš„é”çš„åˆ†ç±»ï¼šè·å–å¯¹è±¡é”å’Œç±»é”</p><h2 id="å¯¹è±¡é”"><a href="#å¯¹è±¡é”" class="headerlink" title="å¯¹è±¡é”"></a>å¯¹è±¡é”</h2><p>è·å–å¯¹è±¡é”çš„ä¸¤ç§ç”¨æ³•ï¼š</p><ol><li>åŒæ­¥ä»£ç å—ï¼ˆ<code>synchronized(this)</code>ï¼Œ<code>synchronized(ç±»å®ä¾‹å¯¹è±¡)</code>ï¼‰ï¼Œ<strong>é”æ˜¯å°æ‹¬å·()ä¸­çš„å®ä¾‹å¯¹è±¡</strong>ã€‚</li><li>åŒæ­¥éé™æ€æ–¹æ³•ï¼ˆ<code>synchronized method</code>ï¼‰ï¼Œ<strong>é”æ˜¯å½“å‰å¯¹è±¡çš„å®ä¾‹å¯¹è±¡</strong>ã€‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> indi.greenhat.thread;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯¹æŸä¸ªå¯¹è±¡åŠ é”</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> GreenHatHG</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Synchronized_01</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count = <span class="number">10</span>;</span><br><span class="line">    <span class="comment">//objæŒ‡å‘å †å†…å­˜ç§newå‡ºæ¥çš„å¯¹è±¡</span></span><br><span class="line">    <span class="comment">//è€Œsynchronizedé”çš„åœ¨å †å†…å­˜ä¸­newå‡ºæ¥çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯objçš„å¼•ç”¨</span></span><br><span class="line">    <span class="comment">//å¦‚æœobjæŒ‡å‘åˆ«çš„å¯¹è±¡ï¼Œé‚£ä¹ˆé”çš„å¯¹è±¡å°±å˜äº†</span></span><br><span class="line">    <span class="comment">//ä¹Ÿå°±æ˜¯è¯´ç”³è¯·é”çš„æ—¶å€™ï¼Œç”³è¯·é”çš„ä¿¡æ¯æ˜¯è®°å½•åœ¨å †å†…å­˜å¯¹è±¡é‡Œé¢çš„</span></span><br><span class="line">    <span class="keyword">private</span> Object obj = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//ä»»ä½•çº¿ç¨‹æƒ³è¦æ‰§è¡Œä¸‹é¢ä»£ç ï¼Œå¿…é¡»å…ˆæ‹¿åˆ°objçš„é”</span></span><br><span class="line">        <span class="comment">//ä¹Ÿå¯ä»¥å†™æˆsychronized(this)</span></span><br><span class="line">        <span class="keyword">synchronized</span> (obj)&#123;</span><br><span class="line">            count--;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; count = &quot;</span> + count);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç±»é”"><a href="#ç±»é”" class="headerlink" title="ç±»é”"></a>ç±»é”</h2><p>è·å–ç±»é”çš„ä¸¤ç§ç”¨æ³•ï¼š</p><ol><li>åŒæ­¥ä»£ç å—ï¼ˆ<code>synchronized(ç±».class)</code>ï¼‰ï¼Œ<strong>é”æ˜¯å°æ‹¬å·()ä¸­çš„ç±»å¯¹è±¡</strong>(<code>Class</code>å¯¹è±¡)ã€‚</li><li>åŒæ­¥é™æ€æ–¹æ³•ï¼ˆ<code>synchronized static method</code>ï¼‰ï¼Œ<strong>é”æ˜¯å½“å‰å¯¹è±¡çš„ç±»å¯¹è±¡</strong>(Classå¯¹è±¡)ã€‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> indi.greenhat.thread;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> GreenHatHG</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Synchronized_02</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> count = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿™é‡Œç­‰åŒäºsynchronized (Synchronized_02.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        count--;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot; count = &quot;</span> + count);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//è¿™é‡Œä¸èƒ½å†™(synchronized)</span></span><br><span class="line">        <span class="comment">//å› ä¸ºé™æ€æ–¹æ³•æ²¡æœ‰newå¯¹è±¡</span></span><br><span class="line">        <span class="keyword">synchronized</span> (Synchronized_02.class)&#123;</span><br><span class="line">            count--;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; count = &quot;</span> + count);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åŒæ­¥ä¸éåŒæ­¥æ··ç”¨"><a href="#åŒæ­¥ä¸éåŒæ­¥æ··ç”¨" class="headerlink" title="åŒæ­¥ä¸éåŒæ­¥æ··ç”¨"></a>åŒæ­¥ä¸éåŒæ­¥æ··ç”¨</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> indi.greenhat.thread;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åŒæ­¥ä¸éåŒæ­¥æ··ç”¨ï¼Œå‡ºç°è„è¯»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> GreenHatHG</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Synchronized_03</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    String name;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½™é¢</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">double</span> balance;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(String name, <span class="keyword">double</span> balance)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//æ”¾å¤§2ä¸ªçº¿ç¨‹çš„é—´éš”ï¼Œæ›´åŠ æ˜¾ç¤ºé”™è¯¯</span></span><br><span class="line">            Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.balance = balance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getBalance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.balance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Synchronized_03 account = <span class="keyword">new</span> Synchronized_03();</span><br><span class="line">        <span class="keyword">new</span> Thread(()-&gt;account.set(<span class="string">&quot;zhangsan&quot;</span>, <span class="number">100.0</span>)).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(account.getBalance());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(account.getBalance());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0.0</span><br><span class="line">100.0</span><br></pre></td></tr></table></figure><p>åªå¯¹å†™åŠ é”ï¼Œè€Œä¸å¯¹è¯»åŠ é”ï¼Œå¯èƒ½äº§ç”Ÿè„è¯»ç°è±¡ï¼Œè™½ç„¶é”äº†<code>set()</code>ï¼Œä½†æ˜¯<code>getBalance()</code>å¹¶æ²¡æœ‰ã€‚æ‰€ä»¥æ­£ç¡®çš„æ€è·¯å°±æ˜¯å¯¹è¯»å’Œå†™éƒ½åŠ é”ã€‚</p><h1 id="å¯é‡å…¥"><a href="#å¯é‡å…¥" class="headerlink" title="å¯é‡å…¥"></a>å¯é‡å…¥</h1><p>ä¸€ä¸ªåŒæ­¥æ–¹æ³•å¯ä»¥è°ƒç”¨å¦å¤–ä¸€ä¸ªåŒæ­¥æ–¹æ³•ï¼Œä¸€ä¸ªçº¿ç¨‹å·²ç»æ‹¥æœ‰æŸä¸ªå¯¹è±¡çš„é”ï¼Œå†æ¬¡ç”³è¯·çš„æ—¶å€™ä»ç„¶ä¼šå¾—åˆ°è¯¥å¯¹è±¡çš„é”ï¼Œä¹Ÿå°±æ˜¯è¯´<code>synchronized</code>è·å¾—çš„é”æ˜¯å¯é‡å…¥çš„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> indi.greenhat.thread;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯é‡å…¥</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> GreenHatHG</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Synchronized_04</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">m1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;m1 start&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        m2();</span><br><span class="line">        System.out.println(<span class="string">&quot;m1 end&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">m2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;m2 start&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;m2 end&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Synchronized_04().m1();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">m1 start</span><br><span class="line">m2 start</span><br><span class="line">m2 end</span><br><span class="line">m1 end</span><br></pre></td></tr></table></figure><hr><p>å‚è€ƒï¼š</p><p><a href="https://juejin.im/post/5c9f782de51d4534c15b711f">Javaå¹¶å‘ç¼–ç¨‹â€”synchronizedä¿è¯çº¿ç¨‹å®‰å…¨çš„åŸç†åˆ†æ - æ˜é‡‘</a></p><hr>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
            <tag> synchronized </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaçº¿ç¨‹çš„çŠ¶æ€</title>
      <link href="/2019/08/04/Java%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%8A%B6%E6%80%81/"/>
      <url>/2019/08/04/Java%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%8A%B6%E6%80%81/</url>
      
        <content type="html"><![CDATA[<p>çº¿ç¨‹çš„6ç§çŠ¶æ€ï¼Œsleepä¸waitçš„åŒºåˆ«ï¼Œnotifyä¸notifyAllçš„åŒºåˆ«ï¼Œyieldï¼Œä¸­æ–­çº¿ç¨‹</p><span id="more"></span><h1 id="çº¿ç¨‹çš„çŠ¶æ€"><a href="#çº¿ç¨‹çš„çŠ¶æ€" class="headerlink" title="çº¿ç¨‹çš„çŠ¶æ€"></a>çº¿ç¨‹çš„çŠ¶æ€</h1><h2 id="åˆè¯†6ç§çŠ¶æ€"><a href="#åˆè¯†6ç§çŠ¶æ€" class="headerlink" title="åˆè¯†6ç§çŠ¶æ€"></a>åˆè¯†6ç§çŠ¶æ€</h2><p>ç”±jdk8ä¸­çš„<code>java.lang.Thread.State</code>å¯çŸ¥ï¼Œ</p><p><img src="/2019/08/04/Java%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%8A%B6%E6%80%81/4.png" alt></p><p>çº¿ç¨‹æœ‰6ä¸ªçŠ¶æ€</p><ul><li>NEW<br>å°šæœªå¯åŠ¨çš„çº¿ç¨‹å¤„äºæ­¤çŠ¶æ€ã€‚</li><li>RUNNABLE<br>åœ¨Javaè™šæ‹Ÿæœºä¸­æ‰§è¡Œçš„çº¿ç¨‹å¤„äºæ­¤çŠ¶æ€ã€‚</li><li>BLOCKED<br>è¢«é˜»å¡ç­‰å¾…ç›‘è§†å™¨é”å®šçš„çº¿ç¨‹å¤„äºæ­¤çŠ¶æ€ã€‚</li><li>WAITING<br>æ­£åœ¨ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œç‰¹å®šåŠ¨ä½œçš„çº¿ç¨‹å¤„äºæ­¤çŠ¶æ€ã€‚</li><li>TIMED_WAITING<br>æ­£åœ¨ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒåŠ¨ä½œè¾¾åˆ°æŒ‡å®šç­‰å¾…æ—¶é—´çš„çº¿ç¨‹å¤„äºæ­¤çŠ¶æ€ã€‚</li><li>TERMINATED<br>å·²é€€å‡ºçš„çº¿ç¨‹å¤„äºæ­¤çŠ¶æ€ã€‚</li></ul><p>ä¸€ä¸ªçº¿ç¨‹å¯ä»¥åœ¨ç»™å®šæ—¶é—´ç‚¹å¤„äºä¸€ä¸ªçŠ¶æ€ã€‚ è¿™äº›çŠ¶æ€æ˜¯ä¸åæ˜ ä»»ä½•æ“ä½œç³»ç»Ÿçº¿ç¨‹çŠ¶æ€çš„è™šæ‹ŸæœºçŠ¶æ€ã€‚</p><p><code>Thread.State</code>ç»§æ‰¿å…³ç³»ï¼š</p><blockquote><p>public static enum Thread.State extends Enum<Thread.State></Thread.State></p><p>java.lang.Object</p><p>â€‹    java.lang.Enum<Thread.State></Thread.State></p><p>â€‹        java.lang.Thread.State</p></blockquote><p><img src="/2019/08/04/Java%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%8A%B6%E6%80%81/1.png" alt></p><p>(å›¾æºï¼š<a href="https://www.cnblogs.com/doit8791/p/9067073.html">Javaçº¿ç¨‹åŠçº¿ç¨‹æ± çŠ¶æ€ - æ—¶é—´æœ‹å‹ - åšå®¢å›­</a>)</p><p><img src="/2019/08/04/Java%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%8A%B6%E6%80%81/2.jpg" alt></p><p>(å›¾æºï¼š<a href="http://www.ishenping.com/ArtInfo/1194756.htmll">çº¿ç¨‹çŠ¶æ€ - ç¥è¯„ç½‘</a>)</p><h2 id="6ç§çŠ¶æ€è§£é‡Š"><a href="#6ç§çŠ¶æ€è§£é‡Š" class="headerlink" title="6ç§çŠ¶æ€è§£é‡Š"></a>6ç§çŠ¶æ€è§£é‡Š</h2><h3 id="åˆå§‹-NEW"><a href="#åˆå§‹-NEW" class="headerlink" title="åˆå§‹(NEW)"></a>åˆå§‹(NEW)</h3><p>æ–°åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡ï¼Œä½†è¿˜æ²¡æœ‰è°ƒç”¨<code>start()</code>æ–¹æ³•ã€‚</p><p>å®ç°<code>Runnable</code>æ¥å£å’Œç»§æ‰¿<code>Thread</code>å¯ä»¥å¾—åˆ°ä¸€ä¸ªçº¿ç¨‹ç±»ï¼Œ<code>new</code>ä¸€ä¸ªå®ä¾‹å‡ºæ¥ï¼Œçº¿ç¨‹å°±è¿›å…¥äº†åˆå§‹çŠ¶æ€ã€‚</p><h3 id="è¿è¡Œ-RUNNABLE"><a href="#è¿è¡Œ-RUNNABLE" class="headerlink" title="è¿è¡Œ(RUNNABLE)"></a>è¿è¡Œ(RUNNABLE)</h3><p><strong><code>Java</code>çº¿ç¨‹ä¸­å°†å°±ç»ªï¼ˆ<code>ready</code>ï¼‰å’Œè¿è¡Œä¸­ï¼ˆ<code>running</code>ï¼‰ä¸¤ç§çŠ¶æ€ç¬¼ç»Ÿçš„ç§°ä¸ºâ€œè¿è¡Œâ€ã€‚</strong></p><ul><li><p>çº¿ç¨‹å¯¹è±¡åˆ›å»ºåï¼Œå…¶ä»–çº¿ç¨‹(æ¯”å¦‚<code>main</code>çº¿ç¨‹ï¼‰è°ƒç”¨äº†è¯¥å¯¹è±¡çš„<code>start()</code>æ–¹æ³•ã€‚è¯¥çŠ¶æ€çš„çº¿ç¨‹ä½äºå¯è¿è¡Œçº¿ç¨‹æ± ä¸­ï¼Œç­‰å¾…è¢«çº¿ç¨‹è°ƒåº¦é€‰ä¸­ï¼Œè·å–<code>CPU</code>çš„ä½¿ç”¨æƒï¼Œæ­¤æ—¶å¤„äºå°±ç»ªçŠ¶æ€ï¼ˆ<code>ready</code>ï¼‰ã€‚å°±ç»ªçŠ¶æ€åªæ˜¯è¯´ä½ èµ„æ ¼è¿è¡Œï¼Œè°ƒåº¦ç¨‹åºæ²¡æœ‰æŒ‘é€‰åˆ°ä½ ï¼Œä½ å°±æ°¸è¿œæ˜¯å°±ç»ªçŠ¶æ€ã€‚é™¤äº†<code>start()</code>æ–¹æ³•è®©çº¿ç¨‹è¿›å…¥å°±ç»ªçŠ¶æ€ï¼Œä¸‹é¢ä¸‰ç§æƒ…å†µä¹Ÿå¯ä»¥ï¼š</p><ul><li>å½“å‰çº¿ç¨‹<code>sleep()</code>æ–¹æ³•ç»“æŸï¼Œå…¶ä»–çº¿ç¨‹<code>join(</code>)ç»“æŸï¼Œç­‰å¾…ç”¨æˆ·è¾“å…¥å®Œæ¯•ï¼ŒæŸä¸ªçº¿ç¨‹æ‹¿åˆ°å¯¹è±¡é”ï¼Œè¿™äº›çº¿ç¨‹ä¹Ÿå°†è¿›å…¥å°±ç»ªçŠ¶æ€ã€‚</li><li>å½“å‰çº¿ç¨‹æ—¶é—´ç‰‡ç”¨å®Œäº†ï¼Œè°ƒç”¨å½“å‰çº¿ç¨‹çš„<code>yield()</code>æ–¹æ³•ï¼Œå½“å‰çº¿ç¨‹è¿›å…¥å°±ç»ªçŠ¶æ€ã€‚</li><li>é”æ± é‡Œçš„çº¿ç¨‹æ‹¿åˆ°å¯¹è±¡é”åï¼Œè¿›å…¥å°±ç»ªçŠ¶æ€ã€‚</li></ul></li><li><p>å°±ç»ªçŠ¶æ€çš„çº¿ç¨‹åœ¨è·å¾—CPUæ—¶é—´ç‰‡åå˜ä¸ºè¿è¡Œä¸­çŠ¶æ€ï¼ˆ<code>running</code>ï¼‰ã€‚</p></li></ul><h3 id="é˜»å¡-BLOCKED"><a href="#é˜»å¡-BLOCKED" class="headerlink" title="é˜»å¡(BLOCKED)"></a>é˜»å¡(BLOCKED)</h3><p>è¡¨ç¤ºçº¿ç¨‹é˜»å¡äºé”ã€‚</p><p>æ˜¯çº¿ç¨‹é˜»å¡åœ¨è¿›å…¥<code>synchronized</code>å…³é”®å­—ä¿®é¥°çš„æ–¹æ³•æˆ–ä»£ç å—(è·å–é”)æ—¶çš„çŠ¶æ€ã€‚</p><h3 id="ç­‰å¾…-WAITING"><a href="#ç­‰å¾…-WAITING" class="headerlink" title="ç­‰å¾…(WAITING)"></a>ç­‰å¾…(WAITING)</h3><p>è¿›å…¥è¯¥çŠ¶æ€çš„çº¿ç¨‹éœ€è¦ç­‰å¾…å…¶ä»–çº¿ç¨‹åšå‡ºä¸€äº›ç‰¹å®šåŠ¨ä½œï¼ˆé€šçŸ¥æˆ–ä¸­æ–­ï¼‰ã€‚</p><p>å¤„äºè¿™ç§çŠ¶æ€çš„çº¿ç¨‹ä¸ä¼šè¢«åˆ†é…<code>CPU</code>æ‰§è¡Œæ—¶é—´ï¼Œå®ƒä»¬è¦ç­‰å¾…è¢«æ˜¾å¼åœ°å”¤é†’ï¼Œå¦åˆ™ä¼šå¤„äºæ— é™æœŸç­‰å¾…çš„çŠ¶æ€ã€‚</p><h3 id="è¶…æ—¶ç­‰å¾…-TIMED-WAITING"><a href="#è¶…æ—¶ç­‰å¾…-TIMED-WAITING" class="headerlink" title="è¶…æ—¶ç­‰å¾…(TIMED_WAITING)"></a>è¶…æ—¶ç­‰å¾…(TIMED_WAITING)</h3><p>è¯¥çŠ¶æ€ä¸åŒäº<code>WAITING</code>ï¼Œå®ƒå¯ä»¥åœ¨æŒ‡å®šçš„æ—¶é—´åè‡ªè¡Œè¿”å›ã€‚</p><p><em>å¤„äºè¿™ç§çŠ¶æ€çš„çº¿ç¨‹ä¸ä¼šè¢«åˆ†é…CPUæ‰§è¡Œæ—¶é—´ï¼Œä¸è¿‡æ— é¡»æ— é™æœŸç­‰å¾…è¢«å…¶ä»–çº¿ç¨‹æ˜¾ç¤ºåœ°å”¤é†’ï¼Œåœ¨è¾¾åˆ°ä¸€å®šæ—¶é—´åå®ƒä»¬ä¼šè‡ªåŠ¨å”¤é†’ã€‚</em></p><h3 id="ç»ˆæ­¢-TERMINATED"><a href="#ç»ˆæ­¢-TERMINATED" class="headerlink" title="ç»ˆæ­¢(TERMINATED)"></a>ç»ˆæ­¢(TERMINATED)</h3><p>è¡¨ç¤ºè¯¥çº¿ç¨‹å·²ç»æ‰§è¡Œå®Œæ¯•ã€‚</p><ol><li><p>å½“çº¿ç¨‹çš„<code>run()</code>æ–¹æ³•å®Œæˆæ—¶ï¼Œæˆ–è€…ä¸»çº¿ç¨‹çš„<code>main()</code>æ–¹æ³•å®Œæˆæ—¶ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºå®ƒç»ˆæ­¢äº†ã€‚è¿™ä¸ªçº¿ç¨‹å¯¹è±¡ä¹Ÿè®¸æ˜¯æ´»çš„ï¼Œä½†æ˜¯ï¼Œå®ƒå·²ç»ä¸æ˜¯ä¸€ä¸ªå•ç‹¬æ‰§è¡Œçš„çº¿ç¨‹ã€‚çº¿ç¨‹ä¸€æ—¦ç»ˆæ­¢äº†ï¼Œå°±ä¸èƒ½å¤ç”Ÿã€‚</p></li><li><p>åœ¨ä¸€ä¸ªç»ˆæ­¢çš„çº¿ç¨‹ä¸Šè°ƒç”¨<code>start()</code>æ–¹æ³•ï¼Œä¼šæŠ›å‡º<code>java.lang.IllegalThreadStateException</code>å¼‚å¸¸ã€‚</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> thread;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> GreenHatHG</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2019-08-04 10:52</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo01</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">attack</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Fight&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Current Thread is: &quot;</span> + Thread.currentThread().getName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread t = <span class="keyword">new</span> Thread()&#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">                attack();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        System.out.println(<span class="string">&quot;Current main thread is: &quot;</span> + Thread.currentThread().getName());</span><br><span class="line">        t.start();</span><br><span class="line">        <span class="comment">//ç»“æŸçº¿ç¨‹</span></span><br><span class="line">        t.join();</span><br><span class="line">        <span class="comment">//çº¿ç¨‹ä¸ä¼šå¤æ´»ï¼ŒæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">        t.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Current main thread is: main</span><br><span class="line">Fight</span><br><span class="line">Current Thread is: Thread-<span class="number">0</span></span><br><span class="line">Exception in thread <span class="string">&quot;main&quot;</span> java.lang.IllegalThreadStateException</span><br><span class="line">at java.lang.Thread.start(Thread.java:<span class="number">708</span>)</span><br><span class="line">at thread.demo01.main(demo01.java:<span class="number">24</span>)</span><br></pre></td></tr></table></figure><p><img src="/2019/08/04/Java%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%8A%B6%E6%80%81/3.jpeg" alt></p><p>(å›¾æºï¼š<a href="http://www.ishenping.com/ArtInfo/1194756.htmll">Javaçº¿ç¨‹çš„6ç§çŠ¶æ€åŠåˆ‡æ¢(é€å½»è®²è§£) - æ½˜å»ºå—çš„åšå®¢ - CSDNåšå®¢</a>)</p><h1 id="sleepä¸waitçš„åŒºåˆ«"><a href="#sleepä¸waitçš„åŒºåˆ«" class="headerlink" title="sleepä¸waitçš„åŒºåˆ«"></a>sleepä¸waitçš„åŒºåˆ«</h1><ul><li><code>jdk8</code>ä¸­çš„<code>sleep</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯¼è‡´å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ä¼‘çœ ï¼ˆæš‚æ—¶åœæ­¢æ‰§è¡Œï¼‰æŒ‡å®šçš„æ¯«ç§’æ•°</span></span><br><span class="line"><span class="comment"> * å…·ä½“å–å†³äºç³»ç»Ÿè®¡æ—¶å™¨å’Œè°ƒåº¦ç¨‹åºçš„ç²¾åº¦å’Œå‡†ç¡®æ€§ã€‚</span></span><br><span class="line"><span class="comment"> * è¯¥çº¿ç¨‹ä¸ä¼šå¤±å»ä»»ä½•monitorçš„æ‰€æœ‰æƒã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">java.lang.<span class="function">Thread <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sleep</span><span class="params">(<span class="keyword">long</span> millis)</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> InterruptedException</span></span><br></pre></td></tr></table></figure><ul><li><code>jdk8</code>ä¸­çš„<code>wait</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java.lang.<span class="function">Object <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">wait</span><span class="params">(<span class="keyword">long</span> timeout)</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> InterruptedException</span></span><br></pre></td></tr></table></figure><p>åŒºåˆ«ï¼š</p><ol><li><p><code>sleep</code>æ˜¯<code>Thread</code>ç±»çš„æ–¹æ³•,<code>wait</code>æ˜¯<code>Object</code>ç±»ä¸­å®šä¹‰çš„æ–¹æ³•</p></li><li><p><code>sleep</code>å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨ï¼› è€Œ<code>wait</code>åªèƒ½åœ¨<code>synchronize</code>æ–¹æ³•æˆ–è€…<code>synchronize</code>å—ä¸­ä½¿ç”¨</p></li><li><strong><code>Thread.sleep</code>åªä¼šè®©å‡º<code>CPU</code>ï¼Œä¸ä¼šå¯¼è‡´é”è¡Œä¸ºçš„æ”¹å˜ï¼›<code>Object.wait</code>ä¸ä»…è®©å‡º<code>CPU</code>ï¼Œè¿˜ä¼šé‡Šæ”¾å·²ç»å æœ‰çš„åŒæ­¥èµ„æºé”</strong></li></ol><p>æ€»ç»“èµ·æ¥å°±æ˜¯ï¼š</p><ul><li><code>sleep</code>æ–¹æ³•æ˜¯<code>Thread</code>ç±»é‡Œé¢çš„ï¼Œä¸»è¦çš„æ„ä¹‰å°±æ˜¯è®©å½“å‰çº¿ç¨‹åœæ­¢æ‰§è¡Œï¼Œè®©å‡º<code>CPU</code>ç»™å…¶ä»–çš„çº¿ç¨‹ï¼Œä½†æ˜¯ä¸ä¼šé‡Šæ”¾å¯¹è±¡é”èµ„æºä»¥åŠç›‘æ§çš„çŠ¶æ€ï¼Œå½“æŒ‡å®šçš„æ—¶é—´åˆ°äº†ä¹‹ååˆä¼šè‡ªåŠ¨æ¢å¤è¿è¡ŒçŠ¶æ€ã€‚</li><li><code>wait</code>æ–¹æ³•æ˜¯<code>Object</code>ç±»é‡Œé¢çš„ï¼Œä¸»è¦çš„æ„ä¹‰å°±æ˜¯è®©çº¿ç¨‹æ”¾å¼ƒå½“å‰çš„å¯¹è±¡çš„é”ï¼Œè¿›å…¥ç­‰å¾…æ­¤å¯¹è±¡çš„ç­‰å¾…é”å®šæ± ï¼Œåªæœ‰é’ˆå¯¹æ­¤å¯¹è±¡è°ƒåŠ¨<code>notify</code>æ–¹æ³•åæœ¬çº¿ç¨‹æ‰èƒ½å¤Ÿè¿›å…¥å¯¹è±¡é”å®šæ± å‡†å¤‡è·å–å¯¹è±¡é”è¿›å…¥è¿è¡ŒçŠ¶æ€ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> thread;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> GreenHatHG</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> sleepä¸wait</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2019-08-05 15:14</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Object lock = <span class="keyword">new</span> Object();</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;Thread A is waiting to get lock&quot;</span>);</span><br><span class="line">                    <span class="comment">//è·å–åŒæ­¥é”æ‰èƒ½æ‰§è¡Œé‡Œé¢çš„ä»£ç </span></span><br><span class="line">                    <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;Thread A get lock&quot;</span>);</span><br><span class="line">                        Thread.sleep(<span class="number">30</span>);</span><br><span class="line">                        System.out.println(<span class="string">&quot;Thread A do wait method&quot;</span>);</span><br><span class="line">                        <span class="comment">//ç­‰å¾…1sè‡ªåŠ¨è¢«å”¤é†’</span></span><br><span class="line">                        lock.wait(<span class="number">1000</span>);</span><br><span class="line">                        System.out.println(<span class="string">&quot;Thread A is done&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//ç¬¬ä¸€ä¸ªçº¿ç¨‹å¼€å¯åï¼Œsleep 10 mså†å¼€å¯ç¬¬äºŒä¸ªçº¿ç¨‹</span></span><br><span class="line">            Thread.sleep(<span class="number">10</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;Thread B is waiting to get lock&quot;</span>);</span><br><span class="line">                    <span class="comment">//è·å–åŒæ­¥é”æ‰èƒ½æ‰§è¡Œé‡Œé¢çš„ä»£ç </span></span><br><span class="line">                    <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;Thread B get lock&quot;</span>);</span><br><span class="line">                        System.out.println(<span class="string">&quot;Thread B is sleeping 10 ms&quot;</span>);</span><br><span class="line">                        Thread.sleep(<span class="number">10</span>);</span><br><span class="line">                        System.out.println(<span class="string">&quot;Thread B is done&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Thread A is waiting to get lock</span><br><span class="line">Thread A get lock</span><br><span class="line">Thread B is waiting to get lock</span><br><span class="line">Thread A <span class="keyword">do</span> wait method</span><br><span class="line">Thread B get lock</span><br><span class="line">Thread B is sleeping <span class="number">10</span> ms</span><br><span class="line">Thread B is done</span><br><span class="line">Thread A is done</span><br></pre></td></tr></table></figure><p><img src="/2019/08/04/Java%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%8A%B6%E6%80%81/5.png" alt></p><h1 id="notifyä¸notifyAllçš„åŒºåˆ«"><a href="#notifyä¸notifyAllçš„åŒºåˆ«" class="headerlink" title="notifyä¸notifyAllçš„åŒºåˆ«"></a>notifyä¸notifyAllçš„åŒºåˆ«</h1><p>ä¸Šé¢çš„ä¾‹å­åªæ˜¯åœ¨çº¿ç¨‹1çš„æ—¶å€™åªæ˜¯<code>lock.wait(1000);</code>ï¼Œå¦‚æœæˆ‘ä»¬æŠŠå®ƒæ”¹ä¸º<code>lock.wait();</code>é‚£ä¹ˆå°±ä¼šè¿›å…¥æ— é™æœŸçŠ¶æ€ï¼Œéœ€è¦å”¤é†’æ‰èƒ½æ‰§è¡Œä¸‹ä¸€æ­¥ï¼Œæ‰€ä»¥ç¨‹åºå°±ä¸ä¼šåœä¸‹æ¥ï¼Œè¿™æ—¶å€™åœ¨çº¿ç¨‹2çš„<code>synchronized</code>ä»£ç å—é‡Œé¢çš„æœ€åä¸€è¡ŒåŠ ä¸€ä¸ª<code>lock.notify()</code>æˆ–è€…<code>lock.notifyAll()</code>å°±å¯ä»¥è®©ç¨‹åºæ­£å¸¸ç»ˆæ­¢</p><hr><p>ä¸ºäº†äº†è§£ä¸¤è€…åŒºåˆ«ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“å¦‚ä¸‹æ¦‚å¿µï¼Œé”æ± (<code>EntryList</code>)å’Œç­‰å¾…æ± (<code>WaitSet</code>)</p><h2 id="é”æ± "><a href="#é”æ± " class="headerlink" title="é”æ± "></a>é”æ± </h2><p>å¦‚æœçº¿ç¨‹Aæ‹¥æœ‰äº†æŸä¸ªå¯¹è±¡çš„é”çš„è¯ï¼Œå…¶ä»–çº¿ç¨‹Bã€Cæƒ³è°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„<code>synchronized</code>æ–¹æ³•ï¼ˆæˆ–è€…è¿›å…¥æ–¹æ³•å—ï¼‰çš„è¯ï¼Œå°±å¿…é¡»è·å¾—è¯¥å¯¹è±¡é”çš„æ‹¥æœ‰æƒã€‚</p><p>è€Œè¿™æ—¶è¯¥å¯¹è±¡çš„é”è¢«çº¿ç¨‹Aé”å ç”¨ï¼Œå› æ­¤Bã€Cçº¿ç¨‹å°±ä¼šè¢«é˜»å¡ï¼Œè¿›å…¥åˆ°ä¸€ä¸ªåœ°æ–¹ç­‰å¾…é”çš„é‡Šæ”¾ï¼Œè¿™ä¸ªåœ°æ–¹å°±æ˜¯é”æ± ã€‚</p><h2 id="ç­‰å¾…æ± "><a href="#ç­‰å¾…æ± " class="headerlink" title="ç­‰å¾…æ± "></a>ç­‰å¾…æ± </h2><p>å‡è®¾çº¿ç¨‹Aè°ƒç”¨äº†æŸä¸ªå¯¹è±¡çš„<code>wait()</code>æ–¹æ³•ï¼Œçº¿ç¨‹Aå°±ä¼šé‡Šæ”¾è¯¥å¯¹è±¡çš„é”ï¼ŒåŒæ—¶çº¿ç¨‹Aå°±è¿›å…¥åˆ°è¯¥å¯¹è±¡çš„ç­‰å¾…æ± ä¸­ï¼Œè¿›å…¥ç­‰å¾…æ± çš„çº¿ç¨‹éƒ½ä¸ä¼šå»ç«äº‰è¯¥å¯¹è±¡çš„é”ã€‚</p><h2 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java.lang.<span class="function">Object <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">notify</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function">java.lang.Object <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">notifyAll</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure><p><strong><code>notify</code>å’Œ<code>notifyAll</code>çš„ä½œç”¨å°±æ˜¯åœ¨æŸä¸ªçº¿ç¨‹è°ƒç”¨äº†<code>wait()</code>æ–¹æ³•ä¹‹åï¼Œå¯¹ç­‰å¾…æ± ä¸­çš„è¿™äº›çº¿ç¨‹è¿›è¡Œä¸€ä¸ªå”¤é†’æ“ä½œ</strong>ï¼ŒåŒºåˆ«å°±æ˜¯</p><p><strong><code>notify</code></strong>åªä¼šéšæœºé€‰å–ä¸€ä¸ªå¤„äºç­‰å¾…æ± ä¸­çš„çº¿ç¨‹è¿›å…¥é”æ± å»ç«äº‰è·å–é”çš„æœºä¼š</p><p><strong><code>notifyAl</code>l</strong>ä¼šè®©æ‰€æœ‰å¤„äºç­‰å¾…æ± çš„çº¿ç¨‹å…¨éƒ¨è¿›å…¥é”æ± å»ç«äº‰è·å–é”çš„æœºä¼š</p><h1 id="yield"><a href="#yield" class="headerlink" title="yield"></a>yield</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.lang.<span class="function">Thread <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">yield</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure><p>å½“è°ƒç”¨<code>Thread.yield</code>å‡½æ•°æ—¶ï¼Œä¼šç»™çº¿ç¨‹è°ƒåº¦å™¨ä¸€ä¸ªå½“å‰çº¿ç¨‹æ„¿æ„è®©å‡º<code>CPU</code>ä½¿ç”¨çš„æš—ç¤ºï¼Œä½†æ˜¯çº¿ç¨‹è°ƒåº¦å™¨å¯èƒ½ä¼šå¿½ç•¥è¿™ä¸ªæš—ç¤ºã€‚å¯¹å·²æœ‰çš„é”ä¸äº§ç”Ÿå½±å“ã€‚</p><p>ä¸‹é¢è¿™ä¸ªä»£ç ä¸»è¦æ˜¯åˆ¤æ–­åœ¨iç­‰äº5çš„æ—¶å€™å½“å‰çº¿ç¨‹ä¼šä¸ä¼šè®©ä½ç»™åˆ«çš„çº¿ç¨‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> thread;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> GreenHatHG</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> yield</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2019-08-06 9:40</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo03</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Runnable yieldTask = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++)&#123;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + i);</span><br><span class="line">                    <span class="keyword">if</span>(i == <span class="number">5</span>)&#123;</span><br><span class="line">                        Thread.yield();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(yieldTask, <span class="string">&quot;A&quot;</span>);</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread(yieldTask, <span class="string">&quot;B&quot;</span>);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">A1</span><br><span class="line">A2</span><br><span class="line">A3</span><br><span class="line">A4</span><br><span class="line">A5</span><br><span class="line">B1</span><br><span class="line">B2</span><br><span class="line">B3</span><br><span class="line">B4</span><br><span class="line">B5</span><br><span class="line">B6</span><br><span class="line">B7</span><br><span class="line">B8</span><br><span class="line">B9</span><br><span class="line">B10</span><br><span class="line">A6</span><br><span class="line">A7</span><br><span class="line">A8</span><br><span class="line">A9</span><br><span class="line">A10</span><br></pre></td></tr></table></figure><h1 id="ä¸­æ–­çº¿ç¨‹"><a href="#ä¸­æ–­çº¿ç¨‹" class="headerlink" title="ä¸­æ–­çº¿ç¨‹"></a>ä¸­æ–­çº¿ç¨‹</h1><ul><li><code>Thread.stop</code>, <code>Thread.suspend</code>, <code>Thread.resume</code></li></ul><p>éƒ½å·²ç»è¢«åºŸå¼ƒäº†ã€‚å› ä¸ºå®ƒä»¬å¤ªæš´åŠ›äº†ï¼Œæ˜¯ä¸å®‰å…¨çš„ï¼Œè¿™ç§æš´åŠ›ä¸­æ–­çº¿ç¨‹æ˜¯ä¸€ç§ä¸å®‰å…¨çš„æ“ä½œï¼Œä¼šå¼•å‘éš¾ä»¥é¢„æœŸçš„å¼‚å¸¸ã€‚</p><ul><li><code>interrupt</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.lang.<span class="function">Thread <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">interrupt</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure><p>ç›®å‰åº”è¯¥ç”¨çš„æ˜¯<code>interrupt()</code>æ–¹æ³•ï¼Œå®ƒæ˜¯é€šçŸ¥çº¿ç¨‹åº”è¯¥ä¸­æ–­äº†ï¼š</p><ul><li>å¦‚æœçº¿ç¨‹å¤„äºé˜»å¡çŠ¶æ€ï¼Œé‚£ä¹ˆçº¿ç¨‹å°†ç«‹å³é€€å‡ºè¢«é˜»å¡çš„çŠ¶æ€ï¼Œå¹¶æŠ›å‡ºä¸€ä¸ª<code>InterruptedException</code>å¼‚å¸¸ã€‚</li><li>å¦‚æœçº¿ç¨‹å¤„äºæ­£å¸¸æ´»åŠ¨çŠ¶æ€ï¼Œé‚£ä¹ˆä¼šå°†è¯¥çº¿ç¨‹çš„ä¸­æ–­æ ‡å¿—è®¾ç½®ä¸º<code>true</code>ã€‚è¢«è®¾ç½®ä¸­æ–­æ ‡å¿—çš„çº¿ç¨‹å°†ç»§ç»­æ­£å¸¸è¿è¡Œï¼Œä¸å—å½±å“</li></ul><p><strong>interrupt() å¹¶ä¸èƒ½çœŸæ­£çš„ä¸­æ–­çº¿ç¨‹ï¼Œè¿™ç‚¹è¦è°¨è®°ã€‚éœ€è¦è¢«è°ƒç”¨çš„çº¿ç¨‹è‡ªå·±è¿›è¡Œé…åˆæ‰è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªçº¿ç¨‹å¦‚æœæœ‰è¢«ä¸­æ–­çš„éœ€æ±‚ï¼Œé‚£ä¹ˆå°±éœ€è¦è¿™æ ·åšï¼š</strong></p><ul><li><p>åœ¨æ­£å¸¸è¿è¡Œä»»åŠ¡æ—¶ï¼Œç»å¸¸æ£€æŸ¥æœ¬çº¿ç¨‹çš„ä¸­æ–­æ ‡å¿—ä½ï¼Œå¦‚æœè¢«è®¾ç½®äº†ä¸­æ–­æ ‡å¿—å°±è‡ªè¡Œåœæ­¢çº¿ç¨‹ã€‚</p></li><li><p>åœ¨è°ƒç”¨é˜»å¡æ–¹æ³•æ—¶æ­£ç¡®å¤„ç†<code>InterruptedException</code>å¼‚å¸¸ã€‚ï¼ˆä¾‹å¦‚ï¼šcatchå¼‚å¸¸åå°±ç»“æŸçº¿ç¨‹ã€‚ï¼‰</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> thread;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> GreenHatHG</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> interrupt</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2019-08-06 16:37</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo04</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Runnable interruptTask = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">//æ­£å¸¸è¿è¡Œæ—¶ï¼Œç»å¸¸æ£€æŸ¥æœ¬çº¿ç¨‹çš„ä¸­æ–­æ ‡å¿—ä½</span></span><br><span class="line">                    <span class="comment">//å¦‚æœè¢«è®¾ç½®äº†ä¸­æ–­æ ‡å¿—å°±è‡ªè¡Œåœæ­¢çº¿ç¨‹</span></span><br><span class="line">                    <span class="keyword">while</span> (!Thread.currentThread().isInterrupted()) &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                        i++;</span><br><span class="line">                        System.out.println(Thread.currentThread().getName()</span><br><span class="line">                                + <span class="string">&quot;(&quot;</span> + Thread.currentThread().getState()</span><br><span class="line">                                + <span class="string">&quot;) loop&quot;</span> + i);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    <span class="comment">//åœ¨è°ƒç”¨é˜»å¡æ–¹æ³•æ—¶æ­£ç¡®å¤„ç†InterruptedExceptionå¼‚å¸¸ã€‚</span></span><br><span class="line">                    <span class="comment">//ä¾‹å¦‚catchå¼‚å¸¸åå°±ç»“æŸçº¿ç¨‹</span></span><br><span class="line">                    System.out.println(Thread.currentThread().getName()</span><br><span class="line">                            + <span class="string">&quot;(&quot;</span> + Thread.currentThread().getState()</span><br><span class="line">                            + <span class="string">&quot;) catch InterruptedException&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(interruptTask, <span class="string">&quot;t1&quot;</span>);</span><br><span class="line">        System.out.println(t1.getName() + <span class="string">&quot;(&quot;</span> + t1.getState() + <span class="string">&quot;) is new&quot;</span>);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        System.out.println(t1.getName() + <span class="string">&quot;(&quot;</span> + t1.getState() + <span class="string">&quot;) is started&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¸»çº¿ç¨‹ä¼‘çœ 300sï¼Œç„¶åä¸»çº¿ç¨‹ç»™t1å‘ä¸­æ–­æŒ‡ä»¤</span></span><br><span class="line">        Thread.sleep(<span class="number">300</span>);</span><br><span class="line">        t1.interrupt();</span><br><span class="line">        System.out.println(t1.getName() + <span class="string">&quot;(&quot;</span> + t1.getState() + <span class="string">&quot;) is interrupted&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¸»çº¿ç¨‹ä¼‘çœ 300msï¼Œç„¶åæŸ¥çœ‹t1çŠ¶æ€</span></span><br><span class="line">        Thread.sleep(<span class="number">300</span>);</span><br><span class="line">        System.out.println(t1.getName() + <span class="string">&quot;(&quot;</span> + t1.getState() + <span class="string">&quot;) is interrupted now&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">t1(NEW) <span class="function">is new</span></span><br><span class="line"><span class="function"><span class="title">t1</span><span class="params">(RUNNABLE)</span> is started</span></span><br><span class="line"><span class="function"><span class="title">t1</span><span class="params">(RUNNABLE)</span> loop1</span></span><br><span class="line"><span class="function"><span class="title">t1</span><span class="params">(RUNNABLE)</span> loop2</span></span><br><span class="line"><span class="function"><span class="title">t1</span><span class="params">(TIMED_WAITING)</span> is interrupted</span></span><br><span class="line"><span class="function"><span class="title">t1</span><span class="params">(RUNNABLE)</span> <span class="keyword">catch</span> InterruptedException</span></span><br><span class="line"><span class="function"><span class="title">t1</span><span class="params">(TERMINATED)</span> is interrupted now</span></span><br></pre></td></tr></table></figure><p><img src="/2019/08/04/Java%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%8A%B6%E6%80%81/6.jpg" alt></p><p>(å›¾æºï¼š<a href="https://my.oschina.net/mingdongcheng/blog/139263">ä¸€å¼ å›¾è®©ä½ çœ‹æ‡‚JAVAçº¿ç¨‹é—´çš„çŠ¶æ€è½¬æ¢ - ç¨‹æ˜ä¸œ - OSCHINA</a>)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java.lang.<span class="function">Thread <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">join</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> InterruptedException</span></span><br></pre></td></tr></table></figure><p><em><code>thread.join</code>æŠŠæŒ‡å®šçš„çº¿ç¨‹åŠ å…¥åˆ°å½“å‰çº¿ç¨‹ï¼Œå¯ä»¥å°†ä¸¤ä¸ªäº¤æ›¿æ‰§è¡Œçš„çº¿ç¨‹åˆå¹¶ä¸ºé¡ºåºæ‰§è¡Œçš„çº¿ç¨‹ã€‚æ¯”å¦‚åœ¨çº¿ç¨‹Bä¸­è°ƒç”¨äº†çº¿ç¨‹Açš„<code>join()</code>æ–¹æ³•ï¼Œç›´åˆ°çº¿ç¨‹Aæ‰§è¡Œå®Œæ¯•åï¼Œæ‰ä¼šç»§ç»­æ‰§è¡Œçº¿ç¨‹Bã€‚</em></p><p>å‚è€ƒï¼š</p><p><a href="https://blog.csdn.net/pange1991/article/details/53860651">Javaçº¿ç¨‹çš„6ç§çŠ¶æ€åŠåˆ‡æ¢(é€å½»è®²è§£) - æ½˜å»ºå—çš„åšå®¢ - CSDNåšå®¢</a></p><p><a href="https://www.icode9.com/content-4-179207.html">é—®äºŒåï¼šè¯´è¯´notifyå’ŒnotifyAllçš„åŒºåˆ«ï¼Ÿ</a></p><p><a href="https://www.jianshu.com/p/e0ff2e420ab6">çº¿ç¨‹ä¸­æ–­æœºåˆ¶(interrupt) - ç®€ä¹¦</a></p><hr>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
            <tag> çº¿ç¨‹çš„çŠ¶æ€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å€å¢æ±‚LCA</title>
      <link href="/2019/07/27/%E5%80%8D%E5%A2%9E%E6%B1%82LCA/"/>
      <url>/2019/07/27/%E5%80%8D%E5%A2%9E%E6%B1%82LCA/</url>
      
        <content type="html"><![CDATA[<p>LCAâ€”æœ€è¿‘å…¬å…±ç¥–å…ˆ</p><span id="more"></span><h1 id="LCA"><a href="#LCA" class="headerlink" title="LCA"></a>LCA</h1><p>æ‰€è°“<code>LCA</code>ï¼Œæ˜¯å½“ç»™å®šä¸€ä¸ªæœ‰æ ¹æ ‘Tæ—¶ï¼Œå¯¹äºä»»æ„ä¸¤ä¸ªç»“ç‚¹uã€vï¼Œæ‰¾åˆ°ä¸€ä¸ªç¦»æ ¹æœ€è¿œçš„ç»“ç‚¹xï¼Œä½¿å¾—xåŒæ—¶æ˜¯uå’Œvçš„ç¥–å…ˆï¼Œx ä¾¿æ˜¯uã€vçš„æœ€è¿‘å…¬å…±ç¥–å…ˆï¼ˆåŸé—®é¢˜æ¶µç›–ä¸€èˆ¬æ€§çš„æœ‰æ ¹æ ‘ï¼Œä¸ºäº†ç®€åŒ–ï¼Œå¤šä½¿ç”¨äºŒå‰æ ‘æ¥è®¨è®ºï¼‰ã€‚ä¾‹å¦‚ä¸‹é¢ï¼š</p><p><img src="/2019/07/27/%E5%80%8D%E5%A2%9E%E6%B1%82LCA/1.jpg" alt></p><p>ç»“ç‚¹3å’Œç»“ç‚¹4çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯ç»“ç‚¹2ï¼Œå³LCAï¼ˆ3ï¼Œ 4ï¼‰=2 ã€‚åœ¨æ­¤ï¼Œéœ€è¦æ³¨æ„åˆ°å½“ä¸¤ä¸ªç»“ç‚¹åœ¨åŒä¸€æ£µå­æ ‘ä¸Šçš„æƒ…å†µï¼Œå¦‚ç»“ç‚¹3å’Œç»“ç‚¹2çš„æœ€è¿‘å…¬å…±ç¥–å…ˆä¸º2ï¼Œå³ LCAï¼ˆ3ï¼Œ2ï¼‰=2ã€‚åŒç†ï¼šLCAï¼ˆ5ï¼Œ6ï¼‰=4ï¼ŒLCAï¼ˆ6ï¼Œ10ï¼‰=1ã€‚</p><hr><p>æ±‚<code>LCA</code>çš„æ–¹æ³•ä¸»è¦æœ‰ï¼š</p><ol><li>å€å¢æ±‚<code>LCA</code></li><li><code>ST-RMQ</code>æ±‚<code>LCA</code></li><li><code>Tarjan</code>æ±‚<code>LCA</code></li></ol><p>å‰é¢ä¸¤è€…éƒ½æ˜¯åœ¨çº¿ç®—æ³•ï¼Œæœ€åä¸€ä¸ªæ˜¯ç¦»çº¿ç®—æ³•</p><blockquote><p><strong>åœ¨çº¿</strong>å’Œ<strong>ç¦»çº¿</strong>å¯ä»¥ç®€å•çš„ç†è§£ä¸º<strong>å¯¹äºæ‰€æœ‰çš„æ“ä½œæ˜¯å¦éœ€è¦è¯»å…¥å®Œæ¯•</strong>ã€‚</p><p>åœ¨çº¿çš„è¦æ±‚æ˜¯å¯ä»¥ä¸ç”¨å…ˆçŸ¥é“æ‰€æœ‰çš„æ“ä½œï¼ˆç±»ä¼¼è¯¢é—®ã€ä¿®æ”¹ï¼‰ï¼Œè¾¹è¯»å…¥è¾¹æ‰§è¡Œï¼Œç±»ä¼¼<strong>â€œèµ°ä¸€æ­¥ï¼Œåšä¸€æ­¥â€</strong>çš„æ€æƒ³ã€‚</p><p>ç¦»çº¿åˆ™ä¸åœ¨çº¿ç›¸åï¼Œè¦æ±‚å¿…é¡»çŸ¥é“æ‰€æœ‰çš„æ“ä½œï¼Œç±»ä¼¼<strong>â€œè®°å½•æ‰€æœ‰æ­¥ï¼Œå›å¤´å†åšâ€</strong>çš„æ€æƒ³ï¼Œä¸€èˆ¬ç”¨Query[]è®°å½•æ‰€æœ‰æ“ä½œ</p><p>è½¬è‡ªï¼š<a href="https://www.jianshu.com/p/2f21f9d125df">åœ¨çº¿å’Œç¦»çº¿ç®—æ³• - ç®€ä¹¦</a></p></blockquote><h1 id="å€å¢æ±‚LCA"><a href="#å€å¢æ±‚LCA" class="headerlink" title="å€å¢æ±‚LCA"></a>å€å¢æ±‚LCA</h1><h2 id="å€å¢ç®—æ³•"><a href="#å€å¢ç®—æ³•" class="headerlink" title="å€å¢ç®—æ³•"></a>å€å¢ç®—æ³•</h2><p>æ‰€è°“å€å¢ï¼Œå°±æ˜¯æŒ‰2çš„å€æ•°æ¥å¢å¤§ï¼Œä¹Ÿå°±æ˜¯è·³ <code>1,2,4,8,16,32 â€¦â€¦</code> ä¸è¿‡åœ¨è¿™æˆ‘ä»¬ä¸æ˜¯æŒ‰ä»å°åˆ°å¤§è·³ï¼Œè€Œæ˜¯ä»å¤§å‘å°è·³ï¼Œå³æŒ‰<code>â€¦â€¦32,16,8,4,2,1</code>æ¥è·³ï¼Œå¦‚æœå¤§çš„è·³ä¸è¿‡å»ï¼Œå†æŠŠå®ƒè°ƒå°ã€‚è¿™æ˜¯å› ä¸ºä»å°å¼€å§‹è·³ï¼Œå¯èƒ½ä¼šå‡ºç°â€œæ‚”æ£‹â€çš„ç°è±¡ã€‚æ‹¿ 5ä¸ºä¾‹ï¼Œä»å°å‘å¤§è·³ï¼Œ$5â‰ 1+2+4$,æ‰€ä»¥æˆ‘ä»¬è¿˜è¦å›æº¯ä¸€æ­¥ï¼Œç„¶åæ‰èƒ½å¾—å‡º$5=1+4$ï¼›è€Œä»å¤§å‘å°è·³ï¼Œç›´æ¥å¯ä»¥å¾—å‡º$5=4+1$ã€‚è¿™ä¹Ÿå¯ä»¥æ‹¿äºŒè¿›åˆ¶ä¸ºä¾‹ï¼Œ5(101)ï¼Œä»é«˜ä½å‘ä½ä½å¡«å¾ˆç®€å•ï¼Œå¦‚æœå¡«äº†è¿™ä½ä¹‹åæ¯”åŸæ•°å¤§äº†ï¼Œé‚£æˆ‘å°±ä¸å¡«ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯å¾ˆå¥½æ“ä½œçš„ã€‚</p><hr><h2 id="æ±‚LCA"><a href="#æ±‚LCA" class="headerlink" title="æ±‚LCA"></a>æ±‚LCA</h2><p>ç¨‹åºå¼€å§‹æ—¶é€‰å–ä»»æ„èŠ‚ç‚¹ä¸ºæ ‘æ ¹ï¼Œè¿›è¡Œ<code>dfs</code>ï¼Œå¾—åˆ°æ‰€æœ‰ç‚¹çš„æ·±åº¦ä¸<code>pre[i][j]</code>ã€‚<code>pre[i][j]</code> æŒ‡èŠ‚ç‚¹ i çš„ç¬¬ $2^j$ä¸ªç¥–å…ˆ</p><p><img src="/2019/07/27/%E5%80%8D%E5%A2%9E%E6%B1%82LCA/1.jpg" alt></p><p>å¦‚ä¸Šå›¾ä¸­ï¼Œ10 çš„ç¬¬ 1 ä¸ªç¥–å…ˆæ˜¯ 9ï¼Œç¬¬äºŒä¸ªç¥–å…ˆæ˜¯ 8ï¼Œç¬¬ä¸‰ä¸ªç¥–å…ˆæ˜¯ 7ï¼Œç¬¬å››ä¸ªç¥–å…ˆæ˜¯ 1ã€‚æ‰€ä»¥ 10 çš„ç¬¬ 2 çš„ 0 æ¬¡æ–¹ä¸ªç¥–å…ˆæ˜¯ 9($2^0=1$)ï¼Œ10 çš„ç¬¬ 2 çš„ 1 æ¬¡æ–¹ä¸ªç¥–å…ˆæ˜¯ 8($2^1=2$)ï¼Œ10 çš„ç¬¬ 2 çš„ 2 æ¬¡æ–¹ä¸ªç¥–å…ˆæ˜¯ 1($2^2=4$)ã€‚å¾ˆæ˜¾ç„¶ï¼Œ10 æ²¡æœ‰ 2 çš„ 3 æ¬¡æ–¹ä¸ªç¥–å…ˆã€‚æ‰€ä»¥<code>pre[10][0]=9,pre[10][1]=8,pre[10][2]=1</code></p><p>è€Œä¸”é€šè¿‡å€å¢çš„æ€æƒ³ï¼Œ<strong>æˆ‘ä»¬ä¸éš¾å‘ç° i çš„ç¬¬ $2^j$ ä¸ªç¥–å…ˆå°±æ˜¯ i çš„ç¬¬ $2^{j-1}$ä¸ªç¥–å…ˆçš„ç¬¬ $2^{j-1}$ä¸ªç¥–å…ˆï¼ˆ$j&gt;=1$ï¼‰ã€‚</strong></p><p>æ¯”å¦‚å½“<code>i=10ï¼Œj=1</code>çš„æ—¶å€™ï¼Œ<code>pre[10][1]=8</code>ï¼Œ<code>pre[10][0]=9</code>ï¼Œ<code>pre[9][0]=8</code>ï¼›æˆ–è€…ç”±ä¸‹é¢æ¨å‡º</p><p>$2^i = 2*2^{i-1} = 2^{i-1} + 2^{i-1}$</p><p><strong>æ‰€ä»¥<code>pre[i][j]=pre[pre[i][j-1]][j-1]</code></strong>ã€‚</p><p>æœ‰äº†è¿™ä¸ªè§„å¾‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ <code>dfs</code> ä¸­é¢„å¤„ç†æ‰€æœ‰çš„ pre äº†ï¼</p><hr><p>æœ‰äº†<code>pre</code>ï¼Œæ¥ç€çœ‹çœ‹æ€ä¹ˆæ±‚<code>LCA</code></p><p>xã€yåˆ†åˆ«æ˜¯æ ‘ä¸Šçš„ä¸¤ä¸ªç‚¹ï¼Œæ‰¾ä»–ä»¬çš„æœ€è¿‘çš„å…¬å…±ç¥–å…ˆ</p><p>å¼€å¤´ç”¨ä¸€ä¸ªåˆ¤æ–­ï¼Œè§„å®š x çš„æ·±åº¦ä¸€å®šæ¯” y å¤§ï¼Œå¦åˆ™å°±äº¤æ¢ä¸€ä¸‹ã€‚</p><ul><li>é¦–å…ˆè®© x å¾€ä¸Šè·³ï¼Œå»æ‰¾yçš„æ‰€åœ¨å±‚<ul><li>å¦‚æœ x å’Œ y é‡åˆäº†ï¼Œå°±å·²ç»æ˜¯ç­”æ¡ˆäº†</li></ul></li><li>å¦åˆ™ è®© x å’Œ y ä¸€èµ·å‘ä¸Šè·³ï¼Œç›´åˆ°æ‰¾åˆ°ç­”æ¡ˆ</li></ul><hr><h2 id="æ´›è°·-P3379æœ€è¿‘å…¬å…±ç¥–å…ˆ"><a href="#æ´›è°·-P3379æœ€è¿‘å…¬å…±ç¥–å…ˆ" class="headerlink" title="æ´›è°·-P3379æœ€è¿‘å…¬å…±ç¥–å…ˆ"></a><a href="https://www.luogu.org/problem/P3379">æ´›è°·-P3379æœ€è¿‘å…¬å…±ç¥–å…ˆ</a></h2><p><img src="/2019/07/27/%E5%80%8D%E5%A2%9E%E6%B1%82LCA/2.png" alt></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">P3379 ã€æ¨¡æ¿ã€‘æœ€è¿‘å…¬å…±ç¥–å…ˆï¼ˆLCAï¼‰</span></span><br><span class="line"><span class="comment">è¯„æµ‹çŠ¶æ€</span></span><br><span class="line"><span class="comment">Accepted</span></span><br><span class="line"><span class="comment">è¯„æµ‹åˆ†æ•°</span></span><br><span class="line"><span class="comment">100</span></span><br><span class="line"><span class="comment">æäº¤æ—¶é—´</span></span><br><span class="line"><span class="comment">2019-08-03 22:31:54</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">500005</span>;</span><br><span class="line"><span class="keyword">int</span> n, m, s, len = <span class="number">0</span>;</span><br><span class="line"><span class="comment">//dæ•°ç»„å­˜å‚¨çš„å°±æ˜¯æ¯ä¸ªèŠ‚ç‚¹çš„æ·±åº¦ï¼ˆé»˜è®¤æ ¹èŠ‚ç‚¹æ·±åº¦ä¸º1ï¼‰</span></span><br><span class="line"><span class="comment">//pre[i][j]: æŒ‡èŠ‚ç‚¹ i çš„ç¬¬ 2^jä¸ªç¥–å…ˆ</span></span><br><span class="line"><span class="comment">//hæ•°ç»„ï¼šé‚»æ¥è¡¨</span></span><br><span class="line"><span class="keyword">int</span> d[MAXN], pre[MAXN][<span class="number">30</span>], h[MAXN];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">nod</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> x, y, gg;</span><br><span class="line">&#125;b[MAXN*<span class="number">2</span>];<span class="comment">//å­˜è¾¹ï¼šåŒå‘è¾¹ï¼Œæ‰€ä»¥æ•°æ®è¦å¼€å¤Ÿ</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ins</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span><span class="comment">//é‚»æ¥è¡¨</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    len++;</span><br><span class="line">    b[len].x = x;</span><br><span class="line">    b[len].y = y;</span><br><span class="line">    b[len].gg = h[x];</span><br><span class="line">    h[x] = len;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span> <span class="comment">//x å»æ‰¾æ‰€æœ‰çš„ y</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = h[x]; i &gt; <span class="number">0</span>; i = b[i].gg)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> y = b[i].y;</span><br><span class="line">        <span class="keyword">if</span>(d[y] == <span class="number">0</span>) <span class="comment">// y æœªè¢«è®¿é—®è¿‡</span></span><br><span class="line">        &#123;</span><br><span class="line">            d[y] = d[x] + <span class="number">1</span>;<span class="comment">// y æ˜¯xçš„å„¿å­ï¼Œæ‰€ä»¥å±‚æ•°+1</span></span><br><span class="line">            pre[y][<span class="number">0</span>] = x; <span class="comment">// yå‘ä¸Šè·³ä¸€æ ¼ï¼Œä¸€å®šæ˜¯åˆ° x</span></span><br><span class="line">            <span class="built_in">dfs</span>(y);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> <span class="comment">//æŸ¥æ‰¾ x ä¸ y çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(d[x] &lt; d[y]) <span class="built_in">swap</span>(x,y);<span class="comment">// è¦æ±‚ x æ¯”è¾ƒæ·±ï¼Œ å»æ‰¾ y</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">20</span>; i&gt;=<span class="number">0</span>; i--) <span class="comment">//å…ˆè®© x è·³åˆ° y çš„åŒå±‚</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(d[pre[x][i]] &gt;= d[y])</span><br><span class="line">        &#123;</span><br><span class="line">            x = pre[x][i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(x == y) <span class="keyword">return</span> x; <span class="comment">//å¦‚æœé‡åˆï¼Œå°±å·²ç»ç»“æŸäº†</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">20</span>; i&gt;=<span class="number">0</span>; i--)<span class="comment">//ä¸é‡åˆï¼Œx å’Œ y ä¸€èµ·å¾€ä¸Šè·³</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(pre[x][i] != pre[y][i]) <span class="comment">//åªè¦çˆ¶äº²ä¸åŒï¼Œå°±è·³ï¼Œçˆ¶äº²ç›¸åŒï¼Œå°±åœäº†</span></span><br><span class="line">        &#123;                    <span class="comment">// æœ€åä¸€æ¬¡ï¼Œæ˜¯æ²¡æœ‰è·³ä¸Šå»çš„</span></span><br><span class="line">            x = pre[x][i];</span><br><span class="line">            y = pre[y][i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> pre[x][<span class="number">0</span>];<span class="comment">//è¦è¾“å‡ºï¼Œå¿…é¡»è¦è·³æœ€åä¸€æ¬¡</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>,&amp;n, &amp;m, &amp;s);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        h[i] = d[i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> x,y;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>,&amp;x,&amp;y);</span><br><span class="line">        <span class="built_in">ins</span>(x,y);</span><br><span class="line">        <span class="built_in">ins</span>(y,x);<span class="comment">//åŒå‘è¾¹</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é»˜è®¤æ ¹èŠ‚ç‚¹æ·±åº¦ä¸º1</span></span><br><span class="line">    d[s] = <span class="number">1</span>;</span><br><span class="line">    pre[s][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//æ„æ ‘ï¼šåˆ†å±‚+å€å¢</span></span><br><span class="line">    <span class="built_in">dfs</span>(s);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">20</span>; i++)<span class="comment">//å€å¢æ•°ç»„çš„å»ºç«‹ï¼Œè¿™é‡Œæ˜¯æ•´ä¸ªç®—æ³•çš„æ ¸å¿ƒ</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(x=<span class="number">1</span>; x&lt;=n; x++)</span><br><span class="line">        &#123;</span><br><span class="line">            pre[x][i] = pre[pre[x][i<span class="number">-1</span>]][i<span class="number">-1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; i++)<span class="comment">//è¯¢é—®</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;x, &amp;y);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">lca</span>(x, y));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‚è€ƒ:</p><p><a href="https://www.mina.moe/archives/401">ã€ç®—æ³•ã€‘å€å¢æ±‚ LCA â€“ MiNa!</a></p><p><a href="https://hangcc.cn/2018/11/12/è®¡è’œå®¢-èŠ‚ç‚¹æœ€è¿‘çš„å…¬å…±ç¥–å…ˆ/">èŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ ã€å€å¢ç®—æ³•ã€‘ | Hang_câ€™s Blog</a></p><p><a href="https://www.luogu.org/blog/cccx2016/solution-p3379">é¢˜è§£ P3379 liusu201601 çš„åšå®¢ - æ´›è°·åšå®¢</a></p><hr>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LCA </tag>
            
            <tag> å€å¢ </tag>
            
            <tag> ACMç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­å»ºNginxHttpsæœ¬åœ°æµ‹è¯•ç¯å¢ƒ</title>
      <link href="/2019/07/25/%E6%90%AD%E5%BB%BANginxHttps%E6%9C%AC%E5%9C%B0%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83/"/>
      <url>/2019/07/25/%E6%90%AD%E5%BB%BANginxHttps%E6%9C%AC%E5%9C%B0%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83/</url>
      
        <content type="html"><![CDATA[<p>åˆ©ç”¨nginxæ­å»ºä¸€ä¸ªhttpsæœ¬åœ°å¯ç”¨çš„åŸŸå</p><span id="more"></span><h1 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h1><p>åˆ©ç”¨åˆ°çš„å·¥å…·ï¼š</p><ul><li><p><a href="https://github.com/FiloSottile/mkcert">mkcertâ€”æœ¬åœ°ç”Ÿæˆæµè§ˆå™¨ä¿¡ä»»çš„æœ¬åœ° https è¯ä¹¦</a></p></li><li><p>Nginx</p></li><li>Dockerï¼ˆå¯é€‰ï¼‰</li></ul><p>æœ¬ç¯‡æ•™ç¨‹åˆ©ç”¨çš„æ˜¯<code>docker nginx</code>ï¼Œå®‰è£…ç‰ˆä¹Ÿä¸€æ ·çš„ï¼Œå·®ä¸å¤šã€‚</p><p>æœ¬åœ°ç¯å¢ƒï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æœ¬æœºï¼šArch Linux x86_64 5.2.2-arch1-1-ARCH</span><br><span class="line">Dockerï¼š Docker version 18.09.8-ce, build 0dd43dd87f</span><br><span class="line">Nginxï¼šstable-alpine</span><br></pre></td></tr></table></figure><h1 id="å®‰è£…mkcert"><a href="#å®‰è£…mkcert" class="headerlink" title="å®‰è£…mkcert"></a>å®‰è£…mkcert</h1><p>å…¶ä»–ç³»ç»Ÿçš„å®‰è£…æ–¹æ³•å¯ä»¥çœ‹<code>github</code>ä¸Šé¢çš„ä»‹ç»ï¼Œæœ¬æ¬¡æŒ‰ç…§çš„æ˜¯<code>Arch</code>ç³»ç»Ÿçš„å®‰è£…æ–¹æ³•ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S nss</span><br><span class="line">yay -S mkcert</span><br></pre></td></tr></table></figure><h1 id="ç”Ÿæˆè¯ä¹¦"><a href="#ç”Ÿæˆè¯ä¹¦" class="headerlink" title="ç”Ÿæˆè¯ä¹¦"></a>ç”Ÿæˆè¯ä¹¦</h1><ul><li><p>ç”ŸæˆCAï¼ˆcertificate authorityï¼Œå³è¯ä¹¦é¢å‘æœºæ„ï¼‰ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤å¯ä»¥åœ¨<code>~/.local/share/mkcert/</code>ç”Ÿæˆ<code>rootCA.pem</code>å’Œ<code>rootCA-key.pem</code>aä¸¤ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªå‘½ä»¤åªéœ€è¿è¡Œä¸€æ¬¡ï¼Œå› ä¸ºç”Ÿæˆçš„CAå¯ä»¥åå¤ä½¿ç”¨ï¼›</p><p>ä½¿ç”¨<code>mkcert -install</code>å‘½ä»¤å³å¯</p></li></ul><p><img src="/2019/07/25/%E6%90%AD%E5%BB%BANginxHttps%E6%9C%AC%E5%9C%B0%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83/1.png" alt></p><ul><li><p>åˆ›å»ºè‡ªç­¾åè¯ä¹¦ï¼Œä¾‹å¦‚è¦ä¸ºåŸŸåï¼š<code>hehe.com</code>å’ŒIPï¼š<code>127.0.0.1</code>åˆ›å»ºè¯ä¹¦ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„å‘½ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkcert hehe.com 127.0.0.1</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°å‘½ä»¤ä¼šè‡ªåŠ¨ä½¿ç”¨ç¬¬1æ­¥åˆ›å»ºçš„<code>CA</code>ç”Ÿæˆè¯ä¹¦æ–‡ä»¶ï¼Œå…¶ä¸­<code>xxx.pem</code>ä¸ºè¯ä¹¦ï¼Œ<code>xxx-key.pem</code>ä¸ºç§é’¥ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿    ç”¨<code>-cert-file</code>å’Œ<code>-key-file</code>ä¸¤ä¸ªå‚æ•°è®¾ç½®ç”Ÿæˆæ–‡ä»¶çš„æ–‡ä»¶åã€‚</p><p>æ³¨æ„ï¼šä¸ºäº†ä¾¿äºç®¡ç†ï¼Œå»ºè®®åœ¨å•ç‹¬ç›®å½•ä¸‹ç”Ÿæˆæœ¬åœ°è¯ä¹¦åŠå¯†é’¥*</p></li></ul><p><img src="/2019/07/25/%E6%90%AD%E5%BB%BANginxHttps%E6%9C%AC%E5%9C%B0%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83/2.png" alt></p><p>ç”Ÿæˆäº†è¯ä¹¦å’Œç§é’¥ä»¥åï¼Œå°±å¯ä»¥åœ¨webæœåŠ¡å™¨å¼€å¯httpsäº†</p><h1 id="Nginxå¼€å¯https"><a href="#Nginxå¼€å¯https" class="headerlink" title="Nginxå¼€å¯https"></a>Nginxå¼€å¯https</h1><h2 id="æ‹‰å–é•œåƒ"><a href="#æ‹‰å–é•œåƒ" class="headerlink" title="æ‹‰å–é•œåƒ"></a>æ‹‰å–é•œåƒ</h2><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦æ‹‰å–ä¸€ä¸ªé•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull nginx:stable-alpine</span><br></pre></td></tr></table></figure><p><img src="/2019/07/25/%E6%90%AD%E5%BB%BANginxHttps%E6%9C%AC%E5%9C%B0%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83/3.png" alt></p><h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><p><strong>éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œåœ¨<code>nginx docker</code>é‡Œé¢ï¼Œ<code>Nginx</code>é…ç½®æ–‡ä»¶åœ¨<code>/etc/nginx</code>ï¼Œé™æ€èµ„æºåœ¨<code>/usr/share/nginx/html</code></strong></p><p>è¿™é‡Œå‡†å¤‡ä¸€ä¸ª<code>Nginx</code>æ–‡ä»¶<code>default.conf</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       443;</span><br><span class="line">    server_name  hehe.com;</span><br><span class="line"></span><br><span class="line">    ssl on;</span><br><span class="line">    # ç›¸å¯¹äº/etc/nginx</span><br><span class="line">    ssl_certificate hehe.com+1.pem;</span><br><span class="line">    ssl_certificate_key hehe.com+1-key.pem;</span><br><span class="line">    </span><br><span class="line">    location / &#123;</span><br><span class="line">        root   /usr/share/nginx/html;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¯ç”¨docker"><a href="#å¯ç”¨docker" class="headerlink" title="å¯ç”¨docker"></a>å¯ç”¨docker</h2><p>ç„¶åå¯ç”¨é•œåƒï¼Œå¯åŠ¨é•œåƒçš„è¿‡ç¨‹ä¸­å¯ä»¥é…ç½®æ˜ å°„ï¼Œæ˜ å°„æˆ‘ä»¬çš„é™æ€èµ„æºæ–‡ä»¶å¤¹ï¼Œç«¯å£æ˜ å°„ä»¥åŠ<code>https</code>æ–‡ä»¶æ˜ å°„</p><p><img src="/2019/07/25/%E6%90%AD%E5%BB%BANginxHttps%E6%9C%AC%E5%9C%B0%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83/4.png" alt></p><p>æ›´å¤šå¯å‚è€ƒï¼š<a href="https://hub.docker.com/_/nginx">nginx - Docker Hub</a></p><p>è¿™é‡Œæœ¬åœ°é™æ€èµ„æºæ–‡ä»¶å¤¹ç›®å½•ä¸º<code>/home/cc/vue/ACMRecentContests_UI/dist</code>ï¼Œ<code>default.con</code>å’Œä¸¤ä¸ªç§˜é’¥åˆ†åˆ«æ˜¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/home/cc/https/hehe.com+1-key.pem</span><br><span class="line">/home/cc/https/hehe.com+1.pem</span><br><span class="line">/home/cc/https/default.conf</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ˜ å°„å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run --name nginx -d \</span><br><span class="line">-v nginx -v /home/cc/vue/ACMRecentContests_UI/dist:/usr/share/nginx/html:ro \</span><br><span class="line">-v /home/cc/https/hehe.com+1.pem:/etc/nginx/hehe.com+1.pem \</span><br><span class="line">-v /home/cc/https/hehe.com+1-key.pem:/etc/nginx/hehe.com+1-key.pem \</span><br><span class="line">-v /home/cc/https/default.conf:/etc/nginx/conf.d/default.conf \</span><br><span class="line">-p 9091:80 -p 9092:443 nginx:stable-alpine</span><br></pre></td></tr></table></figure><p><img src="/2019/07/25/%E6%90%AD%E5%BB%BANginxHttps%E6%9C%AC%E5%9C%B0%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83/5.png" alt></p><h1 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h1><h2 id="Chrome75"><a href="#Chrome75" class="headerlink" title="Chrome75"></a>Chrome75</h2><p><img src="/2019/07/25/%E6%90%AD%E5%BB%BANginxHttps%E6%9C%AC%E5%9C%B0%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83/6.png" alt></p><h2 id="Firefox69"><a href="#Firefox69" class="headerlink" title="Firefox69"></a>Firefox69</h2><p><img src="/2019/07/25/%E6%90%AD%E5%BB%BANginxHttps%E6%9C%AC%E5%9C%B0%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83/7.png" alt></p><h1 id="å…³äºdocker-nginxçš„å…¶ä»–å‘½ä»¤"><a href="#å…³äºdocker-nginxçš„å…¶ä»–å‘½ä»¤" class="headerlink" title="å…³äºdocker nginxçš„å…¶ä»–å‘½ä»¤"></a>å…³äºdocker nginxçš„å…¶ä»–å‘½ä»¤</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">å¯åŠ¨</span></span><br><span class="line">docker start nginx</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">åœæ­¢</span></span><br><span class="line">docker stop nginx</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">è¿›å…¥</span></span><br><span class="line">docker exec -it nginx sh</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">åˆ é™¤å®¹å™¨ï¼Œéœ€è¦å…ˆåœæ­¢</span></span><br><span class="line">docker rm nginx</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">åˆ é™¤é•œåƒ</span></span><br><span class="line">docker rmi nginx:stable-alpine</span><br></pre></td></tr></table></figure><hr><p>å‚è€ƒï¼š</p><p><a href="https://aeric.io/post/mkcert-valid-https-certificates-for-localhost/">mkcert:æœ¬åœ°æœ‰æ•ˆçš„httpsè¯ä¹¦-å•å•¸è…¾çš„åšå®¢</a></p><hr>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Arch </tag>
            
            <tag> Nginx </tag>
            
            <tag> Https </tag>
            
            <tag> åŸŸå </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaå¤šçº¿ç¨‹æ‹¾é—--startä¸run--Threadä¸Runnable</title>
      <link href="/2019/07/23/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%8B%BE%E9%81%97--start%E4%B8%8Erun--Thread%E4%B8%8ERunnable/"/>
      <url>/2019/07/23/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%8B%BE%E9%81%97--start%E4%B8%8Erun--Thread%E4%B8%8ERunnable/</url>
      
        <content type="html"><![CDATA[<p>å°è¯•ä»æºç åˆ†æstartä¸runçš„åŒºåˆ«ï¼ŒThreadä¸Runnableçš„åŒºåˆ«</p><span id="more"></span><h1 id="startä¸run"><a href="#startä¸run" class="headerlink" title="startä¸run"></a>startä¸run</h1><p>å…ˆæ¥çœ‹ä¸¤ä¸ªç¨‹åº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> indi.greenhat.thread;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: runableä¸startçš„åŒºåˆ«</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: GreenHatHG</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span>: 2019-07-23 09:02</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Thread1</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">attack</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;attack&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Current Thread is: &quot;</span> + Thread.currentThread().getName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread t = <span class="keyword">new</span> Thread()&#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">                attack();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;current main thread is: &quot;</span> + Thread.currentThread().getName());</span><br><span class="line">        t.run();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¨‹åºè¾“å‡º:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">current main thread is: main</span><br><span class="line">attack</span><br><span class="line">Current Thread is: main</span><br></pre></td></tr></table></figure><p>ç„¶åå¯åŠ¨çº¿ç¨‹é‚£é‡Œï¼Œæ”¹ä¸º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">t.start();</span><br><span class="line"><span class="comment">//ä¹‹å‰æ˜¯t.run()</span></span><br></pre></td></tr></table></figure><p>ç¨‹åºè¾“å‡º:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">current main thread is: main</span><br><span class="line">attack</span><br><span class="line">Current Thread is: Thread-<span class="number">0</span></span><br></pre></td></tr></table></figure><hr><p>ä»ç¨‹åºè¿è¡Œçš„ç»“æœå¾ˆç®€å•çš„çœ‹å‡ºï¼Œä½¿ç”¨<code>run()</code>æ–¹æ³•ä¼šä½¿ç”¨ä¸»çº¿ç¨‹æ¥è¿è¡Œï¼Œè€Œ<code>start()</code>æ–¹æ³•åˆ™ä½¿ç”¨éä¸»çº¿ç¨‹æ¥è¿è¡Œ</p><h2 id="start"><a href="#start" class="headerlink" title="start"></a>start</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Javaè™šæ‹Ÿæœºè°ƒç”¨æ­¤çº¿ç¨‹çš„runæ–¹æ³•ï¼Œä½¿è¯¥çº¿ç¨‹å¼€å§‹æ‰§è¡Œ</span></span><br><span class="line"><span class="comment"> * ç»“æœæ˜¯ä¸¤ä¸ªçº¿ç¨‹å¹¶å‘è¿è¡Œï¼šå½“å‰çº¿ç¨‹ï¼ˆä»è°ƒç”¨startæ–¹æ³•è¿”å›ï¼‰å’Œå¦ä¸€ä¸ªçº¿ç¨‹ï¼ˆæ‰§è¡Œå…¶runæ–¹æ³•ï¼‰ã€‚</span></span><br><span class="line"><span class="comment"> * å¤šæ¬¡å¯åŠ¨çº¿ç¨‹æ˜¯ä¸åˆæ³•çš„ã€‚ç‰¹åˆ«æ˜¯ï¼Œä¸€æ—¦å®Œæˆæ‰§è¡Œï¼Œçº¿ç¨‹å¯èƒ½æ— æ³•é‡æ–°å¯åŠ¨ã€‚</span></span><br><span class="line"><span class="comment"> * å¦‚æœè¯¥çº¿ç¨‹å·²ç»å¯åŠ¨ï¼Œåˆ™å†æ¬¡è°ƒç”¨start()æ–¹æ³•ï¼Œå°±ä¼šæŠ›å‡ºIllegalThreadStateExceptionå¼‚å¸¸ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æ­¤æ–¹æ³•ä¸ä¼šè¢«VMåˆ›å»ºæˆ–è€…æ˜¯è®¾ç½®çš„ä¸»çº¿ç¨‹æˆ–â€œç³»ç»Ÿâ€ç»„çº¿ç¨‹è°ƒç”¨</span></span><br><span class="line"><span class="comment">         * å°†æ¥æ·»åŠ åˆ°è¯¥æ–¹æ³•ä¸­çš„ä»»ä½•æ–°åŠŸèƒ½å¯èƒ½ä¹Ÿå¿…é¡»æ·»åŠ åˆ°VMä¸­ã€‚</span></span><br><span class="line"><span class="comment">         * </span></span><br><span class="line"><span class="comment">         * æ–°çš„çº¿ç¨‹threadStateå€¼æ˜¯0</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">if</span> (threadStatus != <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalThreadStateException();</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * é€šçŸ¥çº¿ç¨‹ç»„è¯¥çº¿ç¨‹å°†è¦å¼€å§‹è¿è¡Œï¼Œè¿™æ ·è¯¥çº¿ç¨‹å°±ä¼šè¢«æ·»åŠ åˆ°çº¿ç¨‹åˆ—è¡¨ä¸­</span></span><br><span class="line"><span class="comment">         * æ­¤æ—¶åˆ—è¡¨çš„unstartedæ•°å°†ä¼šå‡å°‘ã€‚</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        group.add(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">boolean</span> started = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// è°ƒç”¨åŸç”Ÿæ–¹æ³•æ€æ–¹æ³•å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line">            start0();</span><br><span class="line">            <span class="comment">// å·²ç»è¿è¡Œçš„æ ‡è®°è®¾ç½®ä¸ºtrue</span></span><br><span class="line">            started = <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (!started) &#123;</span><br><span class="line">                    group.threadStartFailed(<span class="keyword">this</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Throwable ignore) &#123;</span><br><span class="line">                <span class="comment">//è‹¥å¼€å§‹è¿è¡Œæ ‡è®°æœªè®¾ç½®æˆåŠŸï¼Œåˆ™é€šçŸ¥çº¿ç¨‹ç»„è¯¥çº¿ç¨‹å°è¯•è¿è¡Œå¤±è´¥</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>å†çœ‹è¯¥æ–¹æ³•é‡Œé¢çš„<code>start0()</code>æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title">start0</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¦‚æœè¯¥çº¿ç¨‹æ˜¯ä½¿ç”¨ç‹¬ç«‹çš„Runnableè¿è¡Œå¯¹è±¡æ„é€ çš„,åˆ™è°ƒç”¨è¯¥Runnableå¯¹è±¡çš„runæ–¹æ³•</span></span><br><span class="line"><span class="comment"> * å¦åˆ™ï¼Œæ­¤æ–¹æ³•ä¸æ‰§è¡Œä»»ä½•æ“ä½œå¹¶è¿”å›</span></span><br><span class="line"><span class="comment"> * Threadçš„å­ç±»åº”è¯¥é‡å†™æ­¤æ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (target != <span class="keyword">null</span>) &#123;</span><br><span class="line">            target.run();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><code>start0()</code>æ˜¯<code>native</code>æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹<code>openjdk</code>é‡Œé¢å¯¹åº”çš„å®ç°<a href="http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/native/java/lang/Thread.c">Thread.c</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">static</span> JNINativeMethod methods[] = &#123;</span><br><span class="line">    &#123;<span class="string">&quot;start0&quot;</span>,           <span class="string">&quot;()V&quot;</span>,        (<span class="keyword">void</span> *)&amp;JVM_StartThread&#125;,</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œå®ƒæ˜¯è°ƒç”¨çš„<code>JVM</code>çš„<code>JVM_StartThread</code>æ–¹æ³•</p><p>ç„¶åå†å»çœ‹å¯¹åº”çš„æºç <a href="http://hg.openjdk.java.net/jdk8/jdk8/hotspot/file/87ee5ee27509/src/share/vm/prims/jvm.cpp">jvm.cpp</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="built_in">JVM_ENTRY</span>(<span class="keyword">void</span>, <span class="built_in">JVM_StartThread</span>(JNIEnv* env, jobject jthread))</span><br><span class="line">  <span class="built_in">JVMWrapper</span>(<span class="string">&quot;JVM_StartThread&quot;</span>);</span><br><span class="line">  JavaThread *native_thread = <span class="literal">NULL</span>;</span><br><span class="line">...</span><br><span class="line">  native_thread = <span class="keyword">new</span> <span class="built_in">JavaThread</span>(&amp;thread_entry, sz);</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œä¼šé€šè¿‡<code>new JavaThread</code>æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œå†çœ‹å…¶å½¢å‚<code>thread_entry</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">thread_entry</span><span class="params">(JavaThread* thread, TRAPS)</span> </span>&#123;</span><br><span class="line">  <span class="function">HandleMark <span class="title">hm</span><span class="params">(THREAD)</span></span>;</span><br><span class="line">  <span class="function">Handle <span class="title">obj</span><span class="params">(THREAD, thread-&gt;threadObj())</span></span>;</span><br><span class="line">  <span class="function">JavaValue <span class="title">result</span><span class="params">(T_VOID)</span></span>;</span><br><span class="line">  JavaCalls::<span class="built_in">call_virtual</span>(&amp;result,</span><br><span class="line">                          obj,</span><br><span class="line">                          <span class="built_in">KlassHandle</span>(THREAD, SystemDictionary::<span class="built_in">Thread_klass</span>()),</span><br><span class="line">                          vmSymbols::<span class="built_in">run_method_name</span>(),</span><br><span class="line">                          vmSymbols::<span class="built_in">void_method_signature</span>(),</span><br><span class="line">                          THREAD);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°<code>thread_entry</code>ä¼šé€šè¿‡è®©è™šæ‹Ÿæœºåˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œç„¶åå»æ‰§è¡Œ<code>run()</code>æ–¹æ³•é‡Œé¢çš„å†…å®¹</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä»ä¸Šé¢çš„æºç æ‰§è¡Œè¿‡ç¨‹æ¥çœ‹ï¼Œå®ƒä»¬çš„è°ƒç”¨å¦‚ä¸‹ï¼š</p><p><img src="/2019/07/23/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%8B%BE%E9%81%97--start%E4%B8%8Erun--Thread%E4%B8%8ERunnable/1.png" alt></p><ul><li><p>è°ƒç”¨<code>start()</code>æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å­çº¿ç¨‹å¹¶å¯åŠ¨</p></li><li><p><code>run()</code>æ–¹æ³•åªæ˜¯<code>Thread</code>çš„ä¸€ä¸ªæ™®é€šæ–¹æ³•è°ƒç”¨</p></li></ul><h1 id="Threadä¸Runnable"><a href="#Threadä¸Runnable" class="headerlink" title="Threadä¸Runnable"></a>Threadä¸Runnable</h1><p><code>Thread</code>æ˜¯ä¸€ä¸ªç±»ï¼Œå…¶å®ç°äº†<code>Runnable</code>æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Thread</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Runnableæ¥å£å®ç°çš„ç±»ï¼Œåº”è¯¥æ˜¯ä»»ä½•å®ä¾‹æƒ³è¦ç”±çº¿ç¨‹æ‰§è¡Œçš„ç±»</span></span><br><span class="line"><span class="comment">     * è¯¥ç±»å¿…é¡»å®šä¹‰ä¸€ä¸ªæ²¡æœ‰å‚æ•°çš„æ–¹æ³•ï¼Œç§°ä¸ºrun</span></span><br><span class="line"><span class="comment">     * è®¾è®¡è¯¥æ¥å£çš„ç›®çš„æ˜¯å¸Œæœ›ä¸ºåœ¨æ´»åŠ¨æ—¶æ‰§è¡Œä»£ç çš„å¯¹è±¡æä¾›é€šç”¨åè®®</span></span><br><span class="line"><span class="comment">     * ä¾‹å¦‚ï¼ŒRunnableç”±Threadç±»å®ç°ã€‚</span></span><br><span class="line"><span class="comment">     * æ´»åŠ¨åªæ˜¯æ„å‘³ç€ä¸€ä¸ªçº¿ç¨‹å·²ç»å¯åŠ¨ä½†å°šæœªåœæ­¢</span></span><br><span class="line"><span class="comment">     * æ­¤å¤–ï¼ŒRunnableä¸ºéThreadå­ç±»åˆ«çš„ç±»åˆ«æä¾›äº†ä¸€ç§å¯åŠ¨æ–¹å¼</span></span><br><span class="line"><span class="comment">     * é€šè¿‡å®ä¾‹åŒ–æŸä¸ªThreadå®ä¾‹å¹¶å°†è‡ªèº«ä½œä¸ºè¿è¡Œç›®æ ‡ï¼Œå°±å¯ä»¥è¿è¡Œä¸ºRunnableçš„ç±»åˆ«è€Œæ— éœ€åˆ›å»ºThreadçš„å­ç±»åˆ«ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çœ‹æ¥ï¼Œ<code>Runnable</code>æ¥å£å¹¶æ²¡æœ‰å…·å¤‡å¤šçº¿ç¨‹çš„ç‰¹æ€§ï¼Œæ˜¯ä¾èµ–<code>Thread</code>é‡Œé¢çš„<code>start()</code>æ–¹æ³•å»åˆ›å»ºä¸€ä¸ªå­çº¿ç¨‹</p><p>çœ‹ä¸‹é¢ä¾‹å­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> indi.greenhat.thread;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: Threadä¸RunnableåŒºåˆ«</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: GreenHatHG</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span>: 2019-07-23 10:18</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Thread2</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Thread2</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Thread start: &quot;</span> + <span class="keyword">this</span>.name + <span class="string">&quot;,i: &quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread2 th1 = <span class="keyword">new</span> Thread2(<span class="string">&quot;threa1&quot;</span>);</span><br><span class="line">        Thread2 th2 = <span class="keyword">new</span> Thread2(<span class="string">&quot;threa2&quot;</span>);</span><br><span class="line">        Thread2 th3 = <span class="keyword">new</span> Thread2(<span class="string">&quot;threa3&quot;</span>);</span><br><span class="line">        th1.start();</span><br><span class="line">        th2.start();</span><br><span class="line">        th3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><h2 id><a href="#" class="headerlink" title></a><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Thread start: threa1,i: <span class="number">0</span></span><br><span class="line">Thread start: threa1,i: <span class="number">1</span></span><br><span class="line">Thread start: threa1,i: <span class="number">2</span></span><br><span class="line">Thread start: threa1,i: <span class="number">3</span></span><br><span class="line">Thread start: threa2,i: <span class="number">0</span></span><br><span class="line">Thread start: threa2,i: <span class="number">1</span></span><br><span class="line">Thread start: threa2,i: <span class="number">2</span></span><br><span class="line">Thread start: threa2,i: <span class="number">3</span></span><br><span class="line">Thread start: threa3,i: <span class="number">0</span></span><br><span class="line">Thread start: threa3,i: <span class="number">1</span></span><br><span class="line">Thread start: threa3,i: <span class="number">2</span></span><br><span class="line">Thread start: threa3,i: <span class="number">3</span></span><br></pre></td></tr></table></figure></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> indi.greenhat.thread;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: Threadä¸RunnableåŒºåˆ«</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: GreenHatHG</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span>: 2019-07-23 10:24</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyRunnable</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyRunnable</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;MyRunnable start: &quot;</span> + <span class="keyword">this</span>.name + <span class="string">&quot;,i: &quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MyRunnable th1 = <span class="keyword">new</span> MyRunnable(<span class="string">&quot;threa1&quot;</span>);</span><br><span class="line">        MyRunnable th2 = <span class="keyword">new</span> MyRunnable(<span class="string">&quot;threa2&quot;</span>);</span><br><span class="line">        MyRunnable th3 = <span class="keyword">new</span> MyRunnable(<span class="string">&quot;threa3&quot;</span>);</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(th1);</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread(th2);</span><br><span class="line">        Thread t3 = <span class="keyword">new</span> Thread(th3);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Thread start: threa3,i: <span class="number">0</span></span><br><span class="line">Thread start: threa3,i: <span class="number">1</span></span><br><span class="line">Thread start: threa3,i: <span class="number">2</span></span><br><span class="line">Thread start: threa3,i: <span class="number">3</span></span><br><span class="line">Thread start: threa1,i: <span class="number">0</span></span><br><span class="line">Thread start: threa1,i: <span class="number">1</span></span><br><span class="line">Thread start: threa1,i: <span class="number">2</span></span><br><span class="line">Thread start: threa1,i: <span class="number">3</span></span><br><span class="line">Thread start: threa2,i: <span class="number">0</span></span><br><span class="line">Thread start: threa2,i: <span class="number">1</span></span><br><span class="line">Thread start: threa2,i: <span class="number">2</span></span><br><span class="line">Thread start: threa2,i: <span class="number">3</span></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li><code>Thread</code>æ˜¯å®ç°äº†<code>Runnable</code>æ¥å£çš„ç±»ï¼Œä½¿å¾—<code>run</code>æ”¯æŒå¤šçº¿ç¨‹</li><li>å› ç±»çš„å•ä¸€ç»§æ‰¿åŸåˆ™ï¼Œæ¨èå¤šä½¿ç”¨<code>Runnable</code>æ¥å£</li></ul><hr><p>å‚è€ƒï¼š</p><p><a href="https://www.cnblogs.com/yufeng218/p/9940562.html">åŒä¸€ä¸ªçº¿ç¨‹å¤šæ¬¡è°ƒç”¨start()ä¼šå‡ºç°çš„é—®é¢˜ - é£æ­¢é›¨æ­‡ - åšå®¢å›­</a></p><hr>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dfsåº</title>
      <link href="/2019/07/19/dfs%E5%BA%8F/"/>
      <url>/2019/07/19/dfs%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<p>æ ‘çš„dfs</p><span id="more"></span><h1 id="dfsåº"><a href="#dfsåº" class="headerlink" title="dfsåº"></a>dfsåº</h1><p><img src="/2019/07/19/dfs%E5%BA%8F/1.png" alt></p><p>è¿™æ£µæ ‘çš„ DFS åºåˆ—å°±æ˜¯ <code>C 1 A E 7 H B 8 3 4 F 5 6 9 I G 2 D</code>(æŒ‰ç…§å·¦ä¼˜å…ˆ)</p><p>å®šä¹‰å­æ ‘ xè¡¨ç¤ºç»“ç‚¹xåŠå…¶æ‰€æœ‰çš„å­å­™ç»“ç‚¹ï¼Œè¯¥åºåˆ—æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„æ€§è´¨ï¼š<br><strong>æ¯æ£µå­æ ‘xåœ¨ DFS åºåˆ—ä¸­ä¸€å®šæ˜¯è¿ç»­çš„ä¸€æ®µï¼Œç»“ç‚¹xä¸€å®šåœ¨è¿™æ®µçš„å¼€å¤´</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">C 1[A E 7 H B 8 3 4 F]5 6 9 I G 2 D</span><br><span class="line">          å­æ ‘A</span><br><span class="line"></span><br><span class="line">C 1 A[E 7 H B]8 3 4 F 5 6 9 I G 2 D</span><br><span class="line">       å­æ ‘E</span><br><span class="line"></span><br><span class="line">C 1 A E 7 H B 8 3 4 F[5 6 9 I G 2 D]</span><br><span class="line">                          å­æ ‘5</span><br><span class="line"></span><br><span class="line">C 1 A E 7 H B 8 3 4 F 5[6 9]I G 2 D</span><br><span class="line">                       å­æ ‘6</span><br></pre></td></tr></table></figure><p>è¿™ä½¿å¾—åœ¨å­æ ‘ä¸Šè¿›è¡Œçš„ä¿®æ”¹ã€æŸ¥è¯¢å¯ä»¥è½¬åŒ–ä¸ºåŒºé—´ä¿®æ”¹ã€åŒºé—´æŸ¥è¯¢ã€‚ç»“åˆæ ‘çŠ¶æ•°ç»„ or çº¿æ®µæ ‘é£Ÿç”¨å‡å¯</p><p>æ‰€ä»¥dfsåºçš„ä½œç”¨æ˜¯</p><ul><li>ç›¸å½“äºæŠŠæ ‘ä¸Šçš„é—®é¢˜è½¬åŒ–æˆäº†åºåˆ—ä¸Šçš„é—®é¢˜</li><li>è¾…ä»¥å„ç§æ•°æ®ç»“æ„è¿›è¡Œè®¡ç®—</li><li>æ¯”å¦‚STè¡¨ã€æ ‘çŠ¶æ•°ç»„ã€çº¿æ®µæ ‘</li><li><strong>å­æ ‘æ±‚å’Œ-&gt;åŒºé—´æ±‚å’Œ</strong></li></ul><h1 id="æ¨¡æ¿"><a href="#æ¨¡æ¿" class="headerlink" title="æ¨¡æ¿"></a>æ¨¡æ¿</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//éå†åˆ°xè¿™ä¸ªèŠ‚ç‚¹</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">start[x] = ++dfs_clock;</span><br><span class="line">vis[x] = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//éå†xçš„å­èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">for</span>(every y connected to x)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (!vis[y])</span><br><span class="line">            <span class="built_in">dfs</span>(y);</span><br><span class="line">    &#125;</span><br><span class="line">    end[x] = dfs_clock;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ä¾‹é¢˜1"><a href="#ä¾‹é¢˜1" class="headerlink" title="ä¾‹é¢˜1"></a>ä¾‹é¢˜1</h1><p>ç»™ä¸€æ£µnä¸ªèŠ‚ç‚¹çš„æ ‘ï¼Œä»¥1ä¸ºæ ¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹æœ‰æƒå€¼value[i]ï¼Œå…±æœ‰mä¸ªè¯¢é—®ï¼Œæ¯ä¸ªé—®é¢˜è¦æ±‚ç»™å‡ºxè¿™ä¸ªç‚¹çš„å­æ ‘çš„æƒå€¼å’Œã€‚N&lt;=1000000, M &lt;= 1000000, value[i] &lt;= 1e9</p><hr><p>åšæ³•:</p><p>æŒ‰ç…§dfsåºå°†value[i]æ”¾æˆä¸€åˆ—ï¼Œç”¨å‰ç¼€å’Œå³å¯ï¼Œå³</p><p><code>Ans = sum[end[x]] â€“ sum[start[x] â€“ 1]</code></p><p><img src="/2019/07/19/dfs%E5%BA%8F/2.png" alt></p><h1 id="ä¾‹é¢˜2"><a href="#ä¾‹é¢˜2" class="headerlink" title="ä¾‹é¢˜2"></a>ä¾‹é¢˜2</h1><p>ç»™ä¸€æ£µnä¸ªèŠ‚ç‚¹çš„æ ‘ï¼Œä»¥1ä¸ºæ ¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹æœ‰æƒå€¼value[i]ã€‚</p><p>å…±æœ‰mä¸ªæ“ä½œï¼š</p><p>â€¢ <code>Change(x, v)</code>å°†xè¿™ä¸ªç‚¹çš„æƒå€¼æ”¹æˆv<br>â€¢ <code>Ask(x)</code> è¯¢é—®xçš„å­æ ‘çš„æƒå€¼å’Œ</p><p>N, M &lt;= 100000</p><hr><p>åšæ³•ï¼š</p><p>åŒæ ·å°†value[i]æŒ‰ç…§dfsåºæ”¾æˆä¸€æ’ï¼Œç”¨æ ‘çŠ¶æ•°ç»„è¿›è¡Œå•ç‚¹ä¿®æ”¹åŒºé—´æŸ¥è¯¢ã€‚å•ç‚¹ä¿®æ”¹ã€å­æ ‘æŸ¥è¯¢-&gt;å•ç‚¹ä¿®æ”¹ã€åŒºé—´æŸ¥è¯¢ã€‚</p><h1 id="ä¾‹é¢˜3"><a href="#ä¾‹é¢˜3" class="headerlink" title="ä¾‹é¢˜3"></a>ä¾‹é¢˜3</h1><p>ç»™ä¸€æ£µnä¸ªèŠ‚ç‚¹çš„æ ‘ï¼Œä»¥1ä¸ºæ ¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹æœ‰æƒå€¼value[i]ã€‚</p><p>å…±æœ‰mä¸ªæ“ä½œï¼š</p><ul><li><code>Change(x, v)</code> å°†xçš„å­æ ‘ä¸­æ¯ä¸ªç‚¹çš„æƒå€¼éƒ½åŠ ä¸Šv</li><li><code>Ask(x)</code>è¯¢é—®xçš„æƒå€¼</li></ul><p>N, M &lt;= 100000</p><hr><p>åšæ³•ï¼š</p><p>dfsåºå°†æ ‘ä¸Šé—®é¢˜å˜æˆåºåˆ—é—®é¢˜ã€‚åŒºé—´ä¿®æ”¹ï¼Œå•ç‚¹æŸ¥è¯¢ï¼Œæ ‘çŠ¶æ•°ç»„å³å¯</p><h1 id="ä¾‹é¢˜4"><a href="#ä¾‹é¢˜4" class="headerlink" title="ä¾‹é¢˜4"></a>ä¾‹é¢˜4</h1><p>æœ‰ä¸€æ£µnä¸ªç‚¹çš„æ ‘ï¼Œä»¥1ä¸ºæ ¹ï¼Œè®¾æ ¹èŠ‚ç‚¹æ·±åº¦ä¸º0ï¼Œæœ‰mä¸ªè¯¢é—®ï¼Œæ¯æ¬¡æŸ¥è¯¢è¦æ±‚æ‰¾å‡ºxçš„å­æ ‘ä¸­ï¼Œæ·±åº¦ä¸ºdepçš„èŠ‚ç‚¹æœ‰å¤šå°‘ä¸ªã€‚</p><p>N,M &lt;= 100000</p><p>åšæ³•ï¼š</p><ul><li>å¯¹æ¯ä¸ªæ·±åº¦éƒ½å»ºä¸€ä¸ªæ•°ç»„ï¼Œå°†è¯¥æ·±åº¦çš„ç‚¹æŒ‰ç…§dfsåºæ”¾è¿›å»ã€‚</li><li>æ·±åº¦ä¸ºdepçš„æ•°ç»„ä¸­ï¼Œå±äºxçš„å­æ ‘çš„å°±ä¸€å®šä¼šæ˜¯è¿ç»­çš„ä¸€æ®µï¼Œç”¨äºŒåˆ†æ³•å³å¯æ±‚å‡ºã€‚</li><li>å˜å½¢ï¼šè¯¢é—®xçš„å­æ ‘ä¸­ï¼Œè·ç¦»xä¸ºyçš„ç‚¹æœ‰å¤šå°‘ä¸ªã€‚</li></ul><hr><p>å‚è€ƒ:</p><p><a href="https://www.luogu.org/blog/P6174/dfs-xu-ru-men">DFS åºå…¥é—¨ - 6174 çš„æ˜Ÿçƒ - æ´›è°·åšå®¢</a></p><p><a href="https://acm.sjtu.edu.cn/w/images/3/35/æ ‘çš„dfsåºåŠå…¶åº”ç”¨ï¼ˆé—«é¸¿å®‡ï¼‰.pdf">æ ‘çš„dfsåŠå…¶åº”ç”¨</a></p><hr>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> dfsåº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè™šæ‹Ÿæœºç¬”è®°--åƒåœ¾å›æ”¶</title>
      <link href="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/"/>
      <url>/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/</url>
      
        <content type="html"><![CDATA[<p>åƒåœ¾å›æ”¶ç®—æ³•ä¸ JVM åƒåœ¾å›æ”¶å™¨</p><span id="more"></span><h1 id="ä¸€è§ˆ"><a href="#ä¸€è§ˆ" class="headerlink" title="ä¸€è§ˆ"></a>ä¸€è§ˆ</h1><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/32.png" alt></p><h1 id="å¯¹è±¡è¢«åˆ¤å®šä¸ºåƒåœ¾çš„æ ‡å‡†"><a href="#å¯¹è±¡è¢«åˆ¤å®šä¸ºåƒåœ¾çš„æ ‡å‡†" class="headerlink" title="å¯¹è±¡è¢«åˆ¤å®šä¸ºåƒåœ¾çš„æ ‡å‡†"></a>å¯¹è±¡è¢«åˆ¤å®šä¸ºåƒåœ¾çš„æ ‡å‡†</h1><p>GCä¸»è¦æ˜¯å›æ”¶Javaå †ä¸­çš„å¯¹è±¡ï¼Œå³æ­¤å¯¹è±¡å·²ç»æ²¡æœ‰äº†ä»·å€¼ï¼Œå°±æ˜¯å˜æˆäº†â€œåƒåœ¾â€ï¼Œé‚£ä¹ˆå¯¹è±¡è¢«åˆ¤å®šä¸ºåƒåœ¾çš„æ ‡å‡†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿâ€”â€”<strong>æ²¡æœ‰è¢«å…¶ä»–å¯¹è±¡å¼•ç”¨</strong>ã€‚</p><h1 id="åˆ¤å®šå¯¹è±¡æ˜¯å¦ä¸ºåƒåœ¾çš„ç®—æ³•"><a href="#åˆ¤å®šå¯¹è±¡æ˜¯å¦ä¸ºåƒåœ¾çš„ç®—æ³•" class="headerlink" title="åˆ¤å®šå¯¹è±¡æ˜¯å¦ä¸ºåƒåœ¾çš„ç®—æ³•"></a>åˆ¤å®šå¯¹è±¡æ˜¯å¦ä¸ºåƒåœ¾çš„ç®—æ³•</h1><h2 id="å¼•ç”¨è®¡æ•°ç®—æ³•"><a href="#å¼•ç”¨è®¡æ•°ç®—æ³•" class="headerlink" title="å¼•ç”¨è®¡æ•°ç®—æ³•"></a>å¼•ç”¨è®¡æ•°ç®—æ³•</h2><p><strong>ä¸»è¦æ˜¯åˆ¤æ–­å¯¹è±¡çš„å¼•ç”¨æ•°é‡</strong></p><ul><li>é€šè¿‡åˆ¤æ–­å¯¹è±¡çš„å¼•ç”¨æ•°é‡æ¥å†³å®šå¯¹è±¡æ˜¯å¦å¯ä»¥è¢«å›æ”¶</li><li><strong>æ¯ä¸ªå¯¹è±¡å®ä¾‹éƒ½æœ‰ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ï¼Œè¢«å¼•ç”¨åˆ™+1ï¼Œå®Œæˆå¼•ç”¨åˆ™-1</strong></li><li><strong>ä»»ä½•å¼•ç”¨è®¡æ•°ä¸º0çš„å¯¹è±¡å®ä¾‹éƒ½å¯ä»¥è¢«å½“ä½œåƒåœ¾æ”¶é›†</strong></li></ul><p>ä¸‹é¢å°±æ˜¯å¯¹ä¸€ä¸ªå¼•ç”¨è®¡æ•°çš„ä¸¾ä¾‹ï¼š</p><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/2.png" alt></p><p>å¼•ç”¨è®¡æ•°æ³•æœ‰ä¸€ä¸ªè‡´å‘½çš„ç¼ºé™·ï¼Œå¦‚ä¸‹å›¾ï¼Œå°±æ˜¯å½“ä¸¤ä¸ªå¯¹è±¡ç›¸äº’å¼•ç”¨æ—¶ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡å®é™…æ˜¯ä¸å¯è·å¾—çš„ï¼Œä½†æ˜¯ç”±äºå¼•ç”¨è®¡æ•°ä¸ä¸ºé›¶ï¼Œæ‰€ä»¥å‡ä¸ä¼šè¢«å›æ”¶ã€‚</p><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/3.png" alt></p><p><strong>ä¼˜ç‚¹ï¼šæ‰§è¡Œæ•ˆç‡é«˜ï¼Œç¨‹åºè¢«å½±å“å°</strong><br><strong>ç¼ºç‚¹ï¼šæ— æ³•è§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜ å¯¼è‡´å†…å­˜æ³„æ¼ï¼Œæ‰€ä»¥åœ¨ Java çš„åƒåœ¾å›æ”¶å™¨ä¸­æ²¡æœ‰ä½¿ç”¨è¿™ç§ç®—æ³•</strong></p><h2 id="å¯è¾¾æ€§åˆ†ææ³•"><a href="#å¯è¾¾æ€§åˆ†ææ³•" class="headerlink" title="å¯è¾¾æ€§åˆ†ææ³•"></a>å¯è¾¾æ€§åˆ†ææ³•</h2><p><strong>é€šè¿‡åˆ¤æ–­å¯¹è±¡çš„å¼•ç”¨é“¾éå†ï¼ˆä»GC Rootå¼€å§‹ï¼‰æ˜¯å¦å¯è¾¾æ¥å†³å®šå¯¹è±¡æ˜¯å¦å¯ä»¥è¢«å›æ”¶ã€‚</strong></p><p>å¦‚ä¸‹å›¾ï¼Œä»GC Rootä¸èƒ½åˆ°è¾¾ObjDï¼ŒObjF ï¼ŒObjEï¼Œæ‰€ä»¥è¿™ä¸‰ä¸ªå¯¹è±¡æ˜¯ä¸å¯ç”¨çš„ã€‚</p><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/4.png" alt></p><p><strong>å¯ä½œä¸ºGC Rootçš„å¯¹è±¡ï¼š</strong></p><ul><li>è™šæ‹Ÿæœºæ ˆä¸­å¼•ç”¨çš„å¯¹è±¡ï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰</li><li>æ–¹æ³•åŒºä¸­çš„å¸¸é‡å¼•ç”¨çš„å¯¹è±¡</li><li>æ–¹æ³•åŒºä¸­çš„ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡</li><li>æœ¬åœ°æ–¹æ³•æ ˆä¸­JNIï¼ˆNativeæ–¹æ³•ï¼‰çš„å¼•ç”¨å¯¹è±¡</li><li>æ´»è·ƒçº¿ç¨‹çš„å¼•ç”¨å¯¹è±¡</li></ul><h1 id="å›æ”¶åƒåœ¾çš„ç®—æ³•"><a href="#å›æ”¶åƒåœ¾çš„ç®—æ³•" class="headerlink" title="å›æ”¶åƒåœ¾çš„ç®—æ³•"></a>å›æ”¶åƒåœ¾çš„ç®—æ³•</h1><h2 id="æ ‡è®°-æ¸…é™¤ç®—æ³•ï¼ˆMark-and-Sweepï¼‰"><a href="#æ ‡è®°-æ¸…é™¤ç®—æ³•ï¼ˆMark-and-Sweepï¼‰" class="headerlink" title="æ ‡è®°-æ¸…é™¤ç®—æ³•ï¼ˆMark and Sweepï¼‰"></a>æ ‡è®°-æ¸…é™¤ç®—æ³•ï¼ˆMark and Sweepï¼‰</h2><ul><li>æ ‡è®°ï¼šä»æ ¹é›†åˆè¿›è¡Œæ‰«æï¼Œå¯¹å­˜æ´»çš„å¯¹è±¡è¿›è¡Œæ ‡è®°ï¼ˆå¯è¾¾æ€§åˆ†æç®—æ³•ï¼‰</li><li>æ¸…é™¤ï¼šå¯¹å †å†…å­˜ä»å¤´åˆ°å°¾è¿›è¡Œçº¿æ€§éå†ï¼Œå›æ”¶ä¸å¯è¾¾çš„å¯¹è±¡å†…å­˜</li></ul><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/5.jpg" alt></p><p>ä¸Šå›¾æ˜¯æ ‡è®°/æ¸…é™¤ç®—æ³•çš„ç¤ºæ„å›¾ï¼Œåœ¨æ ‡è®°é˜¶æ®µï¼Œä»å¯¹è±¡GC Root 1å¯ä»¥è®¿é—®åˆ°Bå¯¹è±¡ï¼Œä»Bå¯¹è±¡åˆå¯ä»¥è®¿é—®åˆ°Eå¯¹è±¡ï¼Œå› æ­¤ä»GC Root 1åˆ°Bã€Eéƒ½æ˜¯å¯è¾¾çš„ï¼ŒåŒç†ï¼Œå¯¹è±¡Fã€Gã€Jã€Kéƒ½æ˜¯å¯è¾¾å¯¹è±¡ï¼›åˆ°äº†æ¸…é™¤é˜¶æ®µï¼Œæ‰€æœ‰ä¸å¯è¾¾å¯¹è±¡éƒ½ä¼šè¢«å›æ”¶ã€‚</p><p>ç¼ºç‚¹ï¼š</p><ul><li>æ•ˆç‡é—®é¢˜</li></ul><p><strong>æ ‡è®°å’Œæ¸…é™¤ä¸¤ä¸ªé˜¶æ®µçš„æ•ˆç‡éƒ½ä¸é«˜</strong>ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªé˜¶æ®µéƒ½éœ€è¦éå†å†…å­˜ä¸­çš„å¯¹è±¡ï¼Œå¾ˆå¤šæ—¶å€™å†…å­˜ä¸­çš„å¯¹è±¡å®ä¾‹æ•°é‡æ˜¯éå¸¸åºå¤§çš„ï¼Œè¿™æ— ç–‘å¾ˆè€—è´¹æ—¶é—´ï¼Œè€Œä¸”GCæ—¶éœ€è¦åœæ­¢åº”ç”¨ç¨‹åºï¼Œè¿™ä¼šå¯¼è‡´éå¸¸å·®çš„ç”¨æˆ·ä½“éªŒã€‚</p><ul><li>ç©ºé—´é—®é¢˜</li></ul><p>æ ‡è®°æ¸…é™¤ä¹‹åä¼š<strong>äº§ç”Ÿå¤§é‡ä¸è¿ç»­çš„å†…å­˜ç¢ç‰‡</strong>ï¼ˆä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼‰ï¼Œå†…å­˜ç©ºé—´ç¢ç‰‡å¤ªå¤šå¯èƒ½ä¼šå¯¼è‡´ä»¥ååœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­éœ€è¦åˆ†é…è¾ƒå¤§å¯¹è±¡æ—¶ï¼Œæ— æ³•æ‰¾åˆ°è¶³å¤Ÿçš„è¿ç»­å†…å­˜è€Œä¸å¾—ä¸æå‰è§¦å‘å¦ä¸€æ¬¡åƒåœ¾å›æ”¶åŠ¨ä½œã€‚</p><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/6.jpg" alt></p><h2 id="å¤åˆ¶ç®—æ³•ï¼ˆCopyingï¼‰"><a href="#å¤åˆ¶ç®—æ³•ï¼ˆCopyingï¼‰" class="headerlink" title="å¤åˆ¶ç®—æ³•ï¼ˆCopyingï¼‰"></a>å¤åˆ¶ç®—æ³•ï¼ˆCopyingï¼‰</h2><ul><li>å°†å¯ç”¨å†…å­˜æŒ‰å®¹é‡åˆ†ä¸ºå¯¹è±¡é¢å’Œç©ºé—²é¢å¤§å°ç›¸ç­‰çš„ä¸¤å—</li><li>å¯¹è±¡åœ¨å¯¹è±¡é¢ä¸Šåˆ›å»º</li><li>å­˜æ´»çš„å¯¹è±¡è¢«ä»å¯¹è±¡é¢å¤åˆ¶åˆ°ç©ºé—²é¢</li><li>å›æ”¶æ—¶å°†å¯¹è±¡é¢æ‰€æœ‰å¯¹è±¡å†…å­˜æ¸…é™¤</li></ul><p>å›æ”¶å‰ï¼š</p><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/7.jpg" alt></p><p>å›æ”¶åï¼š</p><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/8.jpg" alt></p><p>æ•´ä½“ä¸Šçœ‹ï¼š</p><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/10.jpg" alt></p><p><strong>å¤åˆ¶ç®—æ³•æ¯æ¬¡éƒ½æ˜¯å¯¹æ•´ä¸ªåŠåŒºè¿›è¡Œå†…å­˜å›æ”¶ï¼Œè¿™æ ·å°±å‡å°‘äº†æ ‡è®°å¯¹è±¡éå†çš„æ—¶é—´</strong>ï¼Œåœ¨æ¸…é™¤ä½¿ç”¨åŒºåŸŸå¯¹è±¡æ—¶ï¼Œä¸ç”¨è¿›è¡Œéå†ï¼Œç›´æ¥æ¸…ç©ºæ•´ä¸ªåŒºåŸŸå†…å­˜ï¼Œ<strong>è€Œä¸”åœ¨å°†å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°ä¿ç•™åŒºåŸŸæ—¶ä¹Ÿæ˜¯æŒ‰åœ°å€é¡ºåºå­˜å‚¨çš„</strong>ï¼Œè¿™æ ·å°±è§£å†³äº†å†…å­˜ç¢ç‰‡çš„é—®é¢˜ï¼Œåœ¨åˆ†é…å¯¹è±¡å†…å­˜æ—¶ä¸ç”¨è€ƒè™‘å†…å­˜ç¢ç‰‡ç­‰å¤æ‚é—®é¢˜ï¼Œåªéœ€è¦æŒ‰é¡ºåºåˆ†é…å†…å­˜å³å¯ã€‚</p><p>ä¼˜ç‚¹ï¼š</p><ul><li>ä¼˜åŒ–äº†æ ‡è®°/æ¸…é™¤ç®—æ³•çš„æ•ˆç‡ä½ã€å†…å­˜ç¢ç‰‡å¤šçš„é—®é¢˜</li><li>é¡ºåºåˆ†é…å†…å­˜ï¼Œç®€å•é«˜æ•ˆ</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>å°†å†…å­˜ç¼©å°ä¸ºåŸæ¥çš„ä¸€åŠï¼Œæµªè´¹äº†ä¸€åŠçš„å†…å­˜ç©ºé—´ï¼Œä»£ä»·å¤ªé«˜ï¼›</li><li>å¦‚æœå¯¹è±¡çš„å­˜æ´»ç‡å¾ˆé«˜ï¼Œæç«¯ä¸€ç‚¹çš„æƒ…å†µå‡è®¾å¯¹è±¡å­˜æ´»ç‡ä¸º100%ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦å°†æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡å¤åˆ¶ä¸€éï¼Œè€—è´¹çš„æ—¶é—´ä»£ä»·ä¹Ÿæ˜¯ä¸å¯å¿½è§†çš„ã€‚</li></ul><p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šé€‚ç”¨äºå¯¹è±¡å­˜æ´»ç‡ä½çš„åœºæ™¯ï¼ˆå¹´è½»ä»£ï¼‰</p><h2 id="æ ‡è®°-æ•´ç†ç®—æ³•ï¼ˆCompactingï¼‰"><a href="#æ ‡è®°-æ•´ç†ç®—æ³•ï¼ˆCompactingï¼‰" class="headerlink" title="æ ‡è®°-æ•´ç†ç®—æ³•ï¼ˆCompactingï¼‰"></a>æ ‡è®°-æ•´ç†ç®—æ³•ï¼ˆCompactingï¼‰</h2><ul><li>æ ‡è®°ï¼šä»æ ¹é›†åˆè¿›è¡Œæ‰«æï¼Œå¯¹å­˜æ´»çš„å¯¹è±¡è¿›è¡Œæ ‡è®°</li><li>æ¸…é™¤ï¼šç§»åŠ¨æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡ï¼Œä¸”æŒ‰ç…§å†…å­˜åœ°å€æ¬¡åºä¾æ¬¡æ’åˆ—ï¼Œç„¶åå°†æœ«ç«¯å†…å­˜åœ°å€ä»¥åçš„å†…å­˜å…¨éƒ¨å›æ”¶ã€‚</li></ul><p>å›æ”¶å‰ï¼š</p><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/11.jpg" alt></p><p>å›æ”¶åï¼š</p><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/12.jpg" alt></p><p>æ•´ä½“ä¸Šçœ‹ï¼š</p><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/13.jpg" alt></p><p>å¯ä»¥çœ‹åˆ°ï¼Œ<strong>å›æ”¶åå¯å›æ”¶å¯¹è±¡è¢«æ¸…ç†æ‰äº†ï¼Œå­˜æ´»çš„å¯¹è±¡æŒ‰è§„åˆ™æ’åˆ—å­˜æ”¾åœ¨å†…å­˜ä¸­</strong>ã€‚è¿™æ ·ä¸€æ¥ï¼Œå½“æˆ‘ä»¬ç»™æ–°å¯¹è±¡åˆ†é…å†…å­˜æ—¶ï¼Œjvmåªéœ€è¦æŒæœ‰å†…å­˜çš„èµ·å§‹åœ°å€å³å¯ã€‚æ ‡è®°/æ•´ç†ç®—æ³•ä¸ä»…<strong>å¼¥è¡¥äº†æ ‡è®°/æ¸…é™¤ç®—æ³•å­˜åœ¨å†…å­˜ç¢ç‰‡çš„é—®é¢˜ï¼Œä¹Ÿæ¶ˆé™¤äº†å¤åˆ¶ç®—æ³•å†…å­˜å‡åŠçš„é«˜é¢ä»£ä»·</strong>ï¼Œå¯è°“ä¸€ä¸¾ä¸¤å¾—ã€‚ä½†<strong>æ ‡è®°/æ•´ç†ç®—æ³•çš„ç¼ºç‚¹å°±æ˜¯æ•ˆç‡ä¹Ÿä¸é«˜</strong>ï¼Œä¸ä»…è¦æ ‡è®°å­˜æ´»å¯¹è±¡ï¼Œè¿˜è¦æ•´ç†æ‰€æœ‰å­˜æ´»å¯¹è±¡çš„å¼•ç”¨åœ°å€ï¼Œåœ¨æ•ˆç‡ä¸Šä¸å¦‚å¤åˆ¶ç®—æ³•ã€‚</p><p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šé€‚ç”¨äºå­˜æ´»ç‡é«˜çš„åœºæ™¯ï¼ˆè€å¹´ä»£ï¼‰</p><h2 id="æ ‡è®°åˆ†ä»£æ”¶é›†ç®—æ³•ï¼ˆGenerational-Collectorï¼‰"><a href="#æ ‡è®°åˆ†ä»£æ”¶é›†ç®—æ³•ï¼ˆGenerational-Collectorï¼‰" class="headerlink" title="æ ‡è®°åˆ†ä»£æ”¶é›†ç®—æ³•ï¼ˆGenerational Collectorï¼‰"></a>æ ‡è®°åˆ†ä»£æ”¶é›†ç®—æ³•ï¼ˆGenerational Collectorï¼‰</h2><ul><li>åƒåœ¾å›æ”¶ç®—æ³•çš„ç»„åˆæ‹³</li><li>æŒ‰ç…§å¯¹è±¡ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒåˆ’åˆ†åŒºåŸŸä»¥é‡‡ç”¨ä¸åŒçš„åƒåœ¾å›æ”¶ç®—æ³•</li><li>ç›®çš„ï¼šç”¨äºæé«˜JVMåƒåœ¾å›æ”¶çš„æ•ˆç‡</li></ul><p>å…ˆçœ‹å †å†…å­˜åˆ†å¸ƒï¼š</p><ul><li>jdk6ï¼Œjdk7</li></ul><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/14.png" alt></p><p>å¤§è‡´åˆ†ä¸º<code>Young Generation</code>å¹´è½»ä»£ï¼Œ<code>Old Generation</code>è€å¹´ä»£å’Œ<code>Permanent Generation</code>æ°¸ä¹…ä»£è¿™ä¸‰éƒ¨åˆ†</p><ul><li>jdk8ä»¥åŠä¹‹åç‰ˆæœ¬</li></ul><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/15.jpg" alt></p><p>æ°¸ä¹…ä»£è¢«å»é™¤æ‰ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚æ–°åŠ äº†ä¸€ä¸ªç§°ä¸ºâ€å…ƒç©ºé—´â€œçš„ç©ºé—´ï¼Œå®ƒä¸æ°¸ä¹…ä»£æœ€å¤§çš„åŒºåˆ«å°±æ˜¯å…ƒç©ºé—´ä½¿ç”¨æœ¬åœ°å†…å­˜ï¼Œè€Œæ°¸ä¹…ä»£ä½¿ç”¨çš„æ˜¯<code>JVM</code>å†…å­˜ </p><p>åœ¨jdk6,7,8ä»¥åŠåé¢çš„ç‰ˆæœ¬ä¸­ï¼Œå¹´è½»ä»£å’Œè€å¹´ä»£å‡è¢«ä¿ç•™äº†ä¸‹æ¥ã€‚<strong>å¹´è½»ä»£çš„å¯¹è±¡å­˜æ´»ç‡ä½ï¼Œå°±ä¼šé‡‡ç”¨å¤åˆ¶ç®—æ³•ï¼Œè€Œè€å¹´ä»£å­˜æ´»ç‡é«˜ï¼Œåˆ™ä¼šé‡‡ç”¨æ ‡è®°-æ¸…é™¤ç®—æ³•ï¼Œæˆ–è€…æ ‡è®°-æ•´ç†ç®—æ³•ã€‚</strong></p><hr><p>æ ‡è®°åˆ†ä»£æ”¶é›†ç®—æ³•åˆ†ä¸º<code>Minor GC</code>å’Œ<code>Full GC</code>ä¸¤ç±»</p><hr><h3 id="Minor-GC"><a href="#Minor-GC" class="headerlink" title="Minor GC"></a>Minor GC</h3><p>åœ¨å¹´è½»ä»£<code>Young space</code>(åŒ…æ‹¬<code>Eden</code>åŒºå’Œ<code>Survivor</code>åŒº)ä¸­çš„åƒåœ¾å›æ”¶ç§°ä¹‹ä¸º <code>Minor GC</code>ï¼Œæ‰€é‡‡ç”¨çš„æ˜¯ç®—æ³•æ˜¯å¤åˆ¶ç®—æ³•ã€‚</p><p>å¹´è½»ä»£ï¼ˆ<code>Young Generation</code>ï¼‰ï¼š</p><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/16.jpg" alt></p><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/15.png" alt></p><p>å¹´è½»ä»£å‡ ä¹æ˜¯æ‰€æœ‰Javaå¯¹è±¡å‡ºç”Ÿçš„åœ°æ–¹ï¼Œå³Javaå†…å­˜çš„ç”³è¯·å’Œå­˜æ”¾éƒ½æ˜¯åœ¨è¿™ä¸ªåœ°æ–¹è¿›è¡Œçš„ã€‚è¯¥åŒºåŸŸçš„å¯¹è±¡å‡ ä¹éƒ½æ˜¯â€œæœç”Ÿå¤•ç­â€ã€‚</p><p>å¹´è½»ä»£åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š</p><ul><li><p><code>Eden</code>ï¼ˆä¼Šç”¸å›­ï¼‰åŒº</p><ol><li>æ­£å¸¸æƒ…å†µå¯¹è±¡åˆšè¢«åˆ›å»ºå‡ºæ¥çš„æ—¶å€™åœ¨<code>Eden</code>åŒºï¼Œå½“<code>Eden</code>åŒºå†…å­˜ä¸è¶³æ—¶ä¼šæ”¾åˆ°<code>Survivor</code>åŒºï¼Œå¯¹è±¡å¾ˆå¤§æ—¶ä¼šæ”¾å…¥è€å¹´ä»£ã€‚ </li><li>å‘ç”Ÿ<code>Minor GC</code>åæœ‰ç”¨å¯¹è±¡å¹´é¾„+1å¹¶è¢«æ”¾å…¥åˆ°<code>Suvivor</code>åŒº </li><li><code>Eden</code>é»˜è®¤å å¹´è½»ä»£8çš„æƒé‡ï¼Œ<code>Survivor</code>åŒºä¸¤ç©ºé—´åˆ†åˆ«å 1</li></ol></li><li><p>ä¸¤ä¸ª<code>Survivor</code>åŒºï¼ˆ<code>from</code>ã€<code>to</code>ï¼‰</p><p>å‘ç”Ÿ<code>Minor GC</code>åæœ‰ç”¨å¯¹è±¡å¹´é¾„+1ï¼Œå¹¶å°†å­˜æ´»å¯¹è±¡ä»<code>From</code>ä½¿ç”¨å¤åˆ¶ç®—æ³•åˆ°<code>To</code>ä¸­ï¼Œæ¸…ç©º<code>From</code>ç©ºé—´ï¼Œå½“å¯¹è±¡å¹´é¾„è¾¾åˆ°ä¸€å®šå€¼åè¿›å…¥è€å¹´åŒºï¼ˆé»˜è®¤15å²æ—¶è¿›å…¥ï¼‰</p></li></ul><hr><p>å¹´è½»ä»£åƒåœ¾å›æ”¶çš„è¿‡ç¨‹æ¼”ç¤ºï¼š</p><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/17.jpg" alt></p><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/18.png" alt></p><p>é¦–æ¬¡<code>Minor GC</code>çš„è¿‡ç¨‹ï¼šæœ‰ç”¨å¯¹è±¡å¹´é¾„+1å¹¶è¢«æ”¾å…¥åˆ°<code>Suvivor</code>åŒº ï¼Œç„¶åæ¸…é™¤<code>Eden</code>åŒº</p><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/19.png" alt></p><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/20.png" alt></p><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/21.png" alt></p><p><code>Eden</code>åŒºå†æ¬¡å¡«æ»¡ï¼Œåˆä¼šè§¦å‘ä¸€æ¬¡<code>Minor GC</code>ï¼Œæ­¤æ—¶ä¾¿å°†å…¶ä»–ä¸¤ä¸ªåŒºå­˜æ´»çš„å¯¹è±¡æ‹·è´åˆ°<code>S1</code>åŒºä¸­ï¼Œå¹´é¾„ç›¸å¯¹åº”å¢åŠ ï¼Œç„¶åæ¸…é™¤<code>Eden</code>å’Œ<code>S0</code>åŒºï¼Œå®Œæˆäº†ç¬¬äºŒæ¬¡<code>Minor GC</code>ã€‚</p><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/22.png" alt></p><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/23.png" alt></p><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/24.png" alt></p><p>å‡è®¾<code>Eden</code>åŒºåˆæ»¡äº†ï¼Œ<code>S1</code>åŒºæœ‰ä¸ªæ— ç”¨çš„å¯¹è±¡ï¼Œæ­¤æ—¶åˆè§¦å‘ä¸€æ¬¡<code>Minor GC</code>ï¼Œå°†å…¶ä»–åŒºçš„å¯¹è±¡æ‹·è´åˆ°<code>S0</code>åŒºï¼Œå¹´é¾„å¯¹åº”å¢åŠ ï¼Œæ‹·è´å®Œæˆåæ¸…é™¤<code>Eden</code>å’Œ<code>S1</code>åŒºï¼Œå®Œæˆäº†ç¬¬ä¸‰æ¬¡<code>Minor GC</code></p><hr><p><strong>å¯¹è±¡å¦‚ä½•æ™‹å‡ä¸ºè€å¹´ä»£</strong></p><ul><li>ç»å†ä¸€å®š<code>Minor GC</code>æ¬¡æ•°ä¾ç„¶å­˜æ´»çš„å¯¹è±¡</li><li><code>Survivor</code>åŒºæ”¾ä¸ä¸‹çš„å¯¹è±¡</li><li>æ–°ç”Ÿæˆçš„å¤§å¯¹è±¡ï¼ˆå¯ä»¥è®¾ç½®<code>-XX:+PretenuerSizeThreshold</code>è®¾ç½®å¤§å¯¹è±¡å¤§å°ï¼Œè¶…è¿‡è¿™ä¸ªå¤§å°çš„å¤§å¯¹è±¡ä¼šç›´æ¥æ”¾å…¥è€å¹´ä»£ï¼‰</li></ul><p><strong>å¸¸ç”¨çš„è°ƒä¼˜å‚æ•°</strong></p><ul><li><code>-XX:SurvivorRatio</code>:<code>Eden</code>å’Œ<code>Survivor</code>çš„æ¯”å€¼ï¼Œé»˜è®¤8:1:1</li><li><code>-XX:NewRatio</code>:è€å¹´ä»£å’Œå¹´è½»ä»£å†…å­˜çš„å¤§å°æ¯”ä¾‹</li><li><code>-XX:MAXTenuringThreshold</code>:å¯¹è±¡ä»å¹´è½»ä»£æ™‹å‡åˆ°è€å¹´ä»£è¿›è¿‡GCæ¬¡æ•°çš„æœ€å¤§é˜ˆå€¼</li></ul><h3 id="Full-GC"><a href="#Full-GC" class="headerlink" title="Full GC"></a>Full GC</h3><p>ä¸»è¦å¯¹è€å¹´ä»£ï¼ˆè¯¥åŒºåŸŸçš„å¯¹è±¡æ˜¯â€œå¹¸å­˜â€ä¸‹æ¥çš„å¯¹è±¡ï¼Œä¸€èˆ¬ä¸ä¼šå†è½»æ˜“â€œæ­»äº¡â€ï¼‰çš„å›æ”¶ï¼Œä½†åŒæ—¶åŒ…å«äº†å¯¹å¹´è½»ä»£çš„å›æ”¶ï¼ˆå³åŒ…å«äº†<code>Minor GC</code>ï¼‰ã€‚é‡‡ç”¨çš„æ”¶é›†ç®—æ³•æ˜¯æ ‡è®°-æ¸…é™¤å’Œæ ‡è®°-æ•´ç†ã€‚ç›¸æ¯”<code>Minor GC</code>æ…¢ï¼Œæ‰§è¡Œé¢‘ç‡ä½ã€‚</p><hr><p>è€å¹´ä»£ï¼š<strong>å­˜æ”¾ç”Ÿå‘½å‘¨æœŸè¾ƒé•¿çš„å¯¹è±¡</strong></p><p><strong>è§¦å‘<code>Full GC</code>çš„æ¡ä»¶</strong></p><ul><li><p>è€å¹´ä»£ç©ºé—´ä¸è¶³</p></li><li><p>æ°¸ä¹…ä»£ç©ºé—´ä¸è¶³ï¼ˆJDK1.8ä¹‹å‰ï¼‰</p></li><li><p><code>CMS GC</code>æ—¶å‡ºç°<code>promotion failedï¼Œconcurrent mode failure</code></p></li><li><p><code>Minor GC</code>æ™‹å‡åˆ°è€å¹´ä»£çš„å¹³å‡å¤§å°å¤§äºè€å¹´ä»£çš„å‰©ä½™ç©ºé—´</p></li><li><p>è°ƒç”¨<code>System.gc()</code>ï¼ˆä»…æ˜¯é€šçŸ¥ï¼Œä¸ä¿è¯ä½•æ—¶æ‰§è¡Œï¼‰</p></li><li><p>ä½¿ç”¨<code>RMI</code>æ¥è¿›è¡Œ<code>RPC</code>æˆ–ç®¡ç†çš„<code>JDK</code>åº”ç”¨ï¼Œæ¯å°æ—¶æ‰§è¡Œ1æ­¤<code>Full GC</code></p></li></ul><blockquote><p>CMS gcï¼šCMSå¹¶è¡ŒGCæ”¶é›†å™¨</p><p>promotion failedï¼šè¯¥é—®é¢˜æ˜¯åœ¨è¿›è¡ŒMinor GCæ—¶ï¼ŒSurvivor Spaceæ”¾ä¸ä¸‹ï¼Œå¯¹è±¡åªèƒ½æ”¾å…¥è€å¹´ä»£ï¼Œè€Œæ­¤æ—¶è€å¹´ä»£ä¹Ÿæ”¾ä¸ä¸‹é€ æˆçš„</p><p>RMIï¼šJavaè¿œç¨‹æ–¹æ³•è°ƒç”¨ï¼ŒJavaç¼–ç¨‹è¯­è¨€é‡Œï¼Œä¸€ç§ç”¨äºå®ç°è¿œç¨‹è¿‡ç¨‹è°ƒç”¨çš„åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£</p><p>RPCï¼šè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œå®ƒæ˜¯ä¸€ç§é€šè¿‡ç½‘ç»œä»è¿œç¨‹è®¡ç®—æœºç¨‹åºä¸Šè¯·æ±‚æœåŠ¡ï¼Œè€Œä¸éœ€è¦äº†è§£åº•å±‚ç½‘ç»œæŠ€æœ¯çš„åè®®</p></blockquote><h2 id="å¯¹æ¯”"><a href="#å¯¹æ¯”" class="headerlink" title="å¯¹æ¯”"></a>å¯¹æ¯”</h2><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/33.png" alt></p><h1 id="åƒåœ¾æ”¶é›†å™¨ç›¸å…³åè¯"><a href="#åƒåœ¾æ”¶é›†å™¨ç›¸å…³åè¯" class="headerlink" title="åƒåœ¾æ”¶é›†å™¨ç›¸å…³åè¯"></a>åƒåœ¾æ”¶é›†å™¨ç›¸å…³åè¯</h1><h2 id="Stop-the-World"><a href="#Stop-the-World" class="headerlink" title="Stop-the-World"></a>Stop-the-World</h2><p>ä¸ç®¡é€‰æ‹©å“ªç§GCç®—æ³•ï¼Œ<code>stop-the-world</code>éƒ½æ˜¯ä¸å¯é¿å…çš„ã€‚<em><code>Stop-the-world</code></em>æ„å‘³ç€ä»åº”ç”¨ä¸­åœä¸‹æ¥å¹¶è¿›å…¥åˆ°<code>GC</code>æ‰§è¡Œè¿‡ç¨‹ä¸­å»ã€‚ä¸€æ—¦<code>Stop-the-world</code>å‘ç”Ÿï¼Œé™¤äº†<code>GC</code>æ‰€éœ€çš„çº¿ç¨‹å¤–ï¼Œå…¶ä»–çº¿ç¨‹éƒ½å°†åœæ­¢å·¥ä½œï¼Œä¸­æ–­äº†çš„çº¿ç¨‹ç›´åˆ°<code>GC</code>ä»»åŠ¡ç»“æŸæ‰ç»§ç»­å®ƒä»¬çš„ä»»åŠ¡ã€‚<code>GC</code>è°ƒä¼˜é€šå¸¸å°±æ˜¯ä¸ºäº†æ”¹å–„<code>stop-the-world</code>çš„æ—¶é—´ã€‚</p><h2 id="Safepoint"><a href="#Safepoint" class="headerlink" title="Safepoint"></a>Safepoint</h2><ul><li>åˆ†æè¿‡ç¨‹ä¸­å¯¹è±¡å¼•ç”¨å…³ç³»ä¸ä¼šå‘ç”Ÿå˜åŒ–çš„ç‚¹</li><li>äº§ç”Ÿ<code>Safepoint</code>çš„åœ°æ–¹ï¼šæ–¹æ³•è°ƒç”¨ã€å¾ªç¯è·³è½¬ã€å¼‚å¸¸è·³è½¬ç­‰</li><li>å®‰å…¨ç‚¹æ•°é‡è¦é€‚ä¸­ï¼ˆå¤ªå°‘ä¼šè®©GCç­‰å¾…å¤ªé•¿çš„æ—¶é—´ï¼Œå¤ªå¤šå¢åŠ äº†ç¨‹åºè¿è¡Œçš„è´Ÿè·ï¼‰</li></ul><h1 id="å¸¸è§çš„åƒåœ¾æ”¶é›†å™¨"><a href="#å¸¸è§çš„åƒåœ¾æ”¶é›†å™¨" class="headerlink" title="å¸¸è§çš„åƒåœ¾æ”¶é›†å™¨"></a>å¸¸è§çš„åƒåœ¾æ”¶é›†å™¨</h1><h2 id="JVMä¸¤ç§è¿è¡Œæ¨¡å¼"><a href="#JVMä¸¤ç§è¿è¡Œæ¨¡å¼" class="headerlink" title="JVMä¸¤ç§è¿è¡Œæ¨¡å¼"></a>JVMä¸¤ç§è¿è¡Œæ¨¡å¼</h2><ul><li>Serverï¼šé‡é‡çº§çº§å¯åŠ¨ï¼Œé€Ÿåº¦è¾ƒæ…¢ï¼Œä¼˜åŒ–æ›´å¤š</li><li>Clientï¼šè½»é‡çº§å¯åŠ¨ï¼Œé€Ÿåº¦å¿«</li></ul><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/25.png" alt></p><h2 id="å¹´è½»ä»£å¸¸è§çš„åƒåœ¾æ”¶é›†å™¨"><a href="#å¹´è½»ä»£å¸¸è§çš„åƒåœ¾æ”¶é›†å™¨" class="headerlink" title="å¹´è½»ä»£å¸¸è§çš„åƒåœ¾æ”¶é›†å™¨"></a>å¹´è½»ä»£å¸¸è§çš„åƒåœ¾æ”¶é›†å™¨</h2><h3 id="Serialæ”¶é›†å™¨"><a href="#Serialæ”¶é›†å™¨" class="headerlink" title="Serialæ”¶é›†å™¨"></a>Serialæ”¶é›†å™¨</h3><p>è®¾ç½®<code>-XX:+UseSerialGC</code>å¯ä»¥è®©å¹´è½»ä»£ä½¿ç”¨è¯¥åƒåœ¾æ”¶é›†å™¨</p><p><code>Serial</code>æ”¶é›†å™¨æ˜¯æœ€åŸºæœ¬ã€å‘å±•å†å²æœ€ä¹…çš„æ”¶é›†å™¨ï¼Œæ˜¯ä¸€ä¸ªé‡‡ç”¨å¤åˆ¶ç®—æ³•çš„å•çº¿ç¨‹çš„å¹´è½»ä»£æ”¶é›†å™¨</p><p>ç‰¹ç‚¹ï¼š</p><ol><li><p>é’ˆå¯¹å¹´è½»ä»£</p></li><li><p>é‡‡ç”¨å¤åˆ¶ç®—æ³• </p></li><li><p>å•çº¿ç¨‹ã€‚ </p><p>å®ƒçš„â€œå•çº¿ç¨‹â€æ„ä¹‰ï¼š </p><p>â€‹    a. å®ƒåªä¼šä½¿ç”¨ä¸€ä¸ªCPUæˆ–ä¸€æ¡çº¿ç¨‹å»å®Œæˆåƒåœ¾æ”¶é›†å·¥ä½œ </p><p>â€‹    b. å®ƒè¿›è¡Œåƒåœ¾æ”¶é›†æ—¶å¿…é¡»æš‚åœå…¶ä»–çº¿ç¨‹çš„æ‰€æœ‰å·¥ä½œï¼Œç›´åˆ°å®ƒæ”¶é›†ç»“æŸï¼ˆ<code>STWï¼ŒStop The World</code>ï¼‰ã€‚</p></li></ol><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/26.png" alt></p><p><strong>åº”ç”¨åœºæ™¯ï¼š</strong> <code>Serial</code>æ”¶é›†å™¨æ˜¯è™šæ‹Ÿæœºè¿è¡Œåœ¨<code>Client</code>æ¨¡å¼ä¸‹çš„é»˜è®¤å¹´è½»ä»£æ”¶é›†å™¨ <strong>ä¼˜ç‚¹ï¼š</strong> ç®€å•é«˜æ•ˆã€‚å¯¹äºå•ä¸ªCPUç¯å¢ƒè€Œè¨€ï¼Œ<code>Serial</code>æ”¶é›†å™¨ç”±äºæ²¡æœ‰çº¿ç¨‹äº¤äº’çš„å¼€é”€ï¼Œä¸“å¿ƒåšåƒåœ¾æ”¶é›†è‡ªç„¶å¯ä»¥è·å¾—æœ€é«˜çš„å•çº¿ç¨‹æ”¶é›†æ•ˆç‡ã€‚</p><h3 id="ParNewæ”¶é›†å™¨"><a href="#ParNewæ”¶é›†å™¨" class="headerlink" title="ParNewæ”¶é›†å™¨"></a>ParNewæ”¶é›†å™¨</h3><p>è®¾ç½®<code>-XX:+UseParNewGC(UseParallelOldGC</code>å¯ä»¥è®©å¹´è½»ä»£ä½¿ç”¨è¯¥åƒåœ¾æ”¶é›†å™¨</p><p><code>ParNew</code>æ”¶é›†å™¨å…¶å®å°±æ˜¯<code>Serial</code>æ”¶é›†å™¨çš„å¤šçº¿ç¨‹ç‰ˆæœ¬ï¼Œåœ¨å¯ç”¨æ§åˆ¶å‚æ•°ã€æ”¶é›†ç®—æ³•ã€<code>Stop The World</code>ã€å¯¹è±¡åˆ†é…è§„åˆ™ã€å›æ”¶ç­–ç•¥ç­‰éƒ½ä¸<code>Serial</code>æ”¶é›†å™¨å®Œå…¨ä¸€æ ·ã€‚æ˜¯ä¸€ä¸ªé‡‡ç”¨å¤åˆ¶ç®—æ³•çš„å¹¶è¡Œå¤šçº¿ç¨‹æ”¶é›†å™¨ï¼Œæ˜¯ä¸€ä¸ªå¹´è½»ä»£æ”¶é›†å™¨ã€‚</p><p><strong>ç‰¹ç‚¹ï¼š</strong> </p><ol><li>ä¸<code>Serial</code>æ”¶é›†å™¨ç›¸åŒçš„ç‰¹ç‚¹ï¼š a. é’ˆå¯¹å¹´è½»ä»£ï¼› b. é‡‡ç”¨å¤åˆ¶ç®—æ³•ï¼› c. STW</li><li>ä¸»è¦ç‰¹ç‚¹ï¼š å¤šçº¿ç¨‹ã€‚ä½¿ç”¨å¤šçº¿ç¨‹è¿›è¡Œåƒåœ¾æ”¶é›†ã€‚</li></ol><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/27.png" alt></p><p><strong>åº”ç”¨åœºæ™¯ï¼š</strong> å®ƒæ˜¯<code>Server</code>æ¨¡å¼ä¸‹çš„è™šæ‹Ÿæœºé¦–é€‰çš„æ–°ç”Ÿä»£æ”¶é›†å™¨ã€‚ä½†åœ¨å•ä¸ªCPUç¯å¢ƒä¸­ï¼Œä¸ä¼šæ¯”<code>Serail</code>æ”¶é›†å™¨æœ‰æ›´å¥½çš„æ•ˆæœï¼Œå› ä¸ºå­˜åœ¨çº¿ç¨‹äº¤äº’çš„å¼€é”€ã€‚</p><h3 id="Parrallel-Scanvengeæ”¶é›†å™¨"><a href="#Parrallel-Scanvengeæ”¶é›†å™¨" class="headerlink" title="Parrallel Scanvengeæ”¶é›†å™¨"></a>Parrallel Scanvengeæ”¶é›†å™¨</h3><p>è®¾ç½®`-xx:+UseParallelGCå¯ä»¥è®©å¹´è½»ä»£ä½¿ç”¨è¯¥åƒåœ¾æ”¶é›†å™¨</p><p><code>Parallel Scavenge</code>æ”¶é›†å™¨ä¹Ÿæ˜¯ä¸€ä¸ªé‡‡ç”¨å¤åˆ¶ç®—æ³•çš„å¹¶è¡Œå¤šçº¿ç¨‹æ”¶é›†å™¨ï¼Œæ˜¯ä¸€ä¸ªå¹´è½»ä»£æ”¶é›†å™¨ã€‚<code>Parallel Scavenge</code>æ”¶é›†å™¨å› ä¸ºä¸ååé‡å…³ç³»å¯†åˆ‡ï¼Œä¹Ÿç§°ä¸ºååé‡æ”¶é›†å™¨</p><blockquote><p>æ‰€è°“ååé‡çš„æ„æ€å°±æ˜¯CPUç”¨äºè¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´ä¸CPUæ€»æ¶ˆè€—æ—¶é—´çš„æ¯”å€¼ï¼Œå³ååé‡=è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´/ï¼ˆè¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´+åƒåœ¾æ”¶é›†æ—¶é—´ï¼‰ï¼Œè™šæ‹Ÿæœºæ€»è¿è¡Œ100åˆ†é’Ÿï¼Œåƒåœ¾æ”¶é›†1åˆ†é’Ÿï¼Œé‚£ååé‡å°±æ˜¯99%</p></blockquote><p><strong>ç‰¹ç‚¹ï¼š</strong></p><ol><li>ä¸<code>ParNew</code>æ”¶é›†å™¨ç›¸åŒçš„ç‰¹ç‚¹ï¼š a. æ–°ç”Ÿä»£æ”¶é›†å™¨ï¼› b. é‡‡ç”¨å¤åˆ¶ç®—æ³•ï¼› c. å¤šçº¿ç¨‹æ”¶é›†ï¼›</li><li>ä¸»è¦ç‰¹ç‚¹ï¼š <code>Parallel Scavenge</code>æ”¶é›†å™¨çš„ç›®æ ‡æ˜¯è¾¾ä¸€ä¸ªå¯æ§åˆ¶çš„ååé‡ï¼Œè€Œ<code>CMS</code>ç­‰æ”¶é›†å™¨çš„å…³æ³¨ç‚¹æ˜¯å°½å¯èƒ½åœ°ç¼©çŸ­åƒåœ¾æ”¶é›†æ—¶ç”¨æˆ·çº¿ç¨‹çš„åœé¡¿æ—¶é—´ã€‚</li></ol><p><strong>åº”ç”¨åœºæ™¯ï¼š</strong> 1.é«˜ååé‡ä¸ºç›®æ ‡ï¼Œå³å‡å°‘åƒåœ¾æ”¶é›†æ—¶é—´ï¼Œè®©ç”¨æˆ·ä»£ç è·å¾—æ›´é•¿çš„è¿è¡Œæ—¶é—´ã€‚ 2.å½“åº”ç”¨ç¨‹åºè¿è¡Œåœ¨å…·æœ‰å¤šä¸ªCPUä¸Šï¼Œå¯¹æš‚åœæ—¶é—´æ²¡æœ‰ç‰¹åˆ«é«˜çš„è¦æ±‚æ—¶ï¼Œå³ç¨‹åºä¸»è¦åœ¨åå°è¿›è¡Œè®¡ç®—ï¼Œè€Œä¸éœ€è¦ä¸ç”¨æˆ·è¿›è¡Œå¤ªå¤šäº¤äº’ã€‚ä¾‹å¦‚ï¼Œé‚£äº›æ‰§è¡Œæ‰¹é‡å¤„ç†ã€è®¢å•å¤„ç†ã€å·¥èµ„æ”¯ä»˜ã€ç§‘å­¦è®¡ç®—çš„åº”ç”¨ç¨‹åº</p><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/28.png" alt></p><h2 id="è€å¹´ä»£å¸¸è§çš„åƒåœ¾æ”¶é›†å™¨"><a href="#è€å¹´ä»£å¸¸è§çš„åƒåœ¾æ”¶é›†å™¨" class="headerlink" title="è€å¹´ä»£å¸¸è§çš„åƒåœ¾æ”¶é›†å™¨"></a>è€å¹´ä»£å¸¸è§çš„åƒåœ¾æ”¶é›†å™¨</h2><h3 id="Serial-Oldæ”¶é›†å™¨"><a href="#Serial-Oldæ”¶é›†å™¨" class="headerlink" title="Serial Oldæ”¶é›†å™¨"></a>Serial Oldæ”¶é›†å™¨</h3><p>è®¾ç½®<code>-XX:+UseSerialOldGC</code>å¯ä»¥è®©è€å¹´ä»£ä½¿ç”¨è¯¥åƒåœ¾æ”¶é›†å™¨</p><p><code>Serial Old</code> æ˜¯ <code>Serial</code>æ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ï¼Œå®ƒåŒæ ·æ˜¯ä¸€ä¸ª<strong>å•çº¿ç¨‹æ”¶é›†å™¨</strong>ï¼Œä½¿ç”¨<strong>â€œæ ‡è®°-æ•´ç†â€ï¼ˆMark-Compactï¼‰</strong>ç®—æ³•ã€‚</p><p>æ”¶é›†å™¨çš„ä¸»è¦æ„ä¹‰ä¹Ÿæ˜¯åœ¨äºç»™<code>Client</code>æ¨¡å¼ä¸‹çš„è™šæ‹Ÿæœºä½¿ç”¨ã€‚å¦‚æœåœ¨<code>Server</code>æ¨¡å¼ä¸‹ï¼Œå®ƒè¿˜æœ‰ä¸¤å¤§ç”¨é€”ï¼š</p><ul><li>åœ¨JDK1.5 ä»¥åŠä¹‹å‰ç‰ˆæœ¬ï¼ˆ<code>Parallel Old</code>è¯ç”Ÿä»¥å‰ï¼‰ä¸­ä¸<code>Parallel Scavenge</code>æ”¶é›†å™¨æ­é…ä½¿ç”¨ã€‚</li><li>ä½œä¸º<code>CMS</code>æ”¶é›†å™¨çš„åå¤‡é¢„æ¡ˆï¼Œåœ¨å¹¶å‘æ”¶é›†å‘ç”Ÿ<strong>Concurrent Mode Failure</strong>æ—¶ä½¿ç”¨ã€‚</li></ul><p>å®ƒçš„å·¥ä½œæµç¨‹ä¸<code>Serial</code>æ”¶é›†å™¨ç›¸åŒã€‚</p><h3 id="Parallel-Oldæ”¶é›†å™¨"><a href="#Parallel-Oldæ”¶é›†å™¨" class="headerlink" title="Parallel Oldæ”¶é›†å™¨"></a>Parallel Oldæ”¶é›†å™¨</h3><p>è®¾ç½®<code>-xx:+UseParallelOldGC</code>å¯ä»¥è®©è€å¹´ä»£ä½¿ç”¨è¯¥åƒåœ¾æ”¶é›†å™¨</p><hr><p><code>Parallel Old</code>æ”¶é›†å™¨æ˜¯<code>Parallel Scavenge</code>æ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ï¼Œä½¿ç”¨å¤šçº¿ç¨‹å’Œâ€œæ ‡è®°-æ•´ç†â€ç®—æ³•ã€‚</p><p>åœ¨JDK1.6ä¸­æ‰å¼€å§‹æä¾›ï¼Œåœ¨æ­¤ä¹‹å‰ï¼Œæ–°ç”Ÿä»£é€‰æ‹©äº†<code>Parallel Scavenge</code>æ”¶é›†å™¨ï¼Œè€å¹´ä»£åªèƒ½é€‰æ‹©<code>Serial Old</code>ï¼Œå› ä¸º<code>Parallel Scavenge</code>æ˜¯å¤šçº¿ç¨‹æ”¶é›†å™¨ï¼Œä½†æ˜¯åˆ°äº†è€å¹´ä»£åªèƒ½ç”¨<code>Serial Old</code>æ”¶é›†å™¨ï¼Œè¿™æ ·ç›¸å½“äºåªèƒ½åœ¨æ–°ç”Ÿä»£è¾¾åˆ°æé«˜ååé‡çš„æ•ˆæœã€‚</p><p>ç›´åˆ°è€å¹´ä»£ä¹Ÿæä¾›äº†è¿™ç§ä»¥æé«˜ååé‡ä¸ºä¸»çš„æ”¶é›†å™¨ï¼Œæ–°ç”Ÿä»£ä½¿ç”¨<code>Parallel Scavenge</code>æ”¶é›†å™¨ï¼Œè€å¹´ä»£ä½¿ç”¨<code>Parallel Old</code>æ”¶é›†å™¨å°±å½¢æˆäº†ä»¥ååé‡ä¼˜å…ˆçš„æ”¶é›†å™¨ç»„åˆã€‚åœ¨æ³¨é‡ååé‡ä»¥åŠCPUèµ„æºæ•æ„Ÿçš„åœºåˆï¼Œå¯ä»¥ä¼˜å…ˆè€ƒè™‘è¿™ç§åœºåˆã€‚</p><p>å®ƒçš„å·¥ä½œæµç¨‹ä¸<code>Parallel Scavenge</code>æ”¶é›†å™¨ç›¸åŒã€‚</p><h3 id="CMSæ”¶é›†å™¨"><a href="#CMSæ”¶é›†å™¨" class="headerlink" title="CMSæ”¶é›†å™¨"></a>CMSæ”¶é›†å™¨</h3><p>è®¾ç½®<code>-XX:+UseConcMarkSweepGC</code>å¯ä»¥è®©è€å¹´ä»£ä½¿ç”¨è¯¥åƒåœ¾æ”¶é›†å™¨</p><p><strong>CMSï¼ˆConcurrent Mark Sweepï¼‰</strong>æ”¶é›†å™¨æ˜¯ä¸€ç§ä»¥<strong>è·å–æœ€çŸ­å›æ”¶åœé¡¿æ—¶é—´</strong>ä¸ºç›®æ ‡çš„æ”¶é›†å™¨ï¼Œå®ƒéå¸¸ç¬¦åˆé‚£äº›é›†ä¸­åœ¨äº’è”ç½‘ç«™æˆ–è€…B/Sç³»ç»Ÿçš„æœåŠ¡ç«¯ä¸Šçš„Javaåº”ç”¨ï¼Œè¿™äº›åº”ç”¨éƒ½éå¸¸é‡è§†æœåŠ¡çš„å“åº”é€Ÿåº¦ã€‚ä»åå­—ä¸Šï¼ˆâ€œMark Sweepâ€ï¼‰å°±å¯ä»¥çœ‹å‡ºå®ƒæ˜¯åŸºäº<strong>â€œæ ‡è®°-æ¸…é™¤â€</strong>ç®—æ³•å®ç°çš„ã€‚</p><p><code>CMS</code>æ”¶é›†å™¨å·¥ä½œçš„æ•´ä¸ªæµç¨‹ï¼š</p><ul><li><p>åˆå§‹æ ‡è®°ï¼šä»…ä»…åªæ˜¯æ ‡è®°ä¸€ä¸‹<code>GC Roots</code>èƒ½ç›´æ¥å…³è”åˆ°çš„å¯¹è±¡ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼Œéœ€è¦<code>Stop The World</code>ã€‚å¹¶å‘æ ‡è®°ï¼šå¹¶å‘è¿½æº¯æ ‡è®°ï¼Œç¨‹åºä¸ä¼šåœé¡¿</p></li><li><p>å¹¶å‘é¢„æ¸…ç†ï¼šæŸ¥æ‰¾æ‰§è¡Œå¹¶å‘æ ‡è®°é˜¶æ®µä»å¹´è½»ä»£æ™‹å‡åˆ°è€å¹´ä»£çš„å¯¹è±¡</p></li><li><p>é‡æ–°æ ‡è®°ï¼šæš‚åœè™šæ‹Ÿæœºï¼Œæ‰«æCMSå †ä¸­çš„å‰©ä½™å¯¹è±¡ã€‚ä»…ä»…åªæ˜¯æ ‡è®°ä¸€ä¸‹<code>GC Roots</code>èƒ½ç›´æ¥å…³è”åˆ°çš„å¯¹è±¡ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼Œéœ€è¦<code>Stop The World</code>ã€‚</p></li><li><p>å¹¶å‘æ¸…ç†ï¼šæ¸…ç†åƒåœ¾å¯¹è±¡ï¼Œç¨‹åºä¸ä¼šåœé¡¿</p></li><li><p>å¹¶å‘é‡ç½®ï¼šé‡ç½®CMSæ”¶é›†å™¨çš„æ•°æ®ç»“æ„</p></li></ul><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/29.png" alt></p><p>ä¼˜ç‚¹ï¼š</p><p>CMSæ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æ”¶é›†å™¨ï¼Œå®ƒçš„ä¸»è¦<strong>ä¼˜ç‚¹</strong>åœ¨åå­—ä¸Šå·²ç»ä½“ç°å‡ºæ¥äº†ï¼š<strong>å¹¶å‘æ”¶é›†</strong>ã€<strong>ä½åœé¡¿</strong>ï¼Œå› æ­¤CMSæ”¶é›†å™¨ä¹Ÿè¢«ç§°ä¸º<strong>å¹¶å‘ä½åœé¡¿æ”¶é›†å™¨ï¼ˆConcurrent Low Pause Collectorï¼‰</strong>ã€‚</p><p>ç¼ºç‚¹ï¼š</p><ul><li><p><strong>CMSæ”¶é›†å™¨å¯¹CPUèµ„æºéå¸¸æ•æ„Ÿ</strong>ã€‚åœ¨å¹¶å‘æ ‡è®°å’Œå¹¶å‘æ¸…é™¤æ—¶æ˜¯å’Œç”¨æˆ·çº¿ç¨‹ä¸€èµ·è¿è¡Œçš„ï¼Œæ”¶é›†è¿‡ç¨‹ä¸­è‚¯å®šå ç”¨äº†ç”¨æˆ·ç¨‹åºçš„CPUèµ„æºã€‚é»˜è®¤å¯åŠ¨çš„å›æ”¶çº¿ç¨‹æ•°æ˜¯ï¼ˆcpuæ•°é‡+3ï¼‰/4ï¼Œå½“cpuæ•°è¾ƒå°‘çš„æ—¶å€™ï¼Œä¼šåˆ†æ‰å¤§éƒ¨åˆ†çš„cpuå»æ‰§è¡Œæ”¶é›†å™¨çº¿ç¨‹ï¼Œå½±å“ç”¨æˆ·ï¼Œé™ä½ååé‡ã€‚</p></li><li><p><strong>CMSæ”¶é›†å™¨æ— æ³•å¤„ç†æµ®åŠ¨åƒåœ¾</strong>ã€‚åœ¨å¹¶å‘æ¸…é™¤é˜¶æ®µï¼Œç”¨æˆ·ç¨‹åºå¹¶æ²¡æœ‰åœæ­¢ï¼Œæ‰€ä»¥è¿˜ä¼šç»§ç»­äº§ç”Ÿåƒåœ¾ï¼Œè€Œè¿™éƒ¨åˆ†åƒåœ¾åªèƒ½ç­‰å¾…ç€ä¸‹ä¸€æ¬¡æ”¶é›†æ—¶æ‰èƒ½è¿›è¡Œå›æ”¶ã€‚</p></li><li><p><strong>CMSæ”¶é›†å™¨ä¼šäº§ç”Ÿç©ºé—´ç¢ç‰‡</strong>ã€‚å› ä¸ºCMSæ”¶é›†å™¨æ˜¯åŸºäºâ€œæ ‡è®°-æ¸…é™¤â€ç®—æ³•å®ç°çš„ï¼Œæ‰€ä»¥åœ¨è¿›è¡Œå¤§é‡çš„åƒåœ¾å›æ”¶æ—¶ï¼Œä¼šäº§ç”Ÿå¾ˆå¤šä¸è¿ç»­çš„å†…å­˜ç©ºé—´ã€‚è¿™æ˜¯ä½¿ç”¨â€œæ ‡è®°-æ¸…é™¤â€ç®—æ³•éƒ½ä¼šæœ‰çš„ç¼ºç‚¹ã€‚</p></li></ul><h3 id="G1æ”¶é›†å™¨"><a href="#G1æ”¶é›†å™¨" class="headerlink" title="G1æ”¶é›†å™¨"></a>G1æ”¶é›†å™¨</h3><p>è®¾ç½®<code>-XX:+UseG1GC</code>å¯ä»¥è®©è€å¹´ä»£ä½¿ç”¨è¯¥åƒåœ¾æ”¶é›†å™¨</p><p>G1ï¼ˆ<code>Garbage First</code>ï¼‰æ”¶é›†å™¨æ˜¯ç›®å‰æœ€æ–°çš„æ”¶é›†å™¨äº†ï¼Œ<strong>java9ä»¥åŠjava10é»˜è®¤çš„åƒåœ¾æ”¶é›†å™¨å°±æ˜¯G1ã€‚</strong>åœ¨<code>JDK6u14</code>ä¸­å°±æœ‰<code>Early Access</code>ç‰ˆæœ¬çš„G1æ”¶é›†å™¨æä¾›å¼€å‘äººå‘˜è¯•ç”¨ã€‚åˆ°<code>JDK 7u4</code>æ‰ç®—æ˜¯æ­£æ˜¯å‘å¸ƒã€‚G1æ˜¯åŸºäºâ€œæ ‡è®°-æ•´ç†â€ç®—æ³•æ¥å®ç°çš„ï¼Œå¯ä»¥ç‹¬ç«‹çš„ç»´æŠ¤æ–°ç”Ÿä»£ä»¥åŠè€å¹´ä»£ä¸¤ä¸ªéƒ¨åˆ†</p><p>ä¸å…¶ä»–çš„GCæ”¶é›†å™¨ç›¸æ¯”ï¼ŒG1æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li><p><strong>å¹¶è¡Œä¸å¹¶å‘</strong>ï¼ŒG1å……åˆ†åˆ©ç”¨å¤šCPUèµ„æºæ¥ç¼©çŸ­åœé¡¿æ—¶é—´ï¼Œå³æ‰§è¡ŒGCè¿‡ç¨‹ä¸­ç”¨æˆ·ç¨‹åºæ‰”å¯ç»§ç»­æ‰§è¡Œã€‚</p></li><li><p><strong>åˆ†ä»£æ”¶é›†ï¼Œ</strong>è™½ç„¶G1å¯ä»¥ä¸éœ€è¦ä¸å…¶ä»–æ”¶é›†å™¨é…åˆå°±å¯ä»¥ç‹¬ç«‹ç®¡ç†æ•´ä¸ªGCå †ï¼Œä½†åˆ†ä»£æ„Ÿå¿µåœ¨G1ä¸­ä¾ç„¶ä¿ç•™ï¼Œè¿™æ ·å¯ä»¥è®©G1é‡‡ç”¨ä¸åŒçš„æ–¹å¼æ¥å¤„ç†å¹´è½»ä»£å’Œè€å¹´ä»£çš„å¯¹è±¡ã€‚</p></li><li><p><strong>ç©ºé—´æ•´åˆ</strong>ï¼Œå› ä¸ºG1æ˜¯åŸºäºâ€œæ ‡è®°-æ•´ç†â€ç®—æ³•å®ç°çš„ï¼Œæ‰€ä»¥ä¸ä¼šäº§ç”Ÿç©ºé—´ç¢ç‰‡ï¼Œå†…å­˜ç©ºé—´å¾ˆå¥½çš„æ•´åˆèµ·æ¥äº†ã€‚</p></li><li><p><strong>å¯é¢„æµ‹çš„åœé¡¿ï¼Œ</strong>è¿™ä¸ªç‰¹ç‚¹æ˜¯ç›¸å¯¹CMSæ”¶é›†å™¨çš„ä¸€ä¸ªä¼˜åŠ¿ï¼ŒG1å¯ä»¥è®©ä½¿ç”¨è€…æ˜ç¡®æŒ‡å®šåœ¨ä¸€ä¸ªé•¿åº¦ä¸ºMæ¯«ç§’çš„æ—¶é—´ç‰‡æ®µå†…ï¼Œæ¶ˆè€—åœ¨ç‰¢è®°æ”¶é›†ä¸Šçš„æ—¶é—´ä¸å¾—è¶…è¿‡Nç§’ã€‚</p></li></ul><p>å‰é¢ä»‹ç»çš„å‡ ä¸ªæ”¶é›†å™¨ï¼Œè¦ä¹ˆæ˜¯ä½œç”¨åœ¨æ–°ç”Ÿä»£ï¼Œè¦ä¹ˆæ˜¯ä½œç”¨åœ¨è€å¹´ä»£ï¼Œ<strong>G1ä½œç”¨äºæ•´ä¸ªå †</strong>ï¼Œå®ƒå°†æ•´ä¸ªå †åˆ†ä¸ºå¤šä¸ªå¤§å°ç›¸ç­‰çš„ç‹¬ç«‹åŒºåŸŸï¼ˆ<code>Region</code>ï¼‰,è™½ç„¶ä»ä¿ç•™äº†åˆ†ä»£ï¼Œä½†ä¸å†æ˜¯ç‰©ç†éš”ç¦»ï¼Œéƒ½æ˜¯ä¸€éƒ¨åˆ†<code>Region</code>çš„é›†åˆã€‚</p><p>G1æ”¶é›†å™¨è¿è¡Œè¿‡ç¨‹å¤§è‡´åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š</p><ul><li>åˆå§‹æ ‡è®°</li><li>å¹¶å‘æ ‡è®°</li><li>æœ€ç»ˆæ ‡è®°</li><li>ç­›é€‰å›æ”¶</li></ul><p><strong>åˆå§‹æ ‡è®°é˜¶æ®µ</strong>å’Œ<code>CMS</code>æ”¶é›†å™¨ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä»…ä»…æ ‡è®°ä¸€ä¸‹<code>GC Roots</code>èƒ½ç›´æ¥å…³è”åˆ°çš„å¯¹è±¡ï¼Œå¹¶ä¸”ä¿®æ”¹<code>TAMSï¼ˆNext Top at Mark Startï¼‰</code>çš„å€¼ï¼Œè®©ä¸‹ä¸€é˜¶æ®µç”¨æˆ·ç¨‹åºå¹¶å‘è¿è¡Œæ—¶å¯ä»¥åœ¨æ­£ç¡®çš„<code>Reginon</code>ä¸­åˆ›å»ºæ–°å¯¹è±¡ã€‚<strong>å¹¶å‘æ ‡è®°é˜¶æ®µ</strong>æ˜¯å¯¹å †ä¸­å¯¹è±¡è¿›è¡Œå¯è¾¾æ€§åˆ†æï¼Œæ‰¾å‡ºå­˜æ´»å¯¹è±¡ï¼Œè¿™ä¸ªé˜¶æ®µå¯ä»¥ä¸ç”¨æˆ·çº¿ç¨‹å¹¶å‘è¿›è¡Œï¼Œè€Œ<strong>æœ€ç»ˆæ ‡è®°é˜¶æ®µ</strong>æ˜¯ä¸ºäº†ä¿®æ­£åœ¨å¹¶å‘æ ‡è®°æœŸé—´å› ä¸ºç”¨æˆ·ç¨‹åºå¹¶å‘è¿è¡Œï¼Œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„é‚£éƒ¨åˆ†æ ‡è®°è®°å½•ï¼Œè¿™é˜¶æ®µéœ€è¦ç”¨æˆ·çº¿ç¨‹åœé¡¿ï¼Œä½†æ˜¯å¯å¹¶å‘è¿›è¡Œã€‚åœ¨æœ€åçš„<strong>ç­›é€‰å›æ”¶é˜¶æ®µ</strong>é¦–å…ˆå¯¹å„ä¸ªRegionçš„å›æ”¶ä»·å€¼å’Œæˆæœ¬è¿›è¡Œæ’åºï¼Œç„¶åæ ¹æ®ç”¨æˆ·æ‰€æœŸæœ›çš„GCåœé¡¿æ—¶é—´æ¥åˆ¶å®šå›æ”¶è®¡åˆ’</p><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/30.jpeg" alt></p><h3 id="JDK11-Epsilon-GCä¸ZGC"><a href="#JDK11-Epsilon-GCä¸ZGC" class="headerlink" title="JDK11:Epsilon GCä¸ZGC"></a>JDK11:Epsilon GCä¸ZGC</h3><p><code>Epsilon GC</code>ï¼šæ— æ“ä½œå®éªŒåƒåœ¾æ”¶é›†å™¨ï¼Œå¤„ç†å†…å­˜åˆ†é…ä½†æ²¡æœ‰å®ç°ä»»ä½•å®é™…çš„å†…å­˜å›æ”¶æœºåˆ¶ã€‚ä¸€æ—¦å¯ç”¨çš„Javaå †è€—å°½ï¼ŒJVMå°±ä¼šå…³é—­ã€‚</p><p><code>Epsilon</code>åƒåœ¾å›æ”¶å™¨å’Œå…¶ä»–çš„åƒåœ¾å›æ”¶å™¨ä¸€æ ·ï¼Œä½¿ç”¨<code>-XX:+UseEpsilonGC</code>å¼€å¯ã€‚</p><hr><p><code>ZGC</code>ï¼šJava 11 æ–°åŠ å…¥çš„ZGCå·ç§°å¯ä»¥è¾¾åˆ°10ms ä»¥ä¸‹çš„ GC åœé¡¿</p><h2 id="å¯¹æ¯”-1"><a href="#å¯¹æ¯”-1" class="headerlink" title="å¯¹æ¯”"></a>å¯¹æ¯”</h2><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/31.png" alt></p><p><img src="/2019/07/16/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0--%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/34.png" alt></p><hr><p>å‚è€ƒï¼š</p><p><a href="https://zhuanlan.zhihu.com/p/26386634">JVM åƒåœ¾å›æ”¶ - çŸ¥ä¹</a></p><p><a href="https://juejin.im/post/5d241fcf6fb9a07ecd3d826b">Java åƒåœ¾å›æ”¶æœºåˆ¶(GC) - æ˜é‡‘</a></p><p><a href="https://www.cnblogs.com/fangfuhai/p/7203468.html">Javaè™šæ‹Ÿæœºï¼šGCç®—æ³•æ·±åº¦è§£æ - é£ä¸­ç¨‹åºçŒ¿ - åšå®¢å›­</a></p><p><a href="https://colobu.com/2015/04/07/minor-gc-vs-major-gc-vs-full-gc/">JVM åƒåœ¾å›æ”¶ Minor gc vs Major gc vs Full gc | é¸Ÿçª</a></p><p><a href="https://my.oschina.net/shadowolf/blog/1834231">006. æ·±å…¥JVMå­¦ä¹ â€”å¹´è½»ä»£ - æ˜“å†¥å¤© - OSCHINA</a></p><p><a href="https://my.oschina.net/pentakill/blog/3049804">java é¢è¯•çŸ¥è¯†ç‚¹ç¬”è®°ï¼ˆå››ï¼‰åƒåœ¾å›æ”¶ ä¸Šç¯‡ - é£æ ¼æºäºæ‰§ç€ - OSCHINA</a></p><p><a href="https://segmentfault.com/a/1190000004233812">[è¯‘]GCä¸“å®¶ç³»åˆ—1ï¼šç†è§£Javaåƒåœ¾å›æ”¶ - ç‰§æ›¦ä¹‹æ™¨ - SegmentFault æ€å¦</a></p><p><a href="https://www.cnblogs.com/jimoer/p/9038648.html">JVMå­¦ä¹ è®°å½•-åƒåœ¾æ”¶é›†å™¨ - çºªè« - åšå®¢å›­</a></p><p><a href="https://crowhawk.github.io/2017/08/15/jvm_3/">æ·±å…¥ç†è§£JVM(3)â€”â€”7ç§åƒåœ¾æ”¶é›†å™¨ - ç‹æ³½è¿œçš„åšå®¢ | Crowâ€™s Blog</a></p><p><a href="https://juejin.im/post/5bb4866df265da0a914559b5">java11æ–°ç‰¹æ€§â€”Epsilon:A No-Op Garbage Collector - æ˜é‡‘</a></p><p><a href="https://www.baeldung.com/jvm-epsilon-gc-garbage-collector">An Introduction to Epsilon GC: A No-Op Experimental Garbage Collector â€“ Baeldung</a></p><p><a href="https://juejin.im/entry/5b86a276f265da435c4402d4">Javaç¨‹åºå‘˜çš„è£å…‰ï¼Œå¬Rå¤§è®ºJDK11çš„ZGC - åç«¯ - æ˜é‡‘</a></p><p><a href="https://blog.csdn.net/liujiahan629629/article/details/85215655">JVM(äºŒ)â€”â€”åƒåœ¾å›æ”¶ï¼ˆGC Garbage Collectionï¼‰ - å­¦ä¼šæ”¹å˜è‡ªå·±â€”â€”æ‰èƒ½çªç ´ - CSDNåšå®¢</a></p><hr>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jvm </tag>
            
            <tag> åƒåœ¾å›æ”¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸»å¸­æ ‘</title>
      <link href="/2019/07/15/%E4%B8%BB%E5%B8%AD%E6%A0%91/"/>
      <url>/2019/07/15/%E4%B8%BB%E5%B8%AD%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<p>ä¸»å¸­æ ‘åˆåå¯æŒä¹…åŒ–çº¿æ®µæ ‘</p><span id="more"></span><h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„ä¸»å¸­æ ‘å°±æ˜¯å¯æŒä¹…åŒ–çº¿æ®µæ ‘ï¼Œä»€ä¹ˆå«å¯æŒä¹…åŒ–å‘¢ï¼Ÿå°±æ˜¯è¿™æ£µæ ‘å•Šï¼Œ<strong>å¯ä»¥è®°å½•æ¯ä¸€æ¬¡ä¿®æ”¹çš„å†…å®¹</strong>ï¼Œæ¢å¥è¯è¯´ï¼Œå°±æ˜¯å¯ä»¥è®¿é—®è¿™æ£µæ ‘çš„å†å²è®°å½•ã€‚</p><h1 id="å¸¸è§åº”ç”¨"><a href="#å¸¸è§åº”ç”¨" class="headerlink" title="å¸¸è§åº”ç”¨"></a>å¸¸è§åº”ç”¨</h1><ul><li>åŒºé—´/æ ‘ä¸Šè·¯å¾„ç¬¬ K å¤§</li><li>åŒºé—´ä¸åŒæ•°çš„ä¸ªæ•°</li></ul><p><strong>å¾ˆå¤šé—®é¢˜å¦‚æœç”¨çº¿æ®µæ ‘å¤„ç†çš„è¯éœ€è¦é‡‡ç”¨ç¦»çº¿æ€æƒ³ï¼Œè‹¥ç”¨ä¸»å¸­æ ‘åˆ™å¯ç›´æ¥åœ¨çº¿å¤„ç†ã€‚æ•…å¾ˆå¤šæ—¶å€™ç¦»çº¿çº¿æ®µæ ‘æ±‚è§£å¯ä»¥è½¬åŒ–ä¸ºåœ¨çº¿ä¸»å¸­æ ‘æ±‚è§£ã€‚</strong></p><p>æ³¨æ„ï¼Œä¸»å¸­æ ‘æœ¬è´¨å°±æ˜¯çº¿æ®µæ ‘ï¼Œå˜åŒ–å°±åœ¨å…¶å®ç°å¯æŒä¹…åŒ–ï¼Œåä¸€åˆ»å¯ä»¥å‚è€ƒå‰ä¸€åˆ»çš„çŠ¶æ€ï¼ŒäºŒè€…å…±åŒéƒ¨åˆ†å¾ˆå¤š<strong>ã€‚ä¸€é¢—çº¿æ®µæ ‘çš„èŠ‚ç‚¹ç»´æŠ¤çš„æ˜¯å½“å‰èŠ‚ç‚¹å¯¹åº”åŒºé—´çš„ä¿¡æ¯ï¼Œå€˜è‹¥æ¯æ¬¡åŒºé—´éƒ½ä¸ä¸€æ ·ï¼Œå°±ä¼šç»™å¤„ç†å¸¦æ¥ä¸€äº›å›°éš¾</strong>ã€‚æœ‰æ—¶å¯ä»¥ç›´æ¥ç»†åˆ†åŒºé—´ç„¶ååˆå¹¶ï¼Œæ­¤ç§æƒ…å†µçº¿æ®µæ ‘å¯ä»¥ç›´æ¥æå®šï¼›ä½†æœ‰æ—¶æ— æ³•é€šè¿‡ç›´æ¥åˆ’åˆ†åŒºé—´æ¥æ±‚è§£ï¼Œå¦‚é¢‘ç¹è¯¢é—®åŒºé—´ç¬¬kå°å…ƒç´ ï¼Œå½“ç„¶ï¼Œæ­¤é—®é¢˜æœ‰æ¯”è¾ƒç‰¹æ®Šçš„æ•°æ®ç»“æ„-åˆ’åˆ†æ ‘ã€‚å…¶å®è¿˜æœ‰ä¸€ä¸ªå«åšå½’å¹¶æ ‘ï¼Œæ˜¯æ ¹æ®å½’å¹¶æ’åºå®ç°çš„ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¿å­˜çš„æ˜¯è¯¥åŒºé—´å½’å¹¶æ’åºåçš„åºåˆ—ï¼Œå› æ­¤ï¼Œæ—¶é—´ã€ç©ºé—´å¤æ‚åº¦éƒ½åŠå…¶é«˜ï¼Œ æ‰€ä»¥ä¸€èˆ¬ä¸æ¨èå»ç”¨ã€‚å½“ç„¶ï¼Œä¸»å¸­æ ‘ä¹Ÿæ˜¯å¯ä»¥è§£å†³çš„ã€‚</p><h1 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h1><p>ç”±è‹¥å¹²æ£µçº¿æ®µæ ‘ç»„æˆï¼ˆè‹¥æ˜¯æƒå€¼çº¿æ®µæ ‘é€šå¸¸éœ€å…ˆå¯¹æ•°æ®ç¦»æ•£åŒ–ï¼‰ï¼ŒæŒ‰ç…§è¾“å…¥é¡ºåºï¼Œæ¯æ’å…¥ä¸€ä¸ªæ•°ä¿å­˜ä¸€ä»½å½“å‰ç‰ˆæœ¬çš„çº¿æ®µæ ‘ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>å¯¹äº n ä¸ªæ•°çš„è¾“å…¥æ•°æ®ï¼Œå®ƒä¼šä¿å­˜ n æ£µçº¿æ®µæ ‘</strong>ã€‚</p><h1 id="å»ºæ ‘è¿‡ç¨‹"><a href="#å»ºæ ‘è¿‡ç¨‹" class="headerlink" title="å»ºæ ‘è¿‡ç¨‹"></a>å»ºæ ‘è¿‡ç¨‹</h1><p>ä¸‹é¢æˆ‘ä»¬ä»¥æ±‚åŒºé—´ç¬¬ K å¤§çš„å®ä¾‹æ¥è®²è§£ä¸€ä¸‹å¦‚ä½•å»ºç«‹ä¸»å¸­æ ‘ã€‚</p><p><strong>æ¯”å¦‚æœ‰4ä¸ªæ•°500 30 6000 9432424ï¼Œæ±‚åŒºé—´$[2,4]$ç¬¬2å°çš„æ•°ã€‚</strong></p><p>æˆ‘ä»¬å¯ä»¥å¯¹åŒºé—´ç¦»æ•£åŒ–ï¼Œç¦»æ•£åŒ–å˜æˆ2 1 3 4</p><blockquote><p>ç¦»æ•£åŒ–ï¼šå½“æ•°æ®åªä¸å®ƒä»¬ä¹‹é—´çš„ç›¸å¯¹å¤§å°æœ‰å…³ï¼Œè€Œä¸å…·ä½“æ˜¯å¤šå°‘æ— å…³æ—¶ï¼Œå¯ä»¥è¿›è¡Œç¦»æ•£åŒ–ã€‚</p></blockquote><p>ä¸»å¸­æ ‘å°±æ˜¯å¾ˆå¤šçº¿æ®µæ ‘çš„æ€»ä½“ï¼Œè€Œè¿™äº›çº¿æ®µæ ‘å°±æ˜¯æŒ‰ç»™å®šåºåˆ—çš„æ‰€æœ‰å‰ç¼€å»ºç«‹çš„ã€‚æ‰€ä»¥æˆ‘ä»¬å®šä¹‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">T[i]è¡¨ç¤ºç¬¬iæ£µçº¿æ®µæ ‘çš„æ ¹èŠ‚ç‚¹ç¼–å·ï¼ŒL[i]è¡¨ç¤ºèŠ‚ç‚¹içš„å·¦å­èŠ‚ç‚¹ç¼–å·ï¼ŒR[i]è¡¨ç¤ºèŠ‚ç‚¹içš„å³å­èŠ‚ç‚¹ç¼–å·ï¼Œsum[i]è¡¨ç¤ºèŠ‚ç‚¹iå¯¹åº”åŒºé—´ä¸­æ•°çš„ä¸ªæ•°ã€‚ </span><br></pre></td></tr></table></figure><p>æ¥ç€ï¼Œä»T[0]å¼€å§‹å»ºç«‹ç©ºæ ‘ï¼Œä¹‹åä¾æ¬¡åŠ å…¥ç¬¬iä¸ªæ•°å»ºç«‹T[i]ã€‚ </p><p><strong>æ³¨æ„ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥ä»¥åºåˆ—çš„æ‰€æœ‰å‰ç¼€å»ºç«‹çº¿æ®µæ ‘è‚¯å®šä¼šMLEï¼Œè¿™é‡Œä¸»å¸­æ ‘æœ€ç²¾å¦™çš„åœ°æ–¹å°±å‡ºæ¥äº†ã€‚æˆ‘ä»¬å»ºç«‹çš„è¿™äº›çº¿æ®µæ ‘çš„ç»“æ„ï¼Œç»´æŠ¤çš„åŒºé—´æ˜¯ç›¸åŒçš„ï¼Œä¸»å¸­æ ‘å……åˆ†åˆ©ç”¨äº†è¿™äº›çº¿æ®µæ ‘ä¸­çš„ç›¸åŒéƒ¨åˆ†ï¼Œå¤§å¤§å‡å°‘äº†ç©ºé—´æ¶ˆè€—ï¼Œè¾¾åˆ°ä¼˜åŒ–ç›®çš„ã€‚</strong></p><hr><p>æŒ‰ç…§æ–°æ•°ç»„å»ºç«‹æƒå€¼çº¿æ®µæ ‘ï¼Œåˆå§‹ä¸ºç©º</p><p><img src="/2019/07/15/%E4%B8%BB%E5%B8%AD%E6%A0%91/1.png" alt></p><p><strong>å›¾ä¸­æ¯ä¸ªèŠ‚ç‚¹ä¸Šé¢ä¸ºèŠ‚ç‚¹ç¼–å·ï¼ŒèŠ‚ç‚¹ä¸‹é¢ä¸ºå¯¹åº”åŒºé—´ï¼ŒèŠ‚ç‚¹ä¸­æ•°ä¸ºåŒºé—´ä¸­å«æœ‰çš„æ•°çš„ä¸ªæ•°</strong></p><hr><p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦æŒ‰ç…§è¾“å…¥é¡ºåºä¾æ¬¡æ’å…¥æ•°æ®ï¼Œé¦–å…ˆæ’å…¥2</p><p><img src="/2019/07/15/%E4%B8%BB%E5%B8%AD%E6%A0%91/8.png" alt></p><p><strong>æˆ‘ä»¬çŸ¥é“ï¼Œæ›´æ–°ä¸€ä¸ªå¶èŠ‚ç‚¹åªä¼šå½±å“æ ¹èŠ‚ç‚¹åˆ°è¯¥å¶èŠ‚ç‚¹çš„ä¸€æ¡è·¯å¾„ï¼Œæ•…åªéœ€ä¿®æ”¹è¯¥è·¯å¾„ä¸Šçš„ä¿¡æ¯å³å¯ï¼Œé‚£ä¹ˆå…¶ä»–çš„éƒ¨åˆ†å°±å¯ä»¥å…±ç”¨ï¼Œä¸åŒçš„éƒ¨åˆ†åªéœ€è¦æ–°å»ºèŠ‚ç‚¹å³å¯</strong></p><p>å› ä¸ºä¸Šä¸€é¢—æ ‘çš„æœ€å¤§èŠ‚ç‚¹ç¼–å·ä¸º7ï¼Œæ‰€ä»¥è¿™é¢—æ ¹èŠ‚ç‚¹ç¼–å·ä¸º8ã€‚</p><p>å› ä¸ºè¦æ’å…¥æ•°æ®ä¸º2ï¼Œæ ¹æ®çº¿æ®µæ ‘ç‰¹ç‚¹ï¼Œå…±ä¸‰ä¸ªèŠ‚ç‚¹å—åˆ°å½±å“ï¼Œå—åˆ°å½±å“çš„èŠ‚ç‚¹åˆ™é‡æ–°åˆ›å»ºèŠ‚ç‚¹ï¼Œé‚£ä¹ˆå¯¹åº”çš„ç¼–å·ä¹Ÿä¼šå˜ï¼Œå¦‚ä¸Šå›¾çš„ç¼–å·ä¸º9å’Œ10çš„èŠ‚ç‚¹ï¼Œå…¶ä»–èŠ‚ç‚¹æ²¡æœ‰å½±å“çš„è¯åˆ™ç»§ç»­ç”¨ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œä¸éœ€è¦æ”¹å˜ã€‚</p><p>ç²¾ç®€åçš„æ ‘å¦‚ä¸‹é¢æ‰€ç¤º</p><p><img src="/2019/07/15/%E4%B8%BB%E5%B8%AD%E6%A0%91/2.png" alt></p><p><em>çœç•¥éƒ¨åˆ†èŠ‚ç‚¹ä¿¡æ¯</em></p><hr><p>æ¥ç€æ’å…¥1</p><p><img src="/2019/07/15/%E4%B8%BB%E5%B8%AD%E6%A0%91/3.png" alt></p><hr><p>æ’å…¥3</p><p><img src="/2019/07/15/%E4%B8%BB%E5%B8%AD%E6%A0%91/4.png" alt></p><hr><p>æ’å…¥4</p><p><img src="/2019/07/15/%E4%B8%BB%E5%B8%AD%E6%A0%91/5.png" alt></p><hr><p>ä¸‹é¢ä¸ºæ‰€æœ‰çº¿æ®µæ ‘ç»„åˆæˆä¸»å¸­æ ‘</p><p><img src="/2019/07/15/%E4%B8%BB%E5%B8%AD%E6%A0%91/7.png" alt></p><p>ä»å›¾ä¸­åº”è¯¥å¯ä»¥çœ‹å‡ºä¸»å¸­æ ‘æ˜¯æ€ä¹ˆå……åˆ†åˆ©ç”¨è¿™äº›çº¿æ®µæ ‘çš„ç›¸åŒç»“æ„æ¥å‡å°‘ç©ºé—´æ¶ˆè€—çš„ã€‚å½“è¦æ–°å»ºä¸€ä¸ªçº¿æ®µæ ‘æ—¶æœ€å¤šåªéœ€è¦æ–°å¢$log2n$ä¸ªèŠ‚ç‚¹ï¼Œç›¸å½“äºåªæ›´æ–°äº†ä¸€æ¡é“¾ï¼Œå…¶å®ƒèŠ‚ç‚¹ä¸å®ƒçš„å‰ä¸€ä¸ªçº¿æ®µæ ‘å…¬ç”¨ã€‚</p><p>è‡³æ­¤ï¼Œä¸»å¸­æ ‘å»ºæ ‘å®Œæˆï¼Œæ—¶é—´å¤æ‚åº¦$O(nlog2n)$ã€‚</p><h1 id="æŸ¥æ‰¾"><a href="#æŸ¥æ‰¾" class="headerlink" title="æŸ¥æ‰¾"></a>æŸ¥æ‰¾</h1><p>å»ºå®Œä¸»å¸­æ ‘åæˆ‘ä»¬çœ‹çœ‹å®ƒæ˜¯æ€ä¹ˆæŸ¥æ‰¾åŒºé—´$[2,4]$ç¬¬2å°çš„æ•°çš„ã€‚ </p><p>T[i]è¡¨ç¤ºå¤„ç†å®Œå‰iä¸ªæ•°ä¹‹åæ‰€å½¢æˆçš„çº¿æ®µæ ‘ï¼Œå³å…·æœ‰äº†å‰ç¼€å’Œçš„æ€§è´¨ï¼Œé‚£ä¹ˆ$T[r] - T[l-1]$å³è¡¨ç¤ºå¤„ç†çš„$[l, r]$åŒºé—´ã€‚å½“è¦æŸ¥è¯¢åŒºé—´$[1,3]$çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªè¦å°†T[3] å’ŒT[0]èŠ‚ç‚¹ç›¸å‡å³å¯å¾—åˆ°è¦å¤„ç†çš„çº¿æ®µæ ‘</p><p>è¿™æ ·æˆ‘ä»¬å¾—åˆ°åŒºé—´$[l, r]$çš„æ•°è¦æŸ¥è¯¢ç¬¬kå¤§å°±å¾ˆå®¹æ˜“äº†ï¼Œè®¾å·¦èŠ‚ç‚¹ä¸­å­˜çš„ä¸ªæ•°ä¸ºcntï¼Œå½“$k&lt;=cnt$æ—¶ï¼Œæˆ‘ä»¬ç›´æ¥æŸ¥è¯¢å·¦å„¿å­ä¸­ç¬¬kå°çš„æ•°å³å¯ï¼Œå¦‚æœ$k&gt;cnt$ï¼Œæˆ‘ä»¬åªè¦å»æŸ¥å³å„¿å­ä¸­ç¬¬$k-cnt$å°çš„æ•°å³å¯ï¼Œè¿™è¾¹æ˜¯ä¸€é“å¾ˆç®€å•çš„çº¿æ®µæ ‘äº†ã€‚</p><p><em>ç¦»æ•£åŒ–çš„è¿‡ç¨‹å·²ç»æ’åºï¼Œæ‰€ä»¥ä¸Šé¢çš„æŸ¥æ‰¾æ–¹æ³•ç±»ä¼¼äºäºŒåˆ†æŸ¥æ‰¾</em></p><h1 id="POJ2104-K-th-Number"><a href="#POJ2104-K-th-Number" class="headerlink" title="POJ2104 K-th Number"></a><a href="http://poj.org/problem?id=2104">POJ2104 K-th Number</a></h1><p><img src="/2019/07/15/%E4%B8%BB%E5%B8%AD%E6%A0%91/9.png" alt></p><p>é¢˜ç›®å¤§æ„ï¼š</p><p>å°±æ˜¯å¾ˆç®€å•çš„ç»™å‡ºä¸€ä¸ªé•¿ä¸ºnçš„åºåˆ—aï¼Œç„¶åç»™å‡ºmä¸ªè¯¢é—®ï¼Œæ¯æ¬¡ç»™å‡ºä¸‰ä¸ªæ•°x,y,kï¼Œç„¶åéœ€è¦æˆ‘ä»¬æ±‚å‡ºåœ¨åºåˆ—açš„åŒºé—´$[x,y]$ä¸­ï¼Œç¬¬kå¤§çš„æ•°æ˜¯å“ªä¸ªã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Problem: 2104User: heigua</span></span><br><span class="line"><span class="comment">Memory: 22072KTime: 1250MS</span></span><br><span class="line"><span class="comment">Language: C++Result: Accepted</span></span><br><span class="line"><span class="comment">2019-07-15 02:47:22</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">100001</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ¬ä»£ç ä¸­æ‰€æœ‰æ•°æ®å‡æŒ‰ä»ä¸‹æ ‡ 1 å¼€å§‹å­˜æ”¾</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸»å¸­æ ‘ä¸­çš„çº¿æ®µæ ‘ç»“ç‚¹ï¼Œsum è¡¨ç¤ºæ­¤åŒºé—´å†…å…ƒç´ ä¸ªæ•°</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> sum, l, r;</span><br><span class="line">&#125; hjt[MAXN*<span class="number">40</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[MAXN], sorted[MAXN], num;    <span class="comment">// sorted: ç¦»æ•£åŒ–åçš„æ•°ç»„ num: ç¦»æ•£åŒ–åçš„æ•°ç»„é•¿åº¦</span></span><br><span class="line"><span class="keyword">int</span> root[MAXN], cnt;    <span class="comment">// root: ä¸»å¸­æ ‘ä¸­ç”¨æ¥ä¿å­˜æ¯æ£µçº¿æ®µæ ‘æ ‘æ ¹çš„æ•°ç»„ cnt: çº¿æ®µæ ‘ç»“ç‚¹æ•°ï¼ˆç”¨äºæ•°ç»„æ–¹å¼åŠ¨æ€å¼€ç‚¹ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥æ‰¾ç¦»æ•£åŒ–ä¹‹åçš„ä¸‹æ ‡</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">GetIdx</span><span class="params">(<span class="keyword">int</span> v)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">lower_bound</span>(sorted+<span class="number">1</span>, sorted+<span class="number">1</span>+num, v) - sorted;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cnt = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºç»“ç‚¹</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">CreateNode</span><span class="params">(<span class="keyword">int</span> sum, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> idx = ++cnt;</span><br><span class="line">    hjt[idx].sum = sum;</span><br><span class="line">    hjt[idx].l = l;</span><br><span class="line">    hjt[idx].r = r;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> idx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–°å»ºä¸€æ£µçº¿æ®µæ ‘ï¼Œåªæ²¿æ›´æ–°è·¯å¾„æ–°å»ºå‡ºè¾ƒä¸Šä¸ªç‰ˆæœ¬æœ‰ä¿®æ”¹çš„ç»“ç‚¹</span></span><br><span class="line"><span class="comment">// è°ƒç”¨å‚æ•°</span></span><br><span class="line"><span class="comment">// root: æ’å…¥åæ–°ç”Ÿæˆçš„çº¿æ®µæ ‘çš„æ ¹ç»“ç‚¹ä¼šèµ‹å€¼åˆ° root ä¸­å­˜å‚¨</span></span><br><span class="line"><span class="comment">// pre_rt: ä¸Šä¸€æ£µçº¿æ®µæ ‘çš„æ ¹</span></span><br><span class="line"><span class="comment">// pos: æœ¬æ¬¡è¦æ’å…¥çš„æ•°åœ¨çº¿æ®µæ ‘ä¸­çš„ä½ç½®</span></span><br><span class="line"><span class="comment">// l, r: é€’å½’å‚æ•°ã€‚é»˜è®¤å¡«å†™ 1, num</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Insert</span><span class="params">(<span class="keyword">int</span> &amp;root, <span class="keyword">int</span> pre_rt, <span class="keyword">int</span> pos, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åŠ¨æ€åˆ›å»ºç»“ç‚¹ï¼Œç›´æ¥æ ¹æ®ä¸Šä¸€ä¸ªç‰ˆæœ¬å¤åˆ¶å¯¹åº”çš„ç»“ç‚¹ï¼Œsum+1</span></span><br><span class="line">    root = <span class="built_in">CreateNode</span>(hjt[pre_rt].sum+<span class="number">1</span>, hjt[pre_rt].l, hjt[pre_rt].r);</span><br><span class="line">    <span class="keyword">if</span>(l == r) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> m = (l+r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(pos &lt;= m)</span><br><span class="line">        <span class="built_in">Insert</span>(hjt[root].l, hjt[pre_rt].l, pos, l, m);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">Insert</span>(hjt[root].r, hjt[pre_rt].r, pos, m+<span class="number">1</span>, r);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ¬å‡½æ•°é€‚ç”¨äºæŸ¥è¯¢åŒºé—´ [l, r] ä¸­çš„ç¬¬ k å°ã€‚é€šå¸¸éœ€è¦è‡ªè¡Œå˜é€š</span></span><br><span class="line"><span class="comment">// è°ƒç”¨å‚æ•°</span></span><br><span class="line"><span class="comment">// s, e: è¦æŸ¥è¯¢åŒºé—´æ‰€éœ€çš„ä¸¤ä¸ªçº¿æ®µæ ‘çš„æ ¹ï¼Œå¦‚è¦æŸ¥è¯¢åŒºé—´ [l, r]ï¼Œåˆ™ä¼ å…¥ root[l-1], root[r]</span></span><br><span class="line"><span class="comment">// k: è¦æŸ¥è¯¢åŒºé—´ç¬¬å‡ å°</span></span><br><span class="line"><span class="comment">// l, r: é€’å½’å‚æ•°ã€‚é»˜è®¤å¡«å†™ 1, num</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Query</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span> e, <span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l == r) <span class="keyword">return</span> l;</span><br><span class="line">    <span class="keyword">int</span> m = (l+r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> sum = hjt[hjt[e].l].sum - hjt[hjt[s].l].sum;    <span class="comment">// è®¡ç®—å·¦å­æ ‘çš„å…ƒç´ æ•°é‡</span></span><br><span class="line">    <span class="keyword">if</span>(k &lt;= sum)    <span class="comment">// å¦‚æœ k &lt;= sumï¼Œåˆ™ k åœ¨å·¦å­æ ‘ï¼Œå¦åˆ™åœ¨å³å­æ ‘</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Query</span>(hjt[s].l, hjt[e].l, k, l, m);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="built_in">Query</span>(hjt[s].r, hjt[e].r, k-sum, m+<span class="number">1</span>, r);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, m, l, r, k;</span><br><span class="line">    <span class="keyword">while</span>(~ <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m)) &#123;</span><br><span class="line">        <span class="built_in">Init</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">            sorted[i] = a[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">sort</span>(sorted+<span class="number">1</span>, sorted+<span class="number">1</span>+n);    <span class="comment">// æŒ‰å€¼æ’åº</span></span><br><span class="line">        num = <span class="built_in">unique</span>(sorted+<span class="number">1</span>, sorted+<span class="number">1</span>+n) - (sorted+<span class="number">1</span>);    <span class="comment">// å»é‡ï¼Œè¿”å›å»é‡åçš„å…ƒç´ æ•°é‡</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;    <span class="comment">// æŒ‰é¡ºåºæ’å…¥ï¼Œå»ºç«‹ n æ£µæƒå€¼çº¿æ®µæ ‘</span></span><br><span class="line">            <span class="built_in">Insert</span>(root[i], root[i<span class="number">-1</span>], <span class="built_in">GetIdx</span>(a[i]), <span class="number">1</span>, num);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(m--) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;l, &amp;r, &amp;k);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, sorted[<span class="built_in">Query</span>(root[l<span class="number">-1</span>], root[r], k, <span class="number">1</span>, num)]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š</p><p><a href="https://www.jvruo.com/archives/171/">ã€è’Ÿè’»æ•°æ®ç»“æ„ã€‘ä¸»å¸­æ ‘ - è’Ÿè’»ã®BLOG</a></p><p><a href="https://dreamer.blue/blog/post/2018/03/01/aiabs_hjt.dream">ç®—æ³•æœ‰ç‚¹ç”œä¹‹ä¸»å¸­æ ‘ - bLueâ€™s blog</a></p><p><a href="http://www.fdlly.com/p/182447363.html">ä¸»å¸­æ ‘ï¼ˆé™æ€ï¼‰ å›¾æ–‡è®²è§£è®©ä½ ä¸€æ¬¡å°±æ‡‚ hdu2665ä¸ºä¾‹</a></p><p><a href="https://www.cnblogs.com/zyf0163/p/4749042.html">æ ‘çŠ¶ç»“æ„ä¹‹ä¸»å¸­æ ‘ - æ®‡é›ª - åšå®¢å›­</a></p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¸»å¸­æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQLä¸­çš„EXISTS</title>
      <link href="/2019/07/02/SQL%E4%B8%AD%E7%9A%84EXISTS/"/>
      <url>/2019/07/02/SQL%E4%B8%AD%E7%9A%84EXISTS/</url>
      
        <content type="html"><![CDATA[<p>SQLä¸­çš„EXISTSä¸SQLä¸­çš„NOT EXISTS</p><span id="more"></span><h1 id="ä»SQLä¸­åŸºç¡€çš„WHEREå­—å¥å¼€å§‹"><a href="#ä»SQLä¸­åŸºç¡€çš„WHEREå­—å¥å¼€å§‹" class="headerlink" title="ä»SQLä¸­åŸºç¡€çš„WHEREå­—å¥å¼€å§‹"></a>ä»<code>SQL</code>ä¸­åŸºç¡€çš„<code>WHERE</code>å­—å¥å¼€å§‹</h1><p>æœ‰ä¸€å­¦ç”Ÿä¿¡æ¯è¡¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT Sno, Sname FROM Student WHERE Sdept = &#x27;IS&#x27;;</span><br></pre></td></tr></table></figure><p>å¾ˆæ˜¾ç„¶ï¼Œåœ¨æ‰§è¡Œè¿™æ¡ <code>SQL</code>è¯­å¥çš„æ—¶å€™ï¼Œ<code>DBMS</code>ä¼šæ‰«æ <code>Student</code>è¡¨ä¸­çš„æ¯ä¸€æ¡è®°å½•ï¼Œç„¶åæŠŠç¬¦åˆ <code>Sdept = &#39;IS&#39;</code>è¿™ä¸ªæ¡ä»¶çš„æ‰€æœ‰è®°å½•ç­›é€‰å‡ºæ¥ï¼Œå¹¶æ”¾åˆ°ç»“æœé›†é‡Œé¢å»ã€‚ä¹Ÿå°±æ˜¯è¯´ <strong><code>WHERE</code>å…³é”®å­—çš„ä½œç”¨å°±æ˜¯åˆ¤æ–­åé¢çš„é€»è¾‘è¡¨è¾¾å¼çš„å€¼æ˜¯å¦ä¸º <code>True</code>ã€‚å¦‚æœä¸º <code>True</code>ï¼Œåˆ™å°†å½“å‰è¿™æ¡è®°å½•ï¼ˆç»è¿‡<code>SELECT</code>å…³é”®å­—å¤„ç†åï¼‰æ”¾åˆ°ç»“æœé›†é‡Œé¢å»ï¼Œå¦‚æœé€»è¾‘è¡¨è¾¾å¼çš„å€¼ä¸º <code>False</code>åˆ™ä¸æ”¾</strong>ã€‚</p><h1 id="ä½¿ç”¨EXISTSå…³é”®å­—"><a href="#ä½¿ç”¨EXISTSå…³é”®å­—" class="headerlink" title="ä½¿ç”¨EXISTSå…³é”®å­—"></a>ä½¿ç”¨<code>EXISTS</code>å…³é”®å­—</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT Sname FROM Student WHERE EXISTS</span><br><span class="line">(SELECT * FROM SC WHERE</span><br><span class="line">     Sno = Student.Sno AND Cno = &#x27;1&#x27;);</span><br></pre></td></tr></table></figure><p>è¿™æ¡<code>SQL</code>è¯­å¥çš„ä½œç”¨ï¼Œå°±æ˜¯<strong>æŸ¥æ‰¾æ‰€æœ‰é€‰ä¿®äº† 1 å·è¯¾ç¨‹çš„è¯¾ç¨‹çš„å­¦ç”Ÿï¼Œå¹¶æ˜¾ç¤ºä»–ä»¬çš„å§“å</strong>ã€‚</p><p>æˆ‘ä»¬å…ˆä¸ç®¡<code>EXISTS</code>å…³é”®å­—åœ¨å…¶ä¸­èµ·äº†ä»€ä¹ˆä½œç”¨ï¼Œè€Œæ˜¯å…ˆæ¥çœ‹å­æŸ¥è¯¢ä¸­çš„<code>WHERE</code> å…³é”®å­—åçš„è¡¨è¾¾å¼ :</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Sno = Student.Sno AND Cno = &#x27;1&#x27;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­çš„ <code>Sno = Student.Sno</code>æ˜¯æ€ä¹ˆä¸€å›äº‹ï¼Ÿè¿™å°±æ¶‰åŠåˆ° SQL ä¸­çš„<strong>ä¸ç›¸å…³å­æŸ¥è¯¢ä¸ç›¸å…³å­æŸ¥è¯¢</strong>äº†</p><h1 id="ä¸ç›¸å…³å­æŸ¥è¯¢ä¸ç›¸å…³å­æŸ¥è¯¢"><a href="#ä¸ç›¸å…³å­æŸ¥è¯¢ä¸ç›¸å…³å­æŸ¥è¯¢" class="headerlink" title="ä¸ç›¸å…³å­æŸ¥è¯¢ä¸ç›¸å…³å­æŸ¥è¯¢"></a>ä¸ç›¸å…³å­æŸ¥è¯¢ä¸ç›¸å…³å­æŸ¥è¯¢</h1><h2 id="ä¸ç›¸å…³å­æŸ¥è¯¢"><a href="#ä¸ç›¸å…³å­æŸ¥è¯¢" class="headerlink" title="ä¸ç›¸å…³å­æŸ¥è¯¢"></a>ä¸ç›¸å…³å­æŸ¥è¯¢</h2><p>æˆ‘ä»¬å¸¸è§çš„å¸¦å­æŸ¥è¯¢çš„<code>SQL</code>è¯­å¥æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT Sno FROM SC WHERE Cno IN</span><br><span class="line">(SELECT Cno FROM Course WHERE </span><br><span class="line">    Cname = &#x27;æ•°æ®ç»“æ„&#x27;);</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ol><li>é¦–å…ˆé€šè¿‡å­æŸ¥è¯¢å¾—åˆ°è¯¾åä¸º â€œæ•°æ®ç»“æ„â€ çš„è¯¾ç¨‹çš„è¯¾å·</li><li><p>ç„¶åéå† <code>SC</code> ï¼ˆé€‰è¯¾ï¼‰è¡¨ä¸­çš„æ¯ä¸€æ¡é€‰è¯¾è®°å½•</p><ul><li>è‹¥å½“å‰è¿™æ¡è®°å½•çš„è¯¾å·ä¸º â€œæ•°æ®ç»“æ„â€ è¿™é—¨è¯¾çš„è¯¾å·ï¼Œåˆ™å°†è¿™æ¡è®°å½•çš„ Sno åˆ—çš„å€¼æ”¾åˆ°ç»“æœé›†é‡Œé¢å»ã€‚</li></ul></li><li>æœ€ç»ˆæˆ‘ä»¬å¯ä»¥å¾—åˆ°æ‰€æœ‰é€‰ä¿®äº† â€æ•°æ®ç»“æ„â€œ è¿™é—¨è¯¾çš„å­¦ç”Ÿçš„å­¦å·ã€‚</li></ol><hr><p>è¿™ç§ç±»å‹çš„æŸ¥è¯¢ï¼Œå«åšâ€ä¸ç›¸å…³å­æŸ¥è¯¢â€ï¼š</p><p><strong>è¿™ç§ç±»å‹çš„æŸ¥è¯¢æ˜¯å…ˆæ‰§è¡Œå­æŸ¥è¯¢ï¼Œå¾—åˆ°ä¸€ä¸ªé›†åˆï¼ˆæˆ–å€¼ï¼‰ï¼Œç„¶åå°†è¿™ä¸ªé›†åˆï¼ˆæˆ–å€¼ï¼‰ä½œä¸ºä¸€ä¸ªå¸¸é‡å¸¦å…¥åˆ°çˆ¶æŸ¥è¯¢çš„ WHERE å­å¥ä¸­å»ã€‚å¦‚æœå•çº¯åœ°æ‰§è¡Œå­æŸ¥è¯¢ï¼Œä¹Ÿæ˜¯å¯ä»¥æˆåŠŸçš„ã€‚</strong></p><h2 id="ç›¸å…³å­æŸ¥è¯¢"><a href="#ç›¸å…³å­æŸ¥è¯¢" class="headerlink" title="ç›¸å…³å­æŸ¥è¯¢"></a>ç›¸å…³å­æŸ¥è¯¢</h2><p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸ç›¸å…³å­æŸ¥è¯¢å·²ç»å¤Ÿç”¨äº†ï¼Œä½†æ˜¯å¦‚æœæœ‰è¿™æ ·çš„ä¸€ä¸ªæŸ¥è¯¢è¦æ±‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æŸ¥è¯¢æ¯ä¸ªå­¦ç”Ÿè¶…è¿‡è‡ªèº«é€‰ä¿®çš„æ‰€æœ‰è¯¾ç¨‹çš„å¹³å‡æˆç»©çš„è¯¾ç¨‹çš„è¯¾ç¨‹å·</span><br></pre></td></tr></table></figure><p>å­æŸ¥è¯¢æˆ‘ä»¬å¯ä»¥å…ˆæŸ¥è¯¢å‡º<strong>æ¯ä¸ªå­¦ç”Ÿè‡ªèº«é€‰ä¿®çš„æ‰€æœ‰è¯¾ç¨‹çš„å¹³å‡æˆç»©</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT AVG(Grade) FROM SC WHERE Sno = ?</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œ<code>WHERE</code>åé¢åº”è¯¥æ€ä¹ˆå†™ï¼Ÿä¹Ÿå°±<code>Sno=ï¼Ÿ</code>è¿™é‡Œé¢æ€ä¹ˆå¡«</p><p>å…³é”®é—®é¢˜å°±æ˜¯ï¼Œï¼Ÿ å¤„è¿™ä¸ªå¸¸é‡ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªç¡®å®šçš„å€¼ï¼Œè€Œ<strong>åº”è¯¥æ˜¯ä¸æ–­åœ°å°† <code>Student</code>è¡¨ä¸­çš„æ¯ä¸€æ¡è®°å½•ä¸­çš„ <code>Sno</code>åˆ—çš„å€¼ä»£å…¥æ­¤å¤„ï¼Œç„¶åæ±‚å‡ºè¯¥<code>Sno</code>å¯¹åº”çš„å¹³å‡æˆç»©ã€‚æˆ‘ä»¬éœ€è¦çš„æ˜¯è¾“å…¥ä¸€ç³»åˆ—çš„å€¼ï¼Œç„¶åå¾—åˆ°ä¸€ç³»åˆ—å¯¹åº”çš„è¾“å‡ºã€‚</strong></p><hr><p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±è¦ç”¨åˆ°å¦ä¸€ç§åµŒå¥—æŸ¥è¯¢ï¼Œå«åš â€œç›¸å…³å­æŸ¥è¯¢â€ã€‚<strong>â€œç›¸å…³å­æŸ¥è¯¢â€ çš„æ„æ€å°±æ˜¯ï¼Œå­æŸ¥è¯¢ä¸­éœ€è¦ç”¨åˆ°çˆ¶æŸ¥è¯¢ä¸­çš„å€¼ã€‚</strong></p><p>å¯¹äºè¿™ä¸ªæŸ¥è¯¢è¦æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹<code>SQL</code> è¯­å¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT Cno FROM SC X WHERE Grade &gt;=</span><br><span class="line">(SELECT AVG(Grade) FROM SC Y WHERE</span><br><span class="line">    Y.Sno = X.Sno);</span><br></pre></td></tr></table></figure><p>å…¶å·¥ä½œåŸç†å°±æ˜¯ï¼š</p><ol><li>å…ˆæ‰«æçˆ¶æŸ¥è¯¢ä¸­æ•°æ®æ¥æºï¼ˆå¦‚ <code>SC</code> è¡¨ï¼‰ä¸­çš„æ¯ä¸€æ¡è®°å½•</li><li>ç„¶åå°†å½“å‰è¿™æ¡è®°å½•ä¸­çš„ï¼Œåœ¨å­æŸ¥è¯¢ä¸­ä¼šç”¨åˆ°çš„å€¼ä»£å…¥åˆ°å­æŸ¥è¯¢ä¸­å»</li><li>æ¥ç€æ‰§è¡Œå­æŸ¥è¯¢å¹¶å¾—åˆ°ç»“æœï¼ˆå¯ä»¥çœ‹æˆæ˜¯è¿”å›å€¼ï¼‰</li><li>ç„¶åå†å°†è¿™ä¸ªç»“æœä»£å…¥åˆ°çˆ¶æŸ¥è¯¢çš„æ¡ä»¶ä¸­ï¼Œåˆ¤æ–­çˆ¶æŸ¥è¯¢çš„æ¡ä»¶è¡¨è¾¾å¼çš„å€¼æ˜¯å¦ä¸º <code>True</code><ul><li>è‹¥ä¸º <code>True</code>ï¼Œåˆ™å°†å½“å‰ <code>SC</code> è¡¨ä¸­çš„è¿™æ¡è®°å½•ï¼ˆç»è¿‡ <code>SELECT</code> å¤„ç†ï¼‰åæ”¾åˆ°ç»“æœé›†ä¸­å»</li><li>è‹¥ä¸º <code>False</code> åˆ™ä¸æ”¾</li></ul></li></ol><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š</p><ol><li><p>çˆ¶æŸ¥è¯¢å…ˆä» SC è¡¨ä¸­å–å‡ºç¬¬ä¸€æ¡è®°å½•ï¼ˆå¦‚ 95001ï¼‰</p></li><li><p>ç„¶åå°†å½“å‰è¿™æ¡è®°å½•çš„ Sno åˆ—çš„å€¼ï¼ˆ95001ï¼‰ä»£å…¥åˆ°å­æŸ¥è¯¢ä¸­ï¼Œæ±‚å‡ºå­¦å·ä¸º 95001 çš„å­¦ç”Ÿé€‰ä¿®çš„æ‰€æœ‰è¯¾ç¨‹çš„å¹³å‡åˆ†ï¼ˆå¦‚ 80 åˆ†ï¼‰</p></li><li><p>ç„¶åå°†è¿™ä¸ª 80 ä½œä¸º <code>Grade &gt;=</code> åé¢çš„å€¼ä»£å…¥</p><ul><li>è‹¥ <code>SC</code> è¡¨ä¸­çš„ç¬¬ä¸€æ¡è®°å½•çš„<code>Grade</code>åˆ—çš„å€¼ä¸º 90ï¼Œé‚£ä¹ˆ <code>Grade &gt;= 80</code>è¿™ä¸ªæ¡ä»¶è¡¨è¾¾å¼çš„å€¼ä¸º Trueï¼Œåˆ™å°†å½“å‰è¿™æ¡è®°å½•ä¸­çš„ <code>Cno</code>åˆ—çš„å€¼ï¼ˆå¦‚1ï¼‰æ”¾å…¥ç»“æœé›†ä¸­å»ã€‚</li></ul></li><li><p>ä»¥æ­¤ç±»æ¨ï¼Œéå† <code>SC</code>è¡¨ä¸­çš„æ‰€æœ‰è®°å½•ï¼Œå³å¯å¾—åˆ°æ¯ä¸ªè¶…è¿‡å­¦ç”Ÿè¶…è¿‡ä»–/å¥¹æ‰€æœ‰è¯¾ç¨‹å¹³å‡åˆ†çš„è¯¾ç¨‹çš„è¯¾å·äº†ã€‚</p></li></ol><p><strong>åˆ¤æ–­æ˜¯å¦æ˜¯ â€œç›¸å…³å­æŸ¥è¯¢â€ ä¹Ÿå¾ˆç®€å•ï¼Œåªè¦å­æŸ¥è¯¢ä¸èƒ½è„±ç¦»çˆ¶æŸ¥è¯¢å•ç‹¬æ‰§è¡Œï¼Œé‚£ä¹ˆå°±æ˜¯ â€œç›¸å…³å­æŸ¥è¯¢â€ã€‚</strong></p><h1 id="EXISTSå…³é”®å­—çš„ä½œç”¨"><a href="#EXISTSå…³é”®å­—çš„ä½œç”¨" class="headerlink" title="EXISTSå…³é”®å­—çš„ä½œç”¨"></a><code>EXISTS</code>å…³é”®å­—çš„ä½œç”¨</h1><p>å®ƒçš„ä½œç”¨ï¼Œå°±æ˜¯åˆ¤æ–­å­æŸ¥è¯¢å¾—åˆ°çš„ç»“æœé›†æ˜¯å¦æ˜¯ä¸€ä¸ªç©ºé›†ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™è¿”å› <code>True</code>ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› <code>False</code>ã€‚EXISTS æœ¬èº«å°±æ˜¯ â€œå­˜åœ¨â€ çš„æ„æ€ï¼Œç”¨æˆ‘ä»¬å¯ä»¥ç†è§£çš„è¯æ¥è¯´ï¼Œ<strong>å°±æ˜¯å¦‚æœåœ¨å½“å‰çš„è¡¨ä¸­å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„è¿™æ ·ä¸€æ¡è®°å½•ï¼Œé‚£ä¹ˆè¿”å›<code>True</code>ï¼Œå¦åˆ™è¿”å› <code>False</code>ã€‚</strong></p><p>æœ‰ä¸€æ¡è¯­å¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT Sname FROM Student WHERE EXISTS(</span><br><span class="line">SELECT * FROM SC WHERE</span><br><span class="line">    SC.Sno=Student.Sno AND Cno=&#x27;1&#x27;);</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªæŸ¥è¯¢ä¸­ï¼š</p><ol><li>é¦–å…ˆä¼šå–å‡º <code>Student</code>è¡¨ä¸­çš„ç¬¬ä¸€æ¡è®°å½•ï¼Œå¾—åˆ°å…¶ Sno åˆ—ï¼ˆå› ä¸ºåœ¨å­æŸ¥è¯¢ä¸­ç”¨åˆ°äº†ï¼‰çš„å€¼ï¼ˆå¦‚ 95001ï¼‰</li><li>ç„¶åå°†è¯¥å€¼ä»£å…¥åˆ°å­æŸ¥è¯¢ä¸­ã€‚è‹¥èƒ½æ‰¾åˆ°è¿™æ ·çš„ä¸€æ¡è®°å½•ï¼Œé‚£ä¹ˆè¯´æ˜å­¦å·ä¸º 95001 çš„å­¦ç”Ÿé€‰ä¿®äº† 1 å·è¯¾ç¨‹ã€‚<ul><li>å› ä¸ºèƒ½æ‰¾åˆ°è¿™æ ·çš„ä¸€æ¡è®°å½•ï¼Œæ‰€ä»¥å­æŸ¥è¯¢çš„ç»“æœä¸ä¸ºç©ºé›†ï¼Œé‚£ä¹ˆ <code>EXISTS</code>ä¼šè¿”å› <code>True</code>ï¼Œä»è€Œä½¿ <code>Student</code>è¡¨ä¸­çš„ç¬¬ä¸€æ¡è®°å½•ä¸­çš„ <code>Sname</code>åˆ—çš„å€¼è¢«æ”¾å…¥ç»“æœé›†ä¸­å»ã€‚</li><li>ä»¥æ­¤ç±»æ¨ï¼Œéå† <code>Student</code>è¡¨ä¸­çš„æ‰€æœ‰è®°å½•åï¼Œå°±èƒ½å¾—åˆ°æ‰€æœ‰é€‰ä¿®äº† 1 å·è¯¾ç¨‹çš„å­¦ç”Ÿçš„å§“åã€‚</li></ul></li></ol><h1 id="NOT-EXISTSå…³é”®å­—"><a href="#NOT-EXISTSå…³é”®å­—" class="headerlink" title="NOT EXISTSå…³é”®å­—"></a><code>NOT EXISTS</code>å…³é”®å­—</h1><p>ä¸<code>EXISTS</code>å…³é”®å­—ç›¸å¯¹çš„æ˜¯<code>NOT EXISTS</code>ï¼Œä½œç”¨ä¸ <code>EXISTS</code>æ­£ç›¸åï¼Œ<strong>å½“å­æŸ¥è¯¢çš„ç»“æœä¸ºç©ºé›†æ—¶ï¼Œè¿”å› <code>True</code>ï¼Œåä¹‹è¿”å› <code>False</code>ã€‚ä¹Ÿå°±æ˜¯æ‰€è°“çš„ â€è‹¥ä¸å­˜åœ¨â€œã€‚</strong></p><p>å¯¹äºä¸‹é¢çš„æŸ¥è¯¢è¦æ±‚ï¼Œåªèƒ½é€šè¿‡<code>NOT EXISTS</code>å…³é”®å­—æ¥å®ç°ï¼Œå› ä¸º <code>SQL</code> ä¸­å¹¶æœªç›´æ¥æä¾›å…³ç³»ä»£æ•°ä¸­çš„é™¤æ³•åŠŸèƒ½ã€‚</p><ul><li>æŸ¥è¯¢é€‰ä¿®äº†å…¨éƒ¨è¯¾ç¨‹çš„å­¦ç”Ÿçš„å§“å</li></ul><p>å¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤çš„æ€è·¯æ¥å®ç°ï¼š</p><ol><li>å…ˆå– <code>Student</code> è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç»„ï¼Œå¾—åˆ°å…¶ <code>Sno</code> åˆ—çš„å€¼ã€‚ä¹Ÿå°±æ˜¯è·å–åˆ°å­¦ç”Ÿå¯¹åº”çš„å­¦å·</li><li>å†å–<code>Course</code>è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç»„ï¼Œå¾—åˆ°å…¶<code>Cno</code> åˆ—çš„å€¼ã€‚ä¹Ÿå°±æ˜¯è·å–åˆ°è¯¾ç¨‹å¯¹åº”çš„è¯¾ç¨‹å·</li><li><p>æ ¹æ® <code>Sno</code> ä¸ <code>Cno</code> çš„å€¼ï¼Œéå† <code>SC</code> è¡¨ä¸­çš„æ‰€æœ‰è®°å½•ï¼ˆä¹Ÿå°±æ˜¯é€‰è¯¾è®°å½•ï¼‰ã€‚è‹¥å¯¹äºæŸä¸ª <code>Sno</code>å’Œ <code>Cno</code>çš„å€¼æ¥è¯´ï¼Œ<strong>åœ¨ <code>SC</code> è¡¨ä¸­æ‰¾ä¸åˆ°ç›¸åº”çš„è®°å½•ï¼Œåˆ™è¯´æ˜è¯¥ <code>Sno</code> å¯¹åº”çš„å­¦ç”Ÿæ²¡æœ‰é€‰ä¿®è¯¥ <code>Cno</code> å¯¹åº”çš„è¯¾ç¨‹ã€‚</strong></p></li><li><p>å¯¹äºæŸä¸ªå­¦ç”Ÿæ¥è¯´ï¼Œè‹¥åœ¨éå† <code>Course</code>è¡¨ä¸­æ‰€æœ‰è®°å½•ï¼ˆä¹Ÿå°±æ˜¯æ‰€æœ‰è¯¾ç¨‹ï¼‰åï¼Œ<strong>ä»æ‰¾ä¸åˆ°ä»»ä½•ä¸€é—¨ä»–/å¥¹æ²¡æœ‰é€‰ä¿®çš„è¯¾ç¨‹ï¼Œå°±è¯´æ˜æ­¤å­¦ç”Ÿé€‰ä¿®äº†å…¨éƒ¨çš„è¯¾ç¨‹ã€‚</strong></p></li><li>å°†æ­¤å­¦ç”Ÿæ”¾å…¥ç»“æœå…ƒç»„é›†åˆä¸­</li><li>å›åˆ°ç¬¬ä¸€æ­¥ï¼Œå–<code>Student</code>ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç»„</li><li>å°†æ‰€æœ‰ç»“æœå…ƒç»„é›†åˆæ˜¾ç¤º</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT Sname FROM Student WHERE NOT EXISTS</span><br><span class="line">(SELECT * FROM Course WHERE NOT EXISTS</span><br><span class="line">    (SELECT * FROM SC WHERE</span><br><span class="line">    Sno=Student.Sno AND Cno=Course.Cno));</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ç¬¬ä¸€ä¸ª <code>NOT EXISTS</code>å¯¹ç¬¬å››æ­¥ï¼Œç¬¬äºŒä¸ª <code>NOT EXISTS</code>å¯¹åº”ç¬¬ä¸‰æ­¥ã€‚</p><hr><p>åŒç†ï¼Œå¯¹äºç±»ä¼¼çš„æŸ¥è¯¢è¦æ±‚</p><ul><li>æŸ¥è¯¢è¢«æ‰€æœ‰å­¦ç”Ÿé€‰ä¿®çš„è¯¾ç¨‹çš„è¯¾å</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT Cname FROM Course WHERE NOT EXISTS</span><br><span class="line">(SELECT * FROM Stuent WHERE NOT EXISTS</span><br><span class="line">    (SELECT * FROM SC WHERE</span><br><span class="line">        Sno=Student.Sno AND Cno=Course.Cno));</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢é€‰ä¿®äº†95001å·å­¦ç”Ÿé€‰ä¿®çš„å…¨éƒ¨è¯¾ç¨‹çš„å­¦ç”Ÿçš„å­¦å·</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT DISTINCT Sno FROM SC X WHERE NOT EXISTS</span><br><span class="line">(SELECT * FROM SC Y WHERE Y.Sno=&#x27;95001&#x27; AND NOT EXISTS</span><br><span class="line">    (SELECT * FROM SC Z WHERE </span><br><span class="line">        Z.Sno=X.Sno AND Z.Cno=Y.Cno));</span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š</p><p><a href="https://zhuanlan.zhihu.com/p/20005249">SQL ä¸­çš„ EXISTS åˆ°åº•åšäº†ä»€ä¹ˆï¼Ÿ - çŸ¥ä¹</a></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> EXISTS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè™šæ‹Ÿæœºç¬”è®°-å­—èŠ‚ç æ–‡ä»¶ä¸­çš„å¸¸é‡æ± </title>
      <link href="/2019/06/26/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E5%B8%B8%E9%87%8F%E6%B1%A0/"/>
      <url>/2019/06/26/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E5%B8%B8%E9%87%8F%E6%B1%A0/</url>
      
        <content type="html"><![CDATA[<p>å¸¸é‡æ± ï¼ˆConstant Poolï¼‰</p><span id="more"></span><h1 id="å¸¸é‡æ± ï¼ˆConstant-Poolï¼‰"><a href="#å¸¸é‡æ± ï¼ˆConstant-Poolï¼‰" class="headerlink" title="å¸¸é‡æ± ï¼ˆConstant Poolï¼‰"></a>å¸¸é‡æ± ï¼ˆConstant Poolï¼‰</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> indi.greenhat.bytecode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test1</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> a = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getA</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setA</span><span class="params">(<span class="keyword">int</span> a)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.a = a;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2019/06/26/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E5%B8%B8%E9%87%8F%E6%B1%A0/1.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Constant pool:</span><br><span class="line">   #<span class="number">1</span> = Methodref          #<span class="number">4.</span>#<span class="number">20</span>         <span class="comment">// java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">   #<span class="number">2</span> = Fieldref           #<span class="number">3.</span>#<span class="number">21</span>         <span class="comment">// indi/greenhat/bytecode/Test1.a:I</span></span><br><span class="line">   #<span class="number">3</span> = Class              #<span class="number">22</span>            <span class="comment">// indi/greenhat/bytecode/Test1</span></span><br><span class="line">   #<span class="number">4</span> = Class              #<span class="number">23</span>            <span class="comment">// java/lang/Object</span></span><br><span class="line">   #<span class="number">5</span> = Utf8               a</span><br><span class="line">   #<span class="number">6</span> = Utf8               I</span><br><span class="line">   #<span class="number">7</span> = Utf8               &lt;init&gt;</span><br><span class="line">   #<span class="number">8</span> = Utf8               ()V</span><br><span class="line">   #<span class="number">9</span> = Utf8               Code</span><br><span class="line">  #<span class="number">10</span> = Utf8               LineNumberTable</span><br><span class="line">  #<span class="number">11</span> = Utf8               LocalVariableTable</span><br><span class="line">  #<span class="number">12</span> = Utf8               <span class="keyword">this</span></span><br><span class="line">  #<span class="number">13</span> = Utf8               Lindi/greenhat/bytecode/Test1;</span><br><span class="line">  #<span class="number">14</span> = Utf8               getA</span><br><span class="line">  #<span class="number">15</span> = Utf8               ()I</span><br><span class="line">  #<span class="number">16</span> = Utf8               setA</span><br><span class="line">  #<span class="number">17</span> = Utf8               (I)V</span><br><span class="line">  #<span class="number">18</span> = Utf8               SourceFile</span><br><span class="line">  #<span class="number">19</span> = Utf8               Test1.java</span><br><span class="line">  #<span class="number">20</span> = NameAndType        #<span class="number">7</span>:#<span class="number">8</span>          <span class="comment">// &quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">  #<span class="number">21</span> = NameAndType        #<span class="number">5</span>:#<span class="number">6</span>          <span class="comment">// a:I</span></span><br><span class="line">  #<span class="number">22</span> = Utf8               indi/greenhat/bytecode/Test1</span><br><span class="line">  #<span class="number">23</span> = Utf8               java/lang/Object</span><br></pre></td></tr></table></figure><p>ç´§æ¥ç€ä¸»æ¬¡ç‰ˆæœ¬å·ä¹‹åçš„æ˜¯å¸¸é‡æ± å…¥å£</p><p>å¸¸é‡æ± å¯ä»¥ç†è§£ä¸º<strong>Classæ–‡ä»¶ä¹‹ä¸­çš„èµ„æºä»“åº“</strong>ï¼Œå®ƒæ˜¯Classæ–‡ä»¶ç»“æ„ä¸­ä¸å…¶ä»–é¡¹ç›®å…³è”æœ€å¤šçš„æ•°æ®ç±»å‹ï¼Œä¹Ÿæ˜¯å ç”¨Classæ–‡ä»¶ç©ºé—´æœ€å¤§çš„æ•°æ®é¡¹ç›®ä¹‹ä¸€ï¼ŒåŒæ—¶å®ƒè¿˜æ˜¯åœ¨Classæ–‡ä»¶ä¸­ç¬¬ä¸€ä¸ªå‡ºç°çš„è¡¨ç±»å‹æ•°æ®é¡¹ç›®ã€‚</p><p><strong>å¸¸é‡æ± ä¸­ä¸»è¦å­˜æ”¾ä¸¤å¤§ç±»å¸¸é‡ï¼šå­—é¢é‡ï¼ˆ<code>Literal</code>ï¼‰å’Œç¬¦å·å¼•ç”¨ï¼ˆ<code>Symbolic References</code>ï¼‰ã€‚</strong></p><ul><li>å­—é¢é‡æ¯”è¾ƒæ¥è¿‘äºJavaè¯­è¨€å±‚é¢çš„å¸¸é‡æ¦‚å¿µï¼Œå¦‚æ–‡æœ¬å­—ç¬¦ä¸²ã€å£°æ˜ä¸ºfinalçš„å¸¸é‡å€¼ç­‰ã€‚</li><li>è€Œç¬¦å·å¼•ç”¨åˆ™å±äºç¼–è¯‘åŸç†æ–¹é¢çš„æ¦‚å¿µï¼ŒåŒ…æ‹¬äº†ä¸‹é¢ä¸‰ç±»å¸¸é‡ï¼š<ul><li>ç±»å’Œæ¥å£çš„å…¨é™å®šåï¼ˆ<code>Fully Qualified Name</code>ï¼‰ </li><li>å­—æ®µçš„åç§°å’Œæè¿°ç¬¦ï¼ˆ<code>Descriptor</code>ï¼‰ </li><li>æ–¹æ³•çš„åç§°å’Œæè¿°ç¬¦</li></ul></li></ul><p><em>Javaä»£ç åœ¨è¿›è¡Œ<code>Javac</code>ç¼–è¯‘çš„æ—¶å€™ï¼Œå¹¶ä¸åƒCå’ŒC++é‚£æ ·æœ‰â€œè¿æ¥â€è¿™ä¸€æ­¥éª¤ï¼Œè€Œæ˜¯åœ¨è™šæ‹ŸæœºåŠ è½½Classæ–‡ä»¶çš„æ—¶å€™è¿›è¡ŒåŠ¨æ€è¿æ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>åœ¨Classæ–‡ä»¶ä¸­ä¸ä¼šä¿å­˜å„ä¸ªæ–¹æ³•ã€å­—æ®µçš„æœ€ç»ˆå†…å­˜å¸ƒå±€ä¿¡æ¯</strong>ï¼Œå› æ­¤è¿™äº›å­—æ®µã€æ–¹æ³•çš„ç¬¦å·å¼•ç”¨ä¸ç»è¿‡è¿è¡ŒæœŸè½¬æ¢çš„è¯æ— æ³•å¾—åˆ°çœŸæ­£çš„å†…å­˜å…¥å£åœ°å€ï¼Œä¹Ÿå°±æ— æ³•ç›´æ¥è¢«è™šæ‹Ÿæœºä½¿ç”¨ã€‚å½“è™šæ‹Ÿæœºè¿è¡Œæ—¶ï¼Œéœ€è¦ä»å¸¸é‡æ± è·å¾—å¯¹åº”çš„ç¬¦å·å¼•ç”¨ï¼Œå†åœ¨ç±»åˆ›å»ºæ—¶æˆ–è¿è¡Œæ—¶è§£æã€ç¿»è¯‘åˆ°å…·ä½“çš„å†…å­˜åœ°å€ä¹‹ä¸­ã€‚</em></p><hr><p>å¸¸é‡æ± çš„æ€»ä½“ç»“æ„ï¼š<strong>Javaç±»æ‰€å¯¹åº”çš„å¸¸é‡æ± ä¸»è¦ç”±å¸¸é‡æ± æ•°é‡ä¸å¸¸é‡æ± æ•°ç»„è¿™ä¸¤éƒ¨åˆ†å…±åŒç»„æˆ</strong>ã€‚<strong>å¸¸é‡æ± æ•°é‡ç´§è·Ÿåœ¨ä¸»ç‰ˆæœ¬å·åé¢</strong>ï¼Œå æ®2ä¸ªå­—èŠ‚ï¼ˆ<code>u2</code>ç±»å‹æ•°æ®ï¼‰ï¼›<strong>å¸¸é‡æ± æ•°ç»„åˆ™ç´§è·Ÿåœ¨å¸¸é‡æ± æ•°é‡ä¹‹å</strong>ã€‚å¸¸é‡æ± æ•°ç»„ä¸ä¸€èˆ¬æ•°ç»„ä¸åŒçš„æ˜¯ï¼Œ<strong>å¸¸é‡æ± æ•°ç»„ä¸­ä¸åŒçš„å…ƒç´ çš„ç±»å‹ã€ç»“æ„éƒ½æ˜¯æ˜¯ä¸åŒçš„ï¼Œé•¿åº¦å½“ç„¶ä¹Ÿå°±ä¸åŒ</strong>ï¼›ä½†æ˜¯ï¼Œ<strong>æ¯ä¸€ç§å…ƒç´ çš„ç¬¬ä¸€ä¸ªæ•°æ®éƒ½æ˜¯ä¸€ä¸ª<code>u1</code>ç±»å‹</strong>ï¼Œè¯¥å­—èŠ‚æ˜¯ä¸ªæ ‡å¿—ä½ï¼Œå æ®1ä¸ªå­—èŠ‚ï¼ŒJVMåœ¨è§£æå¸¸é‡æ± æ—¶ï¼Œä¼šæ ¹æ®è¿™ä¸ª<code>u1</code>ç±»å‹æ¥è·å–å…ƒç´ çš„å…·ä½“ç±»å‹ã€‚</p><hr><p>ç”±ä¸Šé¢çš„16è¿›åˆ¶å›¾å¯ä»¥çœ‹åˆ°ï¼Œå¸¸é‡æ± æ•°é‡ä¸º<code>0x18</code>ï¼Œå³24ä¸ªå¸¸é‡ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åç¼–è¯‘çš„ç»“æœï¼š<code>#1ï½#23</code></p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ<code>å¸¸é‡æ± æ•°ç»„ä¸­çš„å…ƒç´ ä¸ªæ•°=å¸¸é‡æ± æ•°-1ï¼ˆå…¶ä¸­0æš‚æ—¶ä¸ä½¿ç”¨ï¼‰</code>ï¼Œç›®çš„æ˜¯æ»¡è¶³æŸäº›å¸¸é‡æ± ç´¢å¼•å€¼çš„æ•°æ®åœ¨ç‰¹å®šæƒ…å†µä¸‹éœ€è¦è¡¨è¾¾<code>ä¸å¼•ç”¨ä»»ä½•ä¸€ä¸ªå¸¸é‡æ± </code>çš„å«ä¹‰ï¼›æ ¹æœ¬åŸå› åœ¨äºï¼Œç´¢å¼•ä¸º0ä¹Ÿæ˜¯ä¸€ä¸ªå¸¸é‡ï¼ˆä¿ç•™å¸¸é‡ï¼‰ï¼Œåªä¸è¿‡å®ƒä¸ä½äºå¸¸é‡è¡¨ä¸­ï¼Œè¿™ä¸ªå¸¸é‡å°±å¯¹åº”<code>null</code>å€¼ï¼›æ‰€ä»¥ï¼Œå¸¸é‡æ± çš„ç´¢å¼•ä»1å¼€å§‹è€Œé0å¼€å§‹ã€‚</p><h1 id="å¸¸é‡æ± ä¸­æ•°æ®ç±»å‹ç»“æ„"><a href="#å¸¸é‡æ± ä¸­æ•°æ®ç±»å‹ç»“æ„" class="headerlink" title="å¸¸é‡æ± ä¸­æ•°æ®ç±»å‹ç»“æ„"></a>å¸¸é‡æ± ä¸­æ•°æ®ç±»å‹ç»“æ„</h1><p>å¸¸é‡æ± ä¸­çš„æ¯ä¸€é¡¹å¸¸é‡éƒ½æ˜¯ä¸€ä¸ªè¡¨ï¼Œåœ¨ JDK 7 ä¹‹å‰å…±æœ‰ 11 ç§ç»“æ„ä¸åŒçš„è¡¨ï¼Œåœ¨ JDK 7 ä¸­ä¸ºäº†æ›´å¥½çš„æ”¯æŒåŠ¨æ€è¯­è¨€è°ƒç”¨ï¼Œåˆå¢åŠ äº†3ç§ã€‚éƒ½æ˜¯<code>CONSTANT</code>å¼€å¤´ï¼Œ<code>info</code>ç»“å°¾</p><p><img src="/2019/06/26/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E5%B8%B8%E9%87%8F%E6%B1%A0/4.png" alt></p><p>å…¶ä¸­ <code>CONSTANT_Utf8_info</code> ç±»å‹çš„å¸¸é‡ï¼Œå®ƒçš„ <code>length</code> å€¼è¯´æ˜äº†è¿™ä¸ª UTF-8 ç¼–ç çš„å­—ç¬¦ä¸²é•¿åº¦æ˜¯å¤šå°‘å­—èŠ‚ï¼Œ<code>bytes</code> çš„å€¼ä¸ºé•¿åº¦ä¸º <code>length</code> å­—èŠ‚çš„ UTF-8 ç¼©ç•¥ç¼–ç è¡¨ç¤ºçš„å­—ç¬¦ä¸²</p><p><em>ç”±äº Class æ–‡ä»¶ä¸­æ–¹æ³•ã€å­—æ®µç­‰éƒ½éœ€è¦å¼•ç”¨ <code>CONSTANT_Utf8_info</code> å‹å¸¸é‡æ¥æè¿°åç§°ï¼Œæ‰€ä»¥ <code>CONSTANT_Utf8_info</code> å‹å¸¸é‡çš„æœ€å¤§é•¿åº¦ä¹Ÿå°±æ˜¯ Java ä¸­æ–¹æ³•ã€å­—æ®µåçš„æœ€å¤§é•¿åº¦ï¼Œå³ <code>u2</code> çš„ 65535ï¼Œä¹Ÿå°±æ˜¯è¯´æœ€å¤§ 65535 å­—èŠ‚ï¼Œå³ 64KBã€‚</em></p><h1 id="åˆ†æå¸¸é‡æ± ä¸­çš„æ•°å€¼"><a href="#åˆ†æå¸¸é‡æ± ä¸­çš„æ•°å€¼" class="headerlink" title="åˆ†æå¸¸é‡æ± ä¸­çš„æ•°å€¼"></a>åˆ†æå¸¸é‡æ± ä¸­çš„æ•°å€¼</h1><p>ä»<code>0a</code>å¼€å§‹ï¼Œ<code>0x0a</code>çš„åè¿›åˆ¶ä¸º10ï¼Œå› ä¸ºæ¯ä¸€ä¸ªå…ƒç´ çš„ç¬¬ä¸€ä¸ªæ•°æ®éƒ½æ˜¯ä¸€ä¸ªæ ‡å¿—ä½ï¼ŒæŸ¥<code>æ•°æ®ç±»å‹ç»“æ„</code>è¡¨å¾—u1ä¸º10çš„å¸¸é‡ï¼š</p><p><img src="/2019/06/26/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E5%B8%B8%E9%87%8F%E6%B1%A0/2.png" alt></p><p>å‘ç°å…¶åé¢ä¸¤ä¸ªå€¼éƒ½æ˜¯ç´¢å¼•å€¼ï¼Œå…¶å¯¹åº”çš„åå…­è¿›åˆ¶ä¸º<code>00 04 00 14</code>ï¼Œè½¬æ¢ä¸ºåè¿›åˆ¶åˆ†åˆ«æ˜¯4å’Œ20ï¼Œé‚£ä¹ˆ4å’Œ20åˆ†åˆ«æ˜¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#<span class="number">4</span> = Class              #<span class="number">23</span>            <span class="comment">// java/lang/Object</span></span><br><span class="line">#<span class="number">20</span> = NameAndType        #<span class="number">7</span>:#<span class="number">8</span>          <span class="comment">// &quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">#<span class="number">23</span> = Utf8               java/lang/Object</span><br><span class="line">#<span class="number">7</span> = Utf8               &lt;init&gt;</span><br><span class="line">#<span class="number">8</span> = Utf8               ()V</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ç¬¬ä¸€ä¸ªå…ƒç´ <code>0a 00 04 00 14</code>ä»£è¡¨çš„æ˜¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#1 = Methodref          #4.#20         // java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆ<code>&lt;init&gt;</code>å’Œ<code>:()v</code>ä»£è¡¨ä»€ä¹ˆå‘¢ï¼Ÿ</p><hr><p>åœ¨JVMè§„èŒƒä¸­ï¼Œæ¯ä¸ªå˜é‡/å­—æ®µéƒ½æœ‰æè¿°ä¿¡æ¯ï¼Œæè¿°ä¿¡æ¯ä¸»è¦çš„ä½œç”¨æ˜¯æè¿°å­—æ®µçš„æ•°æ®ç±»å‹ã€æ–¹æ³•çš„å‚æ•°åˆ—è¡¨ï¼ˆåŒ…æ‹¬æ•°é‡ã€ç±»å‹ä¸é¡ºåºï¼‰ä¸è¿”å›å€¼ã€‚æ ¹æ®æè¿°ç¬¦è§„åˆ™ï¼Œ<strong>åŸºæœ¬æ•°æ®ç±»å‹å’Œä»£è¡¨æ— è¿”å›å€¼çš„voidç±»å‹éƒ½ç”¨ä¸€ä¸ªå¤§å†™å­—ç¬¦æ¥è¡¨ç¤ºï¼Œå¯¹è±¡ç±»å‹åˆ™ä½¿ç”¨å­—ç¬¦å·¥åŠ å¯¹è±¡çš„å…¨é™å®šåç§°æ¥è¡¨ç¤º</strong>ã€‚ä¸ºäº†å‹ç¼©å­—èŠ‚ç æ–‡ä»¶çš„ä½“ç§¯ï¼Œå¯¹äºåŸºæœ¬æ•°æ®ç±»å‹ï¼ŒJVMéƒ½åªä½¿ç”¨ä¸€ä¸ªå¤§å†™å­—æ¯æ¥è¡¨ç¤ºï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><code>B-byteï¼ŒC-charï¼ŒD-doubleï¼ŒF-floatï¼ŒI-intï¼ŒJ-longï¼ŒS-shortï¼ŒZ-booleanï¼ŒV-voidï¼ŒL-å¯¹è±¡ç±»å‹</code>ï¼Œå¦‚<code>Ljava/lang/String</code></p><p>å¯¹äºæ•°ç»„ç±»å‹æ¥è¯´ï¼Œæ¯ä¸€ä¸ªç»´åº¦ä½¿ç”¨ä¸€ä¸ªå‰ç½®çš„<code>[</code>æ¥è¡¨ç¤ºï¼Œå¦‚<code>int[]</code>è¢«è®°å½•ä¸º<code>[I</code>ï¼Œ<code>String[][]</code>è¢«è®°å½•ä¸º<code>[[Ljava/lang/string</code></p><p>ç”¨æè¿°ç¬¦æè¿°æ–¹æ³•æ—¶ï¼ŒæŒ‰ç…§å…ˆå‚æ•°åˆ—è¡¨ï¼Œåè¿”å›å€¼çš„é¡ºåºæ¥æè¿°ã€‚å‚æ•°åˆ—è¡¨æŒ‰ç…§å‚æ•°çš„ä¸¥æ ¼é¡ºåºæ”¾åœ¨ä¸€ç»„<code>()</code>ä¹‹å†…ï¼Œå¦‚æ–¹æ³•ï¼š<code>String name(int idï¼ŒString name)</code>çš„æè¿°ç¬¦ä¸ºï¼š<code>(I,Ljava/lang/String)Ljava/lang/String</code></p><hr><p>å›å½’æ­£é¢˜ï¼Œ<code>&lt;init&gt;</code>è¡¨ç¤ºç±»çš„æ„é€ æ–¹æ³•ï¼Œ<code>()v</code>ï¼šæ‹¬å·é‡Œé¢å†…å®¹ä¸ºç©ºï¼Œåˆ™ä»£è¡¨è¯¥æ–¹æ³•æ²¡æœ‰å‚æ•°ï¼Œvåˆ™ä»£è¡¨æ˜¯<code>void</code>ç±»å‹ï¼Œé‚£ä¹ˆè¿èµ·æ¥å°±æ˜¯ä»£è¡¨æ²¡æœ‰å‚æ•°è¿”å›å€¼ä¸º<code>void</code>çš„æ„é€ å‡½æ•°ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰å®šä¹‰è¿™ä¸ªæ„é€ æ–¹æ³•ï¼Œæ‰€ä»¥è¿™ä¸ªæ„é€ æ–¹æ³•æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œå…¶çˆ¶ç±»æ˜¯<code>object</code>ç±»</p><hr><p>æ¥ç€ï¼Œ<code>0x09</code>çš„åè¿›åˆ¶ä¸º9ï¼Œä¹Ÿåˆšå¥½æœ‰ä¸¤ä¸ªç´¢å¼•å€¼ï¼š<code>00 03 00 15</code>ï¼Œè½¬æ¢ä¸ºåè¿›åˆ¶åˆ†åˆ«æ˜¯<code>3å’Œ21</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#<span class="number">2</span> = Fieldref           #<span class="number">3.</span>#<span class="number">21</span>         <span class="comment">// indi/greenhat/bytecode/Test1.a:I</span></span><br><span class="line">#<span class="number">3</span>= Class              #<span class="number">22</span>            <span class="comment">// indi/greenhat/bytecode/Test1</span></span><br><span class="line">#<span class="number">22</span> = Utf8               indi/greenhat/bytecode/Test1    </span><br></pre></td></tr></table></figure><p>æ­£å¥½å¯¹åº”çš„æ˜¯æ ·ä¾‹ç±»ï¼Œ<code>aï¼šI</code>è¯´æ˜æœ‰ä¸ªå±æ€§ä¸ºaï¼Œç±»å‹æ˜¯<code>int</code></p><hr><p>å¯¹åº”ä¸€äº›å­—ç¬¦ä¸²çš„å¸¸é‡å¯ä»¥å°†å…¶è½¬æ¢ä¸ºasciiç æŸ¥çœ‹å…¶å€¼ï¼Œæ¯”å¦‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#<span class="number">10</span> = Utf8               LineNumberTable</span><br></pre></td></tr></table></figure><p>å…¶å¯¹åº”çš„åå…­è¿›åˆ¶ä¸º</p><p><code>0f 4c 69 6e 65 4e 75 6d 62 65 72</code></p><p><img src="/2019/06/26/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E5%B8%B8%E9%87%8F%E6%B1%A0/3.png" alt></p><p>ä½¿ç”¨çš„å·¥å…·ï¼š<a href="http://www.ab126.com/goju/1711.html">ASCII åœ¨çº¿è½¬æ¢å™¨-ASCIIç -åå…­è¿›åˆ¶-äºŒè¿›åˆ¶-åè¿›åˆ¶-å­—ç¬¦ä¸²-asciiæŸ¥è¯¢å™¨-æ‡’äººè®¡ç®—å™¨</a></p><hr><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#<span class="number">20</span> = NameAndType        #<span class="number">7</span>:#<span class="number">8</span>          <span class="comment">// &quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">#<span class="number">21</span> = NameAndType        #<span class="number">5</span>:#<span class="number">6</span>          <span class="comment">// a:I</span></span><br></pre></td></tr></table></figure><p><code>CONSTANT_NameAndType_info</code>ç¡®å®šå”¯ä¸€çš„æˆå‘˜å˜é‡ï¼Œæ¯”å¦‚ä¸Šé¢çš„#20è¡¨æ˜æ˜¯æ— å‚çš„æ„é€ æ–¹æ³•ï¼Œ<code>a:I</code>ä»£è¡¨æ˜¯<code>int a</code></p><p>å‚è€ƒï¼š</p><p>ã€Šæ·±å…¥ç†è§£javaè™šæ‹Ÿæœºï¼ˆç¬¬äºŒç‰ˆ å‘¨å¿—æ˜ï¼‰ã€‹</p><p><a href="https://blog.nekolr.com/2018/04/18/%E7%B1%BB%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84/">ç±»æ–‡ä»¶ç»“æ„ | nekolrâ€™s blog</a></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jvm </tag>
            
            <tag> å­—èŠ‚ç  </tag>
            
            <tag> å¸¸é‡æ±  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è«é˜Ÿç®—æ³•</title>
      <link href="/2019/06/23/%E8%8E%AB%E9%98%9F%E7%AE%97%E6%B3%95/"/>
      <url>/2019/06/23/%E8%8E%AB%E9%98%9F%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>è«é˜Ÿç®—æ³•</p><span id="more"></span><h1 id="ç®€è¿°"><a href="#ç®€è¿°" class="headerlink" title="ç®€è¿°"></a>ç®€è¿°</h1><p>è«é˜Ÿç®—æ³•ä½¿ç”¨åˆ†å—çš„æ€æƒ³ï¼Œå¯ä»¥è§£å†³ä¸€ç±»ç¦»çº¿åŒºé—´è¯¢é—®é—®é¢˜</p><p>è«é˜Ÿç®—æ³•ï¼ˆ<code>mo&#39;s algorithm</code>ï¼‰ä¸€èˆ¬åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€æ˜¯è«é˜Ÿç»´æŠ¤åŒºé—´ç­”æ¡ˆï¼ŒäºŒæ˜¯ç»´æŠ¤åŒºé—´å†…çš„æ•°æ®ç»“æ„ã€‚å½“ç„¶ä¹Ÿæœ‰æ ‘ä¸Šè«é˜Ÿï¼Œå¸¦ä¿®æ”¹è«é˜Ÿã€äºŒç»´è«é˜Ÿç­‰ç­‰</p><h1 id="æ™®é€šè«é˜Ÿ"><a href="#æ™®é€šè«é˜Ÿ" class="headerlink" title="æ™®é€šè«é˜Ÿ"></a>æ™®é€šè«é˜Ÿ</h1><p>è«é˜Ÿçš„ç²¾é«“å°±åœ¨äºï¼Œç¦»çº¿å¾—åˆ°äº†ä¸€å †éœ€è¦å¤„ç†çš„åŒºé—´åï¼Œåˆç†çš„å®‰æ’è¿™äº›åŒºé—´è®¡ç®—çš„æ¬¡åºä»¥å¾—åˆ°ä¸€ä¸ªè¾ƒä¼˜çš„å¤æ‚åº¦ã€‚</p><p>æˆ‘ä»¬è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼Œç»™ä¸€ä¸ªåºåˆ—ï¼Œmæ¬¡è¯¢é—®ï¼Œæ¯æ¬¡è¯¢é—®ä½ åŒºé—´$[l,r]$æœ‰å¤šå°‘ç§ä¸åŒçš„é¢œè‰²ã€‚ $n,m\leq 100000n,mâ‰¤100000$</p><p>å…ˆè€ƒè™‘æš´åŠ›ï¼Œå¯¹æ¯æ¬¡è¯¢é—®éå†ä¸€é $[l,r]$ï¼Œè¿™æ ·æ˜¯$O(nm)$çš„</p><hr><p>æ¢ç§æ–¹å¼æš´åŠ›ï¼Œå®šä¹‰qlå’Œqrï¼Œè¡¨ç¤ºåŒºé—´ $[ql,qr]$å†…æœ‰å¤šå°‘é¢œè‰²ï¼Œå†å®šä¹‰cntæ•°ç»„ï¼Œ è¡¨ç¤ºç¬¬iç§é¢œè‰²åœ¨åŒºé—´ $[ql,qr]$å‡ºç°äº†å¤šå°‘æ¬¡ã€‚é‚£ä¹ˆç°åœ¨çš„æƒ…å†µå°±æ˜¯å·²ç» $[ql,qr]$çš„ç­”æ¡ˆï¼Œéœ€è¦æˆ‘ä»¬å»è½¬ç§»æ±‚$[l,r]$åŒºé—´çš„ç­”æ¡ˆ</p><p>å› ä¸ºè¿™ä¸ªæ˜¯è«é˜Ÿç®—æ³•çš„åŸºç¡€ï¼Œæ‰€ä»¥æ¨¡æ‹Ÿä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ï¼š</p><p><img src="/2019/06/23/%E8%8E%AB%E9%98%9F%E7%AE%97%E6%B3%95/1.png" alt></p><p>æˆ‘ä»¬çš„åˆå§‹åœ¨è¿™ä¸ªçŠ¶æ€ï¼Œå‡è®¾è“è‰²ä¸º1ï¼Œçº¢è‰²ä¸º2ï¼Œç»¿è‰²ä¸º3ï¼ŒåŒºé—´$[ql,qr]$æœ‰</p><p>é‚£ä¹ˆ$cnt_1=3, cnt_2=3, cnt_3=1$ï¼Œç„¶åæˆ‘ä»¬æŠŠqrå‘å³ç§»åŠ¨</p><p><img src="/2019/06/23/%E8%8E%AB%E9%98%9F%E7%AE%97%E6%B3%95/2.png" alt></p><p>è¿™æ ·å¤šäº†ä¸€ä¸ªç»¿è‰²ï¼Œ$cnt_3$çš„å€¼+1ï¼Œç»§ç»­ç§»åŠ¨</p><p><img src="/2019/06/23/%E8%8E%AB%E9%98%9F%E7%AE%97%E6%B3%95/3.png" alt></p><p>å¤šäº†ä¸€ä¸ªçº¢è‰²ï¼Œ$cnt_2$çš„å€¼+1</p><p>æ­¤æ—¶æˆ‘ä»¬å‘ç°ï¼Œæˆ‘ä»¬çš„å³æŒ‡é’ˆå·²ç»å’Œè¯¢é—®çš„å³ç«¯ç‚¹é‡åˆäº†ï¼Œæ¥ä¸‹æ¥ç§»åŠ¨ql</p><p><img src="/2019/06/23/%E8%8E%AB%E9%98%9F%E7%AE%97%E6%B3%95/4.png" alt></p><p>å°‘äº†ä¸ªè“è‰²ï¼Œ$cnt_1-1$</p><p>æ‰€ä»¥å¾—åˆ°ç­”æ¡ˆä¸º$cnt_1=2, cnt_2=4, cnt_3=2$</p><p>è¿™éƒ¨åˆ†ä»£ç å¯è¡¨ç¤ºä¸º</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">    cnt[x]++;</span><br><span class="line">    <span class="comment">//ansä¸ºä¸åŒé¢œè‰²ç­”æ¡ˆæ•°</span></span><br><span class="line">    <span class="keyword">if</span>(cnt[x]==<span class="number">1</span>)ans++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">del</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">    cnt[x]--;</span><br><span class="line">    <span class="keyword">if</span>(cnt[x]==<span class="number">0</span>)ans--;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¾…æ±‚å·¦åŒºé—´æ¯”åŸåŒºé—´å°ï¼Œåˆ™éœ€è¦å°†åŸåŒºé—´å·¦æŒ‡é’ˆå·¦ç§»ï¼Œé¢œè‰²å—å˜å¤šï¼Œé‚£ä¹ˆå°±éœ€è¦åŠ å€¼ï¼Œå…¶ä»–åŒæ ·</span></span><br><span class="line"><span class="keyword">while</span>(l&gt;ql) <span class="built_in">add</span>(a[--l]);</span><br><span class="line"><span class="keyword">while</span>(r&lt;qr) <span class="built_in">add</span>(a[++r]);</span><br><span class="line"><span class="keyword">while</span>(l&lt;ql) <span class="built_in">del</span>(a[l++]);</span><br><span class="line"><span class="keyword">while</span>(r&gt;qr) <span class="built_in">del</span>(a[r--]);</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å‘ç°ï¼Œæ¯æ¬¡æŒªåŠ¨éƒ½éƒ½æ˜¯$O(1)$çš„ï¼Œæ¯æ¬¡è¯¢é—®æˆ‘ä»¬æœ€å¤šè¦ç§»åŠ¨næ¬¡ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦è¿˜æ˜¯$O(nm)$ã€‚</p><p>æˆ‘ä»¬æœ‰æ²¡æœ‰åŠæ³•æ¥åŠ é€Ÿå‘¢ï¼Ÿ</p><p>è¿™ç§æš´åŠ›çš„è€—æ—¶å°±è€—åœ¨ç§»åŠ¨æ¬¡æ•°ä¸Šï¼Œæˆ‘ä»¬è¦è®©ä»–ç§»åŠ¨çš„æ¬¡æ•°å°½é‡å°‘</p><p>æœ€ç›´æ¥çš„ä¸€ä¸ªæƒ³æ³•å°±è®©æ¯ä¸ªæ‰€æ±‚åŒºé—´å°½é‡é è¿‘ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å‡å°‘äº†ç§»åŠ¨æ¬¡æ•°ã€‚</p><hr><p>ä¸€ç§ç›´è§‚çš„åŠæ³•æ˜¯æŒ‰ç…§å·¦ç«¯ç‚¹æ’åºï¼Œå†æŒ‰ç…§å³ç«¯ç‚¹æ’åºã€‚ä½†æ˜¯è¿™æ ·çš„è¡¨ç°ä¸å¥½ã€‚ç‰¹åˆ«æ˜¯é¢å¯¹ç²¾å¿ƒè®¾è®¡çš„æ•°æ®ï¼Œè¿™æ ·æ–¹æ³•è¡¨ç°å¾—å¾ˆå·®ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œæœ‰6ä¸ªè¯¢é—®å¦‚ä¸‹ï¼š(1, 100), (2, 2), (3, 99), (4, 4), (5, 102), (6, 7)</p><p>è¿™ä¸ªæ•°æ®å·²ç»æŒ‰ç…§å·¦ç«¯ç‚¹æ’åºäº†ã€‚ç”¨ä¸Šè¿°æ–¹æ³•å¤„ç†æ—¶ï¼Œå·¦ç«¯ç‚¹ä¼šç§»åŠ¨6æ¬¡ï¼Œå³ç«¯ç‚¹ä¼šç§»åŠ¨ç§»åŠ¨<code>98+97+95+98+95=483</code>æ¬¡ã€‚å³ç«¯ç‚¹å¤§å¹…åº¦åœ°æ¥å›ç§»åŠ¨ï¼Œä¸¥é‡å½±å“äº†æ—¶é—´å¤æ‚åº¦</p><p>å…¶å®æˆ‘ä»¬ç¨å¾®æ”¹å˜ä¸€ä¸‹è¯¢é—®å¤„ç†çš„é¡ºåºå°±èƒ½åšå¾—æ›´å¥½ï¼š(2, 2), (4, 4), (6, 7), (5, 102), (3, 99), (1, 100)</p><p>å·¦ç«¯ç‚¹ç§»åŠ¨æ¬¡æ•°ä¸º<code>2+2+1+2+2=9</code>æ¬¡ï¼Œæ¯”åŸæ¥ç¨å¤šã€‚å³ç«¯ç‚¹ç§»åŠ¨æ¬¡æ•°ä¸º<code>2+3+95+3+1=104</code>ï¼Œå³ç«¯ç‚¹çš„ç§»åŠ¨æ¬¡æ•°å¤§å¤§é™ä½äº†ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨æ’åºæ—¶ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯æŒ‰ç…§å·¦å³ç«¯ç‚¹ä¸¥æ ¼å‡åºæ’åºè¯¢é—®ï¼Œè€Œåªæ˜¯ä»¤å…¶å·¦å³ç«¯ç‚¹å¤„äºâ€œå¤§æ¦‚æ˜¯å‡åºâ€çš„çŠ¶æ€ã€‚å…·ä½“çš„æ–¹æ³•æ˜¯ï¼Œ<strong>æŠŠæ‰€æœ‰çš„åŒºé—´åˆ’åˆ†ä¸ºä¸åŒçš„å—ï¼Œå°†æ¯ä¸ªè¯¢é—®æŒ‰ç…§å·¦ç«¯ç‚¹çš„æ‰€åœ¨å—åºå·æ’åºï¼Œå·¦ç«¯ç‚¹å—ä¸€æ ·åˆ™æŒ‰ç…§å³ç«¯ç‚¹æ’åºã€‚</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(query a,query b)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> (a.r/block)==(b.r/block)?a.l&lt;b.l:a.r&lt;b.r;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ‰ä¸€ç§æ›´å¿«çš„æ’åºï¼Œæ®è¯´æ˜¯è¿™æ ·èƒ½å¿«æ˜¯å› ä¸ºæŒ‡é’ˆç§»åˆ°å³è¾¹åä¸ç”¨å†è·³å›å·¦è¾¹ï¼Œè€Œè·³å›å·¦è¾¹åå¤„ç†ä¸‹ä¸€ä¸ªå—åˆè¦è·³å›å³è¾¹ï¼Œè¿™æ ·èƒ½å‡å°‘ä¸€åŠæ“ä½œï¼Œç†è®ºä¸Šèƒ½å¿«ä¸€å€</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node a,node b)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> pos[a.l]^pos[b.l]?pos[a.l]&lt;pos[b.l]:pos[a.l]&amp;<span class="number">1</span>?a.r&lt;b.r:a.r&gt;b.r;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><strong>æ‰€ä»¥å…¶åŸºæœ¬æ€è·¯ä¸ºï¼šæŒ‰ç…§åˆ†å—æ€æƒ³ï¼Œå°†åŒºé—´åˆ†å—ï¼Œæ¥ç€å°†æ¯ä¸ªè¯¢é—®æŒ‰ç…§å—åºå·æ’åºï¼ˆä¸€æ ·åˆ™æŒ‰ç…§å³ç«¯ç‚¹æ’åºï¼‰ã€‚ä¹‹åï¼Œæˆ‘ä»¬ä»æ’åºåç¬¬ä¸€ä¸ªè¯¢é—®å¼€å§‹ï¼Œé€ä¸ªè®¡ç®—ç­”æ¡ˆã€‚</strong></p><p>è®¾åŒºé—´é•¿åº¦ä¸ºnï¼Œè¯¢é—®mæ¬¡ï¼Œé‚£ä¹ˆè«é˜Ÿæ—¶é—´å¤æ‚åº¦æ˜¯$O(m\sqrt{n})$</p><h1 id="P1972-SDOI2009-HHçš„é¡¹é“¾"><a href="#P1972-SDOI2009-HHçš„é¡¹é“¾" class="headerlink" title="P1972 [SDOI2009]HHçš„é¡¹é“¾"></a><a href="https://www.luogu.org/problemnew/show/P1972">P1972 [SDOI2009]HHçš„é¡¹é“¾</a></h1><p><img src="/2019/06/23/%E8%8E%AB%E9%98%9F%E7%AE%97%E6%B3%95/5.png" alt></p><p>å› ä¸ºè¿™é“é¢˜åŠ å¼ºäº†æ•°æ®å¡è«é˜Ÿï¼Œæ‰€ä»¥ä¼štä¸¤ä¸ªç‚¹ï¼Œä½†æ˜¯æ‹¿æ¥å†™è£¸è«é˜Ÿè¿˜æ˜¯å¯ä»¥çš„</p><p><img src="/2019/06/23/%E8%8E%AB%E9%98%9F%E7%AE%97%E6%B3%95/6.png" alt></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">500005</span>;</span><br><span class="line"><span class="keyword">int</span> arr[MAXN], block, ans = <span class="number">0</span>, Ans[MAXN], cnt[<span class="number">1000005</span>];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> l, r, id;</span><br><span class="line">&#125;q[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node a,node b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span>(a.l/block)^(b.l/block)?a.l&lt;b.l:(((a.l/block)&amp;<span class="number">1</span>)?a.r&lt;b.r:a.r&gt;b.r);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!cnt[arr[x]]) ans++;</span><br><span class="line">    cnt[arr[x]]++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">del</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cnt[arr[x]]--;</span><br><span class="line">    <span class="keyword">if</span>(!cnt[arr[x]]) ans--;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;arr[i]);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;m);</span><br><span class="line">    block = <span class="built_in">sqrt</span>(n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;q[i].l);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;q[i].r);</span><br><span class="line">        q[i].id = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(q+<span class="number">1</span>, q+m+<span class="number">1</span>, cmp);</span><br><span class="line">    <span class="keyword">int</span> l = <span class="number">0</span>, r = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> ql = q[i].l, qr = q[i].r;</span><br><span class="line">        <span class="keyword">while</span>(l&lt;ql)<span class="built_in">del</span>(l++);</span><br><span class="line">        <span class="keyword">while</span>(l&gt;ql)<span class="built_in">add</span>(--l);</span><br><span class="line">        <span class="keyword">while</span>(r&lt;qr)<span class="built_in">add</span>(++r);</span><br><span class="line">        <span class="keyword">while</span>(r&gt;qr)<span class="built_in">del</span>(r--);</span><br><span class="line">        Ans[q[i].id] = ans;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, Ans[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å¸¦ä¿®æ”¹çš„è«é˜Ÿ"><a href="#å¸¦ä¿®æ”¹çš„è«é˜Ÿ" class="headerlink" title="å¸¦ä¿®æ”¹çš„è«é˜Ÿ"></a>å¸¦ä¿®æ”¹çš„è«é˜Ÿ</h1><p>æ™®é€šçš„è«é˜Ÿåªèƒ½è§£å†³æ²¡æœ‰ä¿®æ”¹çš„é—®é¢˜ï¼Œé‚£ä¹ˆå¸¦ä¿®æ”¹çš„é—®é¢˜æ€ä¹ˆè§£å†³å‘¢ï¼Ÿå¸¦ä¿®è«é˜Ÿå°±æ˜¯ä¸€ç§æ”¯æŒå•ç‚¹ä¿®æ”¹çš„è«é˜Ÿç®—æ³•ã€‚</p><p>åœ¨è¿›è¡Œä¿®æ”¹æ“ä½œçš„æ—¶å€™ï¼Œä¿®æ”¹æ“ä½œæ˜¯ä¼šå¯¹ç­”æ¡ˆäº§ç”Ÿå½±å“çš„(åºŸè¯)</p><p>é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•é¿å…ä¿®æ”¹æ“ä½œå¸¦æ¥çš„å½±å“å‘¢ï¼Ÿ</p><hr><p>å®ƒä¸æ™®é€šè«é˜Ÿä¸åŒçš„æ˜¯ï¼Œå¤šäº†ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œç”¨æ¥è®°å½•åˆ°å½“å‰è¿™ä¸ªè¯¢é—®æ—¶å·²ç»è¿›è¡Œäº†å¤šå°‘æ¬¡ä¿®æ”¹æ“ä½œã€‚</p><p>æˆ‘ä»¬æŠŠè¯¢é—®å’Œä¿®æ”¹åˆ†åˆ«å­˜ä¸‹æ¥ã€‚å¯¹äºæ¯ä¸€ä¸ªè¯¢é—®ï¼Œæˆ‘ä»¬ä¸ä»…è¦åšåˆ°å·¦å³ç«¯ç‚¹ä¸å½“å‰è¯¢é—®ä¸€è‡´ï¼Œè¿˜è¦ä½¿ä¿®æ”¹æ¬¡æ•°ä¸å½“å‰è¯¢é—®ç›¸åŒã€‚å¦‚æœæˆ‘ä»¬ä¿®æ”¹å¾—è¿‡å¤šï¼Œé‚£ä¹ˆåº”è¯¥åˆ å»å¤šä½™çš„ä¿®æ”¹ï¼Œä¿®æ”¹è¿‡å°‘åˆ™åä¹‹ã€‚</p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬ç°åœ¨å·²ç»è¿›è¡Œäº†3æ¬¡ä¿®æ”¹ï¼Œæœ¬æ¬¡æŸ¥è¯¢æ˜¯åœ¨ç¬¬5æ¬¡ä¿®æ”¹ä¹‹åï¼Œé‚£æˆ‘ä»¬å°±æ‰§è¡Œç¬¬4,5æ¬¡ä¿®æ”¹</p><p>è¿™æ ·å°±å¯ä»¥é¿å…ä¿®æ”¹æ“ä½œå¯¹ç­”æ¡ˆäº§ç”Ÿçš„å½±å“äº†</p><p>å› ä¸ºè«é˜Ÿæ˜¯ç¦»çº¿æŸ¥è¯¢ï¼Œéœ€è¦å…ˆè¯»å–å…¨éƒ¨éœ€è¦æŸ¥è¯¢çš„åŒºé—´å†å¼€å§‹å¤„ç†çš„ï¼Œæœ‰ä¿®æ”¹çš„è¯ï¼Œå°±ç±»ä¼¼äºæ™®é€šè«é˜Ÿé‚£æ ·å·¦å³ç§»åŠ¨ç«¯ç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åŠ ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œä¹Ÿè®©æ—¶é—´æˆ³åŒæ­¥äºå·¦å³ç«¯ç‚¹è¿›è¡Œç§»åŠ¨ã€‚è¿™æ ·çš„è¯æˆ‘ä»¬å°±éœ€è¦å¯¹æ—¶é—´æˆ³è¿›è¡Œå¤„ç†ï¼Œè®©ç»“æœæœ€ä¼˜ã€‚</p><p>å¸¦ä¿®è«é˜Ÿåœ¨åŸæ¥å››ä¸ªwhileå¾ªç¯çš„åŸºç¡€ä¸ŠåŠ äº†ä¸¤ä¸ªwhileå¾ªç¯å¤„ç†æ—¶é—´æˆ³ã€‚</p><p>åˆ†å—çš„è¯<code>block = pow(n, 0.6666666666);</code>è¿™æ ·æ¯”è¾ƒå¥½</p><h1 id="P1903-å›½å®¶é›†è®­é˜Ÿ-æ•°é¢œè‰²-ç»´æŠ¤é˜Ÿåˆ—"><a href="#P1903-å›½å®¶é›†è®­é˜Ÿ-æ•°é¢œè‰²-ç»´æŠ¤é˜Ÿåˆ—" class="headerlink" title="P1903 [å›½å®¶é›†è®­é˜Ÿ]æ•°é¢œè‰² / ç»´æŠ¤é˜Ÿåˆ—"></a><a href="https://www.luogu.org/problemnew/show/P1903">P1903 [å›½å®¶é›†è®­é˜Ÿ]æ•°é¢œè‰² / ç»´æŠ¤é˜Ÿåˆ—</a></h1><p><img src="/2019/06/23/%E8%8E%AB%E9%98%9F%E7%AE%97%E6%B3%95/7.png" alt></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ä»£ç  C++11ï¼Œ1.9KB</span></span><br><span class="line"><span class="comment">æäº¤æ—¶é—´ 2019-06-28 11:44:21</span></span><br><span class="line"><span class="comment">è€—æ—¶/å†…å­˜ 6414ms, 9876KB</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">500005</span>;</span><br><span class="line"><span class="keyword">int</span> arr[MAXN], block, ans = <span class="number">0</span>, cntQ = <span class="number">0</span>, cntR = <span class="number">0</span>, cnt[<span class="number">1000005</span>], Ans[MAXN];</span><br><span class="line"><span class="keyword">int</span> where[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="comment">//l = å·¦ç«¯ç‚¹ï¼Œr = å³ç«¯ç‚¹ï¼Œt = å·²ä¿®æ”¹æ¬¡æ•°ï¼ˆæ—¶é—´æˆ³ï¼‰ï¼Œid = è¯¢é—®ç¼–å·</span></span><br><span class="line">    <span class="keyword">int</span> l, r, id, t;</span><br><span class="line">&#125;q[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Update</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> pos, k; <span class="comment">//æŠŠç¬¬ pos ä¸ªæ•°å˜ä¸º k</span></span><br><span class="line">&#125;u[MAXN];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node x, node y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x.l / block != y.l / block)</span><br><span class="line">        <span class="keyword">return</span> x.l &lt; y.l;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (x.r / block != y.r / block)</span><br><span class="line">        <span class="built_in"><span class="keyword">return</span></span> ((x.l / block) &amp; <span class="number">1</span>) ? x.r &lt; y.r : x.r &gt; y.r;</span><br><span class="line">    <span class="keyword">return</span> x.t &lt; y.t;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(++cnt[x] == <span class="number">1</span>)</span><br><span class="line">        ans++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">del</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(--cnt[x] == <span class="number">0</span>)</span><br><span class="line">        ans--;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">upd</span><span class="params">(<span class="keyword">int</span> now, <span class="keyword">int</span> i)</span> <span class="comment">//åœ¨ç¬¬ i ä¸ªè¯¢é—®è¿›è¡Œç¬¬ now æ¬¡ä¿®æ”¹</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(u[now].pos &gt;= q[i].l &amp;&amp; u[now].pos &lt;= q[i].r) <span class="comment">//ä¿®æ”¹çš„ä½ç½®åœ¨è¯¢é—®åŒºé—´å†…æ‰ä¼šäº§ç”Ÿå½±å“ </span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">del</span>(arr[u[now].pos]); <span class="comment">//åˆ æ‰ç¬¬ pos ä½ä¸Šçš„æ•° </span></span><br><span class="line">        <span class="built_in">add</span>(u[now].k); <span class="comment">//å¢åŠ ä¿®æ”¹å®Œçš„æ•° </span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¦‚æœæˆ‘ä»¬è¿™ä¸€æ¬¡ä¿®æ”¹æŠŠ x å˜æˆäº† yï¼Œä¸‹æ¬¡å¦‚æœè¦æ”¹å›æ¥å°±ä¸æ˜¯æŠŠ x å˜æˆ y äº†ï¼Œ</span></span><br><span class="line">    <span class="comment">//è€Œæ˜¯åº”å½“æŠŠ y å˜æˆ xï¼Œæ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹å®Œåæˆ‘ä»¬è¦æŠŠ x å’Œ y äº¤æ¢</span></span><br><span class="line">    <span class="built_in">swap</span>(arr[u[now].pos], u[now].k);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mo</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">sort</span>(q+<span class="number">1</span>, q+cntQ+<span class="number">1</span>, cmp);</span><br><span class="line">    <span class="keyword">int</span> l = <span class="number">1</span>, r = <span class="number">0</span>, now = <span class="number">0</span>; <span class="comment">//åˆå§‹å·¦ç«¯ç‚¹ä¸º 1ï¼Œå³ç«¯ç‚¹ä¸º 0ï¼Œè¿›è¡Œäº† 0 æ¬¡ä¿®æ”¹</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cntQ; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> ql = q[i].l, qr = q[i].r, qt=q[i].t;</span><br><span class="line">        <span class="keyword">while</span>(l&gt;ql)<span class="built_in">add</span>(arr[--l]);</span><br><span class="line">        <span class="keyword">while</span>(r&lt;qr)<span class="built_in">add</span>(arr[++r]);</span><br><span class="line">        <span class="keyword">while</span>(l&lt;ql)<span class="built_in">del</span>(arr[l++]);</span><br><span class="line">        <span class="keyword">while</span>(r&gt;qr)<span class="built_in">del</span>(arr[r--]);</span><br><span class="line">        <span class="keyword">while</span>(now&lt;qt) <span class="built_in">upd</span>(++now, i);</span><br><span class="line">        <span class="keyword">while</span>(now&gt;qt) <span class="built_in">upd</span>(now--, i);</span><br><span class="line">        Ans[q[i].id] = ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;arr[i]);</span><br><span class="line">    block = <span class="built_in">pow</span>(n, <span class="number">0.6666666666</span>);</span><br><span class="line">    <span class="keyword">char</span> op;</span><br><span class="line">    <span class="keyword">int</span> l, r;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">getchar</span>();</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%c %d %d&quot;</span>, &amp;op, &amp;l, &amp;r);</span><br><span class="line">        <span class="keyword">if</span>(op == <span class="string">&#x27;Q&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            cntQ++; <span class="comment">//è®°å½•å…± cntQ ä¸ªæŸ¥è¯¢</span></span><br><span class="line">            q[cntQ].l = l;</span><br><span class="line">            q[cntQ].r = r;</span><br><span class="line">            q[cntQ].t = cntR;</span><br><span class="line">            q[cntQ].id = cntQ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            cntR++; <span class="comment">//è®°å½•å…± cntR ä¸ªä¿®æ”¹ </span></span><br><span class="line">            u[cntR].pos = l;</span><br><span class="line">            u[cntR].k = r;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">mo</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cntQ; i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, Ans[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š</p><p><a href="https://www.luogu.org/blog/codesonic/Mosalgorithm">è«é˜Ÿç®—æ³•åˆæ¢ - #include<codesonic> - æ´›è°·åšå®¢</codesonic></a></p><p><a href="https://zhuanlan.zhihu.com/p/25017840">è«é˜Ÿç®—æ³• (Moâ€™s Algorithm) - çŸ¥ä¹</a></p><p><a href="https://www.cnblogs.com/CsOH/p/5904430.html">è«é˜Ÿç®—æ³•è‰¯å¿ƒè®²è§£ - å¼ ç‘¯å°å¼º - åšå®¢å›­</a></p><p><a href="https://ouuan.github.io/%E8%8E%AB%E9%98%9F%E3%80%81%E5%B8%A6%E4%BF%AE%E8%8E%AB%E9%98%9F%E3%80%81%E6%A0%91%E4%B8%8A%E8%8E%AB%E9%98%9F%E8%AF%A6%E8%A7%A3/">è«é˜Ÿã€å¸¦ä¿®è«é˜Ÿã€æ ‘ä¸Šè«é˜Ÿè¯¦è§£ | ouuançš„åšå®¢</a></p><p><a href="https://www.cnblogs.com/zwfymqz/p/7154145.html">å¸¦ä¿®æ”¹è«é˜Ÿç®—æ³• - è‡ªä¸ºé£æœˆé©¬å‰å’ - åšå®¢å›­</a></p><p><a href="https://heartlessly.github.io/problems/luogu-p1903/">ã€ŒLuogu P1903ã€ã€Œå›½å®¶é›†è®­é˜Ÿã€æ•°é¢œè‰²/ç»´æŠ¤é˜Ÿåˆ— | Heartlesslyâ€™s Blog</a></p><p><a href="https://blog.csdn.net/can919/article/details/79393546">è«é˜Ÿç®—æ³•ã€åŠå¸¦ä¿®æ”¹æ“ä½œçš„è«é˜Ÿç®—æ³• - CaptainChençš„åšå®¢ - CSDNåšå®¢</a></p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è«é˜Ÿç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè™šæ‹Ÿæœºç¬”è®°-å­—èŠ‚ç æ ¼å¼</title>
      <link href="/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/"/>
      <url>/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p> .classæ–‡ä»¶</p><span id="more"></span><p>Javaä»åˆšå¼€å§‹çš„æ—¶å€™å°±æœ‰ä¸¤å¥— è§„èŒƒï¼Œä¸€ä¸ªæ˜¯Javaè¯­è¨€è§„èŒƒï¼Œå¦å¤–ä¸€ä¸ªæ˜¯Javaè™šæ‹Ÿæœºè§„èŒƒï¼ŒJavaè¯­è¨€è§„èŒƒåªæ˜¯è§„å®šäº†Javaè¯­è¨€ç›¸å…³çš„çº¦æŸä»¥åŠè§„åˆ™ï¼Œè€Œè™šæ‹Ÿæœºè§„èŒƒåˆ™æ‰æ˜¯çœŸæ­£ä»è·¨å¹³å°çš„è§’åº¦å»è®¾è®¡çš„</p><h1 id="Javaè¯­è¨€çš„å¹³å°æ— å…³æ€§"><a href="#Javaè¯­è¨€çš„å¹³å°æ— å…³æ€§" class="headerlink" title="Javaè¯­è¨€çš„å¹³å°æ— å…³æ€§"></a>Javaè¯­è¨€çš„å¹³å°æ— å…³æ€§</h1><p>åœ¨è™šæ‹Ÿæœºå‡ºç°ä¹‹å‰ï¼Œç¨‹åºè¦æƒ³æ­£ç¡®è¿è¡Œåœ¨è®¡ç®—æœºä¸Šï¼Œé¦–å…ˆè¦å°†ä»£ç ç¼–è¯‘æˆäºŒè¿›åˆ¶æœ¬åœ°æœºå™¨ç ï¼Œè€Œè¿™ä¸ªè¿‡ç¨‹æ˜¯å’Œç”µè„‘çš„æ“ä½œç³»ç»ŸOSã€CPUæŒ‡ä»¤é›†å¼ºç›¸å…³çš„ï¼Œæ‰€ä»¥å¯èƒ½ä»£ç åªèƒ½åœ¨æŸç§ç‰¹å®šçš„å¹³å°ä¸‹è¿è¡Œï¼Œè€Œæ¢ä¸€ä¸ªå¹³å°æˆ–æ“ä½œç³»ç»Ÿå°±æ— æ³•æ­£ç¡®è¿è¡Œäº†ã€‚éšç€è™šæ‹Ÿæœºçš„å‡ºç°ï¼Œç›´æ¥å°†ç¨‹åºç¼–è¯‘æˆæœºå™¨ç ï¼Œå·²ç»ä¸å†æ˜¯å”¯ä¸€çš„é€‰æ‹©äº†ã€‚è¶Šæ¥è¶Šå¤šçš„ç¨‹åºè¯­è¨€é€‰æ‹©äº†ä¸æ“ä½œç³»ç»Ÿå’Œæœºå™¨æŒ‡ä»¤é›†æ— å…³çš„ã€å¹³å°ä¸­ç«‹çš„æ ¼å¼ä½œä¸ºç¨‹åºç¼–è¯‘åçš„å­˜å‚¨æ ¼å¼ã€‚Javaå°±æ˜¯è¿™æ ·ä¸€ç§è¯­è¨€ã€‚â€œä¸€æ¬¡ç¼–å†™ï¼Œåˆ°å¤„è¿è¡Œâ€äºæ˜¯æˆç«‹Javaçš„å®£ä¼ å£å·ã€‚</p><p><strong>æ­£æ˜¯è™šæ‹Ÿæœºå’Œå­—èŠ‚ç (ByteCode)æ„æˆäº†å¹³å°æ— å…³æ€§çš„åŸºçŸ³ï¼Œä»è€Œå®ç°â€œä¸€æ¬¡ç¼–å†™ï¼Œåˆ°å¤„è¿è¡Œâ€</strong></p><p>Javaè™šæ‹Ÿæœºå°†.javaæ–‡ä»¶ç¼–è¯‘æˆå­—èŠ‚ç ,è€Œ.classå­—èŠ‚ç æ–‡ä»¶ç»è¿‡JVMè½¬åŒ–ä¸ºå½“å‰å¹³å°ä¸‹çš„æœºå™¨ç åå†è¿›è¡Œç¨‹åºæ‰§è¡Œã€‚è¿™æ ·ï¼Œç¨‹åºçŒ¿å°±æ— éœ€é‡å¤ç¼–å†™ä»£ç æ¥é€‚åº”ä¸åŒå¹³å°äº†ï¼Œè€Œæ˜¯ä¸€å¥—ä»£ç å¤„å¤„è¿è¡Œï¼Œè‡³äºå­—èŠ‚ç æ€æ ·è½¬åŒ–æˆå¯¹åº”å¹³å°ä¸‹çš„æœºå™¨ç ï¼Œé‚£å°±æ˜¯Javaè™šæ‹Ÿæœºçš„äº‹æƒ…äº†ã€‚</p><h1 id="JVMçš„è¯­è¨€æ— å…³æ€§"><a href="#JVMçš„è¯­è¨€æ— å…³æ€§" class="headerlink" title="JVMçš„è¯­è¨€æ— å…³æ€§"></a>JVMçš„è¯­è¨€æ— å…³æ€§</h1><p>æ—¶è‡³ä»Šæ—¥ï¼Œå•†ä¸šæœºæ„å’Œå¼€æºæœºæ„ä»¥åŠåœ¨Javaè¯­è¨€ä¹‹å¤–å‘å±•å‡ºä¸€å¤§æ‰¹åœ¨Javaè™šæ‹Ÿæœºä¹‹ä¸Šè¿è¡Œçš„è¯­è¨€ï¼Œå¦‚<code>Groovy</code>,<code>JRuby</code>,<code>Jython</code>,<code>Scala</code>ç­‰ç­‰ã€‚è¿™äº›è¯­è¨€é€šè¿‡å„è‡ªçš„ç¼–è¯‘å™¨ç¼–è¯‘æˆä¸º.classæ–‡ä»¶ï¼Œä»è€Œå¯ä»¥è¢«JVMæ‰€æ‰§è¡Œã€‚</p><p><img src="/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/1.jpg" alt></p><p>æ‰€ä»¥ï¼Œç”±äºJavaè™šæ‹Ÿæœºè®¾è®¡ä¹‹åˆçš„å®šä½ï¼Œä»¥åŠå­—èŠ‚ç (<code>ByteCode</code>)çš„å­˜åœ¨ï¼Œä½¿å¾—JVMå¯ä»¥æ‰§è¡Œä¸åŒè¯­è¨€ä¸‹çš„å­—èŠ‚ç .classæ–‡ä»¶ï¼Œä»è€Œæ„æˆäº†è¯­è¨€æ— å…³æ€§çš„åŸºç¡€ã€‚</p><h1 id="Classæ–‡ä»¶ç»“æ„"><a href="#Classæ–‡ä»¶ç»“æ„" class="headerlink" title="Classæ–‡ä»¶ç»“æ„"></a>Classæ–‡ä»¶ç»“æ„</h1><h2 id="æ€»ä½“æ¦‚å†µ"><a href="#æ€»ä½“æ¦‚å†µ" class="headerlink" title="æ€»ä½“æ¦‚å†µ"></a>æ€»ä½“æ¦‚å†µ</h2><p><strong>æ³¨æ„ï¼Œä»»ä½•ä¸€ä¸ªClassæ–‡ä»¶éƒ½å¯¹åº”ç€å”¯ä¸€ä¸€ä¸ªç±»æˆ–æ¥å£çš„å®šä¹‰ä¿¡æ¯ï¼Œä½†åè¿‡æ¥è¯´ï¼Œç±»æˆ–æ¥å£å¹¶ä¸ä¸€å®šéƒ½å¾—å®šä¹‰åœ¨æ–‡ä»¶é‡Œï¼ˆè­¬å¦‚ç±»æˆ–æ¥å£ä¹Ÿå¯ä»¥é€šè¿‡ç±»åŠ è½½å™¨ç›´æ¥ç”Ÿæˆï¼‰</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> indi.greenhat.bytecode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test1</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> a = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getA</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setA</span><span class="params">(<span class="keyword">int</span> a)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.a = a;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨åˆ°javaå†…ç½®çš„ä¸€ä¸ªåç¼–è¯‘å·¥å…·<code>javap</code>å¯ä»¥åç¼–è¯‘å­—èŠ‚ç æ–‡ä»¶ã€‚ é€šè¿‡<code>javap -help</code>å¯äº†è§£javapçš„åŸºæœ¬ç”¨æ³•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">ç”¨æ³•: javap &lt;options&gt; &lt;classes&gt;</span><br><span class="line">å…¶ä¸­, å¯èƒ½çš„é€‰é¡¹åŒ…æ‹¬:</span><br><span class="line">  -help  --help  -?        è¾“å‡ºæ­¤ç”¨æ³•æ¶ˆæ¯</span><br><span class="line">  -version                 ç‰ˆæœ¬ä¿¡æ¯</span><br><span class="line">  -v  -verbose             è¾“å‡ºé™„åŠ ä¿¡æ¯</span><br><span class="line">  -l                       è¾“å‡ºè¡Œå·å’Œæœ¬åœ°å˜é‡è¡¨</span><br><span class="line">  -public                  ä»…æ˜¾ç¤ºå…¬å…±ç±»å’Œæˆå‘˜</span><br><span class="line">  -protected               æ˜¾ç¤ºå—ä¿æŠ¤çš„/å…¬å…±ç±»å’Œæˆå‘˜</span><br><span class="line">  -package                 æ˜¾ç¤ºç¨‹åºåŒ…/å—ä¿æŠ¤çš„/å…¬å…±ç±»</span><br><span class="line">                           å’Œæˆå‘˜ (é»˜è®¤)</span><br><span class="line">  -p  -private             æ˜¾ç¤ºæ‰€æœ‰ç±»å’Œæˆå‘˜</span><br><span class="line">  -c                       å¯¹ä»£ç è¿›è¡Œåæ±‡ç¼–</span><br><span class="line">  -s                       è¾“å‡ºå†…éƒ¨ç±»å‹ç­¾å</span><br><span class="line">  -sysinfo                 æ˜¾ç¤ºæ­£åœ¨å¤„ç†çš„ç±»çš„</span><br><span class="line">                           ç³»ç»Ÿä¿¡æ¯ (è·¯å¾„, å¤§å°, æ—¥æœŸ, MD5 æ•£åˆ—)</span><br><span class="line">  -constants               æ˜¾ç¤ºæœ€ç»ˆå¸¸é‡</span><br><span class="line">  -classpath &lt;path&gt;        æŒ‡å®šæŸ¥æ‰¾ç”¨æˆ·ç±»æ–‡ä»¶çš„ä½ç½®</span><br><span class="line">  -cp &lt;path&gt;               æŒ‡å®šæŸ¥æ‰¾ç”¨æˆ·ç±»æ–‡ä»¶çš„ä½ç½®</span><br><span class="line">  -bootclasspath &lt;path&gt;    è¦†ç›–å¼•å¯¼ç±»æ–‡ä»¶çš„ä½ç½®</span><br></pre></td></tr></table></figure><p>åç¼–è¯‘ä¸Šé¢çš„javaä»£ç åå‡ºç°çš„ç»“æœ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">Classfile /home/cc/IdeaProjects/test/out/production/test/indi/greenhat/bytecode/Test1.class</span><br><span class="line">  Last modified Jun <span class="number">23</span>, <span class="number">2019</span>; size <span class="number">485</span> bytes</span><br><span class="line">  MD5 checksum 6c83e799a2a04ca1ae44b4eb2e46ae35</span><br><span class="line">  Compiled from <span class="string">&quot;Test1.java&quot;</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">indi</span>.<span class="title">greenhat</span>.<span class="title">bytecode</span>.<span class="title">Test1</span></span></span><br><span class="line"><span class="class">  <span class="title">minor</span> <span class="title">version</span>: 0</span></span><br><span class="line"><span class="class">  <span class="title">major</span> <span class="title">version</span>: 52</span></span><br><span class="line"><span class="class">  <span class="title">flags</span>: <span class="title">ACC_PUBLIC</span>, <span class="title">ACC_SUPER</span></span></span><br><span class="line"><span class="class"><span class="title">Constant</span> <span class="title">pool</span>:</span></span><br><span class="line"><span class="class">   #1 </span>= Methodref          #<span class="number">4.</span>#<span class="number">20</span>         <span class="comment">// java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">   #<span class="number">2</span> = Fieldref           #<span class="number">3.</span>#<span class="number">21</span>         <span class="comment">// indi/greenhat/bytecode/Test1.a:I</span></span><br><span class="line">   #<span class="number">3</span> = Class              #<span class="number">22</span>            <span class="comment">// indi/greenhat/bCC`ytecode/Test1</span></span><br><span class="line">   #<span class="number">4</span> = Class              #<span class="number">23</span>            <span class="comment">// java/lang/Object</span></span><br><span class="line">   #<span class="number">5</span> = Utf8               a</span><br><span class="line">   #<span class="number">6</span> = Utf8               I</span><br><span class="line">   #<span class="number">7</span> = Utf8               &lt;init&gt;</span><br><span class="line">   #<span class="number">8</span> = Utf8               ()V</span><br><span class="line">   #<span class="number">9</span> = Utf8               Code</span><br><span class="line">  #<span class="number">10</span> = Utf8               LineNumberTable</span><br><span class="line">  #<span class="number">11</span> = Utf8               LocalVariableTable</span><br><span class="line">  #<span class="number">12</span> = Utf8               <span class="keyword">this</span></span><br><span class="line">  #<span class="number">13</span> = Utf8               Lindi/greenhat/bytecode/Test1;</span><br><span class="line">  #<span class="number">14</span> = Utf8               getA</span><br><span class="line">  #<span class="number">15</span> = Utf8               ()I</span><br><span class="line">  #<span class="number">16</span> = Utf8               setACC`</span><br><span class="line">  #<span class="number">17</span> = Utf8               (I)V</span><br><span class="line">  #<span class="number">18</span> = Utf8               SourceFile</span><br><span class="line">  #<span class="number">19</span> = Utf8               Test1.java</span><br><span class="line">  #<span class="number">20</span> = NameAndType        #<span class="number">7</span>:#<span class="number">8</span>          <span class="comment">// &quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">  #<span class="number">21</span> = NameAndType        #<span class="number">5</span>:#<span class="number">6</span>          <span class="comment">// a:I</span></span><br><span class="line">  #<span class="number">22</span> = Utf8               indi/greenhat/bytecode/Test1</span><br><span class="line">  #<span class="number">23</span> = Utf8               java/lang/Object</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">public</span> indi.greenhat.bytecode.Test1();</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags: ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">2</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: aload_0</span><br><span class="line">         <span class="number">1</span>: invokespecial #<span class="number">1</span>                  <span class="comment">// Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">         <span class="number">4</span>: aload_0</span><br><span class="line">         <span class="number">5</span>: iconst_1### attribute_count</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">         <span class="number">6</span>: putfield      #<span class="number">2</span>                  <span class="comment">// Field a:I</span></span><br><span class="line">         <span class="number">9</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">3</span>: <span class="number">0</span></span><br><span class="line">        line <span class="number">4</span>: <span class="number">4</span></span><br><span class="line">      LocalVariableTable:### attribute_count</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>      <span class="number">10</span>     <span class="number">0</span>  <span class="keyword">this</span>   Lindi/greenhat/bytecode/Test1;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getA</span><span class="params">()</span></span>;</span><br><span class="line">    descriptor: ()I</span><br><span class="line">    flags: ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">1</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: aload_0</span><br><span class="line">         <span class="number">1</span>: getfield      #<span class="number">2</span>                  <span class="comment">// Field a:I</span></span><br><span class="line">         <span class="number">4</span>: ireturn</span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">7</span>: <span class="number">0</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>       <span class="number">5</span>     <span class="number">0</span>  <span class="keyword">this</span>   Lindi/greenhat/bytecode/Test1;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setA</span><span class="params">(<span class="keyword">int</span>)</span></span>;</span><br><span class="line">    descriptor: (I)V</span><br><span class="line">    flags: ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">2</span>, locals=<span class="number">2</span>, args_size=<span class="number">2</span></span><br><span class="line">         <span class="number">0</span>: aload_0</span><br><span class="line">         <span class="number">1</span>: iload_1</span><br><span class="line">         <span class="number">2</span>: putfield      #<span class="number">2</span>                  <span class="comment">// Field a:I</span></span><br><span class="line">         <span class="number">5</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">11</span>: <span class="number">0</span></span><br><span class="line">        line <span class="number">12</span>: <span class="number">5</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>       <span class="number">6</span>     <span class="number">0</span>  <span class="keyword">this</span>   Lindi/greenhat/bytecode/Test1;</span><br><span class="line">            <span class="number">0</span>       <span class="number">6</span>     <span class="number">1</span>     a   I</span><br><span class="line">&#125;</span><br><span class="line">SourceFile: <span class="string">&quot;Test1.java&quot;</span></span><br></pre></td></tr></table></figure><p>åœ¨linuxä¸‹æˆ‘ä»¬å¯ä»¥ç”¨<code>hexyl</code>å·¥å…·åœ¨ç»ˆç«¯ä¸‹æŸ¥çœ‹æ–‡ä»¶çš„16è¿›åˆ¶è¡¨ç¤ºï¼Œæˆ–è€…ä½¿ç”¨<code>vim -b filename</code>ç„¶åé”®å…¥<code>%!xxd -g1</code>å‘½ä»¤æŸ¥çœ‹</p><p><img src="/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/2.png" alt></p><p>å¯ä»¥çœ‹åˆ°ï¼ŒClassæ–‡ä»¶æ˜¯ä¸€ç»„ä»¥8ä½å­—èŠ‚ï¼ˆç”±å…«ä¸ªäºŒè¿›åˆ¶æ•°ä½ç»„æˆçš„å­—èŠ‚ï¼Œé€šå¸¸å¯è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå³2ä¸ªå­—ç¬¦å ä¸€ä¸ªå­—èŠ‚ã€‚å› ä¸º2çš„4æ¬¡æ–¹è¡¨ç¤º16ï¼Œï¼‰ä¸ºåŸºç¡€å•ä½çš„äºŒè¿›åˆ¶æµï¼Œå„ä¸ªæ•°æ®é¡¹ç›®ä¸¥æ ¼æŒ‰ç…§é¡ºåºç´§å‡‘åœ°æ’åˆ—åœ¨Classæ–‡ä»¶ä¹‹ä¸­ï¼Œä¸­é—´æ²¡æœ‰æ·»åŠ ä»»ä½•åˆ†éš”ç¬¦ï¼Œè¿™ä½¿å¾—æ•´ä¸ªClassæ–‡ä»¶ä¸­å­˜å‚¨çš„å†…å®¹å‡ ä¹ å…¨éƒ¨æ˜¯ç¨‹åºè¿è¡Œçš„å¿…è¦æ•°æ®ï¼Œæ²¡æœ‰ç©ºéš™å­˜åœ¨ã€‚å½“é‡åˆ°éœ€è¦å ç”¨8ä½å­—èŠ‚ä»¥ä¸Šç©ºé—´çš„æ•°æ®é¡¹ æ—¶ï¼Œåˆ™ä¼šæŒ‰ç…§é«˜ä½åœ¨å‰çš„æ–¹å¼åˆ†å‰²æˆè‹¥å¹²ä¸ª8ä½å­—èŠ‚è¿›è¡Œå­˜å‚¨ã€‚</p><p>ä¸€ä¸ªclassæ–‡ä»¶çš„ç»“æ„ï¼š</p><p><img src="/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/2.jpg" alt></p><p><img src="/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/7.png" alt></p><p><img src="/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/9.png" alt></p><p><img src="/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/21.png" alt></p><h2 id="å­—èŠ‚ç ä¸­çš„æ•°æ®ç±»å‹"><a href="#å­—èŠ‚ç ä¸­çš„æ•°æ®ç±»å‹" class="headerlink" title="å­—èŠ‚ç ä¸­çš„æ•°æ®ç±»å‹"></a>å­—èŠ‚ç ä¸­çš„æ•°æ®ç±»å‹</h2><p>Classå­—èŠ‚ç ä¸­æœ‰ä¸¤ç§æ•°æ®ç±»å‹ </p><ul><li>å­—èŠ‚æ•°æ®ç›´æ¥é‡ï¼šè¿™æ˜¯åŸºæœ¬çš„æ•°æ®ç±»å‹ã€‚å…±ç»†åˆ†ä¸ºu1ï¼Œu2ï¼Œ u4ï¼Œu8å››ç§ï¼Œåˆ†åˆ«ä»£è¡¨è¿ç»­çš„1ä¸ªå­—èŠ‚ã€2ä¸ªå­—èŠ‚ã€4ä¸ªå­—èŠ‚ã€8ä¸ªå­—èŠ‚ç»„æˆçš„æ•´ä½“æ•°æ®ã€‚</li><li>è¡¨ï¼ˆæ•°ç»„ï¼‰ï¼šè¡¨æ˜¯ç”±å¤šä¸ªåŸºæœ¬æ•°æ®æˆ–å…¶ä»–è¡¨ï¼Œ æŒ‰ç…§æ—¢å®šé¡ºåºç»„æˆçš„å¤§çš„æ•°æ®é›†åˆã€‚è¡¨æ˜¯æœ‰ç»“æ„çš„ï¼Œå®ƒçš„ç»“æ„ä½“ç°åœ¨ï¼šç»„æˆè¡¨çš„æˆåˆ†æ‰€åœ¨çš„ä½ç½®å’Œé¡ºåºéƒ½æ˜¯å·²ç»ä¸¥æ ¼å®šä¹‰å¥½çš„ã€‚ </li></ul><h2 id="é­”æ•°ï¼ˆMagic-Numberï¼‰"><a href="#é­”æ•°ï¼ˆMagic-Numberï¼‰" class="headerlink" title="é­”æ•°ï¼ˆMagic Numberï¼‰"></a>é­”æ•°ï¼ˆMagic Numberï¼‰</h2><p><strong>æ¯ä¸ªClassæ–‡ä»¶çš„å¤´4ä¸ªå­—èŠ‚ç§°ä¸ºé­”æ•°ï¼ˆ0xCAFEBABEï¼‰ï¼Œå®ƒçš„å”¯ä¸€ä½œç”¨æ˜¯ç¡®å®šè¿™ä¸ªæ–‡ä»¶æ˜¯å¦ä¸ºä¸€ä¸ªèƒ½è¢«è™šæ‹Ÿæœºæ¥å—çš„Classæ–‡ä»¶ã€‚</strong></p><p>å¾ˆå¤šæ–‡ä»¶å­˜å‚¨æ ‡å‡†ä¸­éƒ½ä½¿ç”¨é­”æ•°æ¥è¿›è¡Œèº«ä»½è¯†åˆ«ï¼Œ è­¬å¦‚å›¾ç‰‡æ ¼å¼ï¼Œå¦‚gifæˆ–è€…jpegç­‰åœ¨æ–‡ä»¶å¤´ä¸­éƒ½å­˜æœ‰é­”æ•°ã€‚ä½¿ç”¨é­”æ•°è€Œä¸æ˜¯æ‰©å±•åæ¥è¿›è¡Œè¯†åˆ« ä¸»è¦æ˜¯åŸºäºå®‰å…¨æ–¹é¢çš„è€ƒè™‘ï¼Œå› ä¸ºæ–‡ä»¶æ‰©å±•åå¯ä»¥éšæ„åœ°æ”¹åŠ¨ã€‚æ–‡ä»¶æ ¼å¼çš„åˆ¶å®šè€…å¯ä»¥è‡ªç”± åœ°é€‰æ‹©é­”æ•°å€¼ï¼Œåªè¦è¿™ä¸ªé­”æ•°å€¼è¿˜æ²¡æœ‰è¢«å¹¿æ³›é‡‡ç”¨è¿‡åŒæ—¶åˆä¸ä¼šå¼•èµ·æ··æ·†å³å¯ã€‚å¦è¢«å£°æ˜ä¸ºfinalç­‰ã€‚å…·ä½“çš„æ ‡å¿—ä½ä»¥åŠæ ‡å¿—çš„å«ä¹‰ï¼šå¦è¢«å£°æ˜ä¸ºfinalç­‰ã€‚å…·ä½“çš„æ ‡å¿—ä½ä»¥åŠæ ‡å¿—çš„å«ä¹‰ï¼š</p><h2 id="Classæ–‡ä»¶çš„ç‰ˆæœ¬"><a href="#Classæ–‡ä»¶çš„ç‰ˆæœ¬" class="headerlink" title="Classæ–‡ä»¶çš„ç‰ˆæœ¬"></a>Classæ–‡ä»¶çš„ç‰ˆæœ¬</h2><p>ç´§æ¥ç€é­”æ•°çš„4ä¸ªå­—èŠ‚å­˜å‚¨çš„æ˜¯Classæ–‡ä»¶çš„ç‰ˆæœ¬å·ï¼šç¬¬5å’Œç¬¬6ä¸ªå­—èŠ‚æ˜¯æ¬¡ç‰ˆæœ¬å·ï¼ˆ<code>Minor Version</code>ï¼‰ï¼Œç¬¬7å’Œç¬¬8ä¸ªå­—èŠ‚æ˜¯ä¸»ç‰ˆæœ¬å·ï¼ˆ<code>Major Version</code>ï¼‰ã€‚<strong>Javaçš„ç‰ˆæœ¬å·æ˜¯ä»45å¼€å§‹çš„</strong>ï¼ŒJDK 1.1ä¹‹åçš„æ¯ä¸ªJDKå¤§ç‰ˆæœ¬å‘å¸ƒä¸»ç‰ˆæœ¬å·å‘ä¸ŠåŠ 1ï¼ˆJDK 1.0ï½1.1ä½¿ç”¨äº†45.0ï½45.3çš„ ç‰ˆæœ¬å·ï¼‰ï¼Œé«˜ç‰ˆæœ¬çš„JDKèƒ½å‘ä¸‹å…¼å®¹ä»¥å‰ç‰ˆæœ¬çš„Classæ–‡ä»¶ï¼Œä½†ä¸èƒ½è¿è¡Œä»¥åç‰ˆæœ¬çš„Classæ–‡ ä»¶ï¼Œå³ä½¿æ–‡ä»¶æ ¼å¼å¹¶æœªå‘ç”Ÿä»»ä½•å˜åŒ–ï¼Œè™šæ‹Ÿæœºä¹Ÿå¿…é¡»æ‹’ç»æ‰§è¡Œè¶…è¿‡å…¶ç‰ˆæœ¬å·çš„Classæ–‡ä»¶ã€‚</p><p><img src="/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/3.png" alt></p><p>ä»ä¸Šé¢åç¼–è¯‘çš„ç»“æœå¯ä»¥çœ‹åˆ° <code>minor version: 0 major version: 52</code>ï¼Œæˆ–è€…<code>0x34</code>ï¼Œæ­£å¥½52å¯¹åº”äº†jdk1.8ï¼Œ</p><p>æœ€åé¢çš„0ä¸ºæ¬¡ç‰ˆæœ¬å·</p><p> <strong>Classæ–‡ä»¶ç‰ˆæœ¬å·</strong></p><p><img src="/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/4.png" alt></p><h2 id="å¸¸é‡æ± "><a href="#å¸¸é‡æ± " class="headerlink" title="å¸¸é‡æ± "></a>å¸¸é‡æ± </h2><p><a href="Javaè™šæ‹Ÿæœºç¬”è®°-å­—èŠ‚ç æ–‡ä»¶ä¸­çš„å¸¸é‡æ±  | è‘µèŠ±å¦ˆå¦ˆå¼€è¯¾è¾£">Javaè™šæ‹Ÿæœºç¬”è®°-å­—èŠ‚ç æ–‡ä»¶ä¸­çš„å¸¸é‡æ±  | è‘µèŠ±å¦ˆå¦ˆå¼€è¯¾è¾£</a></p><h2 id="è®¿é—®æ ‡å¿—"><a href="#è®¿é—®æ ‡å¿—" class="headerlink" title="è®¿é—®æ ‡å¿—"></a>è®¿é—®æ ‡å¿—</h2><p>åœ¨å¸¸é‡æ± ç»“æŸä¹‹åï¼Œ ç´§æ¥ç€çš„ä¸¤ä¸ªå­—èŠ‚ä»£è¡¨è®¿é—®æ ‡å¿—ï¼ˆ<code>access_flags</code>ï¼‰ ï¼Œ è¿™ä¸ªæ ‡å¿—ç”¨äºè¯†åˆ«ä¸€äº›ç±»æˆ–è€…æ¥å£å±‚æ¬¡çš„è®¿é—®ä¿¡æ¯ï¼Œ åŒ…æ‹¬ï¼š è¿™ä¸ªClassæ˜¯ç±»è¿˜æ˜¯æ¥å£ï¼› æ˜¯å¦å®šä¹‰ä¸º<code>public</code>ç±»å‹ï¼› æ˜¯å¦å®šä¹‰ä¸º<code>abstract</code>ç±»å‹ï¼› å¦‚æœæ˜¯ç±»çš„è¯ï¼Œ æ˜¯å¦è¢«å£°æ˜ä¸º<code>final</code>ç­‰ã€‚å…·ä½“çš„æ ‡å¿—ä½ä»¥åŠæ ‡å¿—çš„å«ä¹‰ï¼š</p><p><img src="/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/3.jpg" alt></p><p><code>00 21</code>ä¸ºæ­¤Classæ–‡ä»¶çš„ä¸€ä¸ªè®¿é—®æ ‡å¿—ç¬¦ï¼ŒæŸ¥çœ‹è®¿é—®è¡¨æ ¼æ²¡æœ‰å€¼ä¸º21çš„æ ‡å¿—ã€‚æ˜¯å› ä¸ºJVMå¹¶ä¸æ˜¯æšä¸¾æ¯ä¸€ä¸ªæ ‡å¿—å€¼ã€‚</p><p><code>0x00 21</code>æ˜¯<code>0x0001</code>å’Œ<code>0x0020</code>çš„å¹¶é›†ï¼Œè¡¨ç¤º<code>ACC_PUBLIC</code>ä¸<code>ACC_SUPER</code></p><h2 id="ç±»ç´¢å¼•ã€-çˆ¶ç±»ç´¢å¼•ä¸æ¥å£ç´¢å¼•é›†åˆ"><a href="#ç±»ç´¢å¼•ã€-çˆ¶ç±»ç´¢å¼•ä¸æ¥å£ç´¢å¼•é›†åˆ" class="headerlink" title="ç±»ç´¢å¼•ã€ çˆ¶ç±»ç´¢å¼•ä¸æ¥å£ç´¢å¼•é›†åˆ"></a>ç±»ç´¢å¼•ã€ çˆ¶ç±»ç´¢å¼•ä¸æ¥å£ç´¢å¼•é›†åˆ</h2><ol><li><p>ç±»ç´¢å¼•(<code>this_class</code>) å’Œçˆ¶ç±»ç´¢å¼•(<code>super_class</code>) éƒ½æ˜¯ä¸€ä¸ª<code>u2</code>ç±»å‹çš„æ•°æ®ï¼Œ è€Œæ¥å£ç´¢å¼•é›†åˆ(<code>interfaces</code>)æ˜¯ä¸€ç»„<code>u2</code>ç±»å‹çš„æ•°æ®çš„é›†åˆï¼Œ <strong>Classæ–‡ä»¶ä¸­ç”±è¿™ä¸‰é¡¹æ•°æ®æ¥ç¡®å®šè¿™ä¸ªç±»çš„ç»§æ‰¿å…³ç³»</strong>ã€‚ <strong>ç±»ç´¢å¼•ç”¨äºç¡®å®šè¿™ä¸ªç±»çš„å…¨é™å®šåï¼Œ çˆ¶ç±»ç´¢å¼•ç”¨äºç¡®å®šè¿™ä¸ªç±»çš„çˆ¶ç±»çš„å…¨é™å®šå</strong>ã€‚ ç”±äºJavaè¯­è¨€ä¸å…è®¸å¤šé‡ç»§æ‰¿ï¼Œ æ‰€ä»¥çˆ¶ç±»ç´¢å¼•åªæœ‰ä¸€ä¸ªï¼Œ é™¤äº†<code>java.lang.Object</code>ä¹‹å¤–ï¼Œ æ‰€æœ‰çš„Javaç±»éƒ½æœ‰çˆ¶ç±»ï¼Œ<strong>å› æ­¤é™¤äº†<code>java.lang.Object</code>å¤–ï¼Œ æ‰€æœ‰Javaç±»çš„çˆ¶ç±»ç´¢å¼•éƒ½ä¸ä¸º0</strong>ã€‚<strong>æ¥å£ç´¢å¼•é›†åˆå°±ç”¨æ¥æè¿°è¿™ä¸ªç±»å®ç°äº†å“ªäº›æ¥å£</strong>ï¼Œ è¿™äº›è¢«å®ç°çš„æ¥å£å°†æŒ‰<code>implements</code>è¯­å¥ï¼ˆ å¦‚æœè¿™ä¸ªç±»æœ¬èº«æ˜¯ä¸€ä¸ªæ¥å£ï¼Œ åˆ™åº”å½“æ˜¯<code>extends</code>è¯­å¥ï¼‰ åçš„æ¥å£é¡ºåºä»å·¦åˆ°å³æ’åˆ—åœ¨æ¥å£ç´¢å¼•é›†åˆä¸­ã€‚</p></li><li><p>ç±»ç´¢å¼•å’Œçˆ¶ç±»ç´¢å¼•å„è‡ªæŒ‡å‘ä¸€ä¸ªç±»å‹<code>ä¸ºCONSTANT_Class_info</code>çš„ç±»æè¿°ç¬¦å¸¸é‡ï¼Œ é€šè¿‡<code>CONSTANT_Class_info</code>ç±»å‹çš„å¸¸é‡ä¸­çš„ç´¢å¼•å€¼å¯ä»¥æ‰¾åˆ°å®šä¹‰åœ¨<code>CONSTANT_Utf8_info</code>ç±»å‹çš„å¸¸é‡ä¸­çš„å…¨é™å®šåå­—ç¬¦ä¸²</p></li><li><p>å¯¹äºæ¥å£ç´¢å¼•é›†åˆï¼Œ å…¥å£çš„ç¬¬ä¸€é¡¹â€”â€”u2ç±»å‹çš„æ•°æ®ä¸ºæ¥å£è®¡æ•°å™¨(<code>interfaces_count</code>) ï¼Œ è¡¨ç¤ºç´¢å¼•è¡¨çš„å®¹é‡ã€‚ å¦‚æœè¯¥ç±»æ²¡æœ‰å®ç°ä»»ä½•æ¥å£ï¼Œ åˆ™è¯¥è®¡æ•°å™¨å€¼ä¸º0ï¼Œåé¢æ¥å£çš„ç´¢å¼•è¡¨ä¸å†å ç”¨ä»»ä½•å­—èŠ‚</p></li></ol><p><code>00 03</code>ä¸ºä¸€ä¸ªç±»ç´¢å¼•ï¼Œé€šè¿‡å¯»æ‰¾<code>utf-8</code>ç±»å‹ç¡®å®šç±»çš„å…¨é™å®šå</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#<span class="number">3</span> = Class              #<span class="number">22</span>            <span class="comment">// indi/greenhat/bCC`ytecode/Test1</span></span><br><span class="line">#<span class="number">22</span> = Utf8               indi/greenhat/bytecode/Test1</span><br></pre></td></tr></table></figure><p><code>00 04</code>æ˜¯ä¸€ä¸ªçˆ¶ç±»ç´¢å¼•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#<span class="number">4</span> = Class              #<span class="number">23</span>            <span class="comment">// java/lang/Object</span></span><br><span class="line">#<span class="number">23</span> = Utf8               java/lang/Object</span><br></pre></td></tr></table></figure><p><code>00 00</code>ä¸ºæ¥å£ç´¢å¼•é›†åˆï¼Œå› ä¸ºå€¼ä¸º0ï¼Œæ‰€ä»¥æ²¡æœ‰åç»­æ¥å£å†…å®¹</p><h2 id="å­—æ®µè¡¨é›†åˆ"><a href="#å­—æ®µè¡¨é›†åˆ" class="headerlink" title="å­—æ®µè¡¨é›†åˆ"></a>å­—æ®µè¡¨é›†åˆ</h2><p>å­—æ®µè¡¨(<code>field_info</code>)ç”¨äºæè¿°æ¥å£æˆ–è€…ç±»ä¸­å£°æ˜çš„å˜é‡ã€‚ å­—æ®µ(<code>field</code>)åŒ…æ‹¬ç±»çº§å˜é‡ä»¥åŠå®ä¾‹çº§å˜é‡ï¼Œ ä½†ä¸åŒ…æ‹¬åœ¨æ–¹æ³•å†…éƒ¨å£°æ˜çš„å±€éƒ¨å˜é‡ã€‚</p><p>å­—æ®µè¡¨çš„ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/5.png" alt></p><h3 id="access-flags"><a href="#access-flags" class="headerlink" title="access_flags"></a>access_flags</h3><p>å­—æ®µä¿®é¥°ç¬¦æ”¾åœ¨<code>access_flags</code>é¡¹ç›®ä¸­ï¼Œ å®ƒä¸ç±»ä¸­çš„<code>access_flags</code>é¡¹ç›®æ˜¯éå¸¸ç±»ä¼¼çš„ï¼Œ éƒ½æ˜¯ä¸€ä¸ª<code>u2</code>çš„æ•°æ®ç±»å‹</p><p>å…¶ä¸­å¯ä»¥è®¾ç½®çš„æ ‡å¿—ä½å’Œå«ä¹‰:</p><p><img src="/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/6.png" alt></p><p>å¾ˆæ˜æ˜¾ï¼Œ åœ¨å®é™…æƒ…å†µä¸­ï¼Œ <code>ACC_PUBLIC</code>ï¼Œ<code>ACC_PRIVATE</code>ï¼Œ<code>ACC_PROTECTED</code>ä¸‰ä¸ªæ ‡å¿—æœ€å¤šåªèƒ½é€‰æ‹©å…¶ä¸€ï¼Œ<code>ACC_FINAL</code>ï¼Œ<code>ACC_VOLATILE</code>ä¸èƒ½åŒæ—¶é€‰æ‹©ã€‚ æ¥å£ä¹‹ä¸­çš„å­—æ®µå¿…é¡»æœ‰<code>ACC_PUBLIC</code>ï¼Œ<code>ACC_STATIC</code>ï¼Œ<code>ACC_FINAL</code>æ ‡å¿—ï¼Œ è¿™äº›éƒ½æ˜¯ç”±Javaæœ¬èº«çš„è¯­è¨€è§„åˆ™æ‰€å†³å®šçš„ã€‚</p><h3 id="name-indexä¸descripor-index"><a href="#name-indexä¸descripor-index" class="headerlink" title="name_indexä¸descripor_index"></a>name_indexä¸descripor_index</h3><p>è·Ÿéš<code>access_flags</code>æ ‡å¿—çš„æ˜¯ä¸¤é¡¹ç´¢å¼•å€¼ï¼š <code>name_index</code>å’Œ<code>descriptor_index</code>ã€‚å®ƒä»¬éƒ½æ˜¯å¯¹å¸¸é‡æ± çš„å¼•ç”¨ï¼Œ <strong>åˆ†åˆ«ä»£è¡¨ç€å­—æ®µçš„ç®€å•åç§°ä»¥åŠå­—æ®µå’Œæ–¹æ³•çš„æè¿°ç¬¦ã€‚</strong></p><p><em>ç®€å•åç§°æ˜¯æŒ‡æ²¡æœ‰ç±»å‹å’Œå‚æ•°ä¿®é¥°çš„æ–¹æ³•æˆ–è€…å­—æ®µåç§°ï¼Œ æ¯”å¦‚ä¸€ä¸ªç±»ä¸­çš„inc()æ–¹æ³•å’Œmå­—æ®µçš„ç®€å•åç§°åˆ†åˆ«æ˜¯<code>inc</code>å’Œ<code>m</code>ã€‚æè¿°ç¬¦å¯ä»¥å‚è€ƒï¼š<a href="Javaè™šæ‹Ÿæœºç¬”è®°-å­—èŠ‚ç æ–‡ä»¶ä¸­çš„å¸¸é‡æ±  | è‘µèŠ±å¦ˆå¦ˆå¼€è¯¾è¾£">Javaè™šæ‹Ÿæœºç¬”è®°-å­—èŠ‚ç æ–‡ä»¶ä¸­çš„å¸¸é‡æ±  | è‘µèŠ±å¦ˆå¦ˆå¼€è¯¾è¾£</a></em></p><h3 id="attribute-count"><a href="#attribute-count" class="headerlink" title="attribute_count"></a>attribute_count</h3><p>åœ¨<code>descriptor_index</code>ä¹‹åè·Ÿéšç€ä¸€ä¸ªå±æ€§è¡¨é›†åˆç”¨äºå­˜å‚¨ä¸€äº›é¢å¤–çš„ä¿¡æ¯ï¼Œ å­—æ®µéƒ½å¯ä»¥åœ¨å±æ€§è¡¨ä¸­æè¿°é›¶è‡³å¤šé¡¹çš„é¢å¤–ä¿¡æ¯ã€‚</p><hr><p><code>00 01</code>è¡¨ç¤ºçš„æ˜¯å±æ€§çš„æ•°é‡ï¼Œè¡¨æ˜åªæœ‰ä¸€ä¸ªå­—æ®µï¼Œç„¶åå¯ä»¥ä»å­—æ®µè¡¨ç»“æ„å‡ºå‘ï¼Œåˆ†æè¿™ä¸ªå­—æ®µçš„ç»“æ„</p><p><code>00 02</code>ä¸º<code>access_flags</code>ï¼Œè¡¨ç¤ºæ˜¯<code>private</code></p><p><code>00 05</code>ä¸º<code>name_index</code>ï¼Œè¡¨ç¤ºçš„æ˜¯<code>a</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#<span class="number">5</span> = Utf8               a</span><br></pre></td></tr></table></figure><p><code>00 06</code>ä¸º<code>descripor_index</code>ï¼Œè¡¨ç¤ºçš„æ˜¯<code>I</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#<span class="number">6</span> = Utf8               I</span><br></pre></td></tr></table></figure><p><code>00 00</code>è¡¨ç¤º<code>attribute_count</code>çš„å€¼ä¸º0</p><h2 id="æ–¹æ³•è¡¨é›†åˆ"><a href="#æ–¹æ³•è¡¨é›†åˆ" class="headerlink" title="æ–¹æ³•è¡¨é›†åˆ"></a>æ–¹æ³•è¡¨é›†åˆ</h2><p>Classæ–‡ä»¶å­˜å‚¨æ ¼å¼ä¸­å¯¹æ–¹æ³•çš„æè¿°ä¸å¯¹å­—æ®µçš„æè¿°å‡ ä¹é‡‡ç”¨äº†å®Œå…¨ä¸€è‡´çš„æ–¹å¼</p><ul><li>æ–¹æ³•è¡¨ç»“æ„ï¼š</li></ul><p><img src="/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/8.png" alt></p><ul><li><code>attribute_info</code>ç»“æ„ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">attribute_info&#123;</span><br><span class="line">    u2 attribute_name_index;  <span class="comment">//å±æ€§åçš„ç´¢å¼•</span></span><br><span class="line">    u4 attribute_length;   <span class="comment">//å±æ€§çš„é•¿åº¦</span></span><br><span class="line">    u1 info[attribute_length];  <span class="comment">//å…·ä½“çš„ä¿¡æ¯</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è®¿é—®æ ‡å¿—ï¼š</li></ul><p><img src="/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/4.jpg" alt></p><hr><p><code>00 03</code>ä¸ºæ–¹æ³•è¡¨çš„æ•°é‡ï¼Œè½¬æ¢ä¸ºåè¿›åˆ¶æœ‰3ä¸ªï¼Œä¹Ÿå°±æ˜¯</p><ol><li><code>getA()</code></li><li><code>setA()</code></li><li>ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„é»˜è®¤æ„é€ æ–¹æ³•</li></ol><p><code>00 01</code>ä¸º<code>ACC_public</code>è®¿é—®æ ‡å¿—</p><p><code>00 07</code>å’Œ<code>00 08</code>ä¸ºå¸¸é‡æ± ç´¢å¼•ï¼Œåˆ†åˆ«è¡¨ç¤º<code>name_index</code>ä¸<code>descripor_index</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#<span class="number">7</span> = Utf8               &lt;init&gt;</span><br><span class="line">#<span class="number">8</span> = Utf8               ()V</span><br></pre></td></tr></table></figure><p><code>00 01</code>ä¸º<code>attribute_count</code>ï¼Œä¹Ÿå°±æ˜¯è¯´å…±æœ‰ä¸€ä¸ªå±æ€§è¡¨</p><p><code>00 09</code>ä¸º<code>attribute_info</code>é‡Œé¢çš„<code>attribute_name_index</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#<span class="number">9</span> = Utf8               Code</span><br></pre></td></tr></table></figure><p>æ–¹æ³•é‡Œçš„Javaä»£ç ï¼Œ ç»è¿‡ç¼–è¯‘å™¨ç¼–è¯‘æˆå­—èŠ‚ç æŒ‡ä»¤åï¼Œ å­˜æ”¾åœ¨æ–¹æ³•å±æ€§è¡¨é›†åˆä¸­ä¸€ä¸ªåä¸º<code>Code</code>çš„å±æ€§é‡Œé¢</p><p>æ¯”å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getA</span><span class="params">()</span></span>;</span><br><span class="line">  descriptor: ()I</span><br><span class="line">  flags: ACC_PUBLIC</span><br><span class="line">  Code:</span><br><span class="line">    stack=<span class="number">1</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">       <span class="number">0</span>: aload_0</span><br><span class="line">       <span class="number">1</span>: getfield      #<span class="number">2</span>                  <span class="comment">// Field a:I</span></span><br><span class="line">       <span class="number">4</span>: ireturn</span><br><span class="line">    LineNumberTable:</span><br><span class="line">      line <span class="number">7</span>: <span class="number">0</span></span><br><span class="line">    LocalVariableTable:</span><br><span class="line">      Start  Length  Slot  Name   Signature</span><br><span class="line">          <span class="number">0</span>       <span class="number">5</span>     <span class="number">0</span>  <span class="keyword">this</span>   Lindi/greenhat/bytecode/Test1;</span><br></pre></td></tr></table></figure><p><code>00 00 00 38</code>ä¸º<code>attribute_length</code>ï¼Œè½¬æ¢ä¸ºåè¿›åˆ¶ä¸º56ï¼Œä¹Ÿå°±æ˜¯è¯´ä¼šç”¨56ä¸ªå­—èŠ‚ä½œä¸º<code>code</code>é‡Œé¢çš„å€¼</p><h3 id="Codeå±æ€§"><a href="#Codeå±æ€§" class="headerlink" title="Codeå±æ€§"></a>Codeå±æ€§</h3><p><strong>Javaç¨‹åºæ–¹æ³•ä½“ä¸­çš„ä»£ç ç»è¿‡<code>Javac</code>ç¼–è¯‘å™¨å¤„ç†åï¼Œ æœ€ç»ˆå˜ä¸ºå­—èŠ‚ç æŒ‡ä»¤å­˜å‚¨åœ¨<code>Code</code>å±æ€§å†…</strong>ã€‚ <code>Code</code>å±æ€§å‡ºç°åœ¨æ–¹æ³•è¡¨çš„å±æ€§é›†åˆä¹‹ä¸­ï¼Œ ä½†å¹¶éæ‰€æœ‰çš„æ–¹æ³•è¡¨éƒ½å¿…é¡»å­˜åœ¨è¿™ä¸ªå±æ€§ï¼Œ è­¬å¦‚æ¥å£æˆ–è€…æŠ½è±¡ç±»ä¸­çš„æ–¹æ³•å°±ä¸å­˜åœ¨<code>Code</code>å±æ€§ï¼Œ å¦‚æœæ–¹æ³•è¡¨æœ‰<code>Code</code>å±æ€§å­˜åœ¨ï¼Œ é‚£ä¹ˆå®ƒçš„ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/5.jpg" alt></p><ul><li><p><code>attribute_name_index</code>æ˜¯ä¸€é¡¹æŒ‡å‘<code>CONSTANT_Utf8_info</code>å‹å¸¸é‡çš„ç´¢å¼•ï¼Œ å¸¸é‡å€¼å›ºå®šä¸º<code>Code</code>ï¼Œ å®ƒä»£è¡¨äº†è¯¥å±æ€§çš„å±æ€§åç§°</p></li><li><p><code>attribute_length</code>æŒ‡ç¤ºäº†å±æ€§å€¼çš„é•¿åº¦ï¼Œ ç”±äºå±æ€§åç§°ç´¢å¼•ä¸å±æ€§é•¿åº¦ä¸€å…±ä¸º6å­—èŠ‚ï¼Œ æ‰€ä»¥å±æ€§å€¼çš„é•¿åº¦å›ºå®šä¸ºæ•´ä¸ªå±æ€§è¡¨é•¿åº¦å‡å»6ä¸ªå­—èŠ‚</p></li><li><p><code>max_stack</code>ä»£è¡¨äº†æ“ä½œæ•°æ ˆ(<code>Operand Stacks</code>)æ·±åº¦çš„æœ€å¤§å€¼ã€‚ åœ¨æ–¹æ³•æ‰§è¡Œçš„ä»»æ„æ—¶åˆ»ï¼Œæ“ä½œæ•°æ ˆéƒ½ä¸ä¼šè¶…è¿‡è¿™ä¸ªæ·±åº¦ã€‚ è™šæ‹Ÿæœºè¿è¡Œçš„æ—¶å€™éœ€è¦æ ¹æ®è¿™ä¸ªå€¼æ¥åˆ†é…æ ˆå¸§(<code>Stack Frame</code>)ä¸­çš„æ“ä½œæ ˆæ·±åº¦</p></li><li><p><code>max_locals</code>ä»£è¡¨äº†å±€éƒ¨å˜é‡è¡¨æ‰€éœ€çš„å­˜å‚¨ç©ºé—´ã€‚</p><p><em>åœ¨è¿™é‡Œï¼Œ <code>max_locals</code>çš„å•ä½æ˜¯<code>Slot</code>,<code>Slot</code>æ˜¯è™šæ‹Ÿæœºä¸ºå±€éƒ¨å˜é‡åˆ†é…å†…å­˜æ‰€ä½¿ç”¨çš„æœ€å°å•ä½ã€‚ å¯¹äº<code>byte</code>ï¼Œ<code>char</code>ï¼Œ<code>float</code>ï¼Œ<code>int</code>ï¼Œ<code>short</code>ï¼Œ<code>boolean</code>å’Œ<code>returnAddress</code>ç­‰é•¿åº¦ä¸è¶…è¿‡32ä½çš„æ•°æ®ç±»å‹ï¼Œ æ¯ä¸ªå±€éƒ¨å˜é‡å ç”¨1ä¸ª<code>Slot</code>ï¼Œ è€Œ<code>double</code>å’Œ<code>long</code>è¿™ä¸¤ç§64ä½çš„æ•°æ®ç±»å‹åˆ™éœ€è¦ä¸¤ä¸ª<code>Slot</code>æ¥å­˜æ”¾</em></p></li><li><p><code>code_length</code>å’Œ<code>code</code>ç”¨æ¥å­˜å‚¨Javaæºç¨‹åºç¼–è¯‘åç”Ÿæˆçš„å­—èŠ‚ç æŒ‡ä»¤ã€‚<code>code_length</code>ä»£è¡¨å­—èŠ‚ç é•¿åº¦ï¼Œ <code>code</code>æ˜¯ç”¨äºå­˜å‚¨å­—èŠ‚ç æŒ‡ä»¤çš„ä¸€ç³»åˆ—å­—èŠ‚æµ</p><p> <em>æ—¢ç„¶å«å­—èŠ‚ç æŒ‡ä»¤ï¼Œ é‚£ä¹ˆæ¯ä¸ªæŒ‡ä»¤å°±æ˜¯ä¸€ä¸ªu1ç±»å‹çš„å•å­—èŠ‚ï¼Œ å½“è™šæ‹Ÿæœºè¯»å–åˆ°codeä¸­çš„ä¸€ä¸ªå­—èŠ‚ç æ—¶ï¼Œ å°±å¯ä»¥å¯¹åº”æ‰¾å‡ºè¿™ä¸ªå­—èŠ‚ç ä»£è¡¨çš„æ˜¯ä»€ä¹ˆæŒ‡ä»¤ï¼Œ å¹¶ä¸”å¯ä»¥çŸ¥é“è¿™æ¡æŒ‡ä»¤åé¢æ˜¯å¦éœ€è¦è·Ÿéšå‚æ•°ï¼Œ ä»¥åŠå‚æ•°åº”å½“å¦‚ä½•ç†è§£</em></p><p><em>å…³äº<code>code_length</code>ï¼Œ æœ‰ä¸€ä»¶å€¼å¾—æ³¨æ„çš„äº‹æƒ…ï¼Œ è™½ç„¶å®ƒæ˜¯ä¸€ä¸ªu4ç±»å‹çš„é•¿åº¦å€¼ï¼Œ ç†è®ºä¸Šæœ€å¤§<br>å€¼å¯ä»¥è¾¾åˆ°<code>2^32-1</code>ï¼Œ ä½†æ˜¯è™šæ‹Ÿæœºè§„èŒƒä¸­æ˜ç¡®é™åˆ¶äº†ä¸€ä¸ªæ–¹æ³•ä¸å…è®¸è¶…è¿‡65535æ¡å­—èŠ‚ç æŒ‡ä»¤ï¼Œ<br>å³å®ƒå®é™…åªä½¿ç”¨äº†u2çš„é•¿åº¦ï¼Œ å¦‚æœè¶…è¿‡è¿™ä¸ªé™åˆ¶ï¼Œ Javacç¼–è¯‘å™¨ä¹Ÿä¼šæ‹’ç»ç¼–è¯‘ã€‚ ä¸€èˆ¬æ¥è®²ï¼Œ ç¼–<br>å†™Javaä»£ç æ—¶åªè¦ä¸æ˜¯åˆ»æ„å»ç¼–å†™ä¸€ä¸ªè¶…é•¿çš„æ–¹æ³•æ¥ä¸ºéš¾ç¼–è¯‘å™¨ï¼Œ æ˜¯ä¸å¤ªå¯èƒ½è¶…è¿‡è¿™ä¸ªæœ€å¤§<br>å€¼çš„é™åˆ¶ã€‚ ä½†æ˜¯ï¼Œ æŸäº›ç‰¹æ®Šæƒ…å†µï¼Œ ä¾‹å¦‚åœ¨ç¼–è¯‘ä¸€ä¸ªå¾ˆå¤æ‚çš„JSPæ–‡ä»¶æ—¶ï¼Œ æŸäº›JSPç¼–è¯‘å™¨ä¼šæŠŠ<br>JSPå†…å®¹å’Œé¡µé¢è¾“å‡ºçš„ä¿¡æ¯å½’å¹¶äºä¸€ä¸ªæ–¹æ³•ä¹‹ä¸­ï¼Œ å°±å¯èƒ½å› ä¸ºæ–¹æ³•ç”Ÿæˆå­—èŠ‚ç è¶…é•¿çš„åŸå› è€Œ<br>å¯¼è‡´ç¼–è¯‘å¤±è´¥</em></p></li><li><p><code>exception_table</code>ç”¨æ¥å­˜æ”¾çš„æ˜¯å¼‚å¸¸å¤„ç†çš„ä¿¡æ¯ï¼Œæ¯ä¸ª<code>exception_table</code>è¡¨é¡¹ç”±<code>start_pc</code>ï¼Œ<code>end_pc</code>ï¼Œ<code>handler_pc</code>ä»¥åŠ<code>catch_type</code>ç»„æˆ</p></li></ul><hr><p>æˆ‘ä»¬å¯ä»¥ç”¨<a href="https://github.com/ingokegel/jclasslib">jclasslib</a>è¿™ä¸ªè½¯ä»¶æ¥å¸®åŠ©æˆ‘ä»¬æŸ¥çœ‹å­—èŠ‚ç </p><p><img src="/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/10.png" alt></p><p>å¯ä»¥çœ‹åˆ°Codeé‡Œé¢å…¶å®æ˜¯ä¸€ç³»åˆ—çš„åŠ©è®°ç¬¦ï¼Œå…¶å¯¹åº”çš„åå…­è¿›åˆ¶ä¸º</p><p><img src="/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/11.png" alt></p><p>ä¹Ÿå°±æ˜¯è¯´<code>0x2A</code>å¯¹åº”çš„å°±æ˜¯<code>aload_0</code></p><p><code>0xB7</code>å¯¹åº”çš„å°±æ˜¯<code>invokespecial</code>ï¼Œåé¢çš„<code>00 01</code>ä»£è¡¨<code>java/lang/Object.&quot;&lt;init&gt;&quot;:()V</code>ï¼Œä¹Ÿå°±æ˜¯<code>invokespecial</code>åé¢æ‰€è¦æ¥å—çš„å‚æ•°å€¼</p><p>å¯¹åº”çš„åŠ©è®°ç¬¦è§£é‡Šï¼ˆæ¥è‡ªã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒ JavaSE8ã€‹ï¼‰</p><p><img src="/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/12.png" alt></p><p><img src="/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/13.png" alt></p><p><img src="/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/14.png" alt></p><p><img src="/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/15.png" alt></p><p><img src="/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/16.png" alt></p><h4 id="LineNumberTableå±æ€§"><a href="#LineNumberTableå±æ€§" class="headerlink" title="LineNumberTableå±æ€§"></a>LineNumberTableå±æ€§</h4><p><code>LineNumberTable</code>å±æ€§ç”¨äºæè¿°Javaæºç è¡Œå·ä¸å­—èŠ‚ç è¡Œå·ï¼ˆ å­—èŠ‚ç çš„åç§»é‡ï¼‰ ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚ å®ƒå¹¶ä¸æ˜¯è¿è¡Œæ—¶å¿…éœ€çš„å±æ€§ï¼Œ ä½†é»˜è®¤ä¼šç”Ÿæˆåˆ°Classæ–‡ä»¶ä¹‹ä¸­</p><p><img src="/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/17.png" alt></p><p><code>line_number_table</code>æ˜¯ä¸€ä¸ªæ•°é‡ä¸º<code>line_number_table_length</code>ï¼Œç±»å‹ä¸º<code>line_number_info</code>çš„é›†<br>åˆï¼Œ <code>line_number_info</code>è¡¨åŒ…æ‹¬äº†<code>start_pc</code>å’Œ<code>line_number</code>ä¸¤ä¸ª<code>u2</code>ç±»å‹çš„æ•°æ®é¡¹ï¼Œ å‰è€…æ˜¯å­—èŠ‚ç è¡Œ<br>å·ï¼Œ åè€…æ˜¯Javaæºç è¡Œå·ã€‚å½“ç¨‹åºè¿è¡ŒæŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œå¼‚å¸¸å †æ ˆä¸­æ˜¾ç¤ºå‡ºé”™çš„è¡Œå·å°±æ˜¯æ ¹æ®è¿™ä¸ªå¯¹åº”å…³ç³»æ¥æ˜¾ç¤ºçš„ã€‚</p><p><img src="/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/18.png" alt></p><h4 id="LocalVariableTableå±æ€§"><a href="#LocalVariableTableå±æ€§" class="headerlink" title="LocalVariableTableå±æ€§"></a>LocalVariableTableå±æ€§</h4><p><code>LocalVariableTable</code>å±æ€§ç”¨äºæè¿°æ ˆå¸§ä¸­å±€éƒ¨å˜é‡è¡¨ä¸­çš„å˜é‡ä¸Javaæºç ä¸­å®šä¹‰çš„å˜é‡ä¹‹é—´çš„å…³ç³»ï¼Œ å®ƒä¹Ÿä¸æ˜¯è¿è¡Œæ—¶å¿…éœ€çš„å±æ€§ï¼Œ ä½†é»˜è®¤ä¼šç”Ÿæˆåˆ°Classæ–‡ä»¶ä¹‹ä¸­</p><p><img src="/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/6.jpg" alt></p><p><code>local_variable_info</code>ç»“æ„:</p><p><img src="/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/19.png" alt></p><ul><li><code>start_pc</code>å’Œ<code>length</code>å±æ€§åˆ†åˆ«ä»£è¡¨äº†è¿™ä¸ªå±€éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸå¼€å§‹åœ°å­—èŠ‚ç åç§»é‡åŠå…¶ä½œç”¨èŒƒå›´è¦†ç›–çš„é•¿åº¦ï¼Œä¸¤è€…ç»“åˆèµ·æ¥å°±æ˜¯è¿™ä¸ªå±€éƒ¨å˜é‡åœ¨å­—èŠ‚ç ä¹‹ä¸­çš„ä½œç”¨åŸŸèŒƒå›´ã€‚</li><li><code>name_index</code>å’Œ<code>descriptor_index</code>éƒ½æ˜¯æŒ‡å‘å¸¸é‡æ± ä¸­<code>CONSTANT_Utf8_info</code>å‹å¸¸é‡çš„ç´¢å¼•ï¼Œåˆ†åˆ«ä»£è¡¨äº†å±€éƒ¨å˜é‡çš„åç§°ä»¥åŠè¿™ä¸ªå±€éƒ¨å˜é‡çš„æè¿°ç¬¦ã€‚</li><li><code>index</code>æ˜¯è¿™ä¸ªå±€éƒ¨å˜é‡åœ¨æ ˆå¸§å±€éƒ¨å˜é‡è¡¨ä¸­<code>Slot</code>çš„ä½ç½®ã€‚å½“è¿™ä¸ªå˜é‡æ•°æ®ç±»å‹æ˜¯ 64ä½ç±»å‹æ—¶ï¼ˆ<code>double</code>å’Œ<code>long</code>ï¼‰ï¼Œä»–å ç”¨çš„<code>Slot</code>ä¸º<code>index</code>å’Œ<code>index+1</code>ä¸¤ä¸ª</li></ul><p><img src="/2019/06/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%A0%BC%E5%BC%8F/20.png" alt></p><p><strong>å¯ä»¥çœ‹åˆ°é»˜è®¤æ„é€ å‡½æ•°æœ‰ä¸€ä¸ªå±€éƒ¨å˜é‡thisï¼Œä»£è¡¨ç±»è‡ªèº«</strong></p><p>å‚è€ƒï¼š</p><p><a href="https://zhuanlan.zhihu.com/p/45003974">Javaè™šæ‹Ÿæœºâ€”Classæ–‡ä»¶ç»“æ„ - çŸ¥ä¹</a></p><p><a href="https://juejin.im/post/5aca2c366fb9a028c97a5609">è½»æ¾çœ‹æ‡‚Javaå­—èŠ‚ç  - æ˜é‡‘</a></p><p><a href="https://blog.nekolr.com/2018/04/18/%E7%B1%BB%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84/">ç±»æ–‡ä»¶ç»“æ„ | nekolrâ€™s blog</a></p><p><a href="https://lijiankun24.com/%E8%AE%A4%E8%AF%86-class-%E6%96%87%E4%BB%B6%E7%9A%84%E5%AD%97%E8%8A%82%E7%A0%81%E7%BB%93%E6%9E%84/">è®¤è¯† .class æ–‡ä»¶çš„å­—èŠ‚ç ç»“æ„ | ä¸€äº›æ— å¤„å®‰æ”¾çš„ä»£ç å’Œæ•…äº‹</a></p><p><a href="https://yq.aliyun.com/articles/640924">Java Classæ–‡ä»¶ç»“æ„è§£æ-äº‘æ –ç¤¾åŒº-é˜¿é‡Œäº‘</a></p><p>ã€Šæ·±å…¥ç†è§£javaè™šæ‹Ÿæœºï¼ˆç¬¬äºŒç‰ˆ å‘¨å¿—æ˜ï¼‰ã€‹</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jvm </tag>
            
            <tag> å­—èŠ‚ç  </tag>
            
            <tag> å¸¸é‡æ±  </tag>
            
            <tag> classæ–‡ä»¶ç»“æ„ </tag>
            
            <tag> å­—æ®µè¡¨ </tag>
            
            <tag> æ–¹æ³•è¡¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè™šæ‹Ÿæœºç¬”è®°-JDBCé©±åŠ¨åŠ è½½æœºåˆ¶</title>
      <link href="/2019/06/21/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-JDBC%E9%A9%B1%E5%8A%A8%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6/"/>
      <url>/2019/06/21/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-JDBC%E9%A9%B1%E5%8A%A8%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<p> é€šè¿‡JDBCé©±åŠ¨åŠ è½½ç†è§£çº¿ç¨‹ä¸Šä¸‹æ–‡åŠ è½½å™¨</p><span id="more"></span><h1 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h1><p><code>JDBC</code>æä¾›äº†ç‹¬ç«‹äºæ•°æ®åº“çš„ç»Ÿä¸€<code>API</code>ï¼Œ<code>MySQL</code>ï¼Œ<code>Oracle</code>ç­‰æ•°æ®åº“å…¬å¸éƒ½å¯ä»¥åŸºäºè¿™ä¸ªæ ‡å‡†æ¥å£æ¥è¿›è¡Œå¼€å‘ã€‚åŒ…æ‹¬<code>java .sql</code>åŒ…ä¸‹çš„<code>Driver</code>ï¼Œ<code>Connection</code>ï¼Œ<code>Statement</code>ï¼Œ<code>ResultSet</code>æ˜¯<code>JDBC</code>æä¾›çš„æ¥å£ã€‚è€Œ<code>DriverManager</code>æ˜¯ç”¨äºç®¡ç†<code>JDBC</code>é©±åŠ¨çš„æœåŠ¡ç±»ï¼Œä¸»è¦ç”¨äºè·å–<code>Connection</code>å¯¹è±¡ï¼ˆæ­¤ç±»ä¸­å…¨æ˜¯é™æ€æ–¹æ³•ï¼‰</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„jdbcè¿æ¥æ•°æ®åº“è¿‡ç¨‹ã€‚é‡ç‚¹ä¸åœ¨èƒ½ä¸èƒ½è¿æ¥ï¼Œè€Œæ˜¯å…¶åŠ è½½è¿‡ç¨‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">        String url = <span class="string">&quot;jdbc:mysql://localhost:3306/mytest&quot;</span>;</span><br><span class="line">        Connection connection = DriverManager.getConnection(</span><br><span class="line">                url, <span class="string">&quot;username&quot;</span>, <span class="string">&quot;password&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Class-forName"><a href="#Class-forName" class="headerlink" title="Class.forName"></a>Class.forName</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br></pre></td></tr></table></figure><ol><li>æŸ¥çœ‹<code>forName</code></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿”å›ä¸å…·æœ‰ç»™å®šå­—ç¬¦ä¸²åç§°çš„ç±»æˆ–æ¥å£å…³è”çš„Classå¯¹è±¡ã€‚</span></span><br><span class="line"><span class="comment"> * è°ƒç”¨æ­¤æ–¹æ³•ç­‰æ•ˆäºï¼šClass.forNameï¼ˆclassNameï¼Œtrueï¼ŒcurrentLoaderï¼‰</span></span><br><span class="line"><span class="comment"> * å…¶ä¸­currentLoaderè¡¨ç¤ºå½“å‰ç±»çš„å®šä¹‰ç±»åŠ è½½å™¨ã€‚</span></span><br><span class="line"><span class="comment"> * @ param className æ‰€éœ€ç±»çš„å®Œå…¨é™å®šåç§°</span></span><br><span class="line"><span class="comment"> * @ return å…·æœ‰æŒ‡å®šåç§°çš„ç±»çš„Classå¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Class&lt;?&gt; forName(String className)</span><br><span class="line">                <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">        Class&lt;?&gt; caller = Reflection.getCallerClass();</span><br><span class="line">        <span class="keyword">return</span> forName0(className, <span class="keyword">true</span>, ClassLoader.getClassLoader(caller), caller);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ol><li>æŸ¥çœ‹<code>forName0</code>ï¼Œå…¶æ˜¯ä¸€ä¸ª<code>native</code>æ–¹æ³•</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">native</span> Class&lt;?&gt; forName0(String name, <span class="keyword">boolean</span> initialize,</span><br><span class="line">                                            ClassLoader loader,</span><br><span class="line">                                            Class&lt;?&gt; caller)</span><br><span class="line">        <span class="keyword">throws</span> ClassNotFoundException;</span><br></pre></td></tr></table></figure><h1 id="com-mysql-cj-jdbc-Driver"><a href="#com-mysql-cj-jdbc-Driver" class="headerlink" title="com.mysql.cj.jdbc.Driver"></a>com.mysql.cj.jdbc.Driver</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Driver</span> <span class="keyword">extends</span> <span class="title">NonRegisteringDriver</span> <span class="keyword">implements</span> <span class="title">java</span>.<span class="title">sql</span>.<span class="title">Driver</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Driver</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä½¿ç”¨DriverManageræ³¨å†Œè‡ªå·±</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            DriverManager.registerDriver(<span class="keyword">new</span> Driver());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException var1) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;Can&#x27;t register driver!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»ä¸Šè¾¹å¯ä»¥çœ‹åˆ°ï¼Œå®ƒæ˜¯ç”¨é™æ€ä»£ç å—å®ç°çš„ã€‚æ ¹æ®ç±»åŠ è½½æœºåˆ¶ï¼Œå½“æ‰§è¡Œ<code>Class.forName(driverClass)</code>è·å–å…¶<code>Class</code>å¯¹è±¡æ—¶ï¼Œ<code>com.mysql.jdbc.Driver</code>å°±ä¼šè¢«<code>JVM</code>åŠ è½½è¿æ¥ï¼Œå¹¶è¿›è¡Œåˆå§‹åŒ–ï¼Œåˆå§‹åŒ–å°±ä¼šæ‰§è¡Œé™æ€ä»£ç å—ï¼Œä¹Ÿå°±ä¼šæ‰§è¡Œä¸‹è¾¹è¿™å¥ä»£ç ï¼š</p><p><code>DriverManager.registerDriver(new Driver());</code></p><p>è¿™é‡Œä¼šæ³¨å†Œé©±åŠ¨ï¼Œè°ƒç”¨çš„æ˜¯<code>DriverManager</code>çš„<code>registerDriver</code>æ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨ä¹‹å‰ï¼Œä¹Ÿä¼šåˆå§‹åŒ–<code>DriverManager</code>ç±»ã€‚</p><h2 id="DriverManager"><a href="#DriverManager" class="headerlink" title="DriverManager"></a>DriverManager</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DriverManager</span></span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">//é€šè¿‡æ£€æŸ¥Systemå±æ€§jdbc.propertiesåŠ è½½åˆå§‹JDBCé©±åŠ¨ç¨‹åºï¼Œç„¶åä½¿ç”¨ServiceLoaderæœºåˆ¶</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        loadInitialDrivers();</span><br><span class="line">        println(<span class="string">&quot;JDBC DriverManager initialized&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>DriverManager</code>ç±»æœ‰ä¸€ä¸ªé™æ€ä»£ç å—ï¼Œä¼šåœ¨åˆå§‹åŒ–çš„æ—¶å€™æ‰§è¡Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">loadInitialDrivers</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String drivers;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            drivers = AccessController.doPrivileged(<span class="keyword">new</span> PrivilegedAction&lt;String&gt;() &#123;</span><br><span class="line">                <span class="function"><span class="keyword">public</span> String <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> System.getProperty(<span class="string">&quot;jdbc.drivers&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">            drivers = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="comment">// å¦‚æœé©±åŠ¨ç¨‹åºæ‰“åŒ…ä¸ºæœåŠ¡æä¾›ç¨‹åºï¼Œè¯·åŠ è½½å®ƒ</span></span><br><span class="line">        <span class="comment">// é€šè¿‡ä½œä¸ºjava.sql.Driver.classæœåŠ¡å…¬å¼€çš„ç±»åŠ è½½å™¨è·å–æ‰€æœ‰é©±åŠ¨ç¨‹åºã€‚</span></span><br><span class="line">        <span class="comment">// ServiceLoader.loadï¼ˆï¼‰æ›¿æ¢äº†sun.misc.Providersï¼ˆï¼‰</span></span><br><span class="line">        AccessController.doPrivileged(<span class="keyword">new</span> PrivilegedAction&lt;Void&gt;() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> Void <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">                ServiceLoader&lt;Driver&gt; loadedDrivers = ServiceLoader.load(Driver.class);</span><br><span class="line">                Iterator&lt;Driver&gt; driversIterator = loadedDrivers.iterator();</span><br><span class="line"></span><br><span class="line">                <span class="comment">/* </span></span><br><span class="line"><span class="comment">                 * It may be the case that the driver class may not be there</span></span><br><span class="line"><span class="comment">                 * i.e. there may be a packaged driver with the service class</span></span><br><span class="line"><span class="comment">                 * as implementation of java.sql.Driver but the actual class</span></span><br><span class="line"><span class="comment">                 * may be missing. In that case a java.util.ServiceConfigurationError</span></span><br><span class="line"><span class="comment">                 * will be thrown at runtime by the VM trying to locate</span></span><br><span class="line"><span class="comment">                 * and load the service.</span></span><br><span class="line"><span class="comment">                 *</span></span><br><span class="line"><span class="comment">                 * Adding a try catch block to catch those runtime errors</span></span><br><span class="line"><span class="comment">                 * if driver not available in classpath but it&#x27;s</span></span><br><span class="line"><span class="comment">                 * packaged as service and that service is there in classpath.</span></span><br><span class="line"><span class="comment">                 */</span></span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    <span class="keyword">while</span>(driversIterator.hasNext()) &#123;</span><br><span class="line">                        driversIterator.next();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span>(Throwable t) &#123;</span><br><span class="line">                <span class="comment">// Do nothing</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        println(<span class="string">&quot;DriverManager.initialize: jdbc.drivers = &quot;</span> + drivers);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (drivers == <span class="keyword">null</span> || drivers.equals(<span class="string">&quot;&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        String[] driversList = drivers.split(<span class="string">&quot;:&quot;</span>);</span><br><span class="line">        println(<span class="string">&quot;number of Drivers:&quot;</span> + driversList.length);</span><br><span class="line">        <span class="keyword">for</span> (String aDriver : driversList) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                println(<span class="string">&quot;DriverManager.Initialize: loading &quot;</span> + aDriver);</span><br><span class="line">                Class.forName(aDriver, <span class="keyword">true</span>,</span><br><span class="line">                        ClassLoader.getSystemClassLoader());</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">                println(<span class="string">&quot;DriverManager.Initialize: load failed: &quot;</span> + ex);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>balabalaå¤§åŠå¤©æ„æ€å°±æ˜¯è¯´å¦‚æœ<code>jdbc.drivers</code>è¿™ä¸ªç³»ç»Ÿå±æ€§ä¸ºç©ºï¼Œåˆ™ä¼šç”¨ServerLoaderæœºåˆ¶å»åŠ è½½jdbcé©±åŠ¨ã€‚</p><p><code>ServiceLoader&lt;Driver&gt; loadedDrivers = ServiceLoader.load(Driver.class);</code>ä¼šåŠ è½½æ‰€æœ‰åœ¨<code>META-INF/services/java.sql.Driver</code>æ–‡ä»¶é‡Œè¾¹çš„ç±»åˆ°JVMå†…å­˜ï¼Œå®Œæˆé©±åŠ¨çš„è‡ªåŠ¨åŠ è½½ï¼Œä¹Ÿå°±æˆ‘ä»¬è®²çš„<code>ServiceLoader</code>åŠ è½½JDBCé©±åŠ¨æœºåˆ¶</p><p>è¿™ä¸ªè‡ªåŠ¨åŠ è½½é‡‡ç”¨çš„æŠ€æœ¯å«åš<code>SPI</code>ï¼Œ<strong>åœ¨JDBC 4.0ä¹‹åå®é™…ä¸Šæˆ‘ä»¬ä¸éœ€è¦å†è°ƒç”¨<code>Class.forName</code>æ¥åŠ è½½é©±åŠ¨ç¨‹åºäº†ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠé©±åŠ¨çš„jaråŒ…æ”¾åˆ°å·¥ç¨‹çš„ç±»åŠ è½½è·¯å¾„é‡Œï¼Œé‚£ä¹ˆé©±åŠ¨å°±ä¼šè¢«è‡ªåŠ¨åŠ è½½</strong></p><p>è¿™å°±æ˜¯<code>SPI</code>çš„ä¼˜åŠ¿æ‰€åœ¨ï¼Œèƒ½å¤Ÿè‡ªåŠ¨çš„åŠ è½½ç±»åˆ°JVMå†…å­˜ã€‚è¿™ä¸ªæŠ€æœ¯åœ¨é˜¿é‡Œçš„<code>dubbo</code>æ¡†æ¶é‡Œé¢ä¹Ÿå åˆ°äº†å¾ˆå¤§çš„åˆ†é‡ã€‚</p><h2 id="registerDriver"><a href="#registerDriver" class="headerlink" title="registerDriver"></a>registerDriver</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨DriverManageræ³¨å†Œç»™å®šçš„é©±åŠ¨ç¨‹åºã€‚ </span></span><br><span class="line"><span class="comment"> * æ–°åŠ è½½çš„é©±åŠ¨ç¨‹åºç±»åº”è°ƒç”¨æ–¹æ³•registerDriverä½¿å…¶è‡ªèº«ä¸ºDriverManageræ‰€çŸ¥ã€‚ </span></span><br><span class="line"><span class="comment"> * å¦‚æœé©±åŠ¨ç¨‹åºå½“å‰å·²æ³¨å†Œï¼Œåˆ™ä¸æ‰§è¡Œä»»ä½•æ“ä½œã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> driver è¦åœ¨DriverManagerä¸­æ³¨å†Œçš„æ–°JDBCé©±åŠ¨ç¨‹åº</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">registerDriver</span><span class="params">(java.sql.Driver driver)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">        registerDriver(driver, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><code>registerDriver(driver, null);</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">registerDriver</span><span class="params">(java.sql.Driver driver,</span></span></span><br><span class="line"><span class="params"><span class="function">            DriverAction da)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœå®ƒè¿˜æ²¡æœ‰è¢«æ·»åŠ åˆ°é©±åŠ¨çš„åˆ—è¡¨,åˆ™æ³¨å†Œé©±åŠ¨ç¨‹åº</span></span><br><span class="line">        <span class="keyword">if</span>(driver != <span class="keyword">null</span>) &#123;</span><br><span class="line">            registeredDrivers.addIfAbsent(<span class="keyword">new</span> DriverInfo(driver, da));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// This is for compatibility with the original DriverManager</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        println(<span class="string">&quot;registerDriver: &quot;</span> + driver);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé©±åŠ¨åˆ—è¡¨å®šä¹‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å·²æ³¨å†ŒJDBCé©±åŠ¨ç¨‹åºåˆ—è¡¨</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> CopyOnWriteArrayList&lt;DriverInfo&gt; registeredDrivers = <span class="keyword">new</span> CopyOnWriteArrayList&lt;&gt;();</span><br></pre></td></tr></table></figure><h1 id="DriverManager-getConnection"><a href="#DriverManager-getConnection" class="headerlink" title="DriverManager.getConnection"></a>DriverManager.getConnection</h1><p>æˆ‘ä»¬åŠ è½½å®Œé©±åŠ¨åå°±å¯ä»¥è¿æ¥æ•°æ®åº“ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶æ²¡æœ‰çœ‹åˆ°mysqlç›¸å…³ä¿¡æ¯ï¼Œæ¥ç€æˆ‘ä»¬çœ‹ä¸‹<code>getConnection</code>æ–¹æ³•ï¼Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å°è¯•å»ºç«‹åˆ°ç»™å®šæ•°æ®åº“URLçš„è¿æ¥ã€‚</span></span><br><span class="line"><span class="comment"> * é©±åŠ¨ç¨‹åºç®¡ç†å™¨å°è¯•ä»å·²æ³¨å†Œçš„JDBCé©±åŠ¨ç¨‹åºé›†ä¸­é€‰æ‹©é€‚å½“çš„é©±åŠ¨ç¨‹åºã€‚</span></span><br><span class="line"><span class="comment"> * æ³¨æ„:å¦‚æœuseræˆ–passwordå±æ€§ä¹ŸæŒ‡å®šä¸ºurlçš„ä¸€éƒ¨åˆ†ï¼Œåˆ™å®ç°å®šä¹‰ä¸ºå“ªä¸ªå€¼ä¼˜å…ˆã€‚</span></span><br><span class="line"><span class="comment"> * ä¸ºäº†è·å¾—æœ€å¤§çš„å¯ç§»æ¤æ€§ï¼Œåº”ç”¨ç¨‹åºåº”è¯¥åªæŒ‡å®šä¸€ä¸ªå±æ€§ä¸€æ¬¡ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">(String url,</span></span></span><br><span class="line"><span class="params"><span class="function">        String user, String password)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        java.util.Properties info = <span class="keyword">new</span> java.util.Properties();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (user != <span class="keyword">null</span>) &#123;</span><br><span class="line">            info.put(<span class="string">&quot;user&quot;</span>, user);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (password != <span class="keyword">null</span>) &#123;</span><br><span class="line">            info.put(<span class="string">&quot;password&quot;</span>, password);</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//Reflection.getCallerClass():è°ƒç”¨è€…çš„ç±»åŠ è½½å™¨å®ä¾‹ï¼Œåœ¨æœ¬ç¨‹åºä¸­å³mainçš„ç±»åŠ è½½å™¨</span></span><br><span class="line">        <span class="keyword">return</span> (getConnection(url, info, Reflection.getCallerClass()));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€ä¼šå‘ç°ä¼šå»è°ƒç”¨getConnectionä¸‰ä¸ªå‚æ•°çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">        String url, java.util.Properties info, Class&lt;?&gt; caller)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å½“callerClä¸ºnullæ—¶ï¼Œæˆ‘ä»¬åº”æ£€æŸ¥åº”ç”¨ç¨‹åºï¼ˆé—´æ¥è°ƒç”¨æ­¤ç±»ï¼‰ç±»åŠ è½½å™¨ï¼Œ</span></span><br><span class="line"><span class="comment">     * ä»¥ä¾¿å¯ä»¥ä»æ­¤å¤„åŠ è½½rt.jarå¤–éƒ¨çš„JDBCé©±åŠ¨ç¨‹åºç±»ã€‚</span></span><br><span class="line"><span class="comment">     * ä»è¿™ä¸ªç®€å•ç¨‹åºæ¥çœ‹ï¼Œè¿™ä¸ªcallerå…¶å®æ˜¯ç³»ç»Ÿç±»åŠ è½½å™¨ï¼Œå› ä¸ºmainç±»çš„åŠ è½½å™¨å°±æ˜¯ç³»ç»Ÿç±»åŠ è½½å™¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">        ClassLoader callerCL = caller != <span class="keyword">null</span> ? caller.getClassLoader() : <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">synchronized</span>(DriverManager.class) &#123;</span><br><span class="line">            <span class="comment">// åŒæ­¥åŠ è½½æ­£ç¡®çš„ç±»åŠ è½½å™¨</span></span><br><span class="line">     <span class="comment">// å¦‚æœä¸ºæ ¹ç±»åŠ è½½å™¨çš„è¯ï¼Œåˆ™ä¼šè¿”å›å½“å‰çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨</span></span><br><span class="line">            <span class="keyword">if</span> (callerCL == <span class="keyword">null</span>) &#123;</span><br><span class="line">                callerCL = Thread.currentThread().getContextClassLoader();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">...</span><br><span class="line"><span class="comment">//DriverInfo:å·²æ³¨å†Œé©±åŠ¨ç¨‹åºçš„åŒ…è£…ç±»</span></span><br><span class="line">        <span class="keyword">for</span>(DriverInfo aDriver : registeredDrivers) &#123;</span><br><span class="line"><span class="comment">//å¦‚æœè°ƒç”¨è€…æ²¡æœ‰åŠ è½½é©±åŠ¨ç¨‹åºçš„æƒé™ï¼Œåˆ™è·³è¿‡å®ƒã€‚</span></span><br><span class="line">            <span class="keyword">if</span>(isDriverAllowed(aDriver.driver, callerCL)) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    println(<span class="string">&quot;    trying &quot;</span> + aDriver.driver.getClass().getName());</span><br><span class="line">                    Connection con = aDriver.driver.connect(url, info);</span><br><span class="line">                    <span class="keyword">if</span> (con != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        <span class="comment">// Success!</span></span><br><span class="line">                        println(<span class="string">&quot;getConnection returning &quot;</span> + aDriver.driver.getClass().getName());</span><br><span class="line">                        <span class="keyword">return</span> (con);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException ex) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (reason == <span class="keyword">null</span>) &#123;</span><br><span class="line">                        reason = ex;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                println(<span class="string">&quot;    skipping: &quot;</span> + aDriver.getClass().getName());</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">...</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªé¡¹ç›®é‡Œè¾¹å¾ˆå¯èƒ½ä¼šå³è¿æ¥MySQLï¼Œåˆè¿æ¥Oracleï¼Œè¿™æ ·åœ¨ä¸€ä¸ªå·¥ç¨‹é‡Œè¾¹å°±å­˜åœ¨äº†å¤šä¸ªé©±åŠ¨ç±»ï¼Œé‚£ä¹ˆè¿™äº›é©±åŠ¨ç±»åˆæ˜¯æ€ä¹ˆåŒºåˆ†çš„å‘¢ï¼Ÿ</p><p>å…³é”®ç‚¹å°±åœ¨äº<code>getConnection</code>çš„æ­¥éª¤ï¼Œ<code>DriverManager.getConnection</code>ä¸­ä¼šéå†æ‰€æœ‰å·²ç»åŠ è½½çš„é©±åŠ¨å®ä¾‹å»åˆ›å»ºè¿æ¥ï¼Œå½“ä¸€ä¸ªé©±åŠ¨åˆ›å»ºè¿æ¥æˆåŠŸæ—¶å°±ä¼šè¿”å›è¿™ä¸ªè¿æ¥ï¼ŒåŒæ—¶ä¸å†è°ƒç”¨å…¶ä»–çš„é©±åŠ¨å®ä¾‹ã€‚å¦‚ä¸Šé¢</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(DriverInfo aDriver : registeredDrivers)&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ˜¯ä¸æ˜¯æ¯ä¸ªé©±åŠ¨å®ä¾‹éƒ½çœŸçœŸå®å®çš„è¦å°è¯•å»ºç«‹è¿æ¥å‘¢ï¼Ÿä¸æ˜¯çš„ï¼</p><p>æ¯ä¸ªé©±åŠ¨å®ä¾‹åœ¨getConnetionçš„ç¬¬ä¸€æ­¥å°±æ˜¯æŒ‰ç…§urlåˆ¤æ–­æ˜¯ä¸æ˜¯ç¬¦åˆè‡ªå·±çš„å¤„ç†è§„åˆ™ï¼Œæ˜¯çš„è¯æ‰ä¼šå’Œdbå»ºç«‹è¿æ¥ã€‚æ¯”å¦‚ï¼ŒMySQLé©±åŠ¨ç±»ä¸­çš„å…³é”®ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">acceptsURL</span><span class="params">(String url)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (parseURL(url, <span class="keyword">null</span>) != <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Properties <span class="title">parseURL</span><span class="params">(String url, Properties defaults)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> java.sql.SQLException </span>&#123;</span><br><span class="line">        Properties urlProps = (defaults != <span class="keyword">null</span>) ? <span class="keyword">new</span> Properties(defaults)</span><br><span class="line">                : <span class="keyword">new</span> Properties();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (url == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!StringUtils.startsWithIgnoreCase(url, URL_PREFIX)</span><br><span class="line">                &amp;&amp; !StringUtils.startsWithIgnoreCase(url, MXJ_URL_PREFIX)</span><br><span class="line">                &amp;&amp; !StringUtils.startsWithIgnoreCase(url,</span><br><span class="line">                        LOADBALANCE_URL_PREFIX)</span><br><span class="line">                &amp;&amp; !StringUtils.startsWithIgnoreCase(url,</span><br><span class="line">                        REPLICATION_URL_PREFIX)) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><hr><p>å‚è€ƒï¼š</p><p><a href="https://www.mygu.club/java-dyna-load-db-drv.html">JavaåŠ¨æ€åŠ è½½æ•°æ®åº“é©±åŠ¨ | Mingyuâ€™s Blog | æˆ‘è’åºŸçš„ä»Šæ—¥ï¼Œæ­£æ˜¯æ˜¨å¤©æ®’èº«ä¹‹äººç¥ˆæ±‚çš„æ˜æ—¥</a></p><p><a href="http://www.voidcn.com/article/p-gqtpvojz-bro.html">JDBCé©±åŠ¨åŠ è½½æœºåˆ¶ - ç¨‹åºå›­</a></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
            <tag> jvm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysqlå¤–é”®ä¸çº§è”æ“ä½œ</title>
      <link href="/2019/06/20/Mysql%E5%A4%96%E9%94%AE%E4%B8%8E%E7%BA%A7%E8%81%94%E6%93%8D%E4%BD%9C/"/>
      <url>/2019/06/20/Mysql%E5%A4%96%E9%94%AE%E4%B8%8E%E7%BA%A7%E8%81%94%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<p>å¤–é”®ä¸çº§è”æ›´æ–°åˆ é™¤</p><span id="more"></span><p>ä¹‹å‰æ²¡ç”¨è¿‡å¤–é”®ä¸çº§è”æ›´æ–°ï¼Œæ‰€ä»¥æ€»ç»“ä¸€ä¸‹ï¼Œç”¨çš„æ•°æ®åº“ç‰ˆæœ¬ï¼š</p><p><code>mysql  Ver 8.0.15 for linux-glibc2.12 on x86_64 (MySQL Community Server - GPL)</code></p><hr><h1 id="å¤–é”®"><a href="#å¤–é”®" class="headerlink" title="å¤–é”®"></a>å¤–é”®</h1><h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p><strong>å¤–é”®ï¼ˆforeign keyï¼‰</strong> æ˜¯ç”¨äºå»ºç«‹å’ŒåŠ å¼ºä¸¤ä¸ªè¡¨æ•°æ®ä¹‹é—´çš„é“¾æ¥çš„ä¸€åˆ—æˆ–å¤šåˆ—ã€‚å¤–é”®çº¦æŸä¸»è¦ç”¨æ¥ç»´æŠ¤ä¸¤ä¸ªè¡¨ä¹‹é—´æ•°æ®çš„ä¸€è‡´æ€§ã€‚ç®€è¨€ä¹‹ï¼Œè¡¨çš„å¤–é”®å°±æ˜¯å¦ä¸€è¡¨çš„ä¸»é”®ï¼Œå¤–é”®å°†ä¸¤è¡¨è”ç³»èµ·æ¥ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¦åˆ é™¤ä¸€å¼ è¡¨ä¸­çš„ä¸»é”®å¿…é¡»é¦–å…ˆè¦ç¡®ä¿å…¶å®ƒè¡¨ä¸­çš„æ²¡æœ‰ç›¸åŒå¤–é”®ï¼ˆå³è¯¥è¡¨ä¸­çš„ä¸»é”®æ²¡æœ‰ä¸€ä¸ªå¤–é”®å’Œå®ƒç›¸å…³è”ï¼‰ã€‚</p><p>MySQLæœ‰ä¸¤ç§å¸¸ç”¨çš„å¼•æ“ç±»å‹ï¼š<code>MyISAM</code>å’Œ<code>InnoDB</code>ã€‚ç›®å‰åªæœ‰<code>InnoDB</code>å¼•æ“ç±»å‹æ”¯æŒå¤–é”®çº¦æŸã€‚</p><p>å¤–é”®çš„å¥½å¤„ï¼šå¯ä»¥ä½¿å¾—ä¸¤å¼ è¡¨å…³è”ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®ç°ä¸€äº›çº§è”æ“ä½œï¼›</p><h2 id="å¤–é”®æœ¯è¯­"><a href="#å¤–é”®æœ¯è¯­" class="headerlink" title="å¤–é”®æœ¯è¯­"></a>å¤–é”®æœ¯è¯­</h2><ul><li>å¤–é”®çº¦æŸ</li><li>å¤–é”®å­—æ®µï¼šæŸä¸ªå­—æ®µæ·»åŠ å¤–é”®çº¦æŸä¹‹åï¼Œè¯¥å­—æ®µç§°ä¸ºå¤–é”®å­—æ®µ</li><li>å¤–é”®å€¼ï¼šå¤–é”®å­—æ®µä¸­çš„æ¯ä¸€ä¸ªæ•°æ®éƒ½æ˜¯å¤–é”®å€¼</li></ul><h2 id="å…·ä½“å®ä¾‹"><a href="#å…·ä½“å®ä¾‹" class="headerlink" title="å…·ä½“å®ä¾‹"></a>å…·ä½“å®ä¾‹</h2><p>ä»€ä¹ˆï¼Ÿçœ‹å®Œå®šä¹‰è¿˜ä¸çŸ¥é“æ˜¯ä»€ä¹ˆï¼Ÿé‚£å°±è¯•è¯•çœ‹ä¸‹é¢å’¯</p><hr><p>å½“æˆ‘ä»¬ç”¨ä¸»é”®å”¯ä¸€æ ‡è¯†è®°å½•æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨<code>students</code>è¡¨ä¸­ç¡®å®šä»»æ„ä¸€ä¸ªå­¦ç”Ÿçš„è®°å½•ï¼š</p><div class="table-container"><table><thead><tr><th>id</th><th>name</th></tr></thead><tbody><tr><td>1</td><td>å°æ˜</td></tr><tr><td>2</td><td>å°çº¢</td></tr></tbody></table></div><p>æˆ‘ä»¬è¿˜å¯ä»¥åœ¨<code>classes</code>è¡¨ä¸­ç¡®å®šä»»æ„ä¸€ä¸ªç­çº§è®°å½•ï¼š</p><div class="table-container"><table><thead><tr><th>id</th><th>name</th></tr></thead><tbody><tr><td>1</td><td>ä¸€ç­</td></tr><tr><td>2</td><td>äºŒç­</td></tr></tbody></table></div><p>ä½†æ˜¯æˆ‘ä»¬å¦‚ä½•ç¡®å®š<code>students</code>è¡¨çš„ä¸€æ¡è®°å½•ï¼Œä¾‹å¦‚ï¼Œ<code>id=1</code>çš„å°æ˜ï¼Œå±äºå“ªä¸ªç­çº§å‘¢ï¼Ÿ</p><p>ç”±äºä¸€ä¸ªç­çº§å¯ä»¥æœ‰å¤šä¸ªå­¦ç”Ÿï¼Œåœ¨å…³ç³»æ¨¡å‹ä¸­ï¼Œè¿™ä¸¤ä¸ªè¡¨çš„å…³ç³»å¯ä»¥ç§°ä¸ºâ€œä¸€å¯¹å¤šâ€ï¼Œå³ä¸€ä¸ª<code>classes</code>çš„è®°å½•å¯ä»¥å¯¹åº”å¤šä¸ª<code>students</code>è¡¨çš„è®°å½•ã€‚</p><p>ä¸ºäº†è¡¨è¾¾è¿™ç§ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œæˆ‘ä»¬éœ€è¦åœ¨<code>students</code>è¡¨ä¸­åŠ å…¥ä¸€åˆ—<code>class_id</code>ï¼Œè®©å®ƒçš„å€¼ä¸<code>classes</code>è¡¨çš„æŸæ¡è®°å½•ç›¸å¯¹åº”ï¼š</p><div class="table-container"><table><thead><tr><th>id</th><th>class_id</th><th>name</th></tr></thead><tbody><tr><td>1</td><td>1</td><td>å°æ˜</td></tr><tr><td>2</td><td>1</td><td>å°çº¢</td></tr><tr><td>5</td><td>2</td><td>å°ç™½</td></tr></tbody></table></div><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®<code>class_id</code>è¿™ä¸ªåˆ—ç›´æ¥å®šä½å‡ºä¸€ä¸ª<code>students</code>è¡¨çš„è®°å½•åº”è¯¥å¯¹åº”åˆ°<code>classes</code>çš„å“ªæ¡è®°å½•ã€‚</p><p>ä¾‹å¦‚ï¼š</p><ul><li>å°æ˜çš„<code>class_id</code>æ˜¯<code>1</code>ï¼Œå› æ­¤ï¼Œå¯¹åº”çš„<code>classes</code>è¡¨çš„è®°å½•æ˜¯<code>id=1</code>çš„ä¸€ç­ï¼›</li><li>å°çº¢çš„<code>class_id</code>æ˜¯<code>1</code>ï¼Œå› æ­¤ï¼Œå¯¹åº”çš„<code>classes</code>è¡¨çš„è®°å½•æ˜¯<code>id=1</code>çš„ä¸€ç­ï¼›</li><li>å°ç™½çš„<code>class_id</code>æ˜¯<code>2</code>ï¼Œå› æ­¤ï¼Œå¯¹åº”çš„<code>classes</code>è¡¨çš„è®°å½•æ˜¯<code>id=2</code>çš„äºŒç­ã€‚</li></ul><p>åœ¨<code>students</code>è¡¨ä¸­ï¼Œé€šè¿‡<code>class_id</code>çš„å­—æ®µï¼Œå¯ä»¥æŠŠæ•°æ®ä¸å¦ä¸€å¼ è¡¨å…³è”èµ·æ¥ï¼Œè¿™ç§åˆ—ç§°ä¸º<code>å¤–é”®</code></p><p>ç»“è®ºï¼šä¸ºäº†ä¿è¯<code>students</code>è¡¨ä¸­çš„<code>class_id</code>å­—æ®µä¸­çš„æ•°æ®å¿…é¡»æ¥è‡ªäº<code>classes</code>è¡¨ä¸­<code>id</code>å­—æ®µä¸­çš„æ•°æ®ï¼Œæœ‰å¿…è¦ç»™<code>students</code>è¡¨ä¸­çš„<code>class_id</code>å­—æ®µæ·»åŠ å¤–é”®çº¦æŸï¼Œ<code>class_id</code>å­—æ®µè¢«ç§°ä¸ºå¤–é”®å­—æ®µï¼Œè¯¥å­—æ®µä¸­çš„1 2è¢«ç§°ä¸ºå¤–é”®å€¼ã€‚<code>class_id</code>è¿™é‡Œæ˜¯ä¸€ä¸ªå•ä¸€å¤–é”®å­—æ®µ</p><h2 id="æ³¨æ„äº‹é¡¹ä¸ä¸»ä»è¡¨"><a href="#æ³¨æ„äº‹é¡¹ä¸ä¸»ä»è¡¨" class="headerlink" title="æ³¨æ„äº‹é¡¹ä¸ä¸»ä»è¡¨"></a>æ³¨æ„äº‹é¡¹ä¸ä¸»ä»è¡¨</h2><ul><li><p>å¤–é”®å€¼å¯ä»¥ä¸º<code>null</code></p></li><li><p>å¤–é”®å­—æ®µå»å¼•ç”¨ä¸€å¼ è¡¨çš„æŸä¸ªå­—æ®µçš„æ—¶å€™ï¼Œè¢«å¼•ç”¨çš„å­—æ®µå¿…é¡»å…·æœ‰<code>unique</code>çº¦æŸã€‚</p></li><li><p>æœ‰äº†å¤–é”®å¼•ç”¨ä¹‹åï¼Œè¡¨åˆ†ä¸ºçˆ¶è¡¨å’Œå­è¡¨</p><p>  <strong>å½“ä¸¤ä¸ªè¡¨å»ºç«‹ä¸€å¯¹å¤šå…³ç³»çš„æ—¶å€™ï¼Œâ€ä¸€â€çš„é‚£ä¸€ç«¯æ˜¯çˆ¶è¡¨ï¼Œâ€å¤šâ€çš„é‚£ä¸€ç«¯æ˜¯å­è¡¨ã€‚</strong></p><p> çˆ¶è¡¨è®¾ç½®ä¸€ä¸ªä¸»é”®<br> å­è¡¨è®¾ç½®ä¸€ä¸ªå¤–é”®<br> å¤–é”®ä¸ä¸»é”®ç›¸å…³è”<br> Bè¡¨å¼•ç”¨Aè¡¨çš„å­—æ®µä½œä¸ºå¤–é”®ï¼Œé‚£ä¹ˆAè¡¨æ˜¯ä¸»è¡¨ï¼ŒBè¡¨æ˜¯ä»è¡¨ã€‚</p><p> ä»¥ä¸Šçˆ¶è¡¨æ˜¯ï¼š<code>classes</code>è¡¨<br> å­—è¡¨æ˜¯ï¼š<code>students</code>è¡¨<br> åˆ›å»ºè¡¨ï¼šå…ˆåˆ›å»ºçˆ¶è¡¨ï¼Œå†åˆ›å»ºå­è¡¨ï¼›<br> åˆ é™¤æ•°æ®ï¼šå…ˆåˆ é™¤å­è¡¨ä¸­çš„æ•°æ®ï¼Œå†åˆ é™¤çˆ¶è¡¨ä¸­çš„æ•°æ®ï¼›<br> æ’å…¥æ•°æ®ï¼šå…ˆæ’å…¥çˆ¶è¡¨ä¸­çš„æ•°æ®ï¼Œå†æ’å…¥å­è¡¨ä¸­çš„æ•°æ®ã€‚</p></li></ul><h2 id="æ·»åŠ å¤–é”®"><a href="#æ·»åŠ å¤–é”®" class="headerlink" title="æ·»åŠ å¤–é”®"></a>æ·»åŠ å¤–é”®</h2><p><strong>å»ºç«‹å¤–é”®å…³ç³»çš„å¯¹åº”åˆ—å¿…é¡»å»ºç«‹äº†ç´¢å¼•</strong></p><h3 id="Alteræ–¹å¼"><a href="#Alteræ–¹å¼" class="headerlink" title="Alteræ–¹å¼"></a>Alteræ–¹å¼</h3><p>å¤–é”®å¹¶ä¸æ˜¯é€šè¿‡åˆ—åå®ç°çš„ï¼Œè€Œæ˜¯é€šè¿‡å®šä¹‰å¤–é”®çº¦æŸå®ç°çš„ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> students</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> fk_class_id</span><br><span class="line"><span class="keyword">FOREIGN</span> KEY (class_id)</span><br><span class="line"><span class="keyword">REFERENCES</span> classes (id);</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼š</p><ul><li>å¤–é”®çº¦æŸçš„åç§°<code>fk_class_id</code>å¯ä»¥ä»»æ„ï¼Œä¸ç”¨åå­—çš„è¯å¯ä»¥å»æ‰<code>CONSTRAINT fk_class_id</code></li><li><code>FOREIGN KEY (class_id)</code>æŒ‡å®šäº†<code>class_id</code>ä½œä¸ºå¤–é”®</li><li><code>REFERENCES classes (id)</code>æŒ‡å®šäº†è¿™ä¸ªå¤–é”®å°†å…³è”åˆ°<code>classes</code>è¡¨çš„<code>id</code>åˆ—ï¼ˆå³<code>classes</code>è¡¨çš„ä¸»é”®ï¼‰ã€‚</li></ul><h3 id="Create-Tableæ–¹å¼"><a href="#Create-Tableæ–¹å¼" class="headerlink" title="Create Tableæ–¹å¼"></a>Create Tableæ–¹å¼</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> students(</span><br><span class="line">id <span class="type">INT</span>,</span><br><span class="line">    class_id <span class="type">INT</span>,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">10</span>),</span><br><span class="line">    INDEX(class_id),</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY(id),</span><br><span class="line">    <span class="keyword">FOREIGN</span> KEY (class_id) <span class="keyword">REFERENCES</span> classes (id)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤å¤–é”®"><a href="#åˆ é™¤å¤–é”®" class="headerlink" title="åˆ é™¤å¤–é”®"></a>åˆ é™¤å¤–é”®</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> students</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> KEY fk_class_id;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šåˆ é™¤å¤–é”®çº¦æŸå¹¶æ²¡æœ‰åˆ é™¤å¤–é”®è¿™ä¸€åˆ—ã€‚åˆ é™¤åˆ—æ˜¯é€šè¿‡<code>DROP COLUMN ...</code>å®ç°çš„ã€‚</p><h2 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h2><h3 id="å•ä¸€å¤–é”®"><a href="#å•ä¸€å¤–é”®" class="headerlink" title="å•ä¸€å¤–é”®"></a>å•ä¸€å¤–é”®</h3><p>ç»™ä¸€ä¸ªå­—æ®µæ·»åŠ å¤–é”®çº¦æŸï¼Œå¦‚ä¸Šé¢çš„æ ·ä¾‹</p><h3 id="å¤åˆå¤–é”®"><a href="#å¤åˆå¤–é”®" class="headerlink" title="å¤åˆå¤–é”®"></a>å¤åˆå¤–é”®</h3><p>ç»™å¤šä¸ªå­—æ®µè”åˆæ·»åŠ ä¸€ä¸ªå¤–é”®çº¦æŸ</p><h2 id="å¤šå¯¹å¤š"><a href="#å¤šå¯¹å¤š" class="headerlink" title="å¤šå¯¹å¤š"></a>å¤šå¯¹å¤š</h2><p>é€šè¿‡ä¸€ä¸ªè¡¨çš„å¤–é”®å…³è”åˆ°å¦ä¸€ä¸ªè¡¨ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰å‡ºä¸€å¯¹å¤šå…³ç³»ã€‚æœ‰äº›æ—¶å€™ï¼Œè¿˜éœ€è¦å®šä¹‰â€œå¤šå¯¹å¤šâ€å…³ç³»ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªè€å¸ˆå¯ä»¥å¯¹åº”å¤šä¸ªç­çº§ï¼Œä¸€ä¸ªç­çº§ä¹Ÿå¯ä»¥å¯¹åº”å¤šä¸ªè€å¸ˆï¼Œå› æ­¤ï¼Œç­çº§è¡¨å’Œè€å¸ˆè¡¨å­˜åœ¨å¤šå¯¹å¤šå…³ç³»ã€‚</p><p>å¤šå¯¹å¤šå…³ç³»å®é™…ä¸Šæ˜¯é€šè¿‡ä¸¤ä¸ªä¸€å¯¹å¤šå…³ç³»å®ç°çš„ï¼Œå³é€šè¿‡ä¸€ä¸ªä¸­é—´è¡¨ï¼Œå…³è”ä¸¤ä¸ªä¸€å¯¹å¤šå…³ç³»ï¼Œå°±å½¢æˆäº†å¤šå¯¹å¤šå…³ç³»ï¼š</p><h3 id="teachersè¡¨"><a href="#teachersè¡¨" class="headerlink" title="teachersè¡¨"></a>teachersè¡¨</h3><div class="table-container"><table><thead><tr><th>id</th><th>name</th></tr></thead><tbody><tr><td>1</td><td>å¼ è€å¸ˆ</td></tr><tr><td>2</td><td>ç‹è€å¸ˆ</td></tr><tr><td>3</td><td>æè€å¸ˆ</td></tr><tr><td>4</td><td>èµµè€å¸ˆ</td></tr></tbody></table></div><h3 id="classesè¡¨"><a href="#classesè¡¨" class="headerlink" title="classesè¡¨"></a>classesè¡¨</h3><div class="table-container"><table><thead><tr><th>id</th><th>name</th></tr></thead><tbody><tr><td>1</td><td>ä¸€ç­</td></tr><tr><td>2</td><td>äºŒç­</td></tr></tbody></table></div><h3 id="teacher-classè¡¨"><a href="#teacher-classè¡¨" class="headerlink" title="teacher_classè¡¨"></a>teacher_classè¡¨</h3><p>ä¸­é—´è¡¨<code>teacher_class</code>å…³è”ä¸¤ä¸ªä¸€å¯¹å¤šå…³ç³»ï¼š</p><div class="table-container"><table><thead><tr><th>id</th><th>teacher_id</th><th>class_id</th></tr></thead><tbody><tr><td>1</td><td>1</td><td>1</td></tr><tr><td>2</td><td>1</td><td>2</td></tr><tr><td>3</td><td>2</td><td>1</td></tr><tr><td>4</td><td>2</td><td>2</td></tr><tr><td>5</td><td>3</td><td>1</td></tr><tr><td>6</td><td>4</td><td>2</td></tr></tbody></table></div><h3 id="å…³ç³»"><a href="#å…³ç³»" class="headerlink" title="å…³ç³»"></a>å…³ç³»</h3><p>é€šè¿‡ä¸­é—´è¡¨<code>teacher_class</code>å¯çŸ¥<code>teachers</code>åˆ°<code>classes</code>çš„å…³ç³»ï¼š</p><ul><li><code>id=1</code>çš„å¼ è€å¸ˆå¯¹åº”<code>id=1,2</code>çš„ä¸€ç­å’ŒäºŒç­ï¼›</li><li><code>id=2</code>çš„ç‹è€å¸ˆå¯¹åº”<code>id=1,2</code>çš„ä¸€ç­å’ŒäºŒç­ï¼›</li><li><code>id=3</code>çš„æè€å¸ˆå¯¹åº”<code>id=1</code>çš„ä¸€ç­ï¼›</li><li><code>id=4</code>çš„èµµè€å¸ˆå¯¹åº”<code>id=2</code>çš„äºŒç­ã€‚</li></ul><p>åŒç†å¯çŸ¥<code>classes</code>åˆ°<code>teachers</code>çš„å…³ç³»ï¼š</p><ul><li><code>id=1</code>çš„ä¸€ç­å¯¹åº”<code>id=1,2,3</code>çš„å¼ è€å¸ˆã€ç‹è€å¸ˆå’Œæè€å¸ˆï¼›</li><li><code>id=2</code>çš„äºŒç­å¯¹åº”<code>id=1,2,4</code>çš„å¼ è€å¸ˆã€ç‹è€å¸ˆå’Œèµµè€å¸ˆï¼›</li></ul><p>å› æ­¤ï¼Œé€šè¿‡ä¸­é—´è¡¨ï¼Œæˆ‘ä»¬å°±å®šä¹‰äº†ä¸€ä¸ªâ€œå¤šå¯¹å¤šâ€å…³ç³»ã€‚</p><p><strong>å¤šå¯¹å¤šå…³ç³»çš„å¤–é”®åˆ™æ˜¯åœ¨ä¸­é—´è¡¨ä¸­çš„ä¸¤ä¸ªå­—æ®µä¸Šè®¾ç½®ä¸¤ä¸ªå¤–é”®</strong></p><h2 id="ä¸€å¯¹ä¸€"><a href="#ä¸€å¯¹ä¸€" class="headerlink" title="ä¸€å¯¹ä¸€"></a>ä¸€å¯¹ä¸€</h2><p>ä¸€å¯¹ä¸€å…³ç³»æ˜¯æŒ‡ï¼Œä¸€ä¸ªè¡¨çš„è®°å½•å¯¹åº”åˆ°å¦ä¸€ä¸ªè¡¨çš„å”¯ä¸€ä¸€ä¸ªè®°å½•ã€‚</p><p>ä¾‹å¦‚ï¼Œ<code>students</code>è¡¨çš„æ¯ä¸ªå­¦ç”Ÿå¯ä»¥æœ‰è‡ªå·±çš„è”ç³»æ–¹å¼ï¼Œå¦‚æœæŠŠè”ç³»æ–¹å¼å­˜å…¥å¦ä¸€ä¸ªè¡¨<code>contacts</code>ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªâ€œä¸€å¯¹ä¸€â€å…³ç³»ï¼š</p><div class="table-container"><table><thead><tr><th>id</th><th>student_id</th><th>mobile</th></tr></thead><tbody><tr><td>1</td><td>1</td><td>135xxxx6300</td></tr><tr><td>2</td><td>2</td><td>138xxxx2209</td></tr><tr><td>3</td><td>5</td><td>139xxxx8086</td></tr></tbody></table></div><p>æœ‰ç»†å¿ƒçš„ç«¥é‹ä¼šé—®ï¼Œæ—¢ç„¶æ˜¯ä¸€å¯¹ä¸€å…³ç³»ï¼Œé‚£ä¸ºå•¥ä¸ç»™<code>students</code>è¡¨å¢åŠ ä¸€ä¸ª<code>mobile</code>åˆ—ï¼Œè¿™æ ·å°±èƒ½åˆäºŒä¸ºä¸€äº†ï¼Ÿ</p><p>å¦‚æœä¸šåŠ¡å…è®¸ï¼Œå®Œå…¨å¯ä»¥æŠŠä¸¤ä¸ªè¡¨åˆä¸ºä¸€ä¸ªè¡¨ã€‚ä½†æ˜¯ï¼Œæœ‰äº›æ—¶å€™ï¼Œå¦‚æœæŸä¸ªå­¦ç”Ÿæ²¡æœ‰æ‰‹æœºå·ï¼Œé‚£ä¹ˆï¼Œ<code>contacts</code>è¡¨å°±ä¸å­˜åœ¨å¯¹åº”çš„è®°å½•ã€‚å®é™…ä¸Šï¼Œ<strong>ä¸€å¯¹ä¸€å…³ç³»å‡†ç¡®åœ°è¯´ï¼Œæ˜¯<code>contacts</code>è¡¨ä¸€å¯¹ä¸€å¯¹åº”<code>students</code>è¡¨</strong>ã€‚</p><p><strong>è¿˜æœ‰ä¸€äº›åº”ç”¨ä¼šæŠŠä¸€ä¸ªå¤§è¡¨æ‹†æˆä¸¤ä¸ªä¸€å¯¹ä¸€çš„è¡¨ï¼Œç›®çš„æ˜¯æŠŠç»å¸¸è¯»å–å’Œä¸ç»å¸¸è¯»å–çš„å­—æ®µåˆ†å¼€ï¼Œä»¥è·å¾—æ›´é«˜çš„æ€§èƒ½</strong>ã€‚ä¾‹å¦‚ï¼ŒæŠŠä¸€ä¸ªå¤§çš„ç”¨æˆ·è¡¨åˆ†æ‹†ä¸ºç”¨æˆ·åŸºæœ¬ä¿¡æ¯è¡¨<code>user_info</code>å’Œç”¨æˆ·è¯¦ç»†ä¿¡æ¯è¡¨<code>user_profiles</code>ï¼Œå¤§éƒ¨åˆ†æ—¶å€™ï¼Œåªéœ€è¦æŸ¥è¯¢<code>user_info</code>è¡¨ï¼Œå¹¶ä¸éœ€è¦æŸ¥è¯¢<code>user_profiles</code>è¡¨ï¼Œè¿™æ ·å°±æé«˜äº†æŸ¥è¯¢é€Ÿåº¦ã€‚</p><hr><p>ä¸ºä»€ä¹ˆä¼šæé«˜æŸ¥è¯¢é€Ÿåº¦ï¼Ÿ</p><ul><li>å­¦ç”Ÿçš„è”ç³»ä¿¡æ¯ä¸å®Œæ•´ï¼Œæœ‰çš„æ²¡æœ‰æ‰‹æœºå·ï¼Œåœ¨ä¸€ä¸ªè¡¨æ ¼é‡Œå°±ä¼šæœ‰Nullå­˜åœ¨ã€‚è€Œæ”¾åœ¨å¦ä¸€ä¸ªè¡¨æ ¼é‡Œï¼Œæ²¡æœ‰æ‰‹æœºå·çš„å­¦ç”Ÿå°±æ²¡æœ‰è®°å½•ã€‚é¿å…nullï¼Œæ€§èƒ½æ›´å¿«</li><li>ä¸€èˆ¬æ¥è¯´é‡è¦çš„æ ¸å¿ƒä¿¡æ¯æ˜¯å¤§å®¶éƒ½æ˜ç¡®æœ‰çš„ä¸€å®šè¦æ”¶é›†åˆ°çš„ï¼Œæ¯”å¦‚åå­—å’Œèº«ä»½å·ã€‚ä¸€äº›ä¸æ ¸å¿ƒçš„ä¿¡æ¯ä¼šæ ¹æ®æƒ…å†µè¡¨ç°ä¸å®Œæ•´ï¼Œä¸”å¹³å¸¸å¯¹è¿™äº›ä¿¡æ¯çš„ä½¿ç”¨ä¹Ÿä¸é¢‘ç¹ï¼Œå› æ­¤æ”¾åœ¨å¦ä¸€ä¸ªè¡¨æ ¼ä¸­å°±<strong>é¿å…æ¯æ¬¡è®¿é—®æ•°æ®åº“éƒ½è¦è¿å¸¦æ“ä½œè¿™äº›ä¿¡æ¯ã€‚</strong></li></ul><h1 id="çº§è”æ“ä½œ"><a href="#çº§è”æ“ä½œ" class="headerlink" title="çº§è”æ“ä½œ"></a>çº§è”æ“ä½œ</h1><p>åœ¨åˆ é™¤çˆ¶è¡¨ä¸­çš„æ•°æ®çš„æ—¶å€™ï¼Œçº§è”åˆ é™¤å­è¡¨ä¸­çš„æ•°æ®<code>on delete cascade</code></p><p>åœ¨æ›´æ–°çˆ¶è¡¨ä¸­çš„æ•°æ®æ—¶å€™ï¼Œçº§è”æ›´æ–°å­è¡¨ä¸­çš„æ•°æ®<code>on update cascade</code></p><p>çº§è”æ“ä½œåœ¨å¤–é”®çº¦æŸåé¢æ·»åŠ </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> students(</span><br><span class="line">id <span class="type">INT</span>,</span><br><span class="line">    class_id <span class="type">INT</span>,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">10</span>),</span><br><span class="line">    INDEX(class_id),</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY(id),</span><br><span class="line">    <span class="keyword">FOREIGN</span> KEY (class_id) <span class="keyword">REFERENCES</span> classes (id)</span><br><span class="line">    <span class="keyword">ON</span> <span class="keyword">DELETE</span> CASCADE <span class="keyword">ON</span> UPDATE CASCADE</span><br><span class="line">);</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> students</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> fk_class_id</span><br><span class="line"><span class="keyword">FOREIGN</span> KEY (class_id)</span><br><span class="line"><span class="keyword">REFERENCES</span> classes (id)</span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">DELETE</span> CASCADE <span class="keyword">ON</span> UPDATE CASCADE;</span><br></pre></td></tr></table></figure><h1 id="å¤–é”®çš„æ€§èƒ½é—®é¢˜"><a href="#å¤–é”®çš„æ€§èƒ½é—®é¢˜" class="headerlink" title="å¤–é”®çš„æ€§èƒ½é—®é¢˜"></a>å¤–é”®çš„æ€§èƒ½é—®é¢˜</h1><ul><li>æ•°æ®åº“éœ€è¦ç»´æŠ¤å¤–é”®çš„å†…éƒ¨ç®¡ç†</li><li>å¤–é”®ç­‰äºæŠŠæ•°æ®çš„ä¸€è‡´æ€§äº‹åŠ¡å®ç°ï¼Œå…¨éƒ¨äº¤ç»™æ•°æ®åº“æœåŠ¡å™¨å®Œæˆ</li><li>æœ‰äº†å¤–é”®ï¼Œå½“åšä¸€äº›æ¶‰åŠå¤–é”®å­—æ®µçš„å¢ï¼Œåˆ ï¼Œæ›´æ–°æ“ä½œä¹‹åï¼Œéœ€è¦è§¦å‘ç›¸å…³æ“ä½œå»æ£€æŸ¥ï¼Œè€Œä¸å¾—ä¸æ¶ˆè€—èµ„æº</li><li>å¤–é”®è¿˜ä¼šå› ä¸ºéœ€è¦è¯·æ±‚å¯¹å…¶ä»–è¡¨å†…éƒ¨åŠ é”è€Œå®¹æ˜“å‡ºç°æ­»é”æƒ…å†µ</li></ul><h1 id="æ˜¯å¦ä½¿ç”¨å¤–é”®"><a href="#æ˜¯å¦ä½¿ç”¨å¤–é”®" class="headerlink" title="æ˜¯å¦ä½¿ç”¨å¤–é”®"></a>æ˜¯å¦ä½¿ç”¨å¤–é”®</h1><p>å¤–é”®æ˜¯å¦é‡‡ç”¨çœ‹ä¸šåŠ¡åº”ç”¨åœºæ™¯ï¼Œä»¥åŠå¼€å‘æˆæœ¬çš„ï¼Œå¤§è‡´åˆ—ä¸‹ä»€ä¹ˆæ—¶å€™é€‚åˆï¼Œä»€ä¹ˆæ—¶å€™ä¸é€‚åˆä½¿ç”¨ï¼š</p><h2 id="ä¸é€‚åˆ"><a href="#ä¸é€‚åˆ" class="headerlink" title="ä¸é€‚åˆ"></a>ä¸é€‚åˆ</h2><p>äº’è”ç½‘è¡Œä¸šåº”ç”¨ä¸æ¨èä½¿ç”¨å¤–é”®ï¼š ç”¨æˆ·é‡å¤§ï¼Œå¹¶å‘åº¦é«˜ï¼Œä¸ºæ­¤æ•°æ®åº“æœåŠ¡å™¨å¾ˆå®¹æ˜“æˆä¸ºæ€§èƒ½ç“¶é¢ˆï¼Œå°¤å…¶å—IOèƒ½åŠ›é™åˆ¶ï¼Œä¸”ä¸èƒ½è½»æ˜“åœ°æ°´å¹³æ‰©å±•ï¼›è‹¥æ˜¯æŠŠæ•°æ®ä¸€è‡´æ€§çš„æ§åˆ¶æ”¾åˆ°äº‹åŠ¡ä¸­ï¼Œä¹Ÿå³è®©åº”ç”¨æœåŠ¡å™¨æ‰¿æ‹…æ­¤éƒ¨åˆ†çš„å‹åŠ›ï¼Œè€Œå¼•ç”¨æœåŠ¡å™¨ä¸€èˆ¬éƒ½æ˜¯å¯ä»¥åšåˆ°è½»æ¾åœ°æ°´å¹³çš„ä¼¸ç¼©ï¼›</p><h2 id="é€‚åˆ"><a href="#é€‚åˆ" class="headerlink" title="é€‚åˆ"></a>é€‚åˆ</h2><ul><li>è½¯ä»¶åº”ç”¨çš„äººæ•°æœ‰é™ï¼Œæ¢å¥è¯è¯´æ˜¯å¯æ§çš„</li><li>æ•°æ®åº“æœåŠ¡å™¨çš„æ•°æ®é‡ä¹Ÿä¸€èˆ¬ä¸ä¼šè¶…å¤§ï¼Œä¸”æ´»è·ƒæ•°æ®æœ‰é™</li></ul><p>ç»¼åˆä¸Šè¿°2å¥è¯æè¿°ï¼Œä¹Ÿå³æ•°æ®åº“æœåŠ¡å™¨çš„æ€§èƒ½ä¸æ˜¯é—®é¢˜ï¼Œæ‰€ä»¥ä¸ç”¨è¿‡å¤šè€ƒè™‘æ€§èƒ½çš„é—®é¢˜ï¼›å¦å¤–ï¼Œä½¿ç”¨å¤–é”®å¯ä»¥é™ä½å¼€å‘æˆæœ¬ï¼Œå€ŸåŠ©æ•°æ®åº“äº§å“è‡ªèº«çš„è§¦å‘å™¨å¯ä»¥å®ç°è¡¨ä¸å…³è”è¡¨ä¹‹é—´çš„æ•°æ®ä¸€è‡´æ€§å’Œæ›´æ–°ï¼›æœ€åä¸€ç‚¹ï¼Œä½¿ç”¨å¤–é”®çš„æ–¹å¼ï¼Œè¿˜å¯ä»¥åšåˆ°å¼€å‘äººå‘˜å’Œæ•°æ®åº“è®¾è®¡äººå‘˜çš„åˆ†å·¥ï¼Œå¯ä»¥ä¸ºç¨‹åºå‘˜æ‰¿æ‹…æ›´å¤šçš„å·¥ä½œé‡ï¼›</p><p>å‚è€ƒï¼š</p><p><a href="https://blog.51cto.com/wushank/1641308">MySQLçš„å‡ ä¸ªæ¦‚å¿µï¼šä¸»é”®ï¼Œå¤–é”®ï¼Œç´¢å¼•ï¼Œå”¯ä¸€ç´¢å¼• -ç§‹å¤©çš„ç«¥è¯-51CTOåšå®¢</a></p><p><a href="https://www.liaoxuefeng.com/wiki/1177760294764384/1218728424164736">å¤–é”® - å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™</a></p><p><a href="https://www.jianshu.com/p/4517c3e13657">MySqlâ€”çº¦æŸå’Œçº§è”æ“ä½œ - ç®€ä¹¦</a></p><p><a href="https://segmentfault.com/a/1190000007135310">mysqlä¹‹å¤–é”®çº¦æŸï¼ˆçº§è”æ“ä½œç­‰ï¼‰ çˆ¶è¡¨å­è¡¨ - é£ç¿”çš„å¤§è±¡ - SegmentFault æ€å¦</a></p><p><a href="https://www.zhihu.com/question/19600081">å¤§å®¶è®¾è®¡æ•°æ®åº“æ—¶ä½¿ç”¨å¤–é”®å—ï¼Ÿ - çŸ¥ä¹</a></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> å¤–é”® </tag>
            
            <tag> çº§è” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ†å—ç®—æ³•</title>
      <link href="/2019/06/16/%E5%88%86%E5%9D%97%E7%AE%97%E6%B3%95/"/>
      <url>/2019/06/16/%E5%88%86%E5%9D%97%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>åˆ†å—ç®—æ³•</p><span id="more"></span><h1 id="ç®€è¿°"><a href="#ç®€è¿°" class="headerlink" title="ç®€è¿°"></a>ç®€è¿°</h1><ul><li><p>å…¶å®ï¼Œåˆ†å—æ˜¯ä¸€ç§æ€æƒ³ï¼Œè€Œä¸æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œ<strong>æ•´ä½“ç»´æŠ¤ï¼Œå±€éƒ¨æš´åŠ›</strong></p></li><li><p>åˆ†å—ç®—æ³•å®è´¨ä¸Šæ˜¯ä¸€ç§æ˜¯é€šè¿‡åˆ†æˆå¤šå—ååœ¨æ¯å—ä¸Šæ‰“æ ‡è®°ä»¥å®ç°å¿«é€ŸåŒºé—´ä¿®æ”¹ï¼ŒåŒºé—´æŸ¥è¯¢çš„ä¸€ç§ç®—æ³•ã€‚å…¶å‡æ‘Šæ—¶é—´å¤æ‚åº¦ä¸º$O(\sqrt{n})$ï¼Œåœ¨$n=10^5$æ—¶ï¼Œç”±äºå¸¸æ•°å°ï¼Œè·Ÿçº¿æ®µæ ‘å¯èƒ½å·®ä¸å¤šã€‚</p></li><li><p>åˆ†å—ç®—æ³•ç›¸è¾ƒäºå„ç§æ ‘å½¢æ•°æ®ç»“æ„ï¼Œå…·æœ‰ç®€ä¾¿æ˜“å†™ï¼Œæ–¹ä¾¿è°ƒè¯•ç­‰å¤šç§ä¼˜ç‚¹ã€‚åœ¨åŒç­‰æ•°æ®è§„æ¨¡ä¸‹ï¼Œå¦‚ 1e5 ï¼Œå…¶æ—¶é—´æ•ˆç‡å¹¶ä¸ä¼šä½å¤ªå¤šï¼Œåœ¨è€ƒè¯•æ—¶åè€Œæ˜¯ä¸€ç§æœ‰åŠ›çš„å¾—åˆ†æ–¹æ³•ã€‚</p></li></ul><h1 id="åŸºæœ¬æ“ä½œåŠæ€§è´¨"><a href="#åŸºæœ¬æ“ä½œåŠæ€§è´¨" class="headerlink" title="åŸºæœ¬æ“ä½œåŠæ€§è´¨"></a>åŸºæœ¬æ“ä½œåŠæ€§è´¨</h1><p>ä¸ºäº†ä½¿å¾—å…¶æœ‰ç€æœ€ç¨³å®šçš„æ—¶é—´å¤æ‚åº¦ï¼Œæˆ‘ä»¬ç»å¸¸æŠŠä¸€ä¸ªé•¿åº¦ä¸º n çš„åºåˆ—åˆ†ä¸º $\sqrt{n}$ä¸ªå¤§å°ä¸º$\sqrt{n}$çš„å—ï¼Œå¦‚æœ n ä¸æ˜¯å®Œå…¨å¹³æ–¹æ•°ï¼Œåˆ™åºåˆ—æœ€å³ç«¯ä¼šå¤šå‡ºä¸€ä¸ªè§’å—ï¼ˆå…¶å®æ˜¯æ ¹æ®å‡å€¼ä¸ç­‰å¼ï¼Œè¿™æ ·åˆ’åˆ†æ˜¯æ—¶é—´å¤æ‚åº¦æœ€å°çš„ï¼‰</p><p>å¦‚ä¸‹å›¾ï¼Œå°±æ˜¯ä¸€ç§åºåˆ—çš„åˆ†å—ï¼š</p><p><img src="/2019/06/16/%E5%88%86%E5%9D%97%E7%AE%97%E6%B3%95/1.jpg" alt></p><p>è¯¥é•¿åº¦ä¸º 10 çš„åºåˆ—è¢«åˆ†ä¸ºäº† 4 å—ï¼Œå‰ä¸‰å—çš„å¤§å°ä¸º $\sqrt{10}$çš„è¿‘ä¼¼å€¼ 3 ï¼Œæœ€åä¸€ä¸ªè§’å—å¤§å°ä¸º 1</p><hr><p>è€Œæˆ‘ä»¬è¦è®°å½•çš„ä¸€ä¸ªå€¼ï¼Œå°±æ˜¯æ¯ä¸ªåºå·ä»£è¡¨çš„æ•°ï¼Œå±äºå“ªä¸€å—</p><p>å¦‚ä¸Šå›¾ï¼Œ 1,2,3å°±å±äºç¬¬ä¸€å—ï¼Œ 4,5,6å°±å±äºç¬¬äºŒå—ï¼Œ7,8,9å°±å±äºç¬¬ä¸‰å—ï¼Œ10 å°±å±äºç¬¬å››å—</p><p>å¯ä»¥å¾—åˆ°è·å–æ¯ä¸€ä¸ªåºå·çš„æ‰€åœ¨å—çš„ä»£ç æ˜¯ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> n;<span class="comment">//æ€»ä¸ªæ•°</span></span><br><span class="line"><span class="keyword">int</span> block=<span class="built_in">sqrt</span>(n);<span class="comment">//æ¯ä¸€å—å¤§å°</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//belong[i]ï¼šç¬¬iä¸ªæ•°æ‰€åœ¨å—çš„ç¼–å·</span></span><br><span class="line">    belong[i]=(i<span class="number">-1</span>)/block+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åŒºé—´æœ€å€¼"><a href="#åŒºé—´æœ€å€¼" class="headerlink" title="åŒºé—´æœ€å€¼"></a>åŒºé—´æœ€å€¼</h1><p>ä½†æ˜¯ï¼Œå¦‚ä½•ç”¨åˆ†å—æ¥ç»´æŠ¤åŒºé—´æœ€å€¼ï¼Ÿ</p><p>æˆ‘ä»¬ä¸¾ä¸ªä¾‹å­:</p><p>ç»™å®šä¸€ä¸ªé•¿çš„ä¸ºnæ•°åˆ—ï¼Œæ±‚å‡ºä»»æ„åŒºé—´$[l,r]$çš„æœ€å¤§å€¼$(1&lt;=l,r&lt;=n)(l&lt;=r)$</p><p><img src="/2019/06/16/%E5%88%86%E5%9D%97%E7%AE%97%E6%B3%95/2.png" alt></p><p><strong>æˆ‘ä»¬ç°åœ¨ç»™æ¯ä¸ªç‚¹ä¸ŠåŠ äº†ä¸€ä¸ªæƒå€¼ï¼Œæ¯ä¸ªå—ç»´æŠ¤ä¸€ä¸‹å—å†…æœ€å¤§å€¼</strong></p><p>å½“æˆ‘ä»¬æŸ¥è¯¢ä»»æ„ä¸€ä¸ªåŒºé—´$ [l,r]$æ—¶ï¼š</p><ul><li><p>å¦‚æœ$l$æ‰€åœ¨çš„å—ä¸$r$æ‰€åœ¨çš„å—ç›¸åŒï¼Œå¦‚$[1,2]$ï¼Œåˆ™ç›´æ¥æš´åŠ›æŸ¥è¯¢å³å¯ï¼Œæ—¶é—´å¤æ‚åº¦  $O(\sqrt{n})$ï¼ˆæ¯å—æœ‰ $\sqrt{n}$ä¸ªæ•°ï¼Œè§’å—é™¤å¤–ï¼‰</p></li><li><p>è‹¥å…¶ä¸åœ¨ä¸€ä¸ªå—ä½†æ˜¯å—æ˜¯ç›¸é‚»çš„ï¼Œä¸€æ ·æ˜¯æš´åŠ›æŸ¥è¯¢ï¼Œæ—¶é—´å¤æ‚åº¦$O(\sqrt{n})$</p></li><li>è‹¥å…¶å—ä¸ç›¸é‚»ï¼Œå¦‚$[1,10]$ï¼Œæˆ‘ä»¬å…ˆå¤„ç†ä¸¤è¾¹çš„è¾¹å—è§’å—ï¼Œå…ˆæš´åŠ›æŸ¥è¯¢$1$å’Œ$10$æ‰€åœ¨çš„å—å†…æœ€å¤§å€¼ï¼Œæœ€åç›´æ¥æŸ¥è¯¢ä¸­é—´å—å†…æœ€å¤§å€¼å³å¯ï¼Œæ—¶é—´å¤æ‚åº¦$O(\sqrt{n})$ï¼ˆå› ä¸ºæˆ‘ä»¬å·²ç»ç»Ÿè®¡äº†ä¸ªæ¯ä¸ªå—çš„æœ€å¤§å€¼äº†ï¼Œæ‰€ä»¥æŸ¥è¯¢ä¸­é—´å—çš„æœ€å¤§å€¼å³æ˜¯$O(\sqrt{n})$ï¼Œæœ€ç»ˆåŠ èµ·æ¥è¿˜æ˜¯$O(\sqrt{n})$ï¼‰</li></ul><h1 id="åŒºé—´ä¿®æ”¹"><a href="#åŒºé—´ä¿®æ”¹" class="headerlink" title="åŒºé—´ä¿®æ”¹"></a>åŒºé—´ä¿®æ”¹</h1><p>å¯¹äºæ•´å—ä¿®æ”¹ï¼Œæˆ‘ä»¬æ‰“ä¸ªåŠ æ³•æ ‡è®°ï¼Œå³å½“å‰å—å¢åŠ äº†å¤šå°‘ï¼Œæœ€å¤§å€¼ç›¸åº”çš„å°±å¢åŠ äº†å¤šå°‘</p><p>æ‰€ä»¥æ€»æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯$O(\sqrt{n})$</p><h1 id="åˆ†å—çš„å®è´¨"><a href="#åˆ†å—çš„å®è´¨" class="headerlink" title="åˆ†å—çš„å®è´¨"></a>åˆ†å—çš„å®è´¨</h1><p>åˆ†å—å…¶å®æ˜¯ä¸€ç§æ ‘å½¢ç»“æ„ï¼Œå®ƒæ˜¯ä¸€ç§åªæœ‰ä¸‰å±‚çš„æ ‘ï¼Œå½¢æ€å¦‚ä¸‹ï¼š</p><p><img src="/2019/06/16/%E5%88%86%E5%9D%97%E7%AE%97%E6%B3%95/3.png" alt></p><p>ç¬¬ä¸€å±‚ä¸ºæ•´ä¸ªåºåˆ—ï¼Œç¬¬äºŒå±‚ä¸º$\sqrt{n}$ä¸ªå¤§å°ä¸º$\sqrt{n}$çš„åºåˆ—(è¿‘ä¼¼)ï¼Œç¬¬ä¸‰å±‚ä¸º$n$ä¸ªå¤§å°ä¸º$1$çš„åºåˆ—</p><h1 id="åˆ†å—ä¸æ ‘çŠ¶æ•°ç»„ï¼Œçº¿æ®µæ ‘å¯¹æ¯”"><a href="#åˆ†å—ä¸æ ‘çŠ¶æ•°ç»„ï¼Œçº¿æ®µæ ‘å¯¹æ¯”" class="headerlink" title="åˆ†å—ä¸æ ‘çŠ¶æ•°ç»„ï¼Œçº¿æ®µæ ‘å¯¹æ¯”"></a>åˆ†å—ä¸æ ‘çŠ¶æ•°ç»„ï¼Œçº¿æ®µæ ‘å¯¹æ¯”</h1><p>æ ‘çŠ¶æ•°ç»„å’Œçº¿æ®µæ ‘çš„æ•ˆç‡å‡ä¸º$O(nlogn)$ï¼Œæ ‘çŠ¶æ•°ç»„å¸¸æ•°è¾ƒå°ï¼Œåˆ†å—æ•ˆç‡ä¸º$O(n\sqrt{n})$</p><p>ä¸€èˆ¬æ ‘çŠ¶æ•°ç»„å¸¸æ•°ä¼˜ç§€çš„è¯å¯ä»¥æ‰¿å—åˆ°1e6çš„æ•°æ®èŒƒå›´</p><p>çº¿æ®µæ ‘å¯ä»¥æ‰¿å—5e5çš„æ•°æ®èŒƒå›´</p><p>åˆ†å—å¯ä»¥æ‰¿å—5e4çš„æ•°æ®èŒƒå›´ï¼Œå¸¸æ•°ä¼˜ç§€çš„è¯å¯ä»¥æ‰¿å—1e5çš„æ•°æ®èŒƒå›´</p><p>æ ‘çŠ¶æ•°ç»„æœ€éš¾ç†è§£ï¼Œä»£ç å®ç°æœ€ç®€å•</p><p>çº¿æ®µæ ‘è¾ƒæ˜“ç†è§£ï¼Œä»£ç å®ç°æœ€å¤æ‚ï¼Œå¸¸æ•°è¾ƒä¹‹æ ‘çŠ¶æ•°ç»„ä¼šæ¯”è¾ƒå¤§</p><p>åˆ†å—æ˜“ç†è§£ï¼Œä»£ç å®ç°éš¾åº¦é€‚ä¸­ï¼Œå¤æ‚åº¦è¾ƒé«˜</p><p>æ‰€ä»¥è¯·æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ä¸åŒçš„ç®—æ³•</p><h1 id="åˆ†å—åŸºæœ¬æ¨¡æ¿"><a href="#åˆ†å—åŸºæœ¬æ¨¡æ¿" class="headerlink" title="åˆ†å—åŸºæœ¬æ¨¡æ¿"></a>åˆ†å—åŸºæœ¬æ¨¡æ¿</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1E5</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * num:åˆ†å—ä¸ªæ•°</span></span><br><span class="line"><span class="comment"> * belong[i]:iå±äºå“ªä¸€å—</span></span><br><span class="line"><span class="comment"> * L[i]:iè¿™å—çš„å·¦ç«¯ç‚¹ä½ç½®</span></span><br><span class="line"><span class="comment"> * R[i]:å³ç«¯ç‚¹ä½ç½®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">int</span> num, belong[MAXN], L[MAXN], R[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¹åºåˆ—è¿›è¡Œåˆ†å—</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> block = <span class="built_in">sqrt</span>(n);</span><br><span class="line">    num = n / block;</span><br><span class="line">    <span class="comment">//ä¸æ˜¯å®Œå…¨æ•°ï¼ŒåŠ ä¸€ä¸ªè§’å—</span></span><br><span class="line">    <span class="keyword">if</span>(n % block)</span><br><span class="line">        num++;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= num; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        L[i] = (i<span class="number">-1</span>)*block+<span class="number">1</span>;</span><br><span class="line">        R[i] = i*block;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¤„ç†å¤šå‡ºæ¥é‚£ä¸ªï¼Œè§’å—</span></span><br><span class="line">    R[num] = n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        belong[i] = (i<span class="number">-1</span>)/block+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="UESTC-1324"><a href="#UESTC-1324" class="headerlink" title="UESTC 1324"></a><a href="https://acm.uestc.edu.cn/problem/qing-xue-jie-yu-gong-zhu/description">UESTC 1324</a></h1><p><img src="/2019/06/16/%E5%88%86%E5%9D%97%E7%AE%97%E6%B3%95/4.png" alt></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Problem:å¿å­¦å§ä¸å…¬ä¸»</span></span><br><span class="line"><span class="comment">Time:2019-06-16 21:15:57</span></span><br><span class="line"><span class="comment">Lang:GNU G++</span></span><br><span class="line"><span class="comment">Case:12 / 12</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e5</span>+<span class="number">7</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * num:åˆ†å—ä¸ªæ•°</span></span><br><span class="line"><span class="comment"> * belong[i]:iå±äºå“ªä¸€å—</span></span><br><span class="line"><span class="comment"> * L[i]:ç¬¬iå—çš„å·¦ç«¯ç‚¹ä½ç½®</span></span><br><span class="line"><span class="comment"> * R[i]:å³ç«¯ç‚¹ä½ç½®</span></span><br><span class="line"><span class="comment"> * Max[i]:ç¬¬iå—ä¸­çš„æœ€å¤§å€¼</span></span><br><span class="line"><span class="comment"> * arr[i]: ç¬¬iä¸ªå£«å…µå—åˆ°çš„ä¼¤å®³</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">int</span> block, belong[MAXN], num, L[MAXN], R[MAXN], n, q;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> Max[MAXN] = &#123;<span class="number">0</span>&#125;, arr[MAXN] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¹åºåˆ—è¿›è¡Œåˆ†å—</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    block = <span class="built_in">sqrt</span>(n);</span><br><span class="line">    num = n / block;</span><br><span class="line">    <span class="keyword">if</span>(n % block)</span><br><span class="line">        num++;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= num; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        L[i] = (i<span class="number">-1</span>) * block + <span class="number">1</span>;</span><br><span class="line">        R[i] = i * block;</span><br><span class="line">    &#125;</span><br><span class="line">    R[num] = n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        belong[i] = (i<span class="number">-1</span>) / block + <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–æ¯ä¸€å—ä¸­çš„æœ€å¤§å€¼</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= num; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = L[i]; j &lt;= R[i]; j++)</span><br><span class="line">            Max[i] = <span class="built_in">max</span>(Max[i], arr[j]);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    arr[x] += y;</span><br><span class="line">    <span class="comment">//æ›´æ–°xæ‰€åœ¨å—çš„æœ€å¤§å€¼</span></span><br><span class="line">    Max[belong[x]] = <span class="built_in">max</span>(Max[belong[x]], arr[x]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">ask</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//åœ¨åŒä¸€å—çš„è¯ç›´æ¥æš´åŠ›</span></span><br><span class="line">    <span class="keyword">if</span>(belong[x] == belong[y])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = x; i &lt;= y; i++)</span><br><span class="line">            ans = <span class="built_in">max</span>(arr[i], ans);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¤„ç†å·¦ç«¯ç‚¹æ‰€åœ¨å—çš„æœ€å¤§å€¼</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = x; i &lt;= R[belong[x]]; i++)</span><br><span class="line">        ans = <span class="built_in">max</span>(ans, arr[i]);</span><br><span class="line">    <span class="comment">//å¤„ç†é™¤å·¦ç«¯ç‚¹æ‰€åœ¨å—ä»¥å¤–çš„å—</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = belong[x]+<span class="number">1</span>; i &lt; belong[y]; i++)</span><br><span class="line">        ans = <span class="built_in">max</span>(ans, Max[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = L[belong[y]]; i &lt;= y; i++)</span><br><span class="line">        ans = <span class="built_in">max</span>(ans, arr[i]);</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;q);</span><br><span class="line">    <span class="built_in">build</span>();</span><br><span class="line">    <span class="keyword">while</span>(q--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> op, x, y;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;op, &amp;x, &amp;y);</span><br><span class="line">        <span class="keyword">if</span>(op == <span class="number">1</span>)</span><br><span class="line">            <span class="built_in">update</span>(x, y);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, <span class="built_in">ask</span>(x, y));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š<a href="https://www.luogu.org/blog/48265/qian-tan-ji-chu-gen-hao-suan-fa-fen-kuai">æµ…è°ˆåŸºç¡€æ ¹å·ç®—æ³•â€”â€”åˆ†å—</a></p><p><a href="https://oi-wiki.org/ds/square-root-decomposition/">OIWIKI-åˆ†å—æ€æƒ³</a></p><p><a href="https://www.cnblogs.com/henry-1202/p/10124856.html">åˆ†å—å…¥é—¨ä¸åˆ†å—çš„ç»å…¸åº”ç”¨</a></p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†å— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè™šæ‹Ÿæœºç¬”è®°-ServiceLoader</title>
      <link href="/2019/06/11/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-ServiceLoader/"/>
      <url>/2019/06/11/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-ServiceLoader/</url>
      
        <content type="html"><![CDATA[<p>ServiceLoader-javaDoc</p><span id="more"></span><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> indi.greenhat.jvm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Driver;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.ServiceLoader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        ServiceLoader&lt;Driver&gt; loader = ServiceLoader.load(Driver.class);</span><br><span class="line">        Iterator&lt;Driver&gt; iterator = loader.iterator();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            Driver driver = iterator.next();</span><br><span class="line">            System.out.println(<span class="string">&quot;drive:&quot;</span> + driver.getClass() + <span class="string">&quot;,loader:&quot;</span> + driver.getClass().getClassLoader());</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;å½“å‰ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ï¼š&quot;</span> + Thread.currentThread().getContextClassLoader());</span><br><span class="line">        System.out.println(<span class="string">&quot;ServiceLoaderçš„ç±»åŠ è½½å™¨:&quot;</span> + ServiceLoader.class.getClassLoader());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">drive:<span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">mysql</span>.<span class="title">cj</span>.<span class="title">jdbc</span>.<span class="title">Driver</span>,<span class="title">loader</span>:<span class="title">sun</span>.<span class="title">misc</span>.<span class="title">Launcher</span>$<span class="title">AppClassLoader</span>@18<span class="title">b4aac2</span></span></span><br><span class="line"><span class="class">å½“å‰ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ï¼š<span class="title">sun</span>.<span class="title">misc</span>.<span class="title">Launcher</span>$<span class="title">AppClassLoader</span>@18<span class="title">b4aac2</span></span></span><br><span class="line"><span class="class"><span class="title">ServiceLoader</span>çš„ç±»åŠ è½½å™¨:<span class="title">null</span></span></span><br></pre></td></tr></table></figure><h1 id="ServiceLoader"><a href="#ServiceLoader" class="headerlink" title="ServiceLoader"></a>ServiceLoader</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java.util </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">ServiceLoader</span>&lt;<span class="title">S</span>&gt; <span class="keyword">extends</span> <span class="title">Object</span></span></span><br><span class="line"><span class="class"><span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">S</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">A simple service-provider loading facility.</span><br><span class="line">ä¸€ä¸ªç®€å•çš„æœåŠ¡æä¾›å•†åŠ è½½è®¾æ–½ã€‚</span><br><span class="line">A service is a well-known set of interfaces and (usually abstract) classes.</span><br><span class="line">æœåŠ¡æ˜¯ä¸€ç»„ä¼—æ‰€å‘¨çŸ¥çš„æ¥å£å’Œï¼ˆé€šå¸¸æ˜¯æŠ½è±¡çš„ï¼‰ç±»ã€‚</span><br><span class="line">A service provider is a specific implementation of a service.</span><br><span class="line">æœåŠ¡æä¾›å•†æ˜¯æœåŠ¡çš„å…·ä½“å®ç°ã€‚</span><br><span class="line">The classes in a provider typically implement the interfaces and subclass the classes defined in the service itself. </span><br><span class="line">æä¾›è€…ä¸­çš„ç±»é€šå¸¸å®ç°æ¥å£å¹¶å¯¹æœåŠ¡æœ¬èº«å®šä¹‰çš„ç±»è¿›è¡Œå­ç±»åŒ–</span><br><span class="line">Service providers can be installed in an implementation of the Java platform in the form of extensions, that is, jar files placed into any of the usual extension directories. </span><br><span class="line">æœåŠ¡æä¾›è€…å¯ä»¥ä»¥æ‰©å±•çš„å½¢å¼å®‰è£…åœ¨Javaå¹³å°çš„å®ç°ä¸­ï¼Œå³ï¼Œå°†jaræ–‡ä»¶æ”¾å…¥ä»»ä½•é€šå¸¸çš„æ‰©å±•ç›®å½•ä¸­ã€‚</span><br><span class="line">Providers can also be made available by adding them to the application&#x27;s class path or by some other platform-specific means.</span><br><span class="line">æä¾›ç¨‹åºä¹Ÿå¯ä»¥é€šè¿‡å°†å®ƒä»¬æ·»åŠ åˆ°åº”ç”¨ç¨‹åºçš„class pathæˆ–å…¶ä»–ç‰¹å®šäºå¹³å°çš„æ–¹æ³•æ¥æä¾›</span><br><span class="line">For the purpose of loading, a service is represented by a single type, that is, a single interface or abstract class. (A concrete class can be used, but this is not recommended.)</span><br><span class="line">å‡ºäºåŠ è½½çš„ç›®çš„ï¼ŒæœåŠ¡ç”±å•ä¸ªç±»å‹è¡¨ç¤ºï¼Œå³å•ä¸ªæ¥å£æˆ–æŠ½è±¡ç±»ã€‚ï¼ˆå¯ä»¥ä½¿ç”¨å…·ä½“ç±»ï¼Œä½†ä¸å»ºè®®è¿™æ ·åšã€‚ï¼‰</span><br><span class="line">A provider of a given service contains one or more concrete classes that extend this service type with data and code specific to the provider.</span><br><span class="line">ç»™å®šæœåŠ¡çš„æä¾›è€…åŒ…æä¾›ç¨‹åºç±»çš„è¯¦ç»†ä¿¡æ¯å¾€å¾€æ˜¯é«˜åº¦ç‰¹å®šäºæœåŠ¡çš„; æ²¡æœ‰å•ä¸ªç±»æˆ–æ¥å£å¯ä»¥ç»Ÿä¸€å®ƒä»¬ï¼Œæ‰€ä»¥è¿™é‡Œæ²¡æœ‰å®šä¹‰è¿™æ ·çš„ç±»å‹ã€‚å«ä¸€ä¸ªæˆ–å¤šä¸ªå…·ä½“ç±»ï¼Œè¿™äº›ç±»ä½¿ç”¨ç‰¹å®šäºæä¾›è€…çš„æ•°æ®å’Œä»£ç æ‰©å±•æ­¤æœåŠ¡ç±»å‹ã€‚</span><br><span class="line">The provider class is typically not the entire provider itself but rather a proxy which contains enough information to decide whether the provider is able to satisfy a particular request together with code that can create the actual provider on demand.</span><br><span class="line">æä¾›è€…ç±»é€šå¸¸ä¸æ˜¯æ•´ä¸ªæä¾›è€…æœ¬èº«ï¼Œè€Œæ˜¯åŒ…å«è¶³å¤Ÿä¿¡æ¯çš„ä»£ç†ï¼Œä»¥ç¡®å®šæä¾›è€…æ˜¯å¦èƒ½å¤Ÿæ»¡è¶³ç‰¹å®šè¯·æ±‚ä»¥åŠå¯ä»¥æŒ‰éœ€åˆ›å»ºå®é™…æä¾›è€…çš„ä»£ç </span><br><span class="line">The details of provider classes tend to be highly service-specific; no single class or interface could possibly unify them, so no such type is defined here. </span><br><span class="line">æä¾›è€…ç±»çš„è¯¦ç»†ä¿¡æ¯å¾€å¾€æ˜¯é«˜åº¦ç‰¹å®šäºæœåŠ¡çš„; æ²¡æœ‰å•ä¸ªç±»æˆ–æ¥å£å¯ä»¥ç»Ÿä¸€å®ƒä»¬ï¼Œæ‰€ä»¥è¿™é‡Œæ²¡æœ‰å®šä¹‰è¿™æ ·çš„ç±»å‹ã€‚</span><br><span class="line">The only requirement enforced by this facility is that provider classes must have a zero-argument constructor so that they can be instantiated during loading.</span><br><span class="line">æ­¤å·¥å…·å¼ºåˆ¶æ‰§è¡Œçš„å”¯ä¸€è¦æ±‚æ˜¯æä¾›è€…ç±»å¿…é¡»å…·æœ‰é›¶å‚æ•°æ„é€ å‡½æ•°ï¼Œä»¥ä¾¿å¯ä»¥åœ¨åŠ è½½æœŸé—´å®ä¾‹åŒ–å®ƒä»¬ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">A service provider is identified by placing a provider-configuration file in the resource directory META-INF/services.</span><br><span class="line">é€šè¿‡å°†æä¾›è€…é…ç½®æ–‡ä»¶æ”¾åœ¨èµ„æºç›®å½•META-INF/servicesä¸­æ¥æ ‡è¯†æœåŠ¡æä¾›è€…ã€‚</span><br><span class="line">The file&#x27;s name is the fully-qualified binary name of the service&#x27;s type.</span><br><span class="line">æ–‡ä»¶åæ˜¯æœåŠ¡ç±»å‹çš„å®Œå…¨é™å®šäºŒè¿›åˆ¶åç§°</span><br><span class="line">The file contains a list of fully-qualified binary names of concrete provider classes, one per line. </span><br><span class="line">è¯¥æ–‡ä»¶åŒ…å«å…·ä½“æä¾›è€…ç±»çš„å®Œå…¨é™å®šäºŒè¿›åˆ¶åç§°åˆ—è¡¨ï¼Œæ¯è¡Œä¸€ä¸ªã€‚</span><br><span class="line">Space and tab characters surrounding each name, as well as blank lines, are ignored.</span><br><span class="line">æ¯ä¸ªåç§°å‘¨å›´çš„ç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦(tab)ä»¥åŠç©ºè¡Œéƒ½å°†è¢«å¿½ç•¥ã€‚</span><br><span class="line">The comment character is &#x27;#&#x27; (&#x27;\u0023&#x27;, NUMBER SIGN); on each line all characters following the first comment character are ignored. The file must be encoded in UTF-8.</span><br><span class="line">æ³¨é‡Šå­—ç¬¦ä¸º&#x27;ï¼ƒ&#x27;ï¼ˆ&#x27;\ u0023&#x27;ï¼ŒNUMBER SIGNï¼‰; åœ¨æ¯ä¸€è¡Œä¸Šï¼Œå¿½ç•¥ç¬¬ä¸€ä¸ªæ³¨é‡Šå­—ç¬¦åé¢çš„æ‰€æœ‰å­—ç¬¦ã€‚ è¯¥æ–‡ä»¶å¿…é¡»ä»¥UTF-8ç¼–ç ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">If a particular concrete provider class is named in more than one configuration file, or is named in the same configuration file more than once, then the duplicates are ignored. </span><br><span class="line">å¦‚æœä¸€ä¸ªç‰¹å®šçš„å…·ä½“æä¾›ç¨‹åºç±»åœ¨å¤šä¸ªé…ç½®æ–‡ä»¶ä¸­å‘½åï¼Œæˆ–è€…åœ¨åŒä¸€é…ç½®æ–‡ä»¶ä¸­å¤šæ¬¡å‘½åï¼Œåˆ™å¿½ç•¥é‡å¤çš„é…ç½®æ–‡ä»¶ã€‚</span><br><span class="line">The configuration file naming a particular provider need not be in the same jar file or other distribution unit as the provider itself.</span><br><span class="line">å‘½åç‰¹å®šæä¾›è€…çš„é…ç½®æ–‡ä»¶ä¸å¿…ä¸æä¾›ç¨‹åºæœ¬èº«ä½äºåŒä¸€jaræ–‡ä»¶æˆ–å…¶ä»–åˆ†å‘å•å…ƒä¸­ã€‚</span><br><span class="line">The provider must be accessible from the same class loader that was initially queried to locate the configuration file; note that this is not necessarily the class loader from which the file was actually loaded.</span><br><span class="line">æä¾›ç¨‹åºå¿…é¡»å¯ä»¥ä»ä¸å®šä½å¯»æ‰¾é…ç½®æ–‡ä»¶çš„ç±»åŠ è½½å™¨åŠ è½½; è¯·æ³¨æ„ï¼Œè¿™ä¸ä¸€å®šæ˜¯å®é™…åŠ è½½æ–‡ä»¶çš„ç±»åŠ è½½å™¨ã€‚</span><br></pre></td></tr></table></figure><hr><p>ä»è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œ<code>ServiceLoader</code>æ˜¯ä»<code>META-INF/services</code>æ¥å®šä½jaråŒ…çš„ï¼Œç„¶åè¯»å–æ–‡ä»¶ä¸­çš„é™å®šå</p><p><img src="/2019/06/11/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-ServiceLoader/1.png" alt></p><p>æ‰€ä»¥ä¸Šé¢å°±çš„è¾“å‡ºæ­£å¥½éªŒè¯äº†è¿™ä¸€ä¸ª</p><hr><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Providers are located and instantiated lazily, that is, on demand. </span><br><span class="line">æä¾›è€…å¯ä»¥å»¶è¿Ÿåœ°å®šä½å’Œå®ä¾‹åŒ–ï¼Œå³æŒ‰éœ€æä¾›ã€‚</span><br><span class="line">A service loader maintains a cache of the providers that have been loaded so far.</span><br><span class="line">æœåŠ¡åŠ è½½å™¨ä¼šç»´æŠ¤åˆ°ç›®å‰ä¸ºæ­¢å·²ç»åŠ è½½çš„æä¾›ç¨‹åºçš„ç¼“å­˜</span><br><span class="line">Each invocation of the iterator method returns an iterator that first yields all of the elements of the cache, in instantiation order, and then lazily locates and instantiates any remaining providers, adding each one to the cache in turn.The cache can be cleared via the reload method.</span><br><span class="line">æ¯æ¬¡è°ƒç”¨iteratoræ–¹æ³•éƒ½ä¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œé¦–å…ˆæŒ‰ç…§å®ä¾‹åŒ–é¡ºåºç”Ÿæˆç¼“å­˜çš„æ‰€æœ‰å…ƒç´ ï¼Œç„¶åå»¶è¿Ÿåœ°å®šä½å’Œå®ä¾‹åŒ–ä»»ä½•å‰©ä½™çš„æä¾›ç¨‹åºï¼Œä¾æ¬¡å°†æ¯ä¸ªå…ƒç´ æ·»åŠ åˆ°ç¼“å­˜ä¸­ã€‚ ç¼“å­˜å¯ä»¥é€šè¿‡reloadæ–¹æ³•æ¸…é™¤ã€‚</span><br></pre></td></tr></table></figure><hr><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¼“å­˜æä¾›ç¨‹åºï¼Œä»¥å®ä¾‹åŒ–é¡ºåºæ’åˆ—</span></span><br><span class="line"><span class="keyword">private</span> LinkedHashMap&lt;String,S&gt; providers = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šé¢å¯ä»¥çœ‹åˆ°çš„ï¼Œç¼“å­˜æ˜¯é€šè¿‡ä¸€ä¸ªHashMapæ¥å­˜å‚¨çš„</p><hr><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">Instances of this class are not safe for use by multiple concurrent threads.</span><br><span class="line">æ­¤ç±»çš„å®ä¾‹ä¸èƒ½å®‰å…¨åœ°è¢«å¤šä¸ªå¹¶å‘çº¿ç¨‹ä½¿ç”¨ã€‚</span><br><span class="line">Unless otherwise specified, passing a null argument to any method in this class will cause a NullPointerException to be thrown.</span><br><span class="line">é™¤éå¦æœ‰è¯´æ˜ï¼Œå¦åˆ™ä¼ é€’nullå‚æ•°åˆ°æ­¤ç±»ä¸­çš„ä»»ä½•æ–¹æ³•å°†å¯¼è‡´æŠ›å‡ºNullPointerException </span><br><span class="line">Example Suppose we have a service type com.example.CodecSet which is intended to represent sets of encoder/decoder pairs for some protocol. In this case it is an abstract class with two abstract methods:</span><br><span class="line">ç¤ºä¾‹å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæœåŠ¡ç±»å‹com.example.CodecSetï¼Œç”¨äºè¡¨ç¤ºä¸€äº›åè®®çš„ç¼–ç å™¨/è§£ç å™¨å¯¹çš„é›†åˆã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæœ‰ä¸¤ä¸ªæŠ½è±¡æ–¹æ³•ï¼š</span><br><span class="line">public abstract Encoder getEncoder(String encodingName);</span><br><span class="line">public abstract Decoder getDecoder(String encodingName);</span><br><span class="line"></span><br><span class="line">Each method returns an appropriate object or null if the provider does not support the given encoding. Typical providers support more than one encoding.</span><br><span class="line">æ¯ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªé€‚å½“çš„å¯¹è±¡ï¼Œå¦‚æœæä¾›è€…ä¸æ”¯æŒç»™å®šçš„ç¼–ç ï¼Œåˆ™è¿”å›nullã€‚ å…¸å‹çš„æä¾›ç¨‹åºæ”¯æŒå¤šç§ç¼–ç </span><br><span class="line"></span><br><span class="line">If com.example.impl.StandardCodecs is an implementation of the CodecSet service then its jar file also contains a file named META-INF/services/com.example.CodecSet</span><br><span class="line">å¦‚æœcom.example.impl.StandardCodecsæ˜¯CodecSetæœåŠ¡çš„å®ç°ï¼Œé‚£ä¹ˆå®ƒçš„jaræ–‡ä»¶è¿˜åŒ…å«ä¸€ä¸ªåä¸ºMETA-INF/services/com.example.CodecSetçš„æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">æ­¤æ–‡ä»¶åŒ…å«å•è¡Œï¼š</span><br><span class="line">com.example.impl.StandardCodecs    # Standard codecs</span><br><span class="line"></span><br><span class="line">CodecSetç±»åœ¨åˆå§‹åŒ–æ—¶åˆ›å»ºå¹¶ä¿å­˜å•ä¸ªæœåŠ¡å®ä¾‹ï¼š</span><br><span class="line">private static ServiceLoader&lt;CodecSet&gt; codecSetLoader</span><br><span class="line">     = ServiceLoader.load(CodecSet.class);</span><br><span class="line">     </span><br><span class="line">ä¸ºäº†æ‰¾åˆ°ä¸€ä¸ªç»™å®šçš„ç¼–ç åç§°çš„ç¼–ç å™¨ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªé™æ€å·¥å‚æ–¹æ³•ï¼Œå®ƒéå†å·²çŸ¥å’Œå¯ç”¨çš„æä¾›è€…ï¼Œåªæœ‰å½“å®ƒæ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„ç¼–ç å™¨æˆ–å·²ç»ç”¨å®Œæä¾›è€…æ—¶æ‰è¿”å›ã€‚</span><br><span class="line"> public static Encoder getEncoder(String encodingName) &#123;</span><br><span class="line">     for (CodecSet cp : codecSetLoader) &#123;</span><br><span class="line">         Encoder enc = cp.getEncoder(encodingName);</span><br><span class="line">         if (enc != null)</span><br><span class="line">             return enc;</span><br><span class="line">     &#125;</span><br><span class="line">     return null;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h2 id="loadçš„è°ƒç”¨é“¾"><a href="#loadçš„è°ƒç”¨é“¾" class="headerlink" title="loadçš„è°ƒç”¨é“¾"></a>loadçš„è°ƒç”¨é“¾</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨å½“å‰çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ä¸ºç»™å®šçš„æœåŠ¡ç±»å‹åˆ›å»ºæ–°çš„æœåŠ¡åŠ è½½å™¨ã€‚</span></span><br><span class="line"><span class="comment"> * è°ƒç”¨ServiceLoader.load(service)ç­‰äºè°ƒç”¨</span></span><br><span class="line"><span class="comment"> * ServiceLoader.load(service, Thread.currentThread().getContextClassLoader())</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> service è¡¨ç¤ºæœåŠ¡çš„æ¥å£æˆ–æŠ½è±¡ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@type</span> parameter &lt;S&gt; æœåŠ¡ç±»å‹çš„ç±» </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> ä¸€ä¸ªæ–°çš„æœåŠ¡åŠ è½½å™¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;S&gt; <span class="function">ServiceLoader&lt;S&gt; <span class="title">load</span><span class="params">(Class&lt;S&gt; service)</span> </span>&#123;</span><br><span class="line">        ClassLoader cl = Thread.currentThread().getContextClassLoader();</span><br><span class="line">        <span class="keyword">return</span> ServiceLoader.load(service, cl);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸ºç»™å®šçš„æœåŠ¡ç±»å‹å’Œç±»åŠ è½½å™¨åˆ›å»ºæ–°çš„æœåŠ¡åŠ è½½å™¨ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> service è¡¨ç¤ºæœåŠ¡çš„æ¥å£æˆ–æŠ½è±¡ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> loader ç”¨äºåŠ è½½æä¾›ç¨‹åºé…ç½®æ–‡ä»¶å’Œæä¾›ç¨‹åºç±»çš„ç±»åŠ è½½å™¨</span></span><br><span class="line"><span class="comment"> * å¦‚æœè¦ä½¿ç”¨ç³»ç»Ÿç±»åŠ è½½å™¨ï¼ˆæˆ–è€…ï¼Œå¤±è´¥ï¼Œåˆ™ä½¿ç”¨å¼•å¯¼ç±»åŠ è½½å™¨ï¼‰ï¼Œå³ä¸ºnull</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> ä¸€ä¸ªæ–°çš„æœåŠ¡åŠ è½½å™¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;S&gt; <span class="function">ServiceLoader&lt;S&gt; <span class="title">load</span><span class="params">(Class&lt;S&gt; service, ClassLoader loader)</span></span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> ServiceLoader&lt;&gt;(service, loader);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">ServiceLoader</span><span class="params">(Class&lt;S&gt; svc, ClassLoader cl)</span> </span>&#123;</span><br><span class="line">    service = Objects.requireNonNull(svc, <span class="string">&quot;Service interface cannot be null&quot;</span>);</span><br><span class="line">    loader = (cl == <span class="keyword">null</span>) ? ClassLoader.getSystemClassLoader() : cl;</span><br><span class="line">    <span class="comment">//å®‰å…¨æ–¹é¢è®¾ç½®</span></span><br><span class="line">    acc = (System.getSecurityManager() != <span class="keyword">null</span>) ? AccessController.getContext() : <span class="keyword">null</span>;</span><br><span class="line">    reload();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¸…é™¤æ­¤åŠ è½½ç¨‹åºçš„æä¾›ç¨‹åºç¼“å­˜ï¼Œä»¥ä¾¿é‡æ–°åŠ è½½æ‰€æœ‰æä¾›ç¨‹åºã€‚</span></span><br><span class="line"><span class="comment"> * åœ¨è°ƒç”¨æ­¤æ–¹æ³•ä¹‹åï¼Œè¿­ä»£å™¨æ–¹æ³•çš„åç»­è°ƒç”¨å°†ä»å¤´å¼€å§‹å»¶æ—¶åœ°æŸ¥æ‰¾å’Œå®ä¾‹åŒ–æä¾›ç¨‹åºï¼Œå°±åƒæ–°åˆ›å»ºçš„åŠ è½½å™¨ä¸€æ ·</span></span><br><span class="line"><span class="comment"> * æ­¤æ–¹æ³•é€‚ç”¨äºå¯ä»¥å°†æ–°æä¾›ç¨‹åºå®‰è£…åˆ°æ­£åœ¨è¿è¡Œçš„Javaè™šæ‹Ÿæœºä¸­çš„æƒ…å†µã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reload</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    providers.clear();</span><br><span class="line">    lookupIterator = <span class="keyword">new</span> ServiceLoader.LazyIterator(service, loader);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç§æœ‰å†…éƒ¨ç±»å®ç°å®Œå…¨å»¶æ—¶çš„æä¾›è€…æŸ¥æ‰¾</span></span><br><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">LazyIterator</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">S</span>&gt;</span></span><br><span class="line"><span class="class">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        Class&lt;S&gt; service;</span><br><span class="line">        ClassLoader loader;</span><br><span class="line">        Enumeration&lt;URL&gt; configs = <span class="keyword">null</span>;</span><br><span class="line">        Iterator&lt;String&gt; pending = <span class="keyword">null</span>;</span><br><span class="line">        String nextName = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="title">LazyIterator</span><span class="params">(Class&lt;S&gt; service, ClassLoader loader)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.service = service;</span><br><span class="line">            <span class="keyword">this</span>.loader = loader;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">hasNextService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (nextName != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (configs == <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">/**</span></span><br><span class="line"><span class="comment">                 * private static final String PREFIX = &quot;META-INF/services/&quot;;</span></span><br><span class="line"><span class="comment">                 * å¯ä»¥çœ‹åˆ°ï¼Œå…¶å¯»æ‰¾çš„è·¯å¾„è¿˜æ˜¯è§„èŒƒä¸­æ‰€å†™çš„è·¯å¾„</span></span><br><span class="line"><span class="comment">                 */</span></span><br><span class="line">                    String fullName = PREFIX + service.getName();</span><br><span class="line">                    <span class="keyword">if</span> (loader == <span class="keyword">null</span>)</span><br><span class="line">                        configs = ClassLoader.getSystemResources(fullName);</span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                        configs = loader.getResources(fullName);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException x) &#123;</span><br><span class="line">                    fail(service, <span class="string">&quot;Error locating configuration files&quot;</span>, x);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//è·å–åˆ°é©±åŠ¨æ–‡ä»¶ä¸­æ¯ä¸€è¡Œçš„å†…å®¹ï¼Œæ¯”å¦‚mysql.sql.jdbc.driver</span></span><br><span class="line">            <span class="keyword">while</span> ((pending == <span class="keyword">null</span>) || !pending.hasNext()) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!configs.hasMoreElements()) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                pending = parse(service, configs.nextElement());</span><br><span class="line">            &#125;</span><br><span class="line">            nextName = pending.next();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">private</span> S <span class="title">nextService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (!hasNextService())</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</span><br><span class="line">            String cn = nextName; </span><br><span class="line">            nextName = <span class="keyword">null</span>;</span><br><span class="line">            Class&lt;?&gt; c = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@param</span> cn ä¹‹å‰è·å–åˆ°æ¯ä¸€è¡Œçš„å†…å®¹ï¼Œå³é©±åŠ¨çš„å®Œå…¨é™å®šå</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@param</span> flase ä»£è¡¨ä¸åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@param</span> loader æŒ‡å®šäº†ç±»åŠ è½½å™¨ï¼Œè¿™é‡Œå³æ˜¯çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">                c = Class.forName(cn, <span class="keyword">false</span>, loader);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (ClassNotFoundException x) &#123;</span><br><span class="line">                fail(service,</span><br><span class="line">                     <span class="string">&quot;Provider &quot;</span> + cn + <span class="string">&quot; not found&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!service.isAssignableFrom(c)) &#123;</span><br><span class="line">                fail(service,</span><br><span class="line">                     <span class="string">&quot;Provider &quot;</span> + cn  + <span class="string">&quot; not a subtype&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                S p = service.cast(c.newInstance());</span><br><span class="line">                providers.put(cn, p);</span><br><span class="line">                <span class="keyword">return</span> p;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Throwable x) &#123;</span><br><span class="line">                fail(service,</span><br><span class="line">                     <span class="string">&quot;Provider &quot;</span> + cn + <span class="string">&quot; could not be instantiated&quot;</span>,</span><br><span class="line">                     x);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> Error();          <span class="comment">// This cannot happen</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;   ...   &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> S <span class="title">next</span><span class="params">()</span> </span>&#123;   ...   &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;   ...   &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="iterator"><a href="#iterator" class="headerlink" title="iterator"></a>iterator</h2><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿­ä»£å™¨çš„æ–¹æ³•å®é™…ä¸Šè¿˜æ˜¯è°ƒç”¨ä¹‹å‰<code>reload</code>æ–¹æ³•é‡Œé¢åˆ›å»ºçš„<code>lookupIterator</code>é‡Œé¢çš„æ–¹æ³•ï¼Œæœ‰ç€å»¶æ—¶åŠ è½½çš„ç‰¹æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å»¶æ—¶åŠ è½½æ­¤åŠ è½½ç¨‹åºæœåŠ¡çš„å¯ç”¨æä¾›ç¨‹åº</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Iterator&lt;S&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Iterator&lt;S&gt;() &#123;</span><br><span class="line"></span><br><span class="line">            Iterator&lt;Map.Entry&lt;String,S&gt;&gt; knownProviders</span><br><span class="line">                = providers.entrySet().iterator();</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (knownProviders.hasNext())</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">                <span class="keyword">return</span> lookupIterator.hasNext();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">public</span> S <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (knownProviders.hasNext())</span><br><span class="line">                    <span class="keyword">return</span> knownProviders.next().getValue();</span><br><span class="line">                <span class="keyword">return</span> lookupIterator.next();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h1 id="æ›´æ”¹çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨"><a href="#æ›´æ”¹çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨" class="headerlink" title="æ›´æ”¹çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨"></a>æ›´æ”¹çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> indi.greenhat.jvm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Driver;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ServiceLoader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ›´æ”¹çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨</span></span><br><span class="line">        Thread.currentThread().</span><br><span class="line">                  setContextClassLoader(Test.class.getClassLoader().getParent());</span><br><span class="line"></span><br><span class="line">        ServiceLoader&lt;Driver&gt; loader = ServiceLoader.load(Driver.class);</span><br><span class="line">        Iterator&lt;Driver&gt; iterator = loader.iterator();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            Driver driver = iterator.next();</span><br><span class="line">            System.out.println(<span class="string">&quot;drive:&quot;</span> + driver.getClass() + <span class="string">&quot;,loader:&quot;</span> + driver.getClass().getClassLoader());</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;å½“å‰ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ï¼š&quot;</span> + Thread.currentThread().getContextClassLoader());</span><br><span class="line">        System.out.println(<span class="string">&quot;ServiceLoaderçš„ç±»åŠ è½½å™¨:&quot;</span> + ServiceLoader.class.getClassLoader());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å½“å‰ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ï¼šsun.misc.Launcher$ExtClassLoader@677327b6</span><br><span class="line">ServiceLoaderçš„ç±»åŠ è½½å™¨:<span class="keyword">null</span></span><br></pre></td></tr></table></figure><p><code>Test.class.getClassLoader()</code>çš„classLoaderæ˜¯ç³»ç»Ÿç±»åŠ è½½å™¨ï¼Œé‚£ä¹ˆå…¶çˆ¶åŠ è½½å™¨åˆ™æ˜¯æ‰©å±•ç±»åŠ è½½å™¨ï¼Œæ‰€ä»¥ç¨‹åºè¾“å‡ºæ‰©å±•ç±»åŠ è½½å™¨ï¼Œ<strong>åˆå› ä¸ºæ‰©å±•ç±»åŠ è½½å™¨å¯»æ‰¾çš„è·¯å¾„é‡Œé¢çš„æ–‡ä»¶ä¸åŒ…å«é©±åŠ¨æ‰€åœ¨æ–‡ä»¶ï¼Œæ‰€ä»¥å¾ªç¯æ²¡æœ‰è¾“å‡º</strong>ã€‚</p><hr><p>ä¿®æ”¹çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ä¸ºé»˜è®¤åï¼Œå¯ä»¥æ‰“å°å‡ºç±»åŠ è½½å™¨æƒ…å†µï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">[Loaded indi.greenhat.jvm.Test from file:/home/cc/IdeaProjects/test/out/production/test/]</span><br><span class="line">...</span><br><span class="line">[Loaded com.mysql.cj.jdbc.NonRegisteringDriver from file:/home/cc/Downloads/Hib/mysql-connector-java-<span class="number">8.0</span><span class="number">.15</span>.jar]</span><br><span class="line">[Loaded com.mysql.cj.jdbc.Driver from file:/home/cc/Downloads/Hib/mysql-connector-java-<span class="number">8.0</span><span class="number">.15</span>.jar]</span><br><span class="line">[Loaded com.mysql.cj.exceptions.CJException from file:/home/cc/Downloads/Hib/mysql-connector-java-<span class="number">8.0</span><span class="number">.15</span>.jar]</span><br><span class="line">...</span><br><span class="line">[Loaded com.mysql.cj.exceptions.UnsupportedConnectionStringException from file:/home/cc/Downloads/Hib/mysql-connector-java-<span class="number">8.0</span><span class="number">.15</span>.jar]</span><br><span class="line">...</span><br><span class="line">[Loaded com.mysql.cj.exceptions.UnableToConnectException from file:/home/cc/Downloads/Hib/mysql-connector-java-<span class="number">8.0</span><span class="number">.15</span>.jar]</span><br><span class="line">[Loaded com.mysql.cj.jdbc.AbandonedConnectionCleanupThread from file:/home/cc/Downloads/Hib/mysql-connector-java-<span class="number">8.0</span><span class="number">.15</span>.jar]</span><br><span class="line">...</span><br><span class="line">[Loaded com.mysql.cj.jdbc.AbandonedConnectionCleanupThread$$Lambda$<span class="number">1</span>/<span class="number">1595428806</span> from com.mysql.cj.jdbc.AbandonedConnectionCleanupThread]</span><br><span class="line">...</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jvm </tag>
            
            <tag> æºç  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè™šæ‹Ÿæœºç¬”è®°-çº¿ç¨‹ä¸Šä¸‹æ–‡åŠ è½½å™¨</title>
      <link href="/2019/06/10/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E7%BA%BF%E7%A8%8B%E4%B8%8A%E4%B8%8B%E6%96%87%E5%8A%A0%E8%BD%BD%E5%99%A8/"/>
      <url>/2019/06/10/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E7%BA%BF%E7%A8%8B%E4%B8%8A%E4%B8%8B%E6%96%87%E5%8A%A0%E8%BD%BD%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<p> çº¿ç¨‹ä¸Šä¸‹æ–‡åŠ è½½å™¨</p><span id="more"></span><h1 id="çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨é‡è¦æ€§"><a href="#çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨é‡è¦æ€§" class="headerlink" title="çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨é‡è¦æ€§"></a>çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨é‡è¦æ€§</h1><p>é¦–å…ˆæˆ‘ä»¬çœ‹ä¸¤è¡Œè¾“å‡ºè¯­å¥ï¼Œç¬¬ä¸€ä¸ªæ˜¯è¾“å‡ºThreadå¯¹è±¡çš„ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ï¼Œè€Œç¬¬äºŒä¸ªæ˜¯è¾“å‡ºThreadç±»çš„åŠ è½½å™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> indi.greenhat.jvm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * currentThread():</span></span><br><span class="line"><span class="comment">         * è¿”å›å¯¹å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡çš„å¼•ç”¨</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * getContextClassLoader():</span></span><br><span class="line"><span class="comment">         * è¿”å›æ­¤Threadçš„ä¸Šä¸‹æ–‡ClassLoader</span></span><br><span class="line"><span class="comment">         * ä¸Šä¸‹æ–‡ClassLoaderç”±çº¿ç¨‹çš„åˆ›å»ºè€…æä¾›ï¼Œä¾›åŠ è½½ç±»å’Œèµ„æºæ—¶åœ¨æ­¤çº¿ç¨‹ä¸­è¿è¡Œçš„ä»£ç ä½¿ç”¨</span></span><br><span class="line"><span class="comment">         * å¦‚æœæœªè®¾ç½®ï¼Œåˆ™é»˜è®¤ä¸ºçˆ¶çº¿ç¨‹çš„ClassLoaderä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="comment">         * åŸå§‹çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ClassLoaderé€šå¸¸è®¾ç½®ä¸ºç”¨äºåŠ è½½åº”ç”¨ç¨‹åºçš„ç±»åŠ è½½å™¨</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        System.out.println(Thread.currentThread().getContextClassLoader());</span><br><span class="line"></span><br><span class="line">        System.out.println(Thread.class.getClassLoader());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sun.misc.Launcher$AppClassLoader@18b4aac2</span><br><span class="line"><span class="keyword">null</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å…ˆçœ‹nullï¼Œè¡¨ç¤ºçš„æ˜¯å¯åŠ¨ç±»åŠ è½½å™¨ï¼Œå› ä¸ºThreadç±»æ˜¯ä½äºJavaæ ¸å¿ƒåŒ…é‡Œé¢ï¼Œæ‰€ä»¥å½“ç„¶æ˜¯ç”±å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½çš„ã€‚</p><p>è§£é‡Šç¬¬ä¸€æ¡ä¾‹å­å‰å…ˆçœ‹ä¸€ç‚¹æ¦‚å¿µï¼š</p><ul><li><strong>å½“å‰ç±»åŠ è½½å™¨ï¼ˆCurrent ClassLoaderï¼‰</strong></li></ul><p>æ¯ä¸ªç±»éƒ½ä¼šä½¿ç”¨è‡ªå·±çš„ç±»åŠ è½½å™¨ï¼ˆå³åŠ è½½è‡ªèº«çš„ç±»åŠ è½½å™¨ï¼‰æ¥å»åŠ è½½å…¶ä»–ç±»ï¼ˆæŒ‡çš„æ˜¯æ‰€ä¾èµ–çš„ç±»ï¼‰ï¼Œå¦‚æœClasssXå¼•ç”¨äº†ClassYï¼Œé‚£ä¹ˆClassXçš„ç±»åŠ è½½å™¨å°±ä¼šå»åŠ è½½ClassYï¼ˆå‰ææ˜¯ClassYå°šæœªè¢«åŠ è½½ï¼‰</p><ul><li><strong>çº¿ç¨‹ä¸Šæ–‡ç±»åŠ è½½å™¨ï¼ˆContext ClassLoaderï¼‰</strong></li></ul><ol><li><p>çº¿ç¨‹ä¸Šä¸‹æ–‡åŠ è½½å™¨æ˜¯ä»JDK1.2å¼€å§‹å¼•å…¥çš„ï¼Œç±»Threadä¸­çš„<code>getContextClassLoader</code>ä¸<code>setContextClassLoader(ClassLoader cl)</code>åˆ†åˆ«ç”¨æ¥è·å–å’Œè®¾ç½®ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨</p></li><li><p>å¦‚æœæ²¡æœ‰é€šè¿‡<code>setContextClassLoader(ClassLoader cl)</code>è¿›è¡Œè®¾ç½®çš„è¯ï¼Œçº¿ç¨‹å°†ç»§æ‰¿å…¶çˆ¶çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ã€‚</p></li><li><p>Javaåº”ç”¨è¿è¡Œæ—¶çš„åˆå§‹çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨æ˜¯ç³»ç»Ÿç±»åŠ è½½å™¨ã€‚åœ¨çº¿ç¨‹ä¸­è¿è¡Œçš„ä»£ç å¯ä»¥é€šè¿‡è¯¥ç±»åŠ è½½å™¨æ¥åŠ è½½ç±»ä¸èµ„æºã€‚</p></li><li><p>çº¿ç¨‹ä¸Šæ–‡ç±»åŠ è½½å™¨é‡è¦æ€§ï¼š</p></li></ol><p>å…¶å®å¾ˆç®€å•ï¼Œ<strong>å°±æ˜¯ä¸ºäº†è§£å†³ç±»åŠ è½½å™¨å‘½åç©ºé—´çš„é™åˆ¶</strong>ã€‚åœ¨åŒäº²å§”æ‰˜æœºåˆ¶ä¸‹ï¼Œç±»åŠ è½½æ˜¯ç”±ä¸‹è‡³ä¸Šçš„ï¼Œå³ä¸‹å±‚çš„ç±»åŠ è½½å™¨ä¼šå§”æ‰˜ä¸Šå±‚è¿›è¡ŒåŠ è½½ã€‚åœ¨SPIï¼ˆService Provider Interfaceï¼‰åœºæ™¯ä¸‹ï¼Œ<strong>æœ‰äº›æ¥å£æ˜¯Javaæ ¸å¿ƒåº“æä¾›çš„ï¼Œå¹¶ä¸”æ˜¯ç”±å¯åŠ¨ç±»åŠ è½½å™¨æ¥åŠ è½½çš„ï¼Œè€Œè¿™äº›æ¥å£çš„å®ç°å´æ¥è‡ªä¸åŒçš„jaråŒ…ï¼ˆå®ç°å‚å•†æä¾›ï¼‰ï¼ŒJavaçš„å¯åŠ¨ç±»åŠ è½½å™¨æ˜¯ä¸ä¼šåŠ è½½å…¶å®ƒæ¥æºçš„JaråŒ…</strong>ï¼Œè¿™æ ·ä¼ ç»Ÿçš„åŒäº²å§”æ‰˜æœºåˆ¶æ— æ³•æ»¡è¶³SPIè¦æ±‚ã€‚é€šè¿‡ç»™å½“å‰çº¿ç¨‹è®¾ç½®ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ï¼Œå°±å¯ä»¥ç”±å…¶è´Ÿè´£åŠ è½½æ¥å£å®ç°çš„ç±»ã€‚</p><p>å°±å¥½åƒJDBCï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(driverClass);</span><br><span class="line">Connection con = DriverManager.getConnection(dataBase, usrName, passWord);</span><br><span class="line">stm = con.createStatement();</span><br></pre></td></tr></table></figure><p>ä¸€äº›æ¥å£æ˜¯æœ¬æ¥å·²ç»å­˜åœ¨äºJDKä¸­ï¼Œè€Œé©±åŠ¨åŒ…ï¼ˆæ¥å£çš„å®ç°ï¼‰åˆ™æ˜¯å‚å•†æä¾›çš„ã€‚</p><p><strong>æ‰€ä»¥ï¼Œçˆ¶ClassLoaderå¯ä»¥ä½¿ç”¨å½“å‰çº¿ç¨‹<code>Thread.currentThread().getContextLoader()</code>æ‰€æŒ‡å®šçš„ClassLoaderåŠ è½½çš„ç±»ã€‚è¿™æ ·å°±æ”¹å˜äº†çˆ¶ClassLoaderä¸èƒ½ä½¿ç”¨å­ClassLoaderæˆ–æ˜¯å…¶ä»–æ²¡æœ‰ç›´æ¥çˆ¶å­å…³ç³»çš„ClassLoaderåŠ è½½çš„ç±»çš„æƒ…å†µï¼Œå³æ”¹å˜äº†åŒäº²å§”æ´¾æ¨¡å‹ã€‚</strong></p><p>å½“é«˜å±‚æä¾›äº†ç»Ÿä¸€çš„æ¥å£è®©åº•å±‚å»å®ç°ï¼ŒåŒæ—¶åˆè¦åœ¨é«˜å±‚åŠ è½½ï¼ˆæˆ–å®ä¾‹åŒ–ï¼‰åº•å±‚çš„ç±»æ—¶ï¼Œå°±å¿…é¡»è¦é€šè¿‡çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨æ¥å¸®åŠ©é«˜å±‚çš„ClassLoaderæ‰¾åˆ°å¹¶åŠ è½½è¯¥ç±»ã€‚</p><hr><p><strong>çº¿ç¨‹ä¸Šä¸‹æ–‡åŠ è½½å™¨å°±æ˜¯å½“å‰çº¿ç¨‹çš„Current Loader</strong></p><p>å› ä¸ºJavaåº”ç”¨è¿è¡Œæ—¶çš„åˆå§‹çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨æ˜¯ç³»ç»Ÿç±»åŠ è½½å™¨ï¼Œæ‰€ä»¥ç¬¬ä¸€è¡Œè¾“å‡ºçš„æ˜¯ç³»ç»Ÿç±»åŠ è½½å™¨</p><p>ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>ä»Launcherç±»çš„æ„é€ å‡½æ•°å°±å¯ä»¥çœ‹å‡ºï¼Œé»˜è®¤æ˜¯è®¾ç½®ä¸ºç³»ç»Ÿç±»åŠ è½½å™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Launcher</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   ...</span><br><span class="line">       <span class="comment">//ç”¨äºå¯åŠ¨åº”ç”¨ç¨‹åºçš„ç±»åŠ è½½å™¨</span></span><br><span class="line">       loader = AppClassLoader.getAppClassLoader(extcl);</span><br><span class="line">...</span><br><span class="line">       <span class="comment">// ä¸ºåŸå§‹çº¿ç¨‹è®¾ç½®ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ã€‚</span></span><br><span class="line">       Thread.currentThread().setContextClassLoader(loader);</span><br><span class="line">    ...</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><hr><h1 id="çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ä½¿ç”¨"><a href="#çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ä½¿ç”¨" class="headerlink" title="çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ä½¿ç”¨"></a>çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ä½¿ç”¨</h1><p>çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨çš„ä¸€èˆ¬ä½¿ç”¨æ¨¡å¼ï¼šï¼ˆè·å–â€”ä½¿ç”¨â€”è¿˜åŸï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ClassLoader classLoader = Thread.currentThread().getContextClassLoader();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    Thread.currentThread().setContextClassLoader(customerLoader);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è°ƒç”¨äº†Thread.currentThread().getContextClassLoader()</span></span><br><span class="line"><span class="comment">     * è·å–å½“å‰çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨åšæŸäº›äº‹æƒ…</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    myMethod(); </span><br><span class="line">&#125; <span class="keyword">finally</span>&#123;</span><br><span class="line">    Thread,currentThread().setContextClassLoader(classLoader); <span class="comment">//è¿˜åŸï¼Œä»¥ä¾›ä¸‹æ¬¡ä½¿ç”¨</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jvm </tag>
            
            <tag> çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨ArchLinuxä¸­ä½¿ç”¨æœ€æ–°çš„å†…æ ¸æ¨¡å—ç›‘æ§Ryzenæ¸©åº¦</title>
      <link href="/2019/06/09/%E5%9C%A8ArchLinux%E4%B8%AD%E4%BD%BF%E7%94%A8%E6%9C%80%E6%96%B0%E7%9A%84%E5%86%85%E6%A0%B8%E6%A8%A1%E5%9D%97%E7%9B%91%E6%8E%A7Ryzen%E6%B8%A9%E5%BA%A6/"/>
      <url>/2019/06/09/%E5%9C%A8ArchLinux%E4%B8%AD%E4%BD%BF%E7%94%A8%E6%9C%80%E6%96%B0%E7%9A%84%E5%86%85%E6%A0%B8%E6%A8%A1%E5%9D%97%E7%9B%91%E6%8E%A7Ryzen%E6%B8%A9%E5%BA%A6/</url>
      
        <content type="html"><![CDATA[<p>AMD Ryzen Temperatures</p><span id="more"></span><p>å‚è€ƒ:</p><p><a href="https://linuxconfig.org/monitor-amd-ryzen-temperatures-in-linux-with-latest-kernel-modules">Monitor AMD Ryzen Temperatures In Linux with latest kernel modules</a></p><hr><p>å› ä¸ºéœ€è¦æŸ¥çœ‹ä¸€äº›ç¡¬ä»¶çš„æ¸©åº¦ï¼ŒåˆåŠ ä¸Šç›®å‰<code>5.1.7-arch1-1-ARCH</code>å†…æ ¸åªæ˜¯æ˜¾ç¤ºcpuæ¸©åº¦ï¼Œæ‰€ä»¥éœ€è¦è‡ªå·±åŠ è½½ä¸€äº›æ¨¡å—ï¼Œå…¶å®è¿‡ç¨‹è¿˜æ˜¯å¾ˆç®€å•çš„</p><p>è¦æ±‚ï¼š</p><p>ä½¿ç”¨å†…æ ¸4.11æˆ–æ›´é«˜ç‰ˆæœ¬ä»¥åŠrootæƒé™çš„Linuxå®‰è£…ã€‚</p><p>å…·ä½“æµç¨‹ï¼š</p><h1 id="ç¡®å®šmodules"><a href="#ç¡®å®šmodules" class="headerlink" title="ç¡®å®šmodules"></a>ç¡®å®šmodules</h1><p><code>Ryzen</code>æ¿ä¸Šä¸€èˆ¬æœ‰ä¸¤ç§æ¨¡å—ã€‚ä»–ä»¬æ˜¯<code>it87</code>å’Œ<code>nct6775</code>ã€‚æ—§çš„ä¸»æ¿ä¸€èˆ¬æ˜¯å‰è€…ï¼Œæ–°çš„ä¸€èˆ¬æ˜¯åè€…ï¼Œå…·ä½“çš„å¯ä»¥æœç´¢ä¸‹ï¼Œæœ¬æ¬¡ä½¿ç”¨çš„<code>MSI B450 TOMAHAWK</code>å±äºåè€…</p><h1 id="å…·ä½“å‘½ä»¤"><a href="#å…·ä½“å‘½ä»¤" class="headerlink" title="å…·ä½“å‘½ä»¤"></a>å…·ä½“å‘½ä»¤</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S linux-headers</span><br><span class="line">yay -S nct6775-master-dkms-git</span><br><span class="line">sudo vim /etc/modules-load.d/modules.conf</span><br><span class="line"><span class="meta">#</span><span class="bash">å¾€æ–‡ä»¶é‡Œé¢æ·»åŠ <span class="string">&quot;nct6775&quot;</span></span></span><br><span class="line">sudo modprobe nct6775</span><br><span class="line">sudo reboot</span><br><span class="line">sensors</span><br></pre></td></tr></table></figure><p><img src="/2019/06/09/%E5%9C%A8ArchLinux%E4%B8%AD%E4%BD%BF%E7%94%A8%E6%9C%80%E6%96%B0%E7%9A%84%E5%86%85%E6%A0%B8%E6%A8%A1%E5%9D%97%E7%9B%91%E6%8E%A7Ryzen%E6%B8%A9%E5%BA%A6/1.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Arch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®°-è¿ç§»archåˆ°ä¸åŒç¡¬ç›˜</title>
      <link href="/2019/06/09/%E8%AE%B0-%E8%BF%81%E7%A7%BBarch%E5%88%B0%E4%B8%8D%E5%90%8C%E7%A1%AC%E7%9B%98/"/>
      <url>/2019/06/09/%E8%AE%B0-%E8%BF%81%E7%A7%BBarch%E5%88%B0%E4%B8%8D%E5%90%8C%E7%A1%AC%E7%9B%98/</url>
      
        <content type="html"><![CDATA[<p>è¿ç§»sataå›ºæ€ç¡¬ç›˜ä¸­çš„archåˆ°ç©ºçš„nvmeå›ºæ€ç¡¬ç›˜é‡Œé¢</p><span id="more"></span><h1 id="åˆ†åŒº"><a href="#åˆ†åŒº" class="headerlink" title="åˆ†åŒº"></a>åˆ†åŒº</h1><p><strong>è®°åŸæœ¬sataå›ºæ€ç¡¬ç›˜ä¸º/dev/sdaï¼Œnvmeå›ºæ€å›ºæ€ä¸º/dev/nvme</strong></p><p>åŸsataç¡¬ç›˜åˆ†åŒºä¸ºï¼Œå¯åŠ¨æ–¹å¼ä¸ºuefi</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/         --&gt; /dev/sda1</span><br><span class="line">/home     --&gt; /dev/sda2</span><br><span class="line">swap      --&gt; /dev/sda3</span><br><span class="line">/boot/efi --&gt; /dev/sda4</span><br></pre></td></tr></table></figure><p>åˆ™æˆ‘ä»¬éœ€è¦åœ¨æ–°çš„nvmeå›ºæ€ç¡¬ç›˜åŒæ ·åˆ†å››ä¸ªåŒºï¼Œå¹¶ä¸”åˆ†åˆ«æ ¼å¼åŒ–ä¸ºå¯¹åº”çš„æ ¼å¼ï¼Œæ–°çš„ç¡¬ç›˜åˆ†åŒºä¸èƒ½å°äºæ—§çš„ç¡¬ç›˜åˆ†åŒºã€‚</p><p>é‚£ä¹ˆè¿ç§»è¿‡æ¥æˆ‘ä»¬çš„åˆ†åŒºå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/         --&gt; /dev/nvme1 (ext4)</span><br><span class="line">/home     --&gt; /dev/nvme2 (ext4)</span><br><span class="line">swap      --&gt; /dev/nvme3 (linux-swap)</span><br><span class="line">/boot/efi --&gt; /dev/nvme4 (fat32)</span><br></pre></td></tr></table></figure><h1 id="linux-livecd"><a href="#linux-livecd" class="headerlink" title="linux livecd"></a>linux livecd</h1><p>åŸç³»ç»Ÿæ˜¯å“ªä¸ªå‘è¡Œç‰ˆï¼Œåˆ™æœ€å¥½ç”¨å¯¹åº”å‘è¡Œç‰ˆçš„livecdã€‚æ‰€ä»¥åœ¨æ­¤å‡†å¤‡äº†ä¸ªarch linuxçš„livecd</p><p><strong>åŸæœ¬æ˜¯ç”¨manjaro linuxcdçš„ï¼Œåæ¥å‘ç°æœ‰æŒºå¤šçš„é—®é¢˜ï¼Œè½¬æ¢ä¸ºarch linuxçš„livecdåä¸€è·¯é¡ºç•…ã€‚</strong></p><h1 id="livecdæ“ä½œ"><a href="#livecdæ“ä½œ" class="headerlink" title="livecdæ“ä½œ"></a>livecdæ“ä½œ</h1><p>æ¥ç€è¿›å…¥linuxcdåè”ç½‘ã€‚</p><p>è¿™é‡Œå› ä¸ºä¹‹å‰åœ¨manjaro livecdçš„æ—¶å€™ä¸å°å¿ƒæŠŠbootåˆ†åŒºå¼„æ²¡äº†ï¼Œæ‰€ä»¥ç°åœ¨çš„æ€è·¯å°±æ˜¯å¤åˆ¶/å’Œ/homeåˆ†åŒºåï¼Œç„¶å<code>arch-chroot</code>è¿›å»åå¼„grubï¼Œæ‰€ä»¥ã€‚</p><h2 id="ddæ‹·è´"><a href="#ddæ‹·è´" class="headerlink" title="ddæ‹·è´"></a>ddæ‹·è´</h2><p>æ‹·è´å¯¹åº”çš„åˆ†åŒºï¼Œå› ä¸ºddçš„ä¼šæŠŠå¯¹åº”ç¡¬ç›˜uuidä¹Ÿæ‹·è´è¿‡å»ï¼Œæ‰€ä»¥ä¸éœ€è¦æ›´æ”¹<code>/etc/fstab</code>æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">dd if=/dev/sda1 of=/dev/nvme1</span><br><span class="line">dd if=/dev/sda2 of=/dev/nvme2</span><br><span class="line"></span><br><span class="line">e2fsck -f /dev/nvme1</span><br><span class="line">resize2f /dev/nvme1</span><br><span class="line">e2fsck -f /dev/nvme2</span><br><span class="line">resize2f /dev/nvme2</span><br></pre></td></tr></table></figure><h2 id="æ“ä½œbootåˆ†åŒº"><a href="#æ“ä½œbootåˆ†åŒº" class="headerlink" title="æ“ä½œbootåˆ†åŒº"></a>æ“ä½œbootåˆ†åŒº</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /mnt/home</span><br><span class="line">mkdir -p /mnt/boot/efi</span><br><span class="line"></span><br><span class="line">mount /dev/nvme1 /mnt</span><br><span class="line">mount /dev/nvme2 /mnt/home</span><br><span class="line">mount /dev/nvme4 /mnt/boot/efi</span><br></pre></td></tr></table></figure><h2 id="arch-chroot"><a href="#arch-chroot" class="headerlink" title="arch-chroot"></a>arch-chroot</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">arch-chroot /mnt</span><br><span class="line">pacman -Sy</span><br><span class="line">pacman -S grub efibootmgr linux</span><br><span class="line">grub-install --target=x86_64-efi --efi-directory=/mnt/boot/efi --bootloader-id=grub</span><br><span class="line">grub-mkconfig -o /boot/grub/grub.cfg</span><br><span class="line">pacman -S amd-ucode</span><br><span class="line"><span class="meta">#</span><span class="bash">æ³¨æ„æ­¤å¤„éœ€è¦å®‰è£…linuxåŒ…ï¼Œå› ä¸ºéƒ¨åˆ†bootåˆ†åŒºä¹Ÿåœ¨linuxåŒ…é‡Œé¢</span></span><br></pre></td></tr></table></figure><h2 id="é€€å‡º"><a href="#é€€å‡º" class="headerlink" title="é€€å‡º"></a>é€€å‡º</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">exit</span><br><span class="line">umount -R /mnt</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥äº†</p><p><img src="/2019/06/09/%E8%AE%B0-%E8%BF%81%E7%A7%BBarch%E5%88%B0%E4%B8%8D%E5%90%8C%E7%A1%AC%E7%9B%98/1.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Arch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè®¾è®¡æ¨¡å¼-ä»£ç†æ¨¡å¼</title>
      <link href="/2019/06/03/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/03/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>ä»£ç†æ¨¡å¼</p><span id="more"></span><p>å‚è€ƒ:<a href="https://segmentfault.com/a/1190000011291179">Javaä¸‰ç§ä»£ç†æ¨¡å¼ï¼šé™æ€ä»£ç†ã€åŠ¨æ€ä»£ç†å’Œcglibä»£ç†</a></p><p><a href="https://blog.csdn.net/LoveLion/article/details/8227953">C#è®¾è®¡æ¨¡å¼ä¹‹ä»£ç†æ¨¡å¼</a></p><p><a href="https://www.cnblogs.com/yangming1996/p/9254412.html">åŸºäº JDK çš„åŠ¨æ€ä»£ç†æœºåˆ¶</a></p><h1 id="ä»£ç†æ¨¡å¼"><a href="#ä»£ç†æ¨¡å¼" class="headerlink" title="ä»£ç†æ¨¡å¼"></a>ä»£ç†æ¨¡å¼</h1><h2 id="å«ä¹‰"><a href="#å«ä¹‰" class="headerlink" title="å«ä¹‰"></a>å«ä¹‰</h2><p>ä»£ç†æ¨¡å¼æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œæä¾›äº†å¯¹ç›®æ ‡å¯¹è±¡é¢å¤–çš„è®¿é—®æ–¹å¼ï¼Œå³é€šè¿‡ä»£ç†å¯¹è±¡è®¿é—®ç›®æ ‡å¯¹è±¡ï¼Œè¿™æ ·å¯ä»¥åœ¨ä¸ä¿®æ”¹åŸç›®æ ‡å¯¹è±¡çš„å‰æä¸‹ï¼Œæä¾›é¢å¤–çš„åŠŸèƒ½æ“ä½œï¼Œæ‰©å±•ç›®æ ‡å¯¹è±¡çš„åŠŸèƒ½ã€‚ç®€è¨€ä¹‹ï¼Œä»£ç†æ¨¡å¼å°±æ˜¯è®¾ç½®ä¸€ä¸ªä¸­é—´ä»£ç†æ¥æ§åˆ¶è®¿é—®åŸç›®æ ‡å¯¹è±¡ï¼Œä»¥è¾¾åˆ°å¢å¼ºåŸå¯¹è±¡çš„åŠŸèƒ½å’Œç®€åŒ–è®¿é—®æ–¹å¼ã€‚</p><hr><p>ä¸¾ä¾‹æ­Œæ‰‹ä¸ç»çºªäºº</p><p><img src="/2019/06/03/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/2.png" alt></p><p><img src="/2019/06/03/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/3.png" alt></p><h2 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h2><p>ä»£ç†æ¨¡å¼çš„ç»“æ„æ¯”è¾ƒç®€å•ï¼Œå…¶æ ¸å¿ƒæ˜¯ä»£ç†ç±»ï¼Œä¸ºäº†è®©å®¢æˆ·ç«¯èƒ½å¤Ÿä¸€è‡´æ€§åœ°å¯¹å¾…çœŸå®å¯¹è±¡å’Œä»£ç†å¯¹è±¡ï¼Œåœ¨ä»£ç†æ¨¡å¼ä¸­å¼•å…¥äº†æŠ½è±¡å±‚</p><p><img src="/2019/06/03/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/blog_md/Javaè®¾è®¡æ¨¡å¼-ä»£ç†æ¨¡å¼/1.jpg" alt></p><p><strong>Subjectï¼ˆæŠ½è±¡è§’è‰²ï¼‰ï¼š</strong>å®šä¹‰ä»£ç†è§’è‰²å’ŒçœŸå®è§’è‰²çš„å…¬å…±å¯¹å¤–æ–¹æ³•</p><p><strong>Proxyï¼ˆä»£ç†è§’è‰²ï¼‰</strong>ï¼šå®ç°æŠ½è±¡è§’è‰²ï¼Œæ˜¯çœŸå®è§’è‰²çš„ä»£ç†ï¼Œé€šè¿‡çœŸå®è§’è‰²çš„ä¸šåŠ¡é€»è¾‘æ–¹æ³•æ¥å®ç°æŠ½è±¡æ–¹æ³•ï¼Œå¹¶å¯ä»¥é™„åŠ è‡ªå·±çš„æ“ä½œ</p><p><strong>RealSubjectï¼ˆçœŸå®è§’è‰²ï¼‰ï¼š</strong>å®ç°æŠ½è±¡è§’è‰²ï¼Œå®šä¹‰çœŸå®è§’è‰²æ‰€è¦å®ç°çš„ä¸šåŠ¡é€»è¾‘ï¼Œä¾›ä»£ç†è§’è‰²è°ƒç”¨ã€‚å…³æ³¨äºçœŸæ­£çš„ä¸šåŠ¡é€»è¾‘</p><h2 id="æ ¸å¿ƒä½œç”¨"><a href="#æ ¸å¿ƒä½œç”¨" class="headerlink" title="æ ¸å¿ƒä½œç”¨"></a>æ ¸å¿ƒä½œç”¨</h2><ol><li>é€šè¿‡ä»£ç†ï¼Œæ§åˆ¶å¯¹è±¡çš„è®¿é—®ï¼šå¯ä»¥è¯¦ç»†æ§åˆ¶è®¿é—®æŸä¸ªï¼ˆæŸç±»ï¼‰å¯¹è±¡çš„æ–¹æ³•ï¼Œåœ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•å‰åšå‰ç½®å¤„ç†ï¼Œè°ƒç”¨è¿™ä¸ªæ–¹æ³•ååšåç½®å¤„ç†ã€‚ï¼ˆå³AOPçš„å¾®è§‚å®ç°ï¼‰</li><li>AOP(Aspect Oriented Programming é¢å‘åˆ‡é¢ç¼–ç¨‹)çš„æ ¸å¿ƒå®ç°æœºåˆ¶</li></ol><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><ol><li>å®‰å…¨ä»£ç†ï¼šå±è”½å¯¹çœŸå®è§’è‰²çš„ç›´æ¥è®¿é—®</li><li>è¿œç¨‹ä»£ç†ï¼šé€šè¿‡ä»£ç†ç±»å¤„ç†è¿œç¨‹æ–¹æ³•è°ƒç”¨ï¼ˆ<em>RMI</em>:è¿œç¨‹æ–¹æ³•è°ƒç”¨(Remote Method Invocation)ï¼‰</li><li><p>å»¶è¿ŸåŠ è½½ï¼šå…ˆåŠ è½½è½»é‡çº§çš„ä»£ç†å¯¹è±¡ï¼ŒçœŸæ­£éœ€è¦å†åŠ è½½çœŸå®å¯¹è±¡</p></li><li><p>å¼€å‘æ¡†æ¶ä¸­çš„åº”ç”¨åœºæ™¯ï¼š</p><ul><li>struct2ä¸­æ‹¦æˆªå™¨çš„å®ç°</li><li>æ•°æ®åº“è¿æ¥æ± å…³é—­å¤„ç†</li><li>Hibernateä¸­å»¶æ—¶åŠ è½½çš„å®ç°</li><li>mybatisä¸­å®ç°æ‹¦æˆªå™¨æ’ä»¶</li><li>AspectJçš„å®ç°</li><li>springä¸­AOPçš„å®ç°ï¼šæ—¥å¿—æ‹¦æˆªï¼Œå£°æ˜å¼äº‹åŠ¡å¤„ç†</li><li>web service</li><li>RMIè¿œç¨‹æ–¹æ³•è°ƒç”¨</li><li>â€¦</li></ul></li></ol><h2 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h2><ol><li>é™æ€ä»£ç†ï¼ˆé™æ€å®šä¹‰ä»£ç†ç±»ï¼‰</li><li>åŠ¨æ€ä»£ç†ï¼ˆåŠ¨æ€ç”Ÿæˆä»£ç†ç±»ï¼‰<ul><li>JDKè‡ªå¸¦çš„åŠ¨æ€ä»£ç†</li><li>javaassistå­—èŠ‚ç æ“ä½œåº“å®ç°</li><li>CGLIB</li><li>ASMï¼ˆåº•å±‚ä½¿ç”¨æŒ‡ä»¤ï¼Œå¯ç»´æŠ¤æ€§è¾ƒå·®ï¼‰</li></ul></li></ol><h1 id="é™æ€ä»£ç†"><a href="#é™æ€ä»£ç†" class="headerlink" title="é™æ€ä»£ç†"></a>é™æ€ä»£ç†</h1><p>è¿™ç§ä»£ç†æ–¹å¼éœ€è¦ä»£ç†å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡å®ç°ä¸€æ ·çš„æ¥å£</p><ul><li><p>ä¼˜ç‚¹ï¼šå¯ä»¥åœ¨ä¸ä¿®æ”¹ç›®æ ‡å¯¹è±¡çš„å‰æä¸‹æ‰©å±•ç›®æ ‡å¯¹è±¡çš„åŠŸèƒ½</p></li><li><p>ç¼ºç‚¹ï¼š</p><ol><li>å†—ä½™ã€‚ç”±äºä»£ç†å¯¹è±¡è¦å®ç°ä¸ç›®æ ‡å¯¹è±¡ä¸€è‡´çš„æ¥å£ï¼Œä¼šäº§ç”Ÿè¿‡å¤šçš„ä»£ç†ç±»ã€‚</li><li>ä¸æ˜“ç»´æŠ¤ã€‚ä¸€æ—¦æ¥å£å¢åŠ æ–¹æ³•ï¼Œç›®æ ‡å¯¹è±¡ä¸ä»£ç†å¯¹è±¡éƒ½è¦è¿›è¡Œä¿®æ”¹ã€‚</li></ol></li></ul><h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><p>æ ¹æ®å‰é¢ä¸¾ä¾‹çš„ç»çºªäººå’Œæ­Œæ‰‹å…³ç³»æ¥ç¼–å†™ç®€å•çš„å®ä¾‹</p><p><img src="/2019/06/03/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/4.png" alt></p><p><strong>Staræ˜¯æŠ½è±¡è§’è‰²ï¼ŒRealStaræ˜¯çœŸå®è§’è‰²ï¼ŒProxyStaræ˜¯ä»£ç†è§’è‰²ï¼Œclientæ˜¯ç”¨æˆ·</strong></p><h3 id="Star-java"><a href="#Star-java" class="headerlink" title="Star.java"></a>Star.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> StaticProxy;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŠ½è±¡è§’è‰²</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Star</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é¢è°ˆ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">confer</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç­¾åˆåŒ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">signContract</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¢é£æœºç¥¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">bookTicket</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å”±æ­Œ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">sing</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ”¶å°¾æ¬¾</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">CollectMoney</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="RealStar-java"><a href="#RealStar-java" class="headerlink" title="RealStar.java"></a>RealStar.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> StaticProxy;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * çœŸå®è§’è‰²</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RealStar</span> <span class="keyword">implements</span> <span class="title">Star</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">confer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;RealStar.confer&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">signContract</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;RealStar.signContract&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bookTicket</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;RealStar.bookTicket&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sing</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;RealStar(æ­Œæ˜Ÿæœ¬äºº).sing&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">CollectMoney</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;RealStar.CollectMoney&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ProxyStar-java"><a href="#ProxyStar-java" class="headerlink" title="ProxyStar.java"></a>ProxyStar.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> StaticProxy;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä»£ç†è§’è‰²</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyStar</span> <span class="keyword">implements</span> <span class="title">Star</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Star star;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ProxyStar</span><span class="params">(Star star)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.star = star;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">confer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ProxyStar.confer&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">signContract</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ProxyStar.signContract&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bookTicket</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ProxyStar.bookTicket&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿™é‡Œå’Œæ˜æ˜Ÿä¸åŒçš„æ˜¯ï¼Œç»çºªäººä¸èƒ½å”±æ­Œ</span></span><br><span class="line"><span class="comment">     * æ‰€ä»¥åªèƒ½äº¤ç»™æ­Œæ‰‹</span></span><br><span class="line"><span class="comment">     * é‚£ä¹ˆå°±éœ€è¦ä¸€ä¸ªæ­Œæ‰‹å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sing</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        star.sing();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">CollectMoney</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ProxyStar.CollectMoney&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Client-java"><a href="#Client-java" class="headerlink" title="Client.java"></a>Client.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> StaticProxy;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®¢æˆ·è§’è‰²</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Star real = <span class="keyword">new</span> RealStar();</span><br><span class="line">        Star proxy = <span class="keyword">new</span> ProxyStar(real);</span><br><span class="line"></span><br><span class="line">        proxy.confer();</span><br><span class="line">        proxy.signContract();</span><br><span class="line">        proxy.bookTicket();</span><br><span class="line">        proxy.sing();</span><br><span class="line">        proxy.CollectMoney();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¾“å‡º"><a href="#è¾“å‡º" class="headerlink" title="è¾“å‡º"></a>è¾“å‡º</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ProxyStar.confer</span><br><span class="line">ProxyStar.signContract</span><br><span class="line">ProxyStar.bookTicket</span><br><span class="line">RealStar(æ­Œæ˜Ÿæœ¬äºº).sing</span><br><span class="line">ProxyStar.CollectMoney</span><br></pre></td></tr></table></figure><h1 id="åŠ¨æ€ä»£ç†"><a href="#åŠ¨æ€ä»£ç†" class="headerlink" title="åŠ¨æ€ä»£ç†"></a>åŠ¨æ€ä»£ç†</h1><p>æŠ½è±¡è§’è‰²ï¼ˆæ¥å£ï¼‰å£°æ˜çš„æ‰€æœ‰æ–¹æ³•éƒ½è¢«è½¬ç§»åˆ°è°ƒç”¨å¤„ç†å™¨ä¸€ä¸ªé›†ä¸­çš„æ–¹æ³•ä¸­å¤„ç†ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥æ›´åŠ çµæ´»å’Œç»Ÿä¸€çš„å¤„ç†ä¼—å¤šæ–¹æ³•ã€‚</p><p>é™æ€ä»£ç†ä¸åŠ¨æ€ä»£ç†çš„åŒºåˆ«ä¸»è¦åœ¨ï¼š</p><ul><li>é™æ€ä»£ç†åœ¨ç¼–è¯‘æ—¶å°±å·²ç»å®ç°ï¼Œç¼–è¯‘å®Œæˆåä»£ç†ç±»æ˜¯ä¸€ä¸ªå®é™…çš„classæ–‡ä»¶</li><li>åŠ¨æ€ä»£ç†æ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆçš„ï¼Œå³ç¼–è¯‘å®Œæˆåæ²¡æœ‰å®é™…çš„classæ–‡ä»¶ï¼Œè€Œæ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆç±»å­—èŠ‚ç ï¼Œå¹¶åŠ è½½åˆ°JVMä¸­</li></ul><h2 id="JDKè‡ªå¸¦çš„åŠ¨æ€ä»£ç†"><a href="#JDKè‡ªå¸¦çš„åŠ¨æ€ä»£ç†" class="headerlink" title="JDKè‡ªå¸¦çš„åŠ¨æ€ä»£ç†"></a>JDKè‡ªå¸¦çš„åŠ¨æ€ä»£ç†</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Proxy</span> <span class="keyword">extends</span> <span class="title">Object</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span></span><br></pre></td></tr></table></figure><p><code>Proxy</code>æä¾›äº†åˆ›å»ºåŠ¨æ€ä»£ç†ç±»å’Œå®ä¾‹çš„é™æ€æ–¹æ³•ï¼Œå®ƒä¹Ÿæ˜¯ç”±è¿™äº›æ–¹æ³•åˆ›å»ºçš„æ‰€æœ‰åŠ¨æ€ä»£ç†ç±»çš„è¶…ç±»</p><p>ä¸ºæŸä¸ªæ¥å£åˆ›å»ºä»£ç†<code>Foo</code> :</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">InvocationHandler handler = <span class="keyword">new</span> MyInvocationHandler(...);</span><br><span class="line">     Class&lt;?&gt; proxyClass = Proxy.getProxyClass(Foo.class.getClassLoader(), Foo.class);</span><br><span class="line">     Foo f = (Foo) proxyClass.getConstructor(InvocationHandler.class).</span><br><span class="line">                     newInstance(handler); </span><br></pre></td></tr></table></figure><p>æˆ–æ›´ç®€å•åœ°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Foo f = (Foo) Proxy.newProxyInstance(Foo.class.getClassLoader(),</span><br><span class="line">                                         <span class="keyword">new</span> Class&lt;?&gt;[] &#123; Foo.class &#125;,</span><br><span class="line">                                         handler);</span><br></pre></td></tr></table></figure><p><em>åŠ¨æ€ä»£ç†ç±»</em> ï¼ˆä»¥ä¸‹ç®€ç§°ä¸º<em>ä»£ç†ç±»</em> ï¼‰æ˜¯ä¸€ä¸ªå®ç°åœ¨ç±»åˆ›å»ºæ—¶åœ¨è¿è¡Œæ—¶æŒ‡å®šçš„æ¥å£åˆ—è¡¨çš„ç±»ï¼Œå…·æœ‰å¦‚ä¸‹æ‰€è¿°çš„è¡Œä¸ºã€‚</p><p><em>ä»£ç†æ¥å£</em>æ˜¯ç”±ä»£ç†ç±»å®ç°çš„æ¥å£ã€‚æ¯ä¸ªä»£ç†å®ä¾‹éƒ½æœ‰ä¸€ä¸ªå…³è”çš„è°ƒç”¨å¤„ç†ç¨‹åºå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å®ç°äº†<code>InvocationHandler</code>æ¥å£ã€‚é€šè¿‡å…¶ä»£ç†æ¥å£ä¹‹ä¸€å¯¹ä»£ç†å®ä¾‹è¿›è¡Œæ–¹æ³•è°ƒç”¨å°†è¢«è°ƒåº¦åˆ°å®ä¾‹è°ƒç”¨å¤„ç†ç¨‹åºçš„<code>invoke</code>æ–¹æ³•ï¼Œå¹¶ä¼ é€’ä»£ç†å®ä¾‹<code>java.lang.reflect</code>ã€‚æ ‡è¯†è¢«è°ƒç”¨æ–¹æ³•çš„æ–¹æ³•å¯¹è±¡ï¼Œä»¥åŠåŒ…å«å‚æ•°çš„Objectç±»å‹æ•°ç»„ã€‚è°ƒç”¨å¤„ç†ç¨‹åºæ ¹æ®éœ€è¦å¤„ç†ç¼–ç çš„æ–¹æ³•è°ƒç”¨ï¼Œå¹¶ä¸”å®ƒè¿”å›çš„ç»“æœå°†ä½œä¸ºä»£ç†å®ä¾‹ä¸Šçš„æ–¹æ³•è°ƒç”¨çš„ç»“æœè¿”å›ã€‚</p><p>ä»£ç†ç±»å…·æœ‰ä»¥ä¸‹å±æ€§:</p><ul><li>ä»£ç†ç±»æ˜¯public,finalçš„ï¼Œä¸æ˜¯æŠ½è±¡çš„ï¼Œä¸å¯ç»§æ‰¿</li><li>ä»£ç†å¯¹è±¡ç±»åæ˜¯æ²¡æœ‰æ˜ç¡®å®šä¹‰çš„ï¼Œä½†æ˜¯ä»¥<code>$Proxy</code>å¼€å¤´çš„ç±»åè¦ç»™ä»£ç†å¯¹è±¡ä¿ç•™ç€ï¼Œæ‰€ä»¥æ ‡å‡†æƒ…å†µä¸‹å¦‚æœå‘ç°æŸä¸ªclassçš„ç±»åä»¥<code>$Proxy</code>å¼€å¤´ï¼Œé‚£å®ƒè‚¯å®šæ˜¯ä»£ç†å¯¹è±¡ï¼Œ</li><li>ä»£ç†ç±»æ‰©å±•äº†<code>java.lang.reflect.proxy</code>ã€‚æ‰€ä»¥å¯ä»¥ç”¨<code>instanceof</code>æ¥åˆ¤æ–­æ˜¯å¦æ˜¯ä»£ç†å¯¹è±¡</li></ul><hr><p><strong>JDKä¸­ç”Ÿæˆä»£ç†å¯¹è±¡ä¸»è¦æ¶‰åŠçš„ç±»æœ‰</strong></p><h3 id="java-lang-reflect-Proxy"><a href="#java-lang-reflect-Proxy" class="headerlink" title="java.lang.reflect Proxy"></a>java.lang.reflect Proxy</h3><p>åŠ¨æ€ç”Ÿæˆä»£ç†ç±»å’Œå¯¹è±¡ï¼Œå…¶ä¸»è¦æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿”å›æŒ‡å®šæ¥å£çš„ä»£ç†ç±»çš„å®ä¾‹ï¼Œè¯¥æ¥å£å°†æ–¹æ³•è°ƒç”¨åˆ†æ´¾ç»™æŒ‡å®šçš„è°ƒç”¨å¤„ç†ç¨‹åºã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> loader:ç”¨äºå®šä¹‰ä»£ç†ç±»çš„ç±»åŠ è½½å™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> interfaces:è¦å®ç°çš„ä»£ç†ç±»çš„æ¥å£åˆ—è¡¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> h:å°†æ–¹æ³•è°ƒç”¨åˆ†æ´¾åˆ°çš„è°ƒç”¨å¤„ç†ç¨‹åº</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> å…·æœ‰æŒ‡å®šçš„ä»£ç†ç±»è°ƒç”¨å¤„ç†ç¨‹åºçš„ä»£ç†å®ä¾‹ï¼Œè¯¥ä»£ç†ç±»ç”±æŒ‡å®šçš„ç±»åŠ è½½å™¨å®šä¹‰å¹¶å®ç°æŒ‡å®šçš„æ¥å£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">newProxyInstance</span><span class="params">(ClassLoader loader,</span></span></span><br><span class="line"><span class="params"><span class="function">                                          Class&lt;?&gt;[] interfaces,</span></span></span><br><span class="line"><span class="params"><span class="function">                                          InvocationHandler h)</span> </span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> IllegalArgumentException</span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="java-lang-reflect-InvocationHandlerï¼ˆå¤„ç†ç±»æ¥å£ï¼‰"><a href="#java-lang-reflect-InvocationHandlerï¼ˆå¤„ç†ç±»æ¥å£ï¼‰" class="headerlink" title="java.lang.reflect InvocationHandlerï¼ˆå¤„ç†ç±»æ¥å£ï¼‰"></a>java.lang.reflect InvocationHandlerï¼ˆå¤„ç†ç±»æ¥å£ï¼‰</h3><p>å¯ä»¥é€šè¿‡<code>invoke</code>æ–¹æ³•å¯¹çœŸå®è§’è‰²çš„ä»£ç†è®¿é—®ï¼Œæ¯æ¬¡é€šè¿‡<code>Proxy</code>ç”Ÿæˆä»£ç†ç±»å¯¹è±¡æ—¶éƒ½è¦æŒ‡å®šå¯¹åº”çš„å¤„ç†å™¨å¯¹è±¡ã€‚å…¶ä¸»è¦æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¤„ç†ä»£ç†å®ä¾‹ä¸Šçš„æ–¹æ³•è°ƒç”¨å¹¶è¿”å›ç»“æœã€‚</span></span><br><span class="line"><span class="comment"> * åœ¨ä¸å…¶å…³è”çš„ä»£ç†å®ä¾‹ä¸Šè°ƒç”¨æ–¹æ³•æ—¶ï¼Œå°†åœ¨è°ƒç”¨å¤„ç†ç¨‹åºä¸Šè°ƒç”¨æ­¤æ–¹æ³•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> proxy:è°ƒç”¨è¯¥æ–¹æ³•çš„ä»£ç†å®ä¾‹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> method:å¯¹åº”äºåœ¨ä»£ç†å®ä¾‹ä¸Šè°ƒç”¨çš„æ¥å£æ–¹æ³•çš„æ–¹æ³•å®ä¾‹ã€‚</span></span><br><span class="line"><span class="comment"> * æ–¹æ³•å¯¹è±¡çš„å£°æ˜ç±»å°†æ˜¯æ–¹æ³•å£°æ˜æ‰€åœ¨çš„æ¥å£ï¼Œå®ƒå¯èƒ½æ˜¯ä»£ç†ç±»ç»§æ‰¿æ–¹æ³•çš„ä»£ç†æ¥å£çš„è¶…æ¥å£ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> args:åŒ…å«åœ¨ä»£ç†å®ä¾‹ä¸Šçš„æ–¹æ³•è°ƒç”¨ä¸­ä¼ é€’çš„å‚æ•°å€¼çš„å¯¹è±¡æ•°ç»„ï¼Œå¦‚æœæ¥å£æ–¹æ³•ä¸å¸¦å‚æ•°ï¼Œåˆ™è¿”å›nullã€‚</span></span><br><span class="line"><span class="comment"> * åŸå§‹ç±»å‹çš„å‚æ•°åŒ…å«åœ¨é€‚å½“çš„åŸå§‹åŒ…è£…ç±»çš„å®ä¾‹ä¸­ï¼Œä¾‹å¦‚java.lang.Integeræˆ–java.lang.Boolean.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable</span>;</span><br></pre></td></tr></table></figure><h2 id="å®ä¾‹-1"><a href="#å®ä¾‹-1" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><p>Star.javaï¼ŒRealStar.javaä¸é™æ€ä»£ç†çš„ä¸€æ ·</p><p><img src="/2019/06/03/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/5.png" alt></p><h3 id="StarHandler-java"><a href="#StarHandler-java" class="headerlink" title="StarHandler.java"></a>StarHandler.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> DynamicProxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationHandler;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StarHandler</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span> </span>&#123;</span><br><span class="line">    Star realStar;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">StarHandler</span><span class="params">(Star realStar)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.realStar = realStar;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;çœŸæ­£æ–¹æ³•æ‰§è¡Œå‰ï¼&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;é¢è°ˆï¼Œç­¾åˆåŒ...&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(method.getName().equals(<span class="string">&quot;sing&quot;</span>))</span><br><span class="line">            method.invoke(realStar, args);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;çœŸæ­£æ–¹æ³•æ‰§è¡Œåï¼&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ”¶å°¾æ¬¾&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ‰€æœ‰çš„ä»£ç†ç±»æ–¹æ³•å†…éƒ¨éƒ½ä¼šè°ƒç”¨å¤„ç†å™¨ç±»çš„ invoke æ–¹æ³•å¹¶ä¼ å…¥è¢«ä»£ç†ç±»çš„å½“å‰æ–¹æ³•ï¼Œè€Œè¿™ä¸ª invoke æ–¹æ³•å¯ä»¥é€‰æ‹©å»è®© method æ­£å¸¸è¢«è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥è·³è¿‡ method çš„è°ƒç”¨ï¼Œç”šè‡³å¯ä»¥åœ¨ method çœŸæ­£è¢«è°ƒç”¨å‰ååšä¸€äº›é¢å¤–çš„äº‹æƒ…ã€‚</strong></p><h3 id="Client-java-1"><a href="#Client-java-1" class="headerlink" title="Client.java"></a>Client.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> DynamicProxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Proxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Star realStar = <span class="keyword">new</span> RealStar();</span><br><span class="line">        StarHandler starHandler = <span class="keyword">new</span> StarHandler(realStar);</span><br><span class="line"></span><br><span class="line">        Star proxy = (Star) Proxy.newProxyInstance(ClassLoader.getSystemClassLoader(), <span class="keyword">new</span> Class[]&#123;Star.class&#125;, starHandler);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * proxyè°ƒç”¨çš„æ–¹æ³•éƒ½ä¼šè·³è½¬åˆ°StarHandler.invokeæ–¹æ³•é‡Œé¢å¤„ç†</span></span><br><span class="line"><span class="comment">         * æ‰€ä»¥æœ‰æ—¶å€™åœ¨éœ€è¦åœ¨invokeé‡Œé¢ç»Ÿä¸€å¤„ç†å°±è¡Œäº†</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        proxy.sing();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¾“å‡º-1"><a href="#è¾“å‡º-1" class="headerlink" title="è¾“å‡º"></a>è¾“å‡º</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">çœŸæ­£æ–¹æ³•æ‰§è¡Œå‰ï¼</span><br><span class="line">é¢è°ˆï¼Œç­¾åˆåŒ...</span><br><span class="line">RealStar(æ­Œæ˜Ÿæœ¬äºº).sing</span><br><span class="line">çœŸæ­£æ–¹æ³•æ‰§è¡Œåï¼</span><br><span class="line">æ”¶å°¾æ¬¾</span><br></pre></td></tr></table></figure><h2 id="å¤§æ¦‚æµç¨‹"><a href="#å¤§æ¦‚æµç¨‹" class="headerlink" title="å¤§æ¦‚æµç¨‹"></a>å¤§æ¦‚æµç¨‹</h2><p>é¦–å…ˆï¼Œä¸€ä¸ªå¤„ç†å™¨ç±»çš„å®šä¹‰æ˜¯å¿…ä¸å¯å°‘çš„ï¼ˆæ¯”å¦‚<code>StarHandler</code>ï¼‰ï¼Œå®ƒçš„å†…éƒ¨å¿…é¡»å¾—å…³è”ä¸€ä¸ªçœŸå®å¯¹è±¡ï¼Œå³è¢«ä»£ç†ç±»å®ä¾‹ï¼ˆæ¯”å¦‚<code>realStar</code>ï¼‰ã€‚</p><p>æ¥ç€ï¼Œæˆ‘ä»¬ä»å¤–éƒ¨è°ƒç”¨ä»£ç†ç±»çš„ä»»ä¸€æ–¹æ³•ï¼Œä»£ç†ç±»æ–¹æ³•ä¼šè½¬è€Œå»è°ƒç”¨å¤„ç†å™¨çš„ invoke æ–¹æ³•å¹¶ä¼ å…¥æ–¹æ³•ç­¾åå’Œæ–¹æ³•çš„å½¢å¼å‚æ•°é›†åˆï¼ˆ<code>StarHandler.invoke</code>ï¼‰ã€‚</p><p>æœ€åï¼Œæ–¹æ³•èƒ½å¦å¾—åˆ°æ­£å¸¸çš„è°ƒç”¨å–å†³äºå¤„ç†å™¨ invoke æ–¹æ³•ä½“æ˜¯å¦å®å®åœ¨åœ¨å»è°ƒç”¨äº† method æ–¹æ³•ã€‚</p><p>å…¶å®ï¼ŒåŸºäº JDK å®ç°çš„çš„åŠ¨æ€ä»£ç†æ˜¯æœ‰ç¼ºé™·çš„ï¼Œå¹¶ä¸”è¿™äº›ç¼ºé™·æ˜¯ä¸æ˜“ä¿®å¤çš„ï¼Œæ‰€ä»¥æ‰æœ‰äº† CGLIB çš„æµè¡Œã€‚</p><h2 id="ç¼ºé™·ä¸ä¸è¶³"><a href="#ç¼ºé™·ä¸ä¸è¶³" class="headerlink" title="ç¼ºé™·ä¸ä¸è¶³"></a>ç¼ºé™·ä¸ä¸è¶³</h2><h3 id="å•ä¸€çš„ä»£ç†æœºåˆ¶"><a href="#å•ä¸€çš„ä»£ç†æœºåˆ¶" class="headerlink" title="å•ä¸€çš„ä»£ç†æœºåˆ¶"></a>å•ä¸€çš„ä»£ç†æœºåˆ¶</h3><p>è™šæ‹Ÿæœºç”Ÿæˆçš„ä»£ç†ç±»ä¸ºäº†å…¬ç”¨ Proxy ç±»ä¸­çš„ <code>InvocationHandler</code>å­—æ®µæ¥å­˜å‚¨è‡ªå·±çš„å¤„ç†å™¨ç±»å®ä¾‹è€Œç»§æ‰¿äº† Proxy ç±»ï¼Œé‚£è¯´æ˜äº†ä»€ä¹ˆï¼Ÿ</p><p>Java çš„å•æ ¹ç»§æ‰¿å‘Šè¯‰ä½ ï¼Œä»£ç†ç±»ä¸èƒ½å†ç»§æ‰¿ä»»ä½•åˆ«çš„ç±»äº†ï¼Œé‚£ä¹ˆè¢«ä»£ç†ç±»çˆ¶ç±»ä¸­çš„æ–¹æ³•è‡ªç„¶å°±æ— ä»è·å–ï¼Œå³ä»£ç†ç±»æ— æ³•ä»£ç†çœŸå®ç±»ä¸­çˆ¶ç±»çš„ä»»ä½•æ–¹æ³•ã€‚</p><h3 id="ä¸å‹å¥½çš„è¿”å›å€¼"><a href="#ä¸å‹å¥½çš„è¿”å›å€¼" class="headerlink" title="ä¸å‹å¥½çš„è¿”å›å€¼"></a>ä¸å‹å¥½çš„è¿”å›å€¼</h3><p><code>newProxyInstance</code>è¿”å›å€¼æ˜¯objectï¼Œè¦ä½¿ç”¨å®ƒå¾—å¼ºåˆ¶ç±»å‹è½¬æ¢</p><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå‡å¦‚æˆ‘ä»¬çš„è¢«ä»£ç†ç±»å®ç°äº†å¤šä¸ªæ¥å£ï¼Œè¯·é—®ä½ è¯¥å¼ºè½¬ä¸ºé‚£ä¸ªæ¥å£ç±»å‹ï¼Œç°åœ¨å‡è®¾è¢«ä»£ç†ç±»å®ç°äº†æ¥å£ A å’Œ Bï¼Œé‚£ä¹ˆæœ€åçš„å®ä¾‹å¦‚æœå¼ºè½¬ä¸º A ï¼Œè‡ªç„¶è¢«ä»£ç†ç±»æ‰€å®ç°çš„æ¥å£ B ä¸­æ‰€æœ‰çš„æ–¹æ³•ä½ éƒ½ä¸èƒ½è°ƒç”¨ï¼Œåä¹‹äº¦ç„¶ã€‚</p><p>è¿™æ ·å°±ç›´æ¥å¯¼è‡´ä¸€ä¸ªç»“æœï¼Œä½ å¾—æ¸…æ¥šå“ªä¸ªæ–¹æ³•æ˜¯å“ªä¸ªæ¥å£ä¸­çš„ï¼Œè°ƒç”¨æŸä¸ªæ–¹æ³•ä¹‹å‰å¼ºè½¬ä¸ºå¯¹åº”çš„æ¥å£ï¼Œç›¸å½“ä¸å‹å¥½çš„è®¾è®¡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
            <tag> ä»£ç†æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè™šæ‹Ÿæœºç¬”è®°-Launcherç±»</title>
      <link href="/2019/06/02/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-Launcher%E7%B1%BB/"/>
      <url>/2019/06/02/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-Launcher%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<p>Launcherç±»éƒ¨åˆ†å†…å®¹åˆ†æ<br> <span id="more"></span></p><h1 id="ä¸‰ç§ç±»åŠ è½½å™¨ä¹‹é—´çš„å…³ç³»"><a href="#ä¸‰ç§ç±»åŠ è½½å™¨ä¹‹é—´çš„å…³ç³»" class="headerlink" title="ä¸‰ç§ç±»åŠ è½½å™¨ä¹‹é—´çš„å…³ç³»"></a>ä¸‰ç§ç±»åŠ è½½å™¨ä¹‹é—´çš„å…³ç³»</h1><ol><li><p>å†…å»ºäºJVMä¸­çš„å¯åŠ¨ç±»åŠ è½½å™¨ä¼šåŠ è½½<code>java.lang.ClassLoder</code>ä»¥åŠå…¶ä»–Javaå¹³å°ç±»ï¼Œå½“JVMå¯åŠ¨æ—¶ï¼Œä¸€å—ç‰¹æ®Šçš„æœºå™¨ç ä¼šè¿è¡Œï¼Œå®ƒä¼šåŠ è½½æ‰©å±•ç±»åŠ è½½å™¨ä¸ç³»ç»Ÿç±»åŠ è½½å™¨ï¼Œè¿™å—ç‰¹æ®Šçš„æœºå™¨ç å«åšå¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆBootstrapï¼‰ã€‚</p></li><li><p>å¯åŠ¨ç±»åŠ è½½å™¨ä¸æ˜¯Javaç±»ï¼Œè€Œå…¶ä»–çš„åŠ è½½å™¨åˆ™éƒ½æ˜¯Javaç±»ï¼Œå¯åŠ¨ç±»åŠ è½½å™¨æ˜¯ç‰¹å®šäºå¹³å°çš„æœºå™¨æŒ‡ä»¤ï¼Œå®ƒè´Ÿè´£å¼€å¯æ•´ä¸ªè¿‡ç¨‹ã€‚</p></li><li><p>æ‰€æœ‰ç±»åŠ è½½å™¨ï¼ˆé™¤äº†å¯åŠ¨ç±»åŠ è½½å™¨ï¼‰éƒ½è¢«å®ç°ä¸ºJavaç±»ã€‚ä¸è¿‡ï¼Œæ€»å½’è¦æœ‰ä¸€ä¸ªç»„ä»¶æ¥åŠ è½½ç¬¬ä¸€ä¸ªJavaç±»åŠ è½½å™¨ï¼Œä»è€Œè®©æ•´ä¸ªåŠ è½½è¿‡ç¨‹èƒ½å¤Ÿé¡ºåˆ©è¿›è¡Œä¸‹å»ï¼ŒåŠ è½½ç¬¬ä¸€ä¸ªçº¯Javaç±»åŠ è½½å™¨å°±æ˜¯å¯åŠ¨ç±»åŠ è½½å™¨çš„èŒè´£ã€‚</p></li><li><p>å¯åŠ¨ç±»åŠ è½½å™¨è¿˜ä¼šè´Ÿè´£åŠ è½½ä¾›JREæ­£å¸¸è¿è¡Œæ‰€éœ€è¦çš„åŸºæœ¬ç»„ä»¶ï¼Œè¿™åŒ…æ‹¬<code>java.util</code>ä¸<code>java.lang</code>åŒ…ä¸­çš„ç±»ç­‰ç­‰ã€‚</p></li></ol><h1 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(ClassLoader.class.getClassLoader());</span><br><span class="line"><span class="comment">//è¾“å‡ºnull</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ä¸èƒ½ç›´æ¥è·å–æ‰©å±•ç±»åŠ è½½å™¨å’Œç³»ç»Ÿç±»åŠ è½½å™¨ï¼Œå› ä¸ºæ²¡æœ‰å£°æ˜è¿™ä¸¤ä¸ªç±»ä¸ºpublic</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Launcher</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">     <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">AppClassLoader</span> <span class="keyword">extends</span> <span class="title">URLClassLoader</span></span>&#123;</span><br><span class="line">         ...</span><br><span class="line">     &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ExtClassLoader</span> <span class="keyword">extends</span> <span class="title">URLClassLoader</span> </span>&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯æˆ‘ä»¬å¯ä»¥ç”¨Launcherç±»çš„ç±»åŠ è½½å™¨éªŒè¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(Launcher.class.getClassLoader());</span><br><span class="line"><span class="comment">//è¾“å‡ºnull</span></span><br></pre></td></tr></table></figure><p>æ‰€ä»¥æ‰©å±•ç±»åŠ è½½å™¨å’Œç³»ç»Ÿç±»åŠ è½½å™¨ä¹Ÿæ˜¯ç”±å¯åŠ¨ç±»åŠ è½½å™¨å°±åŠ è½½çš„ã€‚</p><h1 id="getSystemClassLoader"><a href="#getSystemClassLoader" class="headerlink" title="getSystemClassLoader"></a>getSystemClassLoader</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ClassLoader <span class="title">getSystemClassLoader</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure><p>jdk8æ–‡æ¡£ä¸­æœ‰ä¸‹é¢å†…å®¹ï¼š</p><blockquote><p>If the system property â€œjava.system.class.loaderâ€ is defined when this method is first invoked then the value of that property is taken to be the name of a class that will be returned as the system class loader. The class is loaded using the default system class loader and must define a public constructor that takes a single parameter of type ClassLoader which is used as the delegation parent. An instance is then created using this constructor with the default system class loader as the parameter. The resulting class loader is defined to be the system class loader</p></blockquote><p>å¦‚æœåœ¨é¦–æ¬¡è°ƒç”¨æ­¤æ–¹æ³•æ—¶å®šä¹‰äº†ç³»ç»Ÿå±æ€§â€œjava.system.class.loaderâ€ï¼Œé‚£ä¹ˆè¯¥å±æ€§çš„å€¼å°†è¢«è§†ä¸ºç³»ç»Ÿç±»åŠ è½½å™¨è¿”å›çš„ç±»çš„åç§°ã€‚ä½¿ç”¨é»˜è®¤çš„ç³»ç»Ÿç±»åŠ è½½å™¨åŠ è½½è¯¥ç±»ï¼Œå¹¶ä¸”å¿…é¡»å®šä¹‰ä¸€ä¸ªå…¬å…±æ„é€ å‡½æ•°ï¼Œè¯¥æ„é€ å‡½æ•°æ¥å—ç±»å‹ä¸ºClassLoaderçš„å•ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°ç”¨ä½œå§”æ‰˜çˆ¶ç±»ã€‚ç„¶åä½¿ç”¨æ­¤æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œå¹¶ä½¿ç”¨é»˜è®¤çš„ç³»ç»Ÿç±»åŠ è½½å™¨ä½œä¸ºå‚æ•°ã€‚ç”Ÿæˆçš„ç±»åŠ è½½å™¨è¢«å®šä¹‰ä¸ºç³»ç»Ÿç±»åŠ è½½å™¨ã€‚</p><p>é‚£ä¹ˆå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦æ›´æ”¹ç³»ç»Ÿç±»åŠ è½½å™¨ä¸ºè‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œä¸€æ˜¯å¾—æ”¹å˜<code>java.system.class.loader</code>ï¼ŒäºŒæ˜¯åœ¨æˆ‘ä»¬çš„è‡ªå®šä¹‰ç±»åŠ è½½å™¨ä¸­æ·»åŠ ä¸€ä¸ªå‚æ•°ä¸ºClassLoaderçš„æ„é€ å‡½æ•°</p><hr><p>é¦–å…ˆï¼Œæœªæ›´æ”¹<code>java.system.class.loade</code>æ—¶ï¼Œè¾“å‡ºå…¶å€¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//indi.greenhat.jvm.Test.java</span></span><br><span class="line">System.out.println(System.getProperty(<span class="string">&quot;java.system.class.loader&quot;</span>));</span><br><span class="line"><span class="comment">//è¾“å‡ºnull</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥å‘ç°æ­¤æ—¶è¯¥å±æ€§å€¼ä¸ºnullï¼Œå¦‚æœæˆ‘ä»¬ä¸åŠ ä¸Šé¢æ‰€è¯´çš„æ„é€ å‡½æ•°ï¼Œç›´æ¥æ›´æ”¹å±æ€§å€¼å»åŠ è½½åˆ«çš„ç±»ï¼Œé‚£ä¹ˆä¼šæŠ›å‡ºå¼‚å¸¸</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -Djava.system.class.loader=indi.greenhat.jvm.CustomClassLoader               indi.greenhat.jvm.Test</span><br></pre></td></tr></table></figure><p><img src="/2019/06/02/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-Launcher%E7%B1%BB/1.png" alt></p><p>åœ¨CustomClassLoaderä¸­åŠ å…¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">CustomClassLoader</span><span class="params">(ClassLoader parent)</span></span>&#123;</span><br><span class="line">    <span class="keyword">super</span>(parent);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå°±ä¼šè¾“å‡º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">indi.greenhat.jvm.CustomClassLoader</span><br></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆè¦åŠ å…¥ä¸€ä¸ªè¿™æ ·çš„æ–¹æ³•å‘¢ï¼Ÿ</p><p>è¿™ä¸ªä¸ClassLoaderç±»é‡Œé¢çš„ä¸€ä¸ªSystemClassLoaderActionç±»çš„runæ–¹æ³•æœ‰å…³ï¼Œæ­¤æ–¹æ³•å¤„ç†äº†ç”¨æˆ·è‡ªå®šä¹‰<code>java.system.class.loader</code>å±æ€§çš„æƒ…å†µã€‚å¤„ç†æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//String cls = System.getProperty(&quot;java.system.class.loader&quot;)        </span></span><br><span class="line">Constructor&lt;?&gt; ctor = Class.forName(cls, <span class="keyword">true</span>, parent)</span><br><span class="line">            .getDeclaredConstructor(<span class="keyword">new</span> Class&lt;?&gt;[] &#123; ClassLoader.class &#125;);</span><br><span class="line">        ClassLoader sys = (ClassLoader) ctor.newInstance(</span><br><span class="line">            <span class="keyword">new</span> Object[] &#123; parent &#125;);</span><br></pre></td></tr></table></figure><p>å› ä¸ºè¿™æ—¶å€™éœ€è¦ä¼ é€’ä¸€ä¸ªparentå‚æ•°è¿›å»ã€‚</p><h1 id="Launcheræ„é€ æ–¹æ³•"><a href="#Launcheræ„é€ æ–¹æ³•" class="headerlink" title="Launcheræ„é€ æ–¹æ³•"></a>Launcheræ„é€ æ–¹æ³•</h1><p>æ¥è‡ªopenjdk8</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Launcher</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºæ‰©å±•ç±»åŠ è½½å™¨</span></span><br><span class="line">    ClassLoader extcl;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//ExtClassLoader:ç”¨äºåŠ è½½å·²å®‰è£…æ‰©å±•çš„ç±»åŠ è½½å™¨</span></span><br><span class="line">        extcl = ExtClassLoader.getExtClassLoader();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> InternalError(</span><br><span class="line">            <span class="string">&quot;Could not create extension class loader&quot;</span>, e);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç°åœ¨åˆ›å»ºç”¨äºå¯åŠ¨åº”ç”¨ç¨‹åºçš„ç±»åŠ è½½å™¨</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//ä¸åˆ›å»ºextclçš„æ–¹æ³•å¤§åŒå°å¼‚</span></span><br><span class="line">        loader = AppClassLoader.getAppClassLoader(extcl);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> InternalError(</span><br><span class="line">            <span class="string">&quot;Could not create application class loader&quot;</span>, e);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿˜ä¸ºåŸå§‹çº¿ç¨‹è®¾ç½®ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ã€‚</span></span><br><span class="line">    Thread.currentThread().setContextClassLoader(loader);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœ€åï¼Œæ ¹æ®è¯·æ±‚å®‰è£…å®‰å…¨ç®¡ç†å™¨</span></span><br><span class="line">    String s = System.getProperty(<span class="string">&quot;java.security.manager&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (s != <span class="keyword">null</span>) &#123;</span><br><span class="line">        SecurityManager sm = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;&quot;</span>.equals(s) || <span class="string">&quot;default&quot;</span>.equals(s)) &#123;</span><br><span class="line">            sm = <span class="keyword">new</span> java.lang.SecurityManager();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                sm = (SecurityManager)loader.loadClass(s).newInstance();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InstantiationException e) &#123;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (ClassCastException e) &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (sm != <span class="keyword">null</span>) &#123;</span><br><span class="line">            System.setSecurityManager(sm);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> InternalError(</span><br><span class="line">                <span class="string">&quot;Could not create SecurityManager: &quot;</span> + s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ExtClassLoader"><a href="#ExtClassLoader" class="headerlink" title="ExtClassLoader"></a>ExtClassLoader</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ExtClassLoader</span> <span class="keyword">extends</span> <span class="title">URLClassLoader</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//å¹¶è¡ŒåŠ è½½</span></span><br><span class="line">      <span class="keyword">static</span> &#123;</span><br><span class="line">          ClassLoader.registerAsParallelCapable();</span><br><span class="line">      &#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ›å»ºä¸€ä¸ªExtClassLoader,ExtClassLoaderæ˜¯åœ¨ä¸€ä¸ªä¸Šä¸‹æ–‡ä¸­åˆ›å»ºçš„</span></span><br><span class="line"><span class="comment"> * è¯¥ä¸Šä¸‹æ–‡é™åˆ¶äº†å®ƒå¯ä»¥è¯»å–çš„æ–‡ä»¶,å³é™åˆ¶ä»å“ªé‡Œè¯»å–classæ–‡ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ExtClassLoader <span class="title">getExtClassLoader</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span></span><br><span class="line"><span class="function">      </span>&#123;</span><br><span class="line">          <span class="comment">//è·å¾—æ‰©å±•ç±»åŠ è½½å™¨è¯»å–çš„è·¯å¾„</span></span><br><span class="line">          <span class="keyword">final</span> File[] dirs = getExtDirs(); </span><br><span class="line"></span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">              <span class="comment">/**</span></span><br><span class="line"><span class="comment">                * æ­¤doPrivilegedï¼ˆï¼‰å—çš„å…ˆå‰å®ç°é€šè¿‡è°ƒç”¨</span></span><br><span class="line"><span class="comment">                * ç§æœ‰æ–¹æ³•ExtClassLoader.getContextï¼ˆï¼‰æ¥æä¾›åˆæˆçš„ACC</span></span><br><span class="line"><span class="comment">                * ç”¨äºæƒé™çš„æ ¡éªŒ</span></span><br><span class="line"><span class="comment">                */</span></span><br><span class="line">              <span class="keyword">return</span> AccessController.doPrivileged(</span><br><span class="line">                  <span class="keyword">new</span> PrivilegedExceptionAction&lt;ExtClassLoader&gt;() &#123;</span><br><span class="line">                      <span class="function"><span class="keyword">public</span> ExtClassLoader <span class="title">run</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">                          <span class="keyword">int</span> len = dirs.length;</span><br><span class="line">                          <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">                              MetaIndex.registerDirectory(dirs[i]);</span><br><span class="line">                          &#125;</span><br><span class="line">                          <span class="keyword">return</span> <span class="keyword">new</span> ExtClassLoader(dirs);</span><br><span class="line">                      &#125;</span><br><span class="line">                  &#125;);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (java.security.PrivilegedActionException e) &#123;</span><br><span class="line">              <span class="keyword">throw</span> (IOException) e.getException();</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><h2 id="ExtClassLoaderç»§æ‰¿æ ‘"><a href="#ExtClassLoaderç»§æ‰¿æ ‘" class="headerlink" title="ExtClassLoaderç»§æ‰¿æ ‘"></a>ExtClassLoaderç»§æ‰¿æ ‘</h2><p><img src="/2019/06/02/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-Launcher%E7%B1%BB/2.png" alt></p><p>å¯ä»¥çœ‹åˆ°<code>ExtClassLoader</code>æœ€ç»ˆè¿˜æ˜¯ç»§æ‰¿äº<code>ClassLoader</code></p><h3 id="getExtDirs"><a href="#getExtDirs" class="headerlink" title="getExtDirs"></a>getExtDirs</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> File[] getExtDirs() &#123;</span><br><span class="line">    <span class="comment">//è·å¾—æ‰©å±•ç±»åŠ è½½å™¨ç³»ç»Ÿå±æ€§é›†</span></span><br><span class="line">    String s = System.getProperty(<span class="string">&quot;java.ext.dirs&quot;</span>);</span><br><span class="line">    File[] dirs;</span><br><span class="line">    <span class="keyword">if</span> (s != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * File.pathSeparatoræŒ‡çš„æ˜¯åˆ†éš”è¿ç»­å¤šä¸ªè·¯å¾„å­—ç¬¦ä¸²çš„åˆ†éš”ç¬¦</span></span><br><span class="line"><span class="comment">         * å³å°†è·å–åˆ°çš„å±æ€§é›†è¿›è¡Œåˆ†å‰²</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        StringTokenizer st =</span><br><span class="line">            <span class="keyword">new</span> StringTokenizer(s, File.pathSeparator);</span><br><span class="line">        <span class="comment">// å¾—åˆ°åˆ†å‰²åçš„æ•°é‡</span></span><br><span class="line">        <span class="keyword">int</span> count = st.countTokens();</span><br><span class="line">        dirs = <span class="keyword">new</span> File[count];</span><br><span class="line">        <span class="comment">//èµ‹å€¼</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">            dirs[i] = <span class="keyword">new</span> File(st.nextToken());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//sä¸ºç©ºï¼Œdirsä¸ºç©º</span></span><br><span class="line">        dirs = <span class="keyword">new</span> File[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dirs;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="getAppClassLoader"><a href="#getAppClassLoader" class="headerlink" title="getAppClassLoader"></a>getAppClassLoader</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨äºä»java.class.pathåŠ è½½çš„ç±»åŠ è½½å™¨ã€‚ </span></span><br><span class="line"><span class="comment"> * åœ¨å—é™åˆ¶çš„å®‰å…¨ä¸Šä¸‹æ–‡ä¸­è¿è¡Œã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">AppClassLoader</span> <span class="keyword">extends</span> <span class="title">URLClassLoader</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">       <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * å¹¶è¡ŒåŠ è½½</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="keyword">static</span> &#123;</span><br><span class="line">            ClassLoader.registerAsParallelCapable();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ClassLoader <span class="title">getAppClassLoader</span><span class="params">(<span class="keyword">final</span> ClassLoader extcl)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> IOException</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">final</span> String s = System.getProperty(<span class="string">&quot;java.class.path&quot;</span>);</span><br><span class="line">            <span class="keyword">final</span> File[] path = (s == <span class="keyword">null</span>) ? <span class="keyword">new</span> File[<span class="number">0</span>] : getClassPath(s);</span><br><span class="line">           </span><br><span class="line">            <span class="keyword">return</span> AccessController.doPrivileged(</span><br><span class="line">                <span class="keyword">new</span> PrivilegedAction&lt;AppClassLoader&gt;() &#123;</span><br><span class="line">                    <span class="function"><span class="keyword">public</span> AppClassLoader <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    URL[] urls =</span><br><span class="line">                        (s == <span class="keyword">null</span>) ? <span class="keyword">new</span> URL[<span class="number">0</span>] : pathToURLs(path);</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">new</span> AppClassLoader(urls, extcl);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºä¸€ä¸ªæ–°çš„AppClassLoader</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">            AppClassLoader(URL[] urls, ClassLoader parent) &#123;</span><br><span class="line">            <span class="keyword">super</span>(urls, parent, factory);</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jvm </tag>
            
            <tag> æºç  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè™šæ‹Ÿæœºç¬”è®°-ç±»åŠ è½½å™¨ä¸webå®¹å™¨ä¸OSGi</title>
      <link href="/2019/06/02/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E4%B8%8Eweb%E5%AE%B9%E5%99%A8%E4%B8%8EOSGi/"/>
      <url>/2019/06/02/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E4%B8%8Eweb%E5%AE%B9%E5%99%A8%E4%B8%8EOSGi/</url>
      
        <content type="html"><![CDATA[<p>ç±»åŠ è½½å™¨ä¸ Web å®¹å™¨ï¼Œç±»åŠ è½½å™¨ä¸ OSGi</p><span id="more"></span><p>å‚è€ƒ:<a href="https://www.ibm.com/developerworks/cn/java/j-lo-classloader/index.html">æ·±å…¥æ¢è®¨ Java ç±»åŠ è½½å™¨</a></p><p><a href="https://juejin.im/post/5a59f2296fb9a01ca871eb8c">æ·±å…¥ç†è§£ Tomcatï¼ˆå››ï¼‰Tomcat ç±»åŠ è½½å™¨ä¹‹ä¸ºä½•è¿èƒŒåŒäº²å§”æ´¾æ¨¡å‹</a></p><h1 id="ç±»åŠ è½½å™¨ä¸Webå®¹å™¨"><a href="#ç±»åŠ è½½å™¨ä¸Webå®¹å™¨" class="headerlink" title="ç±»åŠ è½½å™¨ä¸Webå®¹å™¨"></a>ç±»åŠ è½½å™¨ä¸Webå®¹å™¨</h1><p>å¯¹äºè¿è¡Œåœ¨<code>Java EEâ„¢</code>å®¹å™¨ä¸­çš„ Web åº”ç”¨æ¥è¯´ï¼Œç±»åŠ è½½å™¨çš„å®ç°æ–¹å¼ä¸ä¸€èˆ¬çš„ Java åº”ç”¨æœ‰æ‰€ä¸åŒã€‚ä¸åŒçš„ Web å®¹å™¨çš„å®ç°æ–¹å¼ä¹Ÿä¼šæœ‰æ‰€ä¸åŒã€‚</p><h2 id="Apache-Tomcat"><a href="#Apache-Tomcat" class="headerlink" title="Apache Tomcat"></a>Apache Tomcat</h2><p>ä»¥<code>Apache Tomcat</code>æ¥è¯´ï¼Œæ¯ä¸ª Web åº”ç”¨éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ç±»åŠ è½½å™¨å®ä¾‹ã€‚<strong>è¯¥ç±»åŠ è½½å™¨ä¹Ÿä½¿ç”¨ä»£ç†æ¨¡å¼ï¼Œæ‰€ä¸åŒçš„æ˜¯å®ƒæ˜¯é¦–å…ˆå°è¯•å»åŠ è½½æŸä¸ªç±»ï¼Œå¦‚æœæ‰¾ä¸åˆ°å†ä»£ç†ç»™çˆ¶ç±»åŠ è½½å™¨ã€‚è¿™ä¸ä¸€èˆ¬ç±»åŠ è½½å™¨çš„é¡ºåºæ˜¯ç›¸åçš„</strong>ã€‚è¿™æ˜¯ <code>Java Servlet</code>è§„èŒƒä¸­çš„æ¨èåšæ³•ï¼Œå…¶ç›®çš„æ˜¯ä½¿å¾— Web åº”ç”¨è‡ªå·±çš„ç±»çš„ä¼˜å…ˆçº§é«˜äº Web å®¹å™¨æä¾›çš„ç±»ã€‚<strong>è¿™ç§ä»£ç†æ¨¡å¼çš„ä¸€ä¸ªä¾‹å¤–æ˜¯ï¼šJava æ ¸å¿ƒåº“çš„ç±»æ˜¯ä¸åœ¨æŸ¥æ‰¾èŒƒå›´ä¹‹å†…çš„ã€‚è¿™ä¹Ÿæ˜¯ä¸ºäº†ä¿è¯ Java æ ¸å¿ƒåº“çš„ç±»å‹å®‰å…¨ã€‚</strong></p><p><img src="/2019/06/02/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E4%B8%8Eweb%E5%AE%B9%E5%99%A8%E4%B8%8EOSGi/2.png" alt></p><h2 id="TomcatåŠ è½½è¿‡ç¨‹"><a href="#TomcatåŠ è½½è¿‡ç¨‹" class="headerlink" title="TomcatåŠ è½½è¿‡ç¨‹"></a>TomcatåŠ è½½è¿‡ç¨‹</h2><p><img src="/2019/06/02/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E4%B8%8Eweb%E5%AE%B9%E5%99%A8%E4%B8%8EOSGi/1.png" alt></p><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œå‰é¢3ä¸ªç±»åŠ è½½å’Œé»˜è®¤çš„ä¸€è‡´ï¼Œ<code>CommonClassLoader</code>ï¼Œ<code>CatalinaClassLoader</code>ï¼Œ<code>SharedClassLoader</code>å’Œ<code>WebappClassLoader</code>åˆ™æ˜¯Tomcatè‡ªå·±å®šä¹‰çš„ç±»åŠ è½½å™¨ï¼Œå®ƒä»¬åˆ†åˆ«åŠ è½½<code>/common/*</code>ã€<code>/server/*</code>ã€<code>/shared/*</code>ï¼ˆåœ¨tomcat 6ä¹‹åå·²ç»åˆå¹¶åˆ°æ ¹ç›®å½•ä¸‹çš„libç›®å½•ä¸‹ï¼‰å’Œ<code>/WebApp/WEB-INF/*</code>ä¸­çš„Javaç±»åº“ã€‚å…¶ä¸­<code>WebApp</code>ç±»åŠ è½½å™¨å’ŒJspç±»åŠ è½½å™¨é€šå¸¸ä¼šå­˜åœ¨å¤šä¸ªå®ä¾‹ï¼Œ<strong>æ¯ä¸€ä¸ªWebåº”ç”¨ç¨‹åº</strong>å¯¹åº”ä¸€ä¸ªWebAppç±»åŠ è½½å™¨ï¼Œæ¯ä¸€ä¸ªJSPæ–‡ä»¶å¯¹åº”ä¸€ä¸ªJspç±»åŠ è½½å™¨ã€‚</p><ul><li>commonLoaderï¼šTomcatæœ€åŸºæœ¬çš„ç±»åŠ è½½å™¨ï¼ŒåŠ è½½è·¯å¾„ä¸­çš„classå¯ä»¥è¢«Tomcatå®¹å™¨æœ¬èº«ä»¥åŠå„ä¸ªWebappè®¿é—®ï¼›</li><li>catalinaLoaderï¼šTomcatå®¹å™¨ç§æœ‰çš„ç±»åŠ è½½å™¨ï¼ŒåŠ è½½è·¯å¾„ä¸­çš„classå¯¹äºWebappä¸å¯è§ï¼›</li><li>sharedLoaderï¼šå„ä¸ªWebappå…±äº«çš„ç±»åŠ è½½å™¨ï¼ŒåŠ è½½è·¯å¾„ä¸­çš„classå¯¹äºæ‰€æœ‰Webappå¯è§ï¼Œä½†æ˜¯å¯¹äºTomcatå®¹å™¨ä¸å¯è§ï¼›</li><li>WebappClassLoaderï¼šå„ä¸ªWebappç§æœ‰çš„ç±»åŠ è½½å™¨ï¼ŒåŠ è½½è·¯å¾„ä¸­çš„classåªå¯¹å½“å‰Webappå¯è§ï¼›</li></ul><hr><p><strong>å›¾ä¸­çš„å§”æ´¾å…³ç³»</strong></p><ol><li>CommonClassLoaderèƒ½åŠ è½½çš„ç±»éƒ½å¯ä»¥è¢«Catalina ClassLoaderå’ŒSharedClassLoaderä½¿ç”¨ï¼Œä»è€Œå®ç°äº†å…¬æœ‰ç±»åº“çš„å…±ç”¨ï¼Œè€ŒCatalinaClassLoaderå’ŒShared ClassLoaderè‡ªå·±èƒ½åŠ è½½çš„ç±»åˆ™ä¸å¯¹æ–¹ç›¸äº’éš”ç¦»ã€‚</li><li>WebAppClassLoaderå¯ä»¥ä½¿ç”¨SharedClassLoaderåŠ è½½åˆ°çš„ç±»ï¼Œä½†å„ä¸ªWebAppClassLoaderå®ä¾‹ä¹‹é—´ç›¸äº’éš”ç¦»ã€‚</li><li>è€ŒJasperLoaderçš„åŠ è½½èŒƒå›´ä»…ä»…æ˜¯è¿™ä¸ªJSPæ–‡ä»¶æ‰€ç¼–è¯‘å‡ºæ¥çš„é‚£ä¸€ä¸ª.Classæ–‡ä»¶ï¼Œå®ƒå‡ºç°çš„ç›®çš„å°±æ˜¯ä¸ºäº†è¢«ä¸¢å¼ƒï¼šå½“Webå®¹å™¨æ£€æµ‹åˆ°JSPæ–‡ä»¶è¢«ä¿®æ”¹æ—¶ï¼Œä¼šæ›¿æ¢æ‰ç›®å‰çš„JasperLoaderçš„å®ä¾‹ï¼Œå¹¶é€šè¿‡å†å»ºç«‹ä¸€ä¸ªæ–°çš„Jspç±»åŠ è½½å™¨æ¥å®ç°JSPæ–‡ä»¶çš„HotSwapåŠŸèƒ½ã€‚</li></ol><h2 id="åŸåˆ™"><a href="#åŸåˆ™" class="headerlink" title="åŸåˆ™"></a>åŸåˆ™</h2><p>ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒWeb åº”ç”¨çš„å¼€å‘äººå‘˜ä¸éœ€è¦è€ƒè™‘ä¸ç±»åŠ è½½å™¨ç›¸å…³çš„ç»†èŠ‚ã€‚ä¸‹é¢ç»™å‡ºå‡ æ¡ç®€å•çš„åŸåˆ™ï¼š</p><ul><li>æ¯ä¸ª Web åº”ç”¨è‡ªå·±çš„ Java ç±»æ–‡ä»¶å’Œä½¿ç”¨çš„åº“çš„ jar åŒ…ï¼Œåˆ†åˆ«æ”¾åœ¨ <code>WEB-INF/classes</code>å’Œ <code>WEB-INF/lib</code>ç›®å½•ä¸‹é¢ã€‚</li><li>å¤šä¸ªåº”ç”¨å…±äº«çš„ Java ç±»æ–‡ä»¶å’Œ jar åŒ…ï¼Œåˆ†åˆ«æ”¾åœ¨ Web å®¹å™¨æŒ‡å®šçš„ç”±æ‰€æœ‰ Web åº”ç”¨å…±äº«çš„ç›®å½•ä¸‹é¢ã€‚</li><li>å½“å‡ºç°æ‰¾ä¸åˆ°ç±»çš„é”™è¯¯æ—¶ï¼Œæ£€æŸ¥å½“å‰ç±»çš„ç±»åŠ è½½å™¨å’Œå½“å‰çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨æ˜¯å¦æ­£ç¡®ã€‚</li></ul><h1 id="ç±»åŠ è½½å™¨ä¸-OSGi"><a href="#ç±»åŠ è½½å™¨ä¸-OSGi" class="headerlink" title="ç±»åŠ è½½å™¨ä¸ OSGi"></a>ç±»åŠ è½½å™¨ä¸ OSGi</h1><p><code>OSGiâ„¢</code>æ˜¯ Java ä¸Šçš„åŠ¨æ€æ¨¡å—ç³»ç»Ÿã€‚å®ƒä¸ºå¼€å‘äººå‘˜æä¾›äº†é¢å‘æœåŠ¡å’ŒåŸºäºç»„ä»¶çš„è¿è¡Œç¯å¢ƒï¼Œå¹¶æä¾›æ ‡å‡†çš„æ–¹å¼ç”¨æ¥ç®¡ç†è½¯ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€‚OSGi å·²ç»è¢«å®ç°å’Œéƒ¨ç½²åœ¨å¾ˆå¤šäº§å“ä¸Šï¼Œåœ¨å¼€æºç¤¾åŒºä¹Ÿå¾—åˆ°äº†å¹¿æ³›çš„æ”¯æŒã€‚Eclipse å°±æ˜¯åŸºäº OSGi æŠ€æœ¯æ¥æ„å»ºçš„ã€‚</p><p>OSGi ä¸­çš„æ¯ä¸ªæ¨¡å—ï¼ˆbundleï¼‰éƒ½åŒ…å« Java åŒ…å’Œç±»ã€‚æ¨¡å—å¯ä»¥å£°æ˜å®ƒæ‰€ä¾èµ–çš„éœ€è¦å¯¼å…¥ï¼ˆimportï¼‰çš„å…¶å®ƒæ¨¡å—çš„ Java åŒ…å’Œç±»ï¼ˆé€šè¿‡ <code>Import-Package</code>ï¼‰ï¼Œä¹Ÿå¯ä»¥å£°æ˜å¯¼å‡ºï¼ˆexportï¼‰è‡ªå·±çš„åŒ…å’Œç±»ï¼Œä¾›å…¶å®ƒæ¨¡å—ä½¿ç”¨ï¼ˆé€šè¿‡ <code>Export-Package</code>ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´éœ€è¦èƒ½å¤Ÿéšè—å’Œå…±äº«ä¸€ä¸ªæ¨¡å—ä¸­çš„æŸäº› Java åŒ…å’Œç±»ã€‚è¿™æ˜¯é€šè¿‡ OSGi ç‰¹æœ‰çš„ç±»åŠ è½½å™¨æœºåˆ¶æ¥å®ç°çš„ã€‚<strong>OSGi ä¸­çš„æ¯ä¸ªæ¨¡å—éƒ½æœ‰å¯¹åº”çš„ä¸€ä¸ªç±»åŠ è½½å™¨ã€‚å®ƒè´Ÿè´£åŠ è½½æ¨¡å—è‡ªå·±åŒ…å«çš„ Java åŒ…å’Œç±»ã€‚å½“å®ƒéœ€è¦åŠ è½½ Java æ ¸å¿ƒåº“çš„ç±»æ—¶ï¼ˆä»¥ <code>java</code>å¼€å¤´çš„åŒ…å’Œç±»ï¼‰ï¼Œå®ƒä¼šä»£ç†ç»™çˆ¶ç±»åŠ è½½å™¨ï¼ˆé€šå¸¸æ˜¯å¯åŠ¨ç±»åŠ è½½å™¨ï¼‰æ¥å®Œæˆã€‚å½“å®ƒéœ€è¦åŠ è½½æ‰€å¯¼å…¥çš„ Java ç±»æ—¶ï¼Œå®ƒä¼šä»£ç†ç»™å¯¼å‡ºæ­¤ Java ç±»çš„æ¨¡å—æ¥å®ŒæˆåŠ è½½</strong>ã€‚æ¨¡å—ä¹Ÿå¯ä»¥æ˜¾å¼çš„å£°æ˜æŸäº› Java åŒ…å’Œç±»ï¼Œå¿…é¡»ç”±çˆ¶ç±»åŠ è½½å™¨æ¥åŠ è½½ã€‚åªéœ€è¦è®¾ç½®ç³»ç»Ÿå±æ€§ <code>org.osgi.framework.bootdelegation</code>çš„å€¼å³å¯ã€‚</p><h2 id="åŠ è½½è¿‡ç¨‹"><a href="#åŠ è½½è¿‡ç¨‹" class="headerlink" title="åŠ è½½è¿‡ç¨‹"></a>åŠ è½½è¿‡ç¨‹</h2><p><img src="/2019/06/02/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E4%B8%8Eweb%E5%AE%B9%E5%99%A8%E4%B8%8EOSGi/3.png" alt></p><p>å‡è®¾æœ‰ä¸¤ä¸ªæ¨¡å— bundleA å’Œ bundleBï¼Œå®ƒä»¬éƒ½æœ‰è‡ªå·±å¯¹åº”çš„ç±»åŠ è½½å™¨ classLoaderA å’Œ classLoaderBã€‚åœ¨ bundleA ä¸­åŒ…å«ç±» <code>com.bundleA.Sample</code>ï¼Œå¹¶ä¸”è¯¥ç±»è¢«å£°æ˜ä¸ºå¯¼å‡ºçš„ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥è¢«å…¶å®ƒæ¨¡å—æ‰€ä½¿ç”¨çš„ã€‚bundleB å£°æ˜äº†å¯¼å…¥ bundleA æä¾›çš„ç±» <code>com.bundleA.Sample</code>ï¼Œå¹¶åŒ…å«ä¸€ä¸ªç±» <code>com.bundleB.NewSample</code>ç»§æ‰¿è‡ª <code>com.bundleA.Sample</code>ã€‚åœ¨ bundleB å¯åŠ¨çš„æ—¶å€™ï¼Œå…¶ç±»åŠ è½½å™¨ classLoaderB éœ€è¦åŠ è½½ç±» <code>com.bundleB.NewSample</code>ï¼Œè¿›è€Œéœ€è¦åŠ è½½ç±» <code>com.bundleA.Sample</code>ã€‚ç”±äº bundleB å£°æ˜äº†ç±» <code>com.bundleA.Sample</code>æ˜¯å¯¼å…¥çš„ï¼ŒclassLoaderB æŠŠåŠ è½½ç±» <code>com.bundleA.Sample</code>çš„å·¥ä½œä»£ç†ç»™å¯¼å‡ºè¯¥ç±»çš„ bundleA çš„ç±»åŠ è½½å™¨ classLoaderAã€‚classLoaderA åœ¨å…¶æ¨¡å—å†…éƒ¨æŸ¥æ‰¾ç±» <code>com.bundleA.Sample</code>å¹¶å®šä¹‰å®ƒï¼Œæ‰€å¾—åˆ°çš„ç±» <code>com.bundleA.Sample</code>å®ä¾‹å°±å¯ä»¥è¢«æ‰€æœ‰å£°æ˜å¯¼å…¥äº†æ­¤ç±»çš„æ¨¡å—ä½¿ç”¨ã€‚å¯¹äºä»¥ <code>java</code>å¼€å¤´çš„ç±»ï¼Œéƒ½æ˜¯ç”±çˆ¶ç±»åŠ è½½å™¨æ¥åŠ è½½çš„ã€‚å¦‚æœå£°æ˜äº†ç³»ç»Ÿå±æ€§ <code>org.osgi.framework.bootdelegation=com.example.core.*</code>ï¼Œé‚£ä¹ˆå¯¹äºåŒ… <code>com.example.core</code>ä¸­çš„ç±»ï¼Œéƒ½æ˜¯ç”±çˆ¶ç±»åŠ è½½å™¨æ¥å®Œæˆçš„ã€‚</p><hr><p>OSGi æ¨¡å—çš„è¿™ç§ç±»åŠ è½½å™¨ç»“æ„ï¼Œä½¿å¾—ä¸€ä¸ªç±»çš„ä¸åŒç‰ˆæœ¬å¯ä»¥å…±å­˜åœ¨ Java è™šæ‹Ÿæœºä¸­ï¼Œå¸¦æ¥äº†å¾ˆå¤§çš„çµæ´»æ€§ã€‚ä¸è¿‡å®ƒçš„è¿™ç§ä¸åŒï¼Œä¹Ÿä¼šç»™å¼€å‘äººå‘˜å¸¦æ¥ä¸€äº›éº»çƒ¦ï¼Œå°¤å…¶å½“æ¨¡å—éœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹æä¾›çš„åº“çš„æ—¶å€™ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jvm </tag>
            
            <tag> ç±»çš„åŠ è½½ </tag>
            
            <tag> OSGI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè®¾è®¡æ¨¡å¼-å·¥å‚æ¨¡å¼Javaå®ç°</title>
      <link href="/2019/05/31/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8FJava%E5%AE%9E%E7%8E%B0/"/>
      <url>/2019/05/31/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8FJava%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<p>å·¥å‚æ¨¡å¼çš„javaå®ç°</p><span id="more"></span><p>ä»£ç åœ°å€ï¼š</p><p><a href="https://github.com/GreenHatHG/blog_md/tree/master/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8FJava%E5%AE%9E%E7%8E%B0/Code">github</a></p><h1 id="ç®€å•å·¥å‚æ¨¡å¼"><a href="#ç®€å•å·¥å‚æ¨¡å¼" class="headerlink" title="ç®€å•å·¥å‚æ¨¡å¼"></a>ç®€å•å·¥å‚æ¨¡å¼</h1><p><img src="/2019/05/31/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8FJava%E5%AE%9E%E7%8E%B0/1.png" alt></p><h2 id="pizza"><a href="#pizza" class="headerlink" title="pizza"></a>pizza</h2><h3 id="Pizza-java"><a href="#Pizza-java" class="headerlink" title="Pizza.java"></a>Pizza.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pizza;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŠ½è±¡Pizzaç±»ï¼Œå…¶ä»–ç§ç±»éƒ½ç»§æ‰¿è¿™ä¸ªç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Pizza</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Pizzaåå­—</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String name;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é¢å›¢</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String dough;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è°ƒå‘³æ±</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String sauce;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é…æ–™</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    ArrayList&lt;String&gt; toppings = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‡†å¤‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">prepare</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Preparing &quot;</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * çƒ˜ç„™</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bake</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Baking &quot;</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ‡ç‰‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cut</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Cutting &quot;</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åŒ…è£…</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">box</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Cutting &quot;</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        StringBuffer display = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        display.append(<span class="string">&quot;---- &quot;</span> + name + <span class="string">&quot; ----\n&quot;</span>);</span><br><span class="line">        display.append(<span class="string">&quot;dough:&quot;</span> + dough + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        display.append(<span class="string">&quot;sauce:&quot;</span> + sauce + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        display.append(<span class="string">&quot;toppings:&quot;</span> + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (String topping : toppings)&#123;</span><br><span class="line">            display.append(topping + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> display.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="CheesePizza-java"><a href="#CheesePizza-java" class="headerlink" title="CheesePizza.java"></a>CheesePizza.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pizza;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CheesePizza</span> <span class="keyword">extends</span> <span class="title">Pizza</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CheesePizza</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        name = <span class="string">&quot;Cheese Pizza&quot;</span>;</span><br><span class="line">        dough = <span class="string">&quot;Regular Crust&quot;</span>;</span><br><span class="line">        sauce = <span class="string">&quot;Marinara Pizza Sauce&quot;</span>;</span><br><span class="line">        toppings.add(<span class="string">&quot;Fresh Mozzarella&quot;</span>);</span><br><span class="line">        toppings.add(<span class="string">&quot;Parmesan&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ClamPizza-java"><a href="#ClamPizza-java" class="headerlink" title="ClamPizza.java"></a>ClamPizza.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pizza;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClamPizza</span> <span class="keyword">extends</span> <span class="title">Pizza</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ClamPizza</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        name = <span class="string">&quot;Clam Pizza&quot;</span>;</span><br><span class="line">        dough = <span class="string">&quot;Thin crust&quot;</span>;</span><br><span class="line">        sauce = <span class="string">&quot;White garlic sauce&quot;</span>;</span><br><span class="line">        toppings.add(<span class="string">&quot;Clams&quot;</span>);</span><br><span class="line">        toppings.add(<span class="string">&quot;Grated parmesan cheese&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Factory"><a href="#Factory" class="headerlink" title="Factory"></a>Factory</h2><h3 id="SimplePizzaFactory-java"><a href="#SimplePizzaFactory-java" class="headerlink" title="SimplePizzaFactory.java"></a>SimplePizzaFactory.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Factory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pizza.CheesePizza;</span><br><span class="line"><span class="keyword">import</span> pizza.ClamPizza;</span><br><span class="line"><span class="keyword">import</span> pizza.Pizza;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç®€å•å·¥å‚ç”¨äºåˆ¶ä½œpizza</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimplePizzaFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Pizza <span class="title">createPizza</span><span class="params">(String type)</span> </span>&#123;</span><br><span class="line">        Pizza pizza = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (type.equals(<span class="string">&quot;cheese&quot;</span>)) &#123;</span><br><span class="line">            pizza = <span class="keyword">new</span> CheesePizza();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type.equals(<span class="string">&quot;clam&quot;</span>)) &#123;</span><br><span class="line">            pizza = <span class="keyword">new</span> ClamPizza();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> pizza;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Store"><a href="#Store" class="headerlink" title="Store"></a>Store</h2><h3 id="PizzaStore-java"><a href="#PizzaStore-java" class="headerlink" title="PizzaStore.java"></a>PizzaStore.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Store;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Factory.SimplePizzaFactory;</span><br><span class="line"><span class="keyword">import</span> pizza.Pizza;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Pizzaåº—ï¼Œç”¨äºè®¢è´­Pizza</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PizzaStore</span> </span>&#123;</span><br><span class="line">    SimplePizzaFactory factory;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PizzaStore</span><span class="params">(SimplePizzaFactory factory)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.factory = factory;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Pizza <span class="title">orderPizza</span><span class="params">(String type)</span> </span>&#123;</span><br><span class="line">        Pizza pizza;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * å·¥å‚åˆ¶ä½œå¤„typeç±»å‹çš„Pizza</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        pizza = factory.createPizza(type);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * çƒ˜ç„™ï¼Œåˆ‡ç‰‡ï¼Œæ‰“åŒ…ç­‰</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        pizza.prepare();</span><br><span class="line">        pizza.bake();</span><br><span class="line">        pizza.cut();</span><br><span class="line">        pizza.box();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> pizza;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Customer-java"><a href="#Customer-java" class="headerlink" title="Customer.java"></a>Customer.java</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Factory.SimplePizzaFactory;</span><br><span class="line"><span class="keyword">import</span> Store.PizzaStore;</span><br><span class="line"><span class="keyword">import</span> pizza.Pizza;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¨¡æ‹Ÿé¡¾å®¢è´­ä¹°pizza</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">customer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * åˆ›å»ºå·¥å‚å¹¶ä¸”åˆ›å»ºä¸€ä¸ªPizzaStoreå¯¹è±¡</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        SimplePizzaFactory factory = <span class="keyword">new</span> SimplePizzaFactory();</span><br><span class="line">        PizzaStore store = <span class="keyword">new</span> PizzaStore(factory);</span><br><span class="line"></span><br><span class="line">        Pizza pizza = store.orderPizza(<span class="string">&quot;cheese&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;We ordered a &quot;</span> + pizza.getName() + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        System.out.println(pizza);</span><br><span class="line"></span><br><span class="line">        pizza = store.orderPizza(<span class="string">&quot;clam&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;We ordered a &quot;</span> + pizza.getName() + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        System.out.println(pizza);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="è¾“å‡º"><a href="#è¾“å‡º" class="headerlink" title="è¾“å‡º"></a>è¾“å‡º</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Preparing Cheese Pizza</span><br><span class="line">Baking Cheese Pizza</span><br><span class="line">Cutting Cheese Pizza</span><br><span class="line">Cutting Cheese Pizza</span><br><span class="line">We ordered a Cheese Pizza</span><br><span class="line"></span><br><span class="line">---- Cheese Pizza ----</span><br><span class="line">dough:Regular Crust</span><br><span class="line">sauce:Marinara Pizza Sauce</span><br><span class="line">toppings:</span><br><span class="line">Fresh Mozzarella</span><br><span class="line">Parmesan</span><br><span class="line"></span><br><span class="line">Preparing Clam Pizza</span><br><span class="line">Baking Clam Pizza</span><br><span class="line">Cutting Clam Pizza</span><br><span class="line">Cutting Clam Pizza</span><br><span class="line">We ordered a Clam Pizza</span><br><span class="line"></span><br><span class="line">---- Clam Pizza ----</span><br><span class="line">dough:Thin crust</span><br><span class="line">sauce:White garlic sauce</span><br><span class="line">toppings:</span><br><span class="line">Clams</span><br><span class="line">Grated parmesan cheese</span><br></pre></td></tr></table></figure><h1 id="å·¥å‚æ–¹æ³•æ¨¡å¼"><a href="#å·¥å‚æ–¹æ³•æ¨¡å¼" class="headerlink" title="å·¥å‚æ–¹æ³•æ¨¡å¼"></a>å·¥å‚æ–¹æ³•æ¨¡å¼</h1><p><img src="/2019/05/31/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8FJava%E5%AE%9E%E7%8E%B0/2.png" alt></p><h2 id="Pizza"><a href="#Pizza" class="headerlink" title="Pizza"></a>Pizza</h2><h3 id="Pizza-java-1"><a href="#Pizza-java-1" class="headerlink" title="Pizza.java"></a>Pizza.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Pizza;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Pizza</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">    <span class="keyword">public</span> String dough;</span><br><span class="line">    <span class="keyword">public</span> String sauce;</span><br><span class="line">    <span class="keyword">public</span> ArrayList&lt;String&gt; toppings = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">prepare</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Prepare &quot;</span> + name);</span><br><span class="line">        System.out.println(<span class="string">&quot;Tossing dough...&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Adding sauce...&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Adding toppings: &quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (String topping : toppings) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;   &quot;</span> + topping);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bake</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Bake for 25 minutes at 350&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cut</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Cut the pizza into diagonal slices&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">box</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Place pizza in official PizzaStore box&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        StringBuffer display = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        display.append(<span class="string">&quot;---- &quot;</span> + name + <span class="string">&quot; ----\n&quot;</span>);</span><br><span class="line">        display.append(dough + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        display.append(sauce + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (String topping : toppings) &#123;</span><br><span class="line">            display.append(topping + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> display.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="NYStyle"><a href="#NYStyle" class="headerlink" title="NYStyle"></a>NYStyle</h3><h4 id="NYStyleCheesePizza-java"><a href="#NYStyleCheesePizza-java" class="headerlink" title="NYStyleCheesePizza.java"></a>NYStyleCheesePizza.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Pizza.NYStyle;</span><br><span class="line"><span class="keyword">import</span> Pizza.Pizza;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * çº½çº¦å¼CheesePizza</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NYStyleCheesePizza</span> <span class="keyword">extends</span> <span class="title">Pizza</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NYStyleCheesePizza</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        name = <span class="string">&quot;NY Style Sauce and Cheese Pizza&quot;</span>;</span><br><span class="line">        dough = <span class="string">&quot;Thin Crust Dough&quot;</span>;</span><br><span class="line">        sauce = <span class="string">&quot;Marinara Sauce&quot;</span>;</span><br><span class="line"></span><br><span class="line">        toppings.add(<span class="string">&quot;Grated Reggiano Cheese&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="NYStyleClamPizza-java"><a href="#NYStyleClamPizza-java" class="headerlink" title="NYStyleClamPizza.java"></a>NYStyleClamPizza.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Pizza.NYStyle;</span><br><span class="line"><span class="keyword">import</span> Pizza.Pizza;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * çº½çº¦å¼ClamPizza</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NYStyleClamPizza</span> <span class="keyword">extends</span> <span class="title">Pizza</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NYStyleClamPizza</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        name = <span class="string">&quot;NY Style Clam Pizza&quot;</span>;</span><br><span class="line">        dough = <span class="string">&quot;Thin Crust Dough&quot;</span>;</span><br><span class="line">        sauce = <span class="string">&quot;Marinara Sauce&quot;</span>;</span><br><span class="line"></span><br><span class="line">        toppings.add(<span class="string">&quot;Grated Reggiano Cheese&quot;</span>);</span><br><span class="line">        toppings.add(<span class="string">&quot;Fresh Clams from Long Island Sound&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ChicagoStyle"><a href="#ChicagoStyle" class="headerlink" title="ChicagoStyle"></a>ChicagoStyle</h3><h4 id="ChicagoStyleCheesePizza-java"><a href="#ChicagoStyleCheesePizza-java" class="headerlink" title="ChicagoStyleCheesePizza.java"></a>ChicagoStyleCheesePizza.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Pizza.ChicagoStyle;</span><br><span class="line"><span class="keyword">import</span> Pizza.Pizza;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * èŠåŠ å“¥å¼CheesePizza</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChicagoStyleCheesePizza</span> <span class="keyword">extends</span> <span class="title">Pizza</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ChicagoStyleCheesePizza</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        name = <span class="string">&quot;Chicago Style Deep Dish Cheese Pizza&quot;</span>;</span><br><span class="line">        dough = <span class="string">&quot;Extra Thick Crust Dough&quot;</span>;</span><br><span class="line">        sauce = <span class="string">&quot;Plum Tomato Sauce&quot;</span>;</span><br><span class="line"></span><br><span class="line">        toppings.add(<span class="string">&quot;Shredded Mozzarella Cheese&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cut</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Cutting the pizza into square slices&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ChicagoStyleClamPizza-java"><a href="#ChicagoStyleClamPizza-java" class="headerlink" title="ChicagoStyleClamPizza.java"></a>ChicagoStyleClamPizza.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Pizza.ChicagoStyle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Pizza.Pizza;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * èŠåŠ å“¥å¼ClamPizza</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChicagoStyleClamPizza</span> <span class="keyword">extends</span> <span class="title">Pizza</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ChicagoStyleClamPizza</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        name = <span class="string">&quot;Chicago Style Clam Pizza&quot;</span>;</span><br><span class="line">        dough = <span class="string">&quot;Extra Thick Crust Dough&quot;</span>;</span><br><span class="line">        sauce = <span class="string">&quot;Plum Tomato Sauce&quot;</span>;</span><br><span class="line"></span><br><span class="line">        toppings.add(<span class="string">&quot;Shredded Mozzarella Cheese&quot;</span>);</span><br><span class="line">        toppings.add(<span class="string">&quot;Frozen Clams from Chesapeake Bay&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cut</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Cutting the pizza into square slices&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Store-1"><a href="#Store-1" class="headerlink" title="Store"></a>Store</h2><h3 id="PizzaStore-java-1"><a href="#PizzaStore-java-1" class="headerlink" title="PizzaStore.java"></a>PizzaStore.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Store;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Pizza.Pizza;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">PizzaStore</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¶ä½œitemç±»å‹çš„Pizza</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item éœ€è¦itemç±»çš„Pizza</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Pizza</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> Pizza <span class="title">createPizza</span><span class="params">(String item)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Pizza <span class="title">orderPizza</span><span class="params">(String type)</span></span>&#123;</span><br><span class="line">        Pizza pizza = createPizza(type);</span><br><span class="line">        System.out.println(<span class="string">&quot;--- Making a &quot;</span> + pizza.getName() + <span class="string">&quot; ---&quot;</span>);</span><br><span class="line">        pizza.prepare();</span><br><span class="line">        pizza.bake();</span><br><span class="line">        pizza.cut();</span><br><span class="line">        pizza.box();</span><br><span class="line">        <span class="keyword">return</span> pizza;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="NYPizzaStore-java"><a href="#NYPizzaStore-java" class="headerlink" title="NYPizzaStore.java"></a>NYPizzaStore.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Store;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Pizza.NYStyle.*;</span><br><span class="line"><span class="keyword">import</span> Pizza.Pizza;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * çº½çº¦Pizzaåº—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NYPizzaStore</span> <span class="keyword">extends</span> <span class="title">PizzaStore</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Pizza <span class="title">createPizza</span><span class="params">(String item)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span> (item) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;cheese&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> NYStyleCheesePizza();</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;clam&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> NYStyleClamPizza();</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ChicagoPizzaStore-java"><a href="#ChicagoPizzaStore-java" class="headerlink" title="ChicagoPizzaStore.java"></a>ChicagoPizzaStore.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Store;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Pizza.ChicagoStyle.*;</span><br><span class="line"><span class="keyword">import</span> Pizza.Pizza;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * èŠåŠ å“¥Pizzaåº—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChicagoPizzaStore</span> <span class="keyword">extends</span> <span class="title">PizzaStore</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Pizza <span class="title">createPizza</span><span class="params">(String item)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span> (item) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;cheese&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> ChicagoStyleCheesePizza();</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;clam&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> ChicagoStyleClamPizza();</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Customer-java-1"><a href="#Customer-java-1" class="headerlink" title="Customer.java"></a>Customer.java</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Pizza.Pizza;</span><br><span class="line"><span class="keyword">import</span> Store.ChicagoPizzaStore;</span><br><span class="line"><span class="keyword">import</span> Store.NYPizzaStore;</span><br><span class="line"><span class="keyword">import</span> Store.PizzaStore;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¨¡æ‹Ÿé¡¾å®¢è´­ä¹°pizza</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">customer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * å¼€ä¸¤å®¶åº—</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        PizzaStore nyStore = <span class="keyword">new</span> NYPizzaStore();</span><br><span class="line">        PizzaStore chicagoStore = <span class="keyword">new</span> ChicagoPizzaStore();</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * çº½çº¦å¼CheesePizza</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Pizza pizza = nyStore.orderPizza(<span class="string">&quot;cheese&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Ethan ordered a &quot;</span> + pizza.getName() + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * è´­ä¹°èŠåŠ å“¥å¼CheesePizza</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        pizza = chicagoStore.orderPizza(<span class="string">&quot;cheese&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Joel ordered a &quot;</span> + pizza.getName() + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è¾“å‡º-1"><a href="#è¾“å‡º-1" class="headerlink" title="è¾“å‡º"></a>è¾“å‡º</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">--- Making a NY Style Sauce and Cheese Pizza ---</span><br><span class="line">Prepare NY Style Sauce and Cheese Pizza</span><br><span class="line">Tossing dough...</span><br><span class="line">Adding sauce...</span><br><span class="line">Adding toppings: </span><br><span class="line">   Grated Reggiano Cheese</span><br><span class="line">Bake <span class="keyword">for</span> <span class="number">25</span> minutes at <span class="number">350</span></span><br><span class="line">Cut the pizza into diagonal slices</span><br><span class="line">Place pizza in official PizzaStore box</span><br><span class="line">Ethan ordered a NY Style Sauce and Cheese Pizza</span><br><span class="line"></span><br><span class="line">--- Making a Chicago Style Deep Dish Cheese Pizza ---</span><br><span class="line">Prepare Chicago Style Deep Dish Cheese Pizza</span><br><span class="line">Tossing dough...</span><br><span class="line">Adding sauce...</span><br><span class="line">Adding toppings: </span><br><span class="line">   Shredded Mozzarella Cheese</span><br><span class="line">Bake <span class="keyword">for</span> <span class="number">25</span> minutes at <span class="number">350</span></span><br><span class="line">Cutting the pizza into square slices</span><br><span class="line">Place pizza in official PizzaStore box</span><br><span class="line">Joel ordered a Chicago Style Deep Dish Cheese Pizza</span><br></pre></td></tr></table></figure><h1 id="æŠ½è±¡å·¥å‚æ¨¡å¼"><a href="#æŠ½è±¡å·¥å‚æ¨¡å¼" class="headerlink" title="æŠ½è±¡å·¥å‚æ¨¡å¼"></a>æŠ½è±¡å·¥å‚æ¨¡å¼</h1><p><img src="/2019/05/31/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8FJava%E5%AE%9E%E7%8E%B0/3.png" alt></p><p>ç¯‡å¹…è¾ƒé•¿ï¼Œåªè´´ä¸Šéƒ¨åˆ†ä»£ç </p><h2 id="Ingredient"><a href="#Ingredient" class="headerlink" title="Ingredient"></a>Ingredient</h2><h3 id="Cheese-java"><a href="#Cheese-java" class="headerlink" title="Cheese.java"></a>Cheese.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Ingredient.Cheese;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Cheese</span> </span>&#123;</span><br><span class="line">    <span class="function">String <span class="title">toString</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="MozzarellaCheese-java"><a href="#MozzarellaCheese-java" class="headerlink" title="MozzarellaCheese.java"></a>MozzarellaCheese.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Ingredient.Cheese;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Ingredient.Cheese.Cheese;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MozzarellaCheese</span> <span class="keyword">implements</span> <span class="title">Cheese</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Shredded Mozzarella&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ReggianoCheese-java"><a href="#ReggianoCheese-java" class="headerlink" title="ReggianoCheese.java"></a>ReggianoCheese.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Ingredient.Cheese;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReggianoCheese</span> <span class="keyword">implements</span> <span class="title">Cheese</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Reggiano Cheese&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="IngredientFactory"><a href="#IngredientFactory" class="headerlink" title="IngredientFactory"></a>IngredientFactory</h2><h3 id="ChicagoPizzaIngredientFactory-java"><a href="#ChicagoPizzaIngredientFactory-java" class="headerlink" title="ChicagoPizzaIngredientFactory.java"></a>ChicagoPizzaIngredientFactory.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> IngredientFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Ingredient.Cheese.*;</span><br><span class="line"><span class="keyword">import</span> Ingredient.Dough.*;</span><br><span class="line"><span class="keyword">import</span> Ingredient.Sauce.*;</span><br><span class="line"><span class="keyword">import</span> Ingredient.Veggies.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * èŠåŠ å“¥åŸæ–™å·¥å‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChicagoPizzaIngredientFactory</span> <span class="keyword">implements</span> <span class="title">PizzaIngredientFactory</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Dough <span class="title">createDough</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ThickCrustDough();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Sauce <span class="title">createSauce</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> PlumTomatoSauce();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Cheese <span class="title">createCheese</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MozzarellaCheese();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Veggies[] createVeggies() &#123;</span><br><span class="line">        Veggies[] veggies = &#123;</span><br><span class="line">                <span class="keyword">new</span> BlackOlives(),</span><br><span class="line">                <span class="keyword">new</span> Spinach(),</span><br><span class="line">                <span class="keyword">new</span> Eggplant()</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> veggies;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Pizza-1"><a href="#Pizza-1" class="headerlink" title="Pizza"></a>Pizza</h2><h3 id="CheesePizza-java-1"><a href="#CheesePizza-java-1" class="headerlink" title="CheesePizza.java"></a>CheesePizza.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Pizza;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> IngredientFactory.PizzaIngredientFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CheesePizza</span> <span class="keyword">extends</span> <span class="title">Pizza</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åŸæ–™å·¥å‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    PizzaIngredientFactory ingredientFactory;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CheesePizza</span><span class="params">(PizzaIngredientFactory ingredientFactory)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.ingredientFactory = ingredientFactory;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åŸæ–™å·¥å‚åˆ¶ä½œåŸæ–™</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">prepare</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Preparing &quot;</span> + name);</span><br><span class="line">        dough = ingredientFactory.createDough();</span><br><span class="line">        sauce = ingredientFactory.createSauce();</span><br><span class="line">        cheese = ingredientFactory.createCheese();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Store-2"><a href="#Store-2" class="headerlink" title="Store"></a>Store</h2><h3 id="ChicagoPizzaStore-java-1"><a href="#ChicagoPizzaStore-java-1" class="headerlink" title="ChicagoPizzaStore.java"></a>ChicagoPizzaStore.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Store;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> IngredientFactory.ChicagoPizzaIngredientFactory;</span><br><span class="line"><span class="keyword">import</span> IngredientFactory.PizzaIngredientFactory;</span><br><span class="line"><span class="keyword">import</span> Pizza.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * èŠåŠ å“¥Pizzaåº—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChicagoPizzaStore</span> <span class="keyword">extends</span> <span class="title">PizzaStore</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Pizza <span class="title">createPizza</span><span class="params">(String item)</span> </span>&#123;</span><br><span class="line">        Pizza pizza = <span class="keyword">null</span>;</span><br><span class="line">        PizzaIngredientFactory ingredientFactory = <span class="keyword">new</span> ChicagoPizzaIngredientFactory();</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * åˆ¶ä½œitemç±»å‹çš„Pizza</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">switch</span> (item)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;cheese&quot;</span>:</span><br><span class="line">                pizza = <span class="keyword">new</span> CheesePizza(ingredientFactory);</span><br><span class="line">                pizza.setName(<span class="string">&quot;Chicago Style Cheese Pizza&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;clam&quot;</span>:</span><br><span class="line">                pizza = <span class="keyword">new</span> ClamPizza(ingredientFactory);</span><br><span class="line">                pizza.setName(<span class="string">&quot;Chicago Style Clam Pizza&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> pizza;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Customer-java-2"><a href="#Customer-java-2" class="headerlink" title="Customer.java"></a>Customer.java</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Pizza.Pizza;</span><br><span class="line"><span class="keyword">import</span> Store.ChicagoPizzaStore;</span><br><span class="line"><span class="keyword">import</span> Store.NYPizzaStore;</span><br><span class="line"><span class="keyword">import</span> Store.PizzaStore;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        PizzaStore nyStore = <span class="keyword">new</span> NYPizzaStore();</span><br><span class="line">        PizzaStore chicagoStore = <span class="keyword">new</span> ChicagoPizzaStore();</span><br><span class="line"></span><br><span class="line">        Pizza pizza = nyStore.orderPizza(<span class="string">&quot;cheese&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Ethan ordered a &quot;</span> + pizza + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">        pizza = chicagoStore.orderPizza(<span class="string">&quot;cheese&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Joel ordered a &quot;</span> + pizza + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è¾“å‡º-2"><a href="#è¾“å‡º-2" class="headerlink" title="è¾“å‡º"></a>è¾“å‡º</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">--- Making a NY Style Sauce and Cheese Pizza ---</span><br><span class="line">Prepare NY Style Sauce and Cheese Pizza</span><br><span class="line">Tossing dough...</span><br><span class="line">Adding sauce...</span><br><span class="line">Adding toppings: </span><br><span class="line">   Grated Reggiano Cheese</span><br><span class="line">Bake <span class="keyword">for</span> <span class="number">25</span> minutes at <span class="number">350</span></span><br><span class="line">Cut the pizza into diagonal slices</span><br><span class="line">Place pizza in official PizzaStore box</span><br><span class="line">Ethan ordered a NY Style Sauce and Cheese Pizza</span><br><span class="line"></span><br><span class="line">--- Making a Chicago Style Deep Dish Cheese Pizza ---</span><br><span class="line">Prepare Chicago Style Deep Dish Cheese Pizza</span><br><span class="line">Tossing dough...</span><br><span class="line">Adding sauce...</span><br><span class="line">Adding toppings: </span><br><span class="line">   Shredded Mozzarella Cheese</span><br><span class="line">Bake <span class="keyword">for</span> <span class="number">25</span> minutes at <span class="number">350</span></span><br><span class="line">Cutting the pizza into square slices</span><br><span class="line">Place pizza in official PizzaStore box</span><br><span class="line">Joel ordered a Chicago Style Deep Dish Cheese Pizza</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
            <tag> å·¥å‚æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè®¾è®¡æ¨¡å¼-å·¥å‚æ¨¡å¼</title>
      <link href="/2019/05/30/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/05/30/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>ã€ŠHead firstè®¾è®¡æ¨¡å¼ã€‹ä¹‹å·¥å‚æ¨¡å¼</p><span id="more"></span><p>æŒ‰ç…§è¿™æœ¬ä¹¦ä»¥æŠ«è¨åº—ä¸ºä¾‹å­è®²è§£ï¼Œå·¥å‚æ¨¡å¼åˆ†ä¸º<code>ç®€å•å·¥å‚æ¨¡å¼</code>ï¼Œ<code>å·¥å‚æ–¹æ³•æ¨¡å¼</code>ï¼Œ<code>æŠ½è±¡å·¥å‚æ¨¡å¼</code></p><p>å‚è€ƒï¼š<a href="http://www.importnew.com/23499.html"><a href="http://www.importnew.com/23499.html">http://www.importnew.com/23499.html</a></a></p><p><a href="https://github.com/crazysunj/crazysunj.github.io/wiki/å·¥å‚æ¨¡å¼">https://github.com/crazysunj/crazysunj.github.io/wiki/%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F</a></p><p><a href="https://www.jianshu.com/p/78c4d93fab87">https://www.jianshu.com/p/78c4d93fab87</a></p><h1 id="ç®€å•å·¥å‚æ¨¡å¼"><a href="#ç®€å•å·¥å‚æ¨¡å¼" class="headerlink" title="ç®€å•å·¥å‚æ¨¡å¼"></a>ç®€å•å·¥å‚æ¨¡å¼</h1><h2 id="é¢„å®šæŠ«è¨"><a href="#é¢„å®šæŠ«è¨" class="headerlink" title="é¢„å®šæŠ«è¨"></a>é¢„å®šæŠ«è¨</h2><p>å‡è®¾æœ‰ä¸€å®¶æŠ«è¨åº—ï¼Œé¢„å®šæŠ«è¨çš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Pizza <span class="title">orderPizza</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Pizza pizza = <span class="keyword">new</span> Pizza();</span><br><span class="line">     </span><br><span class="line">    <span class="comment">// å‡†å¤‡é¢çš®ï¼ŒåŠ è°ƒæ–™ç­‰</span></span><br><span class="line">    pizza.prepare();</span><br><span class="line">    <span class="comment">// çƒ˜çƒ¤</span></span><br><span class="line">    pizza.bake();</span><br><span class="line">    <span class="comment">// åˆ‡ç‰‡</span></span><br><span class="line">    pizza.cut();</span><br><span class="line">    <span class="comment">//åŒ…è£…</span></span><br><span class="line">    pizza.box();</span><br><span class="line">    <span class="keyword">return</span> pizza;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ›´å¤šæŠ«è¨ç±»å‹</p><p>åˆšåˆšåªæ˜¯ä¸€ä¸ªPizzaç±»å‹ï¼Œç°åœ¨éœ€è¦æ›´å¤šçš„æŠ«è¨ç±»å‹ã€‚æ‰€ä»¥ä»£ç å¯ä»¥æ”¹ä¸ºå¦‚ä¸‹ï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç°åœ¨æŠŠæŠ«è¨ç±»å‹ä¼ å…¥orderPizza</span></span><br><span class="line"><span class="function">Pizza <span class="title">orderPizza</span><span class="params">(String type)</span></span>&#123;</span><br><span class="line">    Pizza pizza;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ ¹æ®æŠ«è¨çš„ç±»å‹ï¼Œæˆ‘ä»¬å®ä¾‹åŒ–æ­£ç¡®çš„å…·ä½“ç±»ï¼Œç„¶åå°†å…¶èµ‹å€¼ç»™pizzaå®ä¾‹å˜é‡ã€‚</span></span><br><span class="line">    <span class="comment">// è¯·æ³¨æ„ï¼Œè¿™é‡Œçš„ä»»ä½•æŠ«è¨éƒ½å¿…é¡»å®ç°pizzaæ¥å£</span></span><br><span class="line">     <span class="keyword">if</span> (type.equals(<span class="string">&quot;cheese&quot;</span>)) &#123;</span><br><span class="line">        pizza = <span class="keyword">new</span> CheesePizza();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type.equals(<span class="string">&quot;greek&quot;</span>)) &#123;</span><br><span class="line">        pizza = <span class="keyword">new</span> GreekPizza();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type.equals(<span class="string">&quot;pepperoni&quot;</span>)) &#123;</span><br><span class="line">        pizza = <span class="keyword">new</span> PepperoniPizza();</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="comment">// å‡†å¤‡é¢çš®ï¼ŒåŠ è°ƒæ–™ç­‰</span></span><br><span class="line">    pizza.prepare();</span><br><span class="line">    <span class="comment">// çƒ˜çƒ¤</span></span><br><span class="line">    pizza.bake();</span><br><span class="line">    <span class="comment">// åˆ‡ç‰‡</span></span><br><span class="line">    pizza.cut();</span><br><span class="line">    <span class="comment">//åŒ…è£…</span></span><br><span class="line">    pizza.box();</span><br><span class="line">    <span class="keyword">return</span> pizza;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹æŠ«è¨ç±»å‹"><a href="#ä¿®æ”¹æŠ«è¨ç±»å‹" class="headerlink" title="ä¿®æ”¹æŠ«è¨ç±»å‹"></a>ä¿®æ”¹æŠ«è¨ç±»å‹</h2><p>ç°åœ¨éœ€è¦å¯¹æŠ«è¨ç±»å‹è¿›è¡Œå¢åŠ å’Œåˆ é™¤ï¼Œå‡å®šå»æ‰<code>greek</code>æŠ«è¨ï¼Œå¹¶ä¸”å¢åŠ ä¸ª<code>clam</code>æŠ«è¨ï¼Œæ‰€ä»¥å¯ä»¥ä¿®æ”¹å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç°åœ¨æŠŠæŠ«è¨ç±»å‹ä¼ å…¥orderPizza</span></span><br><span class="line"><span class="function">Pizza <span class="title">orderPizza</span><span class="params">(String type)</span></span>&#123;</span><br><span class="line">    Pizza pizza;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ ¹æ®æŠ«è¨çš„ç±»å‹ï¼Œæˆ‘ä»¬å®ä¾‹åŒ–æ­£ç¡®çš„å…·ä½“ç±»ï¼Œç„¶åå°†å…¶èµ‹å€¼ç»™pizzaå®ä¾‹å˜é‡ã€‚</span></span><br><span class="line">    <span class="comment">// è¯·æ³¨æ„ï¼Œè¿™é‡Œçš„ä»»ä½•æŠ«è¨éƒ½å¿…é¡»å®ç°pizzaæ¥å£</span></span><br><span class="line">     <span class="keyword">if</span> (type.equals(<span class="string">&quot;cheese&quot;</span>)) &#123;</span><br><span class="line">        pizza = <span class="keyword">new</span> CheesePizza();</span><br><span class="line"><span class="comment">//    &#125; else if (type.equals(&quot;greek&quot;)) &#123;</span></span><br><span class="line"><span class="comment">//        pizza = new GreekPizza();</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type.equals(<span class="string">&quot;pepperoni&quot;</span>)) &#123;</span><br><span class="line">          pizza = <span class="keyword">new</span> PepperoniPizza();</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type.equals(<span class="string">&quot;clam&quot;</span>)) &#123;</span><br><span class="line">          pizza = <span class="keyword">new</span> clamPizza();</span><br><span class="line">         </span><br><span class="line">    <span class="comment">// è¿™é‡Œæ˜¯æˆ‘ä»¬ä¸æƒ³æ”¹å˜çš„åœ°æ–¹ã€‚å› ä¸ºæŠ«è¨çš„å‡†å¤‡ã€çƒ˜çƒ¤ã€åŒ…è£…ï¼Œå¤šå¹´æ¥æŒç»­ä¸å˜</span></span><br><span class="line">    <span class="comment">// æ‰€ä»¥è¿™éƒ¨åˆ†çš„ä»£ç ä¸ä¼šæ”¹å˜ï¼Œåªæœ‰å‘ç”Ÿè¿™äº›åŠ¨ä½œçš„æŠ«è¨ä¼šæ”¹å˜</span></span><br><span class="line">    pizza.prepare();</span><br><span class="line">    pizza.bake();</span><br><span class="line">    pizza.cut();</span><br><span class="line">    pizza.box();</span><br><span class="line">    <span class="keyword">return</span> pizza;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±æ­¤çœ‹æ¥ï¼Œæˆ‘ä»¬åˆå¾—å»æ”¹æ–¹æ³•é‡Œé¢çš„å…·ä½“ä»£ç ï¼Œä½†æ˜¯æ”¹ç€æ”¹ç€ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œæˆ‘ä»¬æ”¹çš„éƒ½æ˜¯åŒä¸€ä¸ªåœ°æ–¹ï¼Œæ˜¯çš„ï¼Œå…·ä½“çš„pizzaä¸åœçš„å˜ï¼Œè€Œå…¶å®ƒçš„éƒ½æ²¡å˜ã€‚</p><p>ç°åœ¨æˆ‘ä»¬å·²ç»çŸ¥é“å“ªäº›ä¼šæ”¹å˜ï¼Œå“ªäº›ä¸ä¼šæ”¹å˜ï¼Œè¯¥æ˜¯ä½¿ç”¨å°è£…çš„æ—¶å€™äº†ã€‚å°è£…å¯ä»¥è®©æˆ‘ä»¬å°†è¦ä¿®æ”¹çš„éƒ¨åˆ†æ”¾åˆ°åˆ«çš„åœ°æ–¹ï¼Œä»è€Œä¸ç”¨ä¿®æ”¹<code>orderPizza</code>ç±»ï¼Œä¸“æ³¨äºéœ€è¦ä¿®æ”¹çš„åœ°æ–¹ã€‚ç°åœ¨æœ€å¥½å°†åˆ›å»ºå¯¹è±¡ç§»åˆ°<code>orderPizza()</code>ä¹‹å¤–ï¼Œä½†æ€ä¹ˆåšå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥æŠŠåˆ›å»ºæŠ«è¨çš„ä»£ç ç§»åˆ°å¦ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œç”±è¿™ä¸ªæ–°å¯¹è±¡ä¸“èŒåˆ›å»ºæŠ«è¨ã€‚</p><hr><p><strong>æˆ‘ä»¬ç§°è¿™ä¸ªæ–°å¯¹è±¡ä¸ºâ€œå·¥å‚â€</strong></p><p>å·¥å‚ï¼ˆ<code>factory</code>ï¼‰å¤„ç†åˆ›å»ºå¯¹è±¡çš„ç»†èŠ‚ã€‚ä¸€æ—¦æœ‰äº†<code>SimplePizzaFactory</code>ï¼Œ<code>orderPizza()</code>å°±å˜æˆæ­¤å¯¹è±¡çš„å®¢æˆ·ã€‚å½“éœ€è¦æŠ«è¨æ—¶ï¼Œå°±å«æŠ«è¨å·¥å‚åšä¸€ä¸ªã€‚</p><p>ç°åœ¨<code>orderPizza()</code>æ–¹æ³•åªå…³å¿ƒä»å·¥å‚å¾—åˆ°äº†ä¸€ä¸ªæŠ«è¨ï¼Œè€Œè¿™ä¸ªæŠ«è¨å®ç°äº†Pizzaæ¥å£ï¼Œæ‰€ä»¥å®ƒå¯ä»¥è°ƒç”¨<code>prepare()</code>ï¼Œ<code>bake()</code>ï¼Œ<code>cut()</code>ï¼Œ<code>box()</code>æ¥åˆ†åˆ«è¿›è¡Œå‡†å¤‡ã€çƒ˜çƒ¤ã€åˆ‡ç‰‡ã€è£…ç›’ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç°åœ¨æˆ‘ä»¬ä¸ºPizzaStoreåŠ ä¸Šä¸€ä¸ªå¯¹SimplePizzaFactoryçš„å¼•ç”¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PizzaStore</span> </span>&#123;</span><br><span class="line">    SimplePizzaFactory factory;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// PizzaStoreçš„æ„é€ å™¨ï¼Œéœ€è¦ä¸€ä¸ªå·¥å‚ä½œä¸ºå‚æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PizzaStore</span><span class="params">(SimplePizzaFactory factory)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.factory = factory;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Pizza <span class="title">orderPizza</span><span class="params">(String type)</span> </span>&#123;</span><br><span class="line">        Pizza pizza;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// orderPizza()æ–¹æ³•é€šè¿‡ç®€å•ä¼ å…¥è®¢å•ç±»å‹æ¥ä½¿ç”¨å·¥å‚åˆ›å»ºæŠ«è¨ã€‚</span></span><br><span class="line">        <span class="comment">// è¯·æ³¨æ„ï¼Œæˆ‘ä»¬æŠŠnewæ“ä½œç¬¦æ›¿æ¢æˆå·¥å‚å¯¹è±¡çš„åˆ›å»ºæ–¹æ³•ã€‚è¿™é‡Œä¸å†ä½¿ç”¨å…·ä½“å®ä¾‹åŒ–</span></span><br><span class="line">        pizza = factory.createPizza(type);</span><br><span class="line"> </span><br><span class="line">        pizza.prepare();</span><br><span class="line">        pizza.bake();</span><br><span class="line">        pizza.cut();</span><br><span class="line">        pizza.box();</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">return</span> pizza;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SimplePizzaFactoryæ˜¯æˆ‘ä»¬çš„æ–°ç±»ï¼Œå®ƒåªåšä¸€ä»¶äº‹æƒ…ï¼šå¸®å®ƒçš„å®¢æˆ·åˆ›å»ºæŠ«è¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimplePizzaFactory</span> </span>&#123;</span><br><span class="line">    <span class="comment">// é¦–å…ˆï¼Œåœ¨è¿™ä¸ªå·¥å‚å†…å®šä¹‰ä¸€ä¸ªcreatePizza()æ–¹æ³•ï¼Œæ‰€æœ‰å®¢æˆ·ç”¨è¿™ä¸ªæ–¹æ³•æ¥å®ä¾‹åŒ–æ–°å¯¹è±¡ã€‚</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Pizza <span class="title">createPizza</span><span class="params">(String type)</span> </span>&#123;</span><br><span class="line">        Pizza pizza = <span class="keyword">null</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// è¿™æ˜¯ä»orderPizza()æ–¹æ³•ä¸­ç§»è¿‡æ¥çš„ä»£ç </span></span><br><span class="line">        <span class="keyword">if</span> (type.equals(<span class="string">&quot;cheese&quot;</span>)) &#123;</span><br><span class="line">            pizza = <span class="keyword">new</span> CheesePizza();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type.equals(<span class="string">&quot;pepperoni&quot;</span>)) &#123;</span><br><span class="line">            pizza = <span class="keyword">new</span> PepperoniPizza();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type.equals(<span class="string">&quot;clam&quot;</span>)) &#123;</span><br><span class="line">            pizza = <span class="keyword">new</span> ClamPizza();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> pizza;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å·¥å‚æ¨¡å¼æ–¹æ³•"><a href="#å·¥å‚æ¨¡å¼æ–¹æ³•" class="headerlink" title="å·¥å‚æ¨¡å¼æ–¹æ³•"></a>å·¥å‚æ¨¡å¼æ–¹æ³•</h1><h2 id="åŠ ç›Ÿåº—"><a href="#åŠ ç›Ÿåº—" class="headerlink" title="åŠ ç›Ÿåº—"></a>åŠ ç›Ÿåº—</h2><p>æˆ‘ä»¬çš„å“ç‰Œè¶Šåšè¶Šå¤§ï¼Œæ€»æ˜¯å¹¶å…ä¸äº†åŠ ç›Ÿè¿™ç©æ„ï¼Œä½œä¸ºè€æ¿ï¼Œé‚£ä¹ˆä½ å¿…é¡»ä¸¥æ ¼ç»†æŸ¥è¿™äº›åŠ ç›Ÿåº—çš„è´¨é‡ï¼ŒåŠ ç›Ÿåº—å¯èƒ½æ¥è‡ªä¸åŒçš„åœ°åŒºï¼Œé£å‘³ä¸åŒï¼Œä¸å¦¨è¯´çº½çº¦ã€èŠåŠ å“¥ã€åŠ å·ã€‚</p><p>ç¬¬ä¸€ç§æƒ³æ³•å°±æ˜¯ï¼Œå»ºç«‹3ä¸ªä¸åŒçš„å·¥å‚ï¼Œä¼ å…¥PizzaStoreå³å¯ã€‚ä½†æ˜¯è¿™ç§æ„Ÿè§‰æ˜¯ï¼Œ3ä¸ªå‚åŠ å·¥äº†æ¯”è¨ä¹‹åï¼Œåªèƒ½æ”¾åœ¨æˆ‘çš„åº—é‡Œå–çš„èŠ‚å¥å“ˆï¼Ÿ</p><p>é‚£æˆ‘ä»¬ä¸ºä»€ä¹ˆä¸æŠŠåˆ¶é€ pizzaæŠ½è±¡å‡ºæ¥å‘¢ï¼ŒåŒæ—¶åº—ä¹ŸæŠ½è±¡å‡ºæ¥ï¼Œä¸åŒçš„åº—å»åšä¸åŒç±»å‹çš„pizzaï¼Œä¸æ˜¯æ›´å¥½ä¹ˆï¼Ÿä½†éƒ½æ˜¯åœ¨æˆ‘å“ç‰Œä¸‹ã€‚</p><hr><p>é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆå¯¹<code>PizzaStore</code>åšå‡ºæ”¹å˜ï¼ŒæŠŠ<code>createPizza()</code>æ–¹æ³•æ”¾å›åˆ°PizzaStoreä¸­ï¼Œä¸è¿‡è¦æŠŠå®ƒè®¾ç½®æˆâ€œæŠ½è±¡æ–¹æ³•â€ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">PizzaStore</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Pizza <span class="title">orderPizza</span><span class="params">(String type)</span> </span>&#123;</span><br><span class="line">        Pizza pizza;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// ç°åœ¨createPizza()æ–¹æ³•ä»å·¥å‚å¯¹è±¡ä¸­ç§»å›PizzaStore</span></span><br><span class="line">        pizza = createPizza(type);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// è¿™äº›éƒ½æ²¡å˜</span></span><br><span class="line">        pizza.prepare();</span><br><span class="line">        pizza.bake();</span><br><span class="line">        pizza.cut();</span><br><span class="line">        pizza.box();</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">return</span> pizza;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// ç°åœ¨æŠŠå·¥å‚å¯¹è±¡ç§»åˆ°è¿™ä¸ªæ–¹æ³•ä¸­</span></span><br><span class="line">    <span class="comment">// åœ¨PizzaStoreé‡Œï¼Œâ€œå·¥å‚æ–¹æ³•â€ç°åœ¨æ˜¯æŠ½è±¡çš„</span></span><br><span class="line">    <span class="comment">// æ¯ä¸ªå­ç±»éƒ½ä¼šè¦†ç›–createPizza()æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> Pizza <span class="title">createPizza</span><span class="params">(String type)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨å·²ç»æœ‰ä¸€ä¸ªPizzaStoreä½œä¸ºè¶…ç±»ï¼›è®©åŠ ç›Ÿåº—ï¼ˆNYPizzaStoreï¼ŒChicagoPizzaStoreï¼ŒCaliforniaPizzaStoreï¼‰éƒ½ç»§æ‰¿è¿™ä¸ªPizzaStoreï¼Œæ¯ä¸ªå­ç±»å„è‡ªå†³å®šå¦‚ä½•åˆ¶ä½œæŠ«è¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¦‚æœåŠ ç›Ÿåº—ä¸ºé¡¾å®¢æä¾›çº½çº¦é£å‘³çš„æŠ«è¨ï¼Œå°±ä½¿ç”¨NyStylePizzaStoreï¼Œ</span></span><br><span class="line"><span class="comment">// å› ä¸ºæ­¤ç±»çš„createPizza()æ–¹æ³•ä¼šå»ºç«‹çº½çº¦é£å‘³çš„æŠ«è¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NyStylePizzaStore</span> <span class="keyword">extends</span> <span class="title">PizzaStore</span></span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function">Pizza <span class="title">createPizza</span><span class="params">(String type)</span> </span>&#123;</span><br><span class="line">        Pizza pizza = <span class="keyword">null</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span> (type.equals(<span class="string">&quot;cheese&quot;</span>)) &#123;</span><br><span class="line">            pizza = <span class="keyword">new</span> NyStyleCheesePizza();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type.equals(<span class="string">&quot;pepperoni&quot;</span>)) &#123;</span><br><span class="line">            pizza = <span class="keyword">new</span> NyStylePepperoniPizza();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type.equals(<span class="string">&quot;clam&quot;</span>)) &#123;</span><br><span class="line">            pizza = <span class="keyword">new</span> NyStyleClamPizza();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type.equals(<span class="string">&quot;veggie&quot;</span>)) &#123;</span><br><span class="line">            pizza = <span class="keyword">new</span> NyStyleVeggiePizza();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> pizza;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç±»ä¼¼çš„ï¼Œåˆ©ç”¨èŠåŠ å“¥å­ç±»ï¼Œæˆ‘ä»¬å¾—åˆ°äº†å¸¦èŠåŠ å“¥åŸæ–™çš„createPizza()å®ç°</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChicagoStylePizzaStore</span> <span class="keyword">extends</span> <span class="title">PizzaStore</span></span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function">Pizza <span class="title">createPizza</span><span class="params">(String type)</span> </span>&#123;</span><br><span class="line">        Pizza pizza = <span class="keyword">null</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span> (type.equals(<span class="string">&quot;cheese&quot;</span>)) &#123;</span><br><span class="line">            pizza = <span class="keyword">new</span> ChicagoCheesePizza();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type.equals(<span class="string">&quot;pepperoni&quot;</span>)) &#123;</span><br><span class="line">            pizza = <span class="keyword">new</span> ChicagoPepperoniPizza();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type.equals(<span class="string">&quot;clam&quot;</span>)) &#123;</span><br><span class="line">            pizza = <span class="keyword">new</span> ChicagoClamPizza();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type.equals(<span class="string">&quot;veggie&quot;</span>)) &#123;</span><br><span class="line">            pizza = <span class="keyword">new</span> ChicagoVeggiePizza();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> pizza;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åœ°åŒºå·®å¼‚ææ–™ä¸åŒ"><a href="#åœ°åŒºå·®å¼‚ææ–™ä¸åŒ" class="headerlink" title="åœ°åŒºå·®å¼‚ææ–™ä¸åŒ"></a>åœ°åŒºå·®å¼‚ææ–™ä¸åŒ</h2><p>æ¯ä¸ªåŠ ç›Ÿåº—å› ä¸ºå£å‘³ä¸åŒæ‰€ä½¿ç”¨çš„ææ–™ä¹Ÿä¼šä¸åŒï¼Œæœ‰çš„æ˜¯Aé¢å›¢ï¼Œæœ‰çš„æ˜¯Bé¢å›¢ï¼ŒæŒ‰ç…§ä¹‹å‰çš„é‚£ç§è§‚å¿µï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥æŠŠpizzaæ”¹ä¸ºæŠ½è±¡ç±»ï¼Œè¿™æ ·å°±å¯ä»¥ç”±åŠ ç›Ÿåº—è‡ªå·±å†³å®šææ–™äº†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractPizza</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> String name = <span class="string">&quot;pizza&quot;</span>;<span class="comment">//åç§°</span></span><br><span class="line">    <span class="keyword">protected</span> String dough = <span class="string">&quot;dough&quot;</span>;<span class="comment">//é¢å›¢</span></span><br><span class="line">    <span class="keyword">protected</span> String sauce = <span class="string">&quot;sauce&quot;</span>;<span class="comment">//è°ƒå‘³æ±</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">prepare</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;preparing&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bake</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;bake&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cut</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;cut&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">box</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;box&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> æŠ½è±¡ç±»Pizzaæä¾›åç§°ã€é¢å›¢ã€è°ƒå‘³æ±ã€é…æ–™çš„å±æ€§ï¼Œå­ç±»å¯ä»¥åœ¨æ„é€ æ–¹æ³•ä¸­èµ‹å€¼ï¼Œè¿™æ ·å°±æ‰“é€ äº†ä¸åŒçš„å£å‘³ï¼Œæ›´å‹å¥½ä¸€ç‚¹ï¼Œå¯ä»¥åœ¨prepare()æˆ–è€…æ„é€ å‡½æ•°ç­‰åœ°æ–¹èµ‹å€¼é»˜è®¤å€¼ã€‚ä¹Ÿå¯ä»¥æŒ‡å®šé»˜è®¤ææ–™ï¼Œå¦‚æœå­ç±»ä¸æ›´æ”¹ï¼Œåˆ™é€ å‡ºé»˜è®¤pizzaã€‚</p><h1 id="æŠ½è±¡å·¥å‚æ¨¡å¼"><a href="#æŠ½è±¡å·¥å‚æ¨¡å¼" class="headerlink" title="æŠ½è±¡å·¥å‚æ¨¡å¼"></a>æŠ½è±¡å·¥å‚æ¨¡å¼</h1><p>ç°åœ¨åŠ ç›Ÿåº—æ‰“ç®—ä½¿ä½¿ç”¨åˆ«çš„ç±»å‹ææ–™ä»¥å‡å°‘å®ƒä»¬çš„æˆæœ¬ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ”¹å˜ææ–™çš„ç±»å‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractPizza</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> String name = <span class="string">&quot;pizza&quot;</span>;<span class="comment">//åç§°</span></span><br><span class="line">    <span class="keyword">protected</span> Dough dough = <span class="string">&quot;dough&quot;</span>;<span class="comment">//é¢å›¢</span></span><br><span class="line">    <span class="keyword">protected</span> Sauce sauce = <span class="string">&quot;sauce&quot;</span>;<span class="comment">//è°ƒå‘³æ±</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">prepare</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;preparing&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bake</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;bake&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cut</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;cut&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">box</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;box&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ ¹æ®ç±»çš„ä¸ä¸€æ ·æ¥å®ç°ä¸ä¸€æ ·çš„åŸæ–™ï¼Œç„¶åæˆ‘ä»¬è¿˜éœ€è¦åŸæ–™å·¥å‚å»å®ç°è¿™äº›åŸæ–™ï¼ŒæŒ‰ç…§ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå®ç°ä¸€ä¸ªæŠ½è±¡åŸæ–™å·¥å‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> interface <span class="title">PizzaIngredientFctory</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Dough <span class="title">CreateDough</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Sauce <span class="title">CreateSauce</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åä¸åŒåœ°åŒºçš„åŠ ç›Ÿåº—å°±å¯ä»¥æœ‰ä¸åŒçš„åŸæ–™å·¥å‚å»é€ ä¸ä¸€æ ·çš„åŸæ–™</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChicagoPizzaIngredientFctory</span> <span class="title">implemets</span> <span class="title">PizzaIngredientFctory</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Dough <span class="title">CreateDough</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ChicagoDough();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Sauce <span class="title">CreateSauce</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ChicagoDough();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PizzaIngredientFctory</span> <span class="title">implemets</span> <span class="title">PizzaIngredientFctory</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Dough <span class="title">CreateDough</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> NYDough();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Sauce <span class="title">CreateSauce</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> NYDough();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å·¥å‚æ¨¡å¼"><a href="#å·¥å‚æ¨¡å¼" class="headerlink" title="å·¥å‚æ¨¡å¼"></a>å·¥å‚æ¨¡å¼</h1><p> å·¥å‚æ¨¡å¼å·²ç»æ¸…æ™°äº†ï¼Œæ‰€æœ‰å·¥å‚æ¨¡å¼éƒ½ç”¨æ¥å°è£…å¯¹è±¡çš„åˆ›å»ºï¼Œå®ƒé€šè¿‡è®©å­ç±»å†³å®šè¯¥åˆ›å»ºçš„å¯¹è±¡æ˜¯ä»€ä¹ˆï¼Œæ¥è¾¾åˆ°å°†å¯¹è±¡åˆ›å»ºçš„è¿‡ç¨‹å°è£…çš„ç›®çš„ã€‚</p><h1 id="ä¸‰ç§å¯¹æ¯”"><a href="#ä¸‰ç§å¯¹æ¯”" class="headerlink" title="ä¸‰ç§å¯¹æ¯”"></a>ä¸‰ç§å¯¹æ¯”</h1><h2 id="ç®€å•å·¥å‚æ¨¡å¼-1"><a href="#ç®€å•å·¥å‚æ¨¡å¼-1" class="headerlink" title="ç®€å•å·¥å‚æ¨¡å¼"></a>ç®€å•å·¥å‚æ¨¡å¼</h2><p>ç®€å•å·¥å‚æ¨¡å¼æ˜¯ç±»çš„åˆ›å»ºæ¨¡å¼ï¼Œåˆå«åšé™æ€å·¥å‚æ–¹æ³•ï¼ˆ<code>Static Factory Method</code>ï¼‰æ¨¡å¼ã€‚ç®€å•å·¥å‚æ¨¡å¼æ˜¯ç”±ä¸€ä¸ªå·¥å‚å¯¹è±¡å†³å®šåˆ›å»ºå‡ºå“ªä¸€ç§äº§å“ç±»çš„å®ä¾‹ã€‚<br>ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="/2019/05/30/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/1.webp" alt></p><h3 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h3><p>æ¨¡å¼çš„æ ¸å¿ƒæ˜¯å·¥å‚ç±»ã€‚è¿™ä¸ªç±»å«æœ‰å¿…è¦çš„åˆ¤æ–­é€»è¾‘ï¼Œå¯ä»¥å†³å®šåœ¨ä»€ä¹ˆæ—¶å€™åˆ›å»ºå“ªä¸€ä¸ªäº§å“ç±»çš„å®ä¾‹ã€‚è€Œå®¢æˆ·ç«¯åˆ™å¯ä»¥å…é™¤ç›´æ¥åˆ›å»ºå¯¹è±¡çš„è´£ä»»ï¼ˆæ¯”å¦‚é‚£ä¸ªåº—é•¿ï¼‰ã€‚ç®€å•å·¥å‚æ¨¡å¼é€šè¿‡è¿™ç§åšæ³•å®ç°äº†å¯¹è´£ä»»çš„åˆ†å‰²ã€‚</p><h3 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h3><p>è¿™ä¸ªå·¥å‚ç±»é›†ä¸­äº†æ‰€ä»¥çš„åˆ›å»ºé€»è¾‘ï¼Œå½“æœ‰å¤æ‚çš„å¤šå±‚æ¬¡ç­‰çº§ç»“æ„æ—¶ï¼Œæ‰€æœ‰çš„ä¸šåŠ¡é€»è¾‘éƒ½åœ¨è¿™ä¸ªå·¥å‚ç±»ä¸­å®ç°ã€‚ä»€ä¹ˆæ—¶å€™å®ƒä¸èƒ½å·¥ä½œäº†ï¼Œæ•´ä¸ªç³»ç»Ÿéƒ½ä¼šå—åˆ°å½±å“ã€‚å¹¶ä¸”ç®€å•å·¥å‚æ¨¡å¼è¿èƒŒäº†å¼€é—­åŸåˆ™ï¼ˆå¯¹æ‰©å±•çš„å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹çš„å…³é—­ï¼‰ã€‚</p><h2 id="å·¥å‚æ¨¡å¼æ–¹æ³•-1"><a href="#å·¥å‚æ¨¡å¼æ–¹æ³•-1" class="headerlink" title="å·¥å‚æ¨¡å¼æ–¹æ³•"></a>å·¥å‚æ¨¡å¼æ–¹æ³•</h2><p>é¦–å…ˆï¼Œåœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œæ ¸å¿ƒçš„å·¥å‚ç±»ä¸å†è´Ÿè´£æ‰€æœ‰äº§å“çš„åˆ›å»ºï¼Œè€Œæ˜¯å°†å…·ä½“åˆ›å»ºçš„å·¥ä½œäº¤ç»™å­ç±»å»åš.è¿™ä¸ªæ ¸å¿ƒç±»åˆ™æ‘‡èº«ä¸€å˜ï¼Œæˆä¸ºäº†ä¸€ä¸ªæŠ½è±¡å·¥å‚è§’è‰²ï¼Œä»…è´Ÿè´£ç»™å‡ºå…·ä½“å·¥å‚å­ç±»å¿…é¡»å®ç°çš„æ¥å£ï¼Œè€Œä¸æ¥è§¦å“ªä¸€ä¸ªäº§å“ç±»åº”å½“è¢«å®ä¾‹åŒ–è¿™ç§ç»†èŠ‚ã€‚</p><p>è¿™ç§è¿›ä¸€æ­¥æŠ½è±¡åŒ–çš„ç»“æœï¼Œä½¿è¿™ç§å·¥å‚æ–¹æ³•æ¨¡å¼å¯ä»¥ç”¨æ¥äºˆè®¸ç³»ç»Ÿåœ¨ä¸ä¿®æ”¹å…·ä½“å·¥å‚è§’è‰²çš„æƒ…å†µä¸‹å¼•è¿›æ–°çš„äº§å“ï¼Œä¹Ÿå°±éµå¾ªäº†å¼€é—­åŸåˆ™ã€‚</p><p>ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="/2019/05/30/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/2.webp" alt></p><hr><ol><li><p>æŠ½è±¡å·¥å‚åˆ©ç”¨å¤šæ€çš„ä¼˜åŠ¿å°†å…·ä½“çš„äº§å“çš„å®ä¾‹åŒ–æ”¾åœ¨å…·ä½“å·¥å‚ä¸­å®ç°ã€‚</p></li><li><p>æŠ½è±¡å·¥å‚åˆ›å»ºçš„æ˜¯æŠ½è±¡äº§å“â€”æä¾›çš„æ˜¯æŠ½è±¡æ–¹æ³•(<code>createPizza</code>)ï¼Œä½†æ˜¯å…·ä½“çš„å®ç°æ˜¯æ¨è¿Ÿåˆ°å…·ä½“çš„å·¥å‚ä¸­å®ç°ã€‚</p></li><li><p>å®¢æˆ·ç«¯ä¸­å¯¹ç”¨æˆ·å¯è§çš„å¯¹è±¡è¡¨é¢ä¸Šçœ‹åˆ°çš„æ˜¯ä¸¤ä¸ªæŠ½è±¡å¯¹è±¡ï¼Œä½†æ˜¯å…·ä½“å·¥å‚ä¼šåˆ›å»ºç”¨æˆ·æŒ‡å®šç±»å‹çš„äº§å“ã€‚</p></li></ol><h2 id="æŠ½è±¡å·¥å‚æ¨¡å¼-1"><a href="#æŠ½è±¡å·¥å‚æ¨¡å¼-1" class="headerlink" title="æŠ½è±¡å·¥å‚æ¨¡å¼"></a>æŠ½è±¡å·¥å‚æ¨¡å¼</h2><p><code>æŠ½è±¡å·¥å‚æ¨¡å¼</code>æ˜¯æ‰€æœ‰å½¢æ€çš„å·¥å‚æ¨¡å¼ä¸­æœ€ä¸ºæŠ½è±¡å’Œæœ€å…·ä¸€èˆ¬æ€§çš„ä¸€ç§å½¢æ€ã€‚<code>æŠ½è±¡å·¥å‚æ¨¡å¼</code>å¯ä»¥å‘å®¢æˆ·ç«¯æä¾›ä¸€ä¸ªæ¥å£ï¼Œä½¿å¾—å®¢æˆ·ç«¯åœ¨ä¸å¿…æŒ‡å®šäº§å“çš„å…·ä½“ç±»å‹çš„æƒ…å†µä¸‹ï¼Œåˆ›å»ºå¤šä¸ªäº§å“æ—ä¸­çš„äº§å“å¯¹è±¡ã€‚è¿™å°±æ˜¯æŠ½è±¡å·¥å‚çš„ç”¨æ„ã€‚</p><p>ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="/2019/05/30/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/3.webp" alt></p><h1 id="å€’ç½®åŸåˆ™"><a href="#å€’ç½®åŸåˆ™" class="headerlink" title="å€’ç½®åŸåˆ™"></a>å€’ç½®åŸåˆ™</h1><p>å€’ç½®åŸåˆ™ï¼šè¦ä¾èµ–æŠ½è±¡ï¼Œä¸è¦ä¾èµ–å…·ä½“ç±»ï¼Œè¿™ä¸ªåŸåˆ™è¯´æ˜äº†é«˜å±‚ç»„ä»¶ä¸èƒ½ä¾èµ–åº•å±‚ç»„ä»¶ï¼Œè€Œä¸”ä¸ç®¡é«˜å±‚æˆ–åº•å±‚ç»„ä»¶ï¼Œéƒ½åº”è¯¥ä¾èµ–äºæŠ½è±¡ã€‚</p><p>è®©æˆ‘ä»¬å†å›é¡¾ä¸€ä¸‹ä¸Šé¢çš„ä¾‹å­ï¼ŒPizzaStoreå°±æ˜¯é«˜å±‚ç»„ä»¶ï¼Œè€ŒPizzaå°±æ˜¯åº•å±‚ç»„ä»¶ï¼Œè€Œä¸”å‰è€…ä¾èµ–åè€…ï¼Œå¾ˆæ¸…æ™°ã€‚é‚£ä¹ˆï¼Œè¦ç¬¦åˆè¿™ä¸ªåŸåˆ™ï¼Œæˆ‘ä»¬åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿç°åœ¨æˆ‘ä»¬æ¥å€’ç½®ä½ çš„æ€è€ƒæ–¹å¼ï¼š</p><ol><li>å¼€å§‹æˆ‘ä»¬éœ€è¦ä¸€å®¶æ¯”è¨åº—</li><li>æˆ‘ä»¬å¾—å…ˆä»é¡¶ç«¯å¼€å§‹ï¼Œç„¶åå¾€ä¸‹åˆ°å…·ä½“ç±»ã€‚ä½†æ˜¯ï¼Œæ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ä½ ä¸æƒ³è®©æ¯”è¨åº—å®ä¾‹è¿™äº›å…·ä½“ç±»ï¼Œè¦ä¸ç„¶æ¯”è¨åº—å°†å…¨éƒ½ä¾èµ–è¿™äº›å…·ä½“ç±»ã€‚ç°åœ¨ï¼Œå¼€å§‹â€å€’ç½®â€ï¼Œåˆ«ä»é¡¶ç«¯å¼€å§‹ï¼Œè€Œæ˜¯ä»æ¯”è¨å¼€å§‹ï¼Œç„¶åæƒ³æƒ³çœ‹èƒ½æŠ½è±¡åŒ–äº›ä»€ä¹ˆ</li><li>ä½ å¾—æŠ½è±¡æŠ½è±¡åŒ–ä¸€ä¸ªæ¯”è¨</li><li>ä½ è¿˜å¾—ç”¨ä¸€ä¸ªå·¥å‚æ¥å°†è¿™äº›å…·ä½“ç±»å–å‡ºæ¯”è¨åº—ï¼Œè¿™æ ·ï¼Œå„ç§ä¸åŒçš„å…·ä½“æ¯”è¨ç±»å°±åªèƒ½ä¾èµ–ä¸€ä¸ªæŠ½è±¡ï¼Œè€Œæ¯”è¨åº—ä¹Ÿä¼šä¾èµ–è¿™ä¸ªæŠ½è±¡ï¼Œå€’ç½®å®Œæ¯•</li></ol><p>ä»¥ä¸‹æ–¹æ³•èƒ½å¸®ä½ é¿å…åœ¨OOè®¾è®¡ä¸­è¿åä¾èµ–å€’ç½®åŸåˆ™ï¼š</p><ul><li>å˜é‡ä¸å¯ä»¥æŒæœ‰å…·ä½“ç±»çš„å¼•ç”¨</li><li>ä¸è¦è®©ç±»æ´¾ç”Ÿè‡ªå…·ä½“ç±»</li><li>ä¸è¦è¦†ç›–ç±»ä¸­å·²å®ç°çš„æ–¹æ³•</li></ul><h1 id="è¦ç‚¹"><a href="#è¦ç‚¹" class="headerlink" title="è¦ç‚¹"></a>è¦ç‚¹</h1><ol><li>æ‰€æœ‰çš„å·¥å‚éƒ½æ˜¯ç”¨æ¥å°è£…å¯¹è±¡çš„åˆ›å»º</li><li>ç®€å•å·¥å‚ï¼Œè™½ç„¶ä¸æ˜¯çœŸæ­£çš„è®¾è®¡æ¨¡å¼ï¼Œä½†ä»ä¸å¤±ä¸ºä¸€ä¸ªç®€å•çš„æ–¹æ³•ï¼Œå¯ä»¥å°†å®¢æˆ·ç¨‹åºä»å…·ä½“ç±»è§£è€¦</li><li>å·¥å‚æ–¹æ³•ä½¿ç”¨ç»§æ‰¿ï¼šæŠŠå¯¹è±¡çš„åˆ›å»ºå§”æ‰˜ç»™å­ç±»ï¼Œå­ç±»å®ç°å·¥å‚æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡</li><li>æŠ½è±¡å·¥å‚ä½¿ç”¨å¯¹è±¡ç»„åˆï¼šå¯¹è±¡çš„åˆ›å»ºè¢«å®ç°åœ¨å·¥å‚æ¥å£æ‰€æš´éœ²å‡ºæ¥çš„æ–¹æ³•ä¸­</li><li>æ‰€æœ‰å·¥å‚æ¨¡å¼éƒ½é€šè¿‡å‡å°‘åº”ç”¨ç¨‹åºå’Œå…·ä½“ç±»ä¹‹é—´çš„ä¾èµ–ä¿ƒè¿›æ¾è€¦åˆ</li><li>å·¥å‚æ–¹æ³•å…è®¸ç±»å°†å®ä¾‹åŒ–å»¶è¿Ÿåˆ°å­ç±»è¿›è¡Œ</li><li>æŠ½è±¡å·¥å‚åˆ›å»ºç›¸å…³çš„å¯¹è±¡å®¶æ—ï¼Œè€Œä¸éœ€è¦ä¾èµ–å®ƒä»¬çš„å…·ä½“ç±»</li><li>ä¾èµ–å€’ç½®åŸåˆ™ï¼ŒçŸ¥é“æˆ‘ä»¬é¿å…ä¾èµ–å…·ä½“ç±»å‹ï¼Œè€Œè¦å°½é‡ä¾èµ–æŠ½è±¡</li><li>å·¥å‚æ˜¯å¾ˆæœ‰å¨åŠ›çš„æŠ€å·§ï¼Œå¸®åŠ©æˆ‘ä»¬é’ˆå¯¹æŠ½è±¡ç¼–ç¨‹ï¼Œè€Œä¸è¦é’ˆå¯¹å…·ä½“ç±»ç¼–ç¨‹</li></ol>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
            <tag> å·¥å‚æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè™šæ‹Ÿæœºç¬”è®°-getProperty</title>
      <link href="/2019/05/29/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-getProperty/"/>
      <url>/2019/05/29/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-getProperty/</url>
      
        <content type="html"><![CDATA[<p>System.getProperty<br><span id="more"></span></p><h1 id="System-getProperty"><a href="#System-getProperty" class="headerlink" title="System.getProperty()"></a>System.getProperty()</h1><p>å‚è€ƒï¼š<a href="https://www.jianshu.com/p/9b262628e041"><a href="https://www.jianshu.com/p/9b262628e041">https://www.jianshu.com/p/9b262628e041</a></a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> indi.greenhat.jvm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * è·å–æŒ‡å®šé”®æŒ‡ç¤ºçš„ç³»ç»Ÿå±æ€§</span></span><br><span class="line"><span class="comment">         * é¦–å…ˆï¼Œå¦‚æœå­˜åœ¨å®‰å…¨ç®¡ç†å™¨ï¼Œä¼šè°ƒç”¨å…¶checkPropertiesAccessæ— å‚æ–¹æ³•ï¼Œæœ‰å¯èƒ½æŠ›å‡ºå®‰å…¨å¼‚å¸¸</span></span><br><span class="line"><span class="comment">         * å½“å‰ç³»ç»Ÿå±æ€§é›†ä¼šé€šè¿‡Propertyå¯¹è±¡è¿”å›ï¼ˆå¯¹è±¡æœ‰getProperty()æ–¹æ³•ï¼‰</span></span><br><span class="line"><span class="comment">         * å¦‚æœå½“å‰æ²¡æœ‰ç³»ç»Ÿå±æ€§é›†ï¼Œä¼šåˆ›å»ºå¹¶åˆå§‹åŒ–ç³»ç»Ÿå±æ€§é›†ã€‚</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">//è·å¾—æ ¹ç±»åŠ è½½å™¨ç³»ç»Ÿå±æ€§</span></span><br><span class="line">        System.out.println(System.getProperty(<span class="string">&quot;sun.boot.class.path&quot;</span>));</span><br><span class="line">        <span class="comment">//è·å¾—æ‰©å±•ç±»åŠ è½½å™¨ç³»ç»Ÿå±æ€§</span></span><br><span class="line">        System.out.println(System.getProperty(<span class="string">&quot;java.ext.dirs&quot;</span>));</span><br><span class="line">        <span class="comment">//è·å¾—ç³»ç»Ÿç±»åŠ è½½å™¨ç³»ç»Ÿå±æ€§</span></span><br><span class="line">        System.out.println(System.getProperty(<span class="string">&quot;java.class.path&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/resources.jar:/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/rt.jar:/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/sunrsasign.jar:/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/jsse.jar:/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/jce.jar:/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/charsets.jar:/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/jfr.jar:/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/classes</span><br><span class="line"></span><br><span class="line">/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/ext:/usr/java/packages/lib/ext</span><br><span class="line"></span><br><span class="line">/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/charsets.jar:/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/deploy.jar:/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/ext/cldrdata.jar:/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/ext/dnsns.jar:/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/ext/jaccess.jar:/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/ext/jfxrt.jar:/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/ext/localedata.jar:/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/ext/nashorn.jar:/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/ext/sunec.jar:/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/ext/sunjce_provider.jar:/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/ext/sunpkcs11.jar:/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/ext/zipfs.jar:/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/javaws.jar:/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/jce.jar:/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/jfr.jar:/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/jfxswt.jar:/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/jsse.jar:/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/management-agent.jar:/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/plugin.jar:/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/resources.jar:/usr/lib/jvm/java-<span class="number">8</span>-jdk/jre/lib/rt.jar:/home/cc/IdeaProjects/test/out/production/test:/home/cc/opt/idea-IU-<span class="number">191.7141</span><span class="number">.44</span>/lib/idea_rt.jar</span><br></pre></td></tr></table></figure><p>ä»è¿™é‡Œå¯ä»¥çœ‹åˆ°<code>System.getProperty()</code>ä¸»è¦èƒ½å¤Ÿæ‹¿åˆ°ä¸€äº›å…³äºJavaçš„ç³»ç»Ÿå±æ€§ï¼Œå¦‚ï¼šjavaç‰ˆæœ¬ï¼Œjavaçš„vendorï¼Œæ“ä½œç³»ç»Ÿç‰ˆæœ¬ç­‰ç­‰ã€‚å¦å¤–ï¼Œè¿˜èƒ½å¤Ÿè¿è¡Œjavaå‘½ä»¤æ—¶ï¼Œé€šè¿‡-Då‚æ•°æ¥æŒ‡å®šç³»ç»Ÿå±æ€§</p><h1 id="æ ·ä¾‹1"><a href="#æ ·ä¾‹1" class="headerlink" title="æ ·ä¾‹1"></a>æ ·ä¾‹1</h1><p>ä»ä¸Šé¢å¯ä»¥åˆ°æ ¹ç±»åŠ è½½å™¨çš„ä¸€ä¸ªåŠ è½½ç›®å½•æœ‰<code>/usr/lib/jvm/java-8-jdk/jre/classes</code>ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥æŠŠä¸€ä¸ª<code>.class</code>æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼Œå°è¯•å»è®©æ ¹ç±»åŠ è½½å™¨å»åŠ è½½å®ƒã€‚</p><p>æˆ‘ä»¬ç”¨è‡ªå®šä¹‰ç±»åŠ è½½å™¨å»åŠ è½½<code>indi.greenhat.jvm.Sample1</code>ï¼ŒæŠŠå…¶<code>.class</code>æ–‡ä»¶å¤åˆ¶åˆ°åˆšåˆšé‚£ä¸ªç›®å½•</p><p><img src="/2019/05/29/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-getProperty/1.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> indi.greenhat.jvm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        CustomClassLoader loader1 = <span class="keyword">new</span> CustomClassLoader(<span class="string">&quot;loder1&quot;</span>);</span><br><span class="line">        loader1.setPath(<span class="string">&quot;/home/cc/Test&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Class&lt;?&gt; clazz = loader1.loadClass(<span class="string">&quot;indi.greenhat.jvm.Sample1&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(clazz.getClassLoader());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">null</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œæœ€ç»ˆè¯¥ç±»æ˜¯ç”±æ ¹ç±»åŠ è½½å™¨åŠ è½½ï¼Œè¿™æ­£å¥½ä¹Ÿå¯¹åº”äº†åŒäº²å§”æ´¾æœºåˆ¶ã€‚</p><h1 id="æ ·ä¾‹2"><a href="#æ ·ä¾‹2" class="headerlink" title="æ ·ä¾‹2"></a>æ ·ä¾‹2</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> indi.greenhat.jvm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.sun.crypto.provider.AESKeyGenerator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        AESKeyGenerator aesKeyGenerator = <span class="keyword">new</span> AESKeyGenerator();</span><br><span class="line">        System.out.println(aesKeyGenerator.getClass().getClassLoader());</span><br><span class="line">        System.out.println(Test.class.getClassLoader());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sun.misc.Launcher$ExtClassLoader@12a3a380</span><br><span class="line">sun.misc.Launcher$AppClassLoader@18b4aac2</span><br></pre></td></tr></table></figure><p><code>AESKeyGenerator</code>è¯¥ç±»å®šä¹‰åœ¨æ‰©å±•ç±»åŠ è½½å™¨æ‰€å¯¹åº”çš„ç›®å½•ä¸‹ï¼Œæ‰€æœ‰æœ‰æ‰©å±•ç±»åŠ è½½å™¨åŠ è½½çš„ï¼Œè€Œ<code>Test</code>ç±»åˆ™æ˜¯ç”±ç³»ç»Ÿç±»åŠ è½½å™¨åŠ è½½çš„ã€‚</p><p>ä¸Šé¢è¯´è¿‡ï¼Œå¯ä»¥é€šè¿‡-Då‚æ•°æ¥æŒ‡å®šç³»ç»Ÿå±æ€§ã€‚</p><p><img src="/2019/05/29/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-getProperty/3.png" alt></p><p>æˆ‘ä»¬é€šè¿‡-Dæ”¹å˜æ‰©å±•ç±»çš„åŠ è½½å™¨å¯»æ‰¾çš„ç›®å½•ï¼Œç„¶åå°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p><p>æ­£å¥½è¯´æ˜äº†<code>AESKeyGenerator</code>ç±»æ˜¯ç”±æ‰©å±•ç±»åŠ è½½å™¨åŠ è½½çš„ã€‚</p><h1 id="java-ext-dirs"><a href="#java-ext-dirs" class="headerlink" title="java.ext.dirs"></a>java.ext.dirs</h1><p>å¦‚æœå°†<code>java.ext.dirs</code>ç›®å½•æŒ‡å®šåˆ°å«æœ‰æŸä¸ªç±»çš„.classçš„æ–‡ä»¶å¤¹ä¸­ï¼Œå°è¯•ç”¨æ‰©å±•ç±»åŠ è½½å™¨åŠ è½½ï¼Œè¿™æ ·æ˜¯ä¸è¡Œçš„ã€‚</p><p>å› ä¸ºæ‰©å±•ç±»åŠ è½½å™¨æŸ¥æ‰¾çš„<code>.jar</code>æ–‡ä»¶ã€‚</p><p>æ‰€ä»¥å¯ä»¥è¿ç”¨<code>jar</code>å‘½ä»¤å°†<code>.class</code>æ–‡ä»¶æ‰“åŒ…æˆjaråŒ…ï¼Œä¾‹å¦‚</p><p><code>jar cvf test.jar test.class</code></p><h1 id="sun-boot-class-path"><a href="#sun-boot-class-path" class="headerlink" title="sun.boot.class.path"></a>sun.boot.class.path</h1><p>å¦‚æœæˆ‘ä»¬ä¿®æ”¹<code>sun.boot.class.path</code>å¯¹åº”çš„è·¯å¾„åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p><p>å› ä¸º<code>Object</code>ç±»æ˜¯æ¯ä¸ªç±»çš„çˆ¶ç±»ï¼Œå¦‚æœçˆ¶ç±»éƒ½æ²¡æœ‰äº†ï¼Œé‚£ä¹ˆä¸ç”¨è¯´åˆ«çš„äº†ã€‚</p><p><img src="/2019/05/29/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-getProperty/4.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jvm </tag>
            
            <tag> æºç  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySql8-archä¸‹äºŒè¿›åˆ¶å®‰è£…</title>
      <link href="/2019/05/18/MySql8-arch%E4%B8%8B%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85/"/>
      <url>/2019/05/18/MySql8-arch%E4%B8%8B%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<p>äºŒè¿›åˆ¶å®‰è£…å¯æ§ï¼Œæ–¹ä¾¿</p><span id="more"></span><p><img src="/2019/05/18/MySql8-arch%E4%B8%8B%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85/1.png" alt></p><p>å‚è€ƒï¼š</p><p><a href="https://linuxops.org/blog/mysql/mysql8.html"><a href="https://linuxops.org/blog/mysql/mysql8.html">https://linuxops.org/blog/mysql/mysql8.html</a></a></p><p><a href="https://www.kancloud.cn/lengyueguang/linux/660448">https://www.kancloud.cn/lengyueguang/linux/660448</a></p><p>å®˜æ–¹æ–‡æ¡£ï¼š</p><p><a href="https://dev.mysql.com/doc/refman/8.0/en/binary-installation.html"><a href="https://dev.mysql.com/doc/refman/8.0/en/binary-installation.html">https://dev.mysql.com/doc/refman/8.0/en/binary-installation.html</a></a></p><h1 id="ä¸‹è½½äºŒè¿›åˆ¶åŒ…"><a href="#ä¸‹è½½äºŒè¿›åˆ¶åŒ…" class="headerlink" title="ä¸‹è½½äºŒè¿›åˆ¶åŒ…"></a>ä¸‹è½½äºŒè¿›åˆ¶åŒ…</h1><p>é€‰æ‹©ä¸€ä¸ªé•œåƒç«™ä¸‹è½½ï¼ŒæŸ¥æ‰¾èµ·æ¥æ¯”è¾ƒæ–¹ä¾¿ï¼Œå› ä¸ºå®˜ç½‘æ²¡æœ‰æä¾›å›½å†…çš„æºï¼Œæ‰€ä»¥æŒ‘äº†ä¸€ä¸ªæ¯”è¾ƒå¿«çš„ã€‚</p><p><a href="http://mysql.inspire.net.nz/Downloads">http://mysql.inspire.net.nz/Downloads</a></p><p>ç„¶åä¸‹è½½<code>mysql-xxxx-linux-glibcxx-xx.xx</code>å°±è¡Œäº†</p><p>æ¯”å¦‚<a href="http://mysql.inspire.net.nz/Downloads/MySQL-8.0/mysql-8.0.15-linux-glibc2.12-i686.tar.xz">http://mysql.inspire.net.nz/Downloads/MySQL-8.0/mysql-8.0.15-linux-glibc2.12-i686.tar.xz</a></p><h1 id="è§£å‹"><a href="#è§£å‹" class="headerlink" title="è§£å‹"></a>è§£å‹</h1><p>è§£å‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf mysql-8.0.15-linux-glibc2.12-x86_64.tar.xz </span><br></pre></td></tr></table></figure><p>ç§»åŠ¨åˆ°<code>~/opt</code>ï¼ˆå¯é€‰ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv  mysql-8.0.15-linux-glibc2.12-x86_64 ~/opt/mysql</span><br></pre></td></tr></table></figure><h1 id="é…ç½®ç”¨æˆ·å’Œç»„ï¼ˆå¯é€‰ï¼Œè¿™é‡Œç”¨é»˜è®¤ä¸ªäººè´¦å·ï¼‰"><a href="#é…ç½®ç”¨æˆ·å’Œç»„ï¼ˆå¯é€‰ï¼Œè¿™é‡Œç”¨é»˜è®¤ä¸ªäººè´¦å·ï¼‰" class="headerlink" title="é…ç½®ç”¨æˆ·å’Œç»„ï¼ˆå¯é€‰ï¼Œè¿™é‡Œç”¨é»˜è®¤ä¸ªäººè´¦å·ï¼‰"></a>é…ç½®ç”¨æˆ·å’Œç»„ï¼ˆå¯é€‰ï¼Œè¿™é‡Œç”¨é»˜è®¤ä¸ªäººè´¦å·ï¼‰</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">groupadd mysql  </span><br><span class="line">useradd -r -g mysql -s /bin/false mysql</span><br></pre></td></tr></table></figure><h1 id="ä¸»é…ç½®æ–‡ä»¶"><a href="#ä¸»é…ç½®æ–‡ä»¶" class="headerlink" title="ä¸»é…ç½®æ–‡ä»¶"></a>ä¸»é…ç½®æ–‡ä»¶</h1><p>logé…ç½®ï¼š<a href="https://segmentfault.com/a/1190000003072237"><a href="https://segmentfault.com/a/1190000003072237">https://segmentfault.com/a/1190000003072237</a></a></p><p>åˆ›å»ºæ•°æ®å­˜æ”¾æ–‡ä»¶å¤¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p ~/opt/mysqlData/data</span><br><span class="line">mkdir -p ~/opt/mysqlData/log</span><br><span class="line">chmod 750 ~/opt/mysqlData/data ~/opt/mysqlData/log</span><br></pre></td></tr></table></figure><p>åˆ›å»ºå¹¶ç¼–è¾‘é…ç½®æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">mkdir -p /home/cc/opt/mysql/etc</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> vim /home/cc/opt/mysql/etc/my.cnf</span></span><br><span class="line">[mysql]</span><br><span class="line"><span class="meta">#</span><span class="bash"> è®¾ç½®mysqlå®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†</span></span><br><span class="line">default-character-set=utf8mb4</span><br><span class="line">[mysqld]</span><br><span class="line">port=3306</span><br><span class="line"><span class="meta">#</span><span class="bash"> è®¾ç½®mysqlçš„å®‰è£…ç›®å½•</span></span><br><span class="line">basedir=/home/cc/opt/mysql</span><br><span class="line"><span class="meta">#</span><span class="bash"> è®¾ç½®mysqlæ•°æ®åº“çš„æ•°æ®çš„å­˜æ”¾ç›®å½•</span></span><br><span class="line">datadir=/home/cc/opt/mysqlData/data</span><br><span class="line">character-set-server=utf8mb4</span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºæ–°è¡¨æ—¶å°†ä½¿ç”¨çš„é»˜è®¤å­˜å‚¨å¼•æ“</span></span><br><span class="line">default-storage-engine=INNODB</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="built_in">log</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">è®°å½•å¯åŠ¨ã€è¿è¡Œæˆ–åœæ­¢mysqldæ—¶å‡ºç°çš„é—®é¢˜</span></span><br><span class="line">log-error=/home/cc/opt/mysqlData/log/error.log</span><br><span class="line"><span class="meta">#</span><span class="bash">æ˜¯æŒ‡æ‰§è¡Œè¶…è¿‡å¤šä¹…çš„sqlä¼šè¢«<span class="built_in">log</span>ä¸‹æ¥ï¼Œè¿™é‡Œæ˜¯2ç§’</span></span><br><span class="line">long_query_time=2</span><br><span class="line"><span class="meta">#</span><span class="bash">è®°å½•æ‰€æœ‰æ‰§è¡Œæ—¶é—´è¶…è¿‡long_query_timeç§’çš„æ‰€æœ‰æŸ¥è¯¢æˆ–ä¸ä½¿ç”¨ç´¢å¼•çš„æŸ¥è¯¢</span></span><br><span class="line">log-slow-queries=/home/cc/opt/mysqlData/log/slowquery.log</span><br><span class="line"><span class="meta">#</span><span class="bash">è®°å½•æ‰€æœ‰æ›´æ”¹æ•°æ®çš„è¯­å¥ï¼Œè¿˜ç”¨äºå¤åˆ¶</span></span><br><span class="line">log_bin=/home/cc/opt/mysqlData/log/log_bin.log</span><br></pre></td></tr></table></figure><p>MySQLé…ç½®æ–‡ä»¶æ¡ç›®å¾ˆå¤šï¼Œè¿™è¾¹æˆ‘ä»¬è®¾ç½®äº†å¸¸ç”¨çš„å¿…é¡»çš„ä¸€äº›é…ç½®é¡¹ï¼Œå¦‚ä¸Šï¼Œæˆ‘ä»¬è®¾ç½®äº†<code>mysql</code>çš„ç›‘å¬ç«¯å£ã€socketã€å®‰è£…ç›®å½•ã€æ•°æ®åº“æ–‡ä»¶å­˜æ”¾ç›®å½•ç­‰ç­‰é…ç½®ã€‚</p><p>MySQLçš„é…ç½®ä¹Ÿæ˜¯åˆ†æ®µé…ç½®çš„ï¼Œæ¯ä¸€ä¸ªæ®µéƒ½æœ‰ä¸€ä¸ªåç§°ï¼Œä¾‹å¦‚ä¸Šé¢çš„é…ç½®<code>[mysql]</code> é…ç½®äº†mysqlå·¥å…·çš„é»˜è®¤è®¾ç½®ï¼Œ<code>[mysqld]</code>åˆ™ä¸ºMySQLæœåŠ¡å™¨çš„é…ç½®</p><p>MySQLé…ç½®é¡¹ä¼—å¤šï¼Œå¯¹äºæ¯ä¸€ä¸ªé…ç½®é¡¹å®˜æ–¹éƒ½æä¾›äº†ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå¦‚æœä½ ä¸ç¡®å®šä½¿ç”¨å®ƒï¼Œå¯ä»¥ä¸åœ¨é…ç½®æ–‡ä»¶ä¸­ä½“ç°ï¼Œè¿™æ ·MySQLä¼šè¯»å–é»˜è®¤é…ç½®ã€‚</p><p>å½“ç„¶ï¼Œå¦‚æœä½ æ— æ³•ç¡®å®šMySQLæä¾›äº†é‚£äº›é…ç½®ï¼Œæˆ–è€…ä¸ç¡®å®šé…ç½®é¡¹çš„åç§°ï¼Œä½ å¯ä»¥é€šè¿‡<code>mysqld --verbose --help</code> å‘½ä»¤æŸ¥çœ‹ï¼Œé…åˆ<code>grep</code>ä½ ä¼šå¿«é€Ÿæ‰¾åˆ°ä½ æƒ³è¦çš„å†…å®¹ã€‚</p><hr><p>åœ¨MySQL8.0ä¸­ï¼Œé»˜è®¤çš„å¯†ç è®¤è¯æ’ä»¶æ›´æ¢ä¸º<code>caching_sha2_password</code>ï¼Œä¸€äº›è€çš„å®¢æˆ·ç«¯å’Œç¨‹åºå¹¶ä¸æ”¯æŒè¿™ç§è®¤è¯æ’ä»¶ï¼Œæ‰€ä»¥ä¸ºäº†å…¼å®¹æ€§ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å°†è®¤è¯æ’ä»¶ä¿®æ”¹ä¸º<code>mysql_native_password</code></p><p>åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®š<code>default-authentication-plugin = mysql_native_password</code>ï¼Œä»¥ååˆ›å»ºçš„ç”¨æˆ·éƒ½å°†ä½¿ç”¨<code>mysql_native_password</code>æ¥éªŒè¯ï¼Œä½†æ˜¯ä¹‹å‰çš„è´¦æˆ·å¹¶ä¸ä¼šæ›´æ”¹éªŒè¯æ’ä»¶ã€‚</p><hr><h1 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yay -S libtinfo5</span><br><span class="line">sudo pacman -S numactl</span><br></pre></td></tr></table></figure><h1 id="åˆå§‹åŒ–æ•°æ®åº“"><a href="#åˆå§‹åŒ–æ•°æ®åº“" class="headerlink" title="åˆå§‹åŒ–æ•°æ®åº“"></a>åˆå§‹åŒ–æ•°æ®åº“</h1><p>è£…å¥½äº†MySQLï¼Œä¹Ÿå†™å¥½äº†é…ç½®æ–‡ä»¶ï¼Œè¿™ä¸ªæ—¶å€™ä½ å¹¶ä¸èƒ½ç›´æ¥é€šè¿‡<code>mysqld</code>æ¥å¯åŠ¨MySQLã€‚</p><p>å› ä¸ºè¿˜ç¼ºå°‘ç³»ç»Ÿå¿…é¡»çš„è¡¨ï¼Œæ‰€ä»¥è¦é€šè¿‡å‘½ä»¤å…ˆåˆå§‹åŒ–MySQLï¼Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --initialize-insecure  --basedir=/home/cc/opt/mysql --datadir=/home/cc/opt/mysqlData/data</span><br></pre></td></tr></table></figure><p>åˆå§‹åŒ–å‘½ä»¤ä¸­<code>--initialize-insecure</code>å‘Šè¯‰mysqlä¸éœ€è¦å¸®æˆ‘ç”Ÿæˆrootå¯†ç ï¼Œè¿™ä¸ªæ—¶å€™mysqlçš„rootç”¨æˆ·æ˜¯æ²¡æœ‰å¯†ç çš„ï¼Œä½ éœ€è¦å°½å¿«ä¿®æ”¹å®ƒã€‚</p><p>å¦‚æœæ²¡æœ‰æŒ‡å®šè¿™ä¸ªå‚æ•°ï¼ŒMySQLä¼šç”Ÿæˆä¸€ä¸ªéšæœºçš„å¯†ç ï¼Œå¹¶ä¸”ä¼šå‘Šè¯‰ä½ å¯†ç å­˜æ”¾åœ¨å“ªä¸ªæ–‡ä»¶ä¸­ã€‚</p><h1 id="é…ç½®å¯åŠ¨mysqldæœåŠ¡"><a href="#é…ç½®å¯åŠ¨mysqldæœåŠ¡" class="headerlink" title="é…ç½®å¯åŠ¨mysqldæœåŠ¡"></a>é…ç½®å¯åŠ¨mysqldæœåŠ¡</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">sudo vim /usr/lib/systemd/system/mysqld.service</span></span><br><span class="line">[Unit]</span><br><span class="line">Description=MySQL Server</span><br><span class="line">After=network.target</span><br><span class="line">After=syslog.target</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">User=cc</span><br><span class="line">Group=cc</span><br><span class="line">Type=notify</span><br><span class="line">TimeoutSec=0</span><br><span class="line">PermissionsStartOnly=true</span><br><span class="line">ExecStart=/home/cc/mysql/bin/mysqld --basedir=/home/cc/opt/mysql --datadir=/home/cc/opt/mysqlData/data</span><br><span class="line">LimitNOFILE = 10000</span><br><span class="line">Restart=always</span><br><span class="line">RestartPreventExitStatus=1</span><br><span class="line">Environment=MYSQLD_PARENT_PID=1</span><br><span class="line">PrivateTmp=false</span><br></pre></td></tr></table></figure><p>æ¥ç€</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl enable mysqld.service</span><br><span class="line">sudo systemctl start mysqld.service</span><br></pre></td></tr></table></figure><h1 id="ä¿®æ”¹å¯†ç "><a href="#ä¿®æ”¹å¯†ç " class="headerlink" title="ä¿®æ”¹å¯†ç "></a>ä¿®æ”¹å¯†ç </h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;æ–°å¯†ç &#x27;</span><br></pre></td></tr></table></figure><p><img src="/2019/05/18/MySql8-arch%E4%B8%8B%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85/2.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Arch </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè™šæ‹Ÿæœºç¬”è®°-ç±»åŠ è½½å™¨çš„å‘½åç©ºé—´</title>
      <link href="/2019/05/17/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E7%9A%84%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4/"/>
      <url>/2019/05/17/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E7%9A%84%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4/</url>
      
        <content type="html"><![CDATA[<p>ç±»åŠ è½½å™¨çš„å‘½åç©ºé—´</p><span id="more"></span><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/sureyonder/article/details/5564181">https://blog.csdn.net/sureyonder/article/details/5564181</a></p><p><a href="http://www.importnew.com/17093.html">http://www.importnew.com/17093.html</a></p><h1 id="å‘½åç©ºé—´"><a href="#å‘½åç©ºé—´" class="headerlink" title="å‘½åç©ºé—´"></a>å‘½åç©ºé—´</h1><p>ç±»åŠ è½½ä½“ç³»ä¸ºä¸åŒç±»åŠ è½½å™¨åŠ è½½çš„ç±»æä¾›ä¸åŒçš„å‘½åç©ºé—´ï¼Œ<strong>åŒä¸€å‘½åç©ºé—´å†…çš„ç±»å¯ä»¥äº’ç›¸è®¿é—®ï¼Œä¸åŒå‘½åç©ºé—´çš„ç±»ä¸çŸ¥é“å½¼æ­¤çš„å­˜åœ¨(é™¤éæ˜¾å¼æä¾›è®¿é—®æœºåˆ¶)</strong>ã€‚åŒä¸€ç±»å¯ä»¥å†ä¸åŒçš„å‘½åç©ºé—´å†…ï¼Œä½†æ— æ³•åœ¨åŒä¸€å‘½åç©ºé—´å†…é‡å¤å‡ºç°ã€‚</p><hr><p>å‘½åç©ºé—´æ˜¯è¿™æ ·å®šä¹‰çš„ï¼š<strong>å®é™…å®ŒæˆåŠ è½½ç±»çš„å·¥ä½œ</strong>çš„åŠ è½½å™¨ä¸ºå®šä¹‰ç±»åŠ è½½å™¨ï¼Œè€Œ<strong>åŠ è½½çš„åŒäº²å§”æ‰˜è·¯å¾„ä¸Šçš„æ‰€æœ‰åŠ è½½å™¨</strong>ä¸ºåˆå§‹ç±»åŠ è½½å™¨ï¼ŒæŸä¸ªåŠ è½½å™¨çš„å‘½åç©ºé—´å°±æ˜¯æ‰€æœ‰ä»¥è¯¥åŠ è½½å™¨ä¸ºåˆå§‹ç±»åŠ è½½å™¨çš„ç±»æ‰€ç»„æˆã€‚</p><hr><p>å¯ä»¥é¢„è§ï¼Œ<strong>å­åŠ è½½å™¨çš„å‘½åç©ºé—´åŒ…æ‹¬å…¶çˆ¶/ç¥–å…ˆåŠ è½½å™¨çš„å‘½åç©ºé—´å’Œåªæœ‰è‡ªå·±æ‰å¯ä»¥åŠ è½½çš„ç±»æ‰€ç»„æˆ</strong>ã€‚æ ¹æ®åŠ è½½ä½“ç³»ç»“æ„çš„å®‰å…¨æœºåˆ¶ï¼ŒåŒä¸€å‘½åç©ºé—´å†…çš„ç±»å¯ ä»¥äº’ç›¸è®¿é—®ï¼Œæ‰€ä»¥<strong>çˆ¶åŠ è½½å™¨æ‰€åŠ è½½çš„ç±»ä¸ä¸€å®šå¯ä»¥è®¿é—®å­åŠ è½½å™¨æ‰€åŠ è½½çš„ç±»ï¼Œä½†å­åŠ è½½å™¨æ‰€åŠ è½½çš„ç±»å¿…ç„¶å¯ä»¥è®¿é—®çˆ¶åŠ è½½å™¨åŠ è½½çš„ç±»</strong>ã€‚çˆ¶åŠ è½½å™¨åŠ è½½çš„ç±»å°±å¥½åƒå°ç®± å­ï¼Œå­åŠ è½½å™¨åŠ è½½çš„ç±»å¯èƒ½ç”¨åˆ°çˆ¶åŠ è½½å™¨åŠ è½½çš„ç±»ï¼Œå°±åƒä¸€ä¸ªå¤§ç®±å­ï¼Œåªèƒ½æŠŠå°ç®±å­æ”¾è¿›å¤§ç®±å­ï¼Œè€Œä¸èƒ½åè¿‡æ¥åš(å½“ç„¶æ˜¾å¼çš„è®¿é—®æœºåˆ¶é™¤å¤–)</p><h1 id="å‘½åç©ºé—´çš„ç±»å‹å…±äº«"><a href="#å‘½åç©ºé—´çš„ç±»å‹å…±äº«" class="headerlink" title="å‘½åç©ºé—´çš„ç±»å‹å…±äº«"></a>å‘½åç©ºé—´çš„ç±»å‹å…±äº«</h1><p>å‰é¢æåˆ°è¿‡åªæœ‰åŒä¸€ä¸ªå‘½åç©ºé—´å†…çš„ç±»æ‰å¯ä»¥ç›´æ¥è¿›è¡Œäº¤äº’ï¼Œä½†æ˜¯æˆ‘ä»¬ç»å¸¸åœ¨ç”±ç”¨æˆ·è‡ªå®šä¹‰ç±»è£…è½½å™¨å®šä¹‰çš„ç±»å‹ä¸­ç›´æ¥ä½¿ç”¨JAVA APIç±»ï¼Œè¿™ä¸æ˜¯çŸ›ç›¾äº†å—ï¼Ÿè¿™æ˜¯ç±»å‹å…±äº« åŸå› ï¼<strong>å¦‚æœæŸä¸ªç±»è£…è½½å™¨æŠŠç±»å‹è£…è½½çš„ä»»åŠ¡å§”æ´¾ç»™å¦å¤–ä¸€ä¸ªç±»è£…è½½å™¨ï¼Œè€Œåè€…å®šä¹‰äº†è¿™ä¸ªç±»å‹ï¼Œé‚£ä¹ˆè¢«å§”æ´¾çš„ç±»è£…è½½å™¨è£…è½½çš„è¿™ä¸ªç±»å‹ï¼Œåœ¨æ‰€æœ‰è¢«æ ‡è®°ä¸ºè¯¥ç±»å‹çš„åˆå§‹ç±»è£…è½½å™¨çš„å‘½åç©ºé—´ä¸­å…±äº«</strong>ã€‚</p><h1 id="è¿è¡Œæ—¶åŒ…"><a href="#è¿è¡Œæ—¶åŒ…" class="headerlink" title="è¿è¡Œæ—¶åŒ…"></a>è¿è¡Œæ—¶åŒ…</h1><p>æ¯ä¸ªç±»è£…è½½å™¨éƒ½æœ‰è‡ªå·±çš„å‘½åç©ºé—´ï¼Œ<strong>å…¶ä¸­ç»´æŠ¤ç€ç”±å®ƒè£…è½½çš„ç±»å‹</strong>ã€‚<strong>æ‰€ä»¥ä¸€ä¸ªJAVAç¨‹åºå¯ä»¥å¤šæ¬¡è£…è½½å…·æœ‰åŒä¸€ä¸ªå…¨é™å®šåçš„å¤šä¸ªç±»å‹</strong>ã€‚è¿™æ ·ä¸€ä¸ªç±»å‹çš„å…¨é™å®šåå°±ä¸è¶³ä»¥ç¡®å®šåœ¨ä¸€ä¸ªJAVAè™šæ‹Ÿæœºä¸­çš„å”¯ä¸€æ€§ã€‚å› æ­¤ï¼Œå½“å¤šä¸ªç±»è£…è½½å™¨éƒ½è£…è½½äº†åŒåçš„ç±»å‹æ—¶ï¼Œä¸ºäº†å”¯ä¸€è¡¨ç¤ºè¯¥ç±»å‹ï¼Œ<strong>è¿˜è¦åœ¨ç±»å‹åç§°å‰åŠ ä¸Šè£…è½½è¯¥ç±»å‹çš„ç±»è£…è½½å™¨æ¥è¡¨ç¤ºï¼<code>[classloader class]</code></strong></p><p>åœ¨å…è®¸ä¸¤ä¸ªç±»å‹ä¹‹é—´å¯¹åŒ…å†…å¯è§çš„æˆå‘˜è¿›è¡Œè®¿é—®å‰ï¼Œ<strong>è™šæ‹Ÿæœºä¸ä½†è¦ç¡®å®šè¿™ä¸ªä¸¤ä¸ªç±»å‹å±äºåŒä¸€ä¸ªåŒ…ï¼Œè¿˜å¿…é¡»ç¡®è®¤å®ƒä»¬å±äºåŒä¸€ä¸ªè¿è¡Œæ—¶åŒ…ï¼å®ƒä»¬å¿…é¡»æœ‰åŒä¸€ä¸ªç±»è£…è½½å™¨è£…è½½çš„</strong>ã€‚è¿™æ ·ï¼Œ<code>java.lang.Virus</code>å’Œæ¥è‡ªæ ¸å¿ƒçš„<code>java.lang</code>çš„ç±»ä¸å±äºåŒä¸€ä¸ªè¿è¡Œæ—¶åŒ…ï¼Œ<code>java.lang.Virus</code>å°±ä¸èƒ½è®¿é—®<code>JAVA API</code>çš„<code>java.lang</code>åŒ…ä¸­çš„åŒ…å†…å¯è§çš„æˆå‘˜ã€‚</p><h1 id="ä¸åŒå‘½åç©ºé—´ä¸èƒ½è®¿é—®"><a href="#ä¸åŒå‘½åç©ºé—´ä¸èƒ½è®¿é—®" class="headerlink" title="ä¸åŒå‘½åç©ºé—´ä¸èƒ½è®¿é—®"></a>ä¸åŒå‘½åç©ºé—´ä¸èƒ½è®¿é—®</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Sample1.java</span></span><br><span class="line"><span class="keyword">package</span> indi.greenhat.jvm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Sample1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Sample1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Sample1 is loaderd by: &quot;</span> + <span class="keyword">this</span>.getClass().getClassLoader());</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">new</span> Sample2();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Sample2.java</span></span><br><span class="line"><span class="keyword">package</span> indi.greenhat.jvm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Sample2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Sample2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Sample2 is loaderd by: &quot;</span> + <span class="keyword">this</span>.getClass().getClassLoader());</span><br><span class="line">        System.out.println(<span class="string">&quot;Sample2 output Sample1.class:&quot;</span>);</span><br><span class="line">        System.out.println(Sample1.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Test.java</span></span><br><span class="line"><span class="keyword">package</span> indi.greenhat.jvm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        CustomClassLoader loader = <span class="keyword">new</span> CustomClassLoader(<span class="string">&quot;loader&quot;</span>);</span><br><span class="line">        loader.setPath(<span class="string">&quot;/home/cc/test/&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Class&lt;?&gt; clazz = loader.loadClass(<span class="string">&quot;indi.greenhat.jvm.Sample1&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Object object = clazz.newInstance();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>ç›®å½•ç»“æ„ï¼š</p><p><strong>å·²ç»æŠŠSample1.classåˆ é™¤</strong></p><p><img src="/2019/05/17/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E7%9A%84%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4/2.png" alt></p><p>åŒæ—¶<code>/home/cc/test</code>ç›®å½•ä¸‹è¿™ä¸ªå‡ ä¸ªç±»çš„classæ–‡ä»¶</p><p><img src="/2019/05/17/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E7%9A%84%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4/3.png" alt></p><p>è¾“å‡ºï¼š</p><p><img src="/2019/05/17/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E7%9A%84%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4/1.png" alt></p><hr><p><code>Sample2åœ¨Sample1é‡Œé¢</code>ï¼Œæ‰€ä»¥<code>Sample2</code>æ˜¯ç”±<code>Sample1</code>çš„åŠ è½½å™¨åŠ è½½çš„ï¼Œå› ä¸ºåœ¨é¡¹ç›®ç›®å½•ä¸‹é¢æ²¡æœ‰<code>Sample1.class</code>ï¼Œæ‰€ä»¥åªèƒ½ç”±è‡ªå®šä¹‰ç±»åŠ è½½å™¨åŠ è½½ï¼Œå¦‚ä¸Šå›¾è¾“å‡ºã€‚</p><p>è™½ç„¶<code>Sample1</code>æ˜¯ç”±è‡ªå®šä¹‰ç±»åŠ è½½å™¨åŠ è½½çš„ï¼Œä½†æ˜¯æ ¹æ®åŒäº²å§”æ´¾æœºåˆ¶ï¼ŒåŠ è½½<code>Sample2</code>æ—¶å…ˆå§”æ´¾ç»™çˆ¶åŠ è½½å™¨ï¼Œåˆå› ä¸ºé¡¹ç›®ç›®å½•ä¸‹æœ‰<code>Sample2.class</code>ï¼Œæ‰€ä»¥çˆ¶åŠ è½½å™¨åŠ è½½æˆåŠŸï¼Œæ‰€ä»¥<code>Sample2</code>æ˜¯ç”±ç³»ç»Ÿç±»åŠ è½½å™¨åŠ è½½çš„ã€‚</p><hr><p>å› ä¸ºè¿™ä¸¤ä¸ªè®°è½½å™¨æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥ä¸èƒ½äº’ç›¸è®¿é—®ï¼Œæ•…<code>Sample2</code>å°è¯•è¾“å‡º<code>Sample1.class</code>æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸</p><hr><p>è‡ªå®šä¹‰ç±»åŠ è½½å™¨ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//CustomClassLoader.java</span></span><br><span class="line"><span class="keyword">package</span> indi.greenhat.jvm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç”¨æˆ·è‡ªå®šä¹‰ç±»åŠ è½½å™¨å¿…é¡»ç»§æ‰¿ClassLoaderç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomClassLoader</span> <span class="keyword">extends</span> <span class="title">ClassLoader</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String classLoaderName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç±»çš„æ‰©å±•å</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String fileExtension = <span class="string">&quot;.class&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>  String path;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPath</span><span class="params">(String path)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.path = path;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomClassLoader</span><span class="params">(String classLoaderName)</span></span>&#123;</span><br><span class="line">        <span class="comment">//ä½¿ç”¨æ–¹æ³•getSystemClassLoaderï¼ˆï¼‰è¿”å›çš„ClassLoaderä½œä¸ºçˆ¶ç±»åŠ è½½å™¨åˆ›å»ºæ–°çš„ç±»åŠ è½½å™¨</span></span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.classLoaderName = classLoaderName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomClassLoader</span><span class="params">(String classLoaderName, ClassLoader parent)</span></span>&#123;</span><br><span class="line">        <span class="comment">//ä½¿ç”¨æŒ‡å®šçš„çˆ¶ç±»åŠ è½½å™¨åˆ›å»ºæ–°çš„ç±»åŠ è½½å™¨ä»¥è¿›è¡Œå§”æ´¾</span></span><br><span class="line">        <span class="keyword">super</span>(parent);</span><br><span class="line">        <span class="keyword">this</span>.classLoaderName = classLoaderName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt; findClass(String className) <span class="keyword">throws</span> ClassNotFoundException&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;findClass invoked: &quot;</span> + className);</span><br><span class="line">        System.out.println(<span class="string">&quot;class loader name: &quot;</span> + <span class="keyword">this</span>.classLoaderName);</span><br><span class="line">        <span class="keyword">byte</span>[] data = <span class="keyword">this</span>.loadClassDate(className);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.defineClass(className, data, <span class="number">0</span>, data.length);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">byte</span>[] loadClassDate(String name)&#123;</span><br><span class="line">        InputStream is = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">byte</span>[] data = <span class="keyword">null</span>;</span><br><span class="line">        ByteArrayOutputStream baos = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//è½¬æ¢ä¸ºç£ç›˜å¯¹åº”çš„åœ°å€</span></span><br><span class="line">            name = name.replace(<span class="string">&quot;.&quot;</span>, <span class="string">&quot;/&quot;</span>);</span><br><span class="line">            is = <span class="keyword">new</span> FileInputStream(<span class="keyword">new</span> File(<span class="keyword">this</span>.path+ name + <span class="keyword">this</span>.fileExtension));</span><br><span class="line">            baos = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> ch = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>((ch = is.read()) != -<span class="number">1</span>)&#123;</span><br><span class="line">                baos.write(ch);</span><br><span class="line">            &#125;</span><br><span class="line">            data = baos.toByteArray();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                is.close();</span><br><span class="line">                baos.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        CustomClassLoader loader1 = <span class="keyword">new</span> CustomClassLoader(<span class="string">&quot;loader1&quot;</span>);</span><br><span class="line">        loader1.setPath(<span class="string">&quot;/home/cc/test/&quot;</span>);</span><br><span class="line">        Class&lt;?&gt; clazz = loader1.loadClass(<span class="string">&quot;indi.greenhat.jvm.Test&quot;</span>);</span><br><span class="line">        Object object = clazz.newInstance();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jvm </tag>
            
            <tag> ç±»çš„åŠ è½½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè™šæ‹Ÿæœºç¬”è®°-ç±»çš„å¸è½½</title>
      <link href="/2019/05/15/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E7%B1%BB%E7%9A%84%E5%8D%B8%E8%BD%BD/"/>
      <url>/2019/05/15/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E7%B1%BB%E7%9A%84%E5%8D%B8%E8%BD%BD/</url>
      
        <content type="html"><![CDATA[<p>jvmç±»çš„å¸è½½</p><span id="more"></span><p>å½“<code>MySample</code>ç±»è¢«åŠ è½½ï¼Œè¿æ¥å’Œåˆå§‹åŒ–åï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸå°±å¼€å§‹äº†ã€‚å½“ä»£è¡¨<code>MySample</code>ç±»çš„<code>Class</code>å¯¹è±¡ä¸å†è¢«å¼•ç”¨ï¼Œå³ä¸å¯è§¦åŠæ—¶ï¼Œ<code>Class</code>å¯¹è±¡å°±ä¼šç»“æŸç”Ÿå‘½å‘¨æœŸï¼Œ<code>MySample</code>ç±»åœ¨æ–¹æ³•åŒºå†…çš„æ•°æ®ä¹Ÿä¼šè¢«å¸è½½ï¼Œä»è€Œç»“æŸ<code>MySample</code>ç±»çš„ç”Ÿå‘½å‘¨æœŸã€‚</p><p>ä¸€ä¸ªç±»ä½•æ—¶ç»“æŸç”Ÿå‘½å‘¨æœŸï¼Œå–å†³äºä»£è¡¨å®ƒçš„Classå¯¹è±¡ä½•æ—¶ç»“æŸç”Ÿå‘½å‘¨æœŸã€‚</p><hr><p>ç”±Javaè™šæ‹Ÿæœºè‡ªå¸¦çš„åŠ è½½å™¨æ‰€åŠ è½½çš„ç±»ï¼Œåœ¨è™šæ‹Ÿæœºçš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œå§‹ç»ˆä¸ä¼šè¢«å¸è½½ã€‚Javaè™šæ‹Ÿæœºè‡ªå¸¦çš„ç±»åŠ å™¨åŒ…æ‹¬æ ¹ç±»åŠ è½½å™¨ï¼Œæ‰©å±•ç±»åŠ è½½å™¨å’Œç³»ç»Ÿç±»åŠ è½½å™¨ã€‚Javaè™šæ‹Ÿæœºæœ¬èº«ä¼šå§‹ç»ˆå¼•ç”¨è¿™äº›ç±»åŠ è½½å™¨ï¼Œè€Œè¿™äº›ç±»åŠ è½½å™¨åˆ™ä¼šå§‹å¼•ç”¨å®ƒä»¬æ‰€åŠ è½½çš„ç±»çš„<code>Class</code>å¯¹è±¡ï¼Œå› æ­¤è¿™<code>Class</code>å¯¹è±¡ç»ˆæ˜¯å¯åŠçš„ã€‚</p><p>ç”±ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨æ‰€åŠ è½½çš„ç±»æ˜¯å¯ä»¥è¢«å¸è½½çš„ã€‚</p><hr><p>Sampleç±»ä¸­ç”±<code>loader1</code>åŠ è½½ã€‚åœ¨ç±»åŠ è½½å™¨çš„å†…éƒ¨å®ç°ä¸­ï¼Œç”¨ä¸€ä¸ªJavaé›†åˆæ¥å­˜æ”¾æ‰€åŠ è½½ç±»çš„å¼•ç”¨ã€‚å¦ä¸€æ–¹é¢ï¼Œä¸€ä¸ª<code>Class</code>å¯¹è±¡æ€»æ˜¯ä¼šå¼•ç”¨å®ƒçš„ç±»åŠ è½½å™¨ï¼Œè°ƒç”¨<code>Class</code>å¯¹è±¡çš„<code>getClasslodar()</code>æ–¹æ³•ï¼Œå°±èƒ½è·å¾—å®ƒçš„ç±»åŠ è½½å™¨ã€‚æ­¤å¯è§ï¼Œä»£è¡¨<code>Sample</code>ç±»çš„<code>Class</code>å®ä¾‹ä¸<code>loader1</code>ä¹‹é—´ä¸ºåŒå‘å…³å–å…³ç³»ã€‚<br>ä¸€ä¸ªç±»çš„å®ä¾‹æ€»æ˜¯å¼•ç”¨ä»£è¡¨è¿™ä¸ªç±»çš„<code>C1ass</code>å¯¹è±¡ã€‚åœ¨<code>Object</code>ç±»ä¸­å®šä¹‰äº†<code>getClass()</code><br>æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›ä»£è¡¨å¯¹è±¡æ‰€å±ç±»çš„<code>Class</code>å¯¹è±¡çš„å¼•ç”¨ã€‚æ­¤å¤–ï¼Œæ‰€æœ‰çš„Javaç±»éƒ½æœ‰<br>ä¸€ä¸ªé™æ€å±æ€§class.å®ƒå¼•ç”¨ä»£è¡¨è¿™ä¸ªç±»çš„Classå¯¹è±¡ã€‚</p><h1 id="éªŒè¯ç±»çš„å¸è½½"><a href="#éªŒè¯ç±»çš„å¸è½½" class="headerlink" title="éªŒè¯ç±»çš„å¸è½½"></a>éªŒè¯ç±»çš„å¸è½½</h1><p>æ·»åŠ <code>-XX:+TraceClassUnloading</code>å‚æ•°åå¯ä»¥çœ‹åˆ°ç±»çš„å¸è½½ä¿¡æ¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> indi.greenhat.jvm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç”¨æˆ·è‡ªå®šä¹‰ç±»åŠ è½½å™¨å¿…é¡»ç»§æ‰¿ClassLoaderç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomClassLoader</span> <span class="keyword">extends</span> <span class="title">ClassLoader</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String classLoaderName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç±»çš„æ‰©å±•å</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String fileExtension = <span class="string">&quot;.class&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>  String path;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPath</span><span class="params">(String path)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.path = path;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomClassLoader</span><span class="params">(String classLoaderName)</span></span>&#123;</span><br><span class="line">        <span class="comment">//ä½¿ç”¨æ–¹æ³•getSystemClassLoaderï¼ˆï¼‰è¿”å›çš„ClassLoaderä½œä¸ºçˆ¶ç±»åŠ è½½å™¨åˆ›å»ºæ–°çš„ç±»åŠ è½½å™¨</span></span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.classLoaderName = classLoaderName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomClassLoader</span><span class="params">(String classLoaderName, ClassLoader parent)</span></span>&#123;</span><br><span class="line">        <span class="comment">//ä½¿ç”¨æŒ‡å®šçš„çˆ¶ç±»åŠ è½½å™¨åˆ›å»ºæ–°çš„ç±»åŠ è½½å™¨ä»¥è¿›è¡Œå§”æ´¾</span></span><br><span class="line">        <span class="keyword">super</span>(parent);</span><br><span class="line">        <span class="keyword">this</span>.classLoaderName = classLoaderName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt; findClass(String className) <span class="keyword">throws</span> ClassNotFoundException&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;findClass invoked: &quot;</span> + className);</span><br><span class="line">        System.out.println(<span class="string">&quot;class loader name: &quot;</span> + <span class="keyword">this</span>.classLoaderName);</span><br><span class="line">        <span class="keyword">byte</span>[] data = <span class="keyword">this</span>.loadClassDate(className);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.defineClass(className, data, <span class="number">0</span>, data.length);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">byte</span>[] loadClassDate(String name)&#123;</span><br><span class="line">        InputStream is = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">byte</span>[] data = <span class="keyword">null</span>;</span><br><span class="line">        ByteArrayOutputStream baos = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//è½¬æ¢ä¸ºç£ç›˜å¯¹åº”çš„åœ°å€</span></span><br><span class="line">            name = name.replace(<span class="string">&quot;.&quot;</span>, <span class="string">&quot;/&quot;</span>);</span><br><span class="line">            is = <span class="keyword">new</span> FileInputStream(<span class="keyword">new</span> File(<span class="keyword">this</span>.path+ name + <span class="keyword">this</span>.fileExtension));</span><br><span class="line">            baos = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> ch = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>((ch = is.read()) != -<span class="number">1</span>)&#123;</span><br><span class="line">                baos.write(ch);</span><br><span class="line">            &#125;</span><br><span class="line">            data = baos.toByteArray();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                is.close();</span><br><span class="line">                baos.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        CustomClassLoader loader1 = <span class="keyword">new</span> CustomClassLoader(<span class="string">&quot;loader1&quot;</span>);</span><br><span class="line">        loader1.setPath(<span class="string">&quot;/home/cc/test/&quot;</span>);</span><br><span class="line">        Class&lt;?&gt; clazz = loader1.loadClass(<span class="string">&quot;indi.greenhat.jvm.Test&quot;</span>);</span><br><span class="line">        Object object = clazz.newInstance();</span><br><span class="line">        System.out.println(object);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;-----------------&quot;</span>);</span><br><span class="line">        loader1 = <span class="keyword">null</span>;</span><br><span class="line">        clazz = <span class="keyword">null</span>;</span><br><span class="line">        object = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         *è¿è¡Œåƒåœ¾å›æ”¶å™¨ã€‚</span></span><br><span class="line"><span class="comment"> *è°ƒç”¨gcæ–¹æ³•è¡¨æ˜ï¼ŒJavaè™šæ‹ŸæœºèŠ±è´¹äº†å›æ”¶æœªä½¿ç”¨å¯¹è±¡çš„åŠªåŠ›ï¼Œä»¥ä½¿å…¶å½“å‰å ç”¨çš„å†…å­˜å¯ä»¥å¿«é€Ÿé‡ç”¨ã€‚</span></span><br><span class="line"><span class="comment">         *å½“æ§ä»¶ä»æ–¹æ³•è°ƒç”¨è¿”å›æ—¶ï¼ŒJavaè™šæ‹Ÿæœºå·²ç»å°½åŠ›ä»æ‰€æœ‰ä¸¢å¼ƒçš„å¯¹è±¡ä¸­å›æ”¶ç©ºé—´ã€‚</span></span><br><span class="line"><span class="comment">         *ç­‰äºRuntime.getRuntime().gc();</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        System.gc();</span><br><span class="line">        System.out.println(<span class="string">&quot;-----------------&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">findClass invoked: indi.greenhat.jvm.Test</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">loader</span> <span class="title">name</span>: <span class="title">loader1</span></span></span><br><span class="line"><span class="class"><span class="title">indi</span>.<span class="title">greenhat</span>.<span class="title">jvm</span>.<span class="title">Test</span>@677327<span class="title">b6</span></span></span><br><span class="line"><span class="class">-----------------</span></span><br><span class="line"><span class="class">[<span class="title">Unloading</span> <span class="title">class</span> <span class="title">indi</span>.<span class="title">greenhat</span>.<span class="title">jvm</span>.<span class="title">Test</span> 0<span class="title">x0000000100061028</span>]</span></span><br><span class="line"><span class="class">-----------------</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jvm </tag>
            
            <tag> ç±»çš„å¸è½½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çº¿æ®µæ ‘æ¨¡æ¿</title>
      <link href="/2019/05/11/%E7%BA%BF%E6%AE%B5%E6%A0%91%E6%A8%A1%E6%9D%BF/"/>
      <url>/2019/05/11/%E7%BA%BF%E6%AE%B5%E6%A0%91%E6%A8%A1%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<p>ã€ŒLYOI2018 Summerã€Hzyâ€™s Rabbit Array                </p><span id="more"></span><p>å‚è€ƒï¼š</p><p><a href="https://wyy603.github.io/2019/01/07/%E7%BA%BF%E6%AE%B5%E6%A0%91%E6%A8%A1%E6%9D%BF/">wyy603</a></p><h1 id="ã€ŒLYOI2018-Summerã€Hzyâ€™s-Rabbit-Array"><a href="#ã€ŒLYOI2018-Summerã€Hzyâ€™s-Rabbit-Array" class="headerlink" title="ã€ŒLYOI2018 Summerã€Hzyâ€™s Rabbit Array"></a><a href="https://lyoi.ac/problem/396">ã€ŒLYOI2018 Summerã€Hzyâ€™s Rabbit Array</a></h1><p><img src="/2019/05/11/%E7%BA%BF%E6%AE%B5%E6%A0%91%E6%A8%A1%E6%9D%BF/1.png" alt></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 500005</span></span><br><span class="line"><span class="comment">// éœ€è¦åŠ çš„å®ï¼ˆæ¨¡æ•°å¯è‡ªè¡Œæ›´æ”¹ï¼‰</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MOD 1000000007</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> min(a, b) (((a) &lt; (b)) ? (a) : (b))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> max(a, b) (((a) &gt; (b)) ? (a) : (b))</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> ll <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> c = <span class="built_in">getchar</span>();</span><br><span class="line">    ll ret = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (c &lt; <span class="string">&#x27;0&#x27;</span> || c &gt; <span class="string">&#x27;9&#x27;</span>) c = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span> (c &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; c &lt;= <span class="string">&#x27;9&#x27;</span>) </span><br><span class="line">        ret = ret * <span class="number">10</span> + c - <span class="string">&#x27;0&#x27;</span>, c = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// çº¿æ®µæ ‘çš„è¾…åŠ©å‡½æ•°å’Œç»“æ„ä½“</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> ll <span class="title">sqr</span><span class="params">(ll x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ((x % MOD) * (x % MOD)) % MOD;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(T&amp; a, T&amp; b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">T t = a;</span><br><span class="line">a = b, b = t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> N, M;</span><br><span class="line"><span class="comment">// æè¿°åˆå§‹åºåˆ—</span></span><br><span class="line">ll begin[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="comment">// çº¿æ®µæ ‘çš„è¾…åŠ©å‡½æ•°å’Œç»“æ„ä½“</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">nod</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    ll sum, mx, mn, squ;</span><br><span class="line">    <span class="keyword">double</span> dsum;</span><br><span class="line">    <span class="built_in">nod</span> (ll isum, ll imx, ll imn, ll isqu, <span class="keyword">double</span> idsum)</span><br><span class="line">    &#123;</span><br><span class="line">        sum = isum, mx = imx, mn = imn, </span><br><span class="line">        squ = isqu, dsum = idsum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// çº¿æ®µæ ‘ä¸»ä½“</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sgt</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    ll sum, mx, mn, squ, add, cov, mul;</span><br><span class="line">    <span class="keyword">double</span> dsum;</span><br><span class="line">    <span class="keyword">int</span> l, r, mid, siz;</span><br><span class="line">    sgt *lson, *rson;</span><br><span class="line">    <span class="built_in">sgt</span> (<span class="keyword">int</span> le, <span class="keyword">int</span> ri)</span><br><span class="line">    &#123;</span><br><span class="line">        l = le, r = ri, mid = (l + r) &gt;&gt; <span class="number">1</span>, siz = r - l + <span class="number">1</span>;</span><br><span class="line">        lson = rson = <span class="literal">NULL</span>, sum = mx = mn = squ = <span class="number">0</span>, </span><br><span class="line">        add = <span class="number">0</span>, mul = <span class="number">1</span>, cov = <span class="number">-1</span>, dsum = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">push_up</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        sum = (lson-&gt;sum + rson-&gt;sum) % MOD;</span><br><span class="line">        mx = <span class="built_in">max</span>(lson-&gt;mx, rson-&gt;mx);</span><br><span class="line">        mn = <span class="built_in">min</span>(lson-&gt;mn, rson-&gt;mn);</span><br><span class="line">        squ = (lson-&gt;squ + rson-&gt;squ) % MOD;</span><br><span class="line">        dsum = lson-&gt;dsum + rson-&gt;dsum;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">plus</span><span class="params">(ll K)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        squ = (squ + (((<span class="number">2</span> * (K % MOD)) % MOD) * sum) % MOD </span><br><span class="line">               + (<span class="built_in">sqr</span>(K) * siz) % MOD) % MOD;</span><br><span class="line">        sum = (sum + ((K % MOD) * siz) % MOD) % MOD;</span><br><span class="line">        mx += K, mn += K, dsum += K * siz;</span><br><span class="line">        add = add + K;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">multiply</span><span class="params">(ll K)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        squ = (squ * <span class="built_in">sqr</span>(K)) % MOD, sum </span><br><span class="line">            = (sum * (K % MOD)) % MOD, dsum *= K;</span><br><span class="line">mx *= K, mn *= K;</span><br><span class="line"><span class="keyword">if</span> (K &lt; <span class="number">0</span>) <span class="built_in">swap</span>(mx, mn);</span><br><span class="line">        mul = mul * K, add = add * K;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">cover</span><span class="params">(ll K)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        squ = (<span class="built_in">sqr</span>(K) * siz) % MOD, sum = ((K % MOD) * siz) % MOD;</span><br><span class="line">        mx = mn = K, dsum = K * siz;</span><br><span class="line">        cov = K, mul = <span class="number">1</span>, add = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">push_down</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (cov != <span class="number">-1</span>) lson-&gt;<span class="built_in">cover</span>(cov), rson-&gt;<span class="built_in">cover</span>(cov), cov = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">if</span> (mul != <span class="number">1</span>) lson-&gt;<span class="built_in">multiply</span>(mul), rson-&gt;<span class="built_in">multiply</span>(mul), mul = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (add) lson-&gt;<span class="built_in">plus</span>(add), rson-&gt;<span class="built_in">plus</span>(add), add = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (l &gt;= r) sum = begin[l] % MOD, squ = <span class="built_in">sqr</span>(begin[l]), </span><br><span class="line">        mx = begin[l], mn = begin[l], dsum = begin[l];</span><br><span class="line">        <span class="keyword">else</span> lson = <span class="keyword">new</span> <span class="built_in">sgt</span>(l, mid), rson = <span class="keyword">new</span> <span class="built_in">sgt</span>(mid + <span class="number">1</span>, r), </span><br><span class="line">        lson-&gt;<span class="built_in">build</span>(), rson-&gt;<span class="built_in">build</span>(), <span class="built_in">push_up</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R, ll K, <span class="keyword">char</span> t)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (l == L &amp;&amp; r == R)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (t == <span class="string">&#x27;p&#x27;</span>) <span class="built_in">plus</span>(K);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (t == <span class="string">&#x27;m&#x27;</span>) <span class="built_in">multiply</span>(K);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (t == <span class="string">&#x27;c&#x27;</span>) <span class="built_in">cover</span>(K);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">push_down</span>();</span><br><span class="line">            <span class="keyword">if</span> (R &lt;= mid) lson-&gt;<span class="built_in">modify</span>(L, R, K, t);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (L &gt; mid) rson-&gt;<span class="built_in">modify</span>(L, R, K, t);</span><br><span class="line">            <span class="keyword">else</span> lson-&gt;<span class="built_in">modify</span>(L, mid, K, t), rson-&gt;<span class="built_in">modify</span>(mid + <span class="number">1</span>, R, K, t);</span><br><span class="line">            <span class="built_in">push_up</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">nod <span class="title">query</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (l == L &amp;&amp; r == R) <span class="keyword">return</span> <span class="built_in">nod</span>(sum, mx, mn, squ, dsum);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">push_down</span>();</span><br><span class="line">            <span class="keyword">if</span> (R &lt;= mid) <span class="keyword">return</span> lson-&gt;<span class="built_in">query</span>(L, R);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (L &gt; mid) <span class="keyword">return</span> rson-&gt;<span class="built_in">query</span>(L, R);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                nod ls = lson-&gt;<span class="built_in">query</span>(L, mid), rs = rson-&gt;<span class="built_in">query</span>(mid + <span class="number">1</span>, R);</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">nod</span>((ls.sum + rs.sum) % MOD, <span class="built_in">max</span>(ls.mx, rs.mx), </span><br><span class="line">                           <span class="built_in">min</span>(ls.mn, rs.mn), (ls.squ + rs.squ) % MOD, ls.dsum + rs.dsum);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;*hed;</span><br><span class="line"><span class="comment">// çº¿æ®µæ ‘ä¸»ä½“</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line">    <span class="built_in">freopen</span>(<span class="string">&quot;input.in&quot;</span>, <span class="string">&quot;r&quot;</span>, stdin);</span><br><span class="line">    <span class="built_in">freopen</span>(<span class="string">&quot;output.out&quot;</span>, <span class="string">&quot;w&quot;</span>, stdout);</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">    N = <span class="built_in">read</span>(), M = <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= N; ++i) begin[i] = <span class="built_in">read</span>();</span><br><span class="line">    hed = <span class="keyword">new</span> <span class="built_in">sgt</span>(<span class="number">1</span>, N), hed-&gt;<span class="built_in">build</span>();</span><br><span class="line">    ll opt, p1, p2, p3, t;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= M; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        opt = <span class="built_in">read</span>(), p1 = <span class="built_in">read</span>(), p2 = <span class="built_in">read</span>();</span><br><span class="line">        <span class="keyword">if</span> (opt == <span class="number">1</span>) <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, (hed-&gt;<span class="built_in">query</span>(p1, p2).sum % MOD + MOD) % MOD);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (opt == <span class="number">2</span>) <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, hed-&gt;<span class="built_in">query</span>(p1, p2).mx);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (opt == <span class="number">3</span>) <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, hed-&gt;<span class="built_in">query</span>(p1, p2).mn);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (opt == <span class="number">4</span>) hed-&gt;<span class="built_in">modify</span>(p1, p2, <span class="built_in">read</span>(), <span class="string">&#x27;p&#x27;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (opt == <span class="number">5</span>) t = hed-&gt;<span class="built_in">query</span>(p1, p1).mx, t = t ^ p2, hed-&gt;<span class="built_in">modify</span>(p1, p1, t, <span class="string">&#x27;c&#x27;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (opt == <span class="number">6</span>) <span class="built_in">printf</span>(<span class="string">&quot;%.2lf\n&quot;</span>, hed-&gt;<span class="built_in">query</span>(p1, p2).dsum / (<span class="keyword">double</span>)(p2 - p1 + <span class="number">1</span>));</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (opt == <span class="number">7</span>) hed-&gt;<span class="built_in">modify</span>(p1, p2, <span class="number">-1</span>, <span class="string">&#x27;m&#x27;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (opt == <span class="number">8</span>) hed-&gt;<span class="built_in">modify</span>(p1, p2, <span class="built_in">read</span>(), <span class="string">&#x27;c&#x27;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (opt == <span class="number">9</span>) <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, (hed-&gt;<span class="built_in">query</span>(p1, p2).squ % MOD + MOD) % MOD);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å®ç°æ–¹å¼ï¼šæŒ‡é’ˆï¼›åŠ¨æ€ç”³è¯·å†…å­˜ï¼›æ™®é€šçº¿æ®µæ ‘</p><p>æ³¨æ„äº‹é¡¹ï¼šåŒºé—´å’Œ/åŒºé—´å¹³æ–¹å’Œ è¢«æ¨¡äº†ï¼›åŒºé—´æœ€å¤§å€¼/æœ€å°å€¼ æ²¡æ¨¡ã€‚å»ºè®®æ¯æ¬¡æ“ä½œçš„å‚æ•°ä¸è¦è¶…è¿‡long longçš„å–å€¼èŒƒå›´ï¼Œå¹¶ä¿è¯æœ€å¤§å€¼åœ¨long longèŒƒå›´å†…ã€‚ï¼ˆå¦‚æœæƒ³è®©å®ƒä»¬è¢«æ¨¡å¯è‡ªè¡Œæ›´æ”¹ï¼‰</p><h3 id="è¿™é¢—çº¿æ®µæ ‘çš„ä½¿ç”¨æ–¹æ³•"><a href="#è¿™é¢—çº¿æ®µæ ‘çš„ä½¿ç”¨æ–¹æ³•" class="headerlink" title="è¿™é¢—çº¿æ®µæ ‘çš„ä½¿ç”¨æ–¹æ³•"></a>è¿™é¢—çº¿æ®µæ ‘çš„ä½¿ç”¨æ–¹æ³•</h3><ol><li>åœ¨ä½¿ç”¨ä¹‹å‰ï¼ˆæœ€å¼€å¤´ï¼‰</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">read_to_begin</span>();</span><br><span class="line">hed = <span class="keyword">new</span> <span class="built_in">sgt</span>(<span class="number">1</span>, N);</span><br><span class="line">hed-&gt;<span class="built_in">build</span>();</span><br></pre></td></tr></table></figure><p>å…¶ä¸­read_to_begin();è¦å°†åˆå§‹åºåˆ—è¯»å…¥begin<strong>æ•°ç»„</strong></p><ol><li>ä½¿ç”¨æ—¶</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hed-&gt;<span class="built_in">modify</span>(l, r, k, <span class="string">&#x27;p&#x27;</span>); <span class="comment">//åŒºé—´åŠ </span></span><br><span class="line">hed-&gt;<span class="built_in">modify</span>(l, r, k, <span class="string">&#x27;m&#x27;</span>); <span class="comment">//åŒºé—´ä¹˜</span></span><br><span class="line">hed-&gt;<span class="built_in">modify</span>(l, r, k, <span class="string">&#x27;c&#x27;</span>); <span class="comment">//åŒºé—´èµ‹å€¼</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­l, rè¡¨ç¤ºä¸€ä¸ªé—­åŒºé—´[l,r]ï¼Œkè¡¨ç¤ºå‚æ•°</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hed-&gt;<span class="built_in">query</span>(l, r);</span><br></pre></td></tr></table></figure><p>è¿”å›ä¸€ä¸ªnodå½¢å˜é‡ï¼Œå¦‚æœè¿™ä¸ªè¿”å›å€¼æ˜¯tï¼Œé‚£ä¹ˆ</p><ul><li>t.sumæ˜¯åŒºé—´å’Œï¼ˆæ¨¡äº†ï¼‰</li><li>t.mxæ˜¯åŒºé—´æœ€å¤§å€¼ï¼ˆæ²¡æ¨¡ï¼‰</li><li>t.mnæ˜¯åŒºé—´æœ€å°å€¼ï¼ˆæ²¡æ¨¡ï¼‰</li><li>t.squæ˜¯åŒºé—´å¹³æ–¹å’Œï¼ˆæ¨¡äº†ï¼‰</li></ul>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¿æ®µæ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè™šæ‹Ÿæœºç¬”è®°-è‡ªå®šä¹‰ç±»åŠ è½½å™¨</title>
      <link href="/2019/05/10/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8/"/>
      <url>/2019/05/10/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<p>jvmè‡ªå®šä¹‰ç±»åŠ è½½å™¨</p><span id="more"></span><h1 id="JDKåŠ è½½ç±»æµç¨‹"><a href="#JDKåŠ è½½ç±»æµç¨‹" class="headerlink" title="JDKåŠ è½½ç±»æµç¨‹"></a>JDKåŠ è½½ç±»æµç¨‹</h1><p>å‚è€ƒï¼š<a href="https://juejin.im/post/5a1fad585188252ae93ab953">https://juejin.im/post/5a1fad585188252ae93ab953</a></p><h2 id="loadClass"><a href="#loadClass" class="headerlink" title="loadClass"></a>loadClass</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> Class&lt;?&gt; loadClass(String name, <span class="keyword">boolean</span> resolve) <span class="keyword">throws</span> ClassNotFoundException</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">synchronized</span> (getClassLoadingLock(name)) &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 1.æ£€æŸ¥ç±»æ˜¯å¦å·²ç»åŠ è½½è¿‡</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> name ç±»çš„äºŒè¿›åˆ¶åå­—     </span></span><br><span class="line"><span class="comment">         * <span class="doctag">@return</span> ç±»å¯¹è±¡ï¼ˆClass&lt;?&gt;ï¼‰ï¼Œå¦‚æœæ²¡æœ‰åŠ è½½è¯¥ç±»ï¼Œåˆ™è¿”å›null</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Class c = findLoadedClass(name);</span><br><span class="line">        <span class="keyword">if</span> (c == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">long</span> t0 = System.nanoTime();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (parent != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="comment">// 2.1.å¦‚æœæ²¡æœ‰åŠ è½½è¿‡ï¼Œå…ˆè°ƒç”¨çˆ¶ç±»åŠ è½½å™¨å»åŠ è½½</span></span><br><span class="line">                    c = parent.loadClass(name, <span class="keyword">false</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// 2.2.å¦‚æœæ²¡æœ‰åŠ è½½è¿‡ï¼Œä¸”æ²¡æœ‰çˆ¶ç±»åŠ è½½å™¨ï¼Œå°±ç”¨BootstrapClassLoaderå»åŠ è½½</span></span><br><span class="line">                c = findBootstrapClassOrNull(name);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">                <span class="comment">// ClassNotFoundException thrown if class not found</span></span><br><span class="line">                <span class="comment">// from the non-null parent class loader</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (c == <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="comment">//3. å¦‚æœçˆ¶ç±»åŠ è½½å™¨æ²¡æœ‰åŠ è½½åˆ°ï¼Œè°ƒç”¨findClasså»åŠ è½½</span></span><br><span class="line">                <span class="keyword">long</span> t1 = System.nanoTime();</span><br><span class="line">                c = findClass(name);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// this is the defining class loader; record the stats</span></span><br><span class="line">                sun.misc.PerfCounter.getParentDelegationTime().addTime(t1 - t0);</span><br><span class="line">                sun.misc.PerfCounter.getFindClassTime().addElapsedTimeFrom(t1);</span><br><span class="line">                sun.misc.PerfCounter.getFindClasses().increment();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (resolve) &#123;</span><br><span class="line">            resolveClass(c);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> c;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä»ä¸Šé¢ä»£ç å¯ä»¥æ˜æ˜¾çœ‹å‡ºï¼Œ<code>loadClass(String, boolean)</code>å‡½æ•°å³å®ç°äº†åŒäº²å§”æ´¾æ¨¡å‹ï¼æ•´ä¸ªå¤§è‡´è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ol><li>æ£€æŸ¥ä¸€ä¸‹æŒ‡å®šåç§°çš„ç±»æ˜¯å¦å·²ç»åŠ è½½è¿‡ï¼Œå¦‚æœåŠ è½½è¿‡äº†ï¼Œå°±ä¸éœ€è¦å†åŠ è½½ï¼Œç›´æ¥è¿”å›ã€‚</li><li>å¦‚æœæ­¤ç±»æ²¡æœ‰åŠ è½½è¿‡ï¼Œé‚£ä¹ˆï¼Œå†åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦æœ‰çˆ¶åŠ è½½å™¨ï¼›å¦‚æœæœ‰çˆ¶åŠ è½½å™¨ï¼Œåˆ™ç”±çˆ¶åŠ è½½å™¨åŠ è½½ï¼ˆå³è°ƒç”¨<code>parent.loadClass(name, false);</code>ï¼‰.æˆ–è€…æ˜¯è°ƒç”¨<code>bootstrap</code>ç±»åŠ è½½å™¨æ¥åŠ è½½ã€‚</li><li>å¦‚æœçˆ¶åŠ è½½å™¨åŠ<code>bootstrap</code>ç±»åŠ è½½å™¨éƒ½æ²¡æœ‰æ‰¾åˆ°æŒ‡å®šçš„ç±»ï¼Œé‚£ä¹ˆè°ƒç”¨å½“å‰ç±»åŠ è½½å™¨çš„<strong><code>findClass</code></strong>æ–¹æ³•æ¥å®Œæˆç±»åŠ è½½ã€‚é»˜è®¤çš„<code>findclass</code>æ¯›éƒ½ä¸å¹²ï¼Œç›´æ¥æŠ›å‡º<code>ClassNotFound</code>å¼‚å¸¸ï¼Œæ‰€ä»¥æˆ‘ä»¬è‡ªå®šä¹‰ç±»åŠ è½½å™¨å°±è¦è¦†ç›–è¿™ä¸ªæ–¹æ³•äº†ã€‚</li><li><strong>å¯ä»¥çŒœæµ‹:<code>ApplicationClassLoader</code>çš„<code>findClass</code>æ˜¯å»<code>classpath</code>ä¸‹å»åŠ è½½ï¼Œ<code>ExtentionClassLoader</code>æ˜¯å»<code>java_home/lib/ext</code>ç›®å½•ä¸‹å»åŠ è½½ã€‚å®é™…ä¸Šå°±æ˜¯<code>findClass</code>æ–¹æ³•ä¸ä¸€æ ·ç½¢äº†</strong>ã€‚</li></ol><hr><p><code>loadClass</code>åœ¨çˆ¶åŠ è½½å™¨æ— æ³•åŠ è½½ç±»çš„æ—¶å€™ï¼Œå°±ä¼šè°ƒç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨ä¸­çš„<code>findClass</code>å‡½æ•°ï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»è¦åœ¨<code>loadClass</code>è¿™ä¸ªå‡½æ•°é‡Œé¢å®ç°å°†ä¸€ä¸ªæŒ‡å®šç±»åç§°è½¬æ¢ä¸ºClasså¯¹è±¡ã€‚</p><p>æ ¹æ®JavaDoc</p><blockquote><p>ä¸€äº›ç±»å¯èƒ½å¹¶ä¸æ˜¯æ¥è‡ªä¸€ä¸ªæ–‡ä»¶ï¼Œå®ƒä»¬å¯èƒ½æ¥è‡ªäºå…¶ä»–æ¥æºï¼Œæ¯”å¦‚ç½‘ç»œæˆ–è€…ç”±åº”ç”¨æœ¬èº«æ„å»ºå‡ºæ¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒdefineClassæ–¹æ³•ä¼šå°†ä¸€ä¸ªå­—èŠ‚æ•°ç»„è½¬æ¢æˆclassç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œè¿™ä¸ªæ–°å®šä¹‰çš„å®ä¾‹æ˜¯å¯ä»¥é€šè¿‡Class.newInstanceå»åˆ›å»ºã€‚</p></blockquote><p>äºæ˜¯æˆ‘ä»¬å¯ä»¥è¿ç”¨<code>defineClass</code>å»åˆ›å»º</p><p><img src="/2019/05/10/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8/1.png" alt></p><h2 id="defineClass"><a href="#defineClass" class="headerlink" title="defineClass"></a>defineClass</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å°†å­—èŠ‚æ•°ç»„è½¬æ¢ä¸ºç±»Classçš„å®ä¾‹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> b ç»„æˆç±»æ•°æ®çš„å­—èŠ‚æ•°ç»„</span></span><br><span class="line"><span class="comment"> *        off æ•°æ®èµ·å§‹ä½ç½®</span></span><br><span class="line"><span class="comment"> *        len æ•°ç»„é•¿åº¦</span></span><br><span class="line"><span class="comment"> * @ return ä»æŒ‡å®šçš„ç±»æ•°æ®åˆ›å»ºçš„Classå¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">final</span> Class&lt;?&gt; defineClass(<span class="keyword">byte</span>[] b, <span class="keyword">int</span> off, <span class="keyword">int</span> len)</span><br><span class="line">        <span class="keyword">throws</span> ClassFormatError</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@return</span> ä»æ•°æ®åˆ›å»ºçš„Classå¯¹è±¡ï¼Œä»¥åŠå¯é€‰çš„ProtectionDomain</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">        <span class="keyword">return</span> defineClass(<span class="keyword">null</span>, b, off, len, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * å°†å­—èŠ‚æ•°ç»„è½¬æ¢ä¸ºç±»åˆ«ç±»çš„å®ä¾‹ï¼Œå…¶ä¸­å¯é€‰çš„æ˜¯ProtectionDomain</span></span><br><span class="line"><span class="comment">  * å¦‚æœåŸŸæ˜¯nullï¼Œåˆ™é»˜è®¤çš„åŸŸåå°†è¢«ä½œä¸ºæ–‡ä»¶è§„å®šåˆ†é…ç»™ç±»defineClass(String, byte[], int, int)</span></span><br><span class="line"><span class="comment">  * åœ¨ç±»å¯ä»¥ä½¿ç”¨ä¹‹å‰ï¼Œå¿…é¡»è§£å†³åŸŸåé—®é¢˜</span></span><br><span class="line"><span class="comment">  * åŒ…ä¸­å®šä¹‰çš„ç¬¬ä¸€ä¸ªç±»å†³å®šäº†è¯¥åŒ…ä¸­å®šä¹‰çš„æ‰€æœ‰åç»­ç±»å¿…é¡»åŒ…å«çš„ç²¾ç¡®çš„è¯ä¹¦é›†</span></span><br><span class="line"><span class="comment">  * ä¸€å¥—ç±»çš„è¯ä¹¦æ˜¯ä»ç±»ProtectionDomainä¸­çš„CodeSourceè·å¾—çš„</span></span><br><span class="line"><span class="comment">  * æ·»åŠ åˆ°è¯¥åŒ…ä¸­çš„ä»»ä½•ç±»å¿…é¡»åŒ…å«ç›¸åŒçš„è¯ä¹¦é›†ï¼Œ å¦åˆ™å°†æŠ›å‡ºSecurityException</span></span><br><span class="line"><span class="comment">  * è¯·æ³¨æ„ï¼Œå¦‚æœnameä¸ºnull ï¼Œåˆ™ä¸æ‰§è¡Œæ­¤æ£€æŸ¥</span></span><br><span class="line"><span class="comment">  * ä½ åº”è¯¥æ€»æ˜¯ä¼ é€’ä½ æ‰€å®šä¹‰çš„ç±»çš„binary nameä»¥åŠå­—èŠ‚ã€‚ è¿™ç¡®ä¿ä½ æ‰€å®šä¹‰çš„ç±»ç¡®å®æ˜¯ä½ è®¤ä¸ºçš„ç±»ã€‚</span></span><br><span class="line"><span class="comment">  * æŒ‡å®šnameä¸èƒ½ä»¥â€œjava.â€å¼€å§‹ï¼Œå› ä¸ºåœ¨æ‰€æœ‰çš„ç±»â€œjava.*åŒ…åªèƒ½ç”±å¼•å¯¼ç±»è£…è½½ç¨‹åºæ¥é™å®šã€‚</span></span><br><span class="line"><span class="comment">  * å¦‚æœnameä¸æ˜¯nullï¼Œå®ƒå¿…é¡»ç­‰äºbinary nameç±»çš„ç”±å­—èŠ‚æ•°ç»„æŒ‡å®šâ€ b â€œï¼Œå¦åˆ™å°†æŠ›å‡ºä¸€ä¸ªNoClassDefFoundError</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> name é¢„æœŸçš„ç±»äºŒè¿›åˆ¶åå­—ï¼Œå¦‚æœä¸çŸ¥é“åˆ™ä¸ºnull</span></span><br><span class="line"><span class="comment">  *       b    æ„æˆç±»æ•°æ®çš„å­—èŠ‚æ•°ç»„</span></span><br><span class="line"><span class="comment">  *       off  å­—èŠ‚æ•°ç»„èµ·å§‹ä½ç½®</span></span><br><span class="line"><span class="comment">  *       len  å­—èŠ‚æ•°ç»„é•¿åº¦</span></span><br><span class="line"><span class="comment">  *       protectionDomain è¯¥ç±»çš„ProtectionDomainï¼ˆä¿æŠ¤åŸŸï¼ˆä¿æŠ¤åŸŸå®šä¹‰äº†æˆäºˆä¸€æ®µç‰¹å®šä»£ç çš„æ‰€æœ‰æƒé™ï¼‰ï¼‰ </span></span><br><span class="line"><span class="comment">  * <span class="doctag">@return</span> ä»ä¼ å…¥çš„æ•°æ®ä¸­åˆ›å»ºçš„ç±»å¯¹è±¡ï¼Œå¯é€‰ProtectionDomain </span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">final</span> Class&lt;?&gt; defineClass(String name, <span class="keyword">byte</span>[] b, <span class="keyword">int</span> off, <span class="keyword">int</span> len,</span><br><span class="line">                                         ProtectionDomain protectionDomain)</span><br><span class="line">        <span class="keyword">throws</span> ClassFormatError</span><br><span class="line">    &#123;</span><br><span class="line">        protectionDomain = preDefineClass(name, protectionDomain);</span><br><span class="line">        String source = defineClassSourceLocation(protectionDomain);</span><br><span class="line">        Class&lt;?&gt; c = defineClass1(name, b, off, len, protectionDomain, source);</span><br><span class="line">        postDefineClass(c, protectionDomain);</span><br><span class="line">        <span class="keyword">return</span> c;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="findClass"><a href="#findClass" class="headerlink" title="findClass"></a>findClass</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥æ‰¾å…·æœ‰æŒ‡å®šäºŒè¿›åˆ¶åç§°çš„ç±»ã€‚æ­¤æ–¹æ³•åº”ç”±éµå¾ªå§”æ‰˜æ¨¡å‹çš„ç±»åŠ è½½å™¨å®ç°è¦†ç›–ä»¥åŠ è½½ç±»ï¼Œ</span></span><br><span class="line"><span class="comment"> * å¹¶ä¸”åœ¨æ£€æŸ¥æ‰€è¯·æ±‚ç±»çš„çˆ¶ç±»åŠ è½½å™¨  ä¹‹åå°†ç”±loadClassæ–¹æ³•è°ƒç”¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> name ç±»çš„äºŒè¿›åˆ¶å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@retrun</span> ç”Ÿæˆçš„classå¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> ClassNotFoundException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">protected</span> Class&lt;?&gt; findClass(String name) <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ClassNotFoundException(name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>findClassé»˜è®¤æ˜¯ç©ºçš„,æ‰€ä»¥å¾—é‡å†™è¿™ä¸ªæ–¹æ³•.</p><h2 id="æ€»ç»“æµç¨‹"><a href="#æ€»ç»“æµç¨‹" class="headerlink" title="æ€»ç»“æµç¨‹"></a>æ€»ç»“æµç¨‹</h2><p>å…¶å®å¾ˆç®€å•ï¼Œç»§æ‰¿ClassLoaderç±»ï¼Œè¦†ç›–findClassæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•çš„ä½œç”¨å°±æ˜¯æ‰¾åˆ°.classæ–‡ä»¶,è½¬æ¢æˆå­—èŠ‚æ•°ç»„ï¼Œè°ƒç”¨defineClasså¯¹è±¡è½¬æ¢æˆClasså¯¹è±¡è¿”å›</p><h1 id="ç®€å•å®ç°è‡ªå®šä¹‰ç±»åŠ è½½å™¨"><a href="#ç®€å•å®ç°è‡ªå®šä¹‰ç±»åŠ è½½å™¨" class="headerlink" title="ç®€å•å®ç°è‡ªå®šä¹‰ç±»åŠ è½½å™¨"></a>ç®€å•å®ç°è‡ªå®šä¹‰ç±»åŠ è½½å™¨</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> indi.greenhat.jvm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç”¨æˆ·è‡ªå®šä¹‰ç±»åŠ è½½å™¨å¿…é¡»ç»§æ‰¿ClassLoaderç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomClassLoader</span> <span class="keyword">extends</span> <span class="title">ClassLoader</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String classLoaderName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç±»çš„æ‰©å±•å</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String fileExtension = <span class="string">&quot;.class&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomClassLoader</span><span class="params">(String classLoaderName)</span></span>&#123;</span><br><span class="line">        <span class="comment">//ä½¿ç”¨æ–¹æ³•getSystemClassLoaderï¼ˆï¼‰è¿”å›çš„ClassLoaderä½œä¸ºçˆ¶ç±»åŠ è½½å™¨åˆ›å»ºæ–°çš„ç±»åŠ è½½å™¨</span></span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.classLoaderName = classLoaderName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomClassLoader</span><span class="params">(String classLoaderName, ClassLoader parent)</span></span>&#123;</span><br><span class="line">        <span class="comment">//ä½¿ç”¨æŒ‡å®šçš„çˆ¶ç±»åŠ è½½å™¨åˆ›å»ºæ–°çš„ç±»åŠ è½½å™¨ä»¥è¿›è¡Œå§”æ´¾</span></span><br><span class="line">        <span class="keyword">super</span>(parent);</span><br><span class="line">        <span class="keyword">this</span>.classLoaderName = classLoaderName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt; findClass(String className) <span class="keyword">throws</span> ClassNotFoundException&#123;</span><br><span class="line">        <span class="keyword">byte</span>[] data = <span class="keyword">this</span>.loadClassDate(className);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.defineClass(className, data, <span class="number">0</span>, data.length);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">byte</span>[] loadClassDate(String name)&#123;</span><br><span class="line">        InputStream is = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">byte</span>[] data = <span class="keyword">null</span>;</span><br><span class="line">        ByteArrayOutputStream baos = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//è½¬æ¢ä¸ºç£ç›˜å¯¹åº”çš„åœ°å€</span></span><br><span class="line">            name = name.replace(<span class="string">&quot;.&quot;</span>, <span class="string">&quot;/&quot;</span>);</span><br><span class="line">            is = <span class="keyword">new</span> FileInputStream(<span class="keyword">new</span> File(name + <span class="keyword">this</span>.fileExtension));</span><br><span class="line">            baos = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> ch = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>((ch = is.read()) != -<span class="number">1</span>)&#123;</span><br><span class="line">                baos.write(ch);</span><br><span class="line">            &#125;</span><br><span class="line">            data = baos.toByteArray();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                is.close();</span><br><span class="line">                baos.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">(ClassLoader classLoader)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Class&lt;?&gt; clazz = classLoader.loadClass(<span class="string">&quot;indi.greenhat.jvm.Test&quot;</span>);</span><br><span class="line">        Object object = clazz.newInstance();</span><br><span class="line"></span><br><span class="line">        System.out.println(object);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œå…¶çˆ¶åŠ è½½å™¨æ˜¯ç³»ç»Ÿç±»åŠ è½½å™¨</span></span><br><span class="line">        CustomClassLoader loader1 = <span class="keyword">new</span> CustomClassLoader(<span class="string">&quot;loader1&quot;</span>);</span><br><span class="line">        test(loader1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡º:</p><p><code>indi.greenhat.jvm.Test@74a14482</code></p><h1 id="ç®€å•ç±»åŠ è½½å™¨ä¿®æ”¹1"><a href="#ç®€å•ç±»åŠ è½½å™¨ä¿®æ”¹1" class="headerlink" title="ç®€å•ç±»åŠ è½½å™¨ä¿®æ”¹1"></a>ç®€å•ç±»åŠ è½½å™¨ä¿®æ”¹1</h1><p>ä¿®æ”¹éƒ¨åˆ†å·²ç»ç”¨æ ‡è¯†èµ·æ¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*************************************</span></span><br><span class="line"><span class="comment"> * update</span></span><br><span class="line"><span class="comment"> ************************************/</span></span><br></pre></td></tr></table></figure><p>ä»æ ‡è¯†éƒ¨åˆ†æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œåœ¨<code>findClass</code>å’Œ<code>test</code>å¢åŠ äº†å‡ å¥è¾“å‡ºè¯­å¥ï¼Œä¸ºäº†è¾“å‡ºç±»çš„åŠ è½½å™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> indi.greenhat.jvm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç”¨æˆ·è‡ªå®šä¹‰ç±»åŠ è½½å™¨å¿…é¡»ç»§æ‰¿ClassLoaderç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomClassLoader</span> <span class="keyword">extends</span> <span class="title">ClassLoader</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String classLoaderName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç±»çš„æ‰©å±•å</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String fileExtension = <span class="string">&quot;.class&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomClassLoader</span><span class="params">(String classLoaderName)</span></span>&#123;</span><br><span class="line">        <span class="comment">//ä½¿ç”¨æ–¹æ³•getSystemClassLoaderï¼ˆï¼‰è¿”å›çš„ClassLoaderä½œä¸ºçˆ¶ç±»åŠ è½½å™¨åˆ›å»ºæ–°çš„ç±»åŠ è½½å™¨</span></span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.classLoaderName = classLoaderName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomClassLoader</span><span class="params">(String classLoaderName, ClassLoader parent)</span></span>&#123;</span><br><span class="line">        <span class="comment">//ä½¿ç”¨æŒ‡å®šçš„çˆ¶ç±»åŠ è½½å™¨åˆ›å»ºæ–°çš„ç±»åŠ è½½å™¨ä»¥è¿›è¡Œå§”æ´¾</span></span><br><span class="line">        <span class="keyword">super</span>(parent);</span><br><span class="line">        <span class="keyword">this</span>.classLoaderName = classLoaderName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt; findClass(String className) <span class="keyword">throws</span> ClassNotFoundException&#123;</span><br><span class="line">        <span class="comment">/*************************************</span></span><br><span class="line"><span class="comment">         * update</span></span><br><span class="line"><span class="comment">         ************************************/</span></span><br><span class="line">        System.out.println(<span class="string">&quot;findClass invoked: &quot;</span> + className);</span><br><span class="line">        System.out.println(<span class="string">&quot;class loader name: &quot;</span> + <span class="keyword">this</span>.classLoaderName);</span><br><span class="line">        <span class="comment">/*************************************</span></span><br><span class="line"><span class="comment">         * update</span></span><br><span class="line"><span class="comment">         ************************************/</span></span><br><span class="line">        <span class="keyword">byte</span>[] data = <span class="keyword">this</span>.loadClassDate(className);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.defineClass(className, data, <span class="number">0</span>, data.length);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">byte</span>[] loadClassDate(String name)&#123;</span><br><span class="line">        InputStream is = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">byte</span>[] data = <span class="keyword">null</span>;</span><br><span class="line">        ByteArrayOutputStream baos = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//è½¬æ¢ä¸ºç£ç›˜å¯¹åº”çš„åœ°å€</span></span><br><span class="line">            name = name.replace(<span class="string">&quot;.&quot;</span>, <span class="string">&quot;/&quot;</span>);</span><br><span class="line">            is = <span class="keyword">new</span> FileInputStream(<span class="keyword">new</span> File(name + <span class="keyword">this</span>.fileExtension));</span><br><span class="line">            baos = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> ch = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>((ch = is.read()) != -<span class="number">1</span>)&#123;</span><br><span class="line">                baos.write(ch);</span><br><span class="line">            &#125;</span><br><span class="line">            data = baos.toByteArray();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                is.close();</span><br><span class="line">                baos.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">(ClassLoader classLoader)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Class&lt;?&gt; clazz = classLoader.loadClass(<span class="string">&quot;indi.greenhat.jvm.Test&quot;</span>);</span><br><span class="line">        Object object = clazz.newInstance();</span><br><span class="line"></span><br><span class="line">        System.out.println(object);</span><br><span class="line">        <span class="comment">/*************************************</span></span><br><span class="line"><span class="comment">         * update</span></span><br><span class="line"><span class="comment">         ************************************/</span></span><br><span class="line">        System.out.println(<span class="string">&quot;----getClassLoader-----&quot;</span>);</span><br><span class="line">        System.out.println(clazz.getClassLoader());</span><br><span class="line">        <span class="comment">/*************************************</span></span><br><span class="line"><span class="comment">         * update</span></span><br><span class="line"><span class="comment">         ************************************/</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        CustomClassLoader loader1 = <span class="keyword">new</span> CustomClassLoader(<span class="string">&quot;loader1&quot;</span>);</span><br><span class="line">        test(loader1);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">indi.greenhat.jvm.Test@74a14482</span><br><span class="line">----getClassLoader-----</span><br><span class="line">sun.misc.Launcher$AppClassLoader@18b4aac2</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºè¯¥ç±»æ˜¯ç”±ç³»ç»Ÿç±»åŠ è½½å™¨åŠ è½½çš„ï¼Œè€Œä¸æ˜¯ç”±æˆ‘ä»¬è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨åŠ è½½çš„ã€‚</p><p>ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº†<code>classLoader</code>çš„<code>super</code>åŠæ³•ï¼Œä½¿ç”¨æ–¹æ³•<code>getSystemClassLoaderï¼ˆï¼‰</code>è¿”å›çš„<code>ClassLoader</code>ä½œä¸ºçˆ¶ç±»åŠ è½½å™¨åˆ›å»ºæ–°çš„ç±»åŠ è½½å™¨ï¼Œæ ¹æ®åŒäº²å§”æ´¾æœºåˆ¶ï¼Œä¼šå…ˆè®©åŒäº²å»å°è¯•æ‰§è¡Œï¼Œå› ä¸ºè¦åŠ è½½çš„ç±»ç¬¦åˆç³»ç»Ÿç±»åŠ è½½å™¨åŠ è½½è¦æ±‚ï¼Œæ‰€ä»¥æ˜¯ç³»ç»Ÿç±»åŠ è½½å™¨åŠ è½½çš„ã€‚</p><hr><p>æ‰€ä»¥ç³»ç»Ÿç±»åŠ è½½å™¨æ˜¯ç±»<code>indi.greenhat.jvm.Test</code>çš„å®šä¹‰ç±»åŠ è½½å™¨ï¼Œè€Œç³»ç»Ÿç±»åŠ è½½å™¨å’Œ<code>customClassLoader</code>æ˜¯ç±»<code>indi.greenhat.jvm.Test</code>çš„åˆå§‹ç±»åŠ è½½å™¨</p><blockquote><p>è‹¥ä¸€ä¸ªç±»åŠ è½½å™¨èƒ½å¤ŸæˆåŠŸåŠ è½½Testç±»ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»åŠ è½½å™¨è¢«ç§°ä¸ºå®šä¹‰ç±»åŠ è½½å™¨ï¼Œæ‰€æœ‰èƒ½å¤ŸæˆåŠŸè¿”å›Classå¯¹è±¡å¼•ç”¨çš„ç±»åŠ è½½å™¨ï¼ˆåŒ…æ‹¬å®šä¹‰ç±»åŠ è½½å™¨ï¼‰éƒ½è¢«ç§°ä¸ºåˆå§‹ç±»åŠ è½½å™¨</p></blockquote><h1 id="ç®€å•ç±»åŠ è½½å™¨ä¿®æ”¹2"><a href="#ç®€å•ç±»åŠ è½½å™¨ä¿®æ”¹2" class="headerlink" title="ç®€å•ç±»åŠ è½½å™¨ä¿®æ”¹2"></a>ç®€å•ç±»åŠ è½½å™¨ä¿®æ”¹2</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> indi.greenhat.jvm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç”¨æˆ·è‡ªå®šä¹‰ç±»åŠ è½½å™¨å¿…é¡»ç»§æ‰¿ClassLoaderç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomClassLoader</span> <span class="keyword">extends</span> <span class="title">ClassLoader</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String classLoaderName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç±»çš„æ‰©å±•å</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String fileExtension = <span class="string">&quot;.class&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>  String path;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPath</span><span class="params">(String path)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.path = path;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomClassLoader</span><span class="params">(String classLoaderName)</span></span>&#123;</span><br><span class="line">        <span class="comment">//ä½¿ç”¨æ–¹æ³•getSystemClassLoaderï¼ˆï¼‰è¿”å›çš„ClassLoaderä½œä¸ºçˆ¶ç±»åŠ è½½å™¨åˆ›å»ºæ–°çš„ç±»åŠ è½½å™¨</span></span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.classLoaderName = classLoaderName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomClassLoader</span><span class="params">(String classLoaderName, ClassLoader parent)</span></span>&#123;</span><br><span class="line">        <span class="comment">//ä½¿ç”¨æŒ‡å®šçš„çˆ¶ç±»åŠ è½½å™¨åˆ›å»ºæ–°çš„ç±»åŠ è½½å™¨ä»¥è¿›è¡Œå§”æ´¾</span></span><br><span class="line">        <span class="keyword">super</span>(parent);</span><br><span class="line">        <span class="keyword">this</span>.classLoaderName = classLoaderName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt; findClass(String className) <span class="keyword">throws</span> ClassNotFoundException&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;findClass invoked: &quot;</span> + className);</span><br><span class="line">        System.out.println(<span class="string">&quot;class loader name: &quot;</span> + <span class="keyword">this</span>.classLoaderName);</span><br><span class="line">        <span class="keyword">byte</span>[] data = <span class="keyword">this</span>.loadClassDate(className);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.defineClass(className, data, <span class="number">0</span>, data.length);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">byte</span>[] loadClassDate(String name)&#123;</span><br><span class="line">        InputStream is = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">byte</span>[] data = <span class="keyword">null</span>;</span><br><span class="line">        ByteArrayOutputStream baos = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//è½¬æ¢ä¸ºç£ç›˜å¯¹åº”çš„åœ°å€</span></span><br><span class="line">            name = name.replace(<span class="string">&quot;.&quot;</span>, <span class="string">&quot;/&quot;</span>);</span><br><span class="line">            is = <span class="keyword">new</span> FileInputStream(<span class="keyword">new</span> File(<span class="keyword">this</span>.path+ name + <span class="keyword">this</span>.fileExtension));</span><br><span class="line">            baos = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> ch = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>((ch = is.read()) != -<span class="number">1</span>)&#123;</span><br><span class="line">                baos.write(ch);</span><br><span class="line">            &#125;</span><br><span class="line">            data = baos.toByteArray();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                is.close();</span><br><span class="line">                baos.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        CustomClassLoader loader1 = <span class="keyword">new</span> CustomClassLoader(<span class="string">&quot;loader1&quot;</span>);</span><br><span class="line">        loader1.setPath(<span class="string">&quot;/home/cc/IdeaProjects/test/out/production/test/&quot;</span>);</span><br><span class="line">        Class&lt;?&gt; clazz = loader1.loadClass(<span class="string">&quot;indi.greenhat.jvm.Test&quot;</span>);</span><br><span class="line">        Object object = clazz.newInstance();</span><br><span class="line"></span><br><span class="line">        System.out.println(object);</span><br><span class="line">        System.out.println(clazz.hashCode());</span><br><span class="line">        System.out.println(<span class="string">&quot;----getClassLoader-----&quot;</span>);</span><br><span class="line">        System.out.println(clazz.getClassLoader());</span><br><span class="line">        System.out.println();</span><br><span class="line"></span><br><span class="line">        CustomClassLoader loader2 = <span class="keyword">new</span> CustomClassLoader(<span class="string">&quot;loader2&quot;</span>);</span><br><span class="line">        loader2.setPath(<span class="string">&quot;/home/cc/IdeaProjects/test/out/production/test/&quot;</span>);</span><br><span class="line">        Class&lt;?&gt; clazz2 = loader2.loadClass(<span class="string">&quot;indi.greenhat.jvm.Test&quot;</span>);</span><br><span class="line">        Object object2 = clazz2.newInstance();</span><br><span class="line"></span><br><span class="line">        System.out.println(object2);</span><br><span class="line">        System.out.println(clazz2.hashCode());</span><br><span class="line">        System.out.println(<span class="string">&quot;----getClassLoader-----&quot;</span>);</span><br><span class="line">        System.out.println(clazz2.getClassLoader());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">indi.greenhat.jvm.Test@74a14482</span><br><span class="line"><span class="number">356573597</span></span><br><span class="line">----getClassLoader-----</span><br><span class="line">sun.misc.Launcher$AppClassLoader@18b4aac2</span><br><span class="line"></span><br><span class="line">indi.greenhat.jvm.Test@677327b6</span><br><span class="line"><span class="number">356573597</span></span><br><span class="line">----getClassLoader-----</span><br><span class="line">sun.misc.Launcher$AppClassLoader@18b4aac2</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å®šä¹‰çš„ä¸¤ä¸ªåŠ è½½å™¨æ˜¯ä¸€æ ·å¹¶ä¸”æ˜¯ç”±ç³»ç»Ÿç±»åŠ è½½å™¨åŠ è½½çš„ã€‚å‰é¢æ‰€è®²ï¼Œå¦‚æœè¯¥ç±»è¢«åŠ è½½è¿‡äº†ï¼Œé‚£ä¹ˆå°±ä¸ä¼šé‡æ–°åŠ è½½äº†ã€‚</p><hr><p>æ¥ç€ç¨ä½œä¿®æ”¹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        CustomClassLoader loader1 = <span class="keyword">new</span> CustomClassLoader(<span class="string">&quot;loader1&quot;</span>);</span><br><span class="line">        loader1.setPath(<span class="string">&quot;/home/cc/test/&quot;</span>);</span><br><span class="line">        Class&lt;?&gt; clazz = loader1.loadClass(<span class="string">&quot;indi.greenhat.jvm.Test&quot;</span>);</span><br><span class="line">        Object object = clazz.newInstance();</span><br><span class="line"></span><br><span class="line">        System.out.println(object);</span><br><span class="line">        System.out.println(clazz.hashCode());</span><br><span class="line">        System.out.println(<span class="string">&quot;----getClassLoader-----&quot;</span>);</span><br><span class="line">        System.out.println(clazz.getClassLoader());</span><br><span class="line">        System.out.println();</span><br><span class="line"></span><br><span class="line">        CustomClassLoader loader2 = <span class="keyword">new</span> CustomClassLoader(<span class="string">&quot;loader1&quot;</span>);</span><br><span class="line">        loader2.setPath(<span class="string">&quot;/home/cc/test/&quot;</span>);</span><br><span class="line">        Class&lt;?&gt; clazz2 = loader2.loadClass(<span class="string">&quot;indi.greenhat.jvm.Test&quot;</span>);</span><br><span class="line">        Object object2 = clazz.newInstance();</span><br><span class="line"></span><br><span class="line">        System.out.println(object2);</span><br><span class="line">        System.out.println(clazz2.hashCode());</span><br><span class="line">        System.out.println(<span class="string">&quot;----getClassLoader-----&quot;</span>);</span><br><span class="line">        System.out.println(clazz2.getClassLoader());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">findClass invoked: indi.greenhat.jvm.Test</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">loader</span> <span class="title">name</span>: <span class="title">loader1</span></span></span><br><span class="line"><span class="class"><span class="title">indi</span>.<span class="title">greenhat</span>.<span class="title">jvm</span>.<span class="title">Test</span>@677327<span class="title">b6</span></span></span><br><span class="line"><span class="class">21685669</span></span><br><span class="line"><span class="class">----<span class="title">getClassLoader</span>-----</span></span><br><span class="line"><span class="class"><span class="title">indi</span>.<span class="title">greenhat</span>.<span class="title">jvm</span>.<span class="title">CustomClassLoader</span>@74<span class="title">a14482</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">findClass</span> <span class="title">invoked</span>: <span class="title">indi</span>.<span class="title">greenhat</span>.<span class="title">jvm</span>.<span class="title">Test</span></span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">loader</span> <span class="title">name</span>: <span class="title">loader1</span></span></span><br><span class="line"><span class="class"><span class="title">indi</span>.<span class="title">greenhat</span>.<span class="title">jvm</span>.<span class="title">Test</span>@135<span class="title">fbaa4</span></span></span><br><span class="line"><span class="class">1173230247</span></span><br><span class="line"><span class="class">----<span class="title">getClassLoader</span>-----</span></span><br><span class="line"><span class="class"><span class="title">indi</span>.<span class="title">greenhat</span>.<span class="title">jvm</span>.<span class="title">CustomClassLoader</span>@7<span class="title">f31245a</span></span></span><br></pre></td></tr></table></figure><p>è¿™ä¸€æ¬¡æˆ‘ä»¬æŠŠ<code>Test.class</code>ç§»åŠ¨åˆ°<code>/home/cc/test/indi/greenhat/jvm</code>ä¸‹é¢ï¼Œç„¶åå°è¯•å»è¯¥ç›®å½•ä¸‹åŠ è½½<code>Test.class</code>ï¼Œæˆ‘ä»¬å‘ç°ï¼Œæ­¤æ—¶ç±»åŠ è½½å™¨æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨ï¼Œå› ä¸ºè¯¥ç±»ä¸æ˜¯é¡¹ç›®ç›®å½•ä¸‹çš„ï¼Œæ‰€ä»¥ä¸èƒ½ç”±ç³»ç»Ÿç±»åŠ è½½å™¨åŠ è½½ï¼Œå¹¶ä¸”å‘ç°ç±»åŠ è½½å™¨çš„<code>hashCodeå€¼ä¸ä¸€æ ·</code>ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>è¿™æ—¶å€™å°±æ¶‰åŠåˆ°äº†ç±»çš„å‘½åç©ºé—´ã€‚</p><blockquote><ul><li>æ¯ä¸ªç±»åŠ è½½å™¨éƒ½æœ‰è‡ªå·±çš„å‘½åç©ºé—´ï¼Œå‘½åç©ºé—´ç”±è¯¥åŠ è½½å™¨åŠæ‰€æœ‰çˆ¶åŠ è½½å™¨æ‰€åŠ è½½çš„ç±»ç»„æˆ</li><li>åœ¨åŒä¸€ä¸ªå‘½åç©ºé—´ä¸­ï¼Œä¸ä¼šå‡ºç°ç±»çš„å®Œæ•´åå­—ï¼ˆåŒ…æ‹¬ç±»çš„åŒ…åï¼‰ç›¸åŒçš„ä¸¤ä¸ªç±»</li><li>åœ¨ä¸åŒçš„å‘½åç©ºé—´ä¸­ï¼Œæœ‰å¯èƒ½ä¼šä¼šå‡ºç°ç±»çš„å®Œæ•´åå­—ï¼ˆåŒ…æ‹¬ç±»çš„åŒ…åï¼‰ç›¸åŒçš„ä¸¤ä¸ªç±»</li></ul></blockquote><p>å› ä¸ºnewçš„ä¸¤ä¸ªåŠ è½½å™¨å±äºä¸åŒçš„å‘½åç©ºé—´ï¼Œæ‰€ä»¥<code>hashCode</code>çš„å€¼ä¸ä¸€æ ·ã€‚</p><hr><p>ï¼ˆé¡¹ç›®æ²¡æœ‰Test.classå‰æï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CustomClassLoader loader2 = <span class="keyword">new</span> CustomClassLoader(<span class="string">&quot;loader1&quot;</span>);</span><br></pre></td></tr></table></figure><p>æ”¹ä¸º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å°†loader1ä½œä¸ºloader2çš„çˆ¶åŠ è½½å™¨</span></span><br><span class="line">CustomClassLoader loader2 = <span class="keyword">new</span> CustomClassLoader(<span class="string">&quot;loader2&quot;</span>ï¼Œ loader1);</span><br></pre></td></tr></table></figure><p>ç»“æœä¼šè¾“å‡º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">findClass invoked: indi.greenhat.jvm.Test</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">loader</span> <span class="title">name</span>: <span class="title">loader1</span></span></span><br><span class="line"><span class="class"><span class="title">indi</span>.<span class="title">greenhat</span>.<span class="title">jvm</span>.<span class="title">Test</span>@677327<span class="title">b6</span></span></span><br><span class="line"><span class="class">21685669</span></span><br><span class="line"><span class="class">----<span class="title">getClassLoader</span>-----</span></span><br><span class="line"><span class="class"><span class="title">indi</span>.<span class="title">greenhat</span>.<span class="title">jvm</span>.<span class="title">CustomClassLoader</span>@74<span class="title">a14482</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">indi</span>.<span class="title">greenhat</span>.<span class="title">jvm</span>.<span class="title">Test</span>@7<span class="title">f31245a</span></span></span><br><span class="line"><span class="class">21685669</span></span><br><span class="line"><span class="class">----<span class="title">getClassLoader</span>-----</span></span><br><span class="line"><span class="class"><span class="title">indi</span>.<span class="title">greenhat</span>.<span class="title">jvm</span>.<span class="title">CustomClassLoader</span>@74<span class="title">a14482</span></span></span><br></pre></td></tr></table></figure><p>åŠ è½½<code>Test</code>çš„æ˜¯<code>loader1</code>ï¼Œæ‰€ä»¥ä¼šæ‰§è¡Œ<code>findClass</code>é‡Œé¢ä¸¤ä¸ªè¾“å‡ºè¯­å¥ã€‚<code>loader1</code>ä¸<code>laoder2</code>åœ¨åŒä¸€å‘½åç©ºé—´ï¼Œåˆå› ä¸º<code>loader1</code>å·²ç»åŠ è½½è¿‡äº†ï¼Œæ‰€ä»¥ç¬¬äºŒæ¬¡è¾“å‡ºçš„å°±æ˜¯ç›´æ¥æ˜¯<code>laoder1</code>å·²ç»åŠ è½½è¿‡çš„ç»“æœ</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jvm </tag>
            
            <tag> ç±»çš„åŠ è½½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®¹æ–¥ä¸æŠ½å±‰å®šç†</title>
      <link href="/2019/05/06/%E5%AE%B9%E6%96%A5%E4%B8%8E%E6%8A%BD%E5%B1%89%E5%AE%9A%E7%90%86/"/>
      <url>/2019/05/06/%E5%AE%B9%E6%96%A5%E4%B8%8E%E6%8A%BD%E5%B1%89%E5%AE%9A%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>å®¹æ–¥ä¸æŠ½å±‰å®šç†</p><span id="more"></span><h1 id="å®¹æ–¥å®šç†"><a href="#å®¹æ–¥å®šç†" class="headerlink" title="å®¹æ–¥å®šç†"></a>å®¹æ–¥å®šç†</h1><h2 id="å®šç†"><a href="#å®šç†" class="headerlink" title="å®šç†"></a>å®šç†</h2><p>å‚è€ƒï¼šç™¾åº¦ç™¾ç§‘</p><p>åœ¨è®¡æ•°æ—¶ï¼Œå¿…é¡»æ³¨æ„æ²¡æœ‰é‡å¤ï¼Œæ²¡æœ‰é—æ¼ã€‚ä¸ºäº†ä½¿é‡å éƒ¨åˆ†ä¸è¢«é‡å¤è®¡ç®—ï¼Œäººä»¬ç ”ç©¶å‡ºä¸€ç§æ–°çš„è®¡æ•°æ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šå…ˆä¸è€ƒè™‘é‡å çš„æƒ…å†µï¼ŒæŠŠåŒ…å«äºæŸå†…å®¹ä¸­çš„æ‰€æœ‰å¯¹è±¡çš„æ•°ç›®å…ˆè®¡ç®—å‡ºæ¥ï¼Œç„¶åå†æŠŠè®¡æ•°æ—¶é‡å¤è®¡ç®—çš„æ•°ç›®æ’æ–¥å‡ºå»ï¼Œä½¿å¾—è®¡ç®—çš„ç»“æœæ—¢æ— é—æ¼åˆæ— é‡å¤ï¼Œè¿™ç§è®¡æ•°çš„æ–¹æ³•ç§°ä¸ºå®¹æ–¥åŸç†ã€‚</p><ul><li><p>ä¸¤ä¸ªé›†åˆçš„å®¹æ–¥å…³ç³»å…¬å¼ï¼šAâˆªB =|AâˆªB| = |A|+|B| - |Aâˆ©B |(âˆ©ï¼šé‡åˆçš„éƒ¨åˆ†ï¼‰</p></li><li><p>ä¸‰ä¸ªé›†åˆçš„å®¹æ–¥å…³ç³»å…¬å¼ï¼š|AâˆªBâˆªC| = |A|+|B|+|C| - |Aâˆ©B| - |Bâˆ©C| - |Câˆ©A| + |Aâˆ©Bâˆ©C|</p></li></ul><p>ä¾‹å¦‚ä¸‰ä¸ªé›†åˆçš„å…³ç³»ï¼š</p><p><img src="/2019/05/06/%E5%AE%B9%E6%96%A5%E4%B8%8E%E6%8A%BD%E5%B1%89%E5%AE%9A%E7%90%86/1.png" alt></p><p>(å›¾é‡Œé¢çš„A+B+Cåˆ’çº¢è‰²éƒ¨åˆ†åº”è¯¥æ˜¯åˆ’å»{2,3,4,2,1,2}ï¼Œå³åˆ’å»Aâˆ©Bï¼ŒBâˆ©Cï¼ŒAâˆ©C)</p><ul><li>ä¸€èˆ¬æƒ…å†µï¼š</li></ul><p><img src="/2019/05/06/%E5%AE%B9%E6%96%A5%E4%B8%8E%E6%8A%BD%E5%B1%89%E5%AE%9A%E7%90%86/2.png" alt></p><h2 id="51nod1284"><a href="#51nod1284" class="headerlink" title="51nod1284"></a><a href="https://www.51nod.com/Challenge/Problem.html#!#problemId=1284">51nod1284</a></h2><p><img src="/2019/05/06/%E5%AE%B9%E6%96%A5%E4%B8%8E%E6%8A%BD%E5%B1%89%E5%AE%9A%E7%90%86/3.png" alt></p><p>å®¹æ–¥å®šç†ï¼Œå…ˆæ±‚åé¢ï¼Œå³1-Næœ‰å¤šå°‘æ˜¯2 3 5 7çš„å€æ•°ï¼Œç„¶åå†ç”¨æ€»æ•°å‡å»åé¢çš„æ•°é‡å³ä¸ºæ‰€æ±‚ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnt = A2+A3+A5+A7-(A23+A25+A27+A35+A37+A57)+(A235+A237+A257+A357)-A2357</span><br></pre></td></tr></table></figure><p>A2è¡¨ç¤ºè¢«2æ•´é™¤çš„ä¸ªæ•°  å³N/2  A23ä¸ºå³è¢«2åˆè¢«3æ•´é™¤çš„ä¸ªæ•°å³N/6</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">15ms</span></span><br><span class="line"><span class="comment">1912KB </span></span><br><span class="line"><span class="comment">c++11</span></span><br><span class="line"><span class="comment">2019/5/7 8:10:44</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>, &amp;n);</span><br><span class="line">    ll cnt = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line"><span class="comment">//A2+A3+A5+A7</span></span><br><span class="line">    cnt += (n/<span class="number">2</span> + n/<span class="number">3</span> + n/<span class="number">5</span> + n/<span class="number">7</span>); </span><br><span class="line">    <span class="comment">//A23+A25+A27+A35+A37+A57</span></span><br><span class="line">    cnt -= (n/<span class="number">6</span> + n/<span class="number">10</span> + n/<span class="number">14</span> + n/<span class="number">15</span> + n/<span class="number">21</span> + n/<span class="number">35</span>); </span><br><span class="line">    <span class="comment">//A235+A237+A257+A357</span></span><br><span class="line">    cnt += (n/<span class="number">30</span> + n/<span class="number">42</span> + n/<span class="number">70</span> + n/<span class="number">105</span>);</span><br><span class="line">    <span class="comment">//A2357</span></span><br><span class="line">    cnt -= (n/<span class="number">210</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, n - cnt);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ç”µç¯æ³¡"><a href="#ç”µç¯æ³¡" class="headerlink" title="ç”µç¯æ³¡"></a><a href="http://120.78.128.11/Problem.jsp?pid=2332">ç”µç¯æ³¡</a></h2><p><img src="/2019/05/06/%E5%AE%B9%E6%96%A5%E4%B8%8E%E6%8A%BD%E5%B1%89%E5%AE%9A%E7%90%86/4.png" alt></p><p>å› ä¸ºæœ€åæ±‚çš„æ˜¯äº®çš„ä¸ªæ•°ã€‚é‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦å…³å¿ƒaå’Œaçš„å€æ•°ï¼Œbå’Œbçš„å€æ•°ï¼Œcå’Œcçš„å€æ•°ï¼Œå…¶ä»–æ•°æ²¡æœ‰çš„ç”µç¯æ³¡æ²¡æœ‰è¢«ç‚¹äº®ï¼Œæ‰€ä»¥å°±ä¸ç”¨å¤„ç†</p><p>ç‚¹äº®ä¸‰æ¬¡æƒ…å†µå¦‚ä¸‹ï¼š</p><p><img src="/2019/05/06/%E5%AE%B9%E6%96%A5%E4%B8%8E%E6%8A%BD%E5%B1%89%E5%AE%9A%E7%90%86/5.png" alt></p><p>é‚£ä¹ˆæœ€ç»ˆå˜æˆäº†æ±‚è¢«æŸ“è‰²çš„é¢ç§¯</p><p><img src="/2019/05/06/%E5%AE%B9%E6%96%A5%E4%B8%8E%E6%8A%BD%E5%B1%89%E5%AE%9A%E7%90%86/6.png" alt></p><p>æˆ‘ä»¬æ ¹æ®å®¹æ–¥å®šç†å¯ä»¥å°è¯•å»æ¨ç†æ±‚æ³•ï¼Œé¦–å…ˆç»“æœé‡Œé¢æ²¡æœ‰2ï¼Œè€Œ2åˆæ˜¯aâˆ©bçš„ç»“æœï¼Œæ‰€ä»¥å¯ä»¥å°è¯•å»æ‰2ä¸ªaâˆ©bï¼Œå¦‚æ­¤ç±»æ¨ï¼Œæ¨å‡ºç­”æ¡ˆä¸º<code>a+b+c-2ab-2bc-2ac+4abcï¼ˆab,bc,acä»£è¡¨çš„æ˜¯è¿™ä¸¤ä¸ªæ•°çš„å€æ•°ï¼‰</code>ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥æ ¹æ®å›¾å½¢å…³ç³»ç»“åˆå®¹æ–¥å®šç†æ¥æ±‚ç»“æœçš„è¡¨è¾¾å¼ã€‚</p><hr><p>é‚£ä¹ˆå€æ•°çš„æ•°é‡å¦‚ä½•æ±‚ï¼Ÿ</p><p>å‡è®¾æ±‚1-10é‡Œé¢3çš„å€æ•°æœ‰å‡ ä¸ªï¼Œè‡ªç„¶å¯ä»¥ç”¨åˆ°10/3</p><p>å¦‚æœæ˜¯2ä¸ªæ•°å‘¢ï¼Ÿ</p><p>å‡è®¾æ±‚1-50é‡Œé¢3,5çš„å€æ•°æœ‰å‡ ä¸ªï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥50/(3*5)=3ï¼š{15,30,45}</p><p>é‚£ä¹ˆæ±‚4,6å‘¢ï¼Œè¿˜èƒ½50/(4*6)=2å—ï¼Ÿ</p><p>æˆ‘ä»¬çŸ¥é“1-50ä¸­ï¼Œ4,6çš„å€æ•°æœ‰{12,24,36,48}ï¼Œæ˜æ˜¾ä¸å¯¹</p><p>å› ä¸º4,6ä¸æ˜¯äº’è´¨ï¼Œæ‰€ä»¥ç»“æœåº”è¯¥æ˜¯<code>50*gcd(4,6)/(4*6)</code></p><p>å› ä¸ºæœ¬é¢˜ç›®çš„aï¼Œbï¼Œcéƒ½æ˜¯äº’è´¨ï¼Œæ‰€ä»¥å°±ä¸ç”¨è€ƒè™‘è¿™ç§æƒ…å†µ</p><p>ç„¶åï¼Œå› ä¸ºç»™å‡ºçš„æ•°çš„èŒƒå›´è¾ƒå¤§ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†*å˜ä¸º/</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">0MS6348KB2082019-05-07 17:18:01</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, t;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;t);</span><br><span class="line">    <span class="keyword">int</span> a, b, c;</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">        <span class="keyword">int</span> ans = n/a+n/b+n/c - <span class="number">2</span>*(n/a/b + n/b/c + n/a/c) + <span class="number">4</span>*(n/a/b/c);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æŠ½å±‰å®šç†"><a href="#æŠ½å±‰å®šç†" class="headerlink" title="æŠ½å±‰å®šç†"></a>æŠ½å±‰å®šç†</h1><h2 id="å®šç†-1"><a href="#å®šç†-1" class="headerlink" title="å®šç†"></a>å®šç†</h2><p>å‚è€ƒï¼šç™¾åº¦ç™¾ç§‘</p><p>æ¡Œä¸Šæœ‰åä¸ªè‹¹æœï¼Œè¦æŠŠè¿™åä¸ªè‹¹æœæ”¾åˆ°ä¹ä¸ªæŠ½å±‰é‡Œï¼Œæ— è®ºæ€æ ·æ”¾ï¼Œæˆ‘ä»¬ä¼šå‘ç°è‡³å°‘ä¼šæœ‰ä¸€ä¸ªæŠ½å±‰é‡Œé¢è‡³å°‘æ”¾ä¸¤ä¸ªè‹¹æœã€‚è¿™ä¸€ç°è±¡å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„â€œæŠ½å±‰åŸç†â€ã€‚<br>æŠ½å±‰åŸç†çš„ä¸€èˆ¬å«ä¹‰ä¸ºï¼šâ€œå¦‚æœæ¯ä¸ªæŠ½å±‰ä»£è¡¨ä¸€ä¸ªé›†åˆï¼Œæ¯ä¸€ä¸ªè‹¹æœå°±å¯ä»¥ä»£è¡¨ä¸€ä¸ªå…ƒç´ ï¼Œå‡å¦‚æœ‰n+1ä¸ªå…ƒç´ æ”¾åˆ°nä¸ªé›†åˆä¸­å»ï¼Œå…¶ä¸­å¿…å®šæœ‰ä¸€ä¸ªé›†åˆé‡Œè‡³å°‘æœ‰ä¸¤ä¸ªå…ƒç´ ã€‚â€<br>æŠ½å±‰åŸç†æœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºé¸½å·¢åŸç†ã€‚å®ƒæ˜¯ç»„åˆæ•°å­¦ä¸­ä¸€ä¸ªé‡è¦çš„åŸç†ã€‚</p><h2 id="ç¬¬ä¸€æŠ½å±‰å®šç†"><a href="#ç¬¬ä¸€æŠ½å±‰å®šç†" class="headerlink" title="ç¬¬ä¸€æŠ½å±‰å®šç†"></a>ç¬¬ä¸€æŠ½å±‰å®šç†</h2><ul><li><p>åŸç†1ï¼š æŠŠå¤šäºn+1ä¸ªçš„ç‰©ä½“æ”¾åˆ°nä¸ªæŠ½å±‰é‡Œï¼Œåˆ™è‡³å°‘æœ‰ä¸€ä¸ªæŠ½å±‰é‡Œçš„ä¸œè¥¿ä¸å°‘äºä¸¤ä»¶ã€‚</p></li><li><p>åŸç†2 ï¼šæŠŠå¤šäº(mn+1ï¼Œnä¸ä¸º0)ä¸ªçš„ç‰©ä½“æ”¾åˆ°nä¸ªæŠ½å±‰é‡Œï¼Œåˆ™è‡³å°‘æœ‰ä¸€ä¸ªæŠ½å±‰é‡Œæœ‰ä¸å°‘äºï¼ˆm+1ï¼‰çš„ç‰©ä½“ã€‚</p></li><li><p>åŸç†3 ï¼šæŠŠæ— ç©·å¤šä»¶ç‰©ä½“æ”¾å…¥nä¸ªæŠ½å±‰ï¼Œåˆ™è‡³å°‘æœ‰ä¸€ä¸ªæŠ½å±‰é‡Œæœ‰æ— ç©·ä¸ªç‰©ä½“ã€‚</p></li></ul><h2 id="ç¬¬äºŒæŠ½å±‰å®šç†"><a href="#ç¬¬äºŒæŠ½å±‰å®šç†" class="headerlink" title="ç¬¬äºŒæŠ½å±‰å®šç†"></a>ç¬¬äºŒæŠ½å±‰å®šç†</h2><p>æŠŠ(mn-1)ä¸ªç‰©ä½“æ”¾å…¥nä¸ªæŠ½å±‰ä¸­ï¼Œå…¶ä¸­å¿…æœ‰ä¸€ä¸ªæŠ½å±‰ä¸­è‡³å¤šæœ‰(m-1)ä¸ªç‰©ä½“(ä¾‹å¦‚ï¼Œå°†3Ã—5-1=14ä¸ªç‰©ä½“æ”¾å…¥5ä¸ªæŠ½å±‰ä¸­ï¼Œåˆ™å¿…å®šæœ‰ä¸€ä¸ªæŠ½å±‰ä¸­çš„ç‰©ä½“æ•°å°‘äºç­‰äº3-1=2)</p><h2 id="æœ€å·®åŸåˆ™"><a href="#æœ€å·®åŸåˆ™" class="headerlink" title="æœ€å·®åŸåˆ™"></a>æœ€å·®åŸåˆ™</h2><p>æœ€å·®åŸåˆ™ï¼Œå³è€ƒè™‘æ‰€æœ‰å¯èƒ½æƒ…å†µä¸­ï¼Œæœ€ä¸åˆ©äºæŸä»¶äº‹æƒ…å‘ç”Ÿçš„æƒ…å†µã€‚</p><p>ä¾‹å¦‚ï¼Œæœ‰300äººåˆ°æ‹›è˜ä¼šæ±‚èŒï¼Œå…¶ä¸­è½¯ä»¶è®¾è®¡æœ‰100äººï¼Œå¸‚åœºè¥é”€æœ‰80äººï¼Œè´¢åŠ¡ç®¡ç†æœ‰70äººï¼ŒäººåŠ›èµ„æºç®¡ç†æœ‰50äººã€‚é‚£ä¹ˆè‡³å°‘æœ‰å¤šå°‘äººæ‰¾åˆ°å·¥ä½œæ‰èƒ½ä¿è¯ä¸€å®šæœ‰70äººæ‰¾çš„å·¥ä½œä¸“ä¸šç›¸åŒå‘¢ï¼Ÿ</p><p>æ­¤æ—¶æˆ‘ä»¬è€ƒè™‘çš„æœ€å·®æƒ…å†µä¸ºï¼šè½¯ä»¶è®¾è®¡ã€å¸‚åœºè¥é”€å’Œè´¢åŠ¡ç®¡ç†å„å½•å–69äººï¼ŒäººåŠ›èµ„æºç®¡ç†çš„50äººå…¨éƒ¨å½•å–ï¼Œåˆ™æ­¤æ—¶å†å½•å–1äººå°±èƒ½ä¿è¯æœ‰70äººæ‰¾åˆ°çš„å·¥ä½œä¸“ä¸šç›¸åŒã€‚</p><p>ï¼ˆäººåŠ›èµ„æºç®¡ç†å…¨éƒ¨å½•å–ï¼Œå…¶ä»–å„å½•å–69ï¼Œå†å¤š1äººå°±å¯ä»¥ä¿è¯æœ‰70äººå·¥ä½œä¸“ä¸šç›¸åŒï¼Œå› ä¸ºè¿™1ä¸ªäººä¸€å®šæ˜¯è½¯ä»¶è®¾è®¡ï¼Œè´¢åŠ¡ç®¡ç†ï¼Œå¸‚åœºè¥é”€çš„ï¼Œä¸ä¼šæ˜¯äººåŠ›èµ„æºç®¡ç†çš„ï¼Œæ‰€ä»¥å†åŠ ä¸€ä¸ªäººå°±å¯ä»¥ä¿è¯äº†ï¼‰</p><p>å› æ­¤è‡³å°‘éœ€è¦69*3+50+1=258äººã€‚</p><h2 id="Nyoj417æ­»ç¥æ¥äº†"><a href="#Nyoj417æ­»ç¥æ¥äº†" class="headerlink" title="Nyoj417æ­»ç¥æ¥äº†"></a><a href="http://nyoj.top/problem/417">Nyoj417æ­»ç¥æ¥äº†</a></h2><p><img src="/2019/05/06/%E5%AE%B9%E6%96%A5%E4%B8%8E%E6%8A%BD%E5%B1%89%E5%AE%9A%E7%90%86/nyoj417.png" alt></p><p>å‡å¦‚å­˜åœ¨å€æ•°å…³ç³»ï¼Œæœ‰å€æ•°å…³ç³»çš„å½“ä¸ºä¸€ç»„ã€‚</p><ul><li><p>å½“nä¸ºå¶æ•°ï¼Œæœ€å¤šæœ‰n/2ç»„åˆ†ç»„(æŒ‰ç…§2çš„å€æ•°å…³ç³»åˆ†ç»„)</p></li><li><p>å‡å¦‚æ˜¯å¥‡æ•°ï¼Œæœ€å¤šæœ‰n/2+1ç»„åˆ†ç»„</p></li></ul><p>ç»Ÿä¸€å†™ä¸ºp=n/2+(n&amp;1)ç»„</p><p>ï¼ˆn&amp;1ï¼šnä¸ºå¥‡æ•°æ—¶ç»“æœä¸º1ï¼Œnä¸ºå¶æ•°ç»“æœä¸º0ï¼‰</p><p>ä¾‹å¦‚ï¼š</p><p>å½“n=20æ—¶ï¼Œå¯åˆ†ç»„ä¸º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">A1 = &#123;1, 2, 4ï¼Œ8, 16&#125;</span><br><span class="line">A2 = &#123;3, 6, 12&#125;</span><br><span class="line">A3 = &#123;5, 10, 20&#125;</span><br><span class="line">A4 = &#123;15&#125;</span><br><span class="line">A5 = &#123;7, 14&#125;</span><br><span class="line">A6 = &#123;9ï¼Œ18&#125;</span><br><span class="line">A7 = &#123;11&#125;</span><br><span class="line">A8 = &#123;13&#125;</span><br><span class="line">A9 = &#123;17&#125;</span><br><span class="line">A10 = &#123;19&#125; </span><br><span class="line">å…±åç»„</span><br></pre></td></tr></table></figure><p>å­˜åœ¨æœ€åæƒ…å†µï¼Œæˆ‘ä»¬å–{19, 17, 13, 11, 18, 14, 15, 20, 12, 16}ï¼Œä¹Ÿå°±æ˜¯å–æ¯ä¸€ç»„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œè¿™æ ·å°±ä¸å­˜åœ¨ä»»æ„ä¸€ä¸ªæ•°æ˜¯å¦å¤–ä¸€ä¸ªæ•°çš„å€æ•°ï¼Œæ‰€ä»¥mè‡³å°‘å¾—å–11ï¼Œå³m&gt;n/2ã€‚</p><p><strong>å–11æ—¶ï¼Œæ¯”å–10æ—¶å¤šä¸€ä¸ªæ•°ï¼Œé‚£ä¹ˆå°±å¯èƒ½è‡³å°‘æœ‰2ä¸ªæ•°å‡ºç°åœ¨åŒä¸€ä¸ªå€æ•°é›†åˆä¸­ï¼Œå› ä¸ºå–10æ—¶æ˜¯æ‰€æœ‰ç»„ä¸­éƒ½å–ä¸€ä¸ªæ•°,ã€‚æ­£å¥½å¯¹åº”äº†æŠ½å±‰å®šç†ï¼Œæ— è®ºæ€ä¹ˆæ”¾è‡³å°‘ä¼šæœ‰ä¸€ä¸ªæŠ½å±‰é‡Œé¢è‡³å°‘æ”¾ä¸¤ä¸ªè‹¹æœã€‚</strong></p><p>å½“n=21æ—¶ï¼ŒåŠ ä¸€ä¸ªåˆ†ç»„A11={21}ï¼Œé‚£ä¹ˆmå¾—å–12ï¼Œå³m&gt;(n/2+1)</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">5 ms 1156 KB</span></span><br><span class="line"><span class="comment">2019-05-06 21:34:12</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m) != EOF)</span><br><span class="line">    &#123;</span><br><span class="line">        n = n/<span class="number">2</span>+(n&amp;<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span>(m &gt; n)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;YES\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;NO\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°å­¦çŸ¥è¯† </tag>
            
            <tag> å®¹æ–¥å®šç† </tag>
            
            <tag> æŠ½å±‰å®šç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè™šæ‹Ÿæœºç¬”è®°-ClassLoderéƒ¨åˆ†æ–‡æ¡£è§£è¯»</title>
      <link href="/2019/05/04/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-ClassLoder%E9%83%A8%E5%88%86%E6%96%87%E6%A1%A3%E8%A7%A3%E8%AF%BB/"/>
      <url>/2019/05/04/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-ClassLoder%E9%83%A8%E5%88%86%E6%96%87%E6%A1%A3%E8%A7%A3%E8%AF%BB/</url>
      
        <content type="html"><![CDATA[<p>ClassLoderéƒ¨åˆ†æ–‡æ¡£è§£è¯»</p><span id="more"></span><h1 id="Documentation"><a href="#Documentation" class="headerlink" title="Documentation"></a>Documentation</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java.lang </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">ClassLoader</span></span></span><br><span class="line"><span class="class"><span class="keyword">extends</span> <span class="title">Object</span></span></span><br></pre></td></tr></table></figure><hr><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">A class loader is an object that is responsible for loading classes. The class ClassLoader is an abstract class. Given the binary name of a class, a class loader should attempt to locate or generate data that constitutes a definition for the class. A typical strategy is to transform the name into a file name and then read a &quot;class file&quot; of that name from a file system.</span><br><span class="line"></span><br><span class="line">ä¸€ä¸ªç±»åŠ è½½å™¨æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè´Ÿè´£åŠ è½½ç±»ã€‚ç±»ClassLoaderæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ã€‚ç»™å®šäº†ä¸€ä¸ªç±»çš„äºŒè¿›åˆ¶åå­—ï¼ŒClassLoaderåº”è¯¥å°è¯•å»å®šä½æˆ–è€…ç”Ÿæˆæ„æˆäº†ç±»å®šä¹‰çš„æ•°æ®ã€‚ä¸€ç§å…¸å‹çš„ç­–ç•¥æ˜¯å°†ç»™å®šçš„äºŒè¿›åˆ¶åå­—è½¬ä¸ºæ–‡ä»¶åï¼Œç„¶åä»æ–‡ä»¶ç³»ç»Ÿä¸­è¯»å–è¿™ä¸ªæ–‡ä»¶åé‡Œé¢çš„classä¿¡æ¯ã€‚</span><br></pre></td></tr></table></figure><blockquote><p>Binary names</p><p>Any class name provided as a String parameter to method in ClassLoader must be a binary name as definded by <em>The Java Language Specification</em></p><p>Examples of valid class name include:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;java.lang.String&quot;</span></span><br><span class="line"><span class="string">&quot;javax.swing.JSpinner$DefaultEditor&quot;</span></span><br><span class="line"><span class="string">&quot;java.security.KeyStore$Builder$FileBuilder$1&quot;</span></span><br><span class="line"><span class="string">&quot;java.net.URLClassLoader$3$1&quot;</span></span><br></pre></td></tr></table></figure></blockquote><hr><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Every Class object contains a reference to the ClassLoader that defined it.</span><br><span class="line">Class objects for array classes are not created by class loaders, but are created automatically as required by the Java runtime. The class loader for an array class, as returned by Class.getClassLoader() is the same as the class loader for its element type; if the element type is a primitive type, then the array class has no class loader.</span><br><span class="line">Applications implement subclasses of ClassLoader in order to extend the manner in which the Java virtual machine dynamically loads classes.</span><br><span class="line"></span><br><span class="line">æ¯ä¸€ä¸ªclasså¯¹è±¡éƒ½ä¼šåŒ…å«ç€å®šä¹‰è¿™ä¸ªclasså¯¹è±¡çš„ClassLoaderçš„å¼•ç”¨ã€‚</span><br><span class="line">é’ˆå¯¹äºæ•°ç»„ç±»çš„classå¯¹è±¡ï¼Œå¹¶ä¸æ˜¯ç”±ç±»åŠ è½½å™¨åˆ›å»ºçš„ï¼Œè€Œæ˜¯ç”±javaåœ¨è¿è¡Œæ—¶éœ€è¦çš„æ—¶å€™è‡ªåŠ¨åˆ›å»ºçš„ã€‚å¯¹äºä¸€ä¸ªæ•°ç»„ç±»çš„ç±»åŠ è½½å™¨æ¥è¯´ï¼Œå…¶Class.getClassLoaderçš„è¿”å›å€¼ä¸è¿™ä¸ªæ•°ç»„ä¸­å…ƒç´ ç±»å‹çš„etClassLoaderçš„è¿”å›å€¼æ˜¯ä¸€æ ·çš„ã€‚å¦‚æœæ•°ç»„å½“ä¸­çš„å…ƒç´ ç±»å‹æ˜¯åŸç”Ÿç±»å‹ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°ç»„ç±»æ˜¯æ²¡æœ‰åŠ è½½å™¨çš„ã€‚</span><br><span class="line">åº”ç”¨å®ç°äº†ClassLoaderçš„å­ç±»æ˜¯ä¸ºäº†æ‰©å±•javaè™šæ‹ŸæœºåŠ¨æ€åŠ è½½ç±»çš„æ–¹å¼</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        String[] strings = <span class="keyword">new</span> String[<span class="number">10</span>];</span><br><span class="line">        <span class="comment">//stringç±»å‹ç”±æ ¹åŠ è½½å™¨åŠ è½½ï¼Œæ‰€ä»¥è¿”å›null</span></span><br><span class="line">        System.out.println(strings.getClass().getClassLoader());</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;-----&quot;</span>);</span><br><span class="line">        Main[] mains = <span class="keyword">new</span> Main[<span class="number">10</span>];</span><br><span class="line">        <span class="comment">//Mainç±»å‹ç”±ç³»ç»Ÿç±»åŠ è½½å™¨åŠ è½½ï¼Œæ‰€ä»¥è¿”å›sun.misc.Launcher$AppClassLoader@18b4aac2</span></span><br><span class="line">        System.out.println(mains.getClass().getClassLoader());</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;-----&quot;</span>);</span><br><span class="line">        <span class="keyword">int</span>[] ints = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>];</span><br><span class="line">        <span class="comment">//åŸç”Ÿç±»å‹æ²¡æœ‰ç±»åŠ è½½å™¨</span></span><br><span class="line">        System.out.println(ints.getClass().getClassLoader());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*è¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment">null </span></span><br><span class="line"><span class="comment">-----</span></span><br><span class="line"><span class="comment">sun.misc.Launcher$AppClassLoader@18b4aac2</span></span><br><span class="line"><span class="comment">-----</span></span><br><span class="line"><span class="comment">null</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><hr><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Class loaders may typically be used by security managers to indicate security domains.</span><br><span class="line">Class loaders may typically be used by security managers to indicate security domains.</span><br><span class="line">The ClassLoader class uses a delegation model to search for classes and resources. Each instance of ClassLoader has an associated parent class loader. When requested to find a class or resource, a ClassLoader instance will delegate the search for the class or resource to its parent class loader before attempting to find the class or resource itself. The virtual machine&#x27;s built-in class loader, called the &quot;bootstrap class loader&quot;, does not itself have a parent but may serve as the parent of a ClassLoader instance.</span><br><span class="line"></span><br><span class="line">ç±»åŠ è½½å™¨å…¸å‹æƒ…å†µä¸‹å¯ä»¥è¢«å®‰å…¨ç®¡ç†å™¨ä½¿ç”¨æ¥å»æ ‡è¯†çš„å®‰å…¨åŸŸé—®é¢˜ã€‚</span><br><span class="line">ç±»åŠ è½½å™¨ä½¿ç”¨äº†ä¸€ç§å§”æ´¾æ¨¡å‹æ¥å»å¯»æ‰¾ç±»å’Œèµ„æºã€‚ClassLoaderçš„æ¯ä¸€ä¸ªå®ä¾‹éƒ½ä¼šæœ‰ä¸ä¹‹å…³è”çš„åŒäº²ã€‚å½“è¢«è¯·æ±‚å»å¯»æ‰¾ä¸€ä¸ªç±»æˆ–èµ„æºçš„æ—¶å€™ï¼Œåœ¨è‡ªå·±å¯»æ‰¾å‰ï¼ŒClassLoaderçš„å®ä¾‹å°±ä¼šå°†å¯¹äºç±»æˆ–èµ„æºçš„å¯»æ‰¾å§”æ‰˜ç»™çˆ¶ClassLoaderã€‚è™šæ‹Ÿæœºå†…å»ºçš„ç±»åŠ è½½å™¨ç§°ä¹‹ä¸ºå¯åŠ¨ç±»åŠ è½½å™¨ï¼Œæœ¬èº«æ²¡æœ‰åŒäº²ï¼Œä½†æ˜¯å®ƒå¯ä»¥ä½œä¸ºç±»åŠ è½½å™¨çš„åŒäº²ã€‚</span><br></pre></td></tr></table></figure><hr><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Class loaders that support concurrent loading of classes are known as parallel capable class loaders and are required to register themselves at their class initialization time by invoking the ClassLoader.registerAsParallelCapable method. Note that the ClassLoader class is registered as parallel capable by default. However, its subclasses still need to register themselves if they are parallel capable.</span><br><span class="line">In environments in which the delegation model is not strictly hierarchical, class loaders need to be parallel capable, otherwise class loading can lead to deadlocks because the loader lock is held for the duration of the class loading process (see loadClass methods).</span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬å°†æ”¯æŒå¹¶è¡Œçš„ç±»åŠ è½½å™¨ç§°ä¹‹ä¸ºparallel capable class loadersï¼Œå®ƒè¢«è¦æ±‚åœ¨å®ƒä»¬çš„ç±»åˆå§‹åŒ–æœŸé—´é€šè¿‡ClassLoader.registerAsParallelCapableæ–¹æ³•å°†è‡ªèº«æ³¨å†Œä¸Šã€‚æ³¨æ„ï¼ŒClassLoaderé»˜è®¤æ³¨å†Œä¸ºparallel capableã€‚ç„¶è€Œå®ƒä»¬çš„å­ç±»å¦‚æœä¹Ÿæ˜¯å¹¶è¡Œçš„ï¼Œä»ç„¶éœ€è¦æ³¨å†Œã€‚</span><br><span class="line">åœ¨å§”æ´¾æ¨¡å¼ä¸æ˜¯ä¸¥æ ¼çš„å±‚æ¬¡åŒ–ç¯å¢ƒä¸‹ï¼Œç±»åŠ è½½å™¨éœ€è¦å¹¶è¡Œï¼Œå¦åˆ™ç±»åŠ è½½ä¼šå¯¼è‡´æ­»é”ï¼Œå› ä¸ºåŠ è½½å™¨çš„é”åœ¨åŠ è½½è¿‡ç¨‹ä¸­æ˜¯ä¸€ç›´æŒæœ‰çš„ã€‚</span><br></pre></td></tr></table></figure><hr><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Normally, the Java virtual machine loads classes from the local file system in a platform-dependent manner. For example, on UNIX systems, the virtual machine loads classes from the directory defined by the CLASSPATH environment variable.</span><br><span class="line">However, some classes may not originate from a file; they may originate from other sources, such as the network, or they could be constructed by an application. The method defineClass converts an array of bytes into an instance of class Class. Instances of this newly defined class can be created using Class.newInstance.</span><br><span class="line"></span><br><span class="line">é€šå¸¸æƒ…å†µä¸‹ï¼Œjavaè™šæ‹Ÿæœºä¼šä»æœ¬åœ°çš„æ–‡ä»¶ç³»ç»Ÿä»¥ä¸€ç§å¹³å°ç›¸å…³æ€§åŠ è½½ç±»ï¼Œæ¯”å¦‚åœ¨Unixï¼Œè™šæ‹Ÿæœºä¼šä»ç”±CLASSPATHå˜é‡æ‰€å®šä¹‰çš„ç›®å½•ä¸‹å»åŠ è½½ç±»ã€‚</span><br><span class="line">ç„¶è€Œï¼Œä¸€äº›ç±»å¯èƒ½å¹¶ä¸æ˜¯æ¥è‡ªä¸€ä¸ªæ–‡ä»¶ï¼Œå®ƒä»¬å¯èƒ½æ¥è‡ªäºå…¶ä»–æ¥æºï¼Œæ¯”å¦‚ç½‘ç»œæˆ–è€…ç”±åº”ç”¨æœ¬èº«æ„å»ºå‡ºæ¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒdefineClassæ–¹æ³•ä¼šå°†ä¸€ä¸ªå­—èŠ‚æ•°ç»„è½¬æ¢æˆclassç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œè¿™ä¸ªæ–°å®šä¹‰çš„å®ä¾‹æ˜¯å¯ä»¥é€šè¿‡Class.newInstanceå»åˆ›å»ºã€‚</span><br></pre></td></tr></table></figure><hr><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">The methods and constructors of objects created by a class loader may reference other classes. To determine the class(es) referred to, the Java virtual machine invokes the loadClass method of the class loader that originally created the class.</span><br><span class="line">For example, an application could create a network class loader to download class files from a server. Sample code might look like:</span><br><span class="line">     ClassLoader loader = new NetworkClassLoader(host, port);</span><br><span class="line">     Object main = loader.loadClass(&quot;Main&quot;, true).newInstance();</span><br><span class="line">          . . .</span><br><span class="line">The network class loader subclass must define the methods findClass and loadClassData to load a class from the network. Once it has downloaded the bytes that make up the class, it should use the method defineClass to create a class instance. A sample implementation is:</span><br><span class="line">       class NetworkClassLoader extends ClassLoader &#123;</span><br><span class="line">           String host;</span><br><span class="line">           int port;</span><br><span class="line">  </span><br><span class="line">           public Class findClass(String name) &#123;</span><br><span class="line">               byte[] b = loadClassData(name);</span><br><span class="line">               return defineClass(name, b, 0, b.length);</span><br><span class="line">           &#125;</span><br><span class="line">  </span><br><span class="line">           private byte[] loadClassData(String name) &#123;</span><br><span class="line">               // load the class data from the connection</span><br><span class="line">                . . .</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       </span><br><span class="line">ç”±ç±»åŠ è½½å™¨æ‰€åˆ›å»ºçš„å¯¹è±¡çš„æ–¹æ³•æˆ–æ„é€ æ–¹æ³•å¯èƒ½ä¼šå¼•ç”¨å…¶ä»–çš„ç±»ã€‚ä¸ºäº†ç¡®å®šæ‰€å¼•ç”¨çš„ç±»ï¼Œjavaè™šæ‹Ÿæœºä¼šè°ƒç”¨æœ€åˆåˆ›å»ºè¿™ä¸ªç±»çš„loadClassæ–¹æ³•å»åŠ è½½å®ƒæ‰€å¼•ç”¨çš„å…¶ä»–çš„ç±»ã€‚</span><br><span class="line">æ¯”å¦‚è¯´ï¼Œä¸€ä¸ªåº”ç”¨å¯ä»¥åˆ›å»ºä¸€ä¸ªç½‘ç»œç±»åŠ è½½å™¨ï¼Œä»æœåŠ¡å™¨ä¸ŠåŠ è½½ç±»ï¼š</span><br><span class="line">     ClassLoader loader = new NetworkClassLoader(host, port);</span><br><span class="line">     Object main = loader.loadClass(&quot;Main&quot;, true).newInstance();</span><br><span class="line">          . . .</span><br><span class="line">ç½‘ç»œç±»åŠ è½½å™¨å­ç±»å¿…é¡»å®šä¹‰ç½‘ç»œåŠ è½½ç±»çš„æ–¹æ³•findClasså’ŒloadClassData ã€‚ ä¸€æ—¦ä¸‹è½½æ„æˆç±»çš„å­—èŠ‚ï¼Œå®ƒåº”è¯¥ä½¿ç”¨æ–¹æ³•defineClassåˆ›å»ºä¸€ä¸ªç±»å®ä¾‹:</span><br><span class="line">       class NetworkClassLoader extends ClassLoader &#123;</span><br><span class="line">           String host;</span><br><span class="line">           int port;</span><br><span class="line">  </span><br><span class="line">           public Class findClass(String name) &#123;</span><br><span class="line">               byte[] b = loadClassData(name);</span><br><span class="line">               return defineClass(name, b, 0, b.length);</span><br><span class="line">           &#125;</span><br><span class="line">  </span><br><span class="line">           private byte[] loadClassData(String name) &#123;</span><br><span class="line">               // load the class data from the connection</span><br><span class="line">                . . .</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jvm </tag>
            
            <tag> ç±»çš„åŠ è½½ </tag>
            
            <tag> æºç  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè™šæ‹Ÿæœºç¬”è®°-ç±»åŠ è½½å™¨åŒäº²å§”æ‰˜æ´¾åˆ¶2</title>
      <link href="/2019/05/04/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%89%98%E6%B4%BE%E5%88%B62/"/>
      <url>/2019/05/04/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%89%98%E6%B4%BE%E5%88%B62/</url>
      
        <content type="html"><![CDATA[<p>ç»§ç»­å­¦ä¹ jvmç±»åŠ è½½å™¨åŒäº²å§”æ´¾æœºåˆ¶</p><span id="more"></span><h1 id="å¾ªç¯è·å¾—ClassLoader"><a href="#å¾ªç¯è·å¾—ClassLoader" class="headerlink" title="å¾ªç¯è·å¾—ClassLoader"></a>å¾ªç¯è·å¾—ClassLoader</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="comment">//è·å–ç³»ç»Ÿç±»åŠ è½½å™¨</span></span><br><span class="line">        ClassLoader classLoader = ClassLoader.getSystemClassLoader();</span><br><span class="line">        System.out.println(classLoader);</span><br><span class="line">        System.out.println(<span class="string">&quot;-------------------&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">null</span> != classLoader)&#123;</span><br><span class="line">            <span class="comment">//è·å–åŠ è½½å™¨çš„çˆ¶äº²</span></span><br><span class="line">            classLoader = classLoader.getParent(); </span><br><span class="line">            System.out.println(classLoader);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*è¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment">sun.misc.Launcher$AppClassLoader@18b4aac2</span></span><br><span class="line"><span class="comment">-------------------</span></span><br><span class="line"><span class="comment">sun.misc.Launcher$ExtClassLoader@74a14482</span></span><br><span class="line"><span class="comment">null</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="getSystemClassLoader"><a href="#getSystemClassLoader" class="headerlink" title="getSystemClassLoader"></a>getSystemClassLoader</h2><p><img src="/2019/05/04/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%89%98%E6%B4%BE%E5%88%B62/1.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿”å›ç”¨äºå§”æ´¾çš„ç³»ç»Ÿç±»åŠ è½½å™¨ã€‚ </span></span><br><span class="line"><span class="comment"> * è¿™æ˜¯æ–°çš„ClassLoaderå®ä¾‹çš„é»˜è®¤å§”æ´¾çˆ¶é¡¹ï¼Œ é€šå¸¸æ˜¯ç”¨äºå¯åŠ¨åº”ç”¨ç¨‹åºçš„ç±»åŠ è½½å™¨ã€‚</span></span><br><span class="line"><span class="comment"> * è¯¥æ–¹æ³•é¦–å…ˆåœ¨è¿è¡Œæ—¶çš„å¯åŠ¨é¡ºåºä¸­æ—©æœŸè¢«è°ƒç”¨</span></span><br><span class="line"><span class="comment"> * æ­¤æ—¶å®ƒå°†åˆ›å»ºç³»ç»Ÿç±»åŠ è½½å™¨å¹¶å°†å…¶è®¾ç½®ä¸ºè°ƒç”¨Threadçš„ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨</span></span><br><span class="line"><span class="comment"> * é»˜è®¤çš„ç³»ç»Ÿç±»åŠ è½½å™¨æ˜¯æ­¤ç±»çš„å®ç°ç›¸å…³å®ä¾‹</span></span><br><span class="line"><span class="comment"> * å¦‚æœåœ¨é¦–æ¬¡è°ƒç”¨æ­¤æ–¹æ³•æ—¶å®šä¹‰ç³»ç»Ÿå±æ€§&quot;java.system.class.loader&quot;</span></span><br><span class="line"><span class="comment"> * é‚£ä¹ˆè¯¥å±æ€§çš„å€¼å°†è¢«è§†ä¸ºå°†ä½œä¸ºç³»ç»Ÿç±»  åŠ è½½å™¨è¿”å›çš„ç±»çš„åç§°</span></span><br><span class="line"><span class="comment"> * ç±»ä½¿ç”¨é»˜è®¤çš„ç³»ç»Ÿç±»åŠ è½½å™¨åŠ è½½ï¼Œå¿…é¡»å®šä¹‰ä¸€ä¸ªå…¬å…±æ„é€ å‡½æ•°ï¼Œå…¶è¢«ç”¨ä½œä»£ç†çˆ¶ClassLoaderç±»å‹çš„å•ä¸ªå‚æ•°</span></span><br><span class="line"><span class="comment"> * ç„¶åä½¿ç”¨è¯¥æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œå¹¶ä½¿ç”¨é»˜è®¤çš„ç³»ç»Ÿç±»åŠ è½½å™¨ä½œä¸ºå‚æ•°</span></span><br><span class="line"><span class="comment"> * æ‰€ç”Ÿæˆçš„ç±»åŠ è½½å™¨è¢«å®šä¹‰ä¸ºç³»ç»Ÿç±»åŠ è½½å™¨ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@CallerSensitive</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ClassLoader <span class="title">getSystemClassLoader</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    initSystemClassLoader();</span><br><span class="line">    <span class="keyword">if</span> (scl == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    SecurityManager sm = System.getSecurityManager();</span><br><span class="line">    <span class="keyword">if</span> (sm != <span class="keyword">null</span>) &#123;</span><br><span class="line">        checkClassLoaderPermission(scl, Reflection.getCallerClass());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> scl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="initSystemClassLoader"><a href="#initSystemClassLoader" class="headerlink" title="initSystemClassLoader()"></a>initSystemClassLoader()</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">initSystemClassLoader</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//sclSet:è®¾å®šå¥½ç³»ç»Ÿç±»åŠ è½½å™¨äº†çš„è¯è¯¥å€¼ä¸ºtrue</span></span><br><span class="line">    <span class="keyword">if</span> (!sclSet) &#123;</span><br><span class="line">        <span class="comment">//scl:ç³»ç»Ÿç±»åŠ è½½å™¨</span></span><br><span class="line">        <span class="keyword">if</span> (scl != <span class="keyword">null</span>)</span><br><span class="line">            <span class="comment">//é€’å½’è°ƒç”¨å¼‚å¸¸</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">&quot;recursive invocation&quot;</span>);</span><br><span class="line">        sun.misc.Launcher l = sun.misc.Launcher.getLauncher();</span><br><span class="line">        <span class="keyword">if</span> (l != <span class="keyword">null</span>) &#123;</span><br><span class="line">            Throwable oops = <span class="keyword">null</span>;</span><br><span class="line">            <span class="comment">//é€šè¿‡Launchç±»çš„getClassLoader()è·å¾—åº”ç”¨ç±»åŠ è½½å™¨</span></span><br><span class="line">            scl = l.getClassLoader();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                scl = AccessController.doPrivileged(</span><br><span class="line">                    <span class="comment">/**</span></span><br><span class="line"><span class="comment">                     * å¤„ç†ç”¨æˆ·è‡ªå®šä¹‰äº†java.system.class.loaderç³»ç»Ÿå±æ€§çš„æƒ…å†µ</span></span><br><span class="line"><span class="comment">                     * æœ‰å¯èƒ½æ˜¯é»˜è®¤çš„AppClassLoaderï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„</span></span><br><span class="line"><span class="comment">                     */</span></span><br><span class="line">                    <span class="keyword">new</span> SystemClassLoaderAction(scl));</span><br><span class="line">            &#125; <span class="keyword">catch</span> (PrivilegedActionException pae) &#123;</span><br><span class="line">                oops = pae.getCause();</span><br><span class="line">                <span class="keyword">if</span> (oops <span class="keyword">instanceof</span> InvocationTargetException) &#123;</span><br><span class="line">                    oops = oops.getCause();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (oops != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (oops <span class="keyword">instanceof</span> Error) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> (Error) oops;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// wrap the exception</span></span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> Error(oops);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//ç³»ç»Ÿç±»åŠ è½½å™¨è®¾ç½®å®Œæ¯•</span></span><br><span class="line">        sclSet = <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="SystemClassLoaderAction"><a href="#SystemClassLoaderAction" class="headerlink" title="SystemClassLoaderAction"></a>SystemClassLoaderAction</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SystemClassLoaderAction</span></span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">PrivilegedExceptionAction</span>&lt;<span class="title">ClassLoader</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ClassLoader parent;</span><br><span class="line"></span><br><span class="line">    SystemClassLoaderAction(ClassLoader parent) &#123;</span><br><span class="line">        <span class="keyword">this</span>.parent = parent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ClassLoader <span class="title">run</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//è‡ªå®šä¹‰ç±»åŠ è½½å™¨ç³»ç»Ÿå±æ€§</span></span><br><span class="line">        String cls = System.getProperty(<span class="string">&quot;java.system.class.loader&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (cls == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> parent;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Constructor&lt;?&gt; ctor = Class.forName(cls, <span class="keyword">true</span>, parent)</span><br><span class="line">            .getDeclaredConstructor(<span class="keyword">new</span> Class&lt;?&gt;[] &#123; ClassLoader.class &#125;);</span><br><span class="line">        ClassLoader sys = (ClassLoader) ctor.newInstance(</span><br><span class="line">            <span class="keyword">new</span> Object[] &#123; parent &#125;);</span><br><span class="line">        Thread.currentThread().setContextClassLoader(sys);</span><br><span class="line">        <span class="keyword">return</span> sys;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="class-forName"><a href="#class-forName" class="headerlink" title="class.forName"></a>class.forName</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿”å›ä¸€ä¸ªç»™å®šç±»æˆ–è€…æ¥å£çš„ä¸€ä¸ªClasså¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰ç»™å®šclassloaderï¼Œé‚£ä¹ˆä¼šä½¿ç”¨æ ¹ç±»åŠ è½½å™¨ï¼Œ</span></span><br><span class="line"><span class="comment"> * ç»™å®šäº†ç±»æˆ–è€…æ¥å£çš„å®Œå…¨é™å®šåï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•å°†å°è¯•å»å®šä½ï¼ŒåŠ è½½å’Œé“¾æ¥ç±»æˆ–æ¥å£ï¼Œ</span></span><br><span class="line"><span class="comment"> * å¦‚æœinitalizeè¿™ä¸ªå‚æ•°ä¼ äº†trueï¼Œé‚£ä¹ˆç»™å®šçš„ç±»å¦‚æœä¹‹å‰æ²¡æœ‰è¢«åˆå§‹åŒ–è¿‡ï¼Œé‚£ä¹ˆä¼šè¢«åˆå§‹åŒ–ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> name æ‰€éœ€ç±»çš„å®Œå…¨é™å®šåç§°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> initialize æ˜¯å¦åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> loader ç±»åŠ è½½å™¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Class&lt;?&gt; forName(String name, <span class="keyword">boolean</span> initialize,</span><br><span class="line">                                   ClassLoader loader)</span><br><span class="line">        <span class="keyword">throws</span> ClassNotFoundException</span><br><span class="line">    &#123;</span><br><span class="line">        Class&lt;?&gt; caller = <span class="keyword">null</span>;</span><br><span class="line">        SecurityManager sm = System.getSecurityManager();</span><br><span class="line">        <span class="keyword">if</span> (sm != <span class="keyword">null</span>) &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//è·å–åˆ°è°ƒç”¨forNameè¿™ä¸ªæ–¹æ³•çš„Classå¯¹è±¡</span></span><br><span class="line">            caller = Reflection.getCallerClass();</span><br><span class="line">            <span class="keyword">if</span> (sun.misc.VM.isSystemDomainLoader(loader)) &#123;</span><br><span class="line">            <span class="comment">//è·å–åˆ°è°ƒç”¨forNameè¿™ä¸ªæ–¹æ³•çš„Classå¯¹è±¡çš„ç±»åŠ è½½å™¨</span></span><br><span class="line">                ClassLoader ccl = ClassLoader.getClassLoader(caller);</span><br><span class="line">                <span class="keyword">if</span> (!sun.misc.VM.isSystemDomainLoader(ccl)) &#123;</span><br><span class="line">                    sm.checkPermission(</span><br><span class="line">                        SecurityConstants.GET_CLASSLOADER_PERMISSION);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//forName0:nativeæ–¹æ³•</span></span><br><span class="line">        <span class="keyword">return</span> forName0(name, initialize, loader, caller);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="getParent"><a href="#getParent" class="headerlink" title="getParent"></a>getParent</h2><p><img src="/2019/05/04/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%89%98%E6%B4%BE%E5%88%B62/2.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿”å›çˆ¶ç±»åŠ è½½å™¨è¿›è¡Œå§”æ´¾</span></span><br><span class="line"><span class="comment"> * ä¸€äº›å®ç°å¯ä»¥ä½¿ç”¨nullæ¥è¡¨ç¤ºæ ¹ç±»åŠ è½½å™¨</span></span><br><span class="line"><span class="comment"> * å¦‚æœæ­¤ç±»åŠ è½½å™¨çš„çˆ¶çº§æ˜¯æ ¹ç±»åŠ è½½å™¨ï¼Œåˆ™æ­¤æ–¹æ³•å°†è¿”å›null</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@CallerSensitive</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> ClassLoader <span class="title">getParent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (parent == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    SecurityManager sm = System.getSecurityManager();</span><br><span class="line">    <span class="keyword">if</span> (sm != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">// Check access to the parent class loader</span></span><br><span class="line">        <span class="comment">// If the caller&#x27;s class loader is same as this class loader,</span></span><br><span class="line">        <span class="comment">// permission check is performed.</span></span><br><span class="line">        checkClassLoaderPermission(parent, Reflection.getCallerClass());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> parent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="è·å¾—æŒ‡å®šclassæ–‡ä»¶çš„èµ„æº"><a href="#è·å¾—æŒ‡å®šclassæ–‡ä»¶çš„èµ„æº" class="headerlink" title="è·å¾—æŒ‡å®šclassæ–‡ä»¶çš„èµ„æº"></a>è·å¾—æŒ‡å®šclassæ–‡ä»¶çš„èµ„æº</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="comment">//è·å–å½“å‰çº¿ç¨‹ä¸Šä¸‹æ–‡çš„ç±»åŠ è½½å™¨</span></span><br><span class="line">        ClassLoader classLoader = Thread.currentThread().getContextClassLoader();</span><br><span class="line"></span><br><span class="line">        String res = <span class="string">&quot;Main.class&quot;</span>;</span><br><span class="line">        <span class="comment">//è·å–ç»™å®šåç§°çš„æ‰€æœ‰èµ„æº</span></span><br><span class="line">        Enumeration&lt;URL&gt; urls = classLoader.getResources(res);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//éå†è¾“å‡ºæ‰€æœ‰èµ„æº</span></span><br><span class="line">        <span class="keyword">while</span>(urls.hasMoreElements())&#123;</span><br><span class="line">            URL url = urls.nextElement();</span><br><span class="line">            System.out.println(url);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*è¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment">file:/home/cc/IdeaProjects/test/out/production/test/Main.class</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="getContextClassLoader"><a href="#getContextClassLoader" class="headerlink" title="getContextClassLoader()"></a>getContextClassLoader()</h2><p><img src="/2019/05/04/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%89%98%E6%B4%BE%E5%88%B62/3.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.2</span></span><br><span class="line"><span class="comment"> * è¿”å›æ­¤Threadçš„ä¸Šä¸‹æ–‡ClassLoader</span></span><br><span class="line"><span class="comment"> * ä¸Šä¸‹æ–‡ClassLoaderç”±çº¿ç¨‹çš„åˆ›å»ºè€…æä¾›ï¼Œä»¥ä¾¿åœ¨åŠ è½½ç±»å’Œèµ„æºæ—¶åœ¨æ­¤çº¿ç¨‹ä¸­è¿è¡Œçš„ä»£ç ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> * é»˜è®¤æ˜¯çˆ¶çº¿ç¨‹çš„ClassLoaderä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="comment"> * åŸå§‹çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ClassLoaderé€šå¸¸è®¾ç½®ä¸ºç”¨äºåŠ è½½åº”ç”¨ç¨‹åºçš„ç±»åŠ è½½å™¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@CallerSensitive</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ClassLoader <span class="title">getContextClassLoader</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (contextClassLoader == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    SecurityManager sm = System.getSecurityManager();</span><br><span class="line">    <span class="keyword">if</span> (sm != <span class="keyword">null</span>) &#123;</span><br><span class="line">        ClassLoader.checkClassLoaderPermission(contextClassLoader,</span><br><span class="line">                                               Reflection.getCallerClass());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> contextClassLoader;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="getResources"><a href="#getResources" class="headerlink" title="getResources()"></a>getResources()</h2><p><img src="/2019/05/04/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%89%98%E6%B4%BE%E5%88%B62/4.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥æ‰¾å…·æœ‰ç»™å®šåç§°çš„æ‰€æœ‰èµ„æº</span></span><br><span class="line"><span class="comment"> * èµ„æºæ˜¯å¯ä»¥é€šè¿‡ç‹¬ç«‹äºä»£ç ä½ç½®çš„æ–¹å¼ç”±ç±»ä»£ç è®¿é—®çš„ä¸€äº›æ•°æ®ï¼ˆå›¾åƒï¼ŒéŸ³é¢‘ï¼Œæ–‡æœ¬ç­‰ï¼‰</span></span><br><span class="line"><span class="comment"> * èµ„æºçš„åç§°æ˜¯æ ‡è¯†èµ„æºçš„/åˆ†éš”è·¯å¾„å</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Enumeration&lt;URL&gt; <span class="title">getResources</span><span class="params">(String name)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    Enumeration&lt;URL&gt;[] tmp = (Enumeration&lt;URL&gt;[]) <span class="keyword">new</span> Enumeration&lt;?&gt;[<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">if</span> (parent != <span class="keyword">null</span>) &#123;</span><br><span class="line">        tmp[<span class="number">0</span>] = parent.getResources(name);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        tmp[<span class="number">0</span>] = getBootstrapResources(name);</span><br><span class="line">    &#125;</span><br><span class="line">    tmp[<span class="number">1</span>] = findResources(name);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> CompoundEnumeration&lt;&gt;(tmp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="è·å–ClassLoaderçš„é€”å¾„"><a href="#è·å–ClassLoaderçš„é€”å¾„" class="headerlink" title="è·å–ClassLoaderçš„é€”å¾„"></a>è·å–ClassLoaderçš„é€”å¾„</h1><ol><li>è·å–å½“å‰ç±»çš„ClassLoader</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span>&lt;?&gt; <span class="title">clazz</span></span></span><br><span class="line"><span class="class"><span class="title">clazz</span>.<span class="title">getClassLoader</span>()</span>;</span><br></pre></td></tr></table></figure><ol><li>è·å–å½“å‰çº¿ç¨‹ä¸Šä¸‹æ–‡çš„ClassLoader</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Thread.currentThread.getContextClassLoader();</span><br></pre></td></tr></table></figure><ol><li>è·å¾—ç³»ç»Ÿçš„ClassLoader</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ClassLoader.getSystemClassLoader();</span><br></pre></td></tr></table></figure><ol><li>è·å¾—è°ƒç”¨è€…çš„ClassLoader</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DriverManager.getCallerClassLoader();</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jvm </tag>
            
            <tag> ç±»çš„åŠ è½½ </tag>
            
            <tag> åŒäº²å§”æ´¾æœºåˆ¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè™šæ‹Ÿæœºç¬”è®°-javaè™šæ‹Ÿæœºç±»åŠ è½½2</title>
      <link href="/2019/05/03/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%B1%BB%E5%8A%A0%E8%BD%BD2/"/>
      <url>/2019/05/03/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%B1%BB%E5%8A%A0%E8%BD%BD2/</url>
      
        <content type="html"><![CDATA[<p>ç»§ç»­å­¦ä¹ jvmç±»çš„åŠ è½½</p><span id="more"></span><p><img src="/2019/05/03/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%B1%BB%E5%8A%A0%E8%BD%BD2/1.jpg" alt></p><h1 id="ç±»çš„åŠ è½½"><a href="#ç±»çš„åŠ è½½" class="headerlink" title="ç±»çš„åŠ è½½"></a>ç±»çš„åŠ è½½</h1><ol><li><p>ç±»ä¸€å®šæ˜¯ç”±ç±»åŠ è½½å™¨åŠ è½½ä½†æ˜¯</p></li><li><p>ç±»çš„åŠ è½½çš„æœ€ç»ˆäº§å“æ˜¯ä½äºå†…å­˜ä¸­çš„classå¯¹è±¡</p></li><li><p>classå¯¹è±¡å°è£…äº†ç±»åœ¨æ–¹æ³•åŒºå†…çš„æ•°æ®ç»“æ„ï¼Œå¹¶ä¸”å‘javaç¨‹åºå‘˜æä¾›äº†è®¿é—®æ–¹æ³•åŒºå†…çš„æ•°æ®ç»“æ„çš„æ¥å£</p></li><li><strong>ç±»åŠ è½½å™¨å¹¶ä¸éœ€è¦ç­‰åˆ°æŸä¸ªç±»è¢«â€œé¦–æ¬¡ä¸»åŠ¨ä½¿ç”¨â€æ—¶å†åŠ è½½å®ƒ</strong></li></ol><h2 id="é¢„åŠ è½½"><a href="#é¢„åŠ è½½" class="headerlink" title="é¢„åŠ è½½"></a>é¢„åŠ è½½</h2><ol><li><p>jvmè§„èŒƒå…è®¸ç±»åŠ è½½å™¨åœ¨é¢„æ–™æŸä¸ªç±»å°†è¦è¢«ä½¿ç”¨æ—¶å°±é¢„å…ˆåŠ è½½å®ƒï¼Œå¦‚æœåœ¨é¢„å…ˆåŠ è½½çš„è¿‡ç¨‹ä¸­é‡åˆ°äº†classæ–‡ä»¶ç¼ºå¤±æˆ–å­˜åœ¨é”™è¯¯ï¼Œç±»åŠ è½½å™¨å¿…é¡»åœ¨<strong>ç¨‹åºé¦–æ¬¡ä¸»åŠ¨</strong>ä½¿ç”¨è¯¥ç±»æ—¶æ‰æŠ¥å‘Šé”™è¯¯<strong>ï¼ˆLinkageErroré”™è¯¯ï¼‰</strong></p></li><li><p>å¦‚æœè¿™ä¸ªç±»ä¸€ç›´æ²¡æœ‰è¢«ç¨‹åºä¸»åŠ¨ä½¿ç”¨ï¼Œé‚£ä¹ˆ<strong>ç±»åŠ è½½å™¨å°±ä¸ä¼šæŠ¥å‘Šè¿™ä¸ªé”™è¯¯</strong></p></li></ol><h2 id="ç±»çš„åŠ è½½å™¨"><a href="#ç±»çš„åŠ è½½å™¨" class="headerlink" title="ç±»çš„åŠ è½½å™¨"></a>ç±»çš„åŠ è½½å™¨</h2><p>ç±»åŠ è½½å™¨ç”¨æ¥æŠŠç±»åŠ è½½åˆ°javaè™šæ‹Ÿæœºä¸­ã€‚ä»jdk1.2ç‰ˆæœ¬å¼€å§‹ï¼Œç±»çš„åŠ è½½è¿‡ç¨‹é‡‡ç”¨çˆ¶äº²å§”æ‰˜æœºåˆ¶ï¼Œè¿™ç§æœºåˆ¶èƒ½æ›´å¥½ä¿è¯javaå¹³å°çš„å®‰å…¨ã€‚åœ¨æ­¤å§”æ‰˜æœºåˆ¶ä¸­ï¼Œé™¤äº†javaè™šæ‹Ÿæœºè‡ªå¸¦çš„æ ¹ç±»åŠ è½½å™¨ä»¥å¤–ï¼Œå…¶ä½™çš„ç±»åŠ è½½å™¨éƒ½æœ‰ä¸”åªæœ‰ä¸€ä¸ªçˆ¶åŠ è½½å™¨ã€‚å½“javaç¨‹åºè¦æ±‚åŠ è½½loader1åŠ è½½Sampleç±»æ—¶ï¼Œloader1é¦–å…ˆå§”æ‰˜è‡ªå·±çš„çˆ¶åŠ è½½å™¨å»åŠ è½½Sampleç±»ï¼Œè‹¥åŠ è½½å™¨èƒ½åŠ è½½ï¼Œåˆ™ç”±çˆ¶åŠ è½½å™¨å®ŒæˆåŠ è½½ä»»åŠ¡ï¼Œå¦åˆ™æ‰ç”±åŠ è½½å™¨loader1æœ¬èº«è®°è½½Sampleç±»</p><p>æœ‰ä¸¤ç§ç±»å‹çš„ç±»åŠ è½½å™¨</p><h3 id="Javaè™šæ‹Ÿæœºè‡ªå¸¦çš„åŠ è½½å™¨"><a href="#Javaè™šæ‹Ÿæœºè‡ªå¸¦çš„åŠ è½½å™¨" class="headerlink" title="Javaè™šæ‹Ÿæœºè‡ªå¸¦çš„åŠ è½½å™¨"></a>Javaè™šæ‹Ÿæœºè‡ªå¸¦çš„åŠ è½½å™¨</h3><ol><li>æ ¹ç±»åŠ è½½å™¨ï¼ˆBootstrapï¼‰</li><li>æ‰©å±•ç±»åŠ è½½å™¨ï¼ˆExtensionï¼‰</li><li>ç³»ç»Ÿï¼ˆåº”ç”¨ï¼‰ç±»åŠ è½½å™¨ï¼ˆSystemï¼‰</li></ol><h3 id="ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨"><a href="#ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨" class="headerlink" title="ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨"></a>ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨</h3><ol><li><code>java.lang.ClassLoader</code>çš„å­ç±»</li><li>ç”¨æˆ·å¯ä»¥å®šä¹‰ç±»çš„åŠ è½½æ–¹å¼</li></ol><h3 id="è¯¦ç»†ä»‹ç»ä¸‰ç§ç±»åŠ è½½å™¨"><a href="#è¯¦ç»†ä»‹ç»ä¸‰ç§ç±»åŠ è½½å™¨" class="headerlink" title="è¯¦ç»†ä»‹ç»ä¸‰ç§ç±»åŠ è½½å™¨"></a>è¯¦ç»†ä»‹ç»ä¸‰ç§ç±»åŠ è½½å™¨</h3><p>Javaè™šæ‹Ÿæœºè‡ªå¸¦äº†ä»¥ä¸‹å‡ åŠ è½½å™¨ï¼</p><ol><li>æ ¹(Bootstrap)ç±»åŠ è½½å™¨ï¼šè¯¥åŠ è½½å™¨æ²¡æœ‰çˆ¶åŠ è½½å™¨ï¼Œå®ƒè´Ÿè´£åŠ è½½è™šæ‹Ÿæœºçš„æ ¸å¿ƒç±»åº“ï¼å¦‚<code>java.lang.*</code>ç­‰ã€‚<br>æ ¹ç±»åŠ è½½å™¨ä»ç³»ç»Ÿå±æ€§<code>sun.boot.class.path</code>æ‰€æŒ‡å®šçš„ç›®å½•ä¸­åŠ è½½ç±»åº“ã€‚æ ¹ç±»åŠ è½½å™¨çš„å®ç°ä¾èµ–äºåº•å±‚æ“ä½œç³»ç»Ÿï¼Œå±äºè™šæ‹Ÿæœºçš„å®ç°çš„ä¸€å‰–åˆ†ï¼Œå®ƒå¹¶æ²¡æœ‰ç»§æ‰¿<code>java.lang.ClassLoader</code>ç±»ã€‚</li><li>æ‰©å±•(Extensionï¼‰ç±»åŠ å™¨ï¼šå®ƒçš„çˆ¶åŠ è½½å™¨ä¸ºæ ¹ç±»åŠ è½½å™¨ã€‚å®ƒä»<code>java.ext.dirs</code>ç³»å±æ€§æ‰€æŒ‡å®šçš„ç›®å½•ä¸­åŠ ç±»åï¼Œæˆ–è€…ä»JDKçš„å®‰è£…ç›®å½•<code>jre\lib\ext</code>å­ç›®å½•ï¼ˆæ‰©å±•ç›®å½•ï¼‰ä¸‹åŠ è½½ç±»åº“ï¼Œå¦‚æœæŠŠç”¨æˆ·åˆ›å»ºçš„JARæ–‡ä»¶æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼Œä¹Ÿä¼šè‡ªåŠ¨ç”±æ‰©å±•ç±»åŠ è½½å™¨åŠ è½½ã€‚æ‰©å±•ç±»åŠ è½½å™¨æ˜¯çº¯Javaç±»ï¼Œæ˜¯<code>java.lang.ClassLoader</code>ç±»çš„å­ç±»ã€‚</li><li>ç³»ç»Ÿ(System)ç±»åŠ è½½å™¨ï¼šä¹Ÿç§°ä¸ºåº”ç”¨ç±»åŠ è½½å™¨ï¼å®ƒçš„çˆ¶åŠ è½½å™¨ä¸ºæ‰©å±•ç±»åŠ <br>è½½å™¨ã€‚å®ƒä»ç¯å¢ƒå˜é‡<code>classpath</code>æˆ–è€…ç³»ç»Ÿå±æ€§<code>java.class.path</code>æ‰€æŒ‡å®šçš„ç›®å½•ä¸­åŠ <br>è½½ç±»ï¼Œå®ƒæ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨çš„é»˜è®¤çˆ¶åŠ è½½å™¨ã€‚ç³»ç»Ÿç±»åŠ è½½å™¨æ˜¯çº¯Java<br>ç±»ï¼Œæ˜¯<code>java.lang.ClassLoader</code>ç±»çš„å­ç±»ã€‚</li></ol><h2 id="ç®€ç•¥åŠ è½½è¿‡ç¨‹"><a href="#ç®€ç•¥åŠ è½½è¿‡ç¨‹" class="headerlink" title="ç®€ç•¥åŠ è½½è¿‡ç¨‹"></a>ç®€ç•¥åŠ è½½è¿‡ç¨‹</h2><p>å‚è€ƒï¼š<a href="https://javacodes.cn/464.html">https://javacodes.cn/464.html</a></p><p><img src="/2019/05/03/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%B1%BB%E5%8A%A0%E8%BD%BD2/2.png" alt></p><ul><li>å¦‚æœä¸€ä¸ªç±»åŠ è½½å™¨æ”¶åˆ°äº†ç±»åŠ è½½çš„è¯·æ±‚ï¼Œå®ƒä¸ä¼šå…ˆè‡ªå·±å°è¯•å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œè€Œæ˜¯å§”æ´¾ç»™å®ƒçš„çˆ¶ç±»åŠ è½½å™¨ï¼Œæ‰€æœ‰çš„è¯·æ±‚æœ€ç»ˆéƒ½ä¼šä¼ é€åˆ°é¡¶å±‚çš„å¯åŠ¨ç±»åŠ è½½å™¨</li><li>åªæœ‰å½“çˆ¶ç±»åé¦ˆè‡ªå·±æ— æ³•å®Œæˆè¯¥è¯·æ±‚ï¼ˆå®ƒçš„æœç´¢èŒƒå›´ä¸­æ²¡æœ‰æ‰¾åˆ°æ‰€éœ€çš„ç±»ï¼Œå³æŠ›å‡º<code>ClassNotFoundException</code>ï¼‰æ—¶ï¼Œå­åŠ è½½å™¨æ‰ä¼šå°è¯•è‡ªå·±åŠ è½½ã€‚</li></ul><h1 id="ç±»çš„éªŒè¯"><a href="#ç±»çš„éªŒè¯" class="headerlink" title="ç±»çš„éªŒè¯"></a>ç±»çš„éªŒè¯</h1><p>ç±»è¢«åŠ è½½åï¼Œå°±è¿›å…¥è¿æ¥é˜¶æ®µã€‚è¿æ¥å°±æ˜¯å°†å·²ç»è¯»å…¥åˆ°å†…å­˜çš„ç±»çš„äºŒè¿›åˆ¶æ•°æ®é›†åˆå¹¶åˆ°è™šæ‹Ÿæœºçš„è¿è¡Œæ—¶ç¯å¢ƒå»ã€‚</p><h2 id="ç±»éªŒè¯éƒ¨åˆ†å†…å®¹"><a href="#ç±»éªŒè¯éƒ¨åˆ†å†…å®¹" class="headerlink" title="ç±»éªŒè¯éƒ¨åˆ†å†…å®¹"></a>ç±»éªŒè¯éƒ¨åˆ†å†…å®¹</h2><ol><li>ç±»çš„æ–‡ä»¶ç»“æ„æ£€æŸ¥</li><li>è¯­ä¹‰æ£€æŸ¥</li><li>å­—èŠ‚ç éªŒè¯</li><li>äºŒè¿›åˆ¶å…¼å®¹æ€§çš„éªŒè¯</li></ol><h1 id="ç±»çš„å‡†å¤‡"><a href="#ç±»çš„å‡†å¤‡" class="headerlink" title="ç±»çš„å‡†å¤‡"></a>ç±»çš„å‡†å¤‡</h1><p>åœ¨å‡†å¤‡é˜¶æ®µï¼Œjavaè™šæ‹Ÿæœºä¸ºç±»çš„é™æ€å˜é‡åˆ†é…å†…å­˜ï¼Œå¹¶è®¾ç½®é»˜è®¤çš„åˆå§‹å€¼ã€‚ä¾‹å¦‚å¯¹äºä¸‹é¢çš„Sampleç±»ï¼Œåœ¨å‡†å¤‡é˜¶æ®µï¼Œå°†ä¸ºintç±»å‹çš„é™æ€å˜é‡aåˆ†é…4ä¸ªå­—èŠ‚çš„å†…å­˜ç©ºé—´ï¼Œå¹¶ä¸”èµ‹äºˆé»˜è®¤å€¼0ï¼Œä¸ºlongç±»å‹çš„é™æ€å˜é‡båˆ†é…8ä¸ªå­—èŠ‚çš„å†…å­˜ç©ºé—´ï¼Œå¹¶ä¸”èµ‹äºˆé»˜è®¤å€¼0ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Sample</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> a = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">long</span> b;</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        b = <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ç±»çš„åˆå§‹åŒ–"><a href="#ç±»çš„åˆå§‹åŒ–" class="headerlink" title="ç±»çš„åˆå§‹åŒ–"></a>ç±»çš„åˆå§‹åŒ–</h1><p>åœ¨åˆå§‹åŒ–é˜¶æ®µï¼Œjavaè™šæ‹Ÿæœºæ‰§è¡Œç±»çš„åˆå§‹åŒ–è¯­å¥ï¼Œä¸ºç±»çš„é™æ€å˜é‡èµ‹äºˆåˆå§‹å€¼ã€‚åœ¨ç¨‹åºä¸­ï¼Œé™æ€å˜é‡çš„åˆå§‹åŒ–æœ‰ä¸¤ç§é€”å¾„ï¼š</p><ol><li>åœ¨é™æ€å˜é‡çš„å£°æ˜å¤„è¿›è¡Œåˆå§‹åŒ–</li><li>åœ¨é™æ€ä»£ç å—ä¸­è¿›è¡Œåˆå§‹åŒ–ã€‚</li></ol><p>ä¾‹å¦‚åœ¨ä¸‹é¢ä»£ç ä¸­ï¼Œé™æ€å˜é‡aå’Œbéƒ½è¢«æ˜¾å¼åˆå§‹åŒ–ï¼Œè€Œé™æ€å˜é‡cæ²¡æœ‰è¢«æ˜¾å¼åˆå§‹åŒ–ï¼Œå®ƒå°†ä¿æŒé»˜è®¤å€¼0.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Sample</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> a = <span class="number">1</span>; <span class="comment">//åœ¨é™æ€å˜é‡çš„å£°æ˜å¤„è¿›è¡Œåˆå§‹åŒ–</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">long</span> b;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">long</span> c;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        b = <span class="number">2</span>; <span class="comment">//åœ¨é™æ€ä»£ç å—ä¸­è¿›è¡Œåˆå§‹åŒ–</span></span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é™æ€å˜é‡çš„å£°æ˜è¯­å¥ä¸­ï¼Œä»¥åŠé™æ€ä»£ç å—éƒ½è¢«çœ‹åšç±»çš„åˆå§‹åŒ–è¯­å¥ï¼Œjavaè™šæ‹Ÿæœºä¼šæŒ‰ç…§åˆå§‹åŒ–è¯­å¥åœ¨ç±»æ–‡ä»¶ä¸­çš„å…ˆåé¡ºåºæ¥ä¾æ¬¡æ‰§è¡Œå®ƒä»¬ã€‚ä¾‹å¦‚å½“ä»¥ä¸‹Sampleé›·æ¬§è¢«åˆå§‹åŒ–åï¼Œå®ƒçš„é™æ€å˜é‡açš„å–å€¼ä¸º4.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Sample</span></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> a = <span class="number">1</span>ï¼›</span><br><span class="line">    <span class="keyword">static</span>&#123; a = <span class="number">2</span>; &#125;</span><br><span class="line">    <span class="keyword">static</span>&#123; a = <span class="number">4</span>; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span><span class="params">(Stringa args[])</span></span>&#123;</span><br><span class="line">        System.out.println(a); <span class="comment">//æ‰“å°4</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç±»çš„åˆå§‹åŒ–æ­¥éª¤"><a href="#ç±»çš„åˆå§‹åŒ–æ­¥éª¤" class="headerlink" title="ç±»çš„åˆå§‹åŒ–æ­¥éª¤"></a>ç±»çš„åˆå§‹åŒ–æ­¥éª¤</h2><ol><li>å‡è®¾è¿™ä¸ªç±»è¿˜æ²¡æœ‰è¢«åŠ è½½å’Œè¿æ¥ï¼Œé‚£å°±å…ˆè¿›è¡ŒåŠ è½½å’Œè¿æ¥</li><li>å‡è®¾ç±»å­˜åœ¨ç›´æ¥çˆ¶ç±»ï¼Œå¹¶ä¸”è¿™ä¸ªçˆ¶ç±»è¿˜æ²¡æœ‰å¥½è¢«åˆå§‹åŒ–ï¼Œé‚£å°±å…ˆåˆå§‹åŒ–ç›´æ¥çˆ¶ç±»</li><li>å‡è®¾ç±»ä¸­å­˜åœ¨åˆå§‹åŒ–è¯­å¥ï¼Œé‚£å°±ä¾æ¬¡æ‰§è¡Œè¿™äº›åˆå§‹åŒ–è¯­å¥</li></ol><h2 id="ç±»çš„åˆå§‹åŒ–æ—¶æœº"><a href="#ç±»çš„åˆå§‹åŒ–æ—¶æœº" class="headerlink" title="ç±»çš„åˆå§‹åŒ–æ—¶æœº"></a>ç±»çš„åˆå§‹åŒ–æ—¶æœº</h2><ol><li><p>åˆ›å»ºç±»çš„å®ä¾‹</p></li><li><p>è®¿é—®æŸä¸ªç±»æˆ–æ¥å£çš„é™æ€å˜é‡ï¼Œæˆ–è€…å¯¹è¯¥é™æ€å˜é‡èµ‹å€¼</p></li><li><p>è°ƒç”¨ç±»çš„é™æ€æ–¹æ³•</p></li><li><p>åå°„ï¼ˆå¦‚Class.forName(â€œcom.test.testâ€)ï¼‰</p></li><li><p>åˆå§‹åŒ–ä¸€ä¸ªç±»çš„å­ç±»</p></li><li><p>javaè™šæ‹Ÿæœºå¯åŠ¨æ—¶è¢«æ ‡æ˜ä¸ºå¯åŠ¨ç±»çš„ç±»</p></li><li><p>jdk1.7å¼€å§‹æä¾›åŠ¨æ€è¯­è¨€æ”¯æŒï¼š</p><p><code>java.lang.invoke.MethodHandle</code>å®ä¾‹çš„è§£æç»“æœ<code>REF_getStatic</code>,<code>REF_putStatic</code>,<code>REF_invokeStatic</code>å¥æŸ„å¯¹åº”çš„ç±»æ²¡æœ‰åˆå§‹åŒ–ï¼Œåˆ™åˆå§‹åŒ–</p></li></ol><p>é™¤äº†ä¸Šè¿°7ç§æƒ…å½¢ï¼Œå…¶ä»–ä½¿ç”¨javaç±»çš„æ–¹å¼éƒ½è¢«çœ‹åšæ˜¯è¢«åŠ¨ä½¿ç”¨ï¼Œä¸ä¼šå¯¼è‡´çš„ç±»çš„åˆå§‹åŒ–</p><p>ï¼ˆè°ƒç”¨ClassLoaderç±»çš„loadClassæ–¹æ³•åŠ è½½ä¸€ä¸ªç±»ï¼Œå¹¶ä¸æ˜¯å¯¹ç±»çš„ä¸»åŠ¨ä½¿ç”¨ï¼Œä¸ä¼šå¯¼è‡´ç±»çš„åˆå§‹åŒ–ï¼‰</p><h2 id="æ¥å£åˆå§‹åŒ–"><a href="#æ¥å£åˆå§‹åŒ–" class="headerlink" title="æ¥å£åˆå§‹åŒ–"></a>æ¥å£åˆå§‹åŒ–</h2><p>å½“javaè™šæ‹Ÿæœºåˆå§‹åŒ–ä¸€ä¸ªç±»æ—¶ï¼Œè¦æ±‚å®ƒçš„æ‰€æœ‰çˆ¶ç±»éƒ½å·²ç»è¢«åˆå§‹åŒ–ï¼Œä½†æ˜¯è¿™æ¡è§„åˆ™å¹¶ä¸é€‚ç”¨äºæ¥å£ã€‚</p><ul><li>åœ¨åˆå§‹åŒ–ä¸€ä¸ªç±»æ—¶ï¼Œå¹¶ä¸ä¼šå…ˆåˆå§‹åŒ–å®ƒæ‰€å®ç°çš„æ¥å£</li><li>åœ¨åˆå§‹åŒ–ä¸€ä¸ªæ¥å£æ—¶ï¼Œå¹¶ä¸ä¼šå…ˆåˆå§‹åŒ–å®ƒçš„çˆ¶æ¥å£</li></ul><p>å› æ­¤ï¼Œä¸€ä¸ªçˆ¶æ¥å£å¹¶ä¸ä¼šå› ä¸ºå®ƒçš„å­æ¥å£æˆ–è€…å®ç°ç±»çš„åˆå§‹åŒ–è€Œåˆå§‹åŒ–ã€‚åªæœ‰å½“ç¨‹åºé¦–æ¬¡ä½¿ç”¨ç‰¹å®šæ¥å£çš„é™æ€å˜é‡æ—¶ï¼Œæ‰ä¼šå¯¼è‡´è¯¥æ¥å£çš„åˆå§‹åŒ–</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jvm </tag>
            
            <tag> ç±»çš„åŠ è½½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè™šæ‹Ÿæœºç¬”è®°-ç±»åŠ è½½å™¨åŒäº²å§”æ‰˜æ´¾åˆ¶</title>
      <link href="/2019/05/03/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%9C%BA%E5%88%B6/"/>
      <url>/2019/05/03/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%9C%BA%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<p>jvmç±»åŠ è½½å™¨åŒäº²å§”æ´¾æœºåˆ¶</p><span id="more"></span><p>å¹¶ä¸æ˜¯æ‰€æœ‰çš„jvmè™šæ‹Ÿæœºéƒ½ä½¿ç”¨è¿™ä¸ªæœºåˆ¶ï¼Œåªæ˜¯å¤§éƒ¨åˆ†ï¼Œæ¯”å¦‚è¿˜æœ‰ä½¿ç”¨osgiçš„ã€‚</p><p>åŒäº²å§”ä»»æ¨¡å‹ä¸æ˜¯ä¸€ä¸ªå¼ºåˆ¶æ€§çš„çº¦æŸæ¨¡å‹ï¼Œè€Œæ˜¯ä¸€ä¸ªå»ºè®®å‹çš„ç±»åŠ è½½å™¨å®ç°æ–¹å¼ã€‚åœ¨Javaçš„ä¸–ç•Œä¸­å¤§éƒ¨åˆ†çš„ç±»åŠ è½½å™¨éƒ½éµå¾ªè€…æ¨¡å‹</p><h1 id="ç±»åŠ è½½å™¨çš„åŒäº²å§”æ´¾æœºåˆ¶"><a href="#ç±»åŠ è½½å™¨çš„åŒäº²å§”æ´¾æœºåˆ¶" class="headerlink" title="ç±»åŠ è½½å™¨çš„åŒäº²å§”æ´¾æœºåˆ¶"></a>ç±»åŠ è½½å™¨çš„åŒäº²å§”æ´¾æœºåˆ¶</h1><p>åœ¨åŒäº²å§”æ´¾æœºåˆ¶ä¸­ï¼Œå„ä¸ªåŠ è½½å™¨æŒ‰ç…§çˆ¶å­å…³ç³»å½¢æˆäº†æ ‘å½¢ç»“æ„ï¼ˆé€»è¾‘æ„ä¹‰ï¼‰ï¼Œé™¤äº†æ ¹ç±»åŠ è½½å™¨ä¹‹å¤–ï¼Œå…¶ä½™çš„ç±»åŠ è½½å™¨éƒ½æœ‰ä¸”æœ‰ä¸€ä¸ªçˆ¶åŠ è½½å™¨</p><p><img src="/2019/05/03/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%9C%BA%E5%88%B6/1.png" alt></p><p>æ ¹ç±»åŠ è½½å™¨å’Œæ‰©å±•ç±»åŠ è½½å™¨åªèƒ½åŠ è½½æŒ‡å®šè·¯å¾„çš„é‡Œé¢çš„ç±»ï¼Œè€Œç³»ç»Ÿç±»åŠ è½½å™¨ä¸€èˆ¬å¯ä»¥åŠ è½½æˆ‘ä»¬å·¥ç¨‹ä¸­æ‰€å®šä¹‰çš„ç±»</p><ul><li><p>æ ¹ç±»åŠ è½½å™¨ï¼šç”±c++å®ç°ï¼Œä¸æ˜¯<code>ClassLoader</code>å­ç±»</p></li><li><p>æ‰©å±•ç±»åŠ è½½å™¨ï¼šç”±<code>sun.misc.Launcher$ExtClassLoader</code>å®ç°</p></li></ul><p>ï¼ˆä»£è¡¨ExtClassLoaderæ˜¯sun.misc.Launcherçš„ä¸€ä¸ªå†…éƒ¨ç±»ï¼‰</p><ul><li>ç³»ç»Ÿç±»åŠ è½½å™¨ï¼šç”±<code>sun.misc.Launcher$AppClassLoader</code>å®ç°</li></ul><h1 id="è¿‡ç¨‹å®ä¾‹"><a href="#è¿‡ç¨‹å®ä¾‹" class="headerlink" title="è¿‡ç¨‹å®ä¾‹"></a>è¿‡ç¨‹å®ä¾‹</h1><p><img src="/2019/05/03/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%9C%BA%E5%88%B6/2.png" alt></p><p>Loder1ä¸Loader2æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨ï¼Œä¸¤è€…ä¹‹é—´åˆå½¢æˆäº†çˆ¶å­å…³ç³»</p><ol><li><p>Loder1æƒ³è¦åŠ è½½æˆ‘ä»¬ç¼–å†™çš„Sampleç±»ï¼Œæ ¹æ®ç±»åŠ è½½å™¨çš„åŒäº²å§”æ´¾æœºåˆ¶ï¼Œå¹¶ä¸æ˜¯ç”±Loader1ç›´æ¥åŠ è½½åˆ°è™šæ‹Ÿæœºå½“ä¸­ï¼Œè€Œæ˜¯æŠŠåŠ è½½ä»»åŠ¡å§”æ´¾ç»™Loader1çš„çˆ¶äº²ç³»ç»Ÿç±»åŠ è½½å™¨ï¼Œç³»ç»Ÿç±»åŠ è½½å™¨å†å°†ä»»åŠ¡å§”æ´¾ç»™æ‰©å±•ç±»åŠ è½½å™¨ï¼ŒåŒç†ï¼Œæ‰©å±•ç±»åŠ è½½å™¨å°†ä»»åŠ¡æœ€ç»ˆå§”æ´¾ç»™æ ¹ç±»åŠ è½½å™¨</p></li><li><p>æ ¹ç±»åŠ è½½å™¨å°è¯•å»åŠ è½½ç¼–å†™çš„Sampleç±»ï¼Œæ ¹ç±»åŠ è½½å™¨ä¸èƒ½åŠ è½½Sampleç±»ï¼Œç„¶åæŠŠåŠ è½½ä»»åŠ¡è¿”å›ç»™æ‰©å±•ç±»åŠ è½½å™¨ï¼Œæ‰©å±•ç±»åŠ è½½å™¨ä¹Ÿä¸èƒ½åŠ è½½Sampleç±»ï¼ŒåŒæ ·è¿”å›ç»™ç³»ç»Ÿç±»åŠ è½½å™¨ï¼Œæœ€ç»ˆåŠ è½½æˆåŠŸï¼Œæ¥ç€æŠŠæµç¨‹è¿”å›ç»™Loader1ï¼ŒåŠ è½½è¿‡ç¨‹ç»“æŸã€‚</p></li></ol><ul><li>å¦‚æœä¸€ä¸ªç±»åŠ è½½å™¨æ”¶åˆ°äº†ç±»åŠ è½½çš„è¯·æ±‚ï¼Œå®ƒä¸ä¼šå…ˆè‡ªå·±å°è¯•å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œè€Œæ˜¯å§”æ´¾ç»™å®ƒçš„çˆ¶ç±»åŠ è½½å™¨ï¼Œæ‰€æœ‰çš„è¯·æ±‚æœ€ç»ˆéƒ½ä¼šä¼ é€åˆ°é¡¶å±‚çš„å¯åŠ¨ç±»åŠ è½½å™¨</li><li>åªæœ‰å½“çˆ¶ç±»åé¦ˆè‡ªå·±æ— æ³•å®Œæˆè¯¥è¯·æ±‚ï¼ˆå®ƒçš„æœç´¢èŒƒå›´ä¸­æ²¡æœ‰æ‰¾åˆ°æ‰€éœ€çš„ç±»ï¼Œå³æŠ›å‡º<code>ClassNotFoundException</code>ï¼‰æ—¶ï¼Œå­åŠ è½½å™¨æ‰ä¼šå°è¯•è‡ªå·±åŠ è½½ã€‚</li></ul><h1 id="ä»£ç å®ä¾‹"><a href="#ä»£ç å®ä¾‹" class="headerlink" title="ä»£ç å®ä¾‹"></a>ä»£ç å®ä¾‹</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        Class&lt;?&gt; clazz = Class.forName(<span class="string">&quot;java.lang.String&quot;</span>);</span><br><span class="line">        <span class="comment">/* public ClassLoader getClassLoader()</span></span><br><span class="line"><span class="comment">         * è¿”å›ç±»çš„ç±»åŠ è½½å™¨</span></span><br><span class="line"><span class="comment">         * ä¸€äº›å®ç°å¯èƒ½ä½¿ç”¨nullæ¥è¡¨ç¤ºæ ¹ç±»åŠ è½½å™¨ã€‚</span></span><br><span class="line"><span class="comment">         * å¦‚æœæ­¤ç±»ç”±æ ¹ç±»åŠ è½½å™¨åŠ è½½ï¼Œåˆ™æ­¤æ–¹æ³•å°†åœ¨æ­¤ç±»å®ç°ä¸­è¿”å›nullã€‚</span></span><br><span class="line"><span class="comment">         * å¦‚æœæ­¤å¯¹è±¡è¡¨ç¤ºåŸå§‹ç±»å‹æˆ–ç©ºå€¼ï¼Œåˆ™è¿”å›null</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        System.out.println(clazz.getClassLoader());</span><br><span class="line"></span><br><span class="line">        Class&lt;?&gt; clazz2 = Class.forName(<span class="string">&quot;Main&quot;</span>);</span><br><span class="line">        System.out.println(clazz2.getClassLoader());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*è¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment">null</span></span><br><span class="line"><span class="comment">sun.misc.Launcher$AppClassLoader@18b4aac2</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//18b4aac2æ˜¯å®ƒçš„hash code</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°Mainæ˜¯ç”±ç³»ç»Ÿç±»åŠ è½½å™¨åŠ è½½çš„</p><h1 id="ä¼˜åŠ¿"><a href="#ä¼˜åŠ¿" class="headerlink" title="ä¼˜åŠ¿"></a>ä¼˜åŠ¿</h1><ol><li>å¯ä»¥ç¡®ä¿Javaæ ¸å¿ƒåº“çš„ç±»å‹å®‰å…¨ï¼šæ‰€æœ‰çš„Javaåº”ç”¨éƒ½è‡³å°‘ä¼šå¼•ç”¨<code>java.lang.Object</code>ç±»ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨è¿è¡ŒæœŸï¼Œ<code>java.lang.Object</code>è¿™ä¸ªç±»ä¼šè¢«åŠ è½½åˆ°Javaè™šæ‹Ÿæœºä¸­ï¼›å¦‚æœä¸ªåŠ è½½è¿‡ç¨‹æ˜¯ç”±Javaåº”ç”¨è‡ªå·±ç±»åŠ è½½å™¨æ‰€å®Œæˆçš„ï¼Œé‚£ä¹ˆå¾ˆå¯èƒ½å°±ä¼šåœ¨JVMä¸­å­˜åœ¨å¤šä¸ªç‰ˆæœ¬çš„<code>java.lang.Object</code>ï¼Œè€Œä¸”è¿™äº›ç±»ä¹‹é—´è¿˜æ˜¯ä¸å…¼å®¹çš„ï¼Œç›¸äº’ä¸å¯è§çš„ï¼ˆæ­£æ˜¯å‘½åç©ºé—´åœ¨å‘æŒ¥ç€ä½œç”¨ï¼‰<br>å€ŸåŠ©äºåŒäº²å§”æ‰˜æœºåˆ¶ï¼ŒJavaæ ¸å¿ƒç±»åº“ä¸­çš„ç±»çš„åŠ è½½å·¥ä½œéƒ½æ˜¯ç”±å¯åŠ¨ç±»åŠ è½½å™¨æ¥ç»Ÿä¸€å®Œæˆï¼Œä»è€Œç¡®ä¿äº†Javaåº”ç”¨æ‰€ä½¿ç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ªç‰ˆæœ¬çš„Javaæ ¸å¿ƒç±»åº“ï¼Œä»–ä»¬ä¹‹é—´æ˜¯ç›¸äº’å…¼å®¹çš„ã€‚</li><li>å¯ä»¥ç¡®ä¿Javaæ ¸å¿ƒç±»åº“æ‰€æä¾›çš„ç±»ä¸ä¼šè¢«å®šä¹‰çš„ç±»æ‰€æ›¿ä»£ã€‚</li><li>ä¸åŒçš„ç±»åŠ è½½å™¨å¯ä»¥ä¸ºç›¸åŒåç§°(<code>binaryname</code>)çš„ç±»åˆ›å»ºé¢å¤–çš„å‘½åç©ºé—´ã€‚ç›¸åŒåç§°çš„ç±»å¯ä»¥å¹¶å­˜åœ¨Javaè™šæ‹Ÿæœºä¸­ï¼Œåªéœ€è¦ç”¨ä¸åŒçš„ç±»åŠ è½½å™¨æ¥åŠ è½½ä»–ä»¬å³å¯ã€‚ä¸åŒç±»åŠ è½½å™¨æ‰€åŠ è½½çš„ç±»ä¹‹é—´æ˜¯ä¸å…¼å®¹çš„ï¼Œè¿™å°±ç›¸å½“äºåœ¨Javaè™šæ‹Ÿæœºå†…éƒ¨åˆ›å»ºäº†ä¸€ä¸ªåˆä¸€ä¸ªç›¸äº’éš”ç¦»çš„Javaç±»ç©ºé—´ï¼Œè¿™ç±»æŠ€æœ¯åœ¨å¾ˆå¤šæ¡†æ¶ä¸­éƒ½å¾—åˆ°äº†å®é™…åº”ç”¨ã€‚</li></ol><h1 id="ç ´å"><a href="#ç ´å" class="headerlink" title="ç ´å"></a>ç ´å</h1><p>å‚è€ƒï¼š<a href="https://juejin.im/post/5a59f2296fb9a01ca871eb8c">æ·±å…¥ç†è§£ Tomcatï¼ˆå››ï¼‰Tomcat ç±»åŠ è½½å™¨ä¹‹ä¸ºä½•è¿èƒŒåŒäº²å§”æ´¾æ¨¡å‹</a></p><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒåŒäº²å§”æ´¾æ¨¡å‹æœ‰è¿‡3æ¬¡å¤§è§„æ¨¡çš„â€œè¢«ç ´åâ€çš„æƒ…å†µã€‚</p><h2 id="ç¬¬ä¸€æ¬¡"><a href="#ç¬¬ä¸€æ¬¡" class="headerlink" title="ç¬¬ä¸€æ¬¡"></a>ç¬¬ä¸€æ¬¡</h2><p>åœ¨åŒäº²å§”æ´¾æ¨¡å‹å‡ºç°ä¹‹å‰â€”â€”-å³JDK1.2å‘å¸ƒä¹‹å‰ã€‚</p><h2 id="ç¬¬äºŒæ¬¡"><a href="#ç¬¬äºŒæ¬¡" class="headerlink" title="ç¬¬äºŒæ¬¡"></a>ç¬¬äºŒæ¬¡</h2><p>æ˜¯è¿™ä¸ªæ¨¡å‹è‡ªèº«çš„ç¼ºé™·å¯¼è‡´çš„ã€‚æˆ‘ä»¬è¯´ï¼ŒåŒäº²å§”æ´¾æ¨¡å‹å¾ˆå¥½çš„è§£å†³äº†å„ä¸ªç±»åŠ è½½å™¨çš„åŸºç¡€ç±»çš„ç»Ÿä¸€é—®é¢˜ï¼ˆè¶ŠåŸºç¡€çš„ç±»ç”±è¶Šä¸Šå±‚çš„åŠ è½½å™¨è¿›è¡ŒåŠ è½½ï¼‰ï¼ŒåŸºç¡€ç±»ä¹‹æ‰€ä»¥ç§°ä¸ºâ€œåŸºç¡€â€ï¼Œæ˜¯å› ä¸ºå®ƒä»¬æ€»æ˜¯ä½œä¸ºè¢«ç”¨æˆ·ä»£ç è°ƒç”¨çš„APIï¼Œ ä½†æ²¡æœ‰ç»å¯¹ï¼Œ<strong>å¦‚æœåŸºç¡€ç±»è°ƒç”¨ä¼šç”¨æˆ·çš„ä»£ç </strong>æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>è¿™ä¸æ˜¯æ²¡æœ‰å¯èƒ½çš„ã€‚ä¸€ä¸ªå…¸å‹çš„ä¾‹å­å°±æ˜¯JNDIæœåŠ¡ï¼ŒJNDIç°åœ¨å·²ç»æ˜¯Javaçš„æ ‡å‡†æœåŠ¡ï¼Œå®ƒçš„ä»£ç ç”±å¯åŠ¨ç±»åŠ è½½å™¨å»åŠ è½½ï¼ˆåœ¨JDK1.3æ—¶å°±æ”¾è¿›å»çš„rt.jarï¼‰,ä½†å®ƒéœ€è¦è°ƒç”¨ç”±ç‹¬ç«‹å‚å•†å®ç°å¹¶éƒ¨ç½²åœ¨åº”ç”¨ç¨‹åºçš„ClassPathä¸‹çš„JNDIæ¥å£æä¾›è€…ï¼ˆSPIï¼Œ Service Provider Interfaceï¼‰çš„ä»£ç ï¼Œä½†å¯åŠ¨ç±»åŠ è½½å™¨ä¸å¯èƒ½â€œè®¤è¯†â€œè¿™äº›ä»£ç å•Šã€‚å› ä¸ºè¿™äº›ç±»ä¸åœ¨rt.jarä¸­ï¼Œä½†æ˜¯å¯åŠ¨ç±»åŠ è½½å™¨åˆéœ€è¦åŠ è½½ã€‚æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒJavaè®¾è®¡å›¢é˜Ÿåªå¥½å¼•å…¥äº†ä¸€ä¸ªä¸å¤ªä¼˜é›…çš„è®¾è®¡ï¼š<strong>çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ï¼ˆThread Context ClassLoaderï¼‰</strong>ã€‚è¿™ä¸ªç±»åŠ è½½å™¨å¯ä»¥é€šè¿‡java.lang.Threadç±»çš„setContextClassLoaderæ–¹æ³•è¿›è¡Œè®¾ç½®ã€‚å¦‚æœåˆ›å»ºçº¿ç¨‹æ—¶è¿˜æœªè®¾ç½®ï¼Œå®ƒå°†ä¼šä»çˆ¶çº¿ç¨‹ä¸­ç»§æ‰¿ä¸€ä¸ªï¼Œå¦‚æœåœ¨åº”ç”¨ç¨‹åºçš„å…¨å±€èŒƒå›´å†…éƒ½æ²¡æœ‰è®¾ç½®è¿‡å¤šçš„è¯ï¼Œé‚£è¿™ä¸ªç±»åŠ è½½å™¨é»˜è®¤å³ä½¿åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ã€‚</p><p>å˜¿å˜¿ï¼Œæœ‰äº†çº¿ç¨‹ä¸Šä¸‹æ–‡åŠ è½½å™¨ï¼ŒJNDIæœåŠ¡ä½¿ç”¨è¿™ä¸ªçº¿ç¨‹ä¸Šä¸‹æ–‡åŠ è½½å™¨å»åŠ è½½æ‰€éœ€è¦çš„SPIä»£ç ï¼Œä¹Ÿå°±æ˜¯çˆ¶ç±»åŠ è½½å™¨è¯·æ±‚å­ç±»åŠ è½½å™¨å»å®Œæˆç±»åŠ è½½çš„åŠ¨ä½œï¼Œè¿™ç§è¡Œä¸ºå®é™…ä¸Šå°±æ˜¯æ‰“é€šäº†åŒäº²å§”æ´¾æ¨¡å‹çš„å±‚æ¬¡ç»“æ„æ¥é€†å‘ä½¿ç”¨ç±»åŠ è½½å™¨ï¼Œå®é™…ä¸Šå·²ç»è¿èƒŒäº†åŒäº²å§”æ´¾æ¨¡å‹çš„ä¸€èˆ¬æ€§åŸåˆ™ã€‚ä½†è¿™æ— å¯å¥ˆä½•ï¼ŒJavaä¸­æ‰€æœ‰æ¶‰åŠSPIçš„åŠ è½½åŠ¨ä½œåŸºæœ¬èƒœéƒ½é‡‡ç”¨è¿™ç§æ–¹å¼ã€‚ä¾‹å¦‚JNDIï¼Œ<strong>JDBC</strong>ï¼ŒJCEï¼ŒJAXBï¼ŒJBIç­‰ã€‚</p><h2 id="ç¬¬ä¸‰æ¬¡"><a href="#ç¬¬ä¸‰æ¬¡" class="headerlink" title="ç¬¬ä¸‰æ¬¡"></a>ç¬¬ä¸‰æ¬¡</h2><p>ä¸ºäº†å®ç°çƒ­æ’æ‹”ï¼Œçƒ­éƒ¨ç½²ï¼Œæ¨¡å—åŒ–ï¼Œæ„æ€æ˜¯æ·»åŠ ä¸€ä¸ªåŠŸèƒ½æˆ–å‡å»ä¸€ä¸ªåŠŸèƒ½ä¸ç”¨é‡å¯ï¼Œåªéœ€è¦æŠŠè¿™æ¨¡å—è¿åŒç±»åŠ è½½å™¨ä¸€èµ·æ¢æ‰å°±å®ç°äº†ä»£ç çš„çƒ­æ›¿æ¢ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jvm </tag>
            
            <tag> åŒäº²å§”æ´¾æœºåˆ¶ </tag>
            
            <tag> ç±»çš„è®°è½½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å•è°ƒæ ˆ</title>
      <link href="/2019/04/29/%E5%8D%95%E8%B0%83%E6%A0%88/"/>
      <url>/2019/04/29/%E5%8D%95%E8%B0%83%E6%A0%88/</url>
      
        <content type="html"><![CDATA[<p>å•è°ƒæ ˆåŠpoj2559</p><span id="more"></span><h1 id="å•è°ƒæ ˆ"><a href="#å•è°ƒæ ˆ" class="headerlink" title="å•è°ƒæ ˆ"></a>å•è°ƒæ ˆ</h1><p>ä»€ä¹ˆæ˜¯å•è°ƒæ ˆï¼Ÿé¡¾åæ€ä¹‰ï¼Œå•è°ƒæ ˆé¦–å…ˆæ˜¯ä¸€ä¸ªæ ˆï¼Œå¹¶ä¸”æ ˆå†…çš„å…ƒç´ çš„å¤§å°æŒ‰ç…§ä»–ä»¬æ‰€åœ¨æ ˆå†…çš„ä½ç½®ï¼Œæ»¡è¶³ä¸€å®šçš„å•è°ƒæ€§ã€‚</p><p>æ¯”å¦‚æœ‰ä¸€æ•°ç»„{1,3,232,23,24,3324,-1}ï¼Œç»´æŠ¤å…¶å•è°ƒé€’å‡æ ˆï¼Œæ•°ç»„å·¦è¾¹ä¸ºæ ˆé¡¶</p><p>é¦–å…ˆï¼Œæ ˆä¸ºç©ºï¼Œå…¥æ ˆ[1]</p><p>åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ 3ï¼Œå› ä¸º3&gt;1ï¼Œæ‰€ä»¥å…¥æ ˆï¼Œæ­¤æ—¶æ ˆ[3,1]</p><p>æ¥ç€ä¸‹ä¸€ä¸ªå…ƒç´ 232ï¼Œå› ä¸º232&gt;3ï¼Œæ‰€ä»¥å…¥æ ˆï¼Œæ­¤æ—¶æ ˆ[232,3,1]</p><p>æ¥ç€ä¸‹ä¸€ä¸ªå…ƒç´ 23ï¼Œå› ä¸º232&lt;23ï¼Œæ‰€ä»¥232å‡ºæ ˆï¼Œæ­¤æ—¶æ ˆ[3,1]ï¼Œå› ä¸º3&lt;23ï¼Œæ‰€ä»¥å…¥æ ˆï¼Œæ­¤æ—¶æ ˆ[23,3,1]</p><p>æ¥ç€ä¸‹ä¸€ä¸ªå…ƒç´ 3324ï¼Œå› ä¸º3324&gt;23ï¼Œæ‰€ä»¥å…¥æ ˆï¼Œæ­¤æ—¶æ ˆ[3324,23,3,1]</p><p>æ¥ç€ä¸‹ä¸€ä¸ªå…ƒç´ -1ï¼Œå› ä¸º3324&gt;-1ï¼Œæ‰€ä»¥å‡ºæ ˆï¼Œæ­¤æ—¶æ ˆ[23,3,1]ï¼Œå› ä¸º23&gt;-1ï¼Œæ‰€ä»¥å‡ºæ ˆï¼Œæ­¤æ—¶æ ˆ[3,1]ï¼Œå› ä¸º3&gt;-1ï¼Œå‡ºæ ˆï¼Œæ­¤æ—¶æ ˆ[1]ï¼Œå› ä¸º1&gt;-1ï¼Œå‡ºæ ˆï¼Œæ­¤æ—¶æ ˆä¸ºç©ºï¼Œå°†-1å…¥æ ˆï¼Œæ­¤æ—¶æ ˆ[-1]</p><h1 id="æ¨¡æ¿é¢˜â€”poj2559"><a href="#æ¨¡æ¿é¢˜â€”poj2559" class="headerlink" title="æ¨¡æ¿é¢˜â€”poj2559"></a><a href="http://poj.org/problem?id=2559">æ¨¡æ¿é¢˜â€”poj2559</a></h1><p><img src="/2019/04/29/%E5%8D%95%E8%B0%83%E6%A0%88/timu.png" alt></p><h2 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h2><p>å‚è€ƒï¼š<a href="https://www.zybuluo.com/Chilling/note/633014">https://www.zybuluo.com/Chilling/note/633014</a></p><p>é¢˜æ„ï¼šç»™å‡ºå‡ ä¸ªè¿ç»­çš„å®½ä¸º1çš„æœ¨æ¿çš„é«˜åº¦ï¼Œæ±‚æœ¨æ¿æ„æˆçŸ©å½¢çš„æœ€å¤§é¢ç§¯ã€‚</p><p>å°†æœ¨æ¿çš„é•¿å’Œå®½ï¼ˆhï¼Œwï¼‰å‹å…¥æ ˆä¸­ï¼Œè‹¥ä¸‹ä¸€ä¸ªæœ¨æ¿çš„é«˜åº¦å¤§äºç­‰äºå½“å‰æ ˆé¡¶çš„ï¼Œé‚£ä¹ˆä¾æ¬¡å¼¹å‡ºæ ˆä¸­çš„æœ¨æ¿ï¼Œå¹¶ä¸”ç´¯åŠ ä»–ä»¬çš„å®½åº¦ï¼Œæ›´æ–°æœ€å¤§é¢ç§¯ï¼Œè´ªå¿ƒé€‰æ‹©å½“å‰æœ€é«˜çŸ©å½¢èƒ½è¿ç»­çš„ä½ç½®</p><p>ä¸¾ä¾‹ï¼š</p><p>(xï¼Œy)ä¸ºä¸€ç»“æ„ä½“ï¼Œxè¡¨ç¤ºçŸ©å½¢çš„é«˜ï¼Œyä¸ºçŸ©å½¢çš„å®½ã€‚<br>ç»™å‡ºçš„ä¾‹å­ï¼š2ï¼Œ1ï¼Œ4ï¼Œ5ï¼Œ1ï¼Œ3ï¼Œ3ï¼Œæ•°ç»„å·¦è¾¹ä¸ºæ ˆé¡¶</p><ol><li>å…¥æ ˆï¼š <code>(2,1)</code></li><li>ä¸‹ä¸€ä¸ªé«˜åº¦ä¸º1ï¼Œä½†æ˜¯æ ˆé¡¶é«˜åº¦ä¸º2ï¼Œå¤§äº1ï¼Œè¯´æ˜é«˜åº¦ä¸º2çš„çŸ©å½¢ä¸èƒ½å»¶ç»­åˆ°å½“å‰çŸ©å½¢ï¼Œé‚£ä¹ˆåˆ é™¤(2ï¼Œ1)ï¼Œç´¯åŠ å®½åº¦ï¼Œå¹¶ä¸”æ›´æ–°æœ€å¤§é¢ç§¯2ï¼Œï¼ˆ1ï¼Œ2ï¼‰å…¥æ ˆï¼›<code>(1,2)</code></li><li><p>(4ï¼Œ1)å…¥æ ˆï¼š<code>(4,1)(1,2)</code></p></li><li><p>(5ï¼Œ1)å…¥æ ˆï¼š<code>(5,1)(4,1)(1,2)</code></p></li><li><p>ä¸‹ä¸€ä¸ªé«˜åº¦ä¸º1ï¼Œä½†æ˜¯æ ˆé¡¶é«˜åº¦ä¸º5ï¼Œå¤§äº1ï¼Œé‚£ä¹ˆåˆ é™¤(5ï¼Œ1)ï¼Œæ›´æ–°æœ€å¤§çŸ©å½¢é¢ç§¯ä¸º5ï¼ŒæŠŠ1ç´¯åŠ åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå¾—åˆ°(4ï¼Œ2)ï¼Œä»ç„¶å¤§äº1ï¼Œåˆ é™¤(4ï¼Œ2)ï¼Œæ›´æ–°æœ€å¤§çŸ©å½¢é¢ç§¯ä¸º8ï¼ŒæŠŠ2ç´¯åŠ åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå¾—åˆ°(1ï¼Œ4)ï¼Œé¢ç§¯ä¸º4å°äº8ï¼Œä¸å¿…æ›´æ–°ï¼Œåˆ é™¤(1ï¼Œ4)ï¼ŒæŠŠ4ç´¯åŠ åˆ°å½“å‰å‡†å¤‡è¿›æ ˆçš„å…ƒç´ ï¼Œ(1ï¼Œ5)è¿›æ ˆ</p></li><li>(3ï¼Œ1)è¿›æ ˆï¼š<code>(3,1)(1,5)</code></li><li>ä¸‹ä¸€ä¸ªé«˜åº¦ä¸º3ï¼Œä½†æ˜¯æ ˆé¡¶é«˜åº¦ä¹Ÿä¸º3ï¼Œåˆ é™¤(3ï¼Œ1)ä¸å¿…æ›´æ–°ï¼ŒæŠŠ1ç´¯åŠ åˆ°å½“å‰å‡†å¤‡è¿›æ ˆçš„å…ƒç´ ï¼Œ(3ï¼Œ2)è¿›æ ˆ: <code>(3,2)(1,5)</code></li><li>æ ˆéç©ºæ—¶ï¼Œä¾æ¬¡å‡ºæ ˆï¼›é¦–å…ˆ(3ï¼Œ2)å‡ºæ ˆï¼Œä¸å¿…æ›´æ–°ï¼ŒæŠŠ2ç´¯åŠ åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå½“å‰æ ˆä¸º(1ï¼Œ7)ï¼Œ(1ï¼Œ7)å‡ºæ ˆï¼Œä¸å¿…æ›´æ–°ã€‚<br>æ ˆç©ºï¼Œç»“æŸã€‚<br>æœ€åçš„ç­”æ¡ˆå°±æ˜¯8</li></ol><p><img src="/2019/04/29/%E5%8D%95%E8%B0%83%E6%A0%88/1.png" alt></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">c++: 2812K375MS</span></span><br><span class="line"><span class="comment">2019-04-29 20:57:30</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    LL h,w; <span class="comment">//çŸ©å½¢çš„é«˜ï¼Œå®½</span></span><br><span class="line">&#125;a[<span class="number">100005</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    LL n;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,&amp;n) &amp;&amp; n)</span><br><span class="line">    &#123;</span><br><span class="line">        LL ans=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>, &amp;a[i].h);</span><br><span class="line">            a[i].w = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        stack&lt;node&gt;q;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ;i &lt; n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            LL temp = <span class="number">0</span>;</span><br><span class="line">            <span class="comment">//æ ˆä¸ä¸ºç©º&amp;&amp;æ ˆé¡¶çš„å€¼&gt;=å½“å‰å…ƒç´ çš„å€¼ï¼Œå‡ºæ ˆå·²ç»æ›´æ–°é¢ç§¯å€¼</span></span><br><span class="line">            <span class="keyword">while</span>(!q.<span class="built_in">empty</span>() &amp;&amp; q.<span class="built_in">top</span>().h &gt;= a[i].h) </span><br><span class="line">            &#123;</span><br><span class="line">                LL x = q.<span class="built_in">top</span>().h*(q.<span class="built_in">top</span>().w+temp); <span class="comment">//è®¡ç®—é¢ç§¯</span></span><br><span class="line">                ans = <span class="built_in">max</span>(ans,x);</span><br><span class="line">                temp += q.<span class="built_in">top</span>().w; <span class="comment">//å åŠ å®½</span></span><br><span class="line">                q.<span class="built_in">pop</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            node next;</span><br><span class="line">            next.h = a[i].h;</span><br><span class="line">            next.w = <span class="number">1</span>+temp;</span><br><span class="line">            q.<span class="built_in">push</span>(next); <span class="comment">//å…ƒç´ è¿›æ ˆ</span></span><br><span class="line">        &#125;</span><br><span class="line">                LL temp=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(!q.<span class="built_in">empty</span>()) <span class="comment">//éå†å®Œæ‰€æœ‰å…ƒç´ ï¼Œä½†æ˜¯æ ˆè¿˜æœ‰å…ƒç´ </span></span><br><span class="line">        &#123;</span><br><span class="line">            LL x = q.<span class="built_in">top</span>().h*(q.<span class="built_in">top</span>().w+temp);</span><br><span class="line">            ans = <span class="built_in">max</span>(ans,x);</span><br><span class="line">            temp += q.<span class="built_in">top</span>().w;</span><br><span class="line">            q.<span class="built_in">pop</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å•è°ƒæ ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å•è°ƒé˜Ÿåˆ—</title>
      <link href="/2019/04/26/%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97/"/>
      <url>/2019/04/26/%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97/</url>
      
        <content type="html"><![CDATA[<p>å•è°ƒé˜Ÿåˆ—åŠå…¶ä¼˜åŒ–dp</p><span id="more"></span><h1 id="å•è°ƒé˜Ÿåˆ—"><a href="#å•è°ƒé˜Ÿåˆ—" class="headerlink" title="å•è°ƒé˜Ÿåˆ—"></a>å•è°ƒé˜Ÿåˆ—</h1><p><strong><a href="http://poj.org/problem?id=2823">poj2823â€”Sliding Window</a></strong></p><p><img src="/2019/04/26/%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97/timu.png" alt></p><p>å¤§æ„ï¼šç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸ºNçš„æ•°ç»„ï¼Œä¸€ä¸ªé•¿ä¸ºKçš„æ»‘åŠ¨çš„çª—ä½“ä»æœ€å·¦ç§»è‡³æœ€å³ç«¯ï¼Œä½ åªèƒ½è§åˆ°çª—å£çš„Kä¸ªæ•°ï¼Œæ¯æ¬¡çª—ä½“å‘å³ç§»åŠ¨ä¸€ä½ï¼Œä½ çš„ä»»åŠ¡æ˜¯æ‰¾å‡ºçª—ä½“æ¯ä¸ªæ—¶åˆ»ä¸­çš„æœ€å¤§å€¼ä¸æœ€å°å€¼</p><h2 id="ä¼˜å…ˆé˜Ÿåˆ—"><a href="#ä¼˜å…ˆé˜Ÿåˆ—" class="headerlink" title="ä¼˜å…ˆé˜Ÿåˆ—"></a>ä¼˜å…ˆé˜Ÿåˆ—</h2><p>ä¼˜å…ˆé˜Ÿåˆ—èƒ½å¤Ÿè¿›è¡Œæ’åºï¼Œçª—å£å¾€å³ä¸€ä½ï¼Œå°±æŠŠä¸€ä¸ªå…ƒç´ æ”¾åˆ°é˜Ÿåˆ—é‡Œé¢ï¼Œç„¶åæ¯æ¬¡å–é˜Ÿé¦–å…ƒç´ ï¼Œå¦‚æœé˜Ÿé¦–å…ƒç´ çš„idåœ¨è¿™ä¸ªæ¡†çš„èŒƒå›´å†…çš„è¯ï¼Œé‚£ä¹ˆå°±å–é˜Ÿé¦–ï¼Œå¦‚æœä¸æ˜¯çš„è¯é‚£ä¹ˆå°±å‡ºé˜Ÿï¼Œæ‰¾ä¸‹ä¸€ä¸ªé˜Ÿé¦–å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(nlogn)</p><h2 id="å¯¹ä¼˜å…ˆé˜Ÿåˆ—æ”¹è‰¯â€”å•è°ƒé˜Ÿåˆ—O-n"><a href="#å¯¹ä¼˜å…ˆé˜Ÿåˆ—æ”¹è‰¯â€”å•è°ƒé˜Ÿåˆ—O-n" class="headerlink" title="å¯¹ä¼˜å…ˆé˜Ÿåˆ—æ”¹è‰¯â€”å•è°ƒé˜Ÿåˆ—O(n)"></a>å¯¹ä¼˜å…ˆé˜Ÿåˆ—æ”¹è‰¯â€”å•è°ƒé˜Ÿåˆ—O(n)</h2><p><strong>åŸºæœ¬æ€æƒ³ï¼šåŒæ ·ç»´æŠ¤é˜Ÿé¦–å…ƒç´ ä½œä¸ºç­”æ¡ˆï¼Œå»æ‰å¤šä½™çš„å…ƒç´ ï¼ˆç»´æŠ¤å•è°ƒæ€§ï¼‰</strong></p><p>å› ä¸ºæ˜¯æ±‚æœ€å¤§å€¼ï¼Œæ‰€ä»¥ç»´æŠ¤ä¸€ä¸ªå•è°ƒé€’å‡é˜Ÿåˆ—ï¼Œå…¶é˜Ÿé¦–å°±æ˜¯æœ€å¤§å€¼ï¼Œå°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç­”æ¡ˆ</p><div class="table-container"><table><thead><tr><th></th><th>L</th><th>L+1</th><th>â€¦â€¦</th><th>R-1</th><th>R</th></tr></thead><tbody><tr><td>ç¼–å·</td><td>A[L]</td><td>A[L+1]</td><td>â€¦â€¦</td><td>A[R-1]</td><td>A[R]</td></tr><tr><td>å€¼</td><td>B[L]</td><td>B[L+1]</td><td>â€¦â€¦</td><td>B[R-1]</td><td>B[R+1]</td></tr></tbody></table></div><p>ä¸Šé¢å•è°ƒ<strong>é€’å‡</strong>é˜Ÿåˆ—æ»¡è¶³ï¼š</p><p><code>A[i+1]&gt;A[i]&gt;A[i-1] &amp;&amp; B[i-1]&gt;B[i]&gt;B[i+1]ï¼ˆR&gt;i&gt;Lï¼‰</code></p><p>å•è°ƒé˜Ÿåˆ—é‡Œé¢çš„æ¯ä¸€ä¸ªå…ƒç´ ä¸€èˆ¬ç”¨ä¸€ä¸ªäºŒå…ƒç»„(id, val)æ¥è¡¨ç¤ºï¼Œæ¯æ¬¡ä»é˜Ÿå°¾å…¥é˜Ÿï¼Œåˆ é™¤é˜Ÿå°¾çš„æ— ç”¨å…ƒç´ ï¼Œä¿è¯ç¼–å·é€’å¢ï¼Œå€¼é€’å‡</p><p><img src="/2019/04/26/%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97/1.png" alt></p><p>å¦‚ä¸Šå›¾ï¼Œå½“æœ‰ä¸€å…ƒç´ Aè¦å…¥é˜Ÿæ—¶ï¼Œä¸ºäº†ä¿è¯é˜Ÿä¸­çš„å•è°ƒæ€§ï¼Œéœ€è¦åˆ é™¤é˜Ÿå°¾ä¸¤ä¸ªå…ƒç´ ï¼ŒAæ‰èƒ½å…¥é˜Ÿï¼Œå•è°ƒæ€§å¾—åˆ°äº†ä¿è¯ï¼Œåˆ é™¤é˜Ÿå°¾çš„é‚£ä¸¤ä¸ªå…ƒç´ ï¼Œå°±æ˜¯ä¸Šé¢è¯´çš„â€œæ— ç”¨å…ƒç´ â€</p><hr><p>ä¸‹é¢ä¸¾ä¾‹æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Œåˆšå¼€å§‹åªæœ‰[1,1]ï¼Œæ‰€ä»¥äºŒå…ƒç»„çš„å€¼ä¸º(1,1)ï¼Œæ¥ç€æ‰©å¤§åŒºé—´ï¼Œç¬¬äºŒä¸ªå…ƒç´ å…ƒç´ å‡†å¤‡å…¥é˜Ÿï¼Œæ­¤æ—¶3è¦æ¯”-1å¤§ï¼Œæ‰€ä»¥å»æ‰é˜Ÿå°¾å…ƒç´ ï¼Œç„¶ååˆ¤æ–­é˜Ÿé¦–å…ƒç´ idå±ä¸å±äºå½“å‰åŒºé—´ï¼Œæ˜¯çš„è¯å°±å–é˜Ÿé¦–ä¸ºæœ€å¤§å€¼ï¼Œå¦åˆ™å»æ‰é˜Ÿé¦–ï¼Œç›´åˆ°æ»¡è¶³æ¡ä»¶ã€‚å¦‚æœå‡†å¤‡å…¥é˜Ÿçš„å…ƒç´ å°äºé˜Ÿå°¾çš„å…ƒç´ ï¼Œç›´æ¥å…¥é˜Ÿï¼Œç„¶ååˆ¤æ–­é˜Ÿé¦–æ˜¯ä¸æ˜¯å±äºå½“å‰åŒºé—´ï¼Œæ¥ç€å–æœ€å¤§å€¼ï¼Œä¸æ˜¯åˆ™å»é˜Ÿé¦–ã€‚</p><p><img src="/2019/04/26/%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97/2.png" alt></p><p><strong>æ¯ä¸ªå…ƒç´ éƒ½åªä¼šè¿›é˜Ÿå’Œå‡ºé˜Ÿä¸€æ¬¡ï¼Œæ•…æ—¶é—´å¤æ‚åº¦ä¸ºO(n)</strong></p><p><strong>æœ¬è´¨ä½œç”¨ï¼šåœ¨è¿è¡Œçš„è¿‡ç¨‹ä¸­èƒ½å¤Ÿå¿«é€Ÿéœ€æ±‚å‰kä¸ªæˆ–åkä¸ªä¸­çš„æœ€å€¼</strong></p><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>å‚è€ƒï¼š<a href="http://zory.coding.me/posts/e1c7.html">http://zory.coding.me/posts/e1c7.html</a></p><p>å•è°ƒé˜Ÿåˆ—å¯ä»¥ç”¨STLçš„dequeå®ç°ï¼Œä¹Ÿå¯ä»¥æ‰‹å†™æ•°ç»„å®ç°ã€‚</p><p>ä¸¤ç§å®ç°æ•ˆç‡æ¯”è¾ƒï¼šæ•°ç»„ä¼˜äºdeque</p><p><strong>å› ä¸ºç³»ç»Ÿè‡ªå¸¦å®¹å™¨ä¸æ–¹ä¾¿è€Œä¸”ä¸æ˜“è°ƒè¯•ï¼ŒåŒæ—¶ï¼Œæ¯ä¸ªæ•°åªä¼šè¿›å»ä¸€æ¬¡ï¼Œæ‰€ä»¥ï¼Œæ•°ç»„ç»å¯¹ä¸ä¼šçˆ†ï¼Œç©ºé—´ä¹Ÿæ˜¯Sï¼ˆNï¼‰ï¼Œä¼˜äºå †æˆ–çº¿æ®µæ ‘ç­‰æ•°æ®ç»“æ„</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">C++: 5604K5360MS</span></span><br><span class="line"><span class="comment">2019-04-28 21:18:27</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1E6</span>+<span class="number">10</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> pos, val; <span class="comment">//ä½ç½®ä¸å€¼çš„äºŒå…ƒç»„</span></span><br><span class="line">&#125;q1[MAXN], q2[MAXN];</span><br><span class="line"><span class="keyword">int</span> arr[MAXN];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GetMax</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> Front = <span class="number">1</span>, Back = <span class="number">0</span>; <span class="comment">//é˜Ÿé¦–ä¸é˜Ÿå°¾</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//é˜Ÿä¸ä¸ºç©º&amp;&amp;é˜Ÿå°¾å…ƒç´ å¤§äºè¦è¿›é˜Ÿçš„å…ƒç´ </span></span><br><span class="line">        <span class="keyword">while</span>(Back &gt;= Front &amp;&amp; q1[Back].val &gt;= arr[i]) </span><br><span class="line">            Back--; <span class="comment">//å‡ºé˜Ÿ</span></span><br><span class="line">        <span class="comment">//å› ä¸ºé‚£ä¸ªwhileå¾ªç¯åœ¨åˆšå¥½æ»¡è¶³çš„æ¡ä»¶é€€å‡ºï¼Œæ‰€ä»¥å¾—è¿›ä¸€æ­¥å¤„ç†ä¸‹ä¸€ä¸ªä¸æ»¡è¶³è¦æ±‚çš„</span></span><br><span class="line">        Back++;</span><br><span class="line">        q1[Back].val = arr[i]; <span class="comment">//è¿›é˜Ÿ</span></span><br><span class="line">        q1[Back].pos = i;</span><br><span class="line">        <span class="keyword">while</span>(Back &gt;= Front &amp;&amp; q1[Front].pos + m - <span class="number">1</span> &lt; i) <span class="comment">//åˆ¤æ–­é˜Ÿé¦–åœ¨ä¸åœ¨å½“å‰åŒºé—´</span></span><br><span class="line">            Front++; <span class="comment">//å»é˜Ÿé¦–</span></span><br><span class="line">        <span class="keyword">if</span>(i &gt;= m)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, q1[Front].val);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GetMin</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> Front = <span class="number">1</span>, Back = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(Back &gt;= Front &amp;&amp; q2[Back].val &lt;= arr[i])</span><br><span class="line">            Back--;</span><br><span class="line">        Back++;</span><br><span class="line">        q2[Back].val = arr[i];</span><br><span class="line">        q2[Back].pos = i;</span><br><span class="line">        <span class="keyword">while</span>(Back &gt;= Front &amp;&amp; q2[Front].pos + m - <span class="number">1</span> &lt; i)</span><br><span class="line">            Front++;</span><br><span class="line">        <span class="keyword">if</span>(i &gt;= m)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, q2[Front].val);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;arr[i]);</span><br><span class="line">    <span class="built_in">GetMax</span>();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    <span class="built_in">GetMin</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–dp"><a href="#å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–dp" class="headerlink" title="å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–dp"></a>å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–dp</h2><p>å½¢å¦‚çš„dp</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f[i] = <span class="built_in">min</span>(f[j] | Low[i] &lt;= j &lt;= Up[i]) + a[i]</span><br></pre></td></tr></table></figure><p>Lowå’ŒUpæ˜¯å…³äºiçš„å•è°ƒä¸ä¸‹é™å‡½æ•°ï¼ˆå› ä¸ºæ˜¯æ±‚minï¼Œé˜Ÿé¦–ä¸ºæœ€å°å€¼ï¼‰</p><p>ä¾‹å¦‚ä¸‹é¢ä¸¾ä¾‹<code>Low[i] &lt;= j &lt;= Up[i]</code>ä¸ºé˜´å½±ï¼Œé‚£ä¹ˆæ±‚i+1çš„æ—¶å€™ï¼Œé˜´å½±çš„å·¦å³ç«¯ç‚¹ä¸èƒ½å¾€å·¦ç§»åŠ¨ï¼Œè¿™æ ·æ‰èƒ½ç”¨å•è°ƒé˜Ÿåˆ—æ±‚è§£ï¼Œå› ä¸ºå•è°ƒé˜Ÿåˆ—ä¸€ç›´éƒ½æ˜¯ä»å¤´å¤„ç†åˆ°å°¾ï¼Œå¦‚æœè¿”å›çš„æ—¶é—´å¤æ‚åº¦å°±å¯èƒ½ä¸æ˜¯O(logn)äº†</p><p><img src="/2019/04/26/%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97/3.png" alt></p><h2 id="å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–å¤šé‡èƒŒåŒ…å®ä¾‹"><a href="#å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–å¤šé‡èƒŒåŒ…å®ä¾‹" class="headerlink" title="å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–å¤šé‡èƒŒåŒ…å®ä¾‹"></a>å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–å¤šé‡èƒŒåŒ…å®ä¾‹</h2><p><strong><a href="http://codevs.cn/problem/5429/">Codevs5249</a></strong></p><p><img src="/2019/04/26/%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97/timu2.png" alt></p><p><img src="/2019/04/26/%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97/timu1.png" alt></p><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/ylsoi/article/details/80238116">https://blog.csdn.net/ylsoi/article/details/80238116</a></p><p>é¢˜æ„ï¼š</p><p>ä½ æœ‰ä¸€ä¸ªå®¹é‡ä¸ºMçš„èƒŒåŒ…ï¼Œå’ŒNç§ç‰©å“ã€‚<br>æ¯ç§ç‰©å“éƒ½æœ‰ä¸‰ä¸ªå±æ€§ï¼Œviï¼Œwiï¼Œä¸ciï¼Œåˆ†åˆ«è¡¨ç¤ºè¿™ç§ç‰©å“çš„ä½“ç§¯ã€ä»·å€¼å’Œä»¶æ•°ã€‚<br>ä½ çš„ä»»åŠ¡æ˜¯ï¼Œä»è¿™äº›æ‰€ç»™ç‰©å“ä¸­ï¼Œé€‰å‡ºè‹¥å¹²ä»¶ï¼Œå…¶ä½“ç§¯ä¹‹å’Œä¸èƒ½è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œå¹¶ä¸”ä½¿æ‰€é€‰ç‰©å“çš„æƒå€¼çš„å’Œæœ€å¤§ã€‚</p><p>è§£æï¼š</p><p>æœ´ç´ çš„æ–¹æ³•å½“ç„¶æ˜¯å…ˆæšä¸¾ç‰©å“å†æšä¸¾ä½“ç§¯æœ€åå†æšä¸¾ä¸ªæ•°ï¼Œä½†æ˜¯è¿™æ ·çš„æ—¶é—´å¤æ‚åº¦å¤ªé«˜ï¼Œæ¥å—ä¸äº†ï¼Œæ‰€ä»¥å¯ä»¥è€ƒè™‘ç”¨å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–DPã€‚å‘ç°å•è°ƒé˜Ÿåˆ—ç»´æŠ¤çš„åŒºé—´ä¸€å®šæ˜¯ä¸€æ®µè¿ç»­çš„åŒºé—´ï¼Œä½†æ˜¯ç”±äºv[i]çš„é™åˆ¶ï¼Œå¦‚æœè¿˜æŒ‰ç…§åŸæ¥çš„é¡ºåºæšä¸¾ï¼Œè¿™æ ·æˆ‘ä»¬çš„å†³ç­–ç‚¹å°†ä¸æ»¡è¶³è¿ç»­ï¼Œè€Œæ˜¯ç¦»æ•£çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æƒ³åŠæ³•è§£å†³è¿™ä¸ªé—®é¢˜æ‰å¯ä»¥ç”¨å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–ã€‚å‘ç°åœ¨æ¨¡v[i]çš„åŒä¸€ä¸ªå‰©ä½™ç±»ä¸‹çš„æ‰€æœ‰ä½“ç§¯çš„å†³ç­–ç‚¹éƒ½æ˜¯è¿ç»­çš„ï¼ˆè™½ç„¶çœ‹èµ·æ¥æ˜¯ç¦»æ•£ï¼Œä½†æ˜¯æ˜¯è¿ç»­çš„ç¦»æ•£ï¼‰ï¼Œå¯ä»¥ç”¨å•è°ƒé˜Ÿåˆ—ç»´æŠ¤ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆæŒ‰ç…§å‰©ä½™ç±»åˆ†ç±»ï¼Œå¯¹äºæ¯ä¸€ä¸ªå‰©ä½™ç±»ç”¨ä¸€ä¸ªå•è°ƒé˜Ÿåˆ—ç»´æŠ¤ï¼Œè¿™æ ·æ—¶é—´å¤æ‚åº¦å°±åªæœ‰O(nm)äº†ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> 971 ms</span></span><br><span class="line"><span class="comment"> 2019-04-28 22:33:41</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> N=<span class="number">1e4</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> c,w,num,n,m,i,j,k,head,tail;</span><br><span class="line"><span class="keyword">int</span> a[N],b[N],f[N],q[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>,&amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>,&amp;c, &amp;w, &amp;num);</span><br><span class="line">        <span class="keyword">if</span>(m/c&lt;num) <span class="comment">//å–æœ€å°å€¼ </span></span><br><span class="line">            num=m/c;</span><br><span class="line">        <span class="keyword">for</span>(k=<span class="number">0</span>;k&lt;c;k++) <span class="comment">//åˆ†æˆcä»½ </span></span><br><span class="line">        &#123;</span><br><span class="line">            head=tail=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;=(m-k)/c;j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">int</span> x=j;</span><br><span class="line">                <span class="keyword">int</span> y=f[j*c+k]-j*w; <span class="comment">//å°†f[j*c+k]-j*wå…¥é˜Ÿ </span></span><br><span class="line">                <span class="keyword">while</span>(head&lt;tail &amp;&amp; y&gt;=b[tail<span class="number">-1</span>])</span><br><span class="line">                    tail--;</span><br><span class="line">                a[tail]=x; <span class="comment">//è®°å½•ä¸‹æ ‡ </span></span><br><span class="line">                b[tail++]=y; <span class="comment">//è®°å½•dpå€¼ </span></span><br><span class="line">                <span class="keyword">while</span>(a[head]&lt;j-num) <span class="comment">//å¦‚æœè¶…å‡ºäº†èŒƒå›´ </span></span><br><span class="line">                    head++;</span><br><span class="line">                f[j*c+k]=b[head]+j*w;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,f[m]);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å•è°ƒé˜Ÿåˆ— </tag>
            
            <tag> dpä¼˜åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè™šæ‹Ÿæœºç¬”è®°-æ¥å£åˆå§‹åŒ–è§„åˆ™</title>
      <link href="/2019/04/26/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E6%8E%A5%E5%8F%A3%E5%88%9D%E5%A7%8B%E5%8C%96%E8%A7%84%E5%88%99/"/>
      <url>/2019/04/26/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E6%8E%A5%E5%8F%A3%E5%88%9D%E5%A7%8B%E5%8C%96%E8%A7%84%E5%88%99/</url>
      
        <content type="html"><![CDATA[<p>æ¥å£åˆå§‹åŒ–è§„åˆ™</p><span id="more"></span><h1 id="æ¥å£åˆå§‹åŒ–è§„åˆ™"><a href="#æ¥å£åˆå§‹åŒ–è§„åˆ™" class="headerlink" title="æ¥å£åˆå§‹åŒ–è§„åˆ™"></a>æ¥å£åˆå§‹åŒ–è§„åˆ™</h1><p>å½“javaè™šæ‹Ÿæœºåˆå§‹åŒ–ä¸€ä¸ªç±»æ—¶ï¼Œè¦æ±‚å®ƒçš„æ‰€æœ‰çˆ¶ç±»éƒ½å·²ç»åˆå§‹åŒ–ï¼Œä½†æ˜¯è¿™æ¡è§„åˆ™ä¸é€‚ç”¨äºæ¥å£</p><ul><li>åœ¨åˆå§‹åŒ–ä¸€ä¸ªç±»æ—¶ï¼Œå¹¶ä¸ä¼šå…ˆåˆå§‹åŒ–å®ƒæ‰€å®ç°çš„æ¥å£</li><li>åœ¨åˆå§‹åŒ–ä¸€ä¸ªæ¥å£æ—¶ï¼Œå¹¶ä¸ä¼šå…ˆåˆå§‹åŒ–å®ƒçš„çˆ¶æ¥å£</li></ul><p>å› æ­¤ï¼Œä¸€ä¸ªçˆ¶æ¥å£å¹¶ä¸ä¼šå› ä¸ºå®ƒçš„å­æ¥å£æˆ–è€…å®ç°ç±»çš„åˆå§‹åŒ–è€Œåˆå§‹åŒ–ï¼Œåªæœ‰å½“ç¨‹åºé¦–æ¬¡ä½¿ç”¨ç‰¹å®šæ¥å£çš„é™æ€å˜é‡æ—¶ï¼Œæ‰ä¼šå¯¼è‡´è¯¥æ¥å£çš„åˆå§‹åŒ–</p><h1 id="æ ·ä¾‹1"><a href="#æ ·ä¾‹1" class="headerlink" title="æ ·ä¾‹1"></a>æ ·ä¾‹1</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> C();</span><br><span class="line">        <span class="keyword">new</span> C();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span></span>&#123;</span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;CC&quot;</span>); <span class="comment">//æ¯æ¬¡åˆ›å»ºå¯¹è±¡æ—¶éƒ½ä¼šè¾“å‡º</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">C</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;c()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*ouput:</span></span><br><span class="line"><span class="comment">CC</span></span><br><span class="line"><span class="comment">c()</span></span><br><span class="line"><span class="comment">CC</span></span><br><span class="line"><span class="comment">c()</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> C();</span><br><span class="line">        <span class="keyword">new</span> C();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span></span>&#123;</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;CC&quot;</span>); <span class="comment">//åˆ›å»ºå¯¹è±¡æ—¶åªä¼šè¾“å‡ºä¸€æ¬¡</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">C</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;c()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*ouput:</span></span><br><span class="line"><span class="comment">CC</span></span><br><span class="line"><span class="comment">c()</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(Mychild5.b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">MyParent5</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Thread thread = <span class="keyword">new</span> Thread()&#123;</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;MyParent5 invoked&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span>  <span class="title">Mychild5</span> <span class="keyword">extends</span> <span class="title">MyParent5</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> b = <span class="number">5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¨‹åºè¾“å‡º5ï¼Œå¹¶æ²¡æœ‰<code>MyParent5 invoked</code></p><h1 id="æ ·ä¾‹2"><a href="#æ ·ä¾‹2" class="headerlink" title="æ ·ä¾‹2"></a>æ ·ä¾‹2</h1><p>æŠŠæ¥å£æ”¹æˆç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(Mychild5.b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyParent5</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Thread thread = <span class="keyword">new</span> Thread()&#123;</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;MyParent5 invoked&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span>  <span class="title">Mychild5</span> <span class="keyword">extends</span> <span class="title">MyParent5</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> b = <span class="number">5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ™ä¸¤ä¸ªéƒ½ä¼šè¾“å‡º</p><p>å¦‚æœå˜bå˜ä¸ºfinalçš„è¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(Mychild5.b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyParent5</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Thread thread = <span class="keyword">new</span> Thread()&#123;</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;MyParent5 invoked&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span>  <span class="title">Mychild5</span> <span class="keyword">extends</span> <span class="title">MyParent5</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> b = <span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ­£å¥½éªŒè¯äº†ä¹‹å‰å­¦çš„ç»“è®ºï¼Œbå·²ç»è¢«æ”¾åˆ°å¸¸é‡æ± ä¸­ï¼Œè¿™æ—¶å€™ä¸<code>Mychild5</code>å’Œ<code>MyParent5</code>éƒ½æ²¡æœ‰å…³ç³»ï¼Œå³ä½¿åˆ æ‰è¿™ä¸¤è€…<code>.class</code>æ–‡ä»¶éƒ½å¯ä»¥è¿è¡Œ</p><h1 id="æ ·ä¾‹3"><a href="#æ ·ä¾‹3" class="headerlink" title="æ ·ä¾‹3"></a>æ ·ä¾‹3</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(Mychild5.b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">MyGrandpa</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Thread thread = <span class="keyword">new</span> Thread()&#123;</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;MyGrandpa invoked&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyParent5</span> <span class="keyword">extends</span> <span class="title">MyGrandpa</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Thread thread = <span class="keyword">new</span> Thread()&#123;</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;MyParent5 invoked&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mychild5</span> <span class="keyword">extends</span> <span class="title">MyParent5</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> b = <span class="number">5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åªè¾“å‡º5</p><p>å› ä¸ºè¾“å‡ºbå¹¶ä¸ä¼šå¯¼è‡´MyParent5çš„åˆå§‹åŒ–ï¼Œæ›´ä¸ä¼šå¯¼è‡´æ¥å£çš„åˆå§‹åŒ–ã€‚</p><p>æ”¹æˆ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(Mychild5.b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyGrandpa</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Thread thread = <span class="keyword">new</span> Thread()&#123;</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;MyGrandpa invoked&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyParent5</span> <span class="keyword">extends</span> <span class="title">MyGrandpa</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Thread thread = <span class="keyword">new</span> Thread()&#123;</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;MyParent5 invoked&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mychild5</span> <span class="keyword">extends</span> <span class="title">MyParent5</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> b = <span class="number">5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ™ä¸‰è€…éƒ½ä¼šè¾“å‡º</p><p>å…¶åŠ è½½é¡ºåº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[Loaded MyGrandpa from file:/home/cc/IdeaProjects/test/out/production/test/]</span><br><span class="line">[Loaded MyParent5 from file:/home/cc/IdeaProjects/test/out/production/test/]</span><br><span class="line">[Loaded Mychild5 from file:/home/cc/IdeaProjects/test/out/production/test/]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jvm </tag>
            
            <tag> æ¥å£åˆå§‹åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RMQä¹‹STè¡¨å®ç°</title>
      <link href="/2019/04/25/RMQ%E4%B9%8BST%E8%A1%A8%E5%AE%9E%E7%8E%B0/"/>
      <url>/2019/04/25/RMQ%E4%B9%8BST%E8%A1%A8%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<p>åŒºé—´æœ€å€¼æŸ¥è¯¢</p><span id="more"></span><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/qq_41311604/article/details/79900893">https://blog.csdn.net/qq_41311604/article/details/79900893</a></p><p><a href="https://www.cnblogs.com/YSFAC/p/7189571.html"></a></p><h1 id="RMQ"><a href="#RMQ" class="headerlink" title="RMQ"></a>RMQ</h1><p><strong>RMQ</strong><code>ï¼ˆRange Minimum/Maximum Queryï¼‰</code>ï¼Œ<strong>å³åŒºé—´æœ€å€¼æŸ¥è¯¢</strong>ï¼Œè¿™æ˜¯ä¸€ç§åœ¨çº¿ç®—æ³•ï¼Œæ‰€è°“åœ¨çº¿ç®—æ³•ï¼Œæ˜¯æŒ‡ç”¨æˆ·æ¯æ¬¡è¾“å…¥ä¸€ä¸ªæŸ¥è¯¢ï¼Œä¾¿é©¬ä¸Šå¤„ç†ä¸€ä¸ªæŸ¥è¯¢ã€‚RMQç®—æ³•ä¸€èˆ¬ç”¨è¾ƒé•¿æ—¶é—´åšé¢„å¤„ç†ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(nlogn)ï¼Œç„¶åå¯ä»¥åœ¨O(1)çš„æ—¶é—´å†…å¤„ç†æ¯æ¬¡æŸ¥è¯¢ã€‚</p><hr><h2 id="æ±‚dp"><a href="#æ±‚dp" class="headerlink" title="æ±‚dp"></a>æ±‚dp</h2><p>ç°å‡è®¾æœ‰ä¸€æ•°ç»„arr={1,3,6,7,4,2,5}ï¼›</p><p>è®¾<code>dp[i][j]</code>è¡¨ç¤ºä»ç¬¬iä½å¼€å§‹è¿ç»­2^jä¸ªæ•°ä¸­çš„æœ€å°å€¼ã€‚</p><p>ä¾‹å¦‚<code>dp[2][1]</code>è¡¨ç¤ºä»ç¬¬äºŒä½å¼€å§‹è¿ç»­ä¸¤ä¸ªæ•°çš„æœ€å°å€¼ï¼ˆä¹Ÿå°±æ˜¯ä»ç¬¬äºŒä½æ•°åˆ°ç¬¬ä¸‰ä½æ•°çš„æœ€å°å€¼ï¼‰ï¼Œå³3ï¼Œ6ä¸­çš„æœ€å°å€¼ï¼Œæ‰€ä»¥<code>dp[2][1] = 3</code>;</p><p>é‚£ä¹ˆæ€ä¹ˆæ±‚<code>dp[2][1]</code>å‘¢ï¼Ÿ</p><ol><li><p>å½“i=2ï¼Œj=3æ—¶ï¼Œæ±‚dp<code>[2][3]</code></p><p><img src="/2019/04/25/RMQ%E4%B9%8BST%E8%A1%A8%E5%AE%9E%E7%8E%B0/1.png" alt></p><p>å› ä¸º2^3=8ï¼Œä»£è¡¨ä»2å¼€å§‹æœ‰8ä¸ªæ•°ï¼Œæ‰€ä»¥èŒƒå›´ä¸º[2,9]<br>ç„¶åæˆ‘ä»¬å¯ä»¥å°†å…¶æŒ‰ç…§ç±»ä¼¼äºŒåˆ†çš„æ€æƒ³å°†å…¶æ‹†åˆ†ä¸ºä¸¤éƒ¨åˆ†<br>æ‰€ä»¥ä¸­é—´mid=(2+9)/2=5</p><ul><li>å·¦åŒºé—´[2,5]ï¼šæœ‰4ä¸ªæ•°ï¼Œå…¶å¯¹åº”<code>dp[2][2]</code></li><li>å³åŒºé—´[6,9]ï¼šæœ‰4ä¸ªæ•°ï¼Œå…¶å¯¹åº”<code>dp[6][2]</code></li></ul></li><li><p>æ¨å¹¿åˆ°æ™®éæƒ…å†µ</p><p><img src="/2019/04/25/RMQ%E4%B9%8BST%E8%A1%A8%E5%AE%9E%E7%8E%B0/2.png" alt></p><p>å¯¹ç…§ä¸Šé¢ä¾‹å­ï¼Œå› ä¸ºå¹³åˆ†ï¼Œæ‰€ä»¥æ¯ä¸ªåŒºé—´éƒ½å¯ä»¥åˆ†åˆ°ä¸€åŠçš„æ•°(å› ä¸ºjæ˜¯2çš„æ¬¡æ–¹)ï¼Œæ‰€ä»¥jè‚¯å®šæ˜¯j-1ï¼Œ<code>2^(j-1)</code>ä»£è¡¨é™¤ä»¥<code>2^j/2</code>ï¼Œæ¥ç€iå°±æ˜¯å¾ˆå¸¸è§çš„ä½ç½®å…³ç³»äº†<br>å·¦åŒºé—´ï¼š<code>dp[i][j-1]</code><br>å³åŒºé—´ï¼š<code>dp[i+(2^j)/2][j-1]</code></p></li></ol><p>æ‰€ä»¥</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dp[i][j] = <span class="built_in">min</span>(dp [i][j - <span class="number">1</span>], dp [i + (<span class="number">1</span> &lt;&lt; j - <span class="number">1</span>)][j - <span class="number">1</span>])</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å…ˆæ›´æ–°æ¯ä¸¤ä¸ªå…ƒç´ ä¸­çš„æœ€å°å€¼ï¼Œç„¶åé€šè¿‡æ¯ä¸¤ä¸ªå…ƒç´ çš„æœ€å°å€¼è·å¾—æ¯4ä¸ªå…ƒç´ ä¸­çš„æœ€å°å€¼ï¼Œä¾æ¬¡ç±»æ¨æ›´æ–°æ‰€æœ‰é•¿åº¦çš„æœ€å°å€¼</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">rmq_init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;=N; i++)</span><br><span class="line">        dp[i][<span class="number">0</span>] = arr[i];<span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; (<span class="number">1</span>&lt;&lt;j) &lt;= N; j++) <span class="comment">//2^jä¸è¶…è¿‡N</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i+(<span class="number">1</span>&lt;&lt;j)<span class="number">-1</span> &lt;= N; i++)</span><br><span class="line">            dp[i][j]=<span class="built_in">min</span>(dp[i][j<span class="number">-1</span>], dp[i+(<span class="number">1</span>&lt;&lt;j<span class="number">-1</span>)][j<span class="number">-1</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æŸ¥è¯¢dp"><a href="#æŸ¥è¯¢dp" class="headerlink" title="æŸ¥è¯¢dp"></a>æŸ¥è¯¢dp</h2><p>å¾—åˆ°äº†dpæ•°ç»„ï¼Œé‚£ä¹ˆæ€ä¹ˆå¾—åˆ°åŒºé—´[l,r]æœ€å°å€¼å‘¢ï¼Ÿæˆ‘ä»¬åªéœ€è¦å¯¹æ¯ä¸ªäºŒåˆ†åŒºé—´è¿›è¡Œå–minå°±è¡Œäº†ï¼Œé¦–å…ˆæˆ‘ä»¬å¾—åˆ°è¿™ä¸ªåŒºé—´æ˜¯2çš„å‡ æ¬¡æ–¹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">k = <span class="built_in">log2</span>(r - l + <span class="number">1</span>);</span><br></pre></td></tr></table></figure><p><img src="/2019/04/25/RMQ%E4%B9%8BST%E8%A1%A8%E5%AE%9E%E7%8E%B0/3.png" alt></p><p>ç„¶å2^kå–åˆ°å‰é¢é‚£äº›æ•°çš„æœ€å°å€¼ï¼Œè¿˜æ²¡æœ‰è¦†ç›–æ•´ä¸ªåŒºé—´ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä»åé¢å†å–æœ€å°å€¼ï¼Œæœ€åå†ä¸¤è€…å–æœ€å°å°±è¡Œäº†ã€‚</p><p>æ‰€ä»¥</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RMQ[l,r] = <span class="built_in">min</span>(dp[l][k], dp[r - (<span class="number">1</span> &lt;&lt; k) + <span class="number">1</span>][k]);</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">rmq</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> k=<span class="built_in">log2</span>(r-l+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">min</span>(dp[l][k],dp[r-(<span class="number">1</span>&lt;&lt;k)+<span class="number">1</span>][k]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="poj3264â€”Balanced-Lineup"><a href="#poj3264â€”Balanced-Lineup" class="headerlink" title="poj3264â€”Balanced Lineup"></a><a href="http://poj.org/problem?id=3264">poj3264â€”Balanced Lineup</a></h1><p><img src="/2019/04/25/RMQ%E4%B9%8BST%E8%A1%A8%E5%AE%9E%E7%8E%B0/timu.png" alt></p><p>é¢˜æ„ï¼šæœ‰Nå¤´å¥¶ç‰›ï¼ŒæŒ‰1-nç¼–å·ï¼Œå¹¶ç»™å‡ºä»–ä»¬çš„é«˜åº¦ï¼Œæœ‰qæ¬¡è¯¢é—®ï¼Œæ±‚æ¯æ¬¡è¯¢é—®çš„ä¸€æ®µç¼–å·åŒºé—´å†…æœ€é«˜çš„ç‰›å’Œæœ€çŸ®çš„ç‰›çš„èº«é«˜å·®</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">G++: 8172K3579MS c++: 7964K1813MS  </span></span><br><span class="line"><span class="comment">(å¾®è½¯çš„C++æ¯”å¼€æºçš„G++ï¼Œå¿«äº†å°†è¿‘ä¸€)</span></span><br><span class="line"><span class="comment">2019-04-26 19:40:00</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1E5</span>;</span><br><span class="line"><span class="keyword">int</span> maxn[MAXN][<span class="number">20</span>], minn[MAXN][<span class="number">20</span>];</span><br><span class="line"><span class="keyword">int</span> n, q, num;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">RMQ</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; (<span class="number">1</span> &lt;&lt; j) &lt;= n; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i+(<span class="number">1</span>&lt;&lt;j)<span class="number">-1</span> &lt;= n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            minn[i][j]=<span class="built_in">min</span>(minn[i][j<span class="number">-1</span>], minn[i+(<span class="number">1</span>&lt;&lt;j<span class="number">-1</span>)][j<span class="number">-1</span>]);</span><br><span class="line">            maxn[i][j]=<span class="built_in">max</span>(maxn[i][j<span class="number">-1</span>], maxn[i+(<span class="number">1</span>&lt;&lt;j<span class="number">-1</span>)][j<span class="number">-1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">RMQ_MAX</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="comment">//log2()æŠ¥é”™çš„è¯å¯ä»¥ç”¨logçš„æ¢åº•å…¬å¼</span></span><br><span class="line">    <span class="keyword">int</span> k = <span class="built_in">log</span>(<span class="built_in"><span class="keyword">double</span></span>(R-L+<span class="number">1</span>))/<span class="built_in">log</span>(<span class="number">2.0</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">max</span>(maxn[L][k],maxn[R-(<span class="number">1</span>&lt;&lt;k)+<span class="number">1</span>][k]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">RMQ_MIN</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> k = <span class="built_in">log</span>(<span class="built_in"><span class="keyword">double</span></span>(R-L+<span class="number">1</span>))/<span class="built_in">log</span>(<span class="number">2.0</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">min</span>(minn[L][k],minn[R-(<span class="number">1</span>&lt;&lt;k)+<span class="number">1</span>][k]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;q);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;num);</span><br><span class="line">        maxn[i][<span class="number">0</span>] = minn[i][<span class="number">0</span>] = num;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">RMQ</span>();</span><br><span class="line">    <span class="keyword">int</span> L, R;</span><br><span class="line">    <span class="keyword">while</span>(q--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;L, &amp;R);</span><br><span class="line">        <span class="keyword">if</span>(L &gt; R)</span><br><span class="line">            <span class="built_in">swap</span>(L, R);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">RMQ_MAX</span>(L, R) - <span class="built_in">RMQ_MIN</span>(L, R));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RMQ </tag>
            
            <tag> STè¡¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè™šæ‹Ÿæœºç¬”è®°-ç¼–è¯‘æœŸå¸¸é‡ä¸è¿è¡ŒæœŸå¸¸é‡çš„åŒºåˆ«åŠæ•°ç»„åˆ›å»ºæœ¬è´¨åˆ†æ</title>
      <link href="/2019/04/25/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E7%BC%96%E8%AF%91%E6%9C%9F%E5%B8%B8%E9%87%8F%E4%B8%8E%E8%BF%90%E8%A1%8C%E6%9C%9F%E5%B8%B8%E9%87%8F%E7%9A%84%E5%8C%BA%E5%88%AB%E5%8F%8A%E6%95%B0%E7%BB%84%E5%88%9B%E5%BB%BA%E6%9C%AC%E8%B4%A8%E5%88%86%E6%9E%90/"/>
      <url>/2019/04/25/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E7%BC%96%E8%AF%91%E6%9C%9F%E5%B8%B8%E9%87%8F%E4%B8%8E%E8%BF%90%E8%A1%8C%E6%9C%9F%E5%B8%B8%E9%87%8F%E7%9A%84%E5%8C%BA%E5%88%AB%E5%8F%8A%E6%95%B0%E7%BB%84%E5%88%9B%E5%BB%BA%E6%9C%AC%E8%B4%A8%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<p>ç¼–è¯‘æœŸå¸¸é‡ä¸è¿è¡ŒæœŸå¸¸é‡çš„åŒºåˆ«åŠæ•°ç»„åˆ›å»ºæœ¬è´¨åˆ†æ</p><span id="more"></span><h1 id="æ ·ä¾‹1"><a href="#æ ·ä¾‹1" class="headerlink" title="æ ·ä¾‹1"></a>æ ·ä¾‹1</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        System.out.println(MyParent3.str);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyParent3</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String str = UUID.randomUUID().toString();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;MyParent3 code block&quot;</span>);        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">output:</span></span><br><span class="line"><span class="comment">MyParent3 code block</span></span><br><span class="line"><span class="comment">0e7ed916-96de-4805-865d-1b2e703482ec</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p><strong>å½“ä¸€ä¸ªå¸¸é‡çš„å€¼å¹¶éç¼–è¯‘æœŸé—´å¯ä»¥ç¡®å®šçš„ï¼Œé‚£ä¹ˆå…¶å€¼å°±ä¸ä¼šè¢«æ”¾åˆ°è°ƒç”¨ç±»çš„å¸¸é‡æ± ä¸­ï¼Œè¿™æ—¶ç¨‹åºè¿è¡Œæ—¶ï¼Œä¼šå¯¼è‡´ä¸»åŠ¨ä½¿ç”¨è¿™ä¸ªå¸¸é‡æ‰€åœ¨çš„ç±»ï¼Œæ˜¾ç„¶ä¼šå¯¼è‡´è¿™ä¸ªçš„ç±»çš„åˆå§‹åŒ–ã€‚</strong></p><h1 id="æ ·ä¾‹2"><a href="#æ ·ä¾‹2" class="headerlink" title="æ ·ä¾‹2"></a>æ ·ä¾‹2</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        MyParent4[] myParent4s = <span class="keyword">new</span> MyParent4[<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyParent4</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;MyParent3 code block&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¨‹åºå¹¶æ²¡æœ‰è¾“å‡ºï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆå‘¢</p><p>å¯¹äºæ•°ç»„å®ä¾‹æ¥è¯´ï¼Œå…¶ç±»å‹æ˜¯ç”±JVMåœ¨è¿è¡ŒæœŸåŠ¨æ€ç”Ÿæˆçš„ï¼Œå¹¶æ²¡æœ‰ä¸»åŠ¨ä½¿ç”¨è¿™ä¸ªç±»ï¼Œæ‰€ä»¥ä¸ä¼šå¯¼è‡´ç±»çš„åˆå§‹åŒ–</p><p>æ¥ç€æˆ‘ä»¬å¯ä»¥çœ‹è¿™ä¸ªçš„ç±»çš„ç±»å‹ä»¥åŠå®ƒçš„çˆ¶ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(myParent4s.getClass());</span><br><span class="line">System.out.println(myParent4s.getClass().getSuperclass());</span><br></pre></td></tr></table></figure><p>ç¨‹åºè¾“å‡º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> [<span class="title">LMyParent4</span></span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">java</span>.<span class="title">lang</span>.<span class="title">Object</span></span></span><br></pre></td></tr></table></figure><p>è¯´æ˜è¿™ä¸ªåŠ¨æ€ç”Ÿæˆçš„ç±»å‹è¡¨ç°ä¸º<code>[LMyParent4</code>è¿™ç§å½¢å¼ã€‚åŠ¨æ€ç”Ÿæˆçš„ç±»å‹ï¼Œå…¶çˆ¶ç±»æ˜¯<code>Object</code></p><p>å¯¹äºæ•°ç»„æ¥è¯´ï¼Œ<code>JavaDoc</code>ç»å¸¸å°†æ„æˆæ•°ç»„çš„å…ƒç´ ä¸º<code>Component</code>ï¼Œå®é™…ä¸Šå°±æ˜¯å°†æ•°ç»„é™ä½ä¸€ä¸ªç»´åº¦åçš„ç±»å‹ã€‚</p><p>é‚£ä¹ˆäºŒç»´æ•°ç»„åˆæ˜¯ä»€ä¹ˆå½¢å¼å‘¢</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MyParent4[][] myParent4s1 = <span class="keyword">new</span> MyParent4[<span class="number">1</span>][<span class="number">1</span>];</span><br><span class="line">System.out.println(myParent4s1.getClass());</span><br><span class="line">System.out.println(myParent4s1.getClass().getSuperclass());</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> [[<span class="title">LMyParent4</span></span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">java</span>.<span class="title">lang</span>.<span class="title">Object</span></span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢æ˜¯å¼•ç”¨ç±»å‹çš„æ•°ç»„ï¼Œé‚£ä¹ˆåŸå§‹ç±»å‹æ•°ç»„çš„å‘¢</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] ints = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">1</span>];</span><br><span class="line">System.out.println(ints.getClass());</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span>[] chars = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">1</span>];</span><br><span class="line">System.out.println(chars.getClass());</span><br><span class="line"></span><br><span class="line">Boolean[] bools = <span class="keyword">new</span> Boolean[<span class="number">1</span>];</span><br><span class="line">System.out.println(bools.getClass());</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> [<span class="title">I</span></span></span><br><span class="line"><span class="class"><span class="title">class</span> [<span class="title">C</span></span></span><br><span class="line"><span class="class"><span class="title">class</span> [<span class="title">Ljava</span>.<span class="title">lang</span>.<span class="title">Boolean</span></span>;</span><br></pre></td></tr></table></figure><h1 id="åç¼–è¯‘æ ·ä¾‹2"><a href="#åç¼–è¯‘æ ·ä¾‹2" class="headerlink" title="åç¼–è¯‘æ ·ä¾‹2"></a>åç¼–è¯‘æ ·ä¾‹2</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        MyParent4[] myParent4s = <span class="keyword">new</span> MyParent4[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[] ints = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyParent4</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;MyParent3 code block&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2019/04/25/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E7%BC%96%E8%AF%91%E6%9C%9F%E5%B8%B8%E9%87%8F%E4%B8%8E%E8%BF%90%E8%A1%8C%E6%9C%9F%E5%B8%B8%E9%87%8F%E7%9A%84%E5%8C%BA%E5%88%AB%E5%8F%8A%E6%95%B0%E7%BB%84%E5%88%9B%E5%BB%BA%E6%9C%AC%E8%B4%A8%E5%88%86%E6%9E%90/1.png" alt></p><ul><li>anewarrayï¼šè¡¨ç¤ºåˆ›å»ºä¸€ä¸ªå¼•ç”¨ç±»å‹çš„ï¼ˆå¦‚ç±»ï¼Œæ¥å£ï¼Œæ•°ç»„ï¼‰æ•°ç»„ï¼Œå¹¶å°†å…¶å¼•ç”¨å€¼å‹å…¥æ ˆé¡¶</li><li>newarrayï¼šè¡¨ç¤ºåˆ›å»ºä¸€ä¸ªæŒ‡å®šçš„åŸå§‹ç±»å‹ï¼ˆå¦‚intï¼Œ floatï¼‰çš„æ•°ç»„å¹¶å°†å…¶å¼•ç”¨å€¼å‹å…¥æ ˆé¡¶</li></ul>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jvm </tag>
            
            <tag> å¸¸é‡æœ¬è´¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çº¿æ®µæ ‘å…¥é—¨</title>
      <link href="/2019/04/24/%E7%BA%BF%E6%AE%B5%E6%A0%91%E5%85%A5%E9%97%A8/"/>
      <url>/2019/04/24/%E7%BA%BF%E6%AE%B5%E6%A0%91%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<p>çº¿æ®µæ ‘å…¥é—¨</p><span id="more"></span><h1 id="æ•°æ®ç»“æ„â€”çº¿æ®µæ ‘ï¼ˆsegment-treeï¼‰"><a href="#æ•°æ®ç»“æ„â€”çº¿æ®µæ ‘ï¼ˆsegment-treeï¼‰" class="headerlink" title="æ•°æ®ç»“æ„â€”çº¿æ®µæ ‘ï¼ˆsegment treeï¼‰"></a>æ•°æ®ç»“æ„â€”çº¿æ®µæ ‘ï¼ˆsegment treeï¼‰</h1><h2 id="å¼•å…¥"><a href="#å¼•å…¥" class="headerlink" title="å¼•å…¥"></a>å¼•å…¥</h2><p>ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„é•¿åº¦å¯èƒ½éå¸¸å¤§ã€‚ç°åœ¨æˆ‘ä»¬éœ€è¦å¯¹æ•°ç»„é‡Œé¢çš„æ•°æ®ååå¤å¤è¿›è¡Œä¸¤ä¸ªæ“ä½œ</p><ul><li>æ±‚å‡ºæŸä¸€ä¸ªåŒºé—´é‡Œé¢æ‰€æœ‰å…ƒç´ ä¹‹å’Œï¼Œ(queryæ“ä½œ)</li><li>ä¿®æ”¹æŸä¸ªå…ƒç´ çš„å€¼ï¼Œ(updateæ“ä½œ)</li></ul><h3 id="æš´åŠ›è§£å†³å’Œå‰ç¼€å’Œ"><a href="#æš´åŠ›è§£å†³å’Œå‰ç¼€å’Œ" class="headerlink" title="æš´åŠ›è§£å†³å’Œå‰ç¼€å’Œ"></a>æš´åŠ›è§£å†³å’Œå‰ç¼€å’Œ</h3><p>å¯¹åŒºé—´[L,R]ï¼ˆé•¿åº¦ä¸ºnï¼‰å–å’Œï¼Œå¹¶ä¸”æ›´æ–°ä¸€ä¸ªå…ƒç´ içš„å€¼ï¼Œé‡‡ç”¨æš´åŠ›è§£å†³æ–¹æ³•<br><img src="/2019/04/24/%E7%BA%BF%E6%AE%B5%E6%A0%91%E5%85%A5%E9%97%A8/1.png" alt></p><p>å¯å¾—</p><ul><li>query(L,R)æ—¶é—´å¤æ‚åº¦ä¸ºO(n)</li><li>update(i)æ—¶é—´å¤æ‚åº¦ä¸ºO(1)</li></ul><p>å¦‚æœåŒºé—´èŒƒå›´å¾ˆå¤§ï¼Œå†åŠ ä¸Šå¤šæ¬¡æ“ä½œï¼Œæš´åŠ›å–å’Œæ˜æ˜¾ä¼šè¶…æ—¶ï¼Œå¯ä»¥é‡‡ç”¨å‰ç¼€å’Œæ–¹å¼ä¼˜åŒ–æŸ¥è¯¢<br>sum_arr[0]=arr[0]<br>sum_arr[1]=arr[0]+arr[1]<br>sum_arr[2]=arr[0]+arr[1]+arr[2]<br><img src="/2019/04/24/%E7%BA%BF%E6%AE%B5%E6%A0%91%E5%85%A5%E9%97%A8/2.png" alt><br>è¿™æ ·ï¼Œå‡å¦‚æˆ‘ä»¬æƒ³å¾—åˆ°åŒºé—´[2,4]çš„å’Œï¼Œæˆ‘ä»¬å¯ä»¥ç”¨sum_arr[4]-sum_arr[1]è®¡ç®—åˆ°</p><ul><li>query(L,R)æ—¶é—´å¤æ‚åº¦å‡å°ä¸ºO(1)</li><li>å› ä¸ºæ”¹å˜ä¸€ä¸ªå€¼åï¼Œè¦åŒæ—¶æ›´æ–°åé¢çš„sum_arræ•°ç»„ï¼Œæ‰€ä»¥update(i)æ—¶é—´å¤æ‚åº¦å¢å¤§ä¸ºO(n)</li></ul><p>å¦‚æœç”¨çº¿æ®µæ ‘çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥å°†æŸ¥è¯¢å’Œæ›´æ–°çš„çš„æ—¶é—´å¤æ‚åº¦éƒ½å˜ä¸ºO(logn)</p><div class="table-container"><table><thead><tr><th>æ–¹æ³•</th><th>query</th><th>update</th></tr></thead><tbody><tr><td>æš´åŠ›</td><td>O(n)</td><td>O(1)</td></tr><tr><td>å‰ç¼€å’Œ</td><td>O(1)</td><td>O(n)</td></tr><tr><td>çº¿æ®µæ ‘</td><td>O(logn)</td><td>O(logn)</td></tr></tbody></table></div><h2 id="çº¿æ®µæ ‘ç®€ä»‹"><a href="#çº¿æ®µæ ‘ç®€ä»‹" class="headerlink" title="çº¿æ®µæ ‘ç®€ä»‹"></a>çº¿æ®µæ ‘ç®€ä»‹</h2><p>çº¿æ®µæ ‘æ˜¯ä¸€ç§äºŒå‰æœç´¢æ ‘ï¼Œå®ƒå°†ä¸€ä¸ªåŒºé—´åˆ’åˆ†æˆä¸€äº›å•å…ƒåŒºé—´ï¼Œæ¯ä¸ªå•å…ƒåŒºé—´å¯¹åº”çº¿æ®µæ ‘ä¸­çš„ä¸€ä¸ªå¶ç»“ç‚¹ã€‚ä½¿ç”¨çº¿æ®µæ ‘å¯ä»¥å¿«é€Ÿçš„æŸ¥æ‰¾æŸä¸€ä¸ªèŠ‚ç‚¹åœ¨è‹¥å¹²æ¡çº¿æ®µä¸­å‡ºç°çš„æ¬¡æ•°ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(logn)ã€‚æ˜¯ä¸€ç§å¯ä»¥åœ¨å¾ˆçŸ­çš„æ—¶é—´å†…å¯¹æŸä¸ªåŒºé—´è¿›è¡Œæ“ä½œçš„æ•°æ®ç»“æ„ã€‚</p><p>å¯ç”¨äºï¼š<br>å•ç‚¹ä¿®æ”¹ã€åŒºé—´ä¿®æ”¹ã€åŒºé—´æŸ¥è¯¢ï¼ˆå¦‚ï¼šåŒºé—´æ±‚å’Œï¼Œæ±‚åŒºé—´æœ€å¤§å€¼ï¼Œæ±‚åŒºé—´æœ€å°å€¼â€¦â€¦ï¼‰</p><h2 id="çº¿æ®µæ ‘æ„å»º"><a href="#çº¿æ®µæ ‘æ„å»º" class="headerlink" title="çº¿æ®µæ ‘æ„å»º"></a>çº¿æ®µæ ‘æ„å»º</h2><div class="table-container"><table><thead><tr><th>æ•°ç»„ä¸‹æ ‡</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th></tr></thead><tbody><tr><td>æ•°ç»„å…ƒç´ </td><td>1</td><td>3</td><td>5</td><td>7</td><td>9</td></tr></tbody></table></div><p>æ ‘æ ¹ä¿å­˜çš„æ˜¯åŒºé—´[1-6]ä¸­å…ƒç´ çš„å’Œï¼Œå…¶å·¦å­©å­ä¿å­˜åŒºé—´[1-3]æ‰€æœ‰å…ƒç´ çš„å’Œï¼Œå³å­©å­åˆ™æ˜¯[4-6]<br><img src="/2019/04/24/%E7%BA%BF%E6%AE%B5%E6%A0%91%E5%85%A5%E9%97%A8/3.png" alt><br>å®ƒå°†ä¸€ä¸ªåŒºé—´åˆ’åˆ†æˆä¸€äº›å•å…ƒåŒºé—´ï¼Œæ¯ä¸ªå•å…ƒåŒºé—´å¯¹åº”çº¿æ®µæ ‘ä¸­çš„ä¸€ä¸ªå¶ç»“ç‚¹ã€‚<br>å…¶åˆ’åˆ†åŒºé—´æ–¹æ³•ç±»ä¼¼äºäºŒåˆ†</p><p><img src="/2019/04/24/%E7%BA%BF%E6%AE%B5%E6%A0%91%E5%85%A5%E9%97%A8/4.png" alt></p><p>ç„¶åç»™æ¯ä¸ªå¶å­ç»“ç‚¹èµ‹å€¼</p><div class="table-container"><table><thead><tr><th>æ•°ç»„ä¸‹æ ‡</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th></tr></thead><tbody><tr><td>æ•°ç»„å…ƒç´ </td><td>1</td><td>3</td><td>5</td><td>7</td><td>9</td></tr></tbody></table></div><p><img src="/2019/04/24/%E7%BA%BF%E6%AE%B5%E6%A0%91%E5%85%A5%E9%97%A8/5.png" alt></p><p>æ¥ç€ç”±å­©å­ç»“ç‚¹æ„æˆåŒäº²ç»“ç‚¹</p><div class="table-container"><table><thead><tr><th>æ•°ç»„ä¸‹æ ‡</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th></tr></thead><tbody><tr><td>æ•°ç»„å…ƒç´ </td><td>1</td><td>3</td><td>5</td><td>7</td><td>9</td></tr></tbody></table></div><p><img src="/2019/04/24/%E7%BA%BF%E6%AE%B5%E6%A0%91%E5%85%A5%E9%97%A8/6.png" alt></p><h2 id="å›åˆ°åŸé¢˜"><a href="#å›åˆ°åŸé¢˜" class="headerlink" title="å›åˆ°åŸé¢˜"></a>å›åˆ°åŸé¢˜</h2><p>å¦‚ä½•æ‰¾åˆ°[2-5]è¿™ä¸ªåŒºé—´çš„å’Œ<br><img src="/2019/04/24/%E7%BA%BF%E6%AE%B5%E6%A0%91%E5%85%A5%E9%97%A8/7.png" alt><br><strong>æ ¹èŠ‚ç‚¹è®°å½•çš„æ˜¯[1-6]çš„å’Œï¼Œå¯ä»¥æŠŠ[3-6]åˆ†æˆä¸¤åŠï¼Œå·¦è¾¹æ‰¾çš„æ˜¯[3],å³è¾¹æ˜¯[4-6]ï¼Œå³è¾¹å¯ä»¥ç›´æ¥å¾—åˆ°[4-6]çš„å’Œä¸º27ï¼Œè€Œ[3]å¯ä»¥é€šè¿‡[1-3]å¾—åˆ°å’Œä¸º5ï¼Œæœ€ç»ˆç»“æœä¸º27+5=32ã€‚</strong><br>è¿™æ ·å­å¯ä»¥çœæ‰å¾ˆå¤šæœç´¢çš„æ—¶é—´ï¼Œæœ€åæƒ…å†µæ˜¯æŠŠæ•´æ£µæ ‘éƒ½æœç´¢ä¸€éï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(logn)</p><p>é‚£ä¹ˆå¦‚ä½•æ›´æ–°å‘¢ï¼Œå‡å¦‚æˆ‘ä»¬æƒ³æŠŠç¬¬5ä¸ªå…ƒç´ ç”±9å˜æˆ5<br><img src="/2019/04/24/%E7%BA%BF%E6%AE%B5%E6%A0%91%E5%85%A5%E9%97%A8/8.png" alt><br><strong>æˆ‘ä»¬å…ˆæ‰¾åˆ°9é‚£ä¸ªç»“ç‚¹ï¼Œç„¶åæŠŠå…¶å€¼å˜ä¸º6ï¼Œæ¥ç€é¡ºç€ä¸€æ¡è·¯ä»ä¸‹å¾€ä¸Šä¸€ç›´æ›´æ–°ã€‚</strong><br>åŒæ ·ï¼Œæ›´æ–°çš„æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯O(logn)</p><h2 id="çº¿æ®µæ ‘çš„å®ç°"><a href="#çº¿æ®µæ ‘çš„å®ç°" class="headerlink" title="çº¿æ®µæ ‘çš„å®ç°"></a>çº¿æ®µæ ‘çš„å®ç°</h2><p>ç”±äºçº¿æ®µæ ‘æ˜¯ç”¨äºŒå‰æ ‘ç»“æ„å‚¨å­˜çš„ï¼Œè€Œä¸”æ˜¯è¿‘ä¹å®Œå…¨äºŒå‰æ ‘çš„ï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨äº†æ•°ç»„treeæ¥å­˜å‚¨<br><strong>æ•°ç»„ä¸‹æ ‡ä»1å¼€å§‹ï¼ŒåŒæ—¶æ·»åŠ è™šç»“ç‚¹ä½¿å…¶å˜æˆå®Œå…¨äºŒå‰æ ‘</strong><br><img src="/2019/04/24/%E7%BA%BF%E6%AE%B5%E6%A0%91%E5%85%A5%E9%97%A8/9.png" alt></p><div class="table-container"><table><thead><tr><th>æ•°ç»„ä¸‹æ ‡</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th></tr></thead><tbody><tr><td>æ•°ç»„å…ƒç´ </td><td>36</td><td>9</td><td>27</td><td>4</td><td>5</td></tr></tbody></table></div><p>æ ‘çš„ç»“ç‚¹çš„å®šä¹‰</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> value; <span class="comment">//èŠ‚ç‚¹å¯¹åº”åŒºé—´çš„æƒå€¼ï¼ˆä¸å”¯ä¸€ï¼Œä¹Ÿå¯ä»¥ä»£è¡¨åŒºé—´æœ€å¤§å€¼ç­‰ï¼‰</span></span><br><span class="line">    <span class="keyword">int</span> left, right; <span class="comment">//åŒºé—´[left, right]</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> <span class="title">tree</span>[1000];</span></span><br><span class="line"><span class="keyword">int</span> father[<span class="number">100</span>]; <span class="comment">//è®°å½•æŸä¸ªç‚¹çš„åºå·ï¼Œæ–¹ä¾¿æŸ¥æ‰¾å¯¹åº”çš„æ•°ç»„ä¸‹æ ‡</span></span><br></pre></td></tr></table></figure><h3 id="å»ºæ ‘"><a href="#å»ºæ ‘" class="headerlink" title="å»ºæ ‘"></a>å»ºæ ‘</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Build_tree</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="number">6</span>);</span><br><span class="line"><span class="comment">//ä¸ºåŒºé—´[left, right]å»ºç«‹ä¸€ä¸ªä»¥topä¸ºç¥–å…ˆçš„çº¿æ®µæ ‘ï¼Œtopä¸ºæ ¹èŠ‚ç‚¹ä¸‹æ ‡</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Build_tree</span><span class="params">(<span class="keyword">int</span> top, <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tree[top].left = left; <span class="comment">//å†™å…¥ç¬¬indexä¸ªç»“ç‚¹çš„å·¦åŒºé—´</span></span><br><span class="line">    tree[top].right = right; <span class="comment">//å†™å…¥ç¬¬indexä¸ªç»“ç‚¹çš„å³åŒºé—´</span></span><br><span class="line">    tree[top].value = <span class="number">0</span>; <span class="comment">//æ¯ä¸ªåŒºé—´çš„å€¼åˆå§‹åŒ–ä¸º0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(left == right)<span class="comment">//åŒºé—´é•¿åº¦ä¸º0æ—¶ï¼Œèµ‹å€¼å¹¶ä¸”ç»“æŸé€’å½’</span></span><br><span class="line">    &#123;</span><br><span class="line">    tree[top].value = arr[left];</span><br><span class="line">        father[left] = top;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> mid = (right + left) / <span class="number">2</span>; <span class="comment">//å–åŒºé—´ä¸­ç‚¹</span></span><br><span class="line">    <span class="keyword">int</span> left_node = top * <span class="number">2</span>; <span class="comment">//å·¦å­©å­ä¸‹æ ‡</span></span><br><span class="line">    <span class="keyword">int</span> right_node = top * <span class="number">2</span> + <span class="number">1</span>;  <span class="comment">//å³å­©å­ä¸‹æ ‡</span></span><br><span class="line">    <span class="built_in">Build_tree</span>(left_node, left, mid);  <span class="comment">//å¾€å·¦å­©å­æ–¹å‘ç»§ç»­å»ºç«‹çº¿æ®µæ ‘</span></span><br><span class="line">    <span class="built_in">Build_tree</span>(right_node, mid + <span class="number">1</span>, right);  <span class="comment">//å¾€å³å­©å­æ–¹å‘ç»§ç»­å»ºç«‹çº¿æ®µæ ‘</span></span><br><span class="line">    <span class="comment">//æ›´æ–°ç»“ç‚¹å€¼ä¸ºå·¦å³å­©å­çš„å’Œ</span></span><br><span class="line">    tree[top].value = tree[left_node].value + tree[right_node].value; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ›´æ–°"><a href="#æ›´æ–°" class="headerlink" title="æ›´æ–°"></a>æ›´æ–°</h3><p>æ›´æ–°æ•°ç»„çš„ç¬¬5ä¸ªå…ƒç´ çš„å€¼ä¸º6ï¼Œç›´æ¥åœ¨æ ‘é‡Œé¢æ›´æ–°è¯¥ç»“ç‚¹çš„å€¼åï¼Œç„¶åä»çˆ¶ç»“ç‚¹å¾€ä¸Šæ›´æ–°ï¼Œç›´åˆ°æ›´æ–°åˆ°äº†æ ¹ç»“ç‚¹ã€‚<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tree[father[<span class="number">5</span>]].value = <span class="number">6</span>;</span><br><span class="line">    <span class="built_in">Update</span>(father[<span class="number">5</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span><span class="params">(<span class="keyword">int</span> index)</span><span class="comment">//indexä¸ºè¦ä¿®æ”¹é‚£ä¸ªç‚¹çš„æ•°ç»„ä¸‹æ ‡</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> father_node = index / <span class="number">2</span>; <span class="comment">//çˆ¶ç»“ç‚¹ä¸‹æ ‡</span></span><br><span class="line">    <span class="keyword">int</span> left_node = father_node * <span class="number">2</span>;   <span class="comment">//å·¦å­©å­ä¸‹æ ‡</span></span><br><span class="line">    <span class="keyword">int</span> right_node = father_node * <span class="number">2</span> + <span class="number">1</span>;   <span class="comment">//å³å­©å­ä¸‹æ ‡</span></span><br><span class="line">    tree[father_node].value = tree[left_node].value + tree[right_node].value; <span class="comment">//æ›´æ–°å€¼</span></span><br><span class="line">    <span class="keyword">if</span>(father_node == <span class="number">1</span>) <span class="comment">//æ‰¾åˆ°æ ‘çš„æ ¹ç»“ç‚¹ï¼Œç»ˆæ­¢é€€å‡º</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">    <span class="built_in">Update</span>(father_node); <span class="comment">//é€’å½’æ›´æ–°ï¼Œç”±çˆ¶ç»“ç‚¹å¾€ä¸Šæ‰¾</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="æŸ¥è¯¢-L-R-åŒºé—´"><a href="#æŸ¥è¯¢-L-R-åŒºé—´" class="headerlink" title="æŸ¥è¯¢[L,R]åŒºé—´"></a>æŸ¥è¯¢[L,R]åŒºé—´</h3><p><img src="/2019/04/24/%E7%BA%BF%E6%AE%B5%E6%A0%91%E5%85%A5%E9%97%A8/6.png" alt><br>å…ˆæŸ¥è¯¢å·¦å­æ ‘ï¼š</p><ol><li>å¦‚æœæ»¡è¶³æ¡ä»¶3 &gt;= L,åˆ™è¦æŸ¥è¯¢çš„åŒºé—´æœ‰æ¶‰åŠå·¦å­æ ‘ï¼Œä¾‹å¦‚æŸ¥è¯¢[1,2]ï¼Œ[2,4]<ul><li>å¦‚æœæ»¡è¶³3 &gt;= R,åˆ™è¦æŸ¥è¯¢çš„åŒºé—´å®Œå…¨åœ¨å·¦å­æ ‘ï¼Œä¾‹å¦‚[1,2]ï¼Œè¿™æ—¶å€™è¦æŸ¥è¯¢çš„åŒºé—´ä¸å˜</li><li>å¦‚æœä¸æ»¡è¶³3 &gt;= R,åˆ™è¦æŸ¥è¯¢çš„åŒºé—´ä¸å®Œå…¨åœ¨å·¦å­æ ‘ï¼Œä¾‹å¦‚[2,4]ï¼Œè¿™æ—¶å€™å°±éœ€è¦æŸ¥è¯¢åœ¨å·¦å­æ ‘é‚£è¾¹çš„åŒºé—´ï¼Œæ‰€ä»¥è¦æŸ¥è¯¢[2,3]</li></ul></li></ol><p><img src="/2019/04/24/%E7%BA%BF%E6%AE%B5%E6%A0%91%E5%85%A5%E9%97%A8/6.png" alt="90%"><br>åŒç†å†æŸ¥è¯¢å³å­æ ‘ï¼š</p><ol><li>å¦‚æœæ»¡è¶³æ¡ä»¶R &gt;= 4,åˆ™è¦æŸ¥è¯¢çš„åŒºé—´æœ‰æ¶‰åŠå³å­æ ‘ï¼Œä¾‹å¦‚æŸ¥è¯¢[4,6]ï¼Œ[2,5]<ul><li>å¦‚æœæ»¡è¶³L &gt;= 4,åˆ™è¦æŸ¥è¯¢çš„åŒºé—´å®Œå…¨åœ¨å³å­æ ‘ï¼Œä¾‹å¦‚[4,6]ï¼Œè¿™æ—¶å€™è¦æŸ¥è¯¢çš„åŒºé—´ä¸å˜</li><li>å¦‚æœä¸æ»¡è¶³L &gt;= 4,åˆ™è¦æŸ¥è¯¢çš„åŒºé—´ä¸å®Œå…¨åœ¨å³å­æ ‘ï¼Œä¾‹å¦‚[2,5]ï¼Œè¿™æ—¶å€™å°±éœ€è¦æŸ¥è¯¢åœ¨å³å­æ ‘é‚£è¾¹çš„åŒºé—´ï¼Œæ‰€ä»¥è¦æŸ¥è¯¢[4,5]</li></ul></li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä»indexå¼€å§‹æŸ¥è¯¢ï¼Œæ‰€ä»¥indexä¸€èˆ¬ä¸ºæ ‘çš„æ ¹ç»“ç‚¹,æŸ¥è¯¢çš„åŒºé—´æ˜¯[L,R]ï¼Œç»“æœä¿ç•™åœ¨ansé‡Œé¢</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Query</span><span class="params">(<span class="keyword">int</span> index, <span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span>&amp; ans)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tree[index].left == L &amp;&amp; tree[index].right == R)&#123; <span class="comment">//æ‰¾åˆ°äº†ä¸€ä¸ªå®Œå…¨é‡åˆçš„åŒºé—´</span></span><br><span class="line">        ans += tree[index].value;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> left_node = index*<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span>(L &lt;= tree[left_node].right)&#123; <span class="comment">//å·¦åŒºé—´æœ‰æ¶‰åŠ</span></span><br><span class="line">    <span class="keyword">if</span>(R &lt;= tree[left_node].right) <span class="comment">//å…¨åŒ…å«äºå·¦åŒºé—´ï¼ŒæŸ¥è¯¢åŒºé—´ä¸å˜</span></span><br><span class="line">        <span class="built_in">Query</span>(left_node, L, R, ans);</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">//åŠåŒ…å«äºå·¦åŒºé—´ï¼Œåˆ™æŸ¥è¯¢åŒºé—´æ‹†åˆ†ï¼Œå·¦ç«¯ç‚¹ä¸å˜ï¼Œå³ç«¯ç‚¹å˜ä¸ºå·¦å­©å­çš„å³åŒºé—´ç«¯ç‚¹</span></span><br><span class="line">        <span class="built_in">Query</span>(left_node, L, tree[left_node].right, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> right_node = left_node + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(R &gt;= tree[right_node].left)&#123; <span class="comment">//å³åŒºé—´æœ‰æ¶‰åŠ</span></span><br><span class="line">    <span class="keyword">if</span>(L &gt;= tree[right_node].left) <span class="comment">//å…¨åŒ…å«äºå³åŒºé—´ï¼ŒæŸ¥è¯¢åŒºé—´ä¸å˜</span></span><br><span class="line">        <span class="built_in">Query</span>(right_node, L, R, ans);</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">//åŠåŒ…å«äºå·¦åŒºé—´ï¼Œåˆ™æŸ¥è¯¢åŒºé—´æ‹†åˆ†ï¼Œä¸ä¸ŠåŒç†</span></span><br><span class="line">        <span class="built_in">Query</span>(right_node, tree[right_node].left, R, ans);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2019/04/24/%E7%BA%BF%E6%AE%B5%E6%A0%91%E5%85%A5%E9%97%A8/10.PNG" alt></p><h2 id="æ¨¡æ¿é¢˜HDU1754"><a href="#æ¨¡æ¿é¢˜HDU1754" class="headerlink" title="æ¨¡æ¿é¢˜HDU1754"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1754">æ¨¡æ¿é¢˜HDU1754</a></h2><p><img src="/2019/04/24/%E7%BA%BF%E6%AE%B5%E6%A0%91%E5%85%A5%E9%97%A8/timu.png" alt></p><p>936MS    8336Kï¼ˆæ³¨æ„ï¼Œçº¿æ®µæ ‘éœ€è¦ç©ºé—´æ¯”è¾ƒå¤§ï¼Œæ•°ç»„å¼€å°å¯èƒ½ä¼šwaæˆ–è€…TLEï¼Œä¸€èˆ¬ä¸º4nï¼‰<br><img src="/2019/04/24/%E7%BA%BF%E6%AE%B5%E6%A0%91%E5%85%A5%E9%97%A8/11.PNG" alt></p><h2 id="çº¿æ®µæ ‘éƒ¨åˆ†ä¼˜åŒ–"><a href="#çº¿æ®µæ ‘éƒ¨åˆ†ä¼˜åŒ–" class="headerlink" title="çº¿æ®µæ ‘éƒ¨åˆ†ä¼˜åŒ–"></a>çº¿æ®µæ ‘éƒ¨åˆ†ä¼˜åŒ–</h2><ol><li><code>a*2</code>å¯ä»¥ç”¨<code>a&lt;&lt;1</code>ä»£æ›¿ï¼Œ<code>a/2</code>å¯ä»¥ç”¨<code>a&gt;&gt;1</code>ä»£æ›¿ã€‚ï¼ˆä½è¿ç®—å…¶å®å°±æ˜¯ç›´æ¥å¯¹åœ¨å†…å­˜ä¸­çš„äºŒè¿›åˆ¶æ•°æ®è¿›è¡Œæ“ä½œï¼Œå› æ­¤å¤„ç†æ•°æ®çš„é€Ÿåº¦éå¸¸å¿«ï¼‰</li><li>å› ä¸ºä¸‹æ ‡ä¸ºaçš„èŠ‚ç‚¹çš„å·¦å„¿å­ä¸‹æ ‡ä¸º<code>a*2</code>ï¼Œå³å„¿å­ä¸‹æ ‡ä¸º<code>a*2+1</code>ï¼Œæ‰€ä»¥å¯ä»¥</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åŠ å…¥ä¸€äº›ç¼–è¯‘é¢„å¤„ç†æŒ‡ä»¤å¯ä»¥æé«˜ç¼–ç¨‹æ•ˆç‡ï¼ŒåŠ å¿«ç¼–è¯‘é€Ÿåº¦</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LS(a) (a &lt;&lt; 1)</span></span><br><span class="line"><span class="comment">// a&lt;&lt;1 ç­‰åŒäº a*2</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RS(a) (a &lt;&lt; 1 | 1)</span></span><br><span class="line"><span class="comment">// a&lt;&lt;1|1 ç­‰åŒäº a*2+1</span></span><br></pre></td></tr></table></figure><h2 id="çº¿æ®µæ ‘è¿›é˜¶"><a href="#çº¿æ®µæ ‘è¿›é˜¶" class="headerlink" title="çº¿æ®µæ ‘è¿›é˜¶"></a>çº¿æ®µæ ‘è¿›é˜¶</h2><ol><li>Lazyæ ‡è®°â€”ç”¨äºåŒæ—¶æ›´æ–°ä¸€æ®µåŒºé—´çš„å€¼ï¼š<a href="http://poj.org/problem?id=3468">poj3468 A Simple Problem with Integers</a></li><li>çº¿æ®µæ ‘ç¦»æ•£åŒ–ï¼ˆèŠ‚çº¦ç©ºé—´ï¼‰â€”<a href="http://poj.org/problem?id=2528">poj2528 Mayorâ€™s posters</a></li><li>çº¿æ®µæ ‘åº”ç”¨ï¼šæ‰«æçº¿é—®é¢˜ï¼ˆæ±‚å¤šä¸ªçŸ©å½¢äº’ç›¸è¦†ç›–åçš„é¢ç§¯ï¼‰ï¼š<a href="http://poj.org/problem?id=1151">poj1151 Atlantis</a></li><li>å¯æŒä¹…åŒ–ï¼ˆä¿ç•™æ•´ä¸ªæ“ä½œçš„å†å²ï¼‰â€”ä¸»å¸­æ ‘</li></ol>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¿æ®µæ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè™šæ‹Ÿæœºç¬”è®°-å¸¸é‡çš„æœ¬è´¨å«ä¹‰ä»¥åŠåç¼–è¯‘å‡ºç°çš„éƒ¨åˆ†åŠ©è®°ç¬¦</title>
      <link href="/2019/04/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%B8%B8%E9%87%8F%E7%9A%84%E6%9C%AC%E8%B4%A8%E5%90%AB%E4%B9%89%E4%BB%A5%E5%8F%8A%E5%8F%8D%E7%BC%96%E8%AF%91%E5%87%BA%E7%8E%B0%E7%9A%84%E9%83%A8%E5%88%86%E5%8A%A9%E8%AE%B0%E7%AC%A6/"/>
      <url>/2019/04/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%B8%B8%E9%87%8F%E7%9A%84%E6%9C%AC%E8%B4%A8%E5%90%AB%E4%B9%89%E4%BB%A5%E5%8F%8A%E5%8F%8D%E7%BC%96%E8%AF%91%E5%87%BA%E7%8E%B0%E7%9A%84%E9%83%A8%E5%88%86%E5%8A%A9%E8%AE%B0%E7%AC%A6/</url>
      
        <content type="html"><![CDATA[<p>å¸¸é‡çš„æœ¬è´¨å«ä¹‰ä»¥åŠåç¼–è¯‘å‡ºç°çš„éƒ¨åˆ†åŠ©è®°ç¬¦</p><span id="more"></span><h1 id="æ ·ä¾‹1"><a href="#æ ·ä¾‹1" class="headerlink" title="æ ·ä¾‹1"></a>æ ·ä¾‹1</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        System.out.println(Mychild1.str);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyParent1</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String str = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        out.println(<span class="string">&quot;Myparent1 static block&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mychild1</span> <span class="keyword">extends</span> <span class="title">MyParent1</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String str2 = <span class="string">&quot;welcome&quot;</span>;</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Mychild1 static block&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹äºé™æ€å­—æ®µæ¥è¯´ï¼Œåªæœ‰å®šä¹‰äº†è¯¥å­—æ®µçš„ç±»æ‰ä¼šè¢«åˆå§‹åŒ–ï¼Œå½“ä¸€ä¸ªç±»åœ¨åˆå§‹åŒ–æ—¶ï¼Œè¦æ±‚å…¶çˆ¶ç±»å…¨éƒ¨éƒ½å·²ç»åˆå§‹åŒ–å®Œæ¯•äº†ã€‚æ‰€ä»¥ä¸Šè¿°ä»£ç åªä¼šè¾“å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Myparent1 static block</span><br><span class="line">hello world</span><br></pre></td></tr></table></figure><p>å¹¶æ²¡æœ‰<code>welcome</code>ä»¥åŠ<code>Mychild1 static block</code></p><p>ä½†æ˜¯å­ç±»<code>Mychild1</code>æœ‰æ²¡æœ‰è¢«åŠ è½½å‘¢ï¼Œå¯ä»¥ä½¿ç”¨è™šæ‹Ÿæœºå‚æ•°å»æŸ¥çœ‹</p><p><code>-XX:+TraceClassLoading</code></p><p>ç„¶åè¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°å­ç±»è¢«åŠ è½½äº†ï¼Œ(è¿™ä¸ªæœ‰æ²¡æœ‰åŠ è½½å¹¶æ²¡æœ‰è§„èŒƒ)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">[Loaded sun.net.NetHooks$Provider from /usr/lib/jvm/java-<span class="number">8</span>-oracle/jre/lib/rt.jar]</span><br><span class="line">[Loaded sun.net.sdp.SdpProvider from /usr/lib/jvm/java-<span class="number">8</span>-oracle/jre/lib/rt.jar]</span><br><span class="line">[Loaded MyParent1 from file:/home/cc/IdeaProjects/test/out/production/test/]</span><br><span class="line">[Loaded Mychild1 from file:/home/cc/IdeaProjects/test/out/production/test/]</span><br><span class="line">[Loaded java.net.Socket$<span class="number">2</span> from /usr/lib/jvm/java-<span class="number">8</span>-oracle/jre/lib/rt.jar]</span><br><span class="line">Myparent1 <span class="keyword">static</span> block</span><br><span class="line">hello world</span><br><span class="line">[Loaded java.net.SocketInputStream from /usr/lib/jvm/java-<span class="number">8</span>-oracle/jre/lib/rt.jar]</span><br><span class="line">[Loaded sun.nio.cs.US_ASCII$Decoder from /usr/lib/jvm/java-<span class="number">8</span>-oracle/jre/lib/rt.jar]</span><br><span class="line">[Loaded java.lang.Shutdown from /usr/lib/jvm/java-<span class="number">8</span>-oracle/jre/lib/rt.jar]</span><br><span class="line">[Loaded java.lang.Shutdown$Lock from /usr/lib/jvm/java-<span class="number">8</span>-oracle/jre/lib/rt.jar]</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure><h1 id="è™šæ‹Ÿæœºå‚æ•°ä¸€èˆ¬å½¢å¼"><a href="#è™šæ‹Ÿæœºå‚æ•°ä¸€èˆ¬å½¢å¼" class="headerlink" title="è™šæ‹Ÿæœºå‚æ•°ä¸€èˆ¬å½¢å¼"></a>è™šæ‹Ÿæœºå‚æ•°ä¸€èˆ¬å½¢å¼</h1><p><code>-XX:+&lt;option&gt;</code>ï¼šè¡¨ç¤ºå¼€å¯optioné€‰é¡¹</p><p><code>-XX:-&lt;option&gt;</code>ï¼šè¡¨ç¤ºå…³é—­optioné€‰é¡¹</p><p><code>`-XX:&lt;option&gt;=value</code>ï¼šè¡¨ç¤ºå°†optioné€‰é¡¹çš„å€¼è®¾ç½®ä¸ºvalue</p><h1 id="æ ·ä¾‹2"><a href="#æ ·ä¾‹2" class="headerlink" title="æ ·ä¾‹2"></a>æ ·ä¾‹2</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        System.out.println(MyParent2.str);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyParent2</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String str = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Myparent2 static block&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//output: hello world</span></span><br></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆè¾“å‡ºæ²¡æœ‰<code>Myparent2 static block</code>å‘¢ï¼Ÿ</p><p><strong>å¸¸é‡åœ¨ç¼–è¯‘é˜¶æ®µä¼šå­˜å…¥åˆ°è°ƒç”¨è¿™ä¸ªå¸¸é‡çš„æ–¹æ³•æ‰€åœ¨çš„ç±»çš„å¸¸é‡æ± ä¸­ï¼Œæœ¬è´¨ä¸Šï¼Œè°ƒç”¨ç±»å¹¶æ²¡æœ‰ç›´æ¥å¼•ç”¨åˆ°å®šä¹‰å¸¸é‡çš„ç±»ï¼Œå› æ­¤å¹¶ä¸ä¼šè§¦å‘å®šä¹‰å¸¸é‡çš„ç±»çš„åˆå§‹åŒ–</strong></p><p><strong>æ³¨æ„ï¼šè¿™é‡ŒæŒ‡çš„æ˜¯å°†å¸¸é‡æ”¾åˆ°äº†<code>Main</code>çš„å¸¸é‡æ± ä¸­ï¼Œä¹‹å<code>Main</code>ä¸<code>MyParent2</code>å°±æ²¡æœ‰ä»»ä½•å…³ç³»äº†.</strong></p><p>ç”šè‡³å¯ä»¥å°†<code>MyParent2</code>çš„classæ–‡ä»¶åˆ é™¤</p><p><img src="/2019/04/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%B8%B8%E9%87%8F%E7%9A%84%E6%9C%AC%E8%B4%A8%E5%90%AB%E4%B9%89%E4%BB%A5%E5%8F%8A%E5%8F%8D%E7%BC%96%E8%AF%91%E5%87%BA%E7%8E%B0%E7%9A%84%E9%83%A8%E5%88%86%E5%8A%A9%E8%AE%B0%E7%AC%A6/1.png" alt></p><p><img src="/2019/04/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%B8%B8%E9%87%8F%E7%9A%84%E6%9C%AC%E8%B4%A8%E5%90%AB%E4%B9%89%E4%BB%A5%E5%8F%8A%E5%8F%8D%E7%BC%96%E8%AF%91%E5%87%BA%E7%8E%B0%E7%9A%84%E9%83%A8%E5%88%86%E5%8A%A9%E8%AE%B0%E7%AC%A6/2.png" alt></p><h1 id="å¯¹æ ·ä¾‹2åç¼–è¯‘"><a href="#å¯¹æ ·ä¾‹2åç¼–è¯‘" class="headerlink" title="å¯¹æ ·ä¾‹2åç¼–è¯‘"></a>å¯¹æ ·ä¾‹2åç¼–è¯‘</h1><p><img src="/2019/04/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%B8%B8%E9%87%8F%E7%9A%84%E6%9C%AC%E8%B4%A8%E5%90%AB%E4%B9%89%E4%BB%A5%E5%8F%8A%E5%8F%8D%E7%BC%96%E8%AF%91%E5%87%BA%E7%8E%B0%E7%9A%84%E9%83%A8%E5%88%86%E5%8A%A9%E8%AE%B0%E7%AC%A6/3.png" alt></p><p>å¯¹æ ·ä¾‹2åç¼–è¯‘åæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€äº›åŠ©è®°ç¬¦ä»¥åŠcodeé‚£é‡Œçš„ä¸€äº›æ„é€ æ–¹æ³•,ä¸‹é¢çœ‹ä¸€äº›åŠ©è®°ç¬¦(æ“ä½œç )</p><ul><li><p>gestaticï¼šå¾—åˆ°outè¿™ä¸ªå¯¹è±¡,æœ¬èº«outè¿™ä¸ªå¯¹è±¡æ˜¯ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡</p></li><li><p>ldcï¼šè¡¨ç¤ºå°†intï¼Œfloatæˆ–æ˜¯Stringç±»å‹çš„å¸¸é‡å€¼ä»å¸¸é‡æ± ä¸­æ¨é€è‡³æ ˆé¡¶ï¼ˆæ ˆé¡¶è¡¨ç¤ºç­‰ä¼šç«‹å³è¦ç”¨çš„ï¼‰</p></li></ul><p>å°†ä»£ç æ”¹ä¸º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        System.out.println(MyParent2.S);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyParent2</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">short</span> S = <span class="number">7</span>;</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Myparent2 static block&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååç¼–è¯‘</p><p><img src="/2019/04/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%B8%B8%E9%87%8F%E7%9A%84%E6%9C%AC%E8%B4%A8%E5%90%AB%E4%B9%89%E4%BB%A5%E5%8F%8A%E5%8F%8D%E7%BC%96%E8%AF%91%E5%87%BA%E7%8E%B0%E7%9A%84%E9%83%A8%E5%88%86%E5%8A%A9%E8%AE%B0%E7%AC%A6/4.png" alt></p><p>å¯ä»¥çœ‹åˆ°å…¶ä»–çš„ç›¸åŒï¼Œå‡ºç°ä¸€ä¸ªæ–°çš„åå«<code>bipush</code>çš„åŠ©è®°ç¬¦</p><ul><li>bipushï¼šè¡¨ç¤ºå°†å•å­—èŠ‚(-128~127)çš„å¸¸é‡å€¼æ¨é€åˆ°æ ˆé¡¶</li></ul><p>æ”¹ä¸º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> i = <span class="number">128</span>;</span><br></pre></td></tr></table></figure><p><img src="/2019/04/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%B8%B8%E9%87%8F%E7%9A%84%E6%9C%AC%E8%B4%A8%E5%90%AB%E4%B9%89%E4%BB%A5%E5%8F%8A%E5%8F%8D%E7%BC%96%E8%AF%91%E5%87%BA%E7%8E%B0%E7%9A%84%E9%83%A8%E5%88%86%E5%8A%A9%E8%AE%B0%E7%AC%A6/5.png" alt></p><ul><li>sipushï¼šè¡¨ç¤ºå°†ä¸€ä¸ªçŸ­æ•´å‹çš„å¸¸é‡å€¼(-32768~32767)æ¨é€åˆ°æ ˆé¡¶</li></ul><p>æ”¹ä¸º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> i = <span class="number">1</span>;</span><br></pre></td></tr></table></figure><p><img src="/2019/04/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%B8%B8%E9%87%8F%E7%9A%84%E6%9C%AC%E8%B4%A8%E5%90%AB%E4%B9%89%E4%BB%A5%E5%8F%8A%E5%8F%8D%E7%BC%96%E8%AF%91%E5%87%BA%E7%8E%B0%E7%9A%84%E9%83%A8%E5%88%86%E5%8A%A9%E8%AE%B0%E7%AC%A6/6.png" alt></p><ul><li>iconst_1ï¼šè¡¨ç¤ºå°†intå‹1æ¨é€è‡³æ ˆé¡¶(<code>iconst_m1~iconst_5</code>)</li></ul><h1 id="åŠ©è®°ç¬¦"><a href="#åŠ©è®°ç¬¦" class="headerlink" title="åŠ©è®°ç¬¦"></a>åŠ©è®°ç¬¦</h1><p>åŠ©è®°ç¬¦åœ¨<code>jt.jar</code>åŒ…æœ‰ç›¸å…³çš„ç±»å®ç°</p><p>æ¯”å¦‚<code>ICONST</code>ï¼Œåœ¨åŒ…<code>com.sun.org.apache.bcel.internal.generic</code>é‡Œé¢</p><p><img src="/2019/04/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%B8%B8%E9%87%8F%E7%9A%84%E6%9C%AC%E8%B4%A8%E5%90%AB%E4%B9%89%E4%BB%A5%E5%8F%8A%E5%8F%8D%E7%BC%96%E8%AF%91%E5%87%BA%E7%8E%B0%E7%9A%84%E9%83%A8%E5%88%86%E5%8A%A9%E8%AE%B0%E7%AC%A6/7.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ICONST</span> <span class="keyword">extends</span> <span class="title">Instruction</span></span></span><br><span class="line"><span class="class">  <span class="keyword">implements</span> <span class="title">ConstantPushInstruction</span>, <span class="title">TypedInstruction</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> value;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Empty constructor needed for the Class.newInstance() statement in</span></span><br><span class="line"><span class="comment">   * Instruction.readInstruction(). Not to be used otherwise.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  ICONST() &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">ICONST</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>(com.sun.org.apache.bcel.internal.Constants.ICONST_0, (<span class="keyword">short</span>)<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>((i &gt;= -<span class="number">1</span>) &amp;&amp; (i &lt;= <span class="number">5</span>))</span><br><span class="line">      opcode = (<span class="keyword">short</span>)(com.sun.org.apache.bcel.internal.Constants.ICONST_0 + i); <span class="comment">// Even works for i == -1</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> ClassGenException(<span class="string">&quot;ICONST can be used only for value between -1 and 5: &quot;</span> +</span><br><span class="line">                                  i);</span><br><span class="line">    value = i;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œå®ƒ<code>icosnt</code>åªæœ‰[-1,5]</p><p>å†æ¯”å¦‚<code>sipush</code></p><p><img src="/2019/04/23/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%B8%B8%E9%87%8F%E7%9A%84%E6%9C%AC%E8%B4%A8%E5%90%AB%E4%B9%89%E4%BB%A5%E5%8F%8A%E5%8F%8D%E7%BC%96%E8%AF%91%E5%87%BA%E7%8E%B0%E7%9A%84%E9%83%A8%E5%88%86%E5%8A%A9%E8%AE%B0%E7%AC%A6/8.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SIPUSH</span> <span class="keyword">extends</span> <span class="title">Instruction</span> <span class="keyword">implements</span> <span class="title">ConstantPushInstruction</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">short</span> b;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Empty constructor needed for the Class.newInstance() statement in</span></span><br><span class="line"><span class="comment">   * Instruction.readInstruction(). Not to be used otherwise.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  SIPUSH() &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">SIPUSH</span><span class="params">(<span class="keyword">short</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>(com.sun.org.apache.bcel.internal.Constants.SIPUSH, (<span class="keyword">short</span>)<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">this</span>.b = b;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jvm </tag>
            
            <tag> å¸¸é‡æœ¬è´¨ </tag>
            
            <tag> åŠ©è®°ç¬¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2019ä¸­å±±å¤§å­¦ç¨‹åºè®¾è®¡ç«èµ›-é‡ç°èµ›-è¡¥ä¸¤é“æ°´é¢˜</title>
      <link href="/2019/04/20/2019%E4%B8%AD%E5%B1%B1%E5%A4%A7%E5%AD%A6%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%AB%9E%E8%B5%9B-%E9%87%8D%E7%8E%B0%E8%B5%9B-%E8%A1%A5%E4%B8%A4%E9%81%93%E6%B0%B4%E9%A2%98/"/>
      <url>/2019/04/20/2019%E4%B8%AD%E5%B1%B1%E5%A4%A7%E5%AD%A6%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%AB%9E%E8%B5%9B-%E9%87%8D%E7%8E%B0%E8%B5%9B-%E8%A1%A5%E4%B8%A4%E9%81%93%E6%B0%B4%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>HDU6512 â€”Triangle &amp;&amp; HDU6518â€”Clumsy Keke</p><span id="more"></span><h1 id="HDU6518â€”Clumsy-Keke"><a href="#HDU6518â€”Clumsy-Keke" class="headerlink" title="HDU6518â€”Clumsy Keke"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=6518">HDU6518â€”Clumsy Keke</a></h1><p><img src="/2019/04/20/2019%E4%B8%AD%E5%B1%B1%E5%A4%A7%E5%AD%A6%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%AB%9E%E8%B5%9B-%E9%87%8D%E7%8E%B0%E8%B5%9B-%E8%A1%A5%E4%B8%A4%E9%81%93%E6%B0%B4%E9%A2%98/timu1.png" alt></p><h2 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h2><p>é¢˜ç›®å¤§æ„ï¼š</p><p>ç»™å‡ºä¸€ä¸ªä¸‰ç»´å›¾å½¢çš„xï¼Œyï¼Œzè½´çš„é•¿åº¦ï¼Œç„¶ååˆ†åˆ«ç»™å‡ºæ­£è§†å›¾ï¼Œä¾§è§†å›¾ï¼Œä¿¯è§†å›¾ï¼Œè§†å›¾çš„è¡¨ç¤ºæ–¹æ³•æ˜¯åœ¨ä¸€ä¸ªå¤§æ–¹æ ¼é‡Œé¢ï¼Œç”¨0ä»£è¡¨ç©ºç™½ï¼Œç”¨1ä»£è¡¨é˜´å½±ï¼Œè¿™æ ·å°±å¯ä»¥è¡¨ç¤ºä¸€ä¸ªå›¾å½¢äº†ï¼Œç„¶åæ±‚å‡ºè¿™ä¸ªä¸‰ç»´å›¾å½¢æ˜¯ç”±å¤šå°‘å°æ­£æ–¹ä½“ç»„æˆçš„ã€‚</p><p>æˆ‘ä»¬å¯ä»¥è¿ç”¨é€†å‘æ€ç»´ï¼Œé¦–å…ˆæ„å»ºä¸€ä¸ªå®Œæ•´çš„å›¾å½¢ï¼Œç„¶åå‡å»æ²¡æœ‰å‡ºç°çš„ï¼Œæœ€ç»ˆå‰©ä¸‹æ¥çš„å°±æ˜¯æ‹¥æœ‰çš„ï¼Œç„¶åå†ç»Ÿè®¡ä¸‹æœ‰å‡ ä¸ªå°±æ˜¯æˆ‘ä»¬è¦æ±‚çš„ç­”æ¡ˆäº†ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">2019-04-20 00:21:25</span></span><br><span class="line"><span class="comment">46MS  2184K</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e2</span>;</span><br><span class="line"><span class="keyword">bool</span> Map[MAXN][MAXN][MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x, y, z;</span><br><span class="line">    <span class="keyword">int</span> input;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;x, &amp;y, &amp;z) != EOF)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(Map, <span class="literal">false</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(Map));</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= x; i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= y; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;input);</span><br><span class="line">                <span class="keyword">if</span>(input == <span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= z; k++)</span><br><span class="line">                        Map[i][j][k] = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= y; i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= z; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;input);</span><br><span class="line">                <span class="keyword">if</span>(input == <span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= x; k++)</span><br><span class="line">                        Map[k][i][j] = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= z; i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= x; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;input);</span><br><span class="line">                <span class="keyword">if</span>(input == <span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= y; k++)</span><br><span class="line">                        Map[j][k][i] = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= x; i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= y; j++)</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= z; k++)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span>(Map[i][j][k] == <span class="literal">false</span>)</span><br><span class="line">                        ans++;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="HDU6512-Triangle"><a href="#HDU6512-Triangle" class="headerlink" title="HDU6512-Triangle"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=6512">HDU6512-Triangle</a></h1><p><img src="/2019/04/20/2019%E4%B8%AD%E5%B1%B1%E5%A4%A7%E5%AD%A6%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%AB%9E%E8%B5%9B-%E9%87%8D%E7%8E%B0%E8%B5%9B-%E8%A1%A5%E4%B8%A4%E9%81%93%E6%B0%B4%E9%A2%98/timu2.png" alt></p><h2 id="è§£æ-1"><a href="#è§£æ-1" class="headerlink" title="è§£æ"></a>è§£æ</h2><p>é¢˜ç›®å¤§æ„ï¼š</p><p>ç»™å‡ºnä¸ªæ•°ï¼Œé—®ä½ èƒ½ä¸èƒ½ä»ä¸­é€‰ä¸­ä¸‰ä¸ªæ•°æ„æˆä¸‰è§’å½¢</p><p>ï¼ˆæ ¹æ®èŒƒå›´ï¼Œç›´æ¥ç®—è‚¯å®šTï¼‰</p><p>å› ä¸ºä¸¤è¾¹ä¹‹å’Œä¸€å®šè¦å¤§äºç¬¬ä¸‰è¾¹ï¼Œå› æ­¤å½“æ•°åˆ—æ»¡è¶³ï¼Œæ’åºåï¼Œè¾ƒå°ä¸¤è¾¹ç›¸åŠ éƒ½å°äºç­‰äºä¸‹ä¸€æ¡è¾¹ï¼Œè¿™ç§åºåˆ—å³æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œç”šè‡³æ¯”æ–æ³¢é‚£å¥‘æ•°åˆ—æ›´å®¹æ˜“å¢å¤§çš„æ•°åˆ—ã€‚</p><p>åè¿‡æ¥æƒ³æƒ³ï¼Œæ—¢ç„¶æ„é€ ä¸€ä¸ªè¶…é•¿çš„ä¸èƒ½æ»¡è¶³æ„æˆä¸‰è§’å½¢çš„æ•°åˆ—å¿…é¡»æœ€ä½é™åº¦æ˜¯æ„é€ ä¸€ä¸ªæ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°åˆ—é•¿åº¦èƒ½å¦æ„é€ å¾—å¾ˆé•¿ï¼Ÿä¸è¡Œï¼Œå› ä¸ºæ–æ³¢é‚£å¥‘æ•°åˆ—åˆ°ç¬¬51ä¸ªå°±è¶…è¿‡<code>5^1e6</code>äº†ã€‚<br>å› ä¸ºæ•°åˆ—ä¸­æ‰€æœ‰å€¼éƒ½å°äº5^1e6ï¼Œå› æ­¤ä»»ä½•åŒºé—´å¤§äº50çš„é•¿åº¦ï¼Œå¿…å®šå­˜åœ¨èƒ½æ„é€ å‡ºä¸‰è§’å½¢çš„ä¸‰è¾¹ï¼Œ150ä»¥å†…çš„ï¼Œç›´æ¥åŒºé—´æ’åºåæš´åŠ›æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨èƒ½æ„æˆä¸‰è¾¹çš„ä¸‰è§’å½¢å³å¯ã€‚</p><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/kuronekonano/article/details/79701126">https://blog.csdn.net/kuronekonano/article/details/79701126</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">2019-04-19 21:24:51</span></span><br><span class="line"><span class="comment">1513MS1384K</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">5</span>*<span class="number">1E6</span>+<span class="number">100</span>;</span><br><span class="line"><span class="keyword">char</span> s[MAXN];</span><br><span class="line"><span class="keyword">int</span> arr[<span class="number">1000</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n,a ,b ,c;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n) != EOF)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(n &gt; <span class="number">50</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;YES\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;arr[i]);</span><br><span class="line">            <span class="built_in">sort</span>(arr, arr + n);</span><br><span class="line">            <span class="keyword">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; n; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">int</span> a = arr[i];</span><br><span class="line">                <span class="keyword">int</span> b = arr[i<span class="number">-1</span>];</span><br><span class="line">                <span class="keyword">int</span> c = arr[i<span class="number">-2</span>];</span><br><span class="line">                <span class="keyword">if</span>((a+b&gt;c &amp;&amp; a+c&gt;b &amp;&amp; b+c&gt;a))</span><br><span class="line">                &#123;</span><br><span class="line">                    flag = <span class="literal">true</span>;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;YES\n&quot;</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(!flag)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;NO\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–æ³¢é‚£å¥‘ </tag>
            
            <tag> æ€ç»´é¢˜ç›® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€äº›STLçŸ¥è¯†å¡«å‘</title>
      <link href="/2019/04/19/%E4%B8%80%E4%BA%9BSTL%E7%9F%A5%E8%AF%86%E5%A1%AB%E5%9D%91/"/>
      <url>/2019/04/19/%E4%B8%80%E4%BA%9BSTL%E7%9F%A5%E8%AF%86%E5%A1%AB%E5%9D%91/</url>
      
        <content type="html"><![CDATA[<p>ä¸€äº›STLçŸ¥è¯†å¡«å‘</p><span id="more"></span><p>å‚è€ƒï¼š<a href="https://oi-wiki.org">https://oi-wiki.org</a></p><h2 id="nth-element"><a href="#nth-element" class="headerlink" title="nth_element"></a>nth_element</h2><p>ä½œç”¨æ˜¯æ‰¾åˆ°é€‰å®šåŒºé—´å†…ç¬¬ å¤§çš„æ•°ï¼Œå¹¶å°†æ‰€æœ‰æ¯”å®ƒå°çš„æ•°ä¸æ¯”å®ƒå¤§çš„æ•°åˆ†åˆ«ç½®äºä¸¤ä¾§ï¼Œè¿”å›å®ƒçš„åœ°å€ã€‚åŸç†æ˜¯æœªå®Œæˆçš„å¿«é€Ÿæ’åºï¼Œæ—¶é—´å¤æ‚åº¦ï¼šæœŸæœ› O(n)</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> a[]=&#123;<span class="number">3</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">9</span>&#125;;</span><br><span class="line"><span class="built_in">nth_element</span>(a, a+<span class="number">5</span>, a+<span class="number">9</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">9</span>;i++)</span><br><span class="line">   cout &lt;&lt; a[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    cout&lt;&lt;endl&lt;&lt;<span class="string">&quot;è¾“å‡ºç¬¬äº”å¤§çš„æ•°ï¼š &quot;</span>&lt;&lt;a[<span class="number">4</span>]&lt;&lt;endl; <span class="comment">//æ³¨æ„ä¸‹æ ‡æ˜¯ä»0å¼€å§‹è®¡æ•°çš„</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">output:</span></span><br><span class="line"><span class="comment">2 1 4 3 5 6 8 7 9</span></span><br><span class="line"><span class="comment">è¾“å‡ºç¬¬äº”å¤§çš„æ•°ï¼š 5</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="stable-sort"><a href="#stable-sort" class="headerlink" title="stable_sort"></a>stable_sort</h2><p>ç¨³å®šçš„O(nlogn)æ’åºï¼Œå³ä¿è¯ç›¸ç­‰å…ƒç´ æ’åºåçš„ç›¸å¯¹ä½ç½®ä¸åŸåºåˆ—ç›¸åŒã€‚</p><h2 id="partial-sort"><a href="#partial-sort" class="headerlink" title="partial_sort"></a>partial_sort</h2><p>å°†åºåˆ—ä¸­å‰kå°å…ƒç´ æŒ‰é¡ºåºç½®äºå‰kä¸ªä½ç½®ï¼Œåé¢çš„å…ƒç´ ä¸ä¿è¯é¡ºåºã€‚æ—¶é—´å¤æ‚åº¦ï¼šO(nlogk)</p><p><img src="/2019/04/19/%E4%B8%80%E4%BA%9BSTL%E7%9F%A5%E8%AF%86%E5%A1%AB%E5%9D%91/patial_sort.PNG" alt></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> a[]=&#123;<span class="number">3</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">9</span>&#125;;</span><br><span class="line"><span class="built_in">partial_sort</span>(a, a+<span class="number">3</span>, a+<span class="number">9</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">9</span>;i++)</span><br><span class="line">   cout &lt;&lt; a[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">outputï¼š</span></span><br><span class="line"><span class="comment">1 2 3 5 4 6 8 7 9</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> STL </tag>
            
            <tag> nth_element </tag>
            
            <tag> sort </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>EXBSGSç®—æ³•</title>
      <link href="/2019/04/19/EXBSGS%E7%AE%97%E6%B3%95/"/>
      <url>/2019/04/19/EXBSGS%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>EXBSGS</p><span id="more"></span><p>$a^{x} \equiv b(\bmod p)$</p><p>BSGSåªèƒ½æ±‚è§£pä¸ºç´ æ•°çš„æƒ…å†µï¼ŒEXBSGSå¯ä»¥å®Œç¾è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå…¶åŸºæœ¬æ€è·¯å°±æ˜¯é€šè¿‡è½¬æ¢ï¼Œç„¶åå¯ä»¥è¿ç”¨BSGSç®—æ³•æ¥æ±‚è§£ï¼Œæœ€ç»ˆè¿˜æ˜¯åŸºäºBSGSåŸºç¡€</p><h1 id="EXBSGS"><a href="#EXBSGS" class="headerlink" title="EXBSGS"></a>EXBSGS</h1><p>å‚è€ƒï¼š<a href="https://www.cnblogs.com/TheRoadToTheGold/p/8478697.html">https://www.cnblogs.com/TheRoadToTheGold/p/8478697.html</a></p><p><a href="https://blog.csdn.net/a_bright_ch/article/details/83513731">https://blog.csdn.net/a_bright_ch/article/details/83513731</a></p><p><a href="https://www.cnblogs.com/lajioj/p/9529255.html">https://www.cnblogs.com/lajioj/p/9529255.html</a></p><p>æ±‚è§£$a^{x} \equiv b(\bmod p)$ï¼ˆPä¸ä¸€å®šæ˜¯è´¨æ•°ï¼‰çš„æœ€å°éè´Ÿæ­£æ•´æ•°è§£</p><p><strong>å…ˆæ”¾ä¸‰ä¸ªåŒä½™å®šç†</strong></p><ul><li>å®šç†1ï¼š</li></ul><p><img src="/2019/04/19/EXBSGS%E7%AE%97%E6%B3%95/gongshi1.png" alt></p><ul><li>å®šç†2ï¼š</li></ul><p><img src="/2019/04/19/EXBSGS%E7%AE%97%E6%B3%95/gongshi2.png" alt></p><ul><li>å®šç†3ï¼š</li></ul><p><img src="/2019/04/19/EXBSGS%E7%AE%97%E6%B3%95/gongshi3.png" alt></p><p><strong>æ±‚è§£</strong></p><ol><li><p>å¦‚æœb==1ï¼Œé‚£ä¹ˆx=0ï¼Œç®—æ³•ç»“æŸ</p></li><li><p>è‹¥gcd(a, p) != 1ï¼Œä»¤d=gcd(a, p)ï¼Œè‹¥dä¸èƒ½æ•´é™¤bï¼Œåˆ™æ— è§£ï¼Œç®—æ³•ç»“æŸï¼Œå¦åˆ™ç»§ç»­</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä¾‹å¦‚å½“x=1ï¼Œa=4ï¼Œp=8ï¼Œb=3æ—¶ï¼Œä»£å…¥å…¬å¼æœ‰4 mod 8å’Œ3 mod 8ï¼Œæ­¤æ—¶d = gcd(a, p) = 4ï¼Œ</span><br><span class="line">è¯´æ˜aä¸pæœ‰å› å­ä¸º4ï¼Œä½†æ˜¯dä¸èƒ½æ•´é™¤bï¼Œè¯´æ˜bä¸­æ²¡æœ‰å…±åŒå› å­ï¼ŒåŒæ ·modåŒä¸€ä¸ªæ•°ï¼Œæ²¡æœ‰å…±åŒå› å­ï¼Œé‚£ä¹ˆè¯´æ˜æ–¹ç¨‹æ— è§£</span><br></pre></td></tr></table></figure></li><li><p>æŠŠä¸€ä¸ªaæå–å‡ºæ¥ï¼Œ$a^{x} \equiv b(\bmod p)$å˜æˆ$a*a^{x-1} \equiv b(\bmod p)$</p><p>åŒæ—¶é™¤ä»¥då¾—$a^{x-1} * \frac{a}{d} \equiv \frac{b}{d}\left(\bmod \frac{p}{d}\right)$</p></li><li><p>æŒç»­ç¬¬ä¸‰æ­¥é™¤æ³•ï¼Œç›´åˆ°$\operatorname{gcd}\left(\mathrm{a}, \frac{p}{\prod<em>{i-1}^{k} d</em>{i}}\right)=1$</p><p>æ­¤æ—¶æœ‰$a^{x-k} * \frac{a^{k}}{\prod<em>{i-1}^{k} d</em>{i}} \equiv \frac{b}{\prod<em>{i-1}^{k} d</em>{i}}\left(\bmod \frac{p}{\prod<em>{i-1}^{k} d</em>{i}}\right)$</p></li><li><p>æšä¸¾ 0&lt;x&lt;kï¼Œè‹¥æœ‰è§£ï¼Œè¾“å‡ºxï¼Œç®—æ³•ç»“æŸ</p></li><li><p>å¯¹äºx&gt;=k</p><p>$a=a^{x-k}$, $b=\frac{b}{\prod<em>{i-1}^{k} d</em>{i}}$ , $p= \frac{p}{\prod<em>{i-1}^{k} d</em>{i}}$</p><p>Aï¼ŒP äº’ç´ </p><p>ç›´æ¥BSGSæ±‚$\frac{a^{k}}{\prod<em>{i-1}^{k} d</em>{i}}*a^{x} \equiv b ( \  mod\ p)$ï¼Œæ‰€å¾—ç»“æœ+kå³å¯</p></li></ol><h1 id="æ¨¡æ¿é¢˜http-poj-org-problem-id-3243"><a href="#æ¨¡æ¿é¢˜http-poj-org-problem-id-3243" class="headerlink" title="æ¨¡æ¿é¢˜http://poj.org/problem?id=3243"></a>æ¨¡æ¿é¢˜<a href="http://poj.org/problem?id=3243">http://poj.org/problem?id=3243</a></h1><p><img src="/2019/04/19/EXBSGS%E7%AE%97%E6%B3%95/timu.png" alt></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">hashç‰ˆï¼Œçœæ—¶é—´è€—ç©ºé—´</span></span><br><span class="line"><span class="comment">2208K63MS</span></span><br><span class="line"><span class="comment">2019-04-19 15:36:08</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="keyword">const</span> LL N = <span class="number">40000</span>, Max = (<span class="number">1</span> &lt;&lt; <span class="number">16</span>) - <span class="number">1</span>;</span><br><span class="line"><span class="keyword">bool</span> bk;</span><br><span class="line">LL X, Z, K, len;</span><br><span class="line"><span class="keyword">bool</span> vis[<span class="number">70000</span>];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line">LL d, id, next;</span><br><span class="line">&#125;Hash[<span class="number">2</span> * Max];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">exgcd</span><span class="params">(LL a, LL b, LL &amp;x, LL &amp;y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (b == <span class="number">0</span>) &#123; x = <span class="number">1</span>, y = <span class="number">0</span>; <span class="keyword">return</span> a; &#125;</span><br><span class="line">LL tx, ty;</span><br><span class="line">LL d = <span class="built_in">exgcd</span>(b, a%b, tx, ty);</span><br><span class="line">x = ty; y = tx - (a / b)*ty;</span><br><span class="line"><span class="keyword">return</span> d;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ins</span><span class="params">(LL d, LL id)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">LL t = d&amp;Max;</span><br><span class="line"><span class="keyword">if</span> (!vis[t]) &#123;</span><br><span class="line">vis[t] = <span class="number">1</span>;</span><br><span class="line">Hash[t].d = d, Hash[t].id = id, Hash[t].next = <span class="number">-1</span>;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (; Hash[t].next != <span class="number">-1</span>; t = Hash[t].next)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (Hash[t].d == d) <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">Hash[t].next = ++len;</span><br><span class="line">Hash[len].d = d; Hash[len].id = id; Hash[len].next = <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">find</span><span class="params">(LL d)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">LL t = d&amp;Max;</span><br><span class="line"><span class="keyword">if</span> (!vis[t]) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span> (; t != <span class="number">-1</span>; t = Hash[t].next)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (Hash[t].d == d) <span class="keyword">return</span> Hash[t].id;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">BSGS</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">LL t, g, x, y, pm, a, b, c, m, k, sum, am;</span><br><span class="line">a = X; b = K; c = Z; k = <span class="number">1</span>; sum = <span class="number">0</span>; t = <span class="number">1</span> % c;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">100</span>; i++)&#123;</span><br><span class="line"><span class="keyword">if</span> (t == b) <span class="keyword">return</span> i;</span><br><span class="line">t = t*a%c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span> ((g = <span class="built_in">exgcd</span>(X, c, x, y)) != <span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">k = (k*X / g) % c;</span><br><span class="line">c /= g;</span><br><span class="line"><span class="keyword">if</span> (b%g) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">b /= g;</span><br><span class="line">sum++;</span><br><span class="line">&#125;</span><br><span class="line">m = (LL)(<span class="built_in">ceil</span>((<span class="keyword">double</span>)<span class="built_in">sqrt</span>((<span class="keyword">double</span>)c)));</span><br><span class="line"><span class="built_in">ins</span>(k, <span class="number">0</span>);</span><br><span class="line">t = k; pm = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">&#123;</span><br><span class="line">t = t*a%c, pm = pm*a%c;</span><br><span class="line"><span class="built_in">ins</span>(t, i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">exgcd</span>(pm, c, x, y);</span><br><span class="line">am = x%c + c;</span><br><span class="line">t = b;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= m; i++)</span><br><span class="line">&#123;</span><br><span class="line">x = <span class="built_in">find</span>(t);</span><br><span class="line"><span class="keyword">if</span> (x != <span class="number">-1</span>) <span class="keyword">return</span> i*m + x + sum;</span><br><span class="line">t = t*am%c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld%lld&quot;</span>, &amp;X, &amp;Z, &amp;K) != EOF &amp;&amp; Z &amp;&amp; X &amp;&amp; K)&#123;</span><br><span class="line">K %= Z; len = Max;</span><br><span class="line"><span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">LL ans = <span class="built_in">BSGS</span>();</span><br><span class="line"><span class="keyword">if</span> (ans != <span class="number">-1</span>) <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, ans);</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;No Solution\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">äºŒåˆ†ç‰ˆï¼Œè€—æ—¶é—´çœç©ºé—´</span></span><br><span class="line"><span class="comment">1108K313MS</span></span><br><span class="line"><span class="comment">2019-04-19 15:41:10</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">40000</span>;</span><br><span class="line"><span class="keyword">bool</span> bk;</span><br><span class="line">LL X, Z, K, a, b, c, m, k, sum, am, bl;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line">LL d, id;</span><br><span class="line">&#125;bit[N], p[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node x, node y)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (x.d != y.d) <span class="keyword">return</span> x.d&lt;y.d;</span><br><span class="line"><span class="keyword">return</span> x.id&lt;y.id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">gcd</span><span class="params">(LL u, LL v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (v == <span class="number">0</span>) <span class="keyword">return</span> u;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">gcd</span>(v, u%v);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">find</span><span class="params">(LL x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> l = <span class="number">0</span>, r = bl;</span><br><span class="line"><span class="keyword">while</span> (l &lt;= r)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span> (bit[mid].d == x) <span class="keyword">return</span> bit[mid].id;</span><br><span class="line"><span class="keyword">if</span> (bit[mid].d&gt;x) r = mid - <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span> (bit[mid].d&lt;x) l = mid + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">exgcd</span><span class="params">(LL u, LL v, LL &amp;x, LL &amp;y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (v == <span class="number">0</span>) &#123; x = <span class="number">1</span>, y = <span class="number">0</span>; <span class="keyword">return</span>; &#125;</span><br><span class="line">LL tx, ty;</span><br><span class="line"><span class="built_in">exgcd</span>(v, u%v, tx, ty);</span><br><span class="line">x = ty; y = tx - (u / v)*ty;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">BSGS</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">LL t, g, x, y, pm;</span><br><span class="line">a = X; b = K; c = Z; k = <span class="number">1</span>; sum = <span class="number">0</span>; bk = <span class="number">1</span>; bl = <span class="number">0</span>; t = <span class="number">1</span> % c;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">100</span>; i++)&#123;<span class="comment">//é¿å…açš„è´Ÿæ•°æ¬¡æ–¹</span></span><br><span class="line"><span class="keyword">if</span> (t == b) <span class="keyword">return</span> i;</span><br><span class="line">t = t*a%c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span> ((g = <span class="built_in">gcd</span>(X, c)) != <span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">k = (k*X / g) % c;<span class="comment">//kè®°å¾—è¦modï¼Œå¦åˆ™æº¢å‡º</span></span><br><span class="line">c /= g;</span><br><span class="line"><span class="keyword">if</span> (b%g) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">b /= g;</span><br><span class="line">sum++;</span><br><span class="line">&#125;</span><br><span class="line">m = (LL)(<span class="built_in">ceil</span>((<span class="keyword">double</span>)<span class="built_in">sqrt</span>((<span class="keyword">double</span>)c)));<span class="comment">//è¦çº¦åˆ†ä¹‹åå†æ±‚m</span></span><br><span class="line">p[<span class="number">0</span>].d = k%c;</span><br><span class="line">p[<span class="number">0</span>].id = <span class="number">0</span>;</span><br><span class="line">pm = <span class="number">1</span>;<span class="comment">//pmæ˜¯ä¸ç”¨*kçš„</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">p[i].d = p[i - <span class="number">1</span>].d*a%c, pm = pm*a%c, p[i].id = i;</span><br><span class="line"><span class="built_in">sort</span>(p, p + <span class="number">1</span> + m, cmp);</span><br><span class="line">bit[<span class="number">0</span>] = p[<span class="number">0</span>]; bl = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (p[i].d != p[i - <span class="number">1</span>].d) bit[++bl] = p[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">exgcd</span>(pm, c, x, y);</span><br><span class="line">am = (x%c + c);<span class="comment">//é¿å…am=0</span></span><br><span class="line"></span><br><span class="line">t = b;</span><br><span class="line">x = <span class="built_in">find</span>(b);</span><br><span class="line"><span class="keyword">if</span> (x != <span class="number">-1</span>) <span class="keyword">return</span> x;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= bl; i++)</span><br><span class="line">&#123;</span><br><span class="line">t *= am; t %= c;</span><br><span class="line">x = <span class="built_in">find</span>(t);</span><br><span class="line"><span class="keyword">if</span> (x != <span class="number">-1</span>)</span><br><span class="line"><span class="keyword">return</span> i*m + x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">while</span> (~<span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld%lld&quot;</span>, &amp;X, &amp;Z, &amp;K) &amp;&amp; X &amp;&amp; Z &amp;&amp; K)&#123;</span><br><span class="line"><span class="keyword">if</span> (!X &amp;&amp; !Z &amp;&amp; !K) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">K %= Z;</span><br><span class="line">LL ans = <span class="built_in">BSGS</span>();</span><br><span class="line"><span class="keyword">if</span> (ans != <span class="number">-1</span>) <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, ans + sum);</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;No Solution\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°å­¦çŸ¥è¯† </tag>
            
            <tag> EXBSGS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BSGSç®—æ³•</title>
      <link href="/2019/04/18/BSGS%E7%AE%97%E6%B3%95/"/>
      <url>/2019/04/18/BSGS%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>BSGS</p><span id="more"></span><h1 id="BSGS-baby-step-gaint-step"><a href="#BSGS-baby-step-gaint-step" class="headerlink" title="BSGS(baby-step gaint-step)"></a>BSGS(baby-step gaint-step)</h1><p>è¯¥ç®—æ³•æ˜¯æŒ‡ç±»ä¼¼äº$a^{x} \equiv b(\bmod p$)çš„æ–¹ç¨‹ï¼Œå·²çŸ¥aï¼Œbï¼Œpï¼Œæ±‚xçš„ç®—æ³•</p><p><strong>åŸå§‹çš„BSGSåªèƒ½è§£å†³pä¸ºè´¨æ•°çš„æƒ…å†µ</strong></p><p>ç”±è´¹é©¬å°å®šç†$a^{p-1} \equiv 1(\bmod p)$ï¼ˆaï¼Œpäº’è´¨ï¼‰</p><p>åŒæ—¶æ‹†å¼€ä¸Šé¢ä¸¤å¼å¾—</p><p>$a^{p-1} (\bmod p)= 1(\bmod p)$</p><p>$a^{x} (\bmod p)= b(\bmod p)$</p><p>bæœ€å°å–å€¼1ï¼Œè€Œå½“$x=p-1$æ—¶æ­£å¥½ä¸º$b=1$ï¼Œæ‰€ä»¥å½“bå¢å¤§æ—¶ï¼Œxé¡»å°äºp-1ï¼Œæ‰èƒ½è®©bå¤§äº1ï¼Œç»¼åˆå¾—</p><p><strong>è§£xæ»¡è¶³$0 \leq x&lt;p$</strong></p><h2 id="æ±‚è§£è¿‡ç¨‹"><a href="#æ±‚è§£è¿‡ç¨‹" class="headerlink" title="æ±‚è§£è¿‡ç¨‹"></a>æ±‚è§£è¿‡ç¨‹</h2><p>è®¾$m=\lceil\sqrt{p}\rceil$ï¼ˆæ ¹å·på‘ä¸Šå–æ•´ï¼‰ï¼Œ$x=Am-B(0 \leq A,B &lt; m)$</p><p>åˆ™ç”±$a^{x} \equiv b(\bmod p)$æœ‰$a^{Am- B} \equiv b(\bmod p)$</p><p>å³$\frac{a^{Am}}{a^{B}}\equiv b(\bmod p)$</p><p>å³$a^{Am }  \equiv b a^{B}(\bmod p)$</p><p>æˆ‘ä»¬å·²çŸ¥çš„æ˜¯aï¼Œbï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å…ˆç®—å‡ºç­‰å¼å³è¾¹çš„$ba^{B}$çš„æ‰€æœ‰å–å€¼ï¼Œç”¨hash/mapå­˜ä¸‹æ¥ï¼Œç„¶åé€ä¸€è®¡ç®—$a^{Am}$ï¼Œæšä¸¾Aï¼Œå¯»æ‰¾æ˜¯å¦æœ‰ä¸ä¹‹ç›¸ç­‰çš„$ba^{B}$ï¼Œä»è€Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°æ‰€æœ‰çš„$x=A\lceil\sqrt{p}\rceil- B$</p><p>æ³¨æ„åˆ°$A,B &lt;\lceil\sqrt{p}\rceil$ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸º$O(\sqrt{p})$ï¼Œç”¨ map çš„è¯ä¼šå¤šä¸€ä¸ª log</p><h2 id="æ¨¡æ¿é¢˜â€”http-poj-org-problem-id-2417"><a href="#æ¨¡æ¿é¢˜â€”http-poj-org-problem-id-2417" class="headerlink" title="æ¨¡æ¿é¢˜â€”http://poj.org/problem?id=2417"></a>æ¨¡æ¿é¢˜â€”<a href="http://poj.org/problem?id=2417">http://poj.org/problem?id=2417</a></h2><p><img src="/2019/04/18/BSGS%E7%AE%97%E6%B3%95/timu.png" alt></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">892K32MS</span></span><br><span class="line"><span class="comment">2019-04-19 00:13:27</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MOD 76543</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> hs[MOD], head[MOD], next[MOD], id[MOD], top;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> k = x % MOD;</span><br><span class="line">    hs[top] = x;</span><br><span class="line">    id[top] = y;</span><br><span class="line">    next[top] = head[k];</span><br><span class="line">    head[k] = top++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> k = x % MOD;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = head[k]; i != <span class="number">-1</span>; i = next[i])</span><br><span class="line">        <span class="keyword">if</span> (hs[i] == x)</span><br><span class="line">            <span class="keyword">return</span> id[i];</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">BSGS</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(head, <span class="number">-1</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(head));</span><br><span class="line">    top = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (b == <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> m = <span class="built_in">sqrt</span>(n * <span class="number">1.0</span>), j;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> x = <span class="number">1</span>, p = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++, p = p * a % n)</span><br><span class="line">        <span class="built_in">insert</span>(p * b % n, i);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">long</span> <span class="keyword">long</span> i = m; ; i += m)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> ((j = <span class="built_in">find</span>(x = x * p % n)) != <span class="number">-1</span>)</span><br><span class="line">            <span class="keyword">return</span> i - j;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; n)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a, b, n;</span><br><span class="line">    <span class="keyword">while</span> (~<span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;n, &amp;a, &amp;b))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="built_in">BSGS</span>(a, b, n);</span><br><span class="line">        <span class="keyword">if</span> (ans == <span class="number">-1</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;no solution\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°å­¦çŸ¥è¯† </tag>
            
            <tag> BSGS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè™šæ‹Ÿæœºç¬”è®°-javaè™šæ‹Ÿæœºç±»åŠ è½½</title>
      <link href="/2019/04/17/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%B1%BB%E5%8A%A0%E8%BD%BD/"/>
      <url>/2019/04/17/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%B1%BB%E5%8A%A0%E8%BD%BD/</url>
      
        <content type="html"><![CDATA[<p>å­¦ä¹ è‡ªå‘¨å¿—æ˜è€å¸ˆçš„ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ç¬¬äºŒç‰ˆ</p><span id="more"></span><p>åŒæ—¶å‚è€ƒï¼š<a href="http://www.cnblogs.com/plxx/p/4528688.html">http://www.cnblogs.com/plxx/p/4528688.html</a></p><h1 id="ç±»çš„åŠ è½½"><a href="#ç±»çš„åŠ è½½" class="headerlink" title="ç±»çš„åŠ è½½"></a>ç±»çš„åŠ è½½</h1><p><strong>è™šæ‹ŸæœºæŠŠæè¿°ç±»çš„æ•°æ®ä»Classæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œæ ¡éªŒ,è½¬æ¢è§£æå’Œåˆå§‹åŒ–ï¼Œæœ€ç»ˆå½¢æˆå¯ä»¥è¢«è™šæ‹Ÿæœºç›´æ¥ä½¿ç”¨çš„Javaç±»å‹ï¼Œè¿™å°±æ˜¯è™šæ‹Ÿæœºçš„ç±»åŠ è½½æœºåˆ¶</strong></p><p>ä¸é‚£äº›åœ¨ç¼–è¯‘æ—¶éœ€è¦è¿›è¡Œè¿æ¥å·¥ä½œçš„è¯­è¨€ä¸åŒï¼Œåœ¨Javaè¯­è¨€é‡Œé¢ï¼Œç±»å‹çš„åŠ è½½ã€è¿æ¥å’Œåˆå§‹åŒ–è¿‡ç¨‹éƒ½æ˜¯åœ¨<strong>ç¨‹åºè¿è¡ŒæœŸé—´å®Œæˆ</strong>çš„ï¼Œè¿™ç§ç­–ç•¥è™½ç„¶ä¼šä»¤ç±»åŠ è½½æ—¶ç¨å¾®å¢åŠ ä¸€äº›æ€§èƒ½å¼€é”€ï¼Œä½†æ˜¯<strong>ä¼šä¸ºJavaåº”ç”¨ç¨‹åºæä¾›é«˜åº¦çš„çµæ´»æ€§</strong></p><p>Javaé‡Œå¤©ç”Ÿå¯ä»¥æ‰©å±•çš„è¯­è¨€ç‰¹æ€§å°±æ˜¯ä¾èµ–<strong>è¿è¡ŒæœŸåŠ¨æ€åŠ è½½å’ŒåŠ¨æ€è¿æ¥</strong>è¿™ä¸ªç‰¹ç‚¹å®ç°çš„ï¼Œæ¯”å¦‚</p><ul><li>ç¼–å†™ä¸€ä¸ªé¢å‘æ¥å£çš„åº”ç”¨ç¨‹åºï¼Œå¯ä»¥ç­‰åˆ°è¿è¡Œæ—¶å†æŒ‡å®šå…¶å®é™…çš„å®ç°ç±»</li><li>ç”¨æˆ·å¯ä»¥é€šè¿‡Javaé¢„å®šä¹‰çš„å’Œè‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œè®© ä¸€ä¸ªæœ¬åœ°çš„åº”ç”¨ç¨‹åºå¯ä»¥åœ¨è¿è¡Œæ—¶ä»ç½‘ç»œæˆ–å…¶ä»–åœ°æ–¹åŠ è½½ä¸€ä¸ªäºŒè¿›åˆ¶æµä½œä¸ºç¨‹åºä»£ç çš„ä¸€éƒ¨ åˆ†ï¼Œè¿™ç§ç»„è£…åº”ç”¨ç¨‹åºçš„æ–¹å¼ç›®å‰å·²å¹¿æ³›åº”ç”¨äºJavaç¨‹åºä¹‹ä¸­ã€‚ä»æœ€åŸºç¡€çš„<code>Applet</code>ã€<code>JSP</code>åˆ°ç›¸ å¯¹å¤æ‚çš„<code>OSGi</code>æŠ€æœ¯</li></ul><blockquote><p>OSGi(Open Service Gateway  Initiative)æŠ€æœ¯æ˜¯JavaåŠ¨æ€åŒ–æ¨¡å—åŒ–ç³»ç»Ÿçš„ä¸€ç³»åˆ—è§„èŒƒã€‚OSGiä¸€æ–¹é¢æŒ‡ç»´æŠ¤OSGiè§„èŒƒçš„OSGIå®˜æ–¹è”ç›Ÿï¼Œå¦ä¸€æ–¹é¢æŒ‡çš„æ˜¯è¯¥ç»„ç»‡ç»´æŠ¤çš„åŸºäºJavaè¯­è¨€çš„æœåŠ¡ï¼ˆä¸šåŠ¡ï¼‰è§„èŒƒã€‚ç®€å•æ¥è¯´ï¼ŒOSGiå¯ä»¥è®¤ä¸ºæ˜¯Javaå¹³å°çš„æ¨¡å—å±‚ã€‚</p><p>OSGiæœåŠ¡å¹³å°å‘Javaæä¾›æœåŠ¡ï¼Œè¿™äº›æœåŠ¡ä½¿Javaæˆä¸ºè½¯ä»¶é›†æˆå’Œè½¯ä»¶å¼€å‘çš„é¦–é€‰ç¯å¢ƒã€‚Javaæä¾›åœ¨å¤šä¸ªå¹³å°æ”¯æŒäº§å“çš„å¯ç§»æ¤æ€§ã€‚OSGiæŠ€æœ¯æä¾›å…è®¸åº”ç”¨ç¨‹åºä½¿ç”¨ç²¾ç‚¼ã€å¯é‡ç”¨å’Œå¯åä½œçš„ç»„ä»¶æ„å»ºçš„æ ‡å‡†åŒ–åŸè¯­ï¼Œè¿™äº›ç»„ä»¶èƒ½å¤Ÿç»„è£…è¿›ä¸€ä¸ªåº”ç”¨å’Œéƒ¨ç½²ä¸­ã€‚</p></blockquote><h1 id="ç±»åŠ è½½çš„æ—¶æœº"><a href="#ç±»åŠ è½½çš„æ—¶æœº" class="headerlink" title="ç±»åŠ è½½çš„æ—¶æœº"></a>ç±»åŠ è½½çš„æ—¶æœº</h1><p>ç±»ä»è¢«åŠ è½½åˆ°è™šæ‹Ÿæœºå†…å­˜ä¸­å¼€å§‹ï¼Œç›´åˆ°å¸è½½å‡ºå†…å­˜ä¸ºæ­¢ï¼Œå®ƒçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬äº†ï¼š <strong>åŠ è½½ã€éªŒè¯ã€å‡†å¤‡ã€è§£æã€åˆå§‹åŒ–ã€ä½¿ç”¨å’Œå¸è½½</strong> è¿™7ä¸ªé˜¶æ®µã€‚å…¶ä¸­ï¼Œ <strong>éªŒè¯ã€å‡†å¤‡å’Œè§£æè¿™ä¸‰ä¸ªéƒ¨åˆ†ç»Ÿç§°ä¸ºè¿æ¥ï¼ˆlinkingï¼‰</strong> ã€‚</p><p><img src="/2019/04/17/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%B1%BB%E5%8A%A0%E8%BD%BD/jiazai.jpg" alt></p><h1 id="ç±»è¿›è¡Œåˆå§‹åŒ–çš„æƒ…å†µ"><a href="#ç±»è¿›è¡Œåˆå§‹åŒ–çš„æƒ…å†µ" class="headerlink" title="ç±»è¿›è¡Œåˆå§‹åŒ–çš„æƒ…å†µ"></a>ç±»è¿›è¡Œåˆå§‹åŒ–çš„æƒ…å†µ</h1><p>ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦å¼€å§‹ç±»åŠ è½½è¿‡ç¨‹çš„ç¬¬ä¸€ä¸ªé˜¶æ®µ:â€åŠ è½½â€ã€‚è™šæ‹Ÿæœºè§„èŒƒä¸­å¹¶æ²¡å¼ºè¡Œçº¦æŸï¼Œè¿™ç‚¹å¯ä»¥äº¤ç»™è™šæ‹Ÿæœºçš„çš„å…·ä½“å®ç°è‡ªç”±æŠŠæ¡ï¼Œä½†æ˜¯å¯¹äº<strong>åˆå§‹åŒ–é˜¶æ®µè™šæ‹Ÿæœºè§„èŒƒæ˜¯ä¸¥æ ¼è§„å®šäº†æœ‰ä¸”åªæœ‰5ç§æƒ…å†µï¼Œå¦‚æœç±»æœªåˆå§‹åŒ–ä¼šå¯¹ç±»è¿›è¡Œåˆå§‹åŒ–</strong>ã€‚</p><p><strong>åˆå§‹åŒ–ä¸ç­‰åŒäºèµ‹å€¼ï¼Œæ‰€ä»¥æ˜¯å…ˆè¿›è¡Œåˆå§‹åŒ–ç„¶åå†è¿›è¡Œèµ‹å€¼çš„</strong></p><ol><li><p>ä½¿ç”¨newå…³é”®å­—<strong>å®ä¾‹åŒ–å¯¹è±¡çš„</strong>æ—¶ã€<strong>è¯»å–æˆ–è®¾ç½®ä¸€ä¸ªç±»çš„é™æ€å­—æ®µ</strong>ï¼ˆè¢«finalä¿®é¥°ã€å·²åœ¨ç¼–è¯‘æœŸæŠŠç»“æœæ”¾å…¥å¸¸ é‡æ± çš„é™æ€å­—æ®µé™¤å¤–ï¼‰çš„æ—¶å€™ï¼Œä»¥åŠ<strong>è°ƒç”¨ä¸€ä¸ªç±»çš„é™æ€æ–¹æ³•</strong>çš„æ—¶å€™ã€‚</p><p><em>å› ä¸ºç¼–è¯‘å™¨æŠŠä»–ä»¬å½“ä½œå€¼(value)è€Œä¸æ˜¯åŸŸ(field)æ¥å¯¹å¾…ã€‚å¦‚æœä½ çš„ä»£ç ä¸­ç”¨åˆ°äº†å¸¸å˜ é‡(constant<br>variable)ï¼Œç¼–è¯‘å™¨å¹¶ä¸ä¼šç”Ÿæˆå­—èŠ‚ç æ¥ä»å¯¹è±¡ä¸­è½½å…¥åŸŸçš„å€¼ï¼Œè€Œæ˜¯ç›´æ¥æŠŠè¿™ä¸ªå€¼æ’å…¥åˆ°å­—èŠ‚ç ä¸­ã€‚è¿™æ˜¯ä¸€ç§å¾ˆæœ‰ç”¨çš„ä¼˜åŒ–ï¼Œä½†æ˜¯å¦‚æœä½ éœ€è¦æ”¹å˜ finalåŸŸçš„å€¼é‚£ä¹ˆæ¯ä¸€å—ç”¨åˆ°é‚£ä¸ªåŸŸçš„ä»£ç éƒ½éœ€è¦é‡æ–°ç¼–è¯‘ã€‚</em></p></li><li><p><strong>åå°„</strong> å¦‚( <code>Class.forName(&quot;com.xxx.Test&quot;)</code> )</p></li><li>å½“åˆå§‹åŒ–ä¸€ä¸ªç±»æ—¶ï¼Œå‘ç°<strong>å…¶çˆ¶ç±»è¿˜æœªåˆå§‹åŒ–ï¼Œåˆ™å…ˆå‡ºè§¦å‘çˆ¶ç±»çš„åˆå§‹åŒ–</strong></li><li>è™šæ‹Ÿæœºå¯åŠ¨æ—¶ï¼Œ<strong>ç”¨æˆ·éœ€è¦æŒ‡å®šä¸€ä¸ªè¦æ‰§è¡Œçš„ä¸»ç±»ï¼ˆåŒ…å«main()åŠæ³•çš„é‚£ä¸ªç±»ï¼‰ï¼Œè™šæ‹Ÿæœºä¼šå…ˆåˆå§‹åŒ–è¿™ä¸ªä¸»ç±»</strong></li><li>JDK1.7çš„åŠ¨æ€è¯­è¨€æ”¯æŒï¼Œå¦‚æœä¸€ä¸ª<code>java.lang.invoke.MethodHandle</code>å®ä¾‹æœ€åè§£æç»“æœ<code>REF_getStatic</code>,<code>REF_putStatic</code>,<code>REF_invokeStatic</code> çš„æ–¹æ³•å¥æŸ„ï¼Œå¹¶ä¸”è¿™ä¸ªæ–¹æ³•å¥æŸ„å¯¹åº”çš„ç±»æ²¡æœ‰è¿›è¡Œåˆå§‹åŒ–ï¼Œåˆ™éœ€è¦å°†å…¶åˆå§‹åŒ–ã€‚</li></ol><p>è¿™äº”ç§åœºæ™¯ä¸­çš„è¡Œä¸ºå¯¹ä¸€ä¸ªç±»è¿›è¡Œ<strong>ä¸»åŠ¨å¼•ç”¨</strong>ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œæ‰€æœ‰å¼•ç”¨ç±»çš„æ–¹å¼éƒ½ä¸ä¼šè§¦å‘åˆå§‹åŒ–ï¼Œç§°ä¸º<strong>è¢«åŠ¨å¼•ç”¨</strong></p><p>æ‰€æœ‰javaè™šæ‹Ÿæœºå®ç°å¿…é¡»åœ¨æ¯ä¸ªç±»æˆ–æ¥å£è¢«javaç¨‹åº<strong>â€œé¦–æ¬¡ä½¿ç”¨â€</strong>æ—¶æ‰åˆå§‹åŒ–ä»–ä»¬</p><h2 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h2><p><strong>1. é€šè¿‡å­ç±»å¼•ç”¨çˆ¶ç±»çš„é™æ€å­—æ®µï¼Œä¸ä¼šå¯¼è‡´å­ç±»åˆå§‹åŒ–</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">é€šè¿‡å­ç±»å¼•ç”¨çˆ¶ç±»çš„é™æ€å­—æ®µï¼Œä¸ä¼šå¯¼è‡´å­ç±»åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SuperCalss</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;super class init&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> value = <span class="number">23</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SubClass</span> <span class="keyword">extends</span> <span class="title">SuperCalss</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;subclass init&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(SubClass.value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//outputï¼š super class init</span></span><br></pre></td></tr></table></figure><p><strong>å¯¹äºé™æ€å­—æ®µï¼Œåªæœ‰ç›´æ¥å®šä¹‰è¿™ä¸ªå­—æ®µçš„ç±»æ‰ä¼šåˆå§‹åŒ–</strong>ï¼Œå› æ­¤é€šè¿‡å…¶å­ç±»æ¥å¼•ç”¨çˆ¶ç±»ä¸­å®šä¹‰çš„é™æ€å­—æ®µï¼Œåªä¼šè§¦å‘çˆ¶ç±»çš„åˆå§‹åŒ–è€Œä¸ä¼šè§¦å‘å­ç±»çš„åˆå§‹åŒ–ã€‚<em>è‡³äºæ˜¯å¦è§¦å‘å­ç±»ä¸­å®šä¹‰<strong>åŠ è½½å’ŒéªŒè¯</strong>ï¼Œåœ¨è§„èŒƒä¸­æœªæ˜ç¡®è§„å®šï¼Œå–å†³äºè™šæ‹Ÿæœºçš„å®ç°ï¼Œ<code>Sun HotSpot</code>è™šæ‹Ÿæœºä¼šå¯¼è‡´å­ç±»çš„åŠ è½½</em></p><p><strong>2. ä½¿ç”¨æ•°ç»„æ¥å®šä¹‰å¼•ç”¨ç±»ï¼Œä¸ä¼šè§¦å‘è¯¥ç±»çš„åˆå§‹åŒ–</strong></p>   <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SuperCalss[]subClass = <span class="keyword">new</span> SuperCalss[<span class="number">10</span>]; </span><br><span class="line"><span class="comment">//æ‰§è¡Œä¹‹åä¸ä¼šæœ‰ä»»ä½•çš„è¾“å‡ºã€‚</span></span><br></pre></td></tr></table></figure><p><strong>3. å¸¸é‡åœ¨ç¼–è¯‘æ¥é˜¶æ®µå°±ä¼šå­˜å…¥è°ƒç”¨ç±»çš„å¸¸é‡æ± ä¸­ï¼Œæœ¬è´¨ä¸Šæ²¡æœ‰ç›´æ¥å¼•ç”¨å®šä¹‰å¸¸é‡çš„ç±»ï¼Œå› æ­¤ä¸ä¼šè§¦å‘è¢«å¼•ç”¨çš„ç±»çš„åˆå§‹åŒ–</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Test init!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String s = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        System.out.println(Test.s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ‰§è¡Œä¹‹åä¸ä¼šæœ‰ä»»ä½•çš„è¾“å‡ºã€‚</span></span><br></pre></td></tr></table></figure><h1 id="æ¥å£çš„åŠ è½½"><a href="#æ¥å£çš„åŠ è½½" class="headerlink" title="æ¥å£çš„åŠ è½½"></a>æ¥å£çš„åŠ è½½</h1><p>æ¥å£çš„åŠ è½½è¿‡ç¨‹ä¸ç±»åŠ è½½è¿‡ç¨‹ç¨æœ‰ä¸€äº›ä¸åŒï¼Œé’ˆå¯¹æ¥å£éœ€è¦åšä¸€äº›ç‰¹æ®Šè¯´æ˜ï¼šæ¥å£ä¹Ÿæœ‰åˆå§‹åŒ–è¿‡ç¨‹ï¼Œè¿™ç‚¹ä¸ç±»æ˜¯ä¸€è‡´çš„ï¼Œä¸Šé¢çš„ä»£ç éƒ½æ˜¯ç”¨é™æ€è¯­å¥å—â€œstatic{}â€æ¥è¾“å‡ºåˆå§‹åŒ–ä¿¡æ¯ çš„ï¼Œè€Œæ¥å£ä¸­ä¸èƒ½ä½¿ç”¨â€œstatic{}â€è¯­å¥å—ï¼Œä½†ç¼–è¯‘å™¨ä»ç„¶ä¼šä¸ºæ¥å£ç”Ÿæˆâ€œ<code>&lt;clinit&gt;()â€</code>ç±»æ„é€  å™¨ï¼Œ<strong>ç”¨äºåˆå§‹åŒ–æ¥å£ä¸­æ‰€å®šä¹‰çš„æˆå‘˜å˜é‡</strong>ã€‚æ¥å£ä¸ç±»çœŸæ­£æœ‰æ‰€åŒºåˆ«çš„æ˜¯å‰é¢è®²è¿°çš„5ç§â€œæœ‰ä¸”ä»…æœ‰â€éœ€è¦å¼€å§‹åˆå§‹åŒ–åœºæ™¯ä¸­çš„ç¬¬3ç§ï¼šå½“ä¸€ä¸ªç±»åœ¨åˆå§‹åŒ–æ—¶ï¼Œè¦æ±‚å…¶çˆ¶ç±»å…¨éƒ¨éƒ½å·²ç»åˆå§‹ åŒ–è¿‡äº†ï¼Œä½†æ˜¯ä¸€ä¸ªæ¥å£åœ¨åˆå§‹åŒ–æ—¶ï¼Œ<strong>å¹¶ä¸è¦æ±‚å…¶çˆ¶æ¥å£å…¨éƒ¨éƒ½å®Œæˆäº†åˆå§‹åŒ–</strong>ï¼Œåªæœ‰åœ¨çœŸæ­£ä½¿ç”¨åˆ°çˆ¶æ¥å£çš„æ—¶å€™æ‰ä¼šåˆå§‹åŒ–</p><h1 id="ç±»åŠ è½½ã€è¿æ¥ä¸åˆå§‹åŒ–"><a href="#ç±»åŠ è½½ã€è¿æ¥ä¸åˆå§‹åŒ–" class="headerlink" title="ç±»åŠ è½½ã€è¿æ¥ä¸åˆå§‹åŒ–"></a>ç±»åŠ è½½ã€è¿æ¥ä¸åˆå§‹åŒ–</h1><p>åŠ è½½ï¼šæŸ¥æ‰¾å¹¶åŠ è½½ç±»çš„äºŒè¿›åˆ¶æ•°æ®</p><p>è¿æ¥ï¼š</p><ul><li>éªŒè¯ï¼šç¡®ä¿è¢«åŠ è½½çš„ç±»çš„æ­£ç¡®æ€§</li><li>å‡†å¤‡ï¼šä¸ºç±»çš„<strong>é™æ€å˜é‡</strong>åˆ†é…å†…å­˜ï¼Œå¹¶å°†å…¶åˆå§‹åŒ–ä¸º<strong>é»˜è®¤å€¼</strong></li><li>è§£æï¼šæŠŠç±»ä¸­çš„ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨</li></ul><p><strong>åˆå§‹åŒ–ï¼šä¸ºç±»çš„é™æ€å˜é‡èµ‹äºˆæ­£ç¡®çš„åˆå§‹å€¼</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åœ¨javaä¸­ï¼Œä¸€ä¸ªjavaç±»å°†ä¼šç¼–è¯‘æˆä¸€ä¸ªclassæ–‡ä»¶ã€‚åœ¨ç¼–è¯‘æ—¶ï¼Œjavaç±»å¹¶ä¸çŸ¥é“å¼•ç”¨ç±»çš„å®é™…å†…å­˜åœ°å€ï¼Œå› æ­¤åªèƒ½ä½¿ç”¨ç¬¦å·å¼•ç”¨æ¥ä»£æ›¿ã€‚æ¯”å¦‚org.simple.Peopleç±»å¼•ç”¨org.simple.Toolç±»ï¼Œåœ¨ç¼–è¯‘æ—¶Peopleç±»å¹¶ä¸çŸ¥é“Toolç±»çš„å®é™…å†…å­˜åœ°å€ï¼Œå› æ­¤åªèƒ½ä½¿ç”¨ç¬¦å·org.simple.Tool(å‡è®¾)æ¥è¡¨ç¤ºToolç±»çš„åœ°å€ã€‚è€Œåœ¨ç±»è£…è½½å™¨è£…è½½Peopleç±»æ—¶ï¼Œæ­¤æ—¶å¯ä»¥é€šè¿‡è™šæ‹Ÿæœºè·å–Toolç±» çš„å®é™…å†…å­˜åœ°å€ï¼Œå› æ­¤ä¾¿å¯ä»¥æ—¢å°†ç¬¦å·org.simple.Toolæ›¿æ¢ä¸ºToolç±»çš„å®é™…å†…å­˜åœ°å€ï¼Œå³ç›´æ¥å¼•ç”¨åœ°å€ã€‚</span><br></pre></td></tr></table></figure><h1 id="ç±»çš„åŠ è½½-1"><a href="#ç±»çš„åŠ è½½-1" class="headerlink" title="ç±»çš„åŠ è½½"></a>ç±»çš„åŠ è½½</h1><p>ç±»çš„åŠ è½½æŒ‡çš„æ˜¯å°†ç±»çš„<code>.class</code>æ–‡ä»¶ä¸­çš„äºŒè¿›åˆ¶æ•°æ®è¯»å…¥åˆ°å†…å­˜ä¸­ï¼Œå°†å…¶æ”¾åœ¨è¿è¡Œæ—¶æ•°æ®åŒºçš„æ–¹æ³•åŒºå†…ï¼Œç„¶ååœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ª<code>java.lang.Class</code>å¯¹è±¡ï¼ˆè§„èŒƒå¹¶æœªè¯´æ˜CIasså¯¹è±¡ä½äºå“ªé‡Œï¼ŒHotSpotè™šæ‹Ÿæœºå°†å…¶æ”¾åœ¨äº†æ–¹æ³•åŒºä¸­ï¼‰ç”¨æ¥å°è£…ç±»åœ¨æ–¹æ³•åŒºå†…çš„æ•°æ®ç»“æ„</p><h2 id="ç±»çš„åŠ è½½æ–¹å¼"><a href="#ç±»çš„åŠ è½½æ–¹å¼" class="headerlink" title="ç±»çš„åŠ è½½æ–¹å¼"></a>ç±»çš„åŠ è½½æ–¹å¼</h2><p>åŠ è½½<code>.class</code>æ–‡ä»¶çš„æ–¹å¼</p><ul><li>ä»æœ¬åœ°ç³»ç»Ÿä¸­ç›´æ¥åŠ è½½</li><li>é€šè¿‡ç½‘ç»œä¸‹è½½<code>.class</code>æ–‡ä»¶ï¼Œæœ€å…¸å‹åº”ç”¨æ˜¯<code>Applet</code></li><li>ä»zipï¼Œjarç­‰å½’æ¡£æ–‡ä»¶ä¸­åŠ è½½<code>.class</code>æ–‡ä»¶</li><li>ä»ä¸“æœ‰æ•°æ®åº“ä¸­æå–<code>.class</code>æ–‡ä»¶</li><li>å°†Javaæºæ–‡ä»¶åŠ¨æ€ç¼–ä¸º<code>.class</code>æ–‡ä»¶ï¼Œå…¸å‹åœºæ™¯æ˜¯JSPåº”ç”¨</li></ul><blockquote><p>Appletæ˜¯é‡‡ç”¨Javaç¼–ç¨‹è¯­è¨€ç¼–å†™çš„å°åº”ç”¨ç¨‹åºï¼Œè¯¥ç¨‹åºå¯ä»¥åŒ…å«åœ¨ HTMé¡µä¸­ä¸åœ¨é¡µä¸­åŒ…å«å›¾åƒçš„æ–¹å¼å¤§è‡´ç›¸åŒã€‚</p><p>å«æœ‰Appletçš„ç½‘é¡µçš„HTMLæ–‡ä»¶ä»£ç ä¸­éƒ¨å¸¦æœ‰<code>&lt;applet&gt;</code>å’Œ<code>&lt;/applet&gt;</code>è¿™æ ·ä¸€å¯¹æ ‡è®°ï¼Œå½“æ”¯æŒJavaçš„ç½‘ç»œæµè§ˆå™¨é‡åˆ°è¿™å¯¹æ ‡è®°æ—¶ï¼Œå°±å°†ä¸‹è½½ç›¸åº”çš„å°åº”ç”¨ç¨‹åºä»£ç å¹¶åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šæ‰§è¡Œè¯¥Appletã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jvm </tag>
            
            <tag> ç±»çš„åŠ è½½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU1024-må­æ®µå’Œçš„æœ€å¤§å€¼</title>
      <link href="/2019/04/14/HDU1024-m%E5%AD%90%E6%AE%B5%E5%92%8C%E7%9A%84%E6%9C%80%E5%A4%A7%E5%80%BC/"/>
      <url>/2019/04/14/HDU1024-m%E5%AD%90%E6%AE%B5%E5%92%8C%E7%9A%84%E6%9C%80%E5%A4%A7%E5%80%BC/</url>
      
        <content type="html"><![CDATA[<p>HDU1024-Max Sum Plus Plus</p><span id="more"></span><h1 id="HDU1024"><a href="#HDU1024" class="headerlink" title="HDU1024"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1024">HDU1024</a></h1><p><img src="/2019/04/14/HDU1024-m%E5%AD%90%E6%AE%B5%E5%92%8C%E7%9A%84%E6%9C%80%E5%A4%A7%E5%80%BC/timu.png" alt></p><h1 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h1><h2 id="é¢˜æ„"><a href="#é¢˜æ„" class="headerlink" title="é¢˜æ„"></a>é¢˜æ„</h2><p>åœ¨nä¸ªæ•°ä¸­é€‰å‡ºmç»„æ•°, æ¯ç»„æ•°è¿ç»­ä¸”ä¸èƒ½ç›¸äº¤,ä½¿å¾—è¿™mç»„çš„å’Œæ˜¯æ‰€æœ‰mç»„æ•°ä¸­æœ€å¤§çš„ã€‚</p><p>æ¯ç»„æ•°ä¹Ÿå¯ä»¥å«åšæ¯ä¸€æ®µ</p><p>ä¾‹å¦‚:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2 6 -1 4 -2 3 -2 3</span><br><span class="line">é€‰ä¸¤ç»„æ•°,å½“æˆ‘ä»¬é€‰&#123;4,-2,3&#125;,&#123;3&#125;è¿™ä¸¤ç»„æ•°æ—¶å¯å¾—åˆ°æœ€å¤§çš„å’Œ8</span><br></pre></td></tr></table></figure><h2 id="DP"><a href="#DP" class="headerlink" title="DP"></a>DP</h2><p>å‚è€ƒï¼š</p><p><a href="https://blog.csdn.net/zuzhiang/article/details/78450380">https://blog.csdn.net/zuzhiang/article/details/78450380</a></p><p><strong><code>å®šä¹‰äºŒç»´æ•°ç»„dpï¼Œdp[i][j]ï¼Œè¡¨ç¤ºå‰ j é¡¹æ‰€æ„æˆ i å­æ®µçš„æœ€å¤§å’Œï¼Œä¸”å¿…é¡»åŒ…å«ç€ç¬¬jé¡¹ï¼Œå³ä»¥ç¬¬jé¡¹ç»“å°¾</code></strong></p><p>æ±‚<code>dp[i][j]</code>ï¼Œæœ‰ä¸¤ç§æƒ…å†µ:</p><ul><li><code>dp[i][j] = dp[i][j-1]+a[j]</code>ï¼ŒæŠŠç¬¬jé¡¹èåˆåˆ°ç¬¬ j-1 é¡¹çš„å­æ®µä¸­ï¼Œå­æ®µæ•°æ²¡å˜</li><li><code>dp[i][j] = dp[i-1][t]+a[j]ï¼ˆi-1&lt;= t&lt;jï¼‰</code>,æŠŠç¬¬ j é¡¹ä½œä¸ºå•ç‹¬çš„ä¸€ä¸ªå­æ®µï¼Œç„¶åæ‰¾ä¸€ä¸‹i-1ä¸ªå­æ®µæ—¶ï¼Œæœ€å¤§çš„å’Œï¼Œç„¶ååŠ ä¸Ša[ j ] ï¼Œå­—æ®µæ•°ç”±i-1å˜æˆi</li></ul><p>ç„¶åæ¯”è¾ƒä¸Šé¢ä¸¤ç§æƒ…å†µï¼Œå–æœ€å¤§çš„ã€‚å³</p><p><code>dp[i][j] = max(dp[i][j-1]+a[j], dp[i-1][t]+a[j])</code></p><p><img src="/2019/04/14/HDU1024-m%E5%AD%90%E6%AE%B5%E5%92%8C%E7%9A%84%E6%9C%80%E5%A4%A7%E5%80%BC/1.png" alt="HDU1024-må­æ®µå’Œçš„æœ€å¤§å€¼/1.png"></p><p>å¦‚å›¾ï¼Œè¦æ±‚<code>dp[3][6]</code>ï¼Œåªéœ€æ¯”è¾ƒä»–å·¦è¾¹çš„é‚£ä¸ªï¼Œå’Œä¸Šé¢é‚£ä¸€è¡Œåœˆèµ·æ¥çš„ä¹‹ä¸­æœ€å¤§çš„æ•°ï¼Œå†åŠ ä¸Ša[ j ] å³ä¸º<code>dp[3][6]</code> çš„å€¼ã€‚</p><p><strong>ä¼˜åŒ–</strong></p><ol><li><p>æ¯ç¡®å®šä¸€ä¸ª<code>dp[ i ][ j ]</code>ï¼Œåªéœ€ç”¨åˆ°æœ¬è¡Œå’Œä¸Šä¸€è¡Œï¼Œæ‰€ä»¥ä¸ç”¨å¼€äºŒç»´æ•°ç»„ä¹Ÿå¯ä»¥ï¼Œçœå†…å­˜ã€‚ç±»ä¼¼äº01èƒŒåŒ…ã€‚æ‰€ä»¥å¯ä»¥å¼€ä¸¤ä¸ªä¸€ç»´æ•°ç»„ï¼Œpreå’Œdpï¼Œpreè®°å½•ä¸Šä¸€è¡Œï¼Œdpè®°å½•å½“å‰è¡Œ</p></li><li><p>å¯¹ä¸Šä¸€è¡Œçº¢åœˆä¸­çš„æ•°å­—æ‰¾æœ€å¤§å€¼æ—¶ï¼Œå¯ä»¥åœ¨æ¯æ¬¡è®¡ç®—dpä¹‹å‰ï¼ŒåŒæ—¶è®°å½•ä¸‹jå‰é¢çš„æœ€å¤§å…ƒç´ ã€‚é¿å…ä¸€æ¬¡å¾ªç¯æ¥æŸ¥æ‰¾ã€‚</p></li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">468MS9596K</span></span><br><span class="line"><span class="comment">2019-04-15 18:37:21</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0X3F3F3F3F</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1E6</span>+<span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> dp[MAXN], pre[MAXN], arr[MAXN];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;m, &amp;n) != EOF)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(dp));</span><br><span class="line">        <span class="built_in">memset</span>(pre, <span class="number">0</span> ,<span class="built_in"><span class="keyword">sizeof</span></span>(pre));</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;arr[i]);</span><br><span class="line">        <span class="keyword">int</span> tmp;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            tmp = -INF;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i; j &lt;= n; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                dp[j] = <span class="built_in">max</span>(dp[j<span class="number">-1</span>], pre[j<span class="number">-1</span>])+arr[j];</span><br><span class="line">                pre[j<span class="number">-1</span>] = tmp;</span><br><span class="line">                tmp = <span class="built_in">max</span>(tmp, dp[j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, tmp);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> dp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hdu-1231æœ€å¤§è¿ç»­å­åºåˆ—å’Œ-dp-è®°å½•ä½ç½®</title>
      <link href="/2019/04/14/hdu-1231%E6%9C%80%E5%A4%A7%E8%BF%9E%E7%BB%AD%E5%AD%90%E5%BA%8F%E5%88%97%E5%92%8C-dp-%E8%AE%B0%E5%BD%95%E4%BD%8D%E7%BD%AE/"/>
      <url>/2019/04/14/hdu-1231%E6%9C%80%E5%A4%A7%E8%BF%9E%E7%BB%AD%E5%AD%90%E5%BA%8F%E5%88%97%E5%92%8C-dp-%E8%AE%B0%E5%BD%95%E4%BD%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<p>HDU1231æœ€å¤§è¿ç»­å­åºåˆ—</p><span id="more"></span><h1 id="HDU1231"><a href="#HDU1231" class="headerlink" title="HDU1231"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1231">HDU1231</a></h1><p><img src="/2019/04/14/hdu-1231%E6%9C%80%E5%A4%A7%E8%BF%9E%E7%BB%AD%E5%AD%90%E5%BA%8F%E5%88%97%E5%92%8C-dp-%E8%AE%B0%E5%BD%95%E4%BD%8D%E7%BD%AE/timu.png" alt></p><h1 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h1><p><strong><em>ï¼ˆè½¬ç§»æ–¹ç¨‹å¥½æ±‚ï¼Œä½†æ˜¯æ ½åœ¨äº†æ±‚ä½ç½®ä¸Šé¢ï¼Œåæ¥æ‰æƒ³èµ·æ˜¯åå¾€å‰æ¨ã€‚ï¼‰</em></strong></p><p><strong>è½¬ç§»æ–¹ç¨‹</strong></p><p>dp[i]è¡¨ç¤ºä»¥iç»“å°¾çš„æœ€å¤§è¿ç»­å­åºåˆ—çš„å’Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼šdp[i] = max(dp[i - 1] + num[i],num[i]) </span><br></pre></td></tr></table></figure><p><strong>è®°å½•ä½ç½®</strong></p><p>æ ¹æ®è½¬ç§»æ–¹ç¨‹æ±‚æœ€å¤§å€¼ï¼Œè¿™æ ·å°±èƒ½æ‰¾åˆ°æœ€å¤§è¿ç»­å­åºåˆ—çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œç„¶åæ ¹æ®è¿™ä¸ªä½ç½®å†å‘å‰æ‰¾èµ·å§‹ä½ç½®å³å¯</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">2019-04-14 11:46:05</span></span><br><span class="line"><span class="comment">124MS1628K</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e5</span>+<span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">int</span> arr[MAXN];</span><br><span class="line"><span class="keyword">int</span> dp[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n) != EOF &amp;&amp; n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> flag = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;arr[i]);</span><br><span class="line">            <span class="keyword">if</span>(arr[i] &gt;= <span class="number">0</span>)</span><br><span class="line">                flag = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(flag) <span class="comment">//è¾“å…¥çš„æ•°æ®å…¨æ˜¯è´Ÿæ•°</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;0 %d %d\n&quot;</span>, arr[<span class="number">1</span>], arr[n]);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(dp));</span><br><span class="line">        <span class="keyword">int</span> MAX = -INF; <span class="comment">//è®°å½•æœ€å¤§å€¼</span></span><br><span class="line">        <span class="keyword">int</span> End, Begin; <span class="comment">//ç»“å°¾ä»¥åŠå¼€å§‹ä½ç½®</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            dp[i] = <span class="built_in">max</span>(dp[i<span class="number">-1</span>]+arr[i], arr[i]);</span><br><span class="line">            <span class="keyword">if</span>(dp[i] &gt; MAX)</span><br><span class="line">            &#123;</span><br><span class="line">                MAX = dp[i];</span><br><span class="line">                End = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> tmp = MAX;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = End; i &gt;= <span class="number">1</span>; i--) <span class="comment">//ä»æœ«å°¾å¼€å§‹éå†</span></span><br><span class="line">        &#123;</span><br><span class="line">            tmp -= arr[i];</span><br><span class="line">            <span class="keyword">if</span>(tmp == <span class="number">0</span>) </span><br><span class="line">            &#123;</span><br><span class="line">                Begin = i;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d %d %d\n&quot;</span>, MAX, arr[Begin], arr[End]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> dp </tag>
            
            <tag> æœ€å¤§è¿ç»­å­åºåˆ—å’Œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU1217-Arbitrage-Flodyå˜å½¢</title>
      <link href="/2019/04/14/HDU1217-Arbitrage-Flody%E5%8F%98%E5%BD%A2/"/>
      <url>/2019/04/14/HDU1217-Arbitrage-Flody%E5%8F%98%E5%BD%A2/</url>
      
        <content type="html"><![CDATA[<p>HDU1217-Arbitrage</p><span id="more"></span><h1 id="HDU1217"><a href="#HDU1217" class="headerlink" title="HDU1217"></a><a href="acm.hdu.edu.cn/showproblem.php?pid=1217">HDU1217</a></h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Time Limit: 2000/1000 MS (Java/Others)    Memory Limit: 65536/32768 K (Java/Others)</span><br></pre></td></tr></table></figure><p><strong>Problem Description</strong></p><p>Arbitrage is the use of discrepancies in currency exchange rates to transform one unit of a currency into more than one unit of the same currency. For example, suppose that 1 US Dollar buys 0.5 British pound, 1 British pound buys 10.0 French francs, and 1 French franc buys 0.21 US dollar. Then, by converting currencies, a clever trader can start with 1 US dollar and buy 0.5 <em> 10.0 </em> 0.21 = 1.05 US dollars, making a profit of 5 percent. </p><p>Your job is to write a program that takes a list of currency exchange rates as input and then determines whether arbitrage is possible or not.</p><hr><p><strong>Input</strong></p><p>The input file will contain one or more test cases. Om the first line of each test case there is an integer n (1&lt;=n&lt;=30), representing the number of different currencies. The next n lines each contain the name of one currency. Within a name no spaces will appear. The next line contains one integer m, representing the length of the table to follow. The last m lines each contain the name ci of a source currency, a real number rij which represents the exchange rate from ci to cj and a name cj of the destination currency. Exchanges which do not appear in the table are impossible.</p><p>Test cases are separated from each other by a blank line. Input is terminated by a value of zero (0) for n. </p><hr><p><strong>Output</strong></p><p>For each test case, print one line telling whether arbitrage is possible or not in the format â€œCase case: Yesâ€ respectively â€œCase case: Noâ€.</p><hr><p><strong>Sample Input</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">USDollar</span><br><span class="line">BritishPound</span><br><span class="line">FrenchFranc</span><br><span class="line">3</span><br><span class="line">USDollar 0.5 BritishPound</span><br><span class="line">BritishPound 10.0 FrenchFranc</span><br><span class="line">FrenchFranc 0.21 USDollar</span><br><span class="line"></span><br><span class="line">3</span><br><span class="line">USDollar</span><br><span class="line">BritishPound</span><br><span class="line">FrenchFranc</span><br><span class="line">6</span><br><span class="line">USDollar 0.5 BritishPound</span><br><span class="line">USDollar 4.9 FrenchFranc</span><br><span class="line">BritishPound 10.0 FrenchFranc</span><br><span class="line">BritishPound 1.99 USDollar</span><br><span class="line">FrenchFranc 0.09 BritishPound</span><br><span class="line">FrenchFranc 0.19 USDollar</span><br><span class="line"></span><br><span class="line">0</span><br></pre></td></tr></table></figure><p><strong>Sample Output</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Case 1: Yes</span><br><span class="line">Case 2: No</span><br></pre></td></tr></table></figure><h1 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h1><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/wyxeainn/article/details/69157966">https://blog.csdn.net/wyxeainn/article/details/69157966</a></p><p><strong>é¢˜ç›®æ„æ€ï¼šç»™å‡ºnä¸­è´§å¸ï¼Œå’Œmä¸ªè´§å¸é—´çš„æ±‡ç‡ï¼Œè®©æ±‚è§£æ˜¯å¦å­˜åœ¨ä¸€ç§è´§å¸ï¼Œå…ˆå°†è¿™ç§è´§å¸å…‘æ¢ä¸ºå…¶ä»–è´§å¸ï¼Œå†ä»å…¶ä»–è´§å¸å…‘æ¢å›è‡ªå·±ã€‚æ‰€è·å¾—çš„é’±æ›´å¤šã€‚è¿™æ ·å°±å¯ä»¥é€šè¿‡è´§å¸å…‘æ¢èµšå–åˆ©æ¶¦ã€‚å¦‚æœå­˜åœ¨è¿™æ ·çš„è´§å¸å°±è¾“å‡ºYes,å¦‚æœæ€æ ·å…‘æ¢éƒ½ä¼šèµ”æœ¬ï¼Œå°±è¾“å‡ºNo.</strong></p><p>å…ˆå¼€è¾Ÿä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œarr,<code>arr[i][j]</code>å­˜æ”¾iå¯ä»¥å…‘æ¢æˆå¤šå°‘jã€‚å› æ­¤å¦‚æœå­˜åœ¨ä¸€ç§è´§å¸kï¼Œè´§å¸iå…‘æ¢æˆè´§å¸k,å†ä»è´§å¸kå…‘æ¢æˆè´§å¸j,æ‰€å¾—åˆ°jè´§å¸çš„æ•°é‡æ¯”ä»è´§å¸iç›´æ¥å…‘æ¢æˆè´§å¸jçš„å¤§ã€‚åˆ™è¦æ›´æ–°<code>arr[i][j]</code>è¦çš„æ˜¯iå…‘æ¢æˆjçš„æœ€å¤§jæ•°ã€‚å…¶æ€æƒ³ä¸æ±‚æœ€çŸ­è·¯Flodyç®—æ³•çš„æ€æƒ³æ˜¯ç›¸åŒçš„ã€‚æ‰€ä»¥å¯ä»¥å€ŸåŠ©Flodyç®—æ³•ï¼ˆè¿™ç§æ€æƒ³ï¼‰çš„æ¨¡æ¿å»è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>è¦è§£å†³çš„é—®é¢˜ï¼Œå¦‚ä½•å°†å­—ç¬¦ä¸²å¯¹åº”æˆæ•´å‹çš„èŠ‚ç‚¹ä¸‹æ ‡ï¼Ÿ å¯ä»¥é‡‡ç”¨stlçš„mapå®ç°å­—ç¬¦ä¸²ä¸ä¸‹æ ‡çš„ä¸€ä¸€æ˜ å°„ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">double</span> arr[<span class="number">1000</span>][<span class="number">1000</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Flody</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j, k;</span><br><span class="line">    <span class="keyword">for</span>(k = <span class="number">1</span>; k &lt;= n; k++)</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            <span class="keyword">for</span>(j = <span class="number">1</span>; j &lt;= n; j++) <span class="comment">//å¦‚æœè´§å¸iå…‘æ¢æˆkå†å…‘æ¢æˆjï¼Œæ¯”iç›´æ¥å…‘æ¢æˆjæ‰€å¾—jè´§å¸æ›´å¤šï¼Œæ›´æ–°</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(arr[i][k]*arr[k][j] &gt; arr[i][j])</span><br><span class="line">                    arr[i][j] = arr[i][k]*arr[k][j];</span><br><span class="line">            &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> t, n;</span><br><span class="line">    <span class="keyword">char</span> name[<span class="number">100</span>], str1[<span class="number">100</span>], str2[<span class="number">100</span>];</span><br><span class="line">    <span class="keyword">double</span> num;</span><br><span class="line">    <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;t) != EOF &amp;&amp; t)</span><br><span class="line">    &#123;</span><br><span class="line">        map&lt;string, <span class="keyword">int</span>&gt;Map;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= t; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, name);</span><br><span class="line">            Map[name] = i; <span class="comment">//ç”¨mapæ¥å¤„ç†è´§å¸å¯¹åº”çš„ä¸‹æ ‡</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= t; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            arr[i][i] = <span class="number">1.0</span>; <span class="comment">//è‡ªèº«å…‘æ¢è‡ªèº«çš„æ±‡ç‡ä¸º1</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i+<span class="number">1</span>; j &lt;= t; j++)</span><br><span class="line">                arr[i][j] = arr[j][i] = <span class="number">0.0</span>; <span class="comment">//0ä»£è¡¨ä¸¤ç§è´§å¸ä¸èƒ½å…‘æ¢</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">        <span class="keyword">while</span>(n--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%s%lf%s&quot;</span>, str1, &amp;num, str2);</span><br><span class="line">            arr[Map[str1]][Map[str2]] = num;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">Flody</span>(t);</span><br><span class="line">        <span class="keyword">int</span> k;</span><br><span class="line">        <span class="keyword">for</span>(k = <span class="number">1</span>; k &lt;= t; k++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//å¦‚æœç¬¬iç§è´§å¸ç»è¿‡æ¥å›å…‘æ¢åï¼Œæ¯”åŸæ¥é’±å¤šäº†ï¼Œåˆ™å°±å¯ä»¥é€šè¿‡è¿™æ ·çš„æ–¹å¼èµšåˆ°é’±</span></span><br><span class="line">            <span class="keyword">if</span>(arr[k][k] &gt; <span class="number">1.0</span>) </span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Case %d: Yes\n&quot;</span>,++index);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(k &gt; t)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;Case %d: No\n&quot;</span>,++index);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾è®º </tag>
            
            <tag> æœ€çŸ­è·¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU1518-Square-DFS</title>
      <link href="/2019/04/12/HDU1518-Square-DFS/"/>
      <url>/2019/04/12/HDU1518-Square-DFS/</url>
      
        <content type="html"><![CDATA[<p>HDU1518â€”-Square</p><span id="more"></span><h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><p>é“¾æ¥ï¼š<a href="http://acm.hdu.edu.cn/showproblem.php?pid=1518">HDU1518</a></p><p><img src="/2019/04/12/HDU1518-Square-DFS/timu.png" alt></p><h1 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h1><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/guodongxiaren/article/details/23126997">https://blog.csdn.net/guodongxiaren/article/details/23126997</a></p><p>é¢˜æ„å°±æ˜¯å¥½å¤šæ£å­ï¼Œçœ‹èƒ½ä¸èƒ½æ‹¼æˆæ­£æ–¹å½¢ã€‚ä¸»è¦æ³¨æ„çš„æœ‰å‡ ç‚¹ï¼š</p><ul><li>æ‰€æœ‰æ£å­éƒ½è¦ç”¨åˆ°ï¼Œä¸èƒ½å‰©ä½™</li><li>è¾“å…¥å·²ç»ä¿è¯å¤§äº4æ ¹æ£å­äº†ã€‚æ‰€ä»¥æ— éœ€åˆ¤æ–­å¯èƒ½å°äº3æ ¹æ£å­çš„æƒ…å†µ</li><li>æ£é•¿çš„æ€»æ•°é¦–å…ˆè¦æ˜¯4çš„å€æ•°ï¼Œæ‰èƒ½è¿›è¡Œã€‚å¦åˆ™ç›´æ¥è¾“å‡º â€œnoâ€</li><li>å½“å‰é¢å‰ææ»¡è¶³ä»¥åï¼Œå†æ»¡è¶³3 æ ¹æ£å­æ‹¼å¥½ï¼Œå°±å®Œå·¥äº†ã€‚æœ€åä¸€æ ¹ä¸€å®šèƒ½æ‹¼å¥½ã€‚</li></ul><p>è§£æ³•å°±æ˜¯è¿ç”¨dfsæ–¹æ³•ä¸æ–­å°è¯•ï¼Œå½“ä¸€ä¸ªç»“æœä¸ç¬¦åˆé¢˜æ„æ—¶ï¼Œå°±å›æº¯åˆ°ä¸Šä¸€ä¸ªç»“æœã€‚</p><p>æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æå‰å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œå°†æ•°æ®ä»å¤§åˆ°å°æ’åºï¼Œä»¥æé«˜æŸ¥æ‰¾é€Ÿç‡ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">421MS1320K</span></span><br><span class="line"><span class="comment">2019-04-12 22:40:37</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN  =<span class="number">1E5</span>+<span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> arr[MAXN]; <span class="comment">//å­˜å‚¨æœ¨æ£é•¿åº¦</span></span><br><span class="line"><span class="keyword">bool</span> vis[MAXN]; <span class="comment">//ä»£è¡¨æ­¤æœ¨æ£æœ‰æ²¡æœ‰è¢«ç”¨è¿‡</span></span><br><span class="line"><span class="keyword">int</span> one, n, t; <span class="comment">//one:æ­£æ–¹å½¢ä¸€æ¡è¾¹é•¿åº¦</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(a &gt; b)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//num:å·²ç»è¾¹çš„ä¸ªæ•°ï¼Œpos:ç°åœ¨éå†çš„ç¬¬å‡ æ ¹æ£å­ï¼Œres:è¦å‡‘æˆç›®æ ‡é•¿åº¦å‰©ä½™çš„é•¿åº¦</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> num, <span class="keyword">int</span> pos, <span class="keyword">int</span> res)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(num == <span class="number">3</span>) <span class="comment">//3æ¡è¾¹æ‹¼å¥½å°±èƒ½ä¿è¯éƒ½æ‹¼å¥½</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = pos; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(vis[i])</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        vis[i] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span>(arr[i] == res) <span class="comment">//æ‹¼å¥½äº†ä¸€æ¡è¾¹ï¼Œæ‰€ä»¥é€’å½’ä¸‹ä¸€ä¸ªæ£å­è¦æ‹¼çš„çŠ¶æ€</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">dfs</span>(num+<span class="number">1</span>, <span class="number">0</span>, one))</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¦‚æœç¬¬iæ ¹æ£å­çš„é•¿åº¦å°äºç›®å‰æ‰€éœ€çš„ã€‚é‚£ä¹ˆä¹ŸæŠŠå®ƒåŠ ä¸Š</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(arr[i] &lt; res) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">dfs</span>(num, i+<span class="number">1</span>, res-arr[i]))</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*å‰é¢å¦‚æœæ»¡è¶³çš„è¯ï¼Œå°±ä¼šè¿”å›trueã€‚è€Œä¸æ‰§è¡Œè¿™ä¸€å¥</span></span><br><span class="line"><span class="comment">         *å¦‚æœèƒ½èµ°åˆ°è¿™å¥ï¼Œé‚£ä¹ˆå°±æ˜¯è¯´å‰é¢çš„æƒ…å†µéƒ½ä¸æˆåŠŸï¼Œ</span></span><br><span class="line"><span class="comment">         *ä¹Ÿå°±æ˜¯è¯´è¿™æ ¹æ£å­ä¸èƒ½å‡‘è¿‘å»ï¼Œæ‰€ä»¥è¦æ¨ç¿»åŠ å…¥è¿™æ ¹æ£å­çš„æ–¹æ¡ˆ</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        vis[i] = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;t);</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;arr[i]);</span><br><span class="line">            cnt += arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(cnt % <span class="number">4</span> != <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;no\n&quot;</span>);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        one = cnt / <span class="number">4</span>;</span><br><span class="line">        <span class="built_in">memset</span>(vis, <span class="literal">false</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">        <span class="built_in">sort</span>(arr, arr+n, cmp);</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">dfs</span>(<span class="number">0</span>,<span class="number">0</span>,one))</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;yes\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;no\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾è®º </tag>
            
            <tag> DFS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç‰›å®¢283H-Dij-é“¾å¼å‘å‰æ˜Ÿ-å¿«é€Ÿå¹‚</title>
      <link href="/2019/03/28/%E7%89%9B%E5%AE%A2283H-Dij-%E9%93%BE%E5%BC%8F%E5%90%91%E5%89%8D%E6%98%9F-%E5%BF%AB%E9%80%9F%E5%B9%82/"/>
      <url>/2019/03/28/%E7%89%9B%E5%AE%A2283H-Dij-%E9%93%BE%E5%BC%8F%E5%90%91%E5%89%8D%E6%98%9F-%E5%BF%AB%E9%80%9F%E5%B9%82/</url>
      
        <content type="html"><![CDATA[<p>Dijkstraâ€”é“¾å¼å‘å‰æ˜Ÿâ€”å¿«é€Ÿå¹‚<br><span id="more"></span></p><h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><p>é“¾æ¥ï¼š<a href="https://ac.nowcoder.com/acm/contest/283/H">ç‰›å®¢283H-å›¾è®ºä¸€é¡¿å¥—æ¨¡ç‰ˆ</a></p><p><img src="/2019/03/28/%E7%89%9B%E5%AE%A2283H-Dij-%E9%93%BE%E5%BC%8F%E5%90%91%E5%89%8D%E6%98%9F-%E5%BF%AB%E9%80%9F%E5%B9%82/timu1.png" alt></p><p><img src="/2019/03/28/%E7%89%9B%E5%AE%A2283H-Dij-%E9%93%BE%E5%BC%8F%E5%90%91%E5%89%8D%E6%98%9F-%E5%BF%AB%E9%80%9F%E5%B9%82/timu2.png" alt></p><h1 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h1><p>é¢˜ç›®æ±‚çš„æ˜¯ä¹˜ç§¯ï¼Œä½†æ˜¯åˆå› ä¸º<strong>Wä¸€å®šæ˜¯2çš„æ•´æ•°æ¬¡å¹‚ã€‚</strong>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†ä¹˜æ³•æ¢ä¸ºåŠ æ³•ï¼Œ<code>2^x * 2^y = 2^(x+y)</code></p><p>åªè¦æˆ‘ä»¬æ±‚å‡º<code>x+y</code>çš„æœ€å°å€¼ï¼Œé‚£ä¹ˆå¯¹åº”å…¶ç­”æ¡ˆä¹Ÿæ˜¯æœ€å°å€¼ã€‚ç®—<code>2^x</code>å¯ä»¥è¿ç”¨å¿«é€Ÿå¹‚è§£å†³</p><p>æ‰€ä»¥æ€»ä½“ä¸Šæˆ‘ä»¬å¯ä»¥ç”¨<code>dij+ä¼˜å…ˆé˜Ÿåˆ—ä¼˜åŒ–+é“¾å¼å‘å‰æ˜Ÿ+å¿«é€Ÿå¹‚è§£å†³</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">è¿è¡Œæ—¶é—´(ms)ä½¿ç”¨å†…å­˜(KB)ä»£ç é•¿åº¦ä½¿ç”¨è¯­è¨€æäº¤æ—¶é—´</span></span><br><span class="line"><span class="comment">62   4188     1543    C++       2019-03-28 10:53:59</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MOD = <span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e5</span>+<span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0X3F3F3F3F</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> //é“¾å¼å‘å‰æ˜Ÿå­˜å›¾</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="comment">// toï¼šè¡¨ç¤ºè¿™æ¡è¾¹çš„å¦å¤–ä¸€ä¸ªé¡¶ç‚¹ï¼Œnextï¼šæŒ‡å‘ä¸‹ä¸€æ¡è¾¹çš„æ•°ç»„ä¸‹æ ‡ï¼Œå€¼ä¸º-1è¡¨ç¤ºæ²¡æœ‰ä¸‹ä¸€æ¡è¾¹</span></span><br><span class="line"><span class="keyword">int</span> to, next; </span><br><span class="line">    <span class="comment">//valï¼šè¡¨ç¤ºç¬¬iæ¡è¾¹çš„å€¼</span></span><br><span class="line"><span class="keyword">int</span> val;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> //ä¼˜å…ˆé˜Ÿåˆ—èŠ‚ç‚¹ï¼Œ<span class="title">pos</span>è¡¨ç¤ºé¡¶ç‚¹ä½ç½®ï¼Œ<span class="title">cost</span>è¡¨ç¤ºä»èµ·ç‚¹åˆ°è¯¥ç‚¹éœ€è¦çš„æœ€ä¼˜è·¯å¾„é•¿åº¦</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">int</span> pos, cost;</span><br><span class="line"><span class="built_in">Node</span>()&#123;&#125;</span><br><span class="line"><span class="built_in">Node</span>(<span class="keyword">int</span> pos, <span class="keyword">int</span> cost):<span class="built_in">pos</span>(pos),<span class="built_in">cost</span>(cost)&#123;&#125;</span><br><span class="line"><span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span> &lt;(<span class="keyword">const</span> Node &amp; a, <span class="keyword">const</span> Node &amp; b)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> a.cost &gt; b.cost;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//head[i]ï¼šè¡¨ç¤ºé¡¶ç‚¹içš„ç¬¬ä¸€æ¡è¾¹çš„æ•°ç»„ä¸‹æ ‡ï¼Œ-1è¡¨ç¤ºé¡¶ç‚¹iæ²¡æœ‰è¾¹</span></span><br><span class="line"><span class="keyword">int</span> head[MAXN];</span><br><span class="line"><span class="comment">//vis[i]ï¼šç¬¬iä¸ªç‚¹æ˜¯å¦è¢«è®¿é—®</span></span><br><span class="line"><span class="keyword">bool</span> vis[MAXN];</span><br><span class="line"><span class="keyword">int</span> dis[MAXN];</span><br><span class="line">Edge edge[MAXN];</span><br><span class="line"><span class="keyword">int</span> n, m, s, t;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mod_pow</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> n)</span> <span class="comment">//å¿«é€Ÿå¹‚</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> ans = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(n)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(n &amp; <span class="number">1</span>)</span><br><span class="line">ans = ans*x%MOD;</span><br><span class="line">x = x*x%MOD;</span><br><span class="line">n &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addEdge</span><span class="params">(<span class="keyword">int</span> e1, <span class="keyword">int</span> e2, <span class="keyword">int</span> id, <span class="keyword">int</span> val)</span> <span class="comment">//é“¾å¼å‘å‰æ˜Ÿå»ºå›¾</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">edge[id].to = e2;</span><br><span class="line">edge[id].next = head[e1];</span><br><span class="line">head[e1] = id;</span><br><span class="line">edge[id].val = val;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dijkstra</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">priority_queue&lt;Node&gt; q;</span><br><span class="line">Node p;</span><br><span class="line">dis[s] = <span class="number">0</span>;</span><br><span class="line">q.<span class="built_in">push</span>(<span class="built_in">Node</span>(s, <span class="number">0</span>));</span><br><span class="line">Edge e;</span><br><span class="line"><span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">&#123;</span><br><span class="line">p = q.<span class="built_in">top</span>();</span><br><span class="line">q.<span class="built_in">pop</span>();</span><br><span class="line"><span class="keyword">if</span>(vis[p.pos])</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">vis[p.pos] = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k = head[p.pos]; k != <span class="number">-1</span>; k = edge[k].next)</span><br><span class="line">&#123;</span><br><span class="line">    e = edge[k];</span><br><span class="line"><span class="keyword">if</span>(dis[e.to] &gt; dis[p.pos] + e.val)</span><br><span class="line">&#123;</span><br><span class="line">dis[e.to] = dis[p.pos] + e.val;</span><br><span class="line">q.<span class="built_in">push</span>(<span class="built_in">Node</span>(e.to, dis[e.to]));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;s, &amp;t);</span><br><span class="line"><span class="built_in">memset</span>(head, <span class="number">-1</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(head));</span><br><span class="line"><span class="built_in">memset</span>(vis, <span class="literal">false</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">dis[i] = INF;</span><br><span class="line"><span class="keyword">int</span> e1, e2, val;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;e1, &amp;e2, &amp;val);</span><br><span class="line"><span class="built_in">addEdge</span>(e1, e2, i,<span class="built_in">log2</span>(val)); <span class="comment">//å–å‡º2çš„å‡ æ¬¡å¹‚åå†å­˜å…¥å›¾</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Dijkstra</span>();</span><br><span class="line"><span class="keyword">if</span>(dis[t] == INF)</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;-1\n&quot;</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,<span class="built_in">mod_pow</span>(<span class="number">2</span>,dis[t]));</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾è®º </tag>
            
            <tag> æœ€çŸ­è·¯ </tag>
            
            <tag> dijkstra </tag>
            
            <tag> é“¾å¼å‘å‰æ˜Ÿ </tag>
            
            <tag> å¿«é€Ÿå¹‚ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾è®ºä¹‹å­˜å›¾æ–¹å¼</title>
      <link href="/2019/03/26/%E5%9B%BE%E8%AE%BA%E4%B9%8B%E5%AD%98%E5%9B%BE%E6%96%B9%E5%BC%8F/"/>
      <url>/2019/03/26/%E5%9B%BE%E8%AE%BA%E4%B9%8B%E5%AD%98%E5%9B%BE%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>é‚»æ¥çŸ©é˜µï¼Œé‚»æ¥è¡¨ï¼Œé“¾å¼å‘å‰æ˜Ÿ</p><span id="more"></span><p>å‚è€ƒï¼š</p><p><a href="http://jzqt.github.io/2015/07/21/ACM%E5%9B%BE%E8%AE%BA%E4%B9%8B%E5%AD%98%E5%9B%BE%E6%96%B9%E5%BC%8F/">ACMå›¾è®ºä¹‹å­˜å›¾æ–¹å¼</a></p><h1 id="é‚»æ¥çŸ©é˜µ"><a href="#é‚»æ¥çŸ©é˜µ" class="headerlink" title="é‚»æ¥çŸ©é˜µ"></a>é‚»æ¥çŸ©é˜µ</h1><p>é‚»æ¥çŸ©é˜µæ˜¯ä¸‰ç§å­˜å›¾æ–¹å¼ä¸­æœ€ç®€å•ä¹Ÿæœ€ä¸ºæš´åŠ›çš„ä¸€ç§å­˜å›¾æ–¹å¼äº†ã€‚</p><h2 id="å­˜å›¾æ€æƒ³"><a href="#å­˜å›¾æ€æƒ³" class="headerlink" title="å­˜å›¾æ€æƒ³"></a>å­˜å›¾æ€æƒ³</h2><p>ä½¿ç”¨ä¸€ä¸ªçŸ©é˜µæ¥æè¿°ä¸€ä¸ªå›¾ï¼Œå¯¹äºçŸ©é˜µçš„ç¬¬iè¡Œç¬¬jåˆ—çš„å€¼ï¼Œè¡¨ç¤ºç¼–å·ä¸ºiçš„é¡¶ç‚¹åˆ°ç¼–å·ä¸ºjçš„é¡¶ç‚¹çš„æƒå€¼</p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><p>å¯¹äºé‚»æ¥çŸ©é˜µæ¥è¯´ï¼Œå®ƒçš„ä»£ç å®ç°éƒ½ååˆ†ç®€å•ï¼ŒäºŒç»´æ•°ç»„å°±å¯ä»¥äº†ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æœ€å¤§é¡¶ç‚¹æ•°</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXV = <span class="number">1e3</span>;</span><br><span class="line"><span class="comment">//é‚»æ¥çŸ©é˜µ,Map[i][j]:é¡¶ç‚¹iåˆ°é¡¶ç‚¹jçš„æƒå€¼</span></span><br><span class="line"><span class="keyword">int</span> Map[MAXV][MAXV];</span><br><span class="line"><span class="built_in">memset</span>(Map, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(Map));</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¢åŠ è¾¹</span></span><br><span class="line"><span class="comment">// æ–°å¢é¡¶ç‚¹`i`åˆ°é¡¶ç‚¹`j`çš„è¾¹ï¼Œæƒå€¼ä¸º`w`</span></span><br><span class="line">Map[i][j] = w;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤è¾¹</span></span><br><span class="line"><span class="comment">// åˆ é™¤é¡¶ç‚¹`i`åˆ°é¡¶ç‚¹`j`çš„è¾¹</span></span><br><span class="line">Map[i][j] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢è¾¹</span></span><br><span class="line"><span class="comment">// æŸ¥è¯¢é¡¶ç‚¹`i`åˆ°é¡¶ç‚¹`j`çš„è¾¹æƒ</span></span><br><span class="line"></span><br><span class="line">Map[i][j];</span><br></pre></td></tr></table></figure><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><p>ä½¿ç”¨é‚»æ¥çŸ©é˜µæ¥è¿›è¡Œå»ºå›¾å­˜å›¾æœ‰ä»¥ä¸‹ä¼˜ç‚¹</p><ul><li><strong>ç®€å•æ˜“å­¦</strong></li></ul><p>è¿™ä¸ªè‚¯å®šä¸ç”¨å¤šè¯´ï¼Œå“ªæ€•æ˜¯æ²¡å­¦è¿‡çº¿æ€§ä»£æ•°çš„ç«¥é‹ä¹Ÿå¾ˆå®¹æ˜“ç†è§£è¿™æ ·çš„å­˜å›¾æ–¹å¼ã€‚</p><ul><li><strong>ä»£ç æ˜“å†™ï¼Œç®€å•å¥½æ“ä½œ</strong></li></ul><p>ä¸Šé¢çš„ä»£ç å®ç°å·²ç»å±•ç¤ºäº†è¦å®šä¹‰è¿™ä¸ªæ•°æ®ç»“æ„ä»¥åŠå®ç°åˆå§‹åŒ–ï¼Œå¢åŠ åˆ é™¤è¾¹ç­‰æ“ä½œæœ‰å¤šä¹ˆçš„ç®€å•ã€‚</p><ul><li><strong>å¯¹å·²ç¡®å®šçš„è¾¹è¿›è¡Œæ“ä½œï¼Œæ•ˆç‡é«˜</strong></li></ul><p>ç¡®å®šè¾¹ï¼ˆå·²çŸ¥ä¸¤é¡¶ç‚¹ç¼–å·ï¼‰è¦è¿›è¡Œå¢åŠ æˆ–åˆ é™¤è¾¹ï¼ˆæˆ–è€…è¯´æ›´æ”¹è¾¹æƒï¼‰ä»¥åŠæŸ¥è¯¢è¾¹æƒç­‰æ“ä½œï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(1)ã€‚</p><ul><li><strong>æ˜“å¤„ç†é‡è¾¹</strong></li></ul><p>ä½ å¯ä»¥éšæ—¶è¦†ç›–æ‰é‡è¾¹ï¼Œå¯ä»¥è‡ªå·±å®ç°å­˜å‚¨æœ€æ–°çš„è¾¹ï¼Œæƒå€¼æœ€å¤§çš„è¾¹æˆ–æƒå€¼æœ€å°çš„è¾¹ç­‰ã€‚<br>å½“ç„¶ï¼Œå¦‚æœä½ éè¦ä½¿ç”¨é‚»æ¥çŸ©é˜µå­˜å›¾è¿˜è¦å­˜é‡è¾¹ä¹Ÿä¸æ˜¯ä¸å¯ä»¥ã€‚</p><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><p>é‚»æ¥çŸ©é˜µå­˜å›¾è™½ç„¶ç®€å•ä¼˜é›…ï¼Œä½†æ˜¯å®ƒçš„ä¸€äº›ç¼ºç‚¹å´å‡ ä¹æ˜¯è‡´å‘½çš„ã€‚</p><ul><li><strong>è¿‡é«˜çš„ç©ºé—´å¤æ‚åº¦</strong></li></ul><p>å¯¹äºé¡¶ç‚¹æ•°Vï¼Œé‚»æ¥çŸ©é˜µå­˜å›¾çš„ç©ºé—´å¤æ‚åº¦é«˜è¾¾<code>O(V^2)</code>ï¼Œé¡¶ç‚¹æ•°ä¸Šäº†ä¸€ä¸‡å¯ä»¥ä¸ç”¨è€ƒè™‘è¿™ç§å­˜å›¾æ–¹å¼äº†ã€‚<br>å¯¹äºç¨€ç–å›¾æ¥è¯´ï¼Œé‚»æ¥çŸ©é˜µå­˜å›¾å†…å­˜æµªè´¹å¤ªä¸¥é‡ï¼Œè¿™ä¹Ÿæ˜¯é‚»æ¥çŸ©é˜µå­˜å›¾åœ¨ACMé¢˜ç›®ä¸­ååˆ†ç½•è§çš„æ ¹æœ¬åŸå› ã€‚</p><ul><li><strong>å¯¹äºä¸ç¡®å®šè¾¹çš„æŸ¥è¯¢æ•ˆç‡ä¸€èˆ¬</strong></li></ul><p>æ¯”å¦‚ï¼Œæˆ‘æ‰¾ä¸ªç¼–å·ä¸º1å‡ºå‘çš„ç¬¬ä¸€æ¡è¾¹æˆ‘è¿˜è¦ä¸€æ¡æ¡è¾¹åˆ¤æ–­æ˜¯å¦å­˜åœ¨ï¼ˆæƒå€¼æ˜¯å¦ä¸º0ï¼‰</p><h1 id="é‚»æ¥è¡¨"><a href="#é‚»æ¥è¡¨" class="headerlink" title="é‚»æ¥è¡¨"></a>é‚»æ¥è¡¨</h1><p>é‚»æ¥è¡¨åœ¨ä¸‰ç§å¸¸ç”¨çš„å­˜å›¾æ–¹å¼ä¸­å±äºè¾ƒä¸ºä¸­åº¸å’Œæ™®éçš„å­˜å›¾æ–¹å¼äº†ï¼Œç¼ºç‚¹ä¸è‡´å‘½ï¼Œä¼˜ç‚¹ä¸æ˜æ˜¾ã€‚</p><h2 id="å­˜å›¾æ€æƒ³-1"><a href="#å­˜å›¾æ€æƒ³-1" class="headerlink" title="å­˜å›¾æ€æƒ³"></a>å­˜å›¾æ€æƒ³</h2><p><strong>é‚»æ¥çŸ©é˜µ</strong>å¯¹äºæ¯ä¸ªé¡¶ç‚¹ä½¿ç”¨<strong>å®šé•¿çš„æ•°ç»„</strong>æ¥å­˜å‚¨ä»¥è¯¥ç‚¹å‡ºå‘çš„è¾¹çš„æƒ…å†µã€‚ç¬¬iä¸ªæ•°ç»„çš„ç¬¬jä¸ªå€¼å­˜å‚¨çš„æ˜¯ä»é¡¶ç‚¹iåˆ°é¡¶ç‚¹jçš„è¾¹çš„æƒå€¼ã€‚</p><p>è€Œ<strong>é‚»æ¥è¡¨</strong>åˆ™æ˜¯å¯¹äºæ¯ä¸ªé¡¶ç‚¹ä½¿ç”¨<strong>ä¸å®šé•¿çš„é“¾è¡¨</strong>æ¥å­˜å‚¨ä»¥è¯¥ç‚¹å‡ºå‘çš„è¾¹çš„æƒ…å†µã€‚<strong>å› æ­¤å¯¹äºç¬¬iä¸ªé“¾è¡¨çš„ç¬¬jä¸ªå€¼å®é™…ä¸Šå­˜å‚¨çš„æ˜¯ä»ç¼–å·ä¸ºiçš„é¡¶ç‚¹å‡ºå‘çš„ç¬¬jæ¡è¾¹çš„æƒ…å†µ</strong>ã€‚</p><p><strong>ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœæœ‰è¾¹æƒçš„è¯ï¼Œé‚»æ¥è¡¨çš„é“¾è¡¨å­˜å‚¨çš„æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œè¿™ä¸ªç»“æ„ä½“å­˜å‚¨è¯¥è¾¹çš„ç»ˆç‚¹ä»¥åŠè¾¹æƒ</strong></p><p><img src="/2019/03/26/%E5%9B%BE%E8%AE%BA%E4%B9%8B%E5%AD%98%E5%9B%BE%E6%96%B9%E5%BC%8F/links&amp;matrix.png" alt></p><h2 id="ä»£ç å®ç°-1"><a href="#ä»£ç å®ç°-1" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><p>åœ¨ACMé¢˜ç›®ä¸­ï¼ŒåŠ¨æ€çš„æ•°æ®ç»“æ„ä¸€èˆ¬æ˜¯ä¸è¢«æ¨èçš„ï¼Œå› ä¸ºåŠ¨æ€å¼€è¾Ÿå†…å­˜æ¯”è¾ƒæ¶ˆè€—æ—¶é—´ï¼Œä¸”å†™èµ·æ¥å¤æ‚å®¹æ˜“å‡ºé”™ã€‚<br>å¤§éƒ¨åˆ†æƒ…å†µæˆ‘ä»¬ä½¿ç”¨<strong>C++STLé‡Œçš„vector</strong>ä½œä¸ºé“¾è¡¨æ¥å®ç°å›¾çš„é‚»æ¥è¡¨ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// vectorå®ç°çš„é‚»æ¥è¡¨çš„å®šä¹‰</span></span><br><span class="line"><span class="comment">// ä¸è€ƒè™‘è¾¹æƒï¼Œå­˜å‚¨ç±»å‹ä¸ºintå‹</span></span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; e[V];</span><br><span class="line"></span><br><span class="line"><span class="comment">// é‚»æ¥è¡¨çš„åˆå§‹åŒ–æ“ä½œ</span></span><br><span class="line"><span class="comment">// å°†èµ·ç‚¹ä¸º`i`çš„è¾¹é“¾è¡¨å…¨éƒ¨æ¸…ç©º</span></span><br><span class="line">e[i].<span class="built_in">clear</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¢åŠ è¾¹</span></span><br><span class="line"><span class="comment">// æ–°å¢é¡¶ç‚¹`i`åˆ°é¡¶ç‚¹`j`çš„è¾¹</span></span><br><span class="line">e[i].<span class="built_in">push_back</span>(j);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢è¾¹</span></span><br><span class="line">e[i][<span class="number">0</span>];    <span class="comment">// æŸ¥è¯¢ä»¥`i`ä¸ºèµ·ç‚¹çš„ç¬¬ä¸€æ¡è¾¹i-&gt;e[i][0]</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;(<span class="keyword">int</span>)e[i].<span class="built_in">size</span>(); ++j) &#123;</span><br><span class="line">    <span class="keyword">if</span> (e[i][j] == k) &#123;     <span class="comment">// æŸ¥è¯¢è¾¹`i-&gt;k`</span></span><br><span class="line">        <span class="comment">// do something.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¼˜ç‚¹-1"><a href="#ä¼˜ç‚¹-1" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul><li><strong>è¾ƒä¸ºç®€å•æ˜“å­¦</strong></li></ul><p>ç›¸æ¯”é‚»æ¥çŸ©é˜µï¼Œæ— éæ˜¯æ•°ç»„è½¬é“¾è¡¨åŠ ä¸Šå­˜å‚¨å€¼çš„æ„ä¹‰ä¸åŒè€Œå·²ï¼Œä¸éœ€è¦è½¬å¤ªå¤§çš„å¼¯ã€‚</p><ul><li><strong>ä»£ç æ˜“å†™ï¼Œä¸å¤æ‚</strong></li></ul><p>ä»£ç å®ç°å·²ç»æ¼”ç¤ºè¿‡äº†ï¼Œè¾ƒç®€å•ï¼Œä¸å®¹æ˜“å†™é”™ã€‚</p><ul><li><strong>å†…å­˜åˆ©ç”¨ç‡è¾ƒé«˜</strong></li></ul><p>å¯¹äºé¡¶ç‚¹æ•°Vä¸è¾¹æ•°Eï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(V+E)ã€‚èƒ½è¾ƒå¥½å¤„ç†ç¨€ç–å›¾çš„å­˜å‚¨ã€‚</p><ul><li><strong>å¯¹ä¸ç¡®å®šè¾¹çš„æ“ä½œæ–¹ä¾¿æ•ˆç‡ä¹Ÿä¸é”™</strong></li></ul><p>æ¯”å¦‚ï¼Œè¦éå†ä»æŸç‚¹å‡ºå‘çš„æ‰€æœ‰è¾¹ï¼Œä¸ä¼šåƒé‚»æ¥çŸ©é˜µä¸€æ ·å¯èƒ½ä¼šéå†åˆ°ä¸å­˜åœ¨çš„è¾¹ã€‚</p><h2 id="ç¼ºç‚¹-1"><a href="#ç¼ºç‚¹-1" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><ul><li><strong>é‡è¾¹ä¸å¥½å¤„ç†</strong></li></ul><p>åˆ¤é‡æ¯”è¾ƒéº»çƒ¦ï¼Œè¿˜è¦éå†å·²æœ‰çš„è¾¹ï¼Œä¸èƒ½ç›´æ¥åˆ¤æ–­ã€‚<br>ä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨é‚»æ¥è¡¨å­˜å›¾æ˜¯ä¼šå­˜å‚¨é‡è¾¹çš„ï¼Œä¸ä¼šåšé‡è¾¹çš„åˆ¤æ–­ã€‚<br>æ‰€ä»¥å¦‚æœè¦è§£å†³é‡è¾¹çš„å½±å“ä¸€èˆ¬ä¸åœ¨å­˜è¾¹çš„æƒ…å†µä¸‹åšæ–‡ç« ã€‚</p><ul><li><strong>å¯¹ç¡®å®šè¾¹çš„æ“ä½œæ•ˆç‡ä¸é«˜</strong></li></ul><p>æ¯”å¦‚å¯¹äºç»™å®ši-&gt;jçš„è¾¹è¦è¿›è¡ŒæŸ¥è¯¢æˆ–ä¿®æ”¹ç­‰æ“ä½œåªæœ‰é€šè¿‡éå†è¿™ç§æ–¹å¼æ‰¾åˆ°äº†ã€‚</p><h1 id="é“¾å¼å‘å‰æ˜Ÿ"><a href="#é“¾å¼å‘å‰æ˜Ÿ" class="headerlink" title="é“¾å¼å‘å‰æ˜Ÿ"></a>é“¾å¼å‘å‰æ˜Ÿ</h1><p>é“¾å¼å‰å‘æ˜Ÿæ˜¯å‰å‘æ˜Ÿçš„å‡çº§ç‰ˆï¼Œå› ä¸ºå®ƒå¯ä»¥å®Œç¾ä»£æ›¿å‰å‘æ˜Ÿï¼Œæ‰€ä»¥å°±è·³è¿‡å‰å‘æ˜Ÿçš„å­¦ä¹ ï¼Œç›´æ¥å­¦ä¹ é“¾å¼å‰å‘æ˜Ÿã€‚</p><h2 id="å­˜å›¾æ€æƒ³-2"><a href="#å­˜å›¾æ€æƒ³-2" class="headerlink" title="å­˜å›¾æ€æƒ³"></a>å­˜å›¾æ€æƒ³</h2><p>é“¾å¼å‰å‘æ˜Ÿçš„æœ¬è´¨å…¶å®å°±æ˜¯ç”¨æ•°ç»„æ¨¡æ‹Ÿé“¾è¡¨çš„é‚»æ¥è¡¨ã€‚</p><p>è¿™ç§å­˜å›¾æ–¹å¼çš„æ•°æ®ç»“æ„ä¸»è¦æ˜¯<strong>è¾¹é›†æ•°ç»„</strong>ï¼Œé¡¾åæ€ä¹‰ï¼Œ<strong>å›¾çš„è¾¹æ˜¯ç”¨æ•°ç»„æ¥å­˜å‚¨çš„ã€‚</strong><br>å½“ç„¶æƒ³è¦å®Œç¾è¡¨ç¤ºå›¾ç»“æ„ï¼Œå…‰æœ‰ä¸€ä¸ªè¾¹é›†æ•°ç»„è¿˜ä¸å¤Ÿï¼Œè¿˜è¦æœ‰ä¸€ä¸ªæ•°ç»„å­˜å‚¨æŒ‡å‘<strong>æ¯ä¸€ä¸ªç‚¹çš„ç¬¬ä¸€æ¡è¾¹çš„â€œæŒ‡é’ˆâ€ã€‚</strong><br>è€Œæ¯ä¸€æ¡è¾¹éƒ½éœ€è¦å­˜å‚¨æ¥ä¸‹æ¥ä¸€æ¡è¾¹çš„â€œæŒ‡é’ˆâ€ï¼Œè¿™æ ·å°±èƒ½å¤Ÿåƒç±»ä¼¼é‚»æ¥è¡¨ä¸€æ ·æ–¹ä¾¿éå†æ¯ä¸€ä¸ªç‚¹çš„æ‰€æœ‰è¾¹äº†</p><p>å¯å‚è€ƒ:</p><p><a href="https://blog.csdn.net/acdreamers/article/details/16902023">https://blog.csdn.net/acdreamers/article/details/16902023</a></p><h2 id="ä»£ç å®ç°-2"><a href="#ä»£ç å®ç°-2" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ€å¤§é¡¶ç‚¹æ•°</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXV = <span class="number">1E5</span>;</span><br><span class="line"><span class="comment">// æœ€å¤§è¾¹æ•°</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXE = <span class="number">1E5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾¹ç»“æ„ä½“çš„å®šä¹‰</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> to;         <span class="comment">// è¡¨ç¤ºè¿™æ¡è¾¹çš„å¦å¤–ä¸€ä¸ªé¡¶ç‚¹</span></span><br><span class="line">    <span class="keyword">int</span> next;       <span class="comment">// æŒ‡å‘ä¸‹ä¸€æ¡è¾¹çš„æ•°ç»„ä¸‹æ ‡ï¼Œå€¼ä¸º-1è¡¨ç¤ºæ²¡æœ‰ä¸‹ä¸€æ¡è¾¹</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// head[i] è¡¨ç¤ºé¡¶ç‚¹içš„ç¬¬ä¸€æ¡è¾¹çš„æ•°ç»„ä¸‹æ ‡ï¼Œ-1è¡¨ç¤ºé¡¶ç‚¹iæ²¡æœ‰è¾¹</span></span><br><span class="line"><span class="keyword">int</span> head[V];</span><br><span class="line">Edge edge[E];</span><br><span class="line"></span><br><span class="line"><span class="comment">// é“¾å¼å‰å‘æ˜Ÿåˆå§‹åŒ–ï¼Œåªéœ€è¦åˆå§‹åŒ–é¡¶ç‚¹æ•°ç»„å°±å¯ä»¥äº†</span></span><br><span class="line"><span class="built_in">memset</span>(head, <span class="number">-1</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(head));</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¢åŠ è¾¹çš„æ–¹å¼</span></span><br><span class="line"><span class="comment">// æ–°å¢è¾¹ a -&gt; bï¼Œè¯¥è¾¹çš„æ•°ç»„ä¸‹æ ‡ä¸º`id`</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AddEdge</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> id)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    edge[id].to = b;</span><br><span class="line">    edge[id].next = head[a];    <span class="comment">// æ–°å¢çš„è¾¹è¦æˆä¸ºé¡¶ç‚¹`a`çš„ç¬¬ä¸€æ¡è¾¹ï¼Œè€Œä¸æ˜¯æœ€åä¸€æ¡è¾¹</span></span><br><span class="line">    head[a] = id;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=head[a]; i!=<span class="number">-1</span>; i=e[i].next) &#123;</span><br><span class="line">    <span class="comment">// e[i] å°±æ˜¯ä½ å½“å‰éå†çš„è¾¹ a -&gt; e[i].to</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¼˜ç‚¹-2"><a href="#ä¼˜ç‚¹-2" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul><li><strong>å†…å­˜åˆ©ç”¨ç‡é«˜</strong></li></ul><p>ç›¸æ¯”vectorå®ç°çš„é‚»æ¥è¡¨è€Œè¨€ï¼Œå¯ä»¥å‡†ç¡®å¼€è¾Ÿæœ€å¤šè¾¹æ•°çš„å†…å­˜ï¼Œä¸åƒvectorå®ç°çš„é‚»æ¥è¡¨æœ‰çˆ†å†…å­˜çš„é£é™©ã€‚</p><ul><li><strong>å¯¹ä¸ç¡®å®šè¾¹çš„æ“ä½œæ–¹ä¾¿æ•ˆç‡ä¹Ÿä¸é”™</strong></li></ul><p>è¿™ç‚¹å’Œé‚»æ¥è¡¨ä¸€æ ·ï¼Œä¸ä¼šéå†åˆ°ä¸å­˜åœ¨çš„è¾¹ã€‚</p><h2 id="ç¼ºç‚¹-2"><a href="#ç¼ºç‚¹-2" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><ul><li><strong>éš¾äºç†è§£ï¼Œä»£ç è¾ƒå¤æ‚</strong></li></ul><p>è¿™ç§å­˜å›¾æ–¹å¼ç›¸å¯¹äºé‚»æ¥è¡¨æ¥è¯´æ¯”è¾ƒéš¾ç†è§£ï¼Œä»£ç è™½ç„¶ä¸æ˜¯å¾ˆå¤æ‚ä½†æ˜¯ä¸ç†Ÿç»ƒçš„è¯å†™èµ·æ¥ä¹Ÿä¸æ˜¯æ–¹ä¾¿ã€‚</p><ul><li><strong>é‡è¾¹ä¸å¥½å¤„ç†</strong></li></ul><p>è¿™ç‚¹ä¸é‚»æ¥è¡¨ä¸€æ ·ï¼Œåªæœ‰é€šè¿‡éå†åˆ¤é‡ã€‚</p><ul><li><strong>å¯¹ç¡®å®šè¾¹çš„æ“ä½œæ•ˆç‡ä¸é«˜</strong></li></ul><p>ä¹Ÿä¸é‚»æ¥è¡¨ä¸€æ ·ï¼Œä¸èƒ½é€šè¿‡ä¸¤ç‚¹é©¬ä¸Šç¡®å®šè¾¹ï¼Œåªèƒ½éå†æŸ¥æ‰¾ã€‚</p><h1 id="é“¾å¼å‘å‰æ˜Ÿä¸é‚»æ¥è¡¨"><a href="#é“¾å¼å‘å‰æ˜Ÿä¸é‚»æ¥è¡¨" class="headerlink" title="é“¾å¼å‘å‰æ˜Ÿä¸é‚»æ¥è¡¨"></a>é“¾å¼å‘å‰æ˜Ÿä¸é‚»æ¥è¡¨</h1><p><strong>é‚»æ¥è¡¨</strong></p><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ol><li><p>å†™èµ·æ¥æ¯”é“¾å¼å‰å‘æ˜Ÿå¿«ï¼ˆå¤§æ¦‚</p></li><li><p>æ¯ä¸ªé¡¶ç‚¹çš„å‡ºè¾¹éƒ½æ˜¯ç”¨vectorå­˜å‚¨çš„ï¼Œæ–¹ä¾¿æ‰§è¡Œä¸€äº›STLä¸­çš„å‡½æ•°ï¼ˆæ¯”å¦‚æ’åºï¼‰</p></li></ol><p><strong>ç¼ºç‚¹:</strong></p><ol><li>STLä¼šç•¥æ…¢ä¸€äº›</li><li>æµªè´¹ç©ºé—´ï¼Œç”±äºvectorç”³è¯·ç©ºé—´çš„æ–¹å¼æ˜¯ä¸¤å€æ‰©å®¹ï¼Œé‡åˆ°å¡ç©ºé—´çš„é¢˜ç›®çš„æ—¶å€™ä¼šè·ª</li><li>æ•°ç»„å¯ä»¥random accessçš„ä¼˜ç‚¹åœ¨å›¾é—®é¢˜ä¸­é€šå¸¸æ²¡æœ‰ä»€ä¹ˆåµç”¨ï¼Œä½†æ˜¯æ•°ç»„ä¸èƒ½O(1)åˆ é™¤å…ƒç´ çš„ç¼ºç‚¹åœ¨æŸäº›åº”ç”¨åœºåˆä¸‹éå¸¸è‡´å‘½</li></ol><p>ç„¶åæŠŠä¸Šé¢çš„å–ä¸ªåå¤§æ¦‚ä¹Ÿå°±æ˜¯é“¾å¼å‰å‘æ˜Ÿçš„ç‰¹ç‚¹äº†â€¦</p><p><strong>æ‰€ä»¥åœ¨æ²¡æœ‰åˆ è¾¹æ“ä½œçš„æƒ…å†µä¸‹ï¼Œä»¥å†™çš„çˆ½çš„è§’åº¦æ¥çœ‹çš„è¯åº”è¯¥æ˜¯é‚»æ¥è¡¨è¿™ç§æ–¹å¼æ›´çˆ½ä¸€ç‚¹ï¼Œé‡åˆ°éœ€æ±‚åˆ è¾¹æ“ä½œæˆ–è€…å¯¹æ—¶é—´ç©ºé—´è¦æ±‚æ¯”è¾ƒé«˜çš„é—®é¢˜ç”¨é“¾å¼å‰å‘æ˜Ÿæ¯”è¾ƒç¨³å¦¥</strong></p><p>å‚è€ƒï¼š<br><a href="https://www.zhihu.com/question/59676094/answer/178637763">https://www.zhihu.com/question/59676094/answer/178637763</a></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å¯¹äº<strong>é‚»æ¥çŸ©é˜µå­˜å›¾</strong>æ¥è¯´ï¼Œç”±äº<strong>å†…å­˜æ¶ˆè€—çš„å±€é™æ€§</strong>ï¼Œå®ƒçš„é€‚ç”¨èŒƒå›´æ¯”è¾ƒç‹­çª„ï¼Œå‡ ä¹åªèƒ½åœ¨ç®€å•å›¾è®ºé¢˜ç›®ä¸­è§åˆ°ã€‚</p><p><strong>é‚»æ¥è¡¨å­˜å›¾</strong>æ˜¯æœ€ä¸ºå¸¸è§çš„ä¸€ç§ï¼Œç»å¤§éƒ¨åˆ†é‡‡ç”¨<code>C++STLä¸­çš„vector</code>å®ç°ï¼Œä¸€èˆ¬æƒ…å†µä¸‹å¤§éƒ¨åˆ†å›¾è®ºé¢˜ç›®éƒ½èƒ½ä½¿ç”¨è¯¥å­˜å›¾æ–¹å¼ã€‚</p><p>ä½†æ˜¯<strong>é“¾å¼å‰å‘æ˜Ÿ</strong>å…¶å®æ˜¯ä¸€ç§è¾ƒå¥½æ›¿ä»£é‚»æ¥è¡¨æ¥å­˜å›¾çš„æ•°æ®ç»“æ„ï¼Œåœ¨é‚»æ¥è¡¨å­˜å›¾ä¸èƒ½ä½¿ç”¨æ—¶å¯ä»¥ä½¿ç”¨ï¼Œå‡ ä¹å¯ä»¥ç”¨äºå…¨éƒ¨å›¾è®ºé¢˜ç›®ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾è®º </tag>
            
            <tag> é‚»æ¥çŸ©é˜µ </tag>
            
            <tag> é‚»æ¥è¡¨ </tag>
            
            <tag> é“¾å¼å‘å‰æ˜Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾ç€è‰²é—®é¢˜</title>
      <link href="/2019/03/23/%E5%9B%BE%E7%9D%80%E8%89%B2%E9%97%AE%E9%A2%98/"/>
      <url>/2019/03/23/%E5%9B%BE%E7%9D%80%E8%89%B2%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>æ´›è°·P2819å›¾çš„mç€è‰²é—®é¢˜, POJ 1129 Channel Allocation</p><span id="more"></span><h1 id="æ¨¡æ¿é¢˜â€”æ´›è°·P2819å›¾çš„mç€è‰²é—®é¢˜"><a href="#æ¨¡æ¿é¢˜â€”æ´›è°·P2819å›¾çš„mç€è‰²é—®é¢˜" class="headerlink" title="æ¨¡æ¿é¢˜â€”æ´›è°·P2819å›¾çš„mç€è‰²é—®é¢˜"></a><a href="https://www.luogu.org/problemnew/show/P2819">æ¨¡æ¿é¢˜â€”æ´›è°·P2819å›¾çš„mç€è‰²é—®é¢˜</a></h1><p><img src="/2019/03/23/%E5%9B%BE%E7%9D%80%E8%89%B2%E9%97%AE%E9%A2%98/timu1.png" alt></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ä»£ç  C++11ï¼Œ0.77KB</span></span><br><span class="line"><span class="comment">æäº¤æ—¶é—´ 2019-04-04 15:54:31</span></span><br><span class="line"><span class="comment">è€—æ—¶/å†…å­˜</span></span><br><span class="line"><span class="comment">277ms, 888KB</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1E3</span>;</span><br><span class="line"><span class="keyword">bool</span> gra[MAXN][MAXN] = &#123;<span class="literal">false</span>&#125;; <span class="comment">//åˆ¤æ–­ä¸¤ä¸ªç‚¹æ˜¯å¦è¿é€š</span></span><br><span class="line"><span class="keyword">int</span> color[MAXN] = &#123;<span class="number">0</span>&#125;; <span class="comment">//å­˜æ¯ä¸ªç‚¹å·²ç»æ¶‚æˆçš„é¢œè‰²,å€¼ä¸º0åˆ™æ˜¯æ²¡æœ‰è¢«æ¶‚è‰²</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, k, m, e1, e2, ans = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= num; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//å½“ä¸¤ä¸ªå›¾è¿é€šä¸”é¢œè‰²ä¸€æ ·å°±å†²çª</span></span><br><span class="line">        <span class="keyword">if</span>(gra[i][num] == <span class="literal">true</span> &amp;&amp; color[i] == color[num])</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(num &gt; n) <span class="comment">//æœå®Œæ‰€æœ‰é¡¶ç‚¹</span></span><br><span class="line">    &#123;</span><br><span class="line">        ans++;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) <span class="comment">//éå†æ‰€æœ‰é¢œè‰²</span></span><br><span class="line">    &#123;</span><br><span class="line">        color[num] = i; <span class="comment">//ç»™ç¬¬numä¸ªé¡¶ç‚¹ä¸Šç¬¬iä¸ªé¢œè‰²</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">check</span>(num))</span><br><span class="line">            <span class="built_in">dfs</span>(num+<span class="number">1</span>); <span class="comment">//æ¶‚ä¸‹ä¸€ä¸ª</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            color[num] = <span class="number">0</span>; <span class="comment">//å¦‚æœå†²çª,åˆ™å›æº¯,ä¹Ÿå°±æ˜¯æ¸…é™¤æ¶‚è‰²çŠ¶æ€å›åˆ°ä¸Šä¸€ä¸ªç‚¹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;n, &amp;k, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= k; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;e1, &amp;e2);</span><br><span class="line">        gra[e1][e2] = <span class="literal">true</span>;</span><br><span class="line">        gra[e2][e1] = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">1</span>); <span class="comment">//ä»ç¬¬ä¸€ä¸ªç‚¹å¼€å§‹</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="POJ1129"><a href="#POJ1129" class="headerlink" title="POJ1129"></a><a href="http://poj.org/problem?id=1129">POJ1129</a></h1><h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p><img src="/2019/03/23/%E5%9B%BE%E7%9D%80%E8%89%B2%E9%97%AE%E9%A2%98/timu2.png" alt></p><h2 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h2><p>å‚è€ƒ:<a href="https://blog.csdn.net/lyy289065406/article/details/6647986">https://blog.csdn.net/lyy289065406/article/details/6647986</a></p><p>é¢˜æ„:</p><p>å½“ä¸€ä¸ªå¹¿æ’­ç”µå°åœ¨ä¸€ä¸ªéå¸¸å¤§çš„åœ°åŒºï¼Œå¹¿æ’­ç«™ä¼šç”¨ä¸­ç»§å™¨æ¥è½¬æ’­ä¿¡å·ä»¥ä½¿å¾—æ¯ä¸€ä¸ªæ¥æ”¶å™¨éƒ½èƒ½æ¥æ”¶åˆ°ä¸€ä¸ªå¼ºçƒˆçš„ä¿¡å·ã€‚ç„¶è€Œï¼Œæ¯ä¸ªä¸­ç»§å™¨å¿…é¡»æ…é‡é€‰æ‹©ä½¿ç”¨ï¼Œä½¿ç›¸é‚»çš„ä¸­ç»§å™¨ä¸äº’ç›¸å¹²æ‰°ã€‚å¦‚æœç›¸é‚»çš„ä¸­ç»§å™¨ä½¿ç”¨ä¸åŒçš„é¢‘é“ï¼Œé‚£ä¹ˆå°±ä¸ä¼šç›¸äº’å¹²æ‰°ã€‚</p><p>ç”±äºæ— çº¿ç”µé¢‘é“æ˜¯ä¸€æœ‰é™çš„ï¼Œä¸€ä¸ªç»™å®šçš„ç½‘ç»œæ‰€éœ€çš„ä¸­ç»§é¢‘é“æ•°ç›®åº”å‡è‡³æœ€ä½ã€‚ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œè¯»å–ä¸€ä¸ªä¸­ç»§ç½‘ç»œï¼Œç„¶åæ±‚å‡ºéœ€è¦çš„æœ€ä½çš„ä¸åŒé¢‘é“æ•°ã€‚</p><p><strong>å³ä¸€ä¸ªæœ‰Nä¸ªèŠ‚ç‚¹çš„æ— å‘å›¾ï¼Œè¦æ±‚å¯¹æ¯ä¸ªèŠ‚ç‚¹è¿›è¡ŒæŸ“è‰²ï¼Œä½¿å¾—ç›¸é‚»ä¸¤ä¸ªèŠ‚ç‚¹é¢œè‰²éƒ½ä¸åŒï¼Œé—®æœ€å°‘éœ€è¦å¤šå°‘ç§é¢œè‰²ï¼Ÿ</strong></p><h3 id="æš´åŠ›æœç´¢"><a href="#æš´åŠ›æœç´¢" class="headerlink" title="æš´åŠ›æœç´¢"></a>æš´åŠ›æœç´¢</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">2019-04-04 16:54:23</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1E3</span>;</span><br><span class="line"><span class="keyword">bool</span> gra[MAXN][MAXN] = &#123;<span class="literal">false</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> color[MAXN] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, ans = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">bool</span> Find = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(gra[i][num] == <span class="literal">true</span> &amp;&amp; color[i] == color[num])</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> num, <span class="keyword">int</span> cnt)</span> <span class="comment">//å½“å‰æœç´¢åˆ°ä¸‹æ ‡ä¸ºidçš„ç‚¹ï¼Œæ­¤æ—¶æ€»å…±ç”¨çš„é¢œè‰²æ•°ä¸ºcnt</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(Find)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(num &gt;= n)</span><br><span class="line">    &#123;</span><br><span class="line">        Find = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cnt; i++)</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        color[num] = i;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">check</span>(num))</span><br><span class="line">            <span class="built_in">dfs</span>(num+<span class="number">1</span>, cnt);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            color[num] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!Find) <span class="comment">//å½“ç”¨cntç§é¢œè‰²æ— æ³•å®Œæˆæ—¶ï¼Œåˆ™å¢åŠ ä¸€ç§é¢œè‰²è¿›è¡Œç€è‰²</span></span><br><span class="line">    &#123;</span><br><span class="line">        ans++;</span><br><span class="line">        <span class="built_in">dfs</span>(num, cnt+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> s[MAXN];</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n) != EOF &amp;&amp; n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">getchar</span>();</span><br><span class="line">        <span class="built_in">memset</span>(gra, <span class="literal">false</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(gra));</span><br><span class="line">        <span class="built_in">memset</span>(color, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(color));</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, s);</span><br><span class="line">            <span class="keyword">int</span> e1 = s[<span class="number">0</span>]-<span class="string">&#x27;A&#x27;</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">2</span>; s[j] != <span class="string">&#x27;\0&#x27;</span>; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">int</span> e2 = s[j]-<span class="string">&#x27;A&#x27;</span>;</span><br><span class="line">                gra[e1][e2] = gra[e2][e1] = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ans = <span class="number">1</span>;</span><br><span class="line">        Find = <span class="literal">false</span>;</span><br><span class="line">        <span class="built_in">dfs</span>(<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (ans == <span class="number">1</span>)</span><br><span class="line">            <span class="built_in">printf</span> (<span class="string">&quot;1 channel needed.\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span> (<span class="string">&quot;%d channels needed.\n&quot;</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å››è‰²å®šç†å‰ªæ"><a href="#å››è‰²å®šç†å‰ªæ" class="headerlink" title="å››è‰²å®šç†å‰ªæ"></a>å››è‰²å®šç†å‰ªæ</h3><p><strong>å››è‰²é—®é¢˜</strong>çš„å†…å®¹æ˜¯:ä»»ä½•ä¸€å¼ åœ°å›¾åªç”¨å››ç§é¢œè‰²å°±èƒ½ä½¿å…·æœ‰å…±åŒè¾¹ç•Œçš„å›½å®¶ç€ä¸Šä¸åŒçš„é¢œè‰²ã€‚â€ä¹Ÿå°±æ˜¯è¯´åœ¨ä¸å¼•èµ·æ··æ·†çš„æƒ…å†µä¸‹ä¸€å¼ åœ°å›¾åªéœ€å››ç§é¢œè‰²æ¥æ ‡è®°å°±è¡Œã€‚</p><p><img src="/2019/03/23/%E5%9B%BE%E7%9D%80%E8%89%B2%E9%97%AE%E9%A2%98/sise.jpeg" alt></p><p><strong>å››è‰²å®šç†çš„â€œç›¸é‚»â€æ˜¯æŒ‡ä¸¤å—å¤šè¾¹å½¢åœ°åŒºâ€œè‡³å°‘ä¸€æ¡è¾¹é‡åˆâ€æ‰ä¸ºä¹‹ç›¸é‚»</strong></p><p><strong>â€œè‡³å°‘ä¸€æ¡è¾¹é‡åˆâ€åŒæ—¶ä¹Ÿéšå«äº†â€œä»»æ„è¾¹ï¼ˆçº¿æ®µï¼‰ä¸æ­£è§„ç›¸äº¤</strong></p><p>æœ¬é¢˜çš„ç›¸é‚»æ˜¯â€œä¸¤ç‚¹æœ‰è¾¹è¿æ¥ï¼Œä½†ä»»æ„ä¸¤è¾¹ä¸äº¤å‰ï¼ˆæ­£è§„ç›¸äº¤ï¼‰â€ï¼Œè¿™ç§â€œç›¸é‚»â€å…¶å®å°±æ˜¯å››è‰²å®šç†çš„â€œç›¸é‚»â€ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1E3</span>;</span><br><span class="line"><span class="keyword">bool</span> gra[MAXN][MAXN] = &#123;<span class="literal">false</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> color[MAXN] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, ans = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">bool</span> Find = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(gra[i][num] == <span class="literal">true</span> &amp;&amp; color[i] == color[num])</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> num, <span class="keyword">int</span> cnt)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(Find)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(num &gt;= n)</span><br><span class="line">    &#123;</span><br><span class="line">        Find = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cnt; i++)</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        color[num] = i;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">check</span>(num))</span><br><span class="line">            <span class="built_in">dfs</span>(num+<span class="number">1</span>, cnt);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            color[num] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!Find)</span><br><span class="line">    &#123;</span><br><span class="line">        ans++;</span><br><span class="line">        <span class="keyword">if</span>(cnt+<span class="number">1</span> == <span class="number">4</span>) <span class="comment">//å››è‰²å®šç†</span></span><br><span class="line">        &#123;</span><br><span class="line">            ans = <span class="number">4</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">dfs</span>(num, cnt+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> s[MAXN];</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n) != EOF &amp;&amp; n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">getchar</span>();</span><br><span class="line">        <span class="built_in">memset</span>(gra, <span class="literal">false</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(gra));</span><br><span class="line">        <span class="built_in">memset</span>(color, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(color));</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, s);</span><br><span class="line">            <span class="keyword">int</span> e1 = s[<span class="number">0</span>]-<span class="string">&#x27;A&#x27;</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">2</span>; s[j] != <span class="string">&#x27;\0&#x27;</span>; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">int</span> e2 = s[j]-<span class="string">&#x27;A&#x27;</span>;</span><br><span class="line">                gra[e1][e2] = gra[e2][e1] = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ans = <span class="number">1</span>;</span><br><span class="line">        Find = <span class="literal">false</span>;</span><br><span class="line">        <span class="built_in">dfs</span>(<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (ans == <span class="number">1</span>)</span><br><span class="line">            <span class="built_in">printf</span> (<span class="string">&quot;1 channel needed.\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span> (<span class="string">&quot;%d channels needed.\n&quot;</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="è“æ¡¥æ¯å†å±Šè¯•é¢˜åˆ†è€ƒåœº"><a href="#è“æ¡¥æ¯å†å±Šè¯•é¢˜åˆ†è€ƒåœº" class="headerlink" title="è“æ¡¥æ¯å†å±Šè¯•é¢˜åˆ†è€ƒåœº"></a><a href="http://lx.lanqiao.cn/problem.page?gpid=T457">è“æ¡¥æ¯å†å±Šè¯•é¢˜åˆ†è€ƒåœº</a></h1><h2 id="é¢˜ç›®-1"><a href="#é¢˜ç›®-1" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p><img src="/2019/03/23/%E5%9B%BE%E7%9D%80%E8%89%B2%E9%97%AE%E9%A2%98/timu3.png" alt></p><h2 id="è§£æ-1"><a href="#è§£æ-1" class="headerlink" title="è§£æ"></a>è§£æ</h2><p>æ­¤é¢˜æ˜¯ä¸€é“ç»å…¸çš„å›¾çš„æŸ“è‰²é—®é¢˜ï¼Œç­‰åŒäºï¼šå¯¹å›¾ç»è¡ŒæŸ“è‰²ï¼Œä¸”ç›¸é‚»çš„é¡¶ç‚¹ä¸èƒ½æŸ“åŒæ ·çš„é¢œè‰²ï¼Œé—®è‡³å°‘éœ€è¦å¤šå°‘ç§ä¸åŒçš„é¢œè‰²<br>å‚è€ƒ:<a href="https://www.cnblogs.com/looeyWei/p/10439834.html">https://www.cnblogs.com/looeyWei/p/10439834.html</a><br><a href="https://blog.csdn.net/memeda1141/article/details/80301201">https://blog.csdn.net/memeda1141/article/details/80301201</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1E3</span>;</span><br><span class="line"><span class="keyword">bool</span> gra[MAXN][MAXN] = &#123;<span class="literal">false</span>&#125;; <span class="comment">//gra[i][j]=1è¡¨ç¤ºiå’Œjè®¤è¯†ï¼Œå¦åˆ™ä¸è®¤è¯†</span></span><br><span class="line"><span class="keyword">int</span> room[MAXN][MAXN] = &#123;<span class="number">0</span>&#125;; <span class="comment">//room[i][j]=x è¡¨ç¤ºç¬¬iä¸ªæˆ¿é—´ç¬¬jä¸ªäººæ˜¯ç¼–å·ä¸ºxçš„å­¦ç”Ÿ</span></span><br><span class="line"><span class="keyword">int</span> room_num[MAXN] = &#123;<span class="number">0</span>&#125;;   <span class="comment">//room_num[i]=k  è¡¨ç¤ºç¬¬iä¸ªæˆ¿é—´æœ‰kä¸ªäºº</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, e1, e2, ans = <span class="number">1e9</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> num, <span class="keyword">int</span> cnt)</span> <span class="comment">//numè¡¨ç¤ºå½“å‰å­¦ç”Ÿçš„ç¼–å·ï¼Œcntè¡¨ç¤ºç”¨æ‰æˆ¿é—´çš„æ•°é‡</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(cnt &gt;= ans) <span class="comment">//å¦‚æœå½“å‰ç”¨æ‰æˆ¿é—´çš„æ•°é‡å¤§äºå†å²ç”¨æ‰çš„æœ€å°æ•°é‡ï¼Œè¿”å›</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(num &gt; n) <span class="comment">//å¦‚æœå­¦ç”Ÿå·²ç»å®‰æ’å®Œäº†ï¼Œå–æœ€ä¼˜å€¼ï¼Œå¹¶è¿”å› </span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(ans &gt; cnt)</span><br><span class="line">            ans = cnt;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cnt; i++) <span class="comment">//éå†æ‰€æœ‰æˆ¿é—´</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> len = room_num[i]; <span class="comment">//ç¬¬iä¸ªæˆ¿é—´çš„æœ‰å¤šå°‘äºº</span></span><br><span class="line">        <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= len; j++) <span class="comment">//éå†å½“å‰æˆ¿é—´çš„æ‰€æœ‰å­¦ç”Ÿ</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(!gra[num][room[i][j]]) <span class="comment">//å¦‚æœå­¦ç”Ÿnumä¸å­¦ç”Ÿroom[i][j]æ²¡æœ‰å…³è”ï¼Œk++;</span></span><br><span class="line">                k++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(k == len)  <span class="comment">//å¦‚æœnumä¸å½“å‰æˆ¿é—´æ‰€æœ‰çš„äººéƒ½æ²¡æœ‰å…³è”</span></span><br><span class="line">        &#123;</span><br><span class="line">            room[i][++room_num[i]] = num; <span class="comment">//é‚£ä¹ˆå°±æŠŠnumæ”¾è¿›è¿™ä¸ªæˆ¿é—´é‡Œ</span></span><br><span class="line">            <span class="built_in">dfs</span>(num+<span class="number">1</span>, cnt); <span class="comment">//å½“å‰å­¦ç”Ÿå·²ç»è¢«å®‰æ’ï¼Œdfså®‰æ’ä¸‹ä¸€ä¸ªå­¦ç”Ÿ</span></span><br><span class="line">            room_num[i]--; <span class="comment">//é€’å½’è¿”å›ä¹‹åæŠŠè¿™ä¸ªåŒå­¦åœ¨ä»è¿™ä¸ªæ•™å®¤åˆ†èµ°ï¼Œåˆ†åˆ°ä¸‹å‡ ä¸ªæ•™å®¤çœ‹çœ‹</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¦‚æœå…¨éƒ¨æ•™å®¤éƒ½å­˜åœ¨numè®¤è¯†çš„åŒå­¦ï¼Œé‚£ä¹ˆå°±æŠŠè¿™ä¸ªåŒå­¦æ–°å¼€ä¸ªæ•™å®¤</span></span><br><span class="line">    room[cnt+<span class="number">1</span>][++room_num[cnt+<span class="number">1</span>]] = num; </span><br><span class="line">    <span class="built_in">dfs</span>(num+<span class="number">1</span>, cnt+<span class="number">1</span>); <span class="comment">//é€’å½’ä¸‹ä¸€ä¸ªåŒå­¦å¹¶ä¸”å½“å‰çš„æ•™å®¤æ•°ç›®+1</span></span><br><span class="line">    room_num[cnt+<span class="number">1</span>]--; <span class="comment">//è¿”å›åç§»é™¤è¿™ä¸ªåŒå­¦çœ‹ä¸‹ä¸Šä¸€ä¸ªåŒå­¦æœ‰æ²¡æœ‰å…¶ä»–çš„é€‰æ‹©</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;e1, &amp;e2);</span><br><span class="line">        gra[e1][e2] = gra[e2][e1] = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾è®º </tag>
            
            <tag> å››è‰²å®šç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>L2-016-dfs</title>
      <link href="/2019/03/17/L2-016-dfs/"/>
      <url>/2019/03/17/L2-016-dfs/</url>
      
        <content type="html"><![CDATA[<p>L2-016 æ„¿å¤©ä¸‹æœ‰æƒ…äººéƒ½æ˜¯å¤±æ•£å¤šå¹´çš„å…„å¦¹</p><span id="more"></span><h1 id="L2-016-æ„¿å¤©ä¸‹æœ‰æƒ…äººéƒ½æ˜¯å¤±æ•£å¤šå¹´çš„å…„å¦¹"><a href="#L2-016-æ„¿å¤©ä¸‹æœ‰æƒ…äººéƒ½æ˜¯å¤±æ•£å¤šå¹´çš„å…„å¦¹" class="headerlink" title="L2-016 æ„¿å¤©ä¸‹æœ‰æƒ…äººéƒ½æ˜¯å¤±æ•£å¤šå¹´çš„å…„å¦¹"></a><a href="https://pintia.cn/problem-sets/994805046380707840/problems/994805061769609216">L2-016 æ„¿å¤©ä¸‹æœ‰æƒ…äººéƒ½æ˜¯å¤±æ•£å¤šå¹´çš„å…„å¦¹</a></h1><p><img src="/2019/03/17/L2-016-dfs/timu.png" alt></p><h1 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h1><p>æ‰¾åˆ°å¹¶æ ‡è®°ä¸¤äººçš„5ä»£ä»¥å†…ç¥–å…ˆï¼Œå¦‚æœå‘ç°å·²æ ‡è®°è¿‡çš„ç¥–å…ˆï¼Œå°±è¯´æ˜ä¸¤äººæœ‰å…±åŒç¥–å…ˆ</p><h2 id="å­˜å‚¨å’ŒæŸ¥æ‰¾"><a href="#å­˜å‚¨å’ŒæŸ¥æ‰¾" class="headerlink" title="å­˜å‚¨å’ŒæŸ¥æ‰¾"></a>å­˜å‚¨å’ŒæŸ¥æ‰¾</h2><p>è¾“å…¥çš„æ•°æ®åŒ…å«ä¸€ä¸ªäººçš„IDã€æ€§åˆ«å’Œçˆ¶æ¯çš„IDï¼Œä¸ºäº†æ–¹ä¾¿å¯ä»¥å°±ç”¨ä¸€ä¸ªç»“æ„ä½“æ¥å­˜å‚¨æ•°æ®ï¼Œå£°æ˜ä¸€ä¸ªç»“æ„ä½“æ•°ç»„ï¼Œ</p><p>å…¶æ•°ç»„ä¸‹æ ‡ä»£è¡¨è¿™ä¸ªäººçš„idï¼Œç»“æ„ä½“å±æ€§æœ‰çˆ¶æ¯idã€‚å¦å¤–å¼€è¾Ÿä¸€ä¸ªæ•°ç»„ç©ºé—´æ¥ä¿å­˜æ€§åˆ«ï¼Œä¸€ä¸ªæ•°ç»„ç©ºé—´ä¿å­˜æ ‡è®°ä¿¡æ¯ã€‚</p><h2 id="å‘ç‚¹"><a href="#å‘ç‚¹" class="headerlink" title="å‘ç‚¹"></a>å‘ç‚¹</h2><p><strong>æµ‹è¯•æ•°æ®é‡Œé¢å¯èƒ½ä¼šåˆ¤æ–­æŸä¸ªäººçš„çˆ¶äº²ï¼Œæˆ–è€…æ¯äº²å’ŒæŸä¸ªäººæ˜¯å¦èƒ½ç»“å©šï¼Œæ‰€ä»¥ä¹Ÿè¦æ ‡è®°çˆ¶æ¯çš„æ€§åˆ«</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">100005</span>;</span><br><span class="line"><span class="comment">//sex[i]:ç¼–å·ä¸ºiçš„äººçš„æ€§åˆ«ï¼Œvis[i]ï¼šç¼–å·ä¸ºiçš„äººæ˜¯å¦å·²ç»æ ‡è®°ï¼Œflagï¼šåˆ¤æ–­ä¸¤äººæ˜¯å¦å¯è¡Œ</span></span><br><span class="line"><span class="keyword">int</span> sex[MAXN], vis[MAXN], flag;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="comment">//fa:çˆ¶äº²idï¼Œmaï¼šæ¯äº²idï¼Œåˆå§‹åŒ–ä¸º-1</span></span><br><span class="line">    <span class="keyword">int</span> fa = <span class="number">-1</span>, ma = <span class="number">-1</span>;</span><br><span class="line">&#125;stru[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//è¶…è¿‡äº”ä»£ï¼Œæˆ–è€…çˆ¶æ¯ä¸å¯è€ƒ</span></span><br><span class="line">    <span class="keyword">if</span>(num &gt; <span class="number">4</span> || n == <span class="number">-1</span>) </span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="comment">//å¦‚æœå·²ç»è¢«æ ‡è®°è¿‡ï¼Œè¯´æ˜æœ‰åœ¨äº”ä»£å†…æœ‰å…±åŒäº²å±ï¼Œåˆ™ä¸èƒ½ç»“å©š</span></span><br><span class="line">    <span class="keyword">if</span>(vis[n])</span><br><span class="line">    &#123;</span><br><span class="line">        flag = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    vis[n] = <span class="number">1</span>;</span><br><span class="line">   <span class="comment">//è¿›è¡ŒdfsæŸ¥æ‰¾äº”ä»£å†…çš„ä¿¡æ¯</span></span><br><span class="line">    <span class="built_in">dfs</span>(stru[n].fa, num+<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">dfs</span>(stru[n].ma, num+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> t;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;t);</span><br><span class="line">    <span class="keyword">int</span> id, fa, ma;</span><br><span class="line">    <span class="keyword">char</span> se;</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %c %d %d&quot;</span>, &amp;id, &amp;se, &amp;fa, &amp;ma);</span><br><span class="line">        sex[id] = (<span class="keyword">int</span>)se;</span><br><span class="line">        stru[id].fa = fa;</span><br><span class="line">        stru[id].ma = ma;</span><br><span class="line">        sex[fa] = (<span class="keyword">int</span>)<span class="string">&#x27;M&#x27;</span>;</span><br><span class="line">sex[ma] = (<span class="keyword">int</span>)<span class="string">&#x27;F&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">int</span> m, id1, id2;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;m);</span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;id1, &amp;id2);</span><br><span class="line">        <span class="keyword">if</span>(sex[id1] == sex[id2])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;Never Mind\n&quot;</span>);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">        flag = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">dfs</span>(id1, <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">dfs</span>(id2, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span>(flag)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;No\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;Yes\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å…³äºDFS"><a href="#å…³äºDFS" class="headerlink" title="å…³äºDFS"></a>å…³äºDFS</h2><p><strong>dfsä¼šä¸€ç›´éå†çˆ¶èŠ‚ç‚¹ï¼Œç›´åˆ°é‡åˆ°çˆ¶èŠ‚ç‚¹çš„å€¼ä¸º-1æˆ–è€…å·²ç»è¶…è¿‡äº”ä»£ï¼Œè¿™æ—¶å€™ä¼šå›æº¯å›å»éå†æ¯äº²èŠ‚ç‚¹ã€‚</strong></p><p><img src="/2019/03/17/L2-016-dfs/dfs1.png" alt></p><p><strong>æ­¤æ—¶ï¼Œreturnåï¼Œä¼šå›æº¯åˆ°19è¿™ä¸ªèŠ‚ç‚¹ï¼Œæ¥ç€è®¿é—®19çš„æ¯äº²èŠ‚ç‚¹</strong></p><p><img src="/2019/03/17/L2-016-dfs/dfs2.png" alt></p><p><strong>æ¥ç€å¦‚æ­¤å¾ªç¯ï¼Œç›´åˆ°é‡åˆ°ç»“æŸæ¡ä»¶</strong></p><p><img src="/2019/03/17/L2-016-dfs/dfs3.png" alt></p><p><strong>â€¦</strong></p><hr><p><strong>éå†å®Œç¬¬ä¸€ä¸ªäººçš„å…³ç³»å›¾åï¼Œæˆ‘ä»¬å†éå†ç¬¬äºŒä¸ªäººçš„ï¼Œå¦‚æœåœ¨éå†ç¬¬äºŒä¸ªäººçš„å…³ç³»å›¾æ—¶å‘ç°åœ¨éå†ç¬¬ä¸€ä¸ªäººçš„æ—¶å€™å·²ç»æ ‡è®°è¿‡äº†è€Œä¸”æ²¡æœ‰è¶…è¿‡äº”ä»£ï¼Œè¿™æ—¶å€™å°±å¯ä»¥åˆ¤æ–­ä¸èƒ½ç»“å©šï¼Œå¦åˆ™å¯ä»¥ç»“å©š</strong></p>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> dfs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>FZU-1649-PrimeNumberOrNot-å¤§ç´ æ•°åˆ¤æ–­</title>
      <link href="/2019/03/16/FZU-1649-PrimeNumberOrNot-%E5%A4%A7%E7%B4%A0%E6%95%B0%E5%88%A4%E6%96%AD/"/>
      <url>/2019/03/16/FZU-1649-PrimeNumberOrNot-%E5%A4%A7%E7%B4%A0%E6%95%B0%E5%88%A4%E6%96%AD/</url>
      
        <content type="html"><![CDATA[<p>FZU-1649-PrimeNumberOrNot-å¤§ç´ æ•°åˆ¤æ–­<br><span id="more"></span></p><h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><h2 id="FZU-1649"><a href="#FZU-1649" class="headerlink" title="FZU-1649"></a><a href="http://acm.fzu.edu.cn/problem.php?pid=1649">FZU-1649</a></h2><p><img src="/2019/03/16/FZU-1649-PrimeNumberOrNot-%E5%A4%A7%E7%B4%A0%E6%95%B0%E5%88%A4%E6%96%AD/timu.png" alt></p><h1 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h1><p>æ™®é€šç´ æ•°ç­›æ³•ä¸èƒ½ç”¨äºå¤§æ•°ã€‚æ­¤æ—¶åªèƒ½ç”¨åˆ«çš„ç®—æ³•â€”â€”ç±³å‹’-æ‹‰å®¾ç´ æ•°æµ‹è¯•</p><p>æˆ‘ä»¬çŸ¥é“å¯¹äºæŸä¸ªç´ æ•°P,ç”±è´¹é©¬å®šç†å¾—</p><script type="math/tex; mode=display">a^p \ mod \ p \equiv a</script><p>äºæ˜¯å°±æœ‰äº†å¸Œæœ›ä½¿ç”¨è¿™ä¸ªæ¥åˆ¤æ–­æŸä¸ªpæ˜¯å¦æ˜¯ç´ æ•°</p><hr><p><strong>ä½†$a^p \ mod \ p \equiv a$ä¸æ˜¯<code>pæ˜¯ç´ æ•°</code>çš„å……åˆ†æ¡ä»¶</strong></p><p><strong><em>å­˜åœ¨æœ‰åä½†æ˜¯æç«¯ç¨€å°‘çš„Carmichaelæ•°ï¼Œå®ƒä»¬ä¸æ˜¯ç´ æ•°ä½†æ˜¯æ»¡è¶³è´¹é©¬å°å®šç†ï¼Œæ¯”å¦‚561, 1105, 1729, 2465, 2821,6601, 8911, 10585, 15841, 29341â€¦ã€‚</em></strong></p><p>æ‰€ä»¥å¦‚æœæˆ‘ä»¬åªæ˜¯éšæœºçš„ä»<code>1</code>å’Œ<code>p-1</code>ä¹‹é—´ï¼ˆè¿™é‡Œpæ˜¯ä¸€ä¸ªå¾…åˆ¤æ–­çš„æ­£æ•´æ•°ï¼‰å–ä¸€ä¸ªæ•°aè®¡ç®—$a^p \ mod \ p \equiv a$çš„å€¼ï¼Œå¦‚æœè¯¥å€¼ä¸æ˜¯aï¼Œé‚£ä¹ˆæˆ‘ä»¬100%è‚¯å®špä¸æ˜¯ç´ æ•°ã€‚ä½†<strong>å¦‚æœ$a^p \ mod \ p \equiv a$çš„å€¼æ˜¯aï¼Œpå¯èƒ½æ˜¯ç´ æ•°ä¹Ÿå¯èƒ½ä¸æ˜¯ã€‚</strong></p><hr><p>è´¹é©¬å°å®šç†çš„ä¸€ä¸ªç‰¹æ®Šæƒ…å†µï¼Œå¦‚æœnæ˜¯ä¸€ä¸ªç´ æ•°ï¼Œé‚£ä¹ˆ<code>phi(n)=n-1</code>ï¼Œè€Œä»»æ„ä¸å¤§äºnçš„æ•°aéƒ½ä¸näº’è´¨ï¼Œäºæ˜¯è´¹é©¬å°å®šç†çš„æ¨è®ºä¸ºï¼š</p><script type="math/tex; mode=display">a^{n-1}=1\ mod\ n\ (å½“nä¸ºç´ æ•°ï¼Œè€Œaä¸ºä»»æ„æ•´æ•°æ—¶)</script><p>å³ä¸€ä¸ªæ•°å­—nä¸ºç´ æ•°çš„å¿…è¦æ¡ä»¶æ˜¯å¯¹äºä»»æ„<code>a&lt;n</code>ï¼Œéƒ½æœ‰$a^{n-1}\ mod\ n = 1$</p><hr><p>ä½†æ˜¯è¿™æ˜¯å¿…è¦æ¡ä»¶ï¼Œæ ¹æ®è®¡ç®—ï¼Œå¦‚æœnä¸ºä»»æ„æ•°å­—ï¼Œå•ç‹¬ä»»å–ä¸€ä¸ª<code>a&lt;n</code>ï¼Œå½“$a^{n-1}\ mod\ n = 1$æˆç«‹æ—¶ï¼Œ<strong>æœ‰<code>25%</code>å¯èƒ½æ€§nä¸ºåˆæ•°</strong></p><p><strong>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡å¤šæ¬¡éšæœºé€‰æ‹©ä¸åŒçš„aï¼Œå¦‚æœä¸Šé¢æµ‹è¯•éƒ½è¢«é€šè¿‡ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¯´næœ‰å¾ˆå¤§çš„å¯èƒ½æ˜¯ç´ æ•°ã€‚è¿™ç§ç®—æ³•<code>`æ˜¯ç±³å‹’-æ‹‰å®¾ç´ æ•°æµ‹è¯•</code>ã€‚</strong></p><hr><p>æ³¨æ„:</p><p>åœ¨è®¡ç®—$a^{n-1}\ mod\ n$çš„æ—¶å€™ï¼Œnå¯èƒ½å¾ˆå¤§ï¼Œæ‰€ä»¥$a^{n-1}$å¯èƒ½è¶Šç•Œï¼Œå°±éœ€è¦ç”¨å¿«é€Ÿå¹‚å–æ¨¡ï¼Œä½†aå¾ˆå¤§çš„æ—¶å€™<code>a*a</code>ä¹Ÿå¯èƒ½è¶Šç•Œï¼Œå°±éœ€è¦ç”¨å¿«é€Ÿä¹˜æ³•ï¼ˆåŸºäºå¿«é€Ÿå¹‚ï¼‰</p><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/qq_40889820/article/details/82145736"><a href="https://blog.csdn.net/qq_40889820/article/details/82145736">https://blog.csdn.net/qq_40889820/article/details/82145736</a></a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1046ms</span></span><br><span class="line"><span class="comment">2019-03-16 16:46:15</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> random(a, b) (rand()%(b-a+1)+a)  <span class="comment">//å–å¾—åœ¨[a,b]é—´çš„éšæœºæ•°</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">double</span> ld;</span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">mul</span><span class="params">(ll a, ll b, ll MOD)</span> <span class="comment">//å¿«é€Ÿä¹˜æ³•</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (a * b - (ll)((ld)a / MOD * b) * MOD + MOD) % MOD;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">mod_pow</span><span class="params">(ll x, ll n, ll mod)</span><span class="comment">//å¿«é€Ÿå¹‚</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll ans = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(n &gt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(n &amp; <span class="number">1</span>)</span><br><span class="line">            ans = <span class="built_in">mul</span>(ans, x, mod);</span><br><span class="line">        x = <span class="built_in">mul</span>(x, x, mod);</span><br><span class="line">        n &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">is_prime</span><span class="params">(ll n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n == <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(n % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">srand</span>((<span class="keyword">unsigned</span>)<span class="built_in">time</span>(<span class="literal">NULL</span>));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">1000</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        ll a = <span class="built_in">random</span>(<span class="number">1</span>, n<span class="number">-1</span>); <span class="comment">//å–å¾—åœ¨[1,n-1]çš„éšæœºæ•°</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">mod_pow</span>(a, n<span class="number">-1</span>, n) != <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">ll num;</span><br><span class="line">ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">cin.<span class="built_in">tie</span>(<span class="number">0</span>);cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">while</span>(cin&gt;&gt;num)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">is_prime</span>(num))</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;It is a prime number.&quot;</span>&lt;&lt;endl;</span><br><span class="line"><span class="keyword">else</span> cout&lt;&lt;<span class="string">&quot;It is not a prime number.&quot;</span>&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°å­¦çŸ¥è¯† </tag>
            
            <tag> ç±³å‹’-æ‹‰å®¾ç´ æ•°æµ‹è¯• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CodeForces-236B-æ±‚å› å­ä¸ªæ•°</title>
      <link href="/2019/03/15/CodeForces-236B-%E6%B1%82%E5%9B%A0%E5%AD%90%E4%B8%AA%E6%95%B0/"/>
      <url>/2019/03/15/CodeForces-236B-%E6%B1%82%E5%9B%A0%E5%AD%90%E4%B8%AA%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>CodeForces-236B-æ±‚å› å­ä¸ªæ•°<br><span id="more"></span></p><h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><h2 id="CodeForces-236B"><a href="#CodeForces-236B" class="headerlink" title="CodeForces-236B"></a><a href="http://codeforces.com/problemset/problem/236/B">CodeForces-236B</a></h2><p><img src="/2019/03/15/CodeForces-236B-%E6%B1%82%E5%9B%A0%E5%AD%90%E4%B8%AA%E6%95%B0/timu.jpg" alt></p><h2 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h2><p>å…ˆç®—å‡º<code>q=i*j*k</code>ï¼Œç„¶åç®—qçš„å› å­çš„ä¸ªæ•°ï¼Œæœ€åæŠŠè¿™ä¸ªå› å­å’ŒåŠ èµ·æ¥<code>mod</code>ä¸Šä¸€ä¸ªæ•°</p><p>è®°å½•ä¸‹æ±‚è§£å› å­ä¸ªæ•°çš„åŠæ³•</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">2019-03-15 15:00:35</span></span><br><span class="line"><span class="comment">92ms</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e6</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MOD = <span class="number">1073741824</span>;</span><br><span class="line"><span class="keyword">int</span> arr[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">arr[<span class="number">1</span>] = <span class="number">1</span>; </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; MAXN; i++) <span class="comment">//åˆå§‹åŒ–ï¼Œæ¯ä¸€ä¸ªæ•°æœ€å°‘æœ‰ä¸¤ä¸ªå› å­ï¼Œï¼‘å’Œå®ƒæœ¬èº«</span></span><br><span class="line">arr[i] = <span class="number">2</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//i*jå¾—åˆ°ä¸€ä¸ªæ•°ï¼Œä»£è¡¨è¿™ä¸ªæ•°æœ‰å› iå’Œjï¼Œå¦‚æœi,jç›¸ç­‰,å› å­ä¸ªæ•°+1,å¦åˆ™+2</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i*i &lt; MAXN; i++)ã€€</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j = i; j*i &lt; MAXN; j++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(i != j)</span><br><span class="line">arr[i*j] += <span class="number">2</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">arr[i*j] += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> a, b, c;</span><br><span class="line"><span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">init</span>();</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= a;i++)</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= b; j++)</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= c; k++)</span><br><span class="line">&#123;</span><br><span class="line">ans += arr[i*j*k];</span><br><span class="line"><span class="keyword">if</span>(ans &gt; MOD)</span><br><span class="line">ans %= MOD;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ans); </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ€ç»´é¢˜ç›® </tag>
            
            <tag> å› å­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PTA-L2-025-åˆ†è€Œæ²»ä¹‹-vector-æ€ç»´</title>
      <link href="/2019/03/06/PTA-L2-025-%E5%88%86%E8%80%8C%E6%B2%BB%E4%B9%8B-vector-%E6%80%9D%E7%BB%B4/"/>
      <url>/2019/03/06/PTA-L2-025-%E5%88%86%E8%80%8C%E6%B2%BB%E4%B9%8B-vector-%E6%80%9D%E7%BB%B4/</url>
      
        <content type="html"><![CDATA[<p>L2-025-åˆ†è€Œæ²»ä¹‹<br><span id="more"></span></p><h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><p>é“¾æ¥ï¼š<a href="https://pintia.cn/problem-sets/994805046380707840/problems/994805056195379200">L2-025</a></p><p><img src="/2019/03/06/PTA-L2-025-%E5%88%86%E8%80%8C%E6%B2%BB%E4%B9%8B-vector-%E6%80%9D%E7%BB%B4/timu.jpg" alt></p><h1 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h1><p><strong>å›¾é—®é¢˜ï¼ï¼</strong></p><p>åˆšå¼€å§‹æ˜¯æƒ³å­˜å‚¨åœ¨vectoré‡Œé¢ï¼Œç„¶åå¦‚æœæ‘§æ¯içš„è¯ï¼Œå°±æŠŠå¯¹åº”çš„<code>vector&lt;i&gt;</code>æ¸…ç©ºï¼Œè¿˜æœ‰æŸ¥è¯¢åˆ«çš„vectorï¼Œå¦‚æœæœ‰içš„è¯ï¼Œåˆ™å»æ‰ï¼Œç„¶åæäº¤äº†ä¸€å‘ï¼Œè¿‡äº†ä¸¤ä¸ªtestï¼ŒTLEäº†ä¸¤ä¸ªï¼ˆå¾ˆæ˜æ˜¾æš´åŠ›è¶…æ—¶ï¼Œè€Œä¸”æš´åŠ›ä¸å¯¹ï¼‰</p><p>é™„ä¸ŠTLEä»£ç </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">2019/3/6 20:42:45</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> vis[<span class="number">11000</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> n, m, e1, e2;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    vector&lt; vector&lt;<span class="keyword">int</span>&gt; &gt;<span class="built_in">v</span>(n+<span class="number">10</span>);</span><br><span class="line">    v.<span class="built_in">reserve</span>(m+<span class="number">10</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; e1 &gt;&gt; e2;</span><br><span class="line">        v[e1].<span class="built_in">push_back</span>(e2);</span><br><span class="line">        v[e2].<span class="built_in">push_back</span>(e1);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> num, in1, in2;</span><br><span class="line">    cin &gt;&gt; num;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        vector&lt; vector&lt;<span class="keyword">int</span>&gt; &gt; <span class="built_in">vec</span>(v);</span><br><span class="line">        <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">        cin &gt;&gt; in1;</span><br><span class="line">        <span class="keyword">while</span>(in1--)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; in2;</span><br><span class="line">            vis[in2] = <span class="number">1</span>;</span><br><span class="line">            vec[in2].<span class="built_in">clear</span>();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                vector&lt;<span class="keyword">int</span>&gt;::iterator findInput = <span class="built_in">find</span>(vec[j].<span class="built_in">begin</span>(), vec[j].<span class="built_in">end</span>(), in2);</span><br><span class="line">                <span class="keyword">if</span>(findInput != vec[j].<span class="built_in">end</span>())</span><br><span class="line">                    vec[j].<span class="built_in">erase</span>(findInput);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> j;</span><br><span class="line">        <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(!vis[j])</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; n; k++)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span>(<span class="built_in">find</span>(vec[j].<span class="built_in">begin</span>(), vec[j].<span class="built_in">end</span>(), j) != vec[j].<span class="built_in">end</span>())</span><br><span class="line">                    &#123;</span><br><span class="line">                        flag = <span class="literal">true</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(!vec[j].<span class="built_in">empty</span>())</span><br><span class="line">                    flag = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">if</span>(flag)</span><br><span class="line">               &#123;</span><br><span class="line">                   cout &lt;&lt; <span class="string">&quot;NO&quot;</span> &lt;&lt; endl;</span><br><span class="line">                   <span class="keyword">break</span>;</span><br><span class="line">               &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(j == n)</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;YES&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¸Šé¢ä»£ç é—®é¢˜åœ¨äºæŸ¥æ‰¾å’Œåˆ é™¤è¿™ä¸ªè¿‡ç¨‹ï¼Œå…¶å®å®Œå…¨æ²¡æœ‰å¿…è¦è¿™ç§åš</strong></p><p>å› ä¸ºæ˜¯æ‘§æ¯ï¼Œæ‰€ä»¥ä¸€æ¡è·¯æ‘§æ¯ä¸€ä¸ªåŸå¸‚å°±å¯ä»¥æŠŠè¿™æ¡è·¯ç»™æ¯äº†ï¼Œ<strong>æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦åˆ¤æ–­æ‰€æœ‰çš„å­¤ç«‹çš„åŸå¸‚æ˜¯å¦å“¦æ»¡è¶³æ¡ä»¶å³å¯ï¼Œå­¤ç«‹çš„åŸå¸‚ = æ²¡è¢«æ‘§æ¯ä¸”æ²¡æœ‰è¿æ¥åˆ°åˆ«çš„åŸå¸‚</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">2019/3/6 21:07:37</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> vis[<span class="number">11000</span>];  <span class="comment">//vis[i]:ä»£è¡¨ç¬¬iåº§åŸå¸‚æ˜¯å¦è¢«æ‘§æ¯</span></span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; v[<span class="number">11000</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">fun</span><span class="params">(<span class="keyword">int</span> n)</span> <span class="comment">//æŸ¥è¯¢æ‰€æœ‰å­¤ç«‹çš„ç‚¹æ˜¯å¦æ»¡è¶³æ¡ä»¶</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; v[i].<span class="built_in">size</span>(); j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//å­¤ç«‹çš„åŸå¸‚ = æ²¡è¢«æ‘§æ¯ä¸”æ²¡æœ‰è¿æ¥åˆ°åˆ«çš„åŸå¸‚</span></span><br><span class="line">            <span class="comment">//v[i][j]ä»£è¡¨ä¸€ä¸ªåŸå¸‚ï¼Œv[i][j]ä»£è¡¨iè¿é€šçš„æŸä¸ªåŸå¸‚çš„å€¼</span></span><br><span class="line">            <span class="keyword">if</span>(!vis[i] &amp;&amp; vis[v[i][j]] == <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> n, m, e1, e2;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; e1 &gt;&gt; e2;</span><br><span class="line">        v[e1].<span class="built_in">push_back</span>(e2);</span><br><span class="line">        v[e2].<span class="built_in">push_back</span>(e1);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> num, in1, in2;</span><br><span class="line">    cin &gt;&gt; num;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">        cin &gt;&gt; in1;</span><br><span class="line">        <span class="keyword">while</span>(in1--)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; in2;</span><br><span class="line">            vis[in2] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">fun</span>(n))</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;YES&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;NO&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ€ç»´é¢˜ç›® </tag>
            
            <tag> vector </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PTA-L2-028-vector-æ€ç»´</title>
      <link href="/2019/03/06/PTA-L2-028-vector-%E6%80%9D%E7%BB%B4/"/>
      <url>/2019/03/06/PTA-L2-028-vector-%E6%80%9D%E7%BB%B4/</url>
      
        <content type="html"><![CDATA[<p>L2-028 ç§€æ©çˆ±åˆ†å¾—å¿« </p><span id="more"></span><h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><p>é“¾æ¥ï¼š<a href="https://pintia.cn/problem-sets/994805046380707840/problems/994805054698012672">L2-028</a></p><p><img src="/2019/03/06/PTA-L2-028-vector-%E6%80%9D%E7%BB%B4/timu.png" alt></p><h1 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h1><p>åˆ†åˆ«æ±‚å‡ºaï¼Œbä¸ç¼–å·ä¸ºi(i&gt;0)çš„äººçš„äº²å¯†åº¦va[i]ï¼Œvb[i]ï¼Œè¿˜æœ‰vaï¼Œvbçš„æœ€å¤§å€¼MAXAï¼ŒMAXBç„¶åè¿›è¡Œåˆ¤æ–­</p><ul><li>å¦‚æœMAXAå¯¹åº”çš„äººæ˜¯bè€Œä¸”MAXBå¯¹åº”çš„äººæ˜¯aï¼Œé‚£ä¹ˆè¾“å‡ºaï¼Œbå³å¯</li><li>å¦åˆ™ï¼Œåˆ†åˆ«æŒ‰è¦æ±‚è¾“å‡ºMAXAå¯¹åº”çš„äººçš„ç¼–å·ï¼ŒMAXBå¯¹åº”çš„äººçš„ç¼–å·</li></ul><p>å¯¹äºvaï¼Œvbæˆ‘ä»¬å¯ä»¥ç”¨ä¸ªdoubleæ•°ç»„å­˜å‚¨ï¼Œå› ä¸ºç¼–å·æœ‰æ­£æœ‰è´Ÿï¼Œæ‰€ä»¥å¾—è¿›è¡Œç»å¯¹å€¼å¤„ç†ï¼Œæ‰€ä»¥å¾—æœ‰å¦å¤–ä¸€ä¸ªæ•°ç»„gè¿›è¡Œæ ‡è®°æ€§åˆ«ï¼Œ<strong>åŒæ—¶éœ€è¦æ³¨æ„åˆ°0è¿™ä¸ªç‚¹ï¼Œå› ä¸ºä¼šæœ‰+0ï¼Œ-0å‡ºç°ï¼Œæ‰€ä»¥å¾—ä»¥å­—ç¬¦ä¸²çš„å½¢å¼è¾“å…¥</strong></p><p>å­˜å‚¨è¾“å…¥çš„æ•°æ®ï¼Œå› ä¸ºæ¯è¡Œçš„ä¸ªæ•°éƒ½ä¸ä¸€æ ·ï¼Œæ‰€ä»¥å¯ä»¥å¼€è¾Ÿä¸€ä¸ªè¾ƒå¤§çš„äºŒç»´æ•°ç»„ï¼Œæˆ–è€…ç”¨vectorï¼Œè¿™é‡Œé€‰ç”¨vector</p><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/qq1013459920/article/details/86772096">https://blog.csdn.net/qq1013459920/article/details/86772096</a></p><hr><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//va[i]:aç¼–å·ä¸ºi(i&gt;0)çš„äººçš„äº²å¯†åº¦,vb[i]åŒç†</span></span><br><span class="line"><span class="keyword">double</span> va[<span class="number">1100</span>] = &#123;<span class="number">0.0</span>&#125;, vb[<span class="number">1100</span>] = &#123;<span class="number">0.0</span>&#125;;</span><br><span class="line"><span class="comment">//g[i]==true:ç¼–å·ä¸ºiçš„ä¸ºå¥³æ€§</span></span><br><span class="line"><span class="keyword">bool</span> g[<span class="number">1100</span>] = &#123;<span class="literal">false</span>&#125;;</span><br><span class="line"><span class="comment">//ä»¥å­—ç¬¦ä¸²çš„å½¢å¼è¯»å…¥ï¼Œå°†è¯»å…¥çš„å­—ç¬¦ä¸²å˜ä¸ºæ•´å‹ï¼ŒåŒæ—¶å–ç»å¯¹å€¼ï¼Œå¹¶ä¸”æ ‡è®°æ€§åˆ«</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> input = <span class="number">0</span>, sign = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">char</span> a = <span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span> ((a&lt;<span class="string">&#x27;0&#x27;</span> || a&gt;<span class="string">&#x27;9&#x27;</span>) &amp;&amp; a != <span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">a = <span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">if</span> (a == <span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">sign = <span class="number">1</span>;</span><br><span class="line">a = <span class="built_in">getchar</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span> (a &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; a &lt;= <span class="string">&#x27;9&#x27;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">input = input * <span class="number">10</span> + a - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">a = <span class="built_in">getchar</span>();</span><br><span class="line">&#125;</span><br><span class="line">g[input] = sign;</span><br><span class="line"><span class="keyword">return</span> input;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, m, input1;</span><br><span class="line">    <span class="keyword">char</span> input2[<span class="number">10</span>];</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    vector&lt; vector&lt;<span class="keyword">int</span>&gt; &gt;<span class="built_in">photos</span>(n); <span class="comment">//å­˜å‚¨è¾“å…¥çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;input1);</span><br><span class="line">        photos[i].<span class="built_in">resize</span>(input1);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; input1; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//å¦‚æœè¯»è¿›å»å­—ç¬¦ä¸²å†è½¬åŒ–çš„è¯ï¼Œå¯èƒ½ä¼šè¶…æ—¶</span></span><br><span class="line">            photos[i][j] =  <span class="built_in">read</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> a = <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">int</span> b = <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">double</span> MAXA = <span class="number">0.0</span>, MAXB = <span class="number">0.0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//æ˜¯å¦åœ¨ä¸€è¡Œæ•°æ®ä¸­æ‰¾å¾—åˆ°a</span></span><br><span class="line">        <span class="keyword">bool</span> findA = <span class="built_in">find</span>(photos[i].<span class="built_in">begin</span>(), photos[i].<span class="built_in">end</span>(), a) != photos[i].<span class="built_in">end</span>();</span><br><span class="line">        <span class="keyword">bool</span> findB = <span class="built_in">find</span>(photos[i].<span class="built_in">begin</span>(), photos[i].<span class="built_in">end</span>(), b) != photos[i].<span class="built_in">end</span>();</span><br><span class="line">        <span class="keyword">if</span>(findA || findB)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; photos[i].<span class="built_in">size</span>(); j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(findA &amp;&amp; g[a] != g[photos[i][j]])</span><br><span class="line">                &#123;</span><br><span class="line">                    va[photos[i][j]] += (<span class="keyword">double</span>)<span class="number">1.0</span>/photos[i].<span class="built_in">size</span>();</span><br><span class="line">                    <span class="keyword">if</span>(va[photos[i][j]] &gt; MAXA)</span><br><span class="line">                        MAXA = va[photos[i][j]];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(findB &amp;&amp; g[b] != g[photos[i][j]])</span><br><span class="line">                &#123;</span><br><span class="line">                    vb[photos[i][j]] += (<span class="keyword">double</span>)<span class="number">1.0</span>/photos[i].<span class="built_in">size</span>();</span><br><span class="line">                    <span class="keyword">if</span>(vb[photos[i][j]] &gt; MAXB)</span><br><span class="line">                        MAXB = vb[photos[i][j]];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(MAXA == va[b] &amp;&amp; MAXB == vb[a])</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s%d %s%d\n&quot;</span>, g[a] ? <span class="string">&quot;-&quot;</span> : <span class="string">&quot;&quot;</span>, a, g[b] ? <span class="string">&quot;-&quot;</span> : <span class="string">&quot;&quot;</span>, b);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(va[i] == MAXA)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%s%d %s%d\n&quot;</span>, g[a] ? <span class="string">&quot;-&quot;</span> : <span class="string">&quot;&quot;</span>, a, g[i] ? <span class="string">&quot;-&quot;</span> : <span class="string">&quot;&quot;</span>, i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(vb[i] == MAXB)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%s%d %s%d\n&quot;</span>, g[b] ? <span class="string">&quot;-&quot;</span> : <span class="string">&quot;&quot;</span>, b, g[i] ? <span class="string">&quot;-&quot;</span> : <span class="string">&quot;&quot;</span>, i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ€ç»´é¢˜ç›® </tag>
            
            <tag> vector </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>chrootæ–¹æ³•æ¢å¤grubä¿¡æ¯</title>
      <link href="/2019/02/27/chroot%E6%96%B9%E6%B3%95%E6%81%A2%E5%A4%8Dgrub%E4%BF%A1%E6%81%AF/"/>
      <url>/2019/02/27/chroot%E6%96%B9%E6%B3%95%E6%81%A2%E5%A4%8Dgrub%E4%BF%A1%E6%81%AF/</url>
      
        <content type="html"><![CDATA[<p>åˆ©ç”¨Live CDçš„å¦å¤–ä¸€ä¸ªæ–¹æ³•è§£å†³grub rescueæ–¹æ³•</p><span id="more"></span><p>å¼€æœºç¼ºå¼•å¯¼æ—¥å¸¸è¿›grub rescueï¼Œé™¤äº†<code>set set prefix</code>çš„åŠæ³•å¤–ï¼Œè¿˜å¯ä»¥åˆ©ç”¨Live CDè¿›è¡Œ<code>update-grub</code>å‘½ä»¤</p><p>ä»Linux LIve CDå¯åŠ¨åï¼Œèƒ½å¤Ÿé€šè¿‡<code>update-grub chroo</code>tåˆ°<code>grub</code>åˆ†åŒºæ¥è§£å†³è¿™ä¸ªé—®é¢˜</p><p><img src="/2019/02/27/chroot%E6%96%B9%E6%B3%95%E6%81%A2%E5%A4%8Dgrub%E4%BF%A1%E6%81%AF/grub-rescue.png" alt></p><h1 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h1><p>å‚è€ƒï¼š<a href="https://askubuntu.com/questions/254491/failed-to-get-canonical-path-of-cow">https://askubuntu.com/questions/254491/failed-to-get-canonical-path-of-cow</a></p><p><em>è¯„è®ºåŒºè¿˜æœ‰ä¸ªæ›´å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œå¦‚æœè¿™ä¸ªä¸è¡Œï¼Œå¯ä»¥è¯•è¯•é‚£ä¸€ä¸ª</em></p><p>ï¼ˆ<code>/dev/sda1</code>ç”¨ä½ åœ¨grubä¸Šå®‰è£…çš„ä»»ä½•åˆ†åŒºæ›¿æ¢ä¸‹é¢ã€‚æ‰€æœ‰å‘½ä»¤éƒ½æ˜¯rootã€‚ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mkdir /mnt/chrootdir</span><br><span class="line">mount /dev/sda1 /mnt/chrootdir</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">åˆ†åˆ«ç”¨proc dev sys etc bin sbin var usr lib lib64 tmpæ›¿ä»£<span class="variable">$dir</span>åæ‰§è¡Œå‘½ä»¤</span></span><br><span class="line">mkdir /mnt/chrootdir/$dir</span><br><span class="line">mount --bind /$dir /mnt/chrootdir/$dir</span><br><span class="line"></span><br><span class="line">chroot /mnt/chrootdir</span><br><span class="line">update-grub2</span><br><span class="line"><span class="meta">#</span><span class="bash">update-grub</span></span><br></pre></td></tr></table></figure><p>å¦‚æœç¼ºå¼•å¯¼ï¼Œå¯ä»¥è¿›live cdè”ç½‘å®‰è£…</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mkdir /mnt</span><br><span class="line">mount /dev/sda1 /mnt</span><br><span class="line">cd /mnt</span><br><span class="line">ls -l</span><br><span class="line"></span><br><span class="line">grub-install --recheck --root-directory=/mnt /dev/sda</span><br></pre></td></tr></table></figure><h1 id="è®°è®°"><a href="#è®°è®°" class="headerlink" title="è®°è®°"></a>è®°è®°</h1><h2 id="chroot"><a href="#chroot" class="headerlink" title="chroot"></a>chroot</h2><p>chrootæ˜¯åœ¨unixç³»ç»Ÿçš„ä¸€ä¸ªæ“ä½œï¼Œé’ˆå¯¹æ­£åœ¨è¿ä½œçš„è½¯ä»¶è¿›ç¨‹å’Œå®ƒçš„å­è¿›ç¨‹ï¼Œæ”¹å˜å®ƒå¤–æ˜¾çš„æ ¹ç›®å½•ã€‚ä¸€ä¸ªè¿è¡Œåœ¨è¿™ä¸ªç¯å¢ƒä¸‹ï¼Œç»ç”±chrootè®¾ç½®æ ¹ç›®å½•çš„ç¨‹åºï¼Œå®ƒä¸èƒ½å¤Ÿå¯¹è¿™ä¸ªæŒ‡å®šæ ¹ç›®å½•ä¹‹å¤–çš„æ–‡ä»¶è¿›è¡Œè®¿é—®åŠ¨ä½œï¼Œä¸èƒ½è¯»å–ï¼Œä¹Ÿä¸èƒ½æ›´æ”¹å®ƒçš„å†…å®¹ã€‚chrootè¿™ä¸€ç‰¹æ®Šè¡¨è¾¾å¯èƒ½æŒ‡chrootç³»ç»Ÿè°ƒç”¨æˆ–chrootå‰ç«¯ç¨‹åº</p><p>â€”-<a href="https://zh.wikipedia.org/zh-hans/Chroot">chroot - ç»´åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦</a></p><h2 id="â€”bind"><a href="#â€”bind" class="headerlink" title="â€”bind"></a>â€”bind</h2><p>bindçš„æ„æ€æ˜¯ï¼ŒæŠŠå…¶ä»–åœ°æ–¹çš„å­æ ‘å†è¿›è¡ŒæŒ‚è½½ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥æŠŠæ–‡ä»¶ç³»ç»Ÿä¸­çš„æŸä¸€ä¸ªéƒ¨åˆ†è¿›è¡ŒæŒ‚è½½ã€‚</p><p>è¿™ä¸ªç‰¹æ€§æ˜¯ä»linux2.4.0å¼€å§‹çš„ã€‚<br>æˆ–è€…æ›´ç®€ä»‹çš„è¯´,å°±æ˜¯<strong>æŒ‚è½½ä¸€ä¸ªå·²æœ‰çš„æ–‡ä»¶å¤¹</strong></p><p>â€”-<a href="https://xionchen.github.io/2016/08/25/linux-bind-mount/">bind mount çš„ç”¨æ³•</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> grub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>L2-001ç´§æ€¥æ•‘æ´-dijkstraå˜å½¢-è®°å½•è·¯å¾„</title>
      <link href="/2019/02/22/L2-001%E7%B4%A7%E6%80%A5%E6%95%91%E6%8F%B4-dijkstra%E5%8F%98%E5%BD%A2-%E8%AE%B0%E5%BD%95%E8%B7%AF%E5%BE%84/"/>
      <url>/2019/02/22/L2-001%E7%B4%A7%E6%80%A5%E6%95%91%E6%8F%B4-dijkstra%E5%8F%98%E5%BD%A2-%E8%AE%B0%E5%BD%95%E8%B7%AF%E5%BE%84/</url>
      
        <content type="html"><![CDATA[<p>L2-001ç´§æ€¥æ•‘æ´</p><span id="more"></span><h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><p><a href="https://pintia.cn/problem-sets/994805046380707840/problems/994805073643683840">L2-001ç´§æ€¥æ•‘æ´</a></p><p><img src="/2019/02/22/L2-001%E7%B4%A7%E6%80%A5%E6%95%91%E6%8F%B4-dijkstra%E5%8F%98%E5%BD%A2-%E8%AE%B0%E5%BD%95%E8%B7%AF%E5%BE%84/timu.png" alt></p><h1 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">2019/2/22 17:08:10</span></span><br><span class="line"><span class="comment">56ms</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e3</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0X3F3F3F3F</span>;</span><br><span class="line"><span class="keyword">int</span> edge[MAXN][MAXN]; </span><br><span class="line"><span class="keyword">int</span> vis[MAXN] = &#123;<span class="number">0</span>&#125;; </span><br><span class="line"><span class="keyword">int</span> dis[MAXN];</span><br><span class="line"><span class="keyword">int</span> num[MAXN]; <span class="comment">//å­˜æ¯ä¸ªç‚¹æ•‘æ´äººå‘˜æ•°é‡</span></span><br><span class="line"><span class="keyword">int</span> path[MAXN]; <span class="comment">//å­˜å‚¨è·¯å¾„ï¼Œpath[i]:è¡¨ç¤ºæœ€çŸ­è·¯å¾„çš„å‰ä¸€ä¸ªç»“ç‚¹ï¼Œæœ€åé€’å½’æ‰“å°è·¯å¾„å³å¯</span></span><br><span class="line"><span class="keyword">int</span> totWeight[MAXN] = &#123;<span class="number">0</span>&#125;; <span class="comment">//totWeight[i]:ä»£è¡¨ä»èµ·ç‚¹åˆ°ç‚¹iæ‰€èƒ½å¬é›†çš„æœ€å¤šæ•‘æ´é˜Ÿçš„æ•°é‡</span></span><br><span class="line"><span class="keyword">int</span> totPath[MAXN]; <span class="comment">//totPath[i]:èµ·å§‹åˆ°ç‚¹içš„æœ€çŸ­è·¯å¾„æ•°ç›®</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> num_e, num_v, beg, en, MIN;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dijkstra</span><span class="params">(<span class="keyword">int</span> beg)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num_v; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        dis[i] = edge[beg][i];</span><br><span class="line">        path[i] = beg;</span><br><span class="line">        <span class="keyword">if</span>(i != beg)</span><br><span class="line">            totWeight[i] = num[beg] + num[i];</span><br><span class="line">        totPath[i] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">vis[beg] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num_v; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">        MIN = INF;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; num_v; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(vis[j] == <span class="number">0</span> &amp;&amp; MIN &gt; dis[j])</span><br><span class="line">            &#123;</span><br><span class="line">                MIN = dis[j];</span><br><span class="line">                k = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        vis[k] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; num_v; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(vis[j] == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(dis[k] + edge[k][j] &lt; dis[j]) <span class="comment">//æ¾å¼›æ—¶å„æ•°ç»„çš„æ›´æ–°</span></span><br><span class="line">                &#123;</span><br><span class="line">                    dis[j] = dis[k] + edge[k][j];</span><br><span class="line">                    path[j] = k;</span><br><span class="line">                    totPath[j] = totPath[k];</span><br><span class="line">                    totWeight[j] = totWeight[k] + num[j];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(dis[k] + edge[k][j] == dis[j]) <span class="comment">//ç›¸ç­‰æ—¶çš„æ›´æ–°</span></span><br><span class="line">                &#123;</span><br><span class="line">                    totPath[j] += totPath[k]; <span class="comment">//åº”è¯¥æ˜¯äºŒè€…æœ€çŸ­è·¯å¾„çš„å’Œ</span></span><br><span class="line">                     <span class="comment">//è¿½æ±‚æœ€çŸ­è·¯çš„å‰æä¸‹å°½å¯èƒ½åœ°å¢åŠ é˜Ÿå‘˜æ•°ç›®</span></span><br><span class="line">                    <span class="keyword">if</span>(totWeight[k] + num[j] &gt; totWeight[j])</span><br><span class="line">                    &#123;</span><br><span class="line">                        totWeight[j] = totWeight[k] + num[j];</span><br><span class="line">                        path[j] = k;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printPath</span><span class="params">(<span class="keyword">int</span> en)</span> <span class="comment">//è¾“å‡ºè·¯å¾„</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(en == beg)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; en;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printPath</span>(path[en]);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; en;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    cin &gt;&gt; num_v &gt;&gt; num_e &gt;&gt; beg &gt;&gt; en;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num_v; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; num_v; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(i == j)</span><br><span class="line">                edge[i][j] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                edge[i][j] = edge[j][i] = INF;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num_v; i++)</span><br><span class="line">        cin &gt;&gt; num[i];</span><br><span class="line">    <span class="keyword">int</span> e1, e2, val;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num_e; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; e1 &gt;&gt; e2 &gt;&gt; val;</span><br><span class="line">        edge[e1][e2] = edge[e2][e1] = val;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dijkstra</span>(beg);</span><br><span class="line">    cout &lt;&lt; totPath[en] &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; totWeight[en] &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">printPath</span>(en);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š</p><p><a href="http://www.voidcn.com/article/p-vibveive-tk.html">http://www.voidcn.com/article/p-vibveive-tk.html</a></p><p><a href="https://blog.csdn.net/wbb1997/article/details/79119608">https://blog.csdn.net/wbb1997/article/details/79119608</a></p><p><a href="https://www.liuchuo.net/archives/2362">https://www.liuchuo.net/archives/2362</a></p>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾è®º </tag>
            
            <tag> æœ€çŸ­è·¯ </tag>
            
            <tag> dijkstra </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾è®ºä¹‹æœ€å°ç”Ÿæˆæ ‘</title>
      <link href="/2019/02/19/%E5%9B%BE%E8%AE%BA%E4%B9%8B%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/"/>
      <url>/2019/02/19/%E5%9B%BE%E8%AE%BA%E4%B9%8B%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<p>primç®—æ³•ï¼Œkruskalç®—æ³•ï¼ŒPOJ1251å…¥é—¨é¢˜ç›®</p><span id="more"></span><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/qq_40306845/article/details/81540626">https://blog.csdn.net/qq_40306845/article/details/81540626</a></p><h1 id="æ¨¡æ¿é¢˜ç›®"><a href="#æ¨¡æ¿é¢˜ç›®" class="headerlink" title="æ¨¡æ¿é¢˜ç›®"></a>æ¨¡æ¿é¢˜ç›®</h1><p><strong><a href="http://poj.org/problem?id=1251">poj1251â€”Jungle Roads</a></strong><img src="/2019/02/19/%E5%9B%BE%E8%AE%BA%E4%B9%8B%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/timu.png" alt></p><p>é¢˜æ„ï¼šç»™ä½ nä¸ªç‚¹ï¼Œå³n-1æ¡è¾¹ï¼Œæ¯ä¸ªè¾¹éƒ½æœ‰ä¸€ä¸ªæƒå€¼ï¼Œè®©ä½ æ±‚å‡ºæœ€å°ç”Ÿæˆæ ‘</p><p><em>é¢˜ç›®è¯´æ˜ä¸å«é‡å¤è¾¹</em></p><h2 id="prime"><a href="#prime" class="headerlink" title="prime"></a>prime</h2><ul><li>å…ˆä»»æ„é€‰æ‹©ä¸€æ¡è¾¹ï¼ˆä¸€èˆ¬ç›´æ¥é€‰æ‹©ç¬¬ä¸€æ¡ï¼‰ï¼Œè¿æ¥ä¸å…¶ç›¸è¿æƒå€¼æœ€å°çš„ç‚¹ï¼Œç„¶åä¸¤ä¸ªç‚¹æˆä¸ºä¸€ä¸ªé›†åˆä½“ã€‚</li><li>æ‰¾è¿™ä¸ªä¸åœ¨è¿™ä¸ªé›†åˆä½“é‡Œ ä½†æ˜¯ä¸é›†åˆä½“ç›¸è¿çš„æƒå€¼æœ€å°çš„ç‚¹ ä¸é›†åˆä½“ç›¸è¿ï¼Œå¹¶æŠŠè¯¥ç‚¹å½’å…¥é›†åˆä½“ã€‚</li><li>é‡å¤ä¸Šä¸€æ¡æ“ä½œï¼Œç›´åˆ°é›†åˆä½“å½’å…¥äº†æ‰€æœ‰çš„ç‚¹</li></ul><p><strong>æ—¶é—´å¤æ‚åº¦</strong></p><p>è®°é¡¶ç‚¹æ•°vï¼Œè¾¹æ•°e</p><p>é‚»æ¥çŸ©é˜µ:O(v2)                 é‚»æ¥è¡¨:O(elog2v)</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e2</span>;</span><br><span class="line"><span class="keyword">int</span> mp[MAXN][MAXN]; <span class="comment">////é‚»æ¥çŸ©é˜µ</span></span><br><span class="line"><span class="keyword">int</span> vis[MAXN], ans[MAXN]; </span><br><span class="line"><span class="comment">//vis[i]:åˆ¤æ–­ç¬¬iä¸ªé¡¶ç‚¹æœ‰æ²¡æœ‰èµ°è¿‡</span></span><br><span class="line"><span class="comment">//ans[i]:å½“æŒ‡å®šä¸€ä¸ªç‚¹næ—¶ï¼Œnåˆ°ç¬¬iä¸ªç‚¹çš„è·ç¦»ï¼Œnçš„èŒƒå›´æ˜¯å…¨éƒ¨ç‚¹ï¼Œæ‰€ä»¥ansæ˜¯å˜åŒ–çš„</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">int</span> n; <span class="comment">//é¡¶ç‚¹ä¸ªæ•°</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">prime</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) <span class="comment">//åˆå§‹åŒ–ç¬¬ä¸€ä¸ªç‚¹</span></span><br><span class="line">    &#123;</span><br><span class="line">        vis[i] = <span class="number">0</span>;</span><br><span class="line">        ans[i] = mp[<span class="number">1</span>][i];</span><br><span class="line">    &#125;</span><br><span class="line">    vis[<span class="number">1</span>] = <span class="number">1</span>; <span class="comment">//ç¬¬ä¸€ä¸ªç‚¹å·²ç»èµ°è¿‡</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) <span class="comment">//éå†æ‰€æœ‰çš„ç‚¹</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> MIN = INF, pos = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++) <span class="comment">//éå†ç¬¬iä¸ªç‚¹æ—è¾¹æ‰€æœ‰çš„ç‚¹</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(!vis[j] &amp;&amp; ans[j] &lt; MIN) <span class="comment">//æ²¡æœ‰èµ°è¿‡&amp;&amp;æ±‚å‡ºans[]æœ€å°å€¼</span></span><br><span class="line">            &#123;</span><br><span class="line">                MIN = ans[j];</span><br><span class="line">                pos = j; <span class="comment">//è®°å½•æœ€å°ä½ç½®ï¼Œå³(i, pos)è¿™ä¸ªç‚¹å€¼æœ€å°</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(MIN == INF) <span class="comment">//æ²¡æœ‰æ‰¾åˆ°</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        vis[pos] = <span class="number">1</span>;</span><br><span class="line">        sum += MIN; <span class="comment">//æƒå€¼å’Œ</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= n; k++) <span class="comment">//ç¬¬ä¸€ä¸ªç‚¹èµ°å®Œåï¼Œé‡æ–°åˆå§‹åŒ–ä¸‹ä¸€ä¸ªç‚¹</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">/*å½“å‰ç‚¹æ²¡æœ‰èµ°è¿‡&amp;&amp;é˜²æ­¢èµ°å›å»ï¼Œå‡å¦‚(1,2)å·²ç»èµ°è¿‡äº†ï¼Œ</span></span><br><span class="line"><span class="comment">             *å¦‚æœä¸åŠ è¿™ä¸ªæ¡ä»¶ï¼Œå¯èƒ½åˆå§‹åŒ–2è¿™ä¸ªç‚¹çš„æ—¶å€™ï¼Œä¼šæŠŠï¼ˆ2,1ï¼‰åŠ è¿›å»</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="keyword">if</span>(!vis[k] &amp;&amp; mp[pos][k] &lt; ans[k]) </span><br><span class="line">                ans[k] = mp[pos][k];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; sum &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> m, k;</span><br><span class="line">    <span class="keyword">char</span> c1, c2;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; n &amp;&amp; n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(mp, INF, <span class="built_in"><span class="keyword">sizeof</span></span>(mp));</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; c1 &gt;&gt; m;</span><br><span class="line">            <span class="keyword">while</span>(m--)</span><br><span class="line">            &#123;</span><br><span class="line">                cin &gt;&gt; c2 &gt;&gt; k;</span><br><span class="line">                mp[c1-<span class="string">&#x27;A&#x27;</span>+<span class="number">1</span>][c2-<span class="string">&#x27;A&#x27;</span>+<span class="number">1</span>] = mp[c2-<span class="string">&#x27;A&#x27;</span>+<span class="number">1</span>][c1-<span class="string">&#x27;A&#x27;</span>+<span class="number">1</span>] = k;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">prime</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="kruskal"><a href="#kruskal" class="headerlink" title="kruskal"></a>kruskal</h2><ul><li>å…ˆé€‰æ‹©ä¸€æ¡æƒå€¼æœ€å°çš„è¾¹ï¼ŒæŠŠè¿™æ¡è¾¹ç›¸è¿çš„ä¸¤ä¸ªç‚¹å½’æˆä¸€ä¸ªé›†åˆã€‚</li><li>å†æ‰¾ä¸‹ä¸€ä¸ªæƒå€¼æœ€å°çš„è¾¹ï¼Œä½†æ˜¯è¾¹ç›¸è¿çš„ä¸¤ä¸ªç‚¹ä¸èƒ½å±äºåŒä¸€ä¸ªé›†åˆï¼ŒæŠŠè¿™æ¡è¾¹ç›¸è¿çš„ä¸¤ä¸ªç‚¹ï¼ˆè¿™é‡Œä¹Ÿå¯ä»¥æ˜¯é›†åˆï¼‰å½’æˆä¸€ä¸ªé›†åˆ</li><li>é‡å¤ä¸Šä¸€æ¡æ“ä½œï¼Œç›´åˆ°æœ€ååªæœ‰ä¸€ä¸ªé›†åˆä½“ä¸”å½’å…¥æ‰€æœ‰çš„ç‚¹ã€‚</li></ul><p><strong>æ—¶é—´å¤æ‚åº¦</strong></p><p>elog2e  ï¼ˆeä¸ºå›¾ä¸­çš„è¾¹æ•°ï¼‰</p><hr><p><code>prime</code>ä¸<code>kruskal</code>åŒºåˆ«ï¼š</p><ol><li>é›†åˆçš„ä¸ªæ•°ï¼š<code>prime</code>ç®—æ³•è‡ªå§‹è‡ªç»ˆåªæœ‰ä¸€ä¸ªé›†åˆï¼Œè€Œ<code>kruskal</code>ç®—æ³•å¯ä»¥æœ‰å¤šä¸ªé›†åˆï¼Œæ‰€ä»¥<code>kruskal</code>ç®—æ³•è¦ç”¨åˆ°å¹¶æŸ¥é›†ã€‚</li><li>é€‰å–çš„æ–¹å¼ï¼š<code>prime</code>ç®—æ³•å…ˆæ˜¯ä»»æ„é€‰å–ï¼Œå†æ ¹æ®é€‰å–å·²æœ‰çš„åŸºç¡€ä¸Šé€‰å–æƒå€¼æœ€å°ä¸”ä¸åœ¨é›†åˆçš„ç‚¹ï¼ˆå–ç‚¹ï¼‰ã€‚<code>kruskal</code>ç®—æ³•åˆ™æ˜¯æ¯æ¬¡ä»¥æƒå€¼æœ€å°çš„è¾¹æ¥é€‰å–ï¼Œå¯ä»¥æœ‰å¤šä¸ªé›†åˆï¼ˆå–è¾¹ï¼‰ã€‚</li><li>ç¨ å¯†å›¾ç”¨primæ¯”kcuskalå¿«çš„ä¸æ­¢ä¸€ä¸‹ï¼Œç¨€ç–å›¾kruskalæ›´å¿«ã€‚</li></ol><hr><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e2</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> vis[MAXN]; <span class="comment">//å¹¶æŸ¥é›†ä½¿ç”¨</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> a,b;</span><br><span class="line">    <span class="keyword">int</span> val;</span><br><span class="line">&#125;mp[MAXN*MAXN]; <span class="comment">//å‚¨å­˜è¾¹çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬èµ·ç‚¹/ç»ˆç‚¹/æƒå€¼</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node x, node y)</span> <span class="comment">//æ’åºå‡½æ•°ï¼Œè¾¹æŒ‰ç…§æƒå€¼ä»å°åˆ°å¤§æ’åº</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x.val &lt; y.val;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">findFather</span><span class="params">(<span class="keyword">int</span> x)</span> <span class="comment">//å¹¶æŸ¥é›†å¯»æ‰¾ç¥–å…ˆ</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(vis[x] == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> vis[x] = <span class="built_in">findFather</span>(vis[x]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, len;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">kruskal</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>, cnt = <span class="number">0</span>; <span class="comment">//cnt:è®¡ç®—åŠ å…¥çš„è¾¹æ•°</span></span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="number">0</span> ,<span class="built_in"><span class="keyword">sizeof</span></span>(vis)); </span><br><span class="line">    <span class="built_in">sort</span>(mp, mp + len, cmp); <span class="comment">//å› ä¸ºkruskalæ˜¯é ä»è¾¹çš„æœ€å°ä¾æ¬¡æŸ¥æ‰¾çš„ï¼Œæ‰€ä»¥ç›´æ¥æ’åºæ–¹ä¾¿æŸ¥æ‰¾</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> x = <span class="built_in">findFather</span>(mp[i].a);</span><br><span class="line">        <span class="keyword">int</span> y = <span class="built_in">findFather</span>(mp[i].b);</span><br><span class="line">        <span class="keyword">if</span>(x != y) <span class="comment">//å¦‚æœä¸¤ä¸ªç‚¹æ‰€å±çš„é›†åˆä¸åŒå°±å’Œå¹¶</span></span><br><span class="line">        &#123;</span><br><span class="line">            vis[x] = y;</span><br><span class="line">            ans += mp[i].val;</span><br><span class="line">            cnt++;</span><br><span class="line">            <span class="keyword">if</span>(cnt == n - <span class="number">1</span>)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(cnt != n - <span class="number">1</span>) <span class="comment">//å›¾ä¸è¿é€š</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;-1&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> m, k;</span><br><span class="line">    <span class="keyword">char</span> c1, c2;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; n &amp;&amp; n)</span><br><span class="line">    &#123;</span><br><span class="line">        len = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; c1 &gt;&gt; m;</span><br><span class="line">            <span class="keyword">while</span>(m--)</span><br><span class="line">            &#123;</span><br><span class="line">                cin &gt;&gt; c2 &gt;&gt; k;</span><br><span class="line">                mp[len].a = c1-<span class="string">&#x27;A&#x27;</span>+<span class="number">1</span>;</span><br><span class="line">                mp[len].b = c2-<span class="string">&#x27;A&#x27;</span>+<span class="number">1</span>;</span><br><span class="line">                mp[len].val = k;</span><br><span class="line">                len++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">kruskal</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="POJ1751â€”Highways"><a href="#POJ1751â€”Highways" class="headerlink" title="POJ1751â€”Highways"></a><a href="http://poj.org/problem?id=1751">POJ1751â€”Highways</a></h1><p><img src="/2019/02/19/%E5%9B%BE%E8%AE%BA%E4%B9%8B%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/2.png" alt></p><p>å‚è€ƒï¼š</p><p><a href="https://blog.csdn.net/mengxiang000000/article/details/51338700">POJ 1751 Highwaysã€æœ€å°ç”Ÿæˆæ ‘+è¾“å‡ºè·¯å¾„ã€‘ - mengxiang000000 - CSDNåšå®¢</a></p><p>é¢˜æ„ï¼šç»™ä½ nä¸ªæ‘åº„çš„åæ ‡xï¼Œyï¼Œå»ºç«‹é«˜é€Ÿå…¬è·¯ï¼Œå¹¶ä¸”å·²ç»ç»™ä½ äº†mæ¡å·²ç»å»ºå¥½å…¬è·¯çš„æ‘åº„ï¼Œè®©ä½ è¾“å‡ºè¿˜è¦å»ºç«‹çš„å…¬è·¯ï¼Œå¹¶ä¸”è¾“å‡ºè¯¥å…¬è·¯çš„ä¸¤ç«¯çš„æ‘åº„ç¼–å·ï¼Œè¾“å‡ºå¯ä»¥ä»»æ„é¡ºåºï¼›</p><p>æ­¤é¢˜å°±æ˜¯æ±‚æœ€å°ç”Ÿæˆæ ‘+è·¯å¾„è¾“å‡ºå°±è¡Œäº†ï¼Œä½†æ˜¯æˆ‘ä»¬è¦å¤„ç†å·²ç»è”é€šäº†çš„æ‘åº„ã€‚æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å‡è®¾ä¸ç›¸è¿çš„èŠ‚ç‚¹çš„æƒå€¼ä¸ºæ— ç©·å¤§ï¼Œ</p><p>å¦‚æœæˆ‘ä»¬ç›´æ¥æŠŠä¸¤ä¸ªå·²ç»è”é€šçš„ç‚¹çš„å€¼æ›´æ–°ä¸ºæ— ç©·å¤§çš„è¯ï¼Œæ˜æ˜¾ä¸è¡Œ</p><p><img src="/2019/02/19/%E5%9B%BE%E8%AE%BA%E4%B9%8B%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/3.png" alt></p><p>å¦‚ä¸Šå›¾ï¼Œçº¢è‰²éƒ¨åˆ†å³å·²ç»è”é€šäº†ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥æŠŠè¿™2æ¡è·¯å¾„æ›´æ–°ä¸ºæ— ç©·å¤§ï¼Œå°±ä¼šå˜ä¸ºä¸è”é€šçš„æƒ…å†µï¼Œè¯¦ç»†å¯çœ‹å»æ‰çº¢è‰²éƒ¨åˆ†çš„å›¾ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å°†çº¢è‰²éƒ¨åˆ†çš„å€¼å˜ä¸º0ï¼Œç„¶åå¦‚æœåˆ¤æ–­åˆ°äº†æƒå€¼ä¸º0ï¼Œé‚£ä¹ˆå°±ä¸ç”¨è¾“å‡ºè·¯å¾„ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Problem: 1751User: heigua</span></span><br><span class="line"><span class="comment">Memory: 4160KTime: 125MS</span></span><br><span class="line"><span class="comment">Language: C++Result: Accepted</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e3</span>;</span><br><span class="line"><span class="keyword">int</span> mp[MAXN][MAXN];</span><br><span class="line"><span class="keyword">int</span> vis[MAXN], ans[MAXN];</span><br><span class="line"><span class="keyword">int</span> path[MAXN]; <span class="comment">//è®°å½•å‰é©±ï¼Œç”¨äºè¾“å‡ºè·¯å¾„</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> x,y;</span><br><span class="line">&#125;p[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">int</span> n; <span class="comment">//é¡¶ç‚¹ä¸ªæ•°</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Dist</span><span class="params">(node a,node b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="number">1.0</span>*(a.x-b.x)*(a.x-b.x)+<span class="number">1.0</span>*(a.y-b.y)*(a.y-b.y));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">prime</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        path[i] = <span class="number">1</span>;</span><br><span class="line">        vis[i] = <span class="number">0</span>;</span><br><span class="line">        ans[i] = mp[<span class="number">1</span>][i];</span><br><span class="line">    &#125;</span><br><span class="line">    vis[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> MIN = INF, pos = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(!vis[j] &amp;&amp; ans[j] &lt; MIN)</span><br><span class="line">            &#123;</span><br><span class="line">                MIN = ans[j];</span><br><span class="line">                pos = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(MIN != INF &amp;&amp; MIN != <span class="number">0</span>) <span class="comment">//åˆ¤æ–­ä¸º0</span></span><br><span class="line">            cout &lt;&lt; path[pos] &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; pos &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">if</span>(MIN == INF)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        vis[pos] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= n; k++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(!vis[k] &amp;&amp; mp[pos][k] &lt; ans[k])</span><br><span class="line">            &#123;</span><br><span class="line">                ans[k] = mp[pos][k];</span><br><span class="line">                path[k] = pos;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(mp, INF, <span class="built_in"><span class="keyword">sizeof</span></span>(mp));</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;p[i].x, &amp;p[i].y);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; i; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            mp[i][j] = mp[j][i] = <span class="built_in">Dist</span>(p[i], p[j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> m;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;m);</span><br><span class="line">    <span class="keyword">int</span> a, b;</span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;a, &amp;b);</span><br><span class="line">        mp[a][b] = mp[b][a] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">prime</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾è®º </tag>
            
            <tag> æœ€å°ç”Ÿæˆæ ‘ </tag>
            
            <tag> prim </tag>
            
            <tag> kruskal </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾è®ºä¹‹æœ€çŸ­è·¯</title>
      <link href="/2019/02/19/%E5%9B%BE%E8%AE%BA%E4%B9%8B%E6%9C%80%E7%9F%AD%E8%B7%AF/"/>
      <url>/2019/02/19/%E5%9B%BE%E8%AE%BA%E4%B9%8B%E6%9C%80%E7%9F%AD%E8%B7%AF/</url>
      
        <content type="html"><![CDATA[<p>Floydï¼ŒDijkstraï¼Œ Spfa</p><span id="more"></span><ul><li>Dijkstraï¼šé€‚ç”¨äºæƒå€¼ä¸ºéè´Ÿçš„å›¾çš„å•æºæœ€çŸ­è·¯å¾„ï¼Œç”¨æ–æ³¢é‚£å¥‘å †çš„å¤æ‚åº¦O(E+VlgV)</li><li>BellmanFordï¼šé€‚ç”¨äºæƒå€¼æœ‰è´Ÿå€¼çš„å›¾çš„å•æºæœ€çŸ­è·¯å¾„ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ£€æµ‹è´Ÿåœˆï¼Œå¤æ‚åº¦O(VE)</li><li><p>SPFAï¼šé€‚ç”¨äºæƒå€¼æœ‰è´Ÿå€¼ï¼Œä¸”æ²¡æœ‰è´Ÿåœˆçš„å›¾çš„å•æºæœ€çŸ­è·¯å¾„ï¼ŒSPFAçš„æœ€åæƒ…å†µåº”è¯¥æ˜¯O(VE).</p></li><li><p>Floydï¼šæ¯å¯¹èŠ‚ç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„</p></li></ul><p>ï¼ˆEä¸ºè¾¹ä¸ªæ•°ï¼ŒVä¸ºé¡¶ç‚¹ä¸ªæ•°ï¼‰</p><hr><p><img src="/2019/02/19/%E5%9B%BE%E8%AE%BA%E4%B9%8B%E6%9C%80%E7%9F%AD%E8%B7%AF/duibi.png" alt></p><p>å…¶ä¸­Nè¡¨ç¤ºç‚¹æ•°ï¼ŒMè¡¨ç¤ºè¾¹æ•°</p><p>Floyd ç®—æ³•è™½ç„¶æ€»ä½“ä¸Šæ—¶é—´å¤æ‚åº¦è¾ƒé«˜ï¼Œä½†å¯ä»¥å¤„ç†å¸¦è´Ÿæƒè¾¹çš„å›¾ï¼ˆä½†ä¸èƒ½æœ‰è´Ÿæƒå›è·¯ï¼‰ï¼Œå¹¶ä¸”å‡æ‘Šåˆ°æ¯ä¸€ç‚¹å¯¹ä¸Šï¼Œåœ¨æ‰€æœ‰çš„ç®—æ³•ä¸­è¿˜æ˜¯å±äºæ¯”è¾ƒä¼˜ç§€çš„ç®—æ³•ã€‚å¦å¤–ï¼Œfloydç®—æ³•è¾ƒå°çš„ç¼–ç å¤æ‚åº¦ä¹Ÿæ˜¯ä¸€å¤§ä¼˜åŠ¿ï¼Œæ‰€ä»¥ï¼Œå¦‚æœè¦æ±‚çš„æ˜¯æ‰€æœ‰ç‚¹å¯¹é—´çš„æœ€çŸ­è·¯å¾„ï¼Œæˆ–è€…å¦‚æœæ•°æ®èŒƒå›´è¾ƒå°ï¼Œåˆ™floydç®—æ³•æ¯”è¾ƒåˆé€‚ã€‚</p><p>Dijkstraç®—æ³•æœ€å¤§çš„å¼Šç«¯å°±æ˜¯ä»–æ— æ³•å¤„ç†å¸¦æœ‰è´Ÿæƒè¾¹ä»¥åŠè´Ÿæƒå›è·¯çš„å›¾ï¼Œä½†æ˜¯Dijkstraç®—æ³•å…·æœ‰è‰¯å¥½çš„å¯æ‰©å±•æ€§ï¼Œæ‰©å±•åå¯ä»¥é€‚åº”å¾ˆå¤šé—®é¢˜ã€‚å¦å¤–ç”¨å †ä¼˜åŒ–çš„Dijkstraç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å¯ä»¥è¾¾åˆ°Oï¼ˆM log Nï¼‰ã€‚å½“è¾¹æœ‰è´Ÿæƒï¼Œç”šè‡³å­˜åœ¨è´Ÿæƒå›è·¯æ—¶ï¼Œéœ€è¦ä½¿ç”¨Bellman-ford ç®—æ³•æˆ–è€…é˜Ÿåˆ—ä¼˜åŒ–çš„Bellman-fordç®—æ³•ï¼Œå› æ­¤æˆ‘ä»¬é€‰æ‹©æœ€çŸ­è·¯å¾„æ³•æ—¶ï¼Œæ ¹æ®å®é™…çš„éœ€æ±‚å’Œæ¯ä¸€ç§ç®—æ³•çš„ç‰¹æ€§ï¼Œé€‰æ‹©åˆé€‚çš„ç®—æ³•æ¥ä½¿ç”¨ã€‚</p><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/yuewenyao/article/details/81023035">https://blog.csdn.net/yuewenyao/article/details/81023035</a></p><hr><h1 id="Floyd-å¤šæºæœ€çŸ­è·¯"><a href="#Floyd-å¤šæºæœ€çŸ­è·¯" class="headerlink" title="Floyd(å¤šæºæœ€çŸ­è·¯)"></a>Floyd(å¤šæºæœ€çŸ­è·¯)</h1><p>Floydç®—æ³•ç”¨äºæ±‚æ¯ä¸€å¯¹é¡¶ç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„ï¼Œ3ä¸ªforå¾ªç¯å°±å¯ä»¥ã€‚æ—¶é—´å¤æ‚åº¦O(v^3) ã€‚vä¸ºå›¾é¡¶ç‚¹ä¸ªæ•°</p><p>æ¨¡æ¿é¢˜ï¼š<a href="http://acm.hdu.edu.cn/showproblem.php?pid=2544">HDU2544-æœ€çŸ­è·¯</a></p><p><img src="/2019/02/19/%E5%9B%BE%E8%AE%BA%E4%B9%8B%E6%9C%80%E7%9F%AD%E8%B7%AF/floyd.png" alt></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">2019-02-20 01:02:20</span></span><br><span class="line"><span class="comment">62MS</span></span><br><span class="line"><span class="comment">1844K</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e2</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0X3F3F3F3F</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> dp[MAXN][MAXN];</span><br><span class="line"><span class="keyword">int</span> n, m, e1, e2, v;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">floyd</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= n; k++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">                dp[i][j] = <span class="built_in">min</span>(dp[i][j], dp[i][k] + dp[k][j]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; n &gt;&gt; m &amp;&amp; n &amp;&amp; m)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= i; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(i == j)</span><br><span class="line">                    dp[i][j] = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    dp[i][j] = dp[j][i] = INF;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; e1 &gt;&gt; e2 &gt;&gt; v;</span><br><span class="line">            dp[e1][e2] = dp[e2][e1] = v;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">floyd</span>();</span><br><span class="line">        cout &lt;&lt; dp[<span class="number">1</span>][n] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Dijkstra-å•æºæœ€çŸ­è·¯"><a href="#Dijkstra-å•æºæœ€çŸ­è·¯" class="headerlink" title="Dijkstra(å•æºæœ€çŸ­è·¯)"></a>Dijkstra(å•æºæœ€çŸ­è·¯)</h1><p>ä¸é‡‡ç”¨æœ€å°ä¼˜å…ˆé˜Ÿåˆ—ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯O(v^2)ï¼Œvä¸ºå›¾é¡¶ç‚¹ä¸ªæ•°</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">2019-02-20 02:53:21</span></span><br><span class="line"><span class="comment">46MS</span></span><br><span class="line"><span class="comment">1848K</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e2</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0X3F3F3F3F</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> dp[MAXN][MAXN];</span><br><span class="line"><span class="keyword">int</span> vis[MAXN];</span><br><span class="line"><span class="keyword">int</span> dis[MAXN];</span><br><span class="line"><span class="keyword">int</span> n, m, e1, e2, v, MIN;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dijkstra</span><span class="params">(<span class="keyword">int</span> beg)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        vis[i] = <span class="number">0</span>;</span><br><span class="line">        dis[i] = dp[beg][i];</span><br><span class="line">    &#125;</span><br><span class="line">    vis[beg] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">        MIN = INF;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++) <span class="comment">//å¯»æ‰¾å¼€å§‹ç‚¹åˆ°å…¶ä»–ç‚¹æœ€å°å€¼åŠä½ç½®</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(vis[j] == <span class="number">0</span> &amp;&amp; MIN &gt; dis[j])</span><br><span class="line">            &#123;</span><br><span class="line">                MIN = dis[j];</span><br><span class="line">                k = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        vis[k] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++) <span class="comment">//ä¸‰ç‚¹åˆå¹¶</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(vis[j] == <span class="number">0</span> &amp;&amp; dis[k] + dp[k][j] &lt; dis[j])</span><br><span class="line">                dis[j] = dis[k] + dp[k][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; n &gt;&gt; m &amp;&amp; n &amp;&amp; m)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= i; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(i == j)</span><br><span class="line">                    dp[i][j] = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    dp[i][j] = dp[j][i] = INF;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; e1 &gt;&gt; e2 &gt;&gt; v;</span><br><span class="line">            dp[e1][e2] = dp[e2][e1] = v;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">dijkstra</span>(<span class="number">1</span>);</span><br><span class="line">        cout &lt;&lt; dis[n] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="Spfa"><a href="#Spfa" class="headerlink" title="Spfa"></a>Spfa</h1><p>é‚»æ¥è¡¨ï¼Œé˜Ÿåˆ—ä¼˜åŒ–</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">2019-02-21 00:59:10</span></span><br><span class="line"><span class="comment">46MS</span></span><br><span class="line"><span class="comment">1980K</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">10000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0X3F3F3F3F</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> to, next, cost;</span><br><span class="line">&#125;edge[MAXN];</span><br><span class="line"><span class="keyword">int</span> head[MAXN];</span><br><span class="line"><span class="keyword">int</span> dis[MAXN];</span><br><span class="line"><span class="keyword">int</span> vis[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, e1, e2, v, len;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> from, <span class="keyword">int</span> to, <span class="keyword">int</span> cost)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    edge[len].to = to;</span><br><span class="line">    edge[len].cost = cost;</span><br><span class="line">    edge[len].next = head[from];</span><br><span class="line">    head[from] = len++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">spfa</span><span class="params">(<span class="keyword">int</span> beg)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    dis[beg] = <span class="number">0</span>;</span><br><span class="line">    vis[beg] = <span class="number">1</span>;</span><br><span class="line">    queue&lt;<span class="keyword">int</span>&gt;q;</span><br><span class="line">    q.<span class="built_in">push</span>(beg);</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> u = q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        vis[u] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = head[u]; i != <span class="number">-1</span>; i = edge[i].next)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> v = edge[i].to;</span><br><span class="line">            <span class="keyword">int</span> c = edge[i].cost;</span><br><span class="line">            <span class="keyword">if</span>(dis[v] &gt; dis[u] + c)</span><br><span class="line">            &#123;</span><br><span class="line">                dis[v] = dis[u] + c;</span><br><span class="line">                <span class="keyword">if</span>(vis[v] == <span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    vis[v] = <span class="number">1</span>;</span><br><span class="line">                    q.<span class="built_in">push</span>(v);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; n &gt;&gt; m &amp;&amp; n &amp;&amp; m)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(head, <span class="number">-1</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(head));</span><br><span class="line">        <span class="built_in">memset</span>(vis, <span class="number">0</span> , <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">        <span class="built_in">memset</span>(dis, INF, <span class="built_in"><span class="keyword">sizeof</span></span>(dis));</span><br><span class="line">        len = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; e1 &gt;&gt; e2 &gt;&gt; v;</span><br><span class="line">            <span class="built_in">add</span>(e1, e2, v);</span><br><span class="line">            <span class="built_in">add</span>(e2, e1, v);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">spfa</span>(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span>(dis[n] == INF)</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;-1&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            cout &lt;&lt; dis[n] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾è®º </tag>
            
            <tag> æœ€çŸ­è·¯ </tag>
            
            <tag> dijkstra </tag>
            
            <tag> floyd </tag>
            
            <tag> spfa </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é…ä¸Šæ¨¡æ‹Ÿçš„vector</title>
      <link href="/2019/02/17/%E9%85%8D%E4%B8%8A%E6%A8%A1%E6%8B%9F%E7%9A%84vector/"/>
      <url>/2019/02/17/%E9%85%8D%E4%B8%8A%E6%A8%A1%E6%8B%9F%E7%9A%84vector/</url>
      
        <content type="html"><![CDATA[<p>å¤©æ¢¯èµ›ç»ƒä¹ L1-049 å¤©æ¢¯èµ›åº§ä½åˆ†é…</p><span id="more"></span><h1 id="L1-049-å¤©æ¢¯èµ›åº§ä½åˆ†é…"><a href="#L1-049-å¤©æ¢¯èµ›åº§ä½åˆ†é…" class="headerlink" title="L1-049 å¤©æ¢¯èµ›åº§ä½åˆ†é…"></a><a href="https://pintia.cn/problem-sets/994805046380707840/problems/type/7">L1-049 å¤©æ¢¯èµ›åº§ä½åˆ†é…</a></h1><h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p><strong>é¢˜ç›®æè¿°</strong></p><p>å¤©æ¢¯èµ›æ¯å¹´æœ‰å¤§é‡å‚èµ›é˜Ÿå‘˜ï¼Œè¦ä¿è¯åŒä¸€æ‰€å­¦æ ¡çš„æ‰€æœ‰é˜Ÿå‘˜éƒ½ä¸èƒ½ç›¸é‚»ï¼Œåˆ†é…åº§ä½å°±æˆä¸ºä¸€ä»¶æ¯”è¾ƒéº»çƒ¦çš„äº‹æƒ…ã€‚ä¸ºæ­¤æˆ‘ä»¬åˆ¶å®šå¦‚ä¸‹ç­–ç•¥ï¼šå‡è®¾æŸèµ›åœºæœ‰ N æ‰€å­¦æ ¡å‚èµ›ï¼Œç¬¬ i æ‰€å­¦æ ¡æœ‰ M[i] æ”¯é˜Ÿä¼ï¼Œæ¯é˜Ÿ 10 ä½å‚èµ›é€‰æ‰‹ã€‚ä»¤æ¯æ ¡é€‰æ‰‹æ’æˆä¸€åˆ—çºµé˜Ÿï¼Œç¬¬ i+1 é˜Ÿçš„é€‰æ‰‹æ’åœ¨ç¬¬ i é˜Ÿé€‰æ‰‹ä¹‹åã€‚ä»ç¬¬ 1 æ‰€å­¦æ ¡å¼€å§‹ï¼Œå„æ ¡çš„ç¬¬ 1 ä½é˜Ÿå‘˜é¡ºæ¬¡å…¥åº§ï¼Œç„¶åæ˜¯å„æ ¡çš„ç¬¬ 2 ä½é˜Ÿå‘˜â€¦â€¦ ä»¥æ­¤ç±»æ¨ã€‚å¦‚æœæœ€ååªå‰©ä¸‹ 1 æ‰€å­¦æ ¡çš„é˜Ÿä¼è¿˜æ²¡æœ‰åˆ†é…åº§ä½ï¼Œåˆ™éœ€è¦å®‰æ’ä»–ä»¬çš„é˜Ÿå‘˜éš”ä½å°±åã€‚æœ¬é¢˜å°±è¦æ±‚ä½ ç¼–å†™ç¨‹åºï¼Œè‡ªåŠ¨ä¸ºå„æ ¡ç”Ÿæˆé˜Ÿå‘˜çš„åº§ä½å·ï¼Œä» 1 å¼€å§‹ç¼–å·ã€‚</p><p><strong>è¾“å…¥æ ¼å¼</strong></p><p>è¾“å…¥åœ¨ä¸€è¡Œä¸­ç»™å‡ºå‚èµ›çš„é«˜æ ¡æ•° N ï¼ˆä¸è¶…è¿‡100çš„æ­£æ•´æ•°ï¼‰ï¼›ç¬¬äºŒè¡Œç»™å‡º N ä¸ªä¸è¶…è¿‡10çš„æ­£æ•´æ•°ï¼Œå…¶ä¸­ç¬¬ i ä¸ªæ•°å¯¹åº”ç¬¬ i æ‰€é«˜æ ¡çš„å‚èµ›é˜Ÿä¼æ•°ï¼Œæ•°å­—é—´ä»¥ç©ºæ ¼åˆ†éš”ã€‚</p><p><strong>è¾“å‡ºæ ¼å¼</strong></p><p>ä»ç¬¬ 1 æ‰€é«˜æ ¡çš„ç¬¬ 1 æ”¯é˜Ÿä¼å¼€å§‹ï¼Œé¡ºæ¬¡è¾“å‡ºé˜Ÿå‘˜çš„åº§ä½å·ã€‚æ¯é˜Ÿå ä¸€è¡Œï¼Œåº§ä½å·é—´ä»¥ 1 ä¸ªç©ºæ ¼åˆ†éš”ï¼Œè¡Œé¦–å°¾ä¸å¾—æœ‰å¤šä½™ç©ºæ ¼ã€‚å¦å¤–ï¼Œæ¯æ‰€é«˜æ ¡çš„ç¬¬ä¸€è¡ŒæŒ‰â€œ#Xâ€è¾“å‡ºè¯¥æ ¡çš„ç¼–å·Xï¼Œä» 1 å¼€å§‹ã€‚</p><p><strong>æ ·ä¾‹1</strong></p><p>è¾“å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">3 4 2</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#1</span><br><span class="line">1 4 7 10 13 16 19 22 25 28</span><br><span class="line">31 34 37 40 43 46 49 52 55 58</span><br><span class="line">61 63 65 67 69 71 73 75 77 79</span><br><span class="line">#2</span><br><span class="line">2 5 8 11 14 17 20 23 26 29</span><br><span class="line">32 35 38 41 44 47 50 53 56 59</span><br><span class="line">62 64 66 68 70 72 74 76 78 80</span><br><span class="line">82 84 86 88 90 92 94 96 98 100</span><br><span class="line">#3</span><br><span class="line">3 6 9 12 15 18 21 24 27 30</span><br><span class="line">33 36 39 42 45 48 51 54 57 60</span><br></pre></td></tr></table></figure><h1 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h1><p>è®©æ¯ä¸ªå­¦æ ¡çš„å­¦ç”Ÿæ’æˆä¸€æ’ï¼Œä¸ºæ¯ä¸€ä¸ªåº§ä½å®‰æ’å­¦ç”Ÿã€‚<br>æ¯æŠŠæ¤…å­ä¾æ¬¡ä»æ¯ä¸ªå­¦æ ¡é¢å‰èµ°è¿‡ï¼Œå¦‚æœè¿™ä¸ªå­¦æ ¡è¿˜æœ‰å­¦ç”Ÿæ²¡è¢«å®‰æ’åº§ä½ï¼Œé‚£å°±å®‰æ’ï¼Œå®‰æ’æ–¹æ¡ˆä¸ºï¼š<br>å¦‚æœæ­¤åº§ä½å‰ä¸€ä¸ªä¸æ˜¯æœ¬æ ¡å­¦ç”Ÿï¼Œé‚£ä¹ˆæŠ“ä¸€ä¸ªæ­¤æ ¡å­¦ç”Ÿåšåœ¨è¿™æŠŠæ¤…å­ä¸Šï¼Œå¹¶æ ‡è®°è¿™æŠŠæ¤…å­è¢«æ­¤æ ¡å­¦ç”Ÿåäº†ï¼Œ<br>å¦‚æœæ­¤åº§ä½å‰ä¸€ä¸ªæ˜¯æœ¬æ ¡å­¦ç”Ÿï¼Œé‚£æ­¤ä½ç½®ç©ºç€ï¼ŒæŠ“ä¸€ä¸ªæ­¤æ ¡å­¦ç”Ÿåšåœ¨è¿™æŠŠæ¤…å­çš„åä¸€æŠŠä¸Šï¼Œå¹¶æ ‡è®°è¿™æŠŠæ¤…å­çš„åä¸€æŠŠè¢«æ­¤æ ¡å­¦ç”Ÿåäº†ã€‚</p><p>å‚è€ƒï¼š<a href="https://www.liuchuo.net/archives/5082">https://www.liuchuo.net/archives/5082</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">2019/2/17 17:20:008 ms</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1E4</span>;</span><br><span class="line"><span class="keyword">int</span> sc[MAXN] = &#123;<span class="number">0</span>&#125;; <span class="comment">//ä¸€ä¸ªå­¦æ ¡çš„é˜Ÿä¼é‡Œé¢çš„äººæ•°</span></span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt;vec[MAXN]; <span class="comment">//ç¬¬iä¸ªåº§ä½ä¸Šåšçš„æ˜¯å“ªä¸ªå­¦æ ¡çš„å­¦ç”Ÿã€‚</span></span><br><span class="line"><span class="keyword">int</span> vis[MAXN] = &#123;<span class="number">0</span>&#125;; <span class="comment">//è¿™ä¸ªåº§ä½æœ‰æ²¡æœ‰åè¿‡äº†</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; sc[i];</span><br><span class="line">        sc[i] *= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> index = <span class="number">1</span>, num = <span class="number">0</span>; <span class="comment">//index:å­¦æ ¡çš„åºå·ï¼Œnum:å½“å‰å·²ç»æ’å®Œçš„å­¦æ ¡çš„æ•°é‡</span></span><br><span class="line">    <span class="keyword">while</span>(num &lt; n) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(vec[i].<span class="built_in">size</span>() &lt; sc[i]) <span class="comment">//è¿™ä¸ªå­¦æ ¡çš„é˜Ÿä¼è¿˜æ²¡æœ‰æ’å®Œ</span></span><br><span class="line">            &#123;</span><br><span class="line">                vec[i].<span class="built_in">push_back</span>(index); <span class="comment">//æ”¾åˆ°ä¸“å±çš„vectoré‡Œé¢</span></span><br><span class="line">                <span class="keyword">if</span>(num == n<span class="number">-1</span>) <span class="comment">//åªæœ‰ä¸€ä¸ªé˜Ÿä¼</span></span><br><span class="line">                    index += <span class="number">2</span>; <span class="comment">//å¾—éš”ç©ºæ’</span></span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    index++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(vec[i].<span class="built_in">size</span>() == sc[i] &amp;&amp; vis[i] == <span class="number">0</span>) <span class="comment">//å·²ç»æ’å®Œ</span></span><br><span class="line">            &#123;</span><br><span class="line">                vis[i] = <span class="number">1</span>;</span><br><span class="line">                num++; </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;#&quot;</span> &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; vec[i].<span class="built_in">size</span>(); j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(j != <span class="number">0</span> &amp;&amp; (j+<span class="number">1</span>) % <span class="number">10</span> == <span class="number">0</span>)</span><br><span class="line">                cout &lt;&lt; vec[i][j] &lt;&lt; endl;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                cout &lt;&lt; vec[i][j] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vector </tag>
            
            <tag> STL </tag>
            
            <tag> æ¨¡æ‹Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¨¡æ‹Ÿé™¤æ³•</title>
      <link href="/2019/02/17/%E6%A8%A1%E6%8B%9F%E9%99%A4%E6%B3%95/"/>
      <url>/2019/02/17/%E6%A8%A1%E6%8B%9F%E9%99%A4%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>å¤©æ¢¯èµ›ç»ƒä¹ L1-046. æ•´é™¤å…‰æ£</p><span id="more"></span><h1 id="L1-046-æ•´é™¤å…‰æ£"><a href="#L1-046-æ•´é™¤å…‰æ£" class="headerlink" title="L1-046 æ•´é™¤å…‰æ£"></a><a href="https://pintia.cn/problem-sets/994805046380707840/problems/994805084284633088">L1-046 æ•´é™¤å…‰æ£</a></h1><h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æ—¶é—´é™åˆ¶: 400 ms</span><br><span class="line">å†…å­˜é™åˆ¶: 64 MB</span><br><span class="line">ä»£ç é•¿åº¦é™åˆ¶: 16 KB</span><br></pre></td></tr></table></figure><p><strong>é¢˜ç›®æè¿°</strong></p><p>è¿™é‡Œæ‰€è°“çš„â€œå…‰æ£â€ï¼Œå¹¶ä¸æ˜¯æŒ‡å•èº«æ±ªå•¦~ è¯´çš„æ˜¯å…¨éƒ¨ç”±1ç»„æˆçš„æ•°å­—ï¼Œæ¯”å¦‚1ã€11ã€111ã€1111ç­‰ã€‚ä¼ è¯´ä»»ä½•ä¸€ä¸ªå…‰æ£éƒ½èƒ½è¢«ä¸€ä¸ªä¸ä»¥5ç»“å°¾çš„å¥‡æ•°æ•´é™¤ã€‚æ¯”å¦‚ï¼Œ111111å°±å¯ä»¥è¢«13æ•´é™¤ã€‚ ç°åœ¨ï¼Œä½ çš„ç¨‹åºè¦è¯»å…¥ä¸€ä¸ªæ•´æ•°<code>x</code>ï¼Œè¿™ä¸ªæ•´æ•°ä¸€å®šæ˜¯å¥‡æ•°å¹¶ä¸”ä¸ä»¥5ç»“å°¾ã€‚ç„¶åï¼Œç»è¿‡è®¡ç®—ï¼Œè¾“å‡ºä¸¤ä¸ªæ•°å­—ï¼šç¬¬ä¸€ä¸ªæ•°å­—<code>s</code>ï¼Œè¡¨ç¤º<code>x</code>ä¹˜ä»¥<code>s</code>æ˜¯ä¸€ä¸ªå…‰æ£ï¼Œç¬¬äºŒä¸ªæ•°å­—<code>n</code>æ˜¯è¿™ä¸ªå…‰æ£çš„ä½æ•°ã€‚è¿™æ ·çš„è§£å½“ç„¶ä¸æ˜¯å”¯ä¸€çš„,é¢˜ç›®è¦æ±‚ä½ è¾“å‡ºæœ€å°çš„è§£ã€‚</p><p>æç¤ºï¼šä¸€ä¸ªæ˜¾ç„¶çš„åŠæ³•æ˜¯é€æ¸å¢åŠ å…‰æ£çš„ä½æ•°ï¼Œç›´åˆ°å¯ä»¥æ•´é™¤<code>x</code>ä¸ºæ­¢ã€‚ä½†éš¾ç‚¹åœ¨äºï¼Œ<code>s</code>å¯èƒ½æ˜¯ä¸ªéå¸¸å¤§çš„æ•° â€”â€” æ¯”å¦‚ï¼Œç¨‹åºè¾“å…¥31ï¼Œé‚£ä¹ˆå°±è¾“å‡º3584229390681å’Œ15ï¼Œå› ä¸º31ä¹˜ä»¥3584229390681çš„ç»“æœæ˜¯111111111111111ï¼Œä¸€å…±15ä¸ª1ã€‚</p><p><strong>è¾“å…¥æ ¼å¼</strong></p><p>è¾“å…¥åœ¨ä¸€è¡Œä¸­ç»™å‡ºä¸€ä¸ªä¸ä»¥5ç»“å°¾çš„æ­£å¥‡æ•°x(&lt;1000)â€‹ã€‚</p><p><strong>è¾“å‡ºæ ¼å¼</strong></p><p>åœ¨ä¸€è¡Œä¸­è¾“å‡ºç›¸åº”çš„æœ€å°çš„<code>s</code>å’Œ<code>n</code>ï¼Œå…¶é—´ä»¥1ä¸ªç©ºæ ¼åˆ†éš”ã€‚</p><p><strong>æ ·ä¾‹1</strong></p><p>è¾“å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">31</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3584229390681 15</span><br></pre></td></tr></table></figure><h1 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h1><p>æ¨¡æ‹Ÿé™¤æ³•åº”ç”¨</p><p>ç„¶åæ¨¡æ‹Ÿé™¤æ³•çš„è¯</p><p><img src="/2019/02/17/%E6%A8%A1%E6%8B%9F%E9%99%A4%E6%B3%95/moni.png" alt></p><p>æˆ‘ä»¬å…ˆæ„é€ å‡ºæ¯”xå¤§çš„æœ€å°å…‰æ£æ•°ï¼Œç„¶ååˆ¤æ–­èƒ½ä¸èƒ½æ•´é™¤äºxï¼Œä¸èƒ½çš„è¯å°±ç»§ç»­å¾€è¿™ä¸ªå…‰æ£æ•°åé¢åŠ 1.</p><p>æµç¨‹ï¼š</p><ul><li>å…‰æ£æ•°èƒ½æ•´é™¤äºx<ul><li>è¾“å‡ºç­”æ¡ˆ</li></ul></li><li>ä¸èƒ½æ•´é™¤<ul><li>å…ˆç®—å‡ºç›®å‰å…‰æ£æ•°é™¤ä»¥xçš„å€¼</li><li>ç„¶ååœ¨åé¢åŠ ä¸Š1ï¼Œç„¶åç»§ç»­å¾ªç¯åˆ¤æ–­</li></ul></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">2019/2/17 14:29:184 ms</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">int</span> num = <span class="number">1</span>, len = <span class="number">1</span>; <span class="comment">//numä¸ºå…‰æ£æ•°ï¼Œlenä¸ºå…‰æ£æ•°é•¿åº¦</span></span><br><span class="line">    <span class="keyword">while</span>(num &lt; n) <span class="comment">//å…ˆæ„é€ å‡ºæ¯”xå¤§çš„æœ€å°å…‰æ£æ•°</span></span><br><span class="line">    &#123;</span><br><span class="line">        num = num*<span class="number">10</span> + <span class="number">1</span>;</span><br><span class="line">        len++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(num % n == <span class="number">0</span>) <span class="comment">//èƒ½æ•´é™¤äºxï¼Œå°±æ˜¯ç­”æ¡ˆ</span></span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; num / n &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; len;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">//ä¸èƒ½çš„è¯å°±è¿›ä½</span></span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; num / n; </span><br><span class="line">            num %= n; <span class="comment">//å–å¾—ä½™æ•°</span></span><br><span class="line">            num = num*<span class="number">10</span> + <span class="number">1</span>; <span class="comment">//å¾€ä½™æ•°åé¢+1</span></span><br><span class="line">            len++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ€ç»´é¢˜ç›® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Archå®‰è£…é…ç½®ç¬”è®°</title>
      <link href="/2019/02/15/Arch%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E7%AC%94%E8%AE%B0/"/>
      <url>/2019/02/15/Arch%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>æ•´ç†ä¸€ä¸‹ï¼Œæ–¹ä¾¿ä»¥åå®‰è£…Arch Linux</p><span id="more"></span><p>åˆ»å½•uç›˜ç•¥è¿‡ã€‚ã€‚ã€‚</p><h1 id="æ£€æµ‹æ˜¯å¦æ˜¯UEFIå¯åŠ¨"><a href="#æ£€æµ‹æ˜¯å¦æ˜¯UEFIå¯åŠ¨" class="headerlink" title="æ£€æµ‹æ˜¯å¦æ˜¯UEFIå¯åŠ¨"></a>æ£€æµ‹æ˜¯å¦æ˜¯UEFIå¯åŠ¨</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls /sys/firmware/efi/efivars</span><br></pre></td></tr></table></figure><ul><li>æ–‡ä»¶ä¸å­˜åœ¨è¯´æ˜ä¸æ˜¯ä»¥UEFIå¯åŠ¨</li></ul><h1 id="è¿æ¥WIFI"><a href="#è¿æ¥WIFI" class="headerlink" title="è¿æ¥WIFI"></a>è¿æ¥WIFI</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wifi-menu</span><br></pre></td></tr></table></figure><p>ç„¶åå¯ä»¥æ£€æµ‹è¿æ¥æ˜¯å¦æˆåŠŸ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping -c 5 www.baidu.com</span><br></pre></td></tr></table></figure><h1 id="æ›´æ–°ç³»ç»Ÿæ—¶é—´"><a href="#æ›´æ–°ç³»ç»Ÿæ—¶é—´" class="headerlink" title="æ›´æ–°ç³»ç»Ÿæ—¶é—´"></a>æ›´æ–°ç³»ç»Ÿæ—¶é—´</h1><h2 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">timedatectl set-ntp true</span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹æœåŠ¡çŠ¶æ€"><a href="#æŸ¥çœ‹æœåŠ¡çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹æœåŠ¡çŠ¶æ€"></a>æŸ¥çœ‹æœåŠ¡çŠ¶æ€</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">timedatectl status</span><br></pre></td></tr></table></figure><p>åŸå› </p><ul><li><p>ç³»ç»Ÿæ—¶é—´ä¸å¯¹å¯èƒ½é€ æˆ<code>ssl</code>è¿æ¥å¤±è´¥å¯¼è‡´å®‰è£…å‡ºé”™</p></li><li><p>éªŒè¯è½¯ä»¶åŒ…ç­¾åï¼Œç¡®å®šå…¬é’¥è¿‡æœŸæ²¡è¿‡æœŸ</p></li><li><code>https</code>è¯ä¹¦ï¼Œä¹Ÿè¦éªŒè¿‡æœŸæ—¶é—´</li></ul><h1 id="åˆ†åŒº"><a href="#åˆ†åŒº" class="headerlink" title="åˆ†åŒº"></a>åˆ†åŒº</h1><h2 id="æ£€æµ‹åˆ†åŒºæƒ…å†µ"><a href="#æ£€æµ‹åˆ†åŒºæƒ…å†µ" class="headerlink" title="æ£€æµ‹åˆ†åŒºæƒ…å†µ"></a>æ£€æµ‹åˆ†åŒºæƒ…å†µ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsblk</span><br></pre></td></tr></table></figure><h2 id="åˆ†åŒº-1"><a href="#åˆ†åŒº-1" class="headerlink" title="åˆ†åŒº"></a>åˆ†åŒº</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cfdisk /dev/sdx</span><br></pre></td></tr></table></figure><p><img src="/2019/02/15/Arch%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E7%AC%94%E8%AE%B0/fenqu.png" alt></p><h2 id="æ ¼å¼åŒ–åˆ†åŒº"><a href="#æ ¼å¼åŒ–åˆ†åŒº" class="headerlink" title="æ ¼å¼åŒ–åˆ†åŒº"></a>æ ¼å¼åŒ–åˆ†åŒº</h2><ul><li>æ ¼å¼åŒ–æˆ<code>ext4</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkfs.ext4 /dev/sdX2</span><br></pre></td></tr></table></figure><ul><li>æ ¼å¼<code>swap</code>åˆ†åŒºå¹¶æ¿€æ´»</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkswap /dev/sdX3</span><br><span class="line">swapon /dev/sdX3</span><br></pre></td></tr></table></figure><ul><li>æ ¼å¼åŒ–<code>efi</code>åˆ†åŒº</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkfs -t vfat /dev/sdX4</span><br></pre></td></tr></table></figure><h2 id="æŒ‚è½½åˆ†åŒº"><a href="#æŒ‚è½½åˆ†åŒº" class="headerlink" title="æŒ‚è½½åˆ†åŒº"></a>æŒ‚è½½åˆ†åŒº</h2><ul><li>é¦–å…ˆå°†æ ¹åˆ†åŒº <a href="https://wiki.archlinux.org/index.php/Mount">æŒ‚è½½</a> åˆ° <code>/mnt</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount /dev/sdX2 /mnt</span><br></pre></td></tr></table></figure><p>ï¼ˆå¤šä¸ªåˆ†åŒºçš„æƒ…å†µä¸‹å¯é€‰ï¼‰</p><ul><li>æŒ‚è½½<code>home</code>åˆ†åŒº</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /mnt/home</span><br><span class="line">mount /dev/sdx3 /mnt/home</span><br></pre></td></tr></table></figure><ul><li>æŒ‚è½½<code>boot</code>åˆ†åŒº(uefi)</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /mnt/boot/efi</span><br><span class="line">mount /dev/sdx4 /mnt/boot/efi</span><br></pre></td></tr></table></figure><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><h2 id="é€‰æ‹©é•œåƒæº"><a href="#é€‰æ‹©é•œåƒæº" class="headerlink" title="é€‰æ‹©é•œåƒæº"></a>é€‰æ‹©é•œåƒæº</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/pacman.d/mirrorlist</span><br></pre></td></tr></table></figure><p>åœ¨åˆ—è¡¨ä¸­è¶Šå‰çš„é•œåƒåœ¨ä¸‹è½½è½¯ä»¶åŒ…æ—¶æœ‰è¶Šé«˜çš„ä¼˜å…ˆæƒï¼Œå°†æ¸…åæºå¤åˆ¶åˆ°ç¬¬ä¸€è¡Œ</p><h2 id="å®‰è£…åŸºæœ¬ç³»ç»Ÿ"><a href="#å®‰è£…åŸºæœ¬ç³»ç»Ÿ" class="headerlink" title="å®‰è£…åŸºæœ¬ç³»ç»Ÿ"></a>å®‰è£…åŸºæœ¬ç³»ç»Ÿ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacstrap /mnt base base-devel</span><br></pre></td></tr></table></figure><h1 id="é…ç½®ç³»ç»Ÿ"><a href="#é…ç½®ç³»ç»Ÿ" class="headerlink" title="é…ç½®ç³»ç»Ÿ"></a>é…ç½®ç³»ç»Ÿ</h1><h2 id="Fstab"><a href="#Fstab" class="headerlink" title="Fstab"></a>Fstab</h2><p>ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆ <a href="https://wiki.archlinux.org/index.php/Fstab">fstab</a> æ–‡ä»¶ (ç”¨ <code>-U</code> æˆ– <code>-L</code> é€‰é¡¹è®¾ç½®UUID æˆ–å·æ ‡)ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">genfstab -U /mnt &gt;&gt; /mnt/etc/fstab</span><br></pre></td></tr></table></figure><h2 id="Chroot"><a href="#Chroot" class="headerlink" title="Chroot"></a>Chroot</h2><p><a href="https://wiki.archlinux.org/index.php/Change_root">Change root</a> åˆ°æ–°å®‰è£…çš„ç³»ç»Ÿï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arch-chroot /mnt</span><br></pre></td></tr></table></figure><h2 id="æ—¶åŒº"><a href="#æ—¶åŒº" class="headerlink" title="æ—¶åŒº"></a>æ—¶åŒº</h2><p>è®¾ç½®æ—¶åŒº</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br></pre></td></tr></table></figure><p>ç¡¬ä»¶æ—¶é—´è®¾ç½®ï¼Œé»˜è®¤ä¸º<code>UTC</code>æ—¶é—´</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hwclock --systohc </span><br></pre></td></tr></table></figure><h2 id="æœ¬åœ°åŒ–"><a href="#æœ¬åœ°åŒ–" class="headerlink" title="æœ¬åœ°åŒ–"></a>æœ¬åœ°åŒ–</h2><p><code>/etc/locale.gen</code> æ˜¯ä¸€ä¸ªä»…åŒ…å«æ³¨é‡Šæ–‡æ¡£çš„æ–‡æœ¬æ–‡ä»¶ã€‚æŒ‡å®šæ‚¨éœ€è¦çš„æœ¬åœ°åŒ–ç±»å‹ï¼Œåªéœ€ç§»é™¤å¯¹åº”è¡Œå‰é¢çš„æ³¨é‡Šç¬¦å·ï¼ˆ<code>ï¼ƒ</code>ï¼‰å³å¯ï¼Œå»ºè®®é€‰æ‹©å¸¦ <code>UTF-8</code> çš„é¡¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># nano /etc/locale.gen</span><br><span class="line">en_US.UTF-8 UTF-8</span><br><span class="line">zh_CN.UTF-8 UTF-8</span><br><span class="line">zh_TW.UTF-8 UTF-8</span><br></pre></td></tr></table></figure><p>æ¥ç€æ‰§è¡Œä»¥ç”Ÿæˆ locale è®¯æ¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">locale-gen</span><br><span class="line">echo LANG=en_US.UTF-8 &gt; /etc/locale.conf</span><br></pre></td></tr></table></figure><h2 id="ç½‘ç»œ"><a href="#ç½‘ç»œ" class="headerlink" title="ç½‘ç»œ"></a>ç½‘ç»œ</h2><p>è®¾ç½®ä¸»æœºå</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo cc &gt; /etc/hostname</span><br></pre></td></tr></table></figure><p>æ·»åŠ å¯¹åº”çš„ä¿¡æ¯åˆ°<code>host</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># nano /etc/hosts</span><br><span class="line">127.0.0.1localhost</span><br><span class="line">::1localhost</span><br><span class="line">127.0.1.1myhostname.localdomainmyhostname</span><br></pre></td></tr></table></figure><h2 id="Rootå¯†ç "><a href="#Rootå¯†ç " class="headerlink" title="Rootå¯†ç "></a>Rootå¯†ç </h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…å¼•å¯¼"><a href="#å®‰è£…å¼•å¯¼" class="headerlink" title="å®‰è£…å¼•å¯¼"></a>å®‰è£…å¼•å¯¼</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#åé¢ä¸¤ä¸ªåŒ…å¤šç³»ç»Ÿçš„æƒ…å†µä¸‹å¯ä»¥é€‰è£…</span><br><span class="line">pacman -S grub efibootmgr ntfs-3g os-prober</span><br></pre></td></tr></table></figure><ul><li>éuefi</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grub-install --target=i386-pc /dev/sdx </span><br><span class="line">#/dev/sdx æ˜¯å·²ç»å®Œæˆåˆ†åŒºçš„ç£ç›˜ï¼Œgrub å°†å®‰è£…åˆ°å®ƒä¸Šé¢ã€‚</span><br></pre></td></tr></table></figure><ul><li>uefi</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=grub</span><br><span class="line"># æ³¨æ„è¦æŒ‚è½½/boot/efiï¼Œè§ä¸Šé¢æŒ‚è½½bootåˆ†åŒºé‚£æ­¥</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆä¸»é…ç½®æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub-mkconfig -o /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…å¾®ç "><a href="#å®‰è£…å¾®ç " class="headerlink" title="å®‰è£…å¾®ç "></a>å®‰è£…å¾®ç </h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S amd-ucode</span><br></pre></td></tr></table></figure><h2 id="æ— çº¿è¿æ¥"><a href="#æ— çº¿è¿æ¥" class="headerlink" title="æ— çº¿è¿æ¥"></a>æ— çº¿è¿æ¥</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S iw wpa_supplicant dialog</span><br></pre></td></tr></table></figure><h1 id="é‡å¯"><a href="#é‡å¯" class="headerlink" title="é‡å¯"></a>é‡å¯</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">exit #è¿”å›å®‰è£…ç¯å¢ƒ</span><br><span class="line">umount -R /mnt</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure><h1 id="é…ç½®æ–°ç³»ç»Ÿ"><a href="#é…ç½®æ–°ç³»ç»Ÿ" class="headerlink" title="é…ç½®æ–°ç³»ç»Ÿ"></a>é…ç½®æ–°ç³»ç»Ÿ</h1><h2 id="æ–°å»ºç”¨æˆ·"><a href="#æ–°å»ºç”¨æˆ·" class="headerlink" title="æ–°å»ºç”¨æˆ·"></a>æ–°å»ºç”¨æˆ·</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">useradd -m -G wheel cc</span><br><span class="line">passwd cc</span><br></pre></td></tr></table></figure><p>è®¾ç½®æƒé™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/sudoers</span><br><span class="line">åœ¨ root ALL=(ALL) ALL ä¸‹é¢æ·»åŠ </span><br><span class="line">ç”¨æˆ·å ALL=(ALL) ALL</span><br><span class="line">ä¸ºä½ åˆšæ‰åˆ›å»ºçš„ç”¨æˆ· æ·»åŠ sudoæƒé™</span><br></pre></td></tr></table></figure><h2 id="æ·»åŠ archcnæº"><a href="#æ·»åŠ archcnæº" class="headerlink" title="æ·»åŠ archcnæº"></a>æ·»åŠ archcnæº</h2><p>åœ¨ <code>/etc/pacman.conf</code> æ–‡ä»¶æœ«å°¾æ·»åŠ ä¸¤è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[archlinuxcn]</span><br><span class="line">Server = https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/$arch</span><br></pre></td></tr></table></figure><p>ç„¶åè¯·å®‰è£… <code>archlinuxcn-keyring</code> åŒ…ä»¥å¯¼å…¥<code>GPG key</code>ã€‚</p><h2 id="å¸¸ç”¨è½¯ä»¶"><a href="#å¸¸ç”¨è½¯ä»¶" class="headerlink" title="å¸¸ç”¨è½¯ä»¶"></a>å¸¸ç”¨è½¯ä»¶</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S git make cmake openssh gcc g++ gdb vim wget sshpass net-tools ntfs-3g</span><br></pre></td></tr></table></figure><h2 id="linux-ltså†…æ ¸"><a href="#linux-ltså†…æ ¸" class="headerlink" title="linux-ltså†…æ ¸"></a>linux-ltså†…æ ¸</h2><p>æ›´æ¢ä¸ºltså†…æ ¸</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S linux-lts</span><br></pre></td></tr></table></figure><p>å¸è½½åŸå†…æ ¸</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> pacman -Q | grep linux</span></span><br><span class="line">archlinux-appstream-data 20190424-1</span><br><span class="line">archlinux-keyring 20190123-2</span><br><span class="line">archlinuxcn-keyring 20190422-1</span><br><span class="line">libutil-linux 2.33.2-1</span><br><span class="line">linux 5.0.10.arch1-1</span><br><span class="line">linux-api-headers 5.0.7-1</span><br><span class="line">linux-firmware 20190424.4b6cf2b-1</span><br><span class="line">linux-lts 4.19.37-1</span><br><span class="line">util-linux 2.33.2-1</span><br><span class="line"><span class="meta">$</span><span class="bash"> pacman -R linux</span></span><br><span class="line"><span class="meta">$</span><span class="bash">  sudo grub-mkconfig -o /boot/grub/grub.cfg</span></span><br></pre></td></tr></table></figure><h2 id="æ¡Œé¢ç¯å¢ƒ"><a href="#æ¡Œé¢ç¯å¢ƒ" class="headerlink" title="æ¡Œé¢ç¯å¢ƒ"></a>æ¡Œé¢ç¯å¢ƒ</h2><p><img src="/2019/02/15/Arch%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E7%AC%94%E8%AE%B0/3.png" alt></p><ol><li><p>å®‰è£…<code>xorg</code></p><p><code>Xorg</code>æ˜¯<code>Linux</code>ä¸‹çš„ä¸€ä¸ªè‘—åçš„å¼€æºå›¾å½¢æœåŠ¡ï¼Œæˆ‘ä»¬çš„æ¡Œé¢ç¯å¢ƒéœ€è¦<code>Xorg</code>çš„æ”¯æŒã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S xorg-server xorg-xinit</span><br></pre></td></tr></table></figure></li><li><p>æ¡Œé¢ç¯å¢ƒ</p><ul><li><p><code>xfce</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S xfce4 xfce4-goodies</span><br></pre></td></tr></table></figure></li><li><p><code>KDE(Plasma)</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S plasma kde-applications</span><br></pre></td></tr></table></figure><p>æ›´å¤š:<a href="https://wiki.archlinux.org/index.php/Desktop_environment_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87">archwiki</a></p></li></ul></li><li><p>æ¡Œé¢ç®¡ç†å™¨</p><p>å®‰è£…å¥½äº†æ¡Œé¢ç¯å¢ƒåŒ…ä»¥åï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…ä¸€ä¸ªå›¾å½¢åŒ–çš„æ¡Œé¢ç®¡ç†å™¨æ¥å¸®åŠ©æˆ‘ä»¬ç™»å½•å¹¶ä¸”é€‰æ‹©æˆ‘ä»¬ä½¿ç”¨çš„æ¡Œé¢ç¯å¢ƒï¼Œè¿™é‡Œæˆ‘æ¨èä½¿ç”¨<code>sddm</code>ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S sddm</span><br></pre></td></tr></table></figure></li><li><p>å¼€æœºè‡ªå¯<code>sddm</code>æœåŠ¡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable sddm</span><br></pre></td></tr></table></figure></li></ol><h2 id="yay"><a href="#yay" class="headerlink" title="yay"></a>yay</h2><p>Archæ‹¥æœ‰ä¸€ä¸ªå¼ºå¤§çš„ç”¨æˆ·åº“AURå³Arch User Repositoryï¼Œä¸ºæˆ‘ä»¬æä¾›äº†å®˜æ–¹åŒ…ä¹‹å¤–çš„å„ç§è½¯ä»¶åŒ…ï¼Œä¸€äº›é—­æºçš„è½¯ä»¶åŒ…ä¹Ÿå¯ä»¥åœ¨ä¸Šé¢æ‰¾åˆ°ï¼Œå¯ä»¥è¯´AURæå¤§åœ°ä¸°å¯Œäº†è½¯ä»¶åŒ…çš„ç§ç±»ä¸æ•°é‡ï¼Œå¹¶å¯ä»¥é…åˆyayè¿™æ ·çš„å·¥å…·ä¸ºç”¨æˆ·çœä¸‹å¤§é‡å®‰è£…ã€æ›´æ–°è½¯ä»¶åŒ…çš„æ—¶é—´ã€‚</p><p>yayå®é™…ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªè½¯ä»¶åŒ…ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒçœ‹æˆæ˜¯å¯¹pacmançš„åŒ…è£…ï¼Œå®ƒå…¼å®¹pacmançš„æ‰€æœ‰æ“ä½œï¼Œæœ€å¤§çš„ä¸åŒæ˜¯æˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ–¹ä¾¿åœ°å®‰è£…ä¸ç®¡ç†AURä¸­çš„åŒ…ï¼Œä¸‹é¢çš„è®¸å¤šè½¯ä»¶åŒ…éƒ½æ˜¯åœ¨AURåº“ä¸­çš„ï¼Œä¹Ÿéƒ½æ˜¯ä½¿ç”¨AURæ¥å®‰è£…çš„ã€‚</p><p><strong>å®‰è£…</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S yay</span><br></pre></td></tr></table></figure><h2 id="zsh"><a href="#zsh" class="headerlink" title="zsh"></a>zsh</h2><ul><li>å®‰è£…</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pacman -S zsh</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">è®¾ç½®zshä¸ºé»˜è®¤shell</span></span><br><span class="line">sudo chsh -s /bin/zsh username</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">å®‰è£…oh-my-zsh</span></span><br><span class="line">yay -S oh-my-zsh-git</span><br></pre></td></tr></table></figure><hr><p><strong>ä¿®æ”¹zshæç¤ºä¸ºè‹±æ–‡</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.zshrc</span><br><span class="line"></span><br><span class="line">LANGUAGE=&quot;en&quot;</span><br></pre></td></tr></table></figure><p><strong>æ’ä»¶</strong></p><ul><li>zsh-autosuggestions</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/zsh-users/zsh-autosuggestions $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-autosuggestions</span><br></pre></td></tr></table></figure><ul><li><code>zsh-syntax-highlighting</code></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/zsh-users/zsh-syntax-highlighting.git $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-syntax-highlighting</span><br></pre></td></tr></table></figure><ul><li>é…ç½®<code>~/.zshrc</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plugins=( zsh-autosuggestions zsh-syntax-highlighting)</span><br></pre></td></tr></table></figure><hr><h2 id="é…ç½®ç½‘ç»œ"><a href="#é…ç½®ç½‘ç»œ" class="headerlink" title="é…ç½®ç½‘ç»œ"></a>é…ç½®ç½‘ç»œ</h2><ul><li>å®‰è£…networkmanager</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S networkmanager</span><br></pre></td></tr></table></figure><ul><li>è®¾ç½®å¼€æœºè‡ªå¯å¹¶å¯ç”¨</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable NetworkManager</span><br><span class="line">systemctl start NetworkManager</span><br></pre></td></tr></table></figure><ul><li><p>å®‰è£…å‰ç«¯æ’ä»¶</p><ul><li><p>GTK3+å‰ç«¯å°ç¨‹åºï¼Œå·¥ä½œåœ¨Xorgç¯å¢ƒä¸‹ï¼Œå¸¦æœ‰ä¸€ä¸ªç³»ç»Ÿæ‰˜ç›˜ã€‚ </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S network-manager-applet</span><br></pre></td></tr></table></figure></li><li><p>kdeå¯ä»¥åªå®‰è£…plasma-nmï¼Œç„¶åé€šè¿‡ é¢æ¿çš„é€‰é¡¹ &gt; æ·»åŠ éƒ¨ä»¶ &gt; ç½‘ç»œ æ¥æŠŠå®ƒæ·»åŠ åˆ°KDEçš„ä»»åŠ¡æ ä¸Šã€‚</p></li></ul></li></ul><h2 id="ä¸­æ–‡è¾“å…¥æ³•"><a href="#ä¸­æ–‡è¾“å…¥æ³•" class="headerlink" title="ä¸­æ–‡è¾“å…¥æ³•"></a>ä¸­æ–‡è¾“å…¥æ³•</h2><p><strong>æœç‹—è¾“å…¥æ³•</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S fcitx fcitx-im fcitx-sogoupinyin fcitx-configtool zenity</span><br></pre></td></tr></table></figure><p>è£…å®Œä»¥åéœ€è¦ä¿®æ”¹<code>~/.xprofile</code>æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶å¼€å¤´åŠ å…¥ä¸‰è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export XMODIFIERS=&quot;@im=fcitx&quot;</span><br><span class="line">export GTK_IM_MODULE=&quot;fcitx&quot;</span><br><span class="line">export QT_IM_MODULE=&quot;fcitx&quot;</span><br></pre></td></tr></table></figure><p>å¯ä»¥è§£å†³ä¸€äº›è½¯ä»¶æ— æ³•è°ƒå‡ºfcitxçš„é—®é¢˜ã€‚</p><h2 id="å­—ä½“"><a href="#å­—ä½“" class="headerlink" title="å­—ä½“"></a>å­—ä½“</h2><ol><li>å®‰è£…å­—ä½“</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S ttf-dejavu ttf-monaco noto-fonts noto-fonts-cjk noto-fonts-emoji noto-fonts-extra otf-fira-code</span><br></pre></td></tr></table></figure><ol><li><p>é€‰æ‹©</p><ul><li>å­—ä½“: <code>noto fonts cjk</code>,</li><li>ç­‰å®½å­—ä½“: <code>Fira Code</code>æˆ–è€…<code>monaco</code></li></ul></li><li><p>é…ç½®æ–‡ä»¶</p></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> .config/fontconfig/fonts.conf</span></span><br><span class="line"></span><br><span class="line">&lt;?xml version=&#x27;1.0&#x27;?&gt;</span><br><span class="line">&lt;!DOCTYPE fontconfig SYSTEM &#x27;fonts.dtd&#x27;&gt;</span><br><span class="line">&lt;fontconfig&gt;</span><br><span class="line">    &lt;alias&gt;</span><br><span class="line">        &lt;family&gt;serif&lt;/family&gt;</span><br><span class="line">        &lt;prefer&gt;</span><br><span class="line">            &lt;family&gt;Noto Serif&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Noto Serif CJK SC&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Noto Serif CJK TC&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Noto Serif CJK JP&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Noto Serif CJK KR&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Noto Color Emoji&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Noto Emoji&lt;/family&gt;</span><br><span class="line">        &lt;/prefer&gt;</span><br><span class="line">    &lt;/alias&gt;</span><br><span class="line">    &lt;alias&gt;</span><br><span class="line">        &lt;family&gt;sans-serif&lt;/family&gt;</span><br><span class="line">        &lt;prefer&gt;</span><br><span class="line">            &lt;family&gt;Noto Sans&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Noto Sans CJK SC&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Noto Sans CJK TC&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Noto Sans CJK JP&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Noto Sans CJK KR&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Noto Color Emoji&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Noto Emoji&lt;/family&gt;</span><br><span class="line">        &lt;/prefer&gt;</span><br><span class="line">    &lt;/alias&gt;</span><br><span class="line">    &lt;alias&gt;</span><br><span class="line">        &lt;family&gt;sans-sans&lt;/family&gt;</span><br><span class="line">        &lt;prefer&gt;</span><br><span class="line">            &lt;family&gt;Noto Sans CJK SC&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Noto Sans CJK TC&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Noto Sans CJK JP&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Noto Sans CJK KR&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Noto Color Emoji&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Noto Emoji&lt;/family&gt;</span><br><span class="line">        &lt;/prefer&gt;</span><br><span class="line">    &lt;/alias&gt;</span><br><span class="line">    &lt;alias&gt;</span><br><span class="line">        &lt;family&gt;tahoma&lt;/family&gt;</span><br><span class="line">        &lt;prefer&gt;</span><br><span class="line">            &lt;family&gt;Noto Sans CJK SC&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Noto Color Emoji&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Noto Emoji&lt;/family&gt;</span><br><span class="line">        &lt;/prefer&gt;</span><br><span class="line">    &lt;/alias&gt;</span><br><span class="line">    &lt;alias&gt;</span><br><span class="line">        &lt;family&gt;monospace&lt;/family&gt;</span><br><span class="line">        &lt;prefer&gt;</span><br><span class="line">            &lt;family&gt;Fira Code&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Noto Sans CJK SC&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Noto Color Emoji&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Noto Emoji&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;Noto Sans Mono&lt;/family&gt;</span><br><span class="line">            &lt;family&gt;DejaVu Sans Mono&lt;/family&gt;</span><br><span class="line">        &lt;/prefer&gt;</span><br><span class="line">    &lt;/alias&gt;</span><br><span class="line">    &lt;alias&gt;</span><br><span class="line">        &lt;family&gt;emoji&lt;/family&gt;</span><br><span class="line">        &lt;default&gt;</span><br><span class="line">            &lt;family&gt;Noto Color Emoji&lt;/family&gt;</span><br><span class="line">        &lt;/default&gt;</span><br><span class="line">    &lt;/alias&gt;</span><br><span class="line">    &lt;alias&gt;</span><br><span class="line">        &lt;family&gt;Apple Color Emoji&lt;/family&gt;</span><br><span class="line">        &lt;prefer&gt;</span><br><span class="line">            &lt;family&gt;Noto Color Emoji&lt;/family&gt;</span><br><span class="line">        &lt;/prefer&gt;</span><br><span class="line">        &lt;default&gt;</span><br><span class="line">            &lt;family&gt;sans-serif&lt;/family&gt;</span><br><span class="line">        &lt;/default&gt;</span><br><span class="line">    &lt;/alias&gt;</span><br><span class="line">    &lt;alias&gt;</span><br><span class="line">        &lt;family&gt;Segoe UI Emoji&lt;/family&gt;</span><br><span class="line">        &lt;prefer&gt;</span><br><span class="line">            &lt;family&gt;Noto Color Emoji&lt;/family&gt;</span><br><span class="line">        &lt;/prefer&gt;</span><br><span class="line">        &lt;default&gt;</span><br><span class="line">            &lt;family&gt;sans-serif&lt;/family&gt;</span><br><span class="line">        &lt;/default&gt;</span><br><span class="line">    &lt;/alias&gt;</span><br><span class="line">    &lt;match target=&quot;font&quot;&gt;</span><br><span class="line">        &lt;edit mode=&quot;assign&quot; name=&quot;antialias&quot;&gt;</span><br><span class="line">            &lt;bool&gt;true&lt;/bool&gt;</span><br><span class="line">        &lt;/edit&gt;</span><br><span class="line">        &lt;edit mode=&quot;assign&quot; name=&quot;rgba&quot;&gt;</span><br><span class="line">            &lt;const&gt;rgb&lt;/const&gt;</span><br><span class="line">        &lt;/edit&gt;</span><br><span class="line">        &lt;edit mode=&quot;assign&quot; name=&quot;hinting&quot;&gt;</span><br><span class="line">            &lt;bool&gt;false&lt;/bool&gt;</span><br><span class="line">        &lt;/edit&gt;</span><br><span class="line">        &lt;edit mode=&quot;assign&quot; name=&quot;hintstyle&quot;&gt;</span><br><span class="line">            &lt;const&gt;hintnone&lt;/const&gt;</span><br><span class="line">        &lt;/edit&gt;</span><br><span class="line">    &lt;/match&gt;</span><br><span class="line">    &lt;dir&gt;~/.fonts&lt;/dir&gt;</span><br><span class="line">    &lt;match target=&quot;font&quot;&gt;</span><br><span class="line">        &lt;edit mode=&quot;assign&quot; name=&quot;hinting&quot;&gt;</span><br><span class="line">            &lt;bool&gt;false&lt;/bool&gt;</span><br><span class="line">        &lt;/edit&gt;</span><br><span class="line">    &lt;/match&gt;</span><br><span class="line">    &lt;match target=&quot;font&quot;&gt;</span><br><span class="line">        &lt;edit mode=&quot;assign&quot; name=&quot;hintstyle&quot;&gt;</span><br><span class="line">            &lt;const&gt;hintnone&lt;/const&gt;</span><br><span class="line">        &lt;/edit&gt;</span><br><span class="line">    &lt;/match&gt;</span><br><span class="line">&lt;/fontconfig&gt;</span><br></pre></td></tr></table></figure><p>å‚è€ƒ:</p><p><a href="https://wiki.archlinux.org/index.php/Localization/Simplified_Chinese_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87">Localization/Simplified Chinese</a>)</p><p><a href="https://wiki.archlinux.org/index.php/Font_Configuration/Chinese_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87">Font Configuration/Chinese</a>)</p><p><a href="https://blog.firerain.me/article/14">Arch Linuxå­—ä½“æ¸²æŸ“(fontconfig)-fonts.confå‚è€ƒ</a></p><h2 id="synaps"><a href="#synaps" class="headerlink" title="synaps"></a>synaps</h2><p>Synapseæ˜¯ä¸€ä¸ªå¿«é€Ÿçš„è½¯ä»¶å¯åŠ¨å™¨ï¼Œå¯ä»¥æ–¹ä¾¿åœ°æŸ¥æ‰¾å®‰è£…çš„è½¯ä»¶ï¼Œè®¾ç½®å¿«æ·é”®ä½¿ç”¨å†ä¹Ÿä¸ç”¨æ‰¾è½¯ä»¶å…¥å£äº†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S synapse</span><br></pre></td></tr></table></figure><h2 id="å‰ªè´´æ¿"><a href="#å‰ªè´´æ¿" class="headerlink" title="å‰ªè´´æ¿"></a>å‰ªè´´æ¿</h2><ul><li>åˆ é™¤è‡ªå¸¦çš„<code>klipper</code>ï¼ˆkdeï¼‰</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /usr/share/plasma/plasmoids/org.kde.plasma.clipboard</span><br></pre></td></tr></table></figure><ul><li>å®‰è£…<code>copyq</code></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S copyq</span><br></pre></td></tr></table></figure><h2 id="xournal"><a href="#xournal" class="headerlink" title="xournal"></a>xournal</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S xournal</span><br></pre></td></tr></table></figure><h2 id="VirtualBox"><a href="#VirtualBox" class="headerlink" title="VirtualBox"></a>VirtualBox</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S virtualbox virtualbox-ext-vnc virtualbox-guest-iso virtualbox-host-modules-arch</span><br></pre></td></tr></table></figure><p>å†å»å®˜ç½‘ä¸‹è½½Oracle VM VirtualBox Extension Pack ï¼Œåœ¨è®¾ç½®ä¸­å¯¼å…¥ä½¿ç”¨ã€‚å®‰è£…windowsçš„è¿‡ç¨‹ä¸åœ¨è¿™é‡Œè®²è§£ï¼Œè®°å¾—å®‰è£…ä¹‹ååœ¨windowså†…å®‰è£…æ‰©å±•å®¢æˆ·ç«¯è½¯ä»¶å³å¯ã€‚</p><h2 id="ç³»ç»Ÿå¤‡ä»½"><a href="#ç³»ç»Ÿå¤‡ä»½" class="headerlink" title="ç³»ç»Ÿå¤‡ä»½"></a>ç³»ç»Ÿå¤‡ä»½</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pacman -S timeshifts</span><br><span class="line">systemctl enable --now cronie.service</span><br></pre></td></tr></table></figure><h2 id="å£°å¡"><a href="#å£°å¡" class="headerlink" title="å£°å¡"></a>å£°å¡</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pacman -S alsa-utils pulseaudio pulseaudio-bluetooth</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">å‰ç«¯</span></span><br><span class="line">pacman -S pavucontrol</span><br></pre></td></tr></table></figure><h2 id="è“ç‰™"><a href="#è“ç‰™" class="headerlink" title="è“ç‰™"></a>è“ç‰™</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S bluez bluez-utils</span><br><span class="line">sudo systemctl start bluetooth.service</span><br><span class="line">sudo systemctl enable bluetooth.service</span><br></pre></td></tr></table></figure><p>å›¾å½¢ç•Œé¢ä½¿ç”¨<code>blueman</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S blueman</span><br></pre></td></tr></table></figure><p>ä¸ºäº†æ¶ˆé™¤ç™»å½•æ—¶è“ç‰™è¯·æ±‚æƒé™ï¼Œåˆ›å»º<code>/etc/polkit-1/rules.d/81-blueman.rules</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">polkit.addRule(function(action, subject) &#123;</span><br><span class="line">  if (action.id == &quot;org.blueman.rfkill.setstate&quot; &amp;&amp; subject.local &amp;&amp; subject.active &amp;&amp; subject.isInGroup(&quot;wheel&quot;)) &#123;</span><br><span class="line">      return polkit.Result.YES;</span><br><span class="line">  &#125;</span><br><span class="line">  if (action.id == &quot;org.blueman.network.setup&quot; &amp;&amp; subject.local &amp;&amp; subject.active &amp;&amp; subject.isInGroup(&quot;wheel&quot;)) &#123;</span><br><span class="line">      return polkit.Result.YES;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="æ–‡æœ¬å·¥å…·"><a href="#æ–‡æœ¬å·¥å…·" class="headerlink" title="æ–‡æœ¬å·¥å…·"></a>æ–‡æœ¬å·¥å…·</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S foxitreader typora visual-studio-code-bin mousepad</span><br></pre></td></tr></table></figure><h2 id="ç¼–è¯‘å™¨"><a href="#ç¼–è¯‘å™¨" class="headerlink" title="ç¼–è¯‘å™¨"></a>ç¼–è¯‘å™¨</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S codeblocks</span><br></pre></td></tr></table></figure><h2 id="äº’è”ç½‘å·¥å…·"><a href="#äº’è”ç½‘å·¥å…·" class="headerlink" title="äº’è”ç½‘å·¥å…·"></a>äº’è”ç½‘å·¥å…·</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S firefox chromium filezilla teamviewer</span><br></pre></td></tr></table></figure><p><strong>teamviewer not ready</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start teamviewerd</span><br><span class="line">sudo systemctl enable teamviewerd</span><br></pre></td></tr></table></figure><h2 id="å›¾å½¢è½¯ä»¶"><a href="#å›¾å½¢è½¯ä»¶" class="headerlink" title="å›¾å½¢è½¯ä»¶"></a>å›¾å½¢è½¯ä»¶</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S flameshot nomacs</span><br></pre></td></tr></table></figure><h2 id="jdk8"><a href="#jdk8" class="headerlink" title="jdk8"></a>jdk8</h2><ol><li><p>åˆ°<a href="https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a>ä¸‹è½½jdk8</p></li><li><p>è§£å‹å¹¶ä¸”é…ç½®ç¯å¢ƒå˜é‡</p></li></ol><h2 id="æ˜¾å¡"><a href="#æ˜¾å¡" class="headerlink" title="æ˜¾å¡"></a>æ˜¾å¡</h2><p><a href="https://wiki.archlinux.org/index.php/Xorg">Xorg - ArchWiki</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S xf86-video-amdgpu mesa</span><br></pre></td></tr></table></figure><h2 id="ç¾åŒ–"><a href="#ç¾åŒ–" class="headerlink" title="ç¾åŒ–"></a>ç¾åŒ–</h2><p><img src="/2019/02/15/Arch%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E7%AC%94%E8%AE%B0/1.png" alt></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ä¸»é¢˜Materia KDE</span></span><br><span class="line">pacman -S materia-kde kvantum-theme-materia</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å›¾æ ‡papirus</span></span><br><span class="line">pacman -S papirus-icon-theme</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å…‰æ ‡</span></span><br><span class="line">yay -S capitaine-cursors</span><br></pre></td></tr></table></figure><p>å¯¹åº”çš„ä»‹ç»</p><ul><li><p><a href="https://github.com/PapirusDevelopmentTeam/materia-kde">Materia KDE</a></p></li><li><p><a href="https://github.com/PapirusDevelopmentTeam/papirus-icon-theme">papirus</a></p></li><li><a href="https://github.com/keeferrourke/capitaine-cursors">macâ€”capitaine-cursors</a></li></ul><h2 id="KDEç³»éƒ¨åˆ†è½¯ä»¶"><a href="#KDEç³»éƒ¨åˆ†è½¯ä»¶" class="headerlink" title="KDEç³»éƒ¨åˆ†è½¯ä»¶"></a>KDEç³»éƒ¨åˆ†è½¯ä»¶</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S dolphin dolphin-plugins konsole ark</span><br></pre></td></tr></table></figure><ul><li>Simple System Monitor</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ä¸‹è½½https://github.com/dhabyx/plasma-simpleMonitor/releases</span></span><br><span class="line">plasmapkg2 -i plasma-simpleMonitor-0.6.plasmoid</span><br></pre></td></tr></table></figure><ul><li>æ¡Œé¢æ·»åŠ ç½‘ç»œç›‘è§†å™¨</li></ul><p><img src="/2019/02/15/Arch%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E7%AC%94%E8%AE%B0/4.png" alt></p><h2 id="è§£å†³é—®é¢˜"><a href="#è§£å†³é—®é¢˜" class="headerlink" title="è§£å†³é—®é¢˜"></a>è§£å†³é—®é¢˜</h2><ul><li><code>systemd-backlight@backlight:acpi_video0.service failed</code></li></ul><p>æ·»åŠ backlightæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ååˆ°grubæ–‡ä»¶,ç„¶åç¦æ­¢ä¸Šé¢çš„service</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ls /sys/class/backlight/</span></span><br><span class="line">radeon_bl0</span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo vim /etc/default/grub</span></span><br><span class="line">GRUB_CMDLINE_LINUX_DEFAULT=&quot;quiet acpi_backlight=radeon_bl0&quot;</span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo grub-mkconfig -o /boot/grub/grub.cfg</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo systemctl mask systemd-backlight@backlight:acpi_video0.service</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> reboot</span></span><br></pre></td></tr></table></figure><h2 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pacman -S docker</span><br><span class="line">sudo systemctl enable docker</span><br><span class="line">sudo systemctl start docker</span><br><span class="line">sudo groupadd docker</span><br><span class="line">sudo gpasswd -a $&#123;USER&#125; docker</span><br></pre></td></tr></table></figure><h2 id="åˆ’è¯ç¿»è¯‘"><a href="#åˆ’è¯ç¿»è¯‘" class="headerlink" title="åˆ’è¯ç¿»è¯‘"></a>åˆ’è¯ç¿»è¯‘</h2><p>å‚è€ƒï¼š<a href="https://blog.einverne.info/post/2018/08/goldendict.html">https://blog.einverne.info/post/2018/08/goldendict.html</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S goldendict</span><br></pre></td></tr></table></figure><ul><li>æœ‰é“çš„æº</li></ul><p><code>http://dict.youdao.com/search?q=%GDWORD%&amp;ue=utf8</code></p><ul><li>Chinese Wikipedia</li></ul><p><code>https://zh.wikipedia.org/w</code></p><ul><li>Chinese Wiktionary</li></ul><p><code>https://zh.wiktionary.org/w</code></p><h2 id="16è¿›åˆ¶æŸ¥çœ‹å™¨"><a href="#16è¿›åˆ¶æŸ¥çœ‹å™¨" class="headerlink" title="16è¿›åˆ¶æŸ¥çœ‹å™¨"></a>16è¿›åˆ¶æŸ¥çœ‹å™¨</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pacmam -S ghex   #æŸ¥çœ‹åŠŸèƒ½</span><br><span class="line">pacman -S okteta #ä¿®æ”¹åŠŸèƒ½</span><br></pre></td></tr></table></figure><h2 id="ç¦»çº¿æ–‡æ¡£ç®¡ç†"><a href="#ç¦»çº¿æ–‡æ¡£ç®¡ç†" class="headerlink" title="ç¦»çº¿æ–‡æ¡£ç®¡ç†"></a>ç¦»çº¿æ–‡æ¡£ç®¡ç†</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pacman -S zeal</span><br><span class="line"><span class="meta">#</span><span class="bash">ç¬¬ä¸‰æ–¹æºï¼šhttps://zealusercontributions.now.sh/</span></span><br></pre></td></tr></table></figure><h2 id="pip"><a href="#pip" class="headerlink" title="pip"></a>pip</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S python-pip</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Arch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¿›åˆ¶çš„åº”ç”¨</title>
      <link href="/2019/02/15/%E8%BF%9B%E5%88%B6%E7%9A%84%E5%BA%94%E7%94%A8/"/>
      <url>/2019/02/15/%E8%BF%9B%E5%88%B6%E7%9A%84%E5%BA%94%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h1 id="å¤©æ¢¯èµ›ç»ƒä¹ L1-050-å€’æ•°ç¬¬Nä¸ªå­—ç¬¦ä¸²"><a href="#å¤©æ¢¯èµ›ç»ƒä¹ L1-050-å€’æ•°ç¬¬Nä¸ªå­—ç¬¦ä¸²" class="headerlink" title="å¤©æ¢¯èµ›ç»ƒä¹ L1-050 å€’æ•°ç¬¬Nä¸ªå­—ç¬¦ä¸²"></a><a href="https://pintia.cn/problem-sets/994805046380707840/problems/994805080346181632">å¤©æ¢¯èµ›ç»ƒä¹ L1-050 å€’æ•°ç¬¬Nä¸ªå­—ç¬¦ä¸²</a></h1><h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æ—¶é—´é™åˆ¶: 400 ms</span><br><span class="line">å†…å­˜é™åˆ¶: 64 MB</span><br><span class="line">ä»£ç é•¿åº¦é™åˆ¶: 16 KB</span><br></pre></td></tr></table></figure><p><strong>é¢˜ç›®æè¿°</strong></p><p>ç»™å®šä¸€ä¸ªå®Œå…¨ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ç­‰å·®é€’å¢åºåˆ—ï¼Œè¯¥åºåˆ—ä¸­çš„æ¯ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦å›ºå®šä¸º Lï¼Œä» L ä¸ª a å¼€å§‹ï¼Œä»¥ 1 ä¸ºæ­¥é•¿é€’å¢ã€‚ä¾‹å¦‚å½“ L ä¸º 3 æ—¶ï¼Œåºåˆ—ä¸º<code>&#123; aaa, aab, aac, ..., aaz, aba, abb, ..., abz, ..., zzz &#125;</code>ã€‚è¿™ä¸ªåºåˆ—çš„å€’æ•°ç¬¬27ä¸ªå­—ç¬¦ä¸²å°±æ˜¯<code>zyz</code>ã€‚å¯¹äºä»»æ„ç»™å®šçš„ Lï¼Œæœ¬é¢˜è¦æ±‚ä½ ç»™å‡ºå¯¹åº”åºåˆ—å€’æ•°ç¬¬ N ä¸ªå­—ç¬¦ä¸²ã€‚</p><p><strong>è¾“å…¥</strong></p><p>è¾“å…¥åœ¨ä¸€è¡Œä¸­ç»™å‡ºä¸¤ä¸ªæ­£æ•´æ•° $L(2 â‰¤ L â‰¤ 6)$å’Œ$N (Nâ‰¤10^5)$ã€‚</p><p><strong>è¾“å‡º</strong></p><p>åœ¨ä¸€è¡Œä¸­è¾“å‡ºå¯¹åº”åºåˆ—å€’æ•°ç¬¬ N ä¸ªå­—ç¬¦ä¸²ã€‚é¢˜ç›®ä¿è¯è¿™ä¸ªå­—ç¬¦ä¸²æ˜¯å­˜åœ¨çš„ã€‚</p><p><strong>è¾“å…¥æ ·ä¾‹</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3 7417</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºæ ·ä¾‹</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pat</span><br></pre></td></tr></table></figure><h2 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h2><p>ï¼¬ä¸ªå­—ç¬¦å°±æ˜¯ï¼¬ä½çš„26è¿›åˆ¶æ•°ï¼Œå‘Šè¯‰æˆ‘ä»¬næ˜¯å€’æ•°çš„ä½ç½®ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ±‚ä¸€ä¸‹æ­£ç€æ•°çš„ä½ç½®ï¼Œç„¶åå°†æ±‚å¾—çš„10è¿›åˆ¶æ•°å­—è½¬åŒ–ä¸º26è¿›åˆ¶ï¼ˆæ¯ä½26è¿›åˆ¶ç”¨å°å†™çš„26ä¸ªå­—ç¬¦è¡¨ç¤ºï¼‰ï¼Œè¿™æ ·æ±‚å¾—çš„å­—ç¬¦ä¸²å°±æ˜¯å¤–é¢éœ€è¦çš„å­—ç¬¦ä¸²ã€‚</p><p>å¦‚ä½•æ±‚æ­£æ•°å‘¢ï¼Ÿ</p><p>ç”¨æ€»æ•°å‡å»å€’æ•°çš„å°±æ˜¯æ­£æ•°äº†ï¼Œå› aåˆ°zæœ‰26æ­¥ï¼Œæ‰€ä»¥ï¼¬ä½å…±æœ‰$26^L$ä¸ª</p><p>å‚è€ƒï¼š</p><p>[<a href="https://www.cnblogs.com/yinbiao/p/8685712.html(https://www.cnblogs.com/yinbiao/p/8685712.html">https://www.cnblogs.com/yinbiao/p/8685712.html(https://www.cnblogs.com/yinbiao/p/8685712.html</a>)</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æäº¤æ—¶é—´2019/2/16 00:55:43</span></span><br><span class="line"><span class="comment">è€—æ—¶ã€€4 ms</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">int</span> num = <span class="built_in">pow</span>(<span class="number">26</span>, n) - m;</span><br><span class="line">    string s = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">while</span>(num)</span><br><span class="line">    &#123;</span><br><span class="line">        s += num%<span class="number">26</span>+<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">        num /= <span class="number">26</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(s.<span class="built_in">size</span>() &lt; n) <span class="comment">////ä½æ•°ä¸å¤Ÿæ—¶ï¼Œè¡¥å……åˆ°Lä½ä¸ºæ­¢</span></span><br><span class="line">        s += <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = s.<span class="built_in">size</span>() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">        cout &lt;&lt; s[i];</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure><h1 id="â€œaâ€-N"><a href="#â€œaâ€-N" class="headerlink" title=" â€œaâ€+N"></a><a href="http://fzcoj.hustoj.com/problem.php?id=4491"> â€œaâ€+N</a></h1><h2 id="é¢˜ç›®-1"><a href="#é¢˜ç›®-1" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ—¶é—´é™åˆ¶: 2 Sec  </span><br><span class="line">å†…å­˜é™åˆ¶: 128 MB</span><br></pre></td></tr></table></figure><p><strong>é¢˜ç›®æè¿°</strong></p><p>åœ¨Cè¯­è¨€ä¸­ï¼Œâ€œaâ€åŠ ä¸Šä¸€ä¸ªæ•°çš„ç»“æœæ˜¯ä¸€ä¸ªæ•´æ•°ã€‚<br>ä¾‹å¦‚ï¼šâ€œaâ€+6=97+6=103<br>ä½†æ˜¯è€é™ˆè§‰å¾—è¿™æ ·å¾ˆæ— èŠï¼Œæ‰€ä»¥ä»–æ”¹å˜äº†è¿™ä¸ªåŠ çš„å®šä¹‰ï¼šåŠ Nçš„ç»“æœæ˜¯å½“å‰å­—ç¬¦ä¸²æŒ‰å­—å…¸åºçš„é¡ºåºä¹‹åç¬¬Nä¸ªå­—ç¬¦ä¸²ã€‚<br>ä¾‹å¦‚ï¼šâ€azâ€+4çš„ç»“æœå°±æ˜¯â€azâ€ä¹‹åç¬¬å››ä¸ªå­—ç¬¦ä¸²ã€‚(â€œazâ€ï¼Œâ€baâ€ï¼Œâ€bbâ€ï¼Œâ€bcâ€ï¼Œâ€bdâ€)ï¼Œæ‰€ä»¥â€azâ€+4=â€bdâ€ã€‚<br>ç°åœ¨è¯·ä½ ç¼–å†™ç¨‹åºå®ç°å®ƒã€‚</p><p><strong>è¾“å…¥</strong></p><p>ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ­£æ•´æ•°Tï¼Œä»£è¡¨æ•°æ®ç»„æ•°ã€‚(1â‰¤Tâ‰¤1000)<br>æ¥ä¸‹æ¥Tè¡Œï¼Œæ¯è¡Œä¸€ä¸ªæµ‹è¯•æ•°æ®ã€‚æ¯ä¸ªæµ‹è¯•æ•°æ®åŒ…å«ä¸€ä¸ªå­—ç¬¦ä¸²så’Œä¸€ä¸ªæ­£æ•´æ•°Xã€‚(å­—ç¬¦ä¸²é•¿åº¦ä¸å¤§äº10^4ä¸”ä¿è¯éç©ºï¼Œ1 â‰¤ X â‰¤ 10^13)</p><p><strong>è¾“å‡º</strong></p><p>å¯¹äºæ¯ç»„æµ‹è¯•æ•°æ®ï¼Œè¾“å‡ºs+Xçš„ç»“æœã€‚ </p><p><strong>è¾“å…¥æ ·ä¾‹</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">a 10</span><br><span class="line">abcd 5</span><br><span class="line">zzz 3</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºæ ·ä¾‹</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">k</span><br><span class="line">abci</span><br><span class="line">aaac</span><br></pre></td></tr></table></figure><h2 id="è§£æ-1"><a href="#è§£æ-1" class="headerlink" title="è§£æ"></a>è§£æ</h2><p>åˆšå¼€å§‹ä¸€çœ‹å°±çŸ¥é“æ˜¯26è¿›åˆ¶é¢˜ç›®,æ‰€ä»¥ä¸‹æ„è¯†å¾—æƒ³å…ˆæŠŠå­—ç¬¦ä¸²è½¬æˆåè¿›åˆ¶,ç„¶åå†ç›¸åŠ ,æœ€åå†è½¬æˆ26è¿›åˆ¶.emmmè¿™ä¸ªå¾ˆæ˜æ˜¾æ˜¯é”™è¯¯çš„,å› ä¸ºå­—ç¬¦ä¸²é•¿åº¦æ¯”è¾ƒé•¿,ä¸€è½¬åè¿›åˆ¶çš„è¯,æ—©å°±çˆ†èŒƒå›´äº†.é‚£æ€ä¹ˆè§£å†³å‘¢?</p><p>èƒ½ä¸èƒ½ä¸è½¬æ¢ç›´æ¥ç›¸åŠ å‘¢,è¿™æ ·å°±å¯ä»¥é¿å…äº†è¿™ä¸ªé—®é¢˜?ç›´æ¥ç›¸åŠ çš„è¯æˆ‘ä»¬è€ƒè™‘ä¸‹æ¯ä¸ªå­—æ¯éœ€è¦å˜æˆä»€ä¹ˆ,é‚£ä¹ˆå°±éœ€è¦çŸ¥é“æ¯ä¸ªä½å¯¹åº”è¦ç›¸åŠ çš„æ•°,åŒæ—¶è¦å¤„ç†ä¸‹è¿›ä½,æ‰€ä»¥æœ€ç»ˆæˆ‘ä»¬å¯ä»¥åƒå¤„ç†å¤§æ•°åŠ æ³•é‚£æ ·,å»å¤„ç†è¿›ä½.</p><p>é¦–å…ˆæˆ‘ä»¬å…ˆæŠŠæ•°åŠ åˆ°ç¬¬ä¸€ä½ä¸Šé¢,ç„¶ååˆ¤æ–­æœ‰æ²¡æœ‰è¿›ä½,å¦‚æœæœ‰é‚£ä¹ˆå°±åŠ åˆ°ä¸‹ä¸€ä½,åŒæ—¶ç¬¬ä¸€ä½ä¹Ÿè¦å‡å»å¯¹åº”çš„æ•°,å¦‚æ­¤å¾ªç¯ç›´åˆ°ä¸éœ€è¦è¿›ä½.</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Time:436 ms</span></span><br><span class="line"><span class="comment">Memory:1088 kb</span></span><br><span class="line"><span class="comment">2019-04-08 22:48:52 </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1E4</span>+<span class="number">10</span>;</span><br><span class="line"><span class="keyword">char</span> s[MAXN];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> t;</span><br><span class="line">    ll n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;t);</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        ll arr[MAXN] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s %lld&quot;</span>, s, &amp;n);</span><br><span class="line">        <span class="keyword">int</span> len = <span class="built_in">strlen</span>(s);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) <span class="comment">//å°†å­—æ¯å˜æˆæ•°å­—å­˜å‚¨,åŒæ—¶ç¿»è½¬å®¹æ˜“å­˜å‚¨</span></span><br><span class="line">            arr[i] = s[len<span class="number">-1</span>-i] - <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">        ll next = <span class="number">0</span>; <span class="comment">//è¿›ä½</span></span><br><span class="line">        arr[<span class="number">0</span>] += n;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            next = arr[i] / <span class="number">26</span>; <span class="comment">//éœ€è¦è¿›çš„ä½</span></span><br><span class="line">            arr[i] %= <span class="number">26</span>; <span class="comment">//å‡å»å·²ç»è¿›ä½çš„</span></span><br><span class="line">            <span class="keyword">if</span>(next)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(i == len<span class="number">-1</span>) <span class="comment">//å¤„ç†å®Œæˆä½†æ˜¯è¿˜æœ‰è¿›ä½,å°±åŠ åœ¨é¦–éƒ¨</span></span><br><span class="line">                &#123;</span><br><span class="line">                    arr[i+<span class="number">1</span>] = next<span class="number">-1</span>;</span><br><span class="line">                    len++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    arr[i+<span class="number">1</span>] += next; <span class="comment">//åä¸€ä½åŠ ä¸Šè¿›ä½</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = len<span class="number">-1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, <span class="string">&#x27;a&#x27;</span> + arr[i]);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ€ç»´é¢˜ç›® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rinne Loves Math</title>
      <link href="/2019/02/12/Rinne-Loves-Math/"/>
      <url>/2019/02/12/Rinne-Loves-Math/</url>
      
        <content type="html"><![CDATA[<p><a href="https://ac.nowcoder.com/acm/contest/370/J">ç‰›å®¢70j-Rinne Loves Math</a></p><span id="more"></span><h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æ—¶é—´é™åˆ¶ï¼šC/C++ 1ç§’ï¼Œå…¶ä»–è¯­è¨€2ç§’</span><br><span class="line">ç©ºé—´é™åˆ¶ï¼šC/C++ 262144Kï¼Œå…¶ä»–è¯­è¨€524288K</span><br><span class="line">64bit IO Format: %lld</span><br></pre></td></tr></table></figure><p><strong>é¢˜ç›®æè¿°</strong></p><p>ç»™äº†ä½ å½¢å¦‚$\sqrt{n}$çš„å¼å­ä¸­çš„ nï¼Œè®©ä½ è¾“å‡ºåŒ–ç®€åçš„ç»“æœ $a\sqrt{b}$ ä¸­çš„ a,bï¼Œå¦‚æœè¿™æ ·çš„å¼å­åœ¨<strong>å®æ•°</strong>èŒƒå›´å†…æ²¡æœ‰æ„ä¹‰ï¼Œè¾“å‡º -1ã€‚</p><p><strong>è¾“å…¥æè¿°</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•° T,è¡¨ç¤ºæ•°æ®ç»„æ•°ã€‚</span><br><span class="line">æ¥ä¸‹æ¥ T è¡Œï¼Œæ¯è¡Œä¸€ä¸ªæ•´æ•° x è¡¨ç¤ºæ ¹å·ä¸‹çš„æ•°ã€‚</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºæè¿°</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¾“å‡ºä¸€å…± T è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•°è¡¨ç¤ºåŒ–ç®€åçš„ç­”æ¡ˆ a,b</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹1</strong></p><p>è¾“å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">4</span><br><span class="line">20</span><br><span class="line">25</span><br><span class="line">-2005</span><br><span class="line">11</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">2 5</span><br><span class="line">5 1</span><br><span class="line">-1</span><br><span class="line">1 11</span><br></pre></td></tr></table></figure><p><em>è¯´æ˜</em></p><p>20=4Ã—5<br>25=5Ã—5<br>å®æ•°èŒƒå›´å†…$ \sqrt{n} $ä¸­ n å°äº 0 æ²¡æœ‰æ„ä¹‰ã€‚<br>11 æ˜¯ä¸ªè´¨æ•°ã€‚</p><p><strong>å¤‡æ³¨</strong></p><p>$Tâ‰¤100, 0&lt;|x|â‰¤10^7$</p><h1 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h1><p>æ¯”è¾ƒæ°´çš„æ¨¡æ‹Ÿé¢˜ï¼Œä½†æ˜¯æ¯”èµ›æ—¶æƒ³é”™äº†ï¼Œæƒ³å¾—æœ‰ç‚¹éº»çƒ¦äº†ï¼Œä»¥ä¸ºåªé™¤4å’Œ9å°±è¡Œäº†ï¼Œemmmï¼Œä¸è¿‡è¿˜å¥½æœ€ååšå‡ºæ¥äº†ã€‚æ—¢ç„¶æ˜¯åŒ–ç®€ï¼Œé‚£ä¹ˆè‚¯å®šæ˜¯å¹³æ–¹ï¼Œæ‰€ä»¥é€†åºéå†$x\in[0,sqrt(n)]$ï¼Œå¦‚æœæœ‰n%(x*x)==0å°±ä»£è¡¨å¯ä»¥åŒ–ç®€å‡ºxï¼Œä¸ºä»€ä¹ˆæ˜¯é€†åºï¼Œå› ä¸ºè¦æ±‚æœ€ç®€ï¼Œæ‰€ä»¥å¯èƒ½å¾—é™¤ä»¥æœ€å¤§ï¼ˆä¹‹å‰å°±æ˜¯æ²¡æƒ³åˆ°è¿™ä¸ªemmmï¼‰</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æäº¤æ—¶é—´ï¼š2019-02-12 10:21:33 è¯­è¨€ï¼šC++14 ä»£ç é•¿åº¦ï¼š520 è¿è¡Œæ—¶é—´ï¼š 20 ms å ç”¨å†…å­˜ï¼š632K </span></span><br><span class="line"><span class="comment">è¿è¡ŒçŠ¶æ€ï¼šç­”æ¡ˆæ­£ç¡®</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> t, n;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; n;</span><br><span class="line">        <span class="keyword">if</span>(n &lt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;-1&quot;</span> &lt;&lt; endl;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="built_in">sqrt</span>(n); i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(n % (i*i) == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                cout &lt;&lt; i &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; n/i/i &lt;&lt; endl;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>åŒºé—´æˆ–å’Œ</title>
      <link href="/2019/02/06/%E5%8C%BA%E9%97%B4%E6%88%96%E5%92%8C/"/>
      <url>/2019/02/06/%E5%8C%BA%E9%97%B4%E6%88%96%E5%92%8C/</url>
      
        <content type="html"><![CDATA[<p><a href="https://ac.nowcoder.com/acm/contest/332/G">ç‰›å®¢332G-åŒºé—´æˆ–å’Œ</a></p><span id="more"></span><h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æ—¶é—´é™åˆ¶ï¼šC/C++ 1ç§’ï¼Œå…¶ä»–è¯­è¨€2ç§’</span><br><span class="line">ç©ºé—´é™åˆ¶ï¼šC/C++ 262144Kï¼Œå…¶ä»–è¯­è¨€524288K</span><br><span class="line">64bit IO Format: %lld</span><br></pre></td></tr></table></figure><p><strong>é¢˜ç›®æè¿°</strong></p><p>æ±‚$a|(a+1)|(a+2)|â€¦|(b-1)|b$ã€‚ </p><p>å…¶ä¸­|è¡¨ç¤º<a href="https://baike.baidu.com/item/%E6%8C%89%E4%BD%8D%E6%88%96">æŒ‰ä½æˆ–</a></p><p><strong>è¾“å‡ºæè¿°</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å¯¹äºæ¯ç»„è¾“å…¥ï¼Œè¾“å‡ºä¸€ä¸ªæ•°a|(a+1)|(a+2)|...|(b-1)|bã€‚</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹1</strong></p><p>è¾“å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">99 109</span><br><span class="line">68 77</span><br><span class="line">55 66</span><br><span class="line">34 43</span><br><span class="line">1111234 1114321</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">111</span><br><span class="line">79</span><br><span class="line">127</span><br><span class="line">47</span><br><span class="line">1179647</span><br></pre></td></tr></table></figure><p><strong>å¤‡æ³¨</strong></p><p>è¾“å…¥ä¸è¶…è¿‡10000è¡Œï¼Œ$0â‰¤a,bâ‰¤10^{18}ï¼Œaâ‰¤b$</p><h1 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h1><p>å¦‚æœ a=b ï¼Œé‚£ä¹ˆç­”æ¡ˆ =a ï¼›</p><p>å¦åˆ™ aâ‰ b ï¼Œ</p><p>è€ƒè™‘aå’Œbçš„äºŒè¿›åˆ¶è¡¨ç¤ºä»é«˜åˆ°ä½ç¬¬ä¸€ä¸ªä¸åŒçš„ä½iï¼Œ</p><p>å¿…å®šbçš„ç¬¬iä½=1ï¼Œaçš„ç¬¬iä½=0ã€‚</p><p>é‚£ä¹ˆå¯ä»¥æ–­å®šï¼Œå¯¹äºç­”æ¡ˆçš„äºŒè¿›åˆ¶è¡¨ç¤ºï¼Œ</p><p>(1) æ¯”ç¬¬iä½æ›´é«˜çš„é‚£äº›ä½ä¸€å®šè·Ÿaç›¸åŒã€‚</p><p>(2) ç¬¬iä½åŠæ¯”ç¬¬iä½æ›´ä½çš„é‚£äº›ä½ä¸€å®šä¸º1ã€‚</p><p>(1)æ˜¯æ˜¾ç„¶çš„ï¼Œ(2)æ˜¯ç”±äºæŠŠaä¸­æ¯”ç¬¬iä½æ›´ä½çš„é‚£äº›ä½éƒ½ç½®ä¸º1å¾—åˆ°çš„æ•°ä¸€å®šåœ¨åŒºé—´[a,b]ä¸­</p><p>å‚è€ƒï¼š</p><p><a href="https://ac.nowcoder.com/discuss/153349?type=101&amp;order=0&amp;pos=8&amp;page=1">https://ac.nowcoder.com/discuss/153349?type=101&amp;order=0&amp;pos=8&amp;page=1</a></p><p><strong><em>ä¸¾ä¸ªä¾‹å­</em></strong></p><ol><li><p>[2300ï¼Œ2323]ï¼š</p><p>2300ï¼š <strong>100</strong>011111100</p><p>2323:    <strong>100</strong>100010011</p><p>æ€»çš„ç»“æœå°±æ˜¯2559ï¼š  <strong>100</strong>111111111 </p></li><li><p>[787ï¼Œ2323]ï¼š</p><p>787ï¼š      001100010011</p><p>2323:     100100010011</p><p>è€Œè¿™ä¸ª æˆ‘ä»¬æ³¨æ„åˆ°å‰é¢æ®µæ˜¯æ²¡æœ‰ç›¸åŒï¼Œé‚£ä¹Ÿå°±æ˜¯å¯å˜åŒ–èŒƒå›´å°±æ˜¯é‚£æ•´æ®µäº†ã€‚</p><p>æ‰€ä»¥ç­”æ¡ˆå°±æ˜¯ï¼š4095ï¼š111111111111</p></li></ol><p>å‚è€ƒï¼š</p><p><a href="http://keyblog.cn/article-67.html">http://keyblog.cn/article-67.html</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æäº¤æ—¶é—´ï¼š2019-02-09 18:48:22 è¯­è¨€ï¼šC++14 ä»£ç é•¿åº¦ï¼š797 è¿è¡Œæ—¶é—´ï¼š 29 ms å ç”¨å†…å­˜ï¼š868K </span></span><br><span class="line"><span class="comment">è¿è¡ŒçŠ¶æ€ï¼šç­”æ¡ˆæ­£ç¡®</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bitset&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll MOD = <span class="number">1e9</span>+<span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0xffffff</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> arr[MAXN];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    ll a, b;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; a &gt;&gt; b)</span><br><span class="line">    &#123;</span><br><span class="line">        ll cnt = <span class="number">0</span>; <span class="comment">//ç»Ÿè®¡ä»é«˜ä½æ•°èµ·ï¼Œa,bæœ‰å¤šå°‘ä½ä¸ä¸€æ ·</span></span><br><span class="line">        <span class="comment">//ç»Ÿè®¡ä¸åŒçš„ä¸ªæ•°ï¼Œå½“aï¼Œbç›¸åŒæ—¶é€€å‡ºå¾ªç¯ï¼Œæ­¤æ—¶aï¼Œbçš„å€¼éƒ½ä¸ºä¸bç›¸åŒçš„éƒ¨åˆ†</span></span><br><span class="line">        <span class="keyword">while</span>(a != b)</span><br><span class="line">            cnt++, a &gt;&gt;= <span class="number">1</span>, b &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">        <span class="comment">//å°†bå·¦ç§»cntä½ï¼ŒåŒæ—¶æ¯å·¦ç§»ä¸€æ¬¡ï¼Œå†bå³è¾¹åŠ ä¸ª1(äºŒè¿›åˆ¶)ï¼Œè¿™æ ·å°±å˜æˆï¼Œç›¸åŒéƒ¨åˆ†ç›¸åŒï¼Œå…¶ä»–éƒ¨åˆ†éƒ½æ˜¯1</span></span><br><span class="line">        <span class="keyword">while</span>(cnt--)</span><br><span class="line">                b = (b &lt;&lt; <span class="number">1</span>) ^ <span class="number">1</span>;</span><br><span class="line">        cout &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ€ç»´é¢˜ç›® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‡ºé¢˜</title>
      <link href="/2019/02/05/%E5%87%BA%E9%A2%98/"/>
      <url>/2019/02/05/%E5%87%BA%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p><a href="https://ac.nowcoder.com/acm/contest/332/A">ç‰›å®¢323A-å‡ºé¢˜</a></p><span id="more"></span><h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æ—¶é—´é™åˆ¶ï¼šC/C++ 1ç§’ï¼Œå…¶ä»–è¯­è¨€2ç§’</span><br><span class="line">ç©ºé—´é™åˆ¶ï¼šC/C++ 32768Kï¼Œå…¶ä»–è¯­è¨€65536K</span><br><span class="line">64bit IO Format: %lld</span><br></pre></td></tr></table></figure><p><strong>é¢˜ç›®æè¿°</strong></p><p>å°Bå‡†å¤‡å‡ºæ¨¡æ‹Ÿèµ›ã€‚<br> å¥¹æŠŠé¢˜ç›®æŒ‰éš¾åº¦åˆ†ä¸ºå››ç­‰ï¼Œåˆ†å€¼åˆ†åˆ«ä¸º6,7,8,9ã€‚<br> å·²çŸ¥å°Bå…±å‡ºäº†mé“é¢˜ï¼Œå…±nåˆ†ã€‚<br> æ±‚å°Bæœ€å°‘å‡ºäº†å¤šå°‘é“6åˆ†é¢˜ã€‚    </p><p><strong>è¾“å…¥æè¿°</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä¸¤ä¸ªæ­£æ•´æ•°n,m</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºæè¿°</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä¸€ä¸ªæ•°ï¼Œè¡¨ç¤ºç­”æ¡ˆã€‚</span><br><span class="line">è‹¥æ— è§£ï¼Œè¾“å‡º&quot;jgzjgzjgz&quot;ã€‚</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹1</strong></p><p>è¾“å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">34 5</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹2</strong></p><p>è¾“å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">32 5</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹3</strong></p><p>è¾“å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5 1</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jgzjgzjgz</span><br></pre></td></tr></table></figure><p><strong>å¤‡æ³¨</strong></p><p>$n,m\leq10^{12}$</p><h1 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h1><p>æ˜¾ç„¶ï¼Œæœ‰è§£çš„å……è¦æ¡ä»¶ä¸º $6mâ‰¤nâ‰¤9m$ ã€‚</p><p>è‹¥æœ‰è§£ï¼š</p><p>è®¾æœ‰ $x(0â‰¤xâ‰¤m)$ é“6åˆ†é¢˜ï¼Œåˆ™å‰©ä¸‹çš„$m-x$é¢˜å…±$n-6x$åˆ†ï¼Œ</p><p>åˆ™å‰©ä¸‹çš„é¢˜æœ‰è§£çš„å……è¦æ¡ä»¶ä¸º$7(mâˆ’x)â‰¤nâˆ’6xâ‰¤9(mâˆ’x)$ ï¼Œ</p><p>è§£å¾— $7mâˆ’nâ‰¤xâ‰¤(9mâˆ’n)/3$ã€‚</p><p>å› æ­¤ç­”æ¡ˆä¸º$max(0,7m-n)$ã€‚</p><p>å‚è€ƒï¼š</p><p><a href="https://ac.nowcoder.com/discuss/153349?type=101&amp;order=1&amp;pos=7&amp;page=1">https://ac.nowcoder.com/discuss/153349?type=101&amp;order=1&amp;pos=7&amp;page=1</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æäº¤æ—¶é—´ï¼š2019-02-06 00:09:06 è¯­è¨€ï¼šC++ ä»£ç é•¿åº¦ï¼š335 è¿è¡Œæ—¶é—´ï¼š 7 ms å ç”¨å†…å­˜ï¼š604K </span></span><br><span class="line"><span class="comment">è¿è¡ŒçŠ¶æ€ï¼šç­”æ¡ˆæ­£ç¡®</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> n,m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> ans = m*<span class="number">7</span>-n;</span><br><span class="line">    <span class="keyword">if</span>(ans &lt; <span class="number">0</span>)</span><br><span class="line">        ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(m*<span class="number">6</span> &gt; n || n &gt; <span class="number">9</span>*m)</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;jgzjgzjgz&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">     cout &lt;&lt; ans &lt;&lt; endl; </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ€ç»´é¢˜ç›® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Applese-æ¶‚é¢œè‰²</title>
      <link href="/2019/02/05/Applese-%E6%B6%82%E9%A2%9C%E8%89%B2/"/>
      <url>/2019/02/05/Applese-%E6%B6%82%E9%A2%9C%E8%89%B2/</url>
      
        <content type="html"><![CDATA[<p><a href="https://ac.nowcoder.com/acm/contest/330/E">ç‰›å®¢ -330E Applese æ¶‚é¢œè‰²</a></p><span id="more"></span><h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æ—¶é—´é™åˆ¶ï¼šC/C++ 1ç§’ï¼Œå…¶ä»–è¯­è¨€2ç§’</span><br><span class="line">ç©ºé—´é™åˆ¶ï¼šC/C++ 32768Kï¼Œå…¶ä»–è¯­è¨€65536K</span><br><span class="line">64bit IO Format: %lld</span><br></pre></td></tr></table></figure><p><strong>é¢˜ç›®æè¿°</strong></p><p>ç²¾é€šç¨‹åºè®¾è®¡çš„ Applese å•å†™äº†ä¸€ä¸ªæ¸¸æˆã€‚<br>åœ¨è¿™ä¸ªæ¸¸æˆä¸­ï¼Œæœ‰ä¸€ä¸ª n è¡Œ m åˆ—çš„æ–¹é˜µã€‚ç°åœ¨å®ƒè¦ä¸ºè¿™ä¸ªæ–¹é˜µæ¶‚ä¸Šé»‘ç™½ä¸¤ç§é¢œè‰²ã€‚è§„å®šå·¦å³ç›¸é‚»ä¸¤æ ¼çš„é¢œè‰²ä¸èƒ½ç›¸åŒã€‚è¯·ä½ å¸®å®ƒç»Ÿè®¡ä¸€ä¸‹æœ‰å¤šå°‘ç§æ¶‚è‰²çš„æ–¹æ³•ã€‚ç”±äºç­”æ¡ˆå¾ˆå¤§ï¼Œä½ éœ€è¦å°†ç­”æ¡ˆå¯¹ $10^9+7$å–æ¨¡ã€‚</p><p><strong>è¾“å…¥æè¿°</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä»…ä¸€è¡Œä¸¤ä¸ªæ­£æ•´æ•° n, mï¼Œè¡¨ç¤ºæ–¹é˜µçš„å¤§å°ã€‚</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºæè¿°</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¾“å‡ºä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºæ–¹æ¡ˆæ•°å¯¹10^9+7å–æ¨¡ã€‚</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹1</strong></p><p>è¾“å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 1</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹2</strong><br>è¾“å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2 2</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4</span><br></pre></td></tr></table></figure><p><strong>å¤‡æ³¨</strong></p><p>$1\leq n,m\leq10^{100000}$</p><h1 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h1><p>ä¸€ä¸ªæ¯”è¾ƒæ˜¾ç„¶çš„ç»“è®ºæ˜¯ï¼Œå¯¹äºæ¯ä¸€åˆ—ï¼Œæœ‰$2^n$ç§æ¶‚è‰²æ–¹æ³•ã€‚<br>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå½“ç¡®å®šäº†ç¬¬ä¸€åˆ—ä¹‹åï¼Œç”±äºå·¦å³ç›¸é‚»ä¸èƒ½åŒè‰²ï¼Œæ‰€ä»¥åé¢æ¯ä¸€åˆ—çš„æ¶‚è‰²æ–¹æ¡ˆä¹Ÿéšä¹‹ç¡®å®šã€‚å› æ­¤ç­”æ¡ˆå°±æ˜¯ $2^n$</p><p>é¦–å…ˆnçš„æ•°å­—èŒƒå›´éå¸¸å¤§ï¼Œ10çš„10ä¸‡æ¬¡æ–¹ï¼Œæ‰€ä»¥æ•°æ®ä¸€å®šæ˜¯ç”¨å­—ç¬¦ä¸²è¯»è¿›å»çš„ï¼Œå…¶æ¬¡ï¼Œå› ä¸º n å¾ˆå¤§ï¼Œå¾ªç¯næ¬¡è‚¯å®šè¶…æ—¶ã€‚æ‰€ä»¥å¾—é™å¹‚ï¼Œè´¹é©¬å°å®šç†æˆ–è€…æ¬§æ‹‰é™å¹‚éƒ½å¯ä»¥ã€‚</p><p><strong>è´¹é©¬å°å®šç†</strong></p><p>è´¹é©¬å°å®šç†ï¼šå¯¹äºç´ æ•° $m$ ä»»æ„ä¸æ˜¯ $m$ çš„å€æ•°çš„ $b$ï¼Œéƒ½æœ‰ï¼š$b^{m-1}\equiv1\  mod \ m$ </p><ol><li><p>å…ˆå†³æ¡ä»¶æˆç«‹ï¼š$10^9+7$æ˜¯ç´ æ•°ï¼Œ$gcd(10^9+7, \ 2)=1$</p></li><li><p>å¤„ç†ï¼š</p><p>å› $b^{m-1}=1$ï¼Œæ•…æˆ‘ä»¬åªéœ€è¦ç®—å‡ºé™¤å»1çš„éƒ¨åˆ†æœ‰å¤šå°‘å°±è¡Œäº†ï¼Œäºæ˜¯æœ‰</p><p>$2^{n}=2^{n\%(m-1)}$ (mä¸º$10^9+7$)</p><p>è¿™æ ·nå°±å‡å°‘äº†ï¼Œä½†æ˜¯$10^9+7$è¿˜æ˜¯å¾ˆå¤§ï¼Œè¦ç”¨åˆ°å¿«é€Ÿå¹‚å–æ¨¡</p></li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æäº¤æ—¶é—´ï¼š2019-02-05 14:59:46 è¯­è¨€ï¼šC++ ä»£ç é•¿åº¦ï¼š565 è¿è¡Œæ—¶é—´ï¼š 4 ms å ç”¨å†…å­˜ï¼š864K </span></span><br><span class="line"><span class="comment">è¿è¡ŒçŠ¶æ€ï¼šç­”æ¡ˆæ­£ç¡®</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MOD = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="function">ll <span class="title">mod_pow</span><span class="params">(ll x, ll n)</span> <span class="comment">//å¿«é€Ÿå¹‚</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll ans = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(n&amp;<span class="number">1</span>)</span><br><span class="line">            ans = ans * x % MOD;</span><br><span class="line">        x = x*x % MOD;</span><br><span class="line">        n &gt;&gt;=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    string s1, s2;</span><br><span class="line">    cin &gt;&gt; s1 &gt;&gt; s2;</span><br><span class="line">    ll p = <span class="number">0</span>;</span><br><span class="line">    ll len = s1.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">      p = (p*<span class="number">10</span> + s1[i] - <span class="string">&#x27;0&#x27;</span>) % (MOD - <span class="number">1</span>); <span class="comment">//å°†è¯»å…¥çš„å­—ç¬¦å˜æˆæ•´æ•°ï¼Œå¹¶ä¸”è¿™ä¸ªè¿‡ç¨‹ä¸­å–æ¨¡</span></span><br><span class="line">    cout &lt;&lt; <span class="built_in">mod_pow</span>(<span class="number">2</span>, p) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ¬§æ‹‰é™å¹‚</strong></p><script type="math/tex; mode=display">A^Bmod\ C=A^{ B\ mod\varphi(C)+\varphi(C) }mod\ C</script><p>æ•…æœ‰</p><p>$2^nmod\ m=2^{n\ mod\ \varphi(m)+\varphi(m)}\ mod\ m$</p><p>æ‰€ä»¥</p><ol><li>å…ˆæ±‚å‡º$ \varphi(m)$</li><li>å†ç”¨å¿«é€Ÿå¹‚æ±‚å‡º$2^n$</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æäº¤æ—¶é—´ï¼š2019-02-05 16:38:55 è¯­è¨€ï¼šC++ ä»£ç é•¿åº¦ï¼š855 è¿è¡Œæ—¶é—´ï¼š 8 ms å ç”¨å†…å­˜ï¼š916K </span></span><br><span class="line"><span class="comment">è¿è¡ŒçŠ¶æ€ï¼šç­”æ¡ˆæ­£ç¡®</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MOD = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="function">ll <span class="title">mod_pow</span><span class="params">(ll x, ll n)</span> <span class="comment">//å¿«é€Ÿå¹‚</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll ans = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(n&amp;<span class="number">1</span>)</span><br><span class="line">            ans = ans * x % MOD;</span><br><span class="line">        x = x*x % MOD;</span><br><span class="line">        n &gt;&gt;=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">euler</span><span class="params">(ll n)</span> <span class="comment">//æ±‚phi</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll res = n;</span><br><span class="line">    <span class="keyword">for</span> (ll i = <span class="number">2</span>; i*i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">if</span> (n%i == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            res =res/i*(i<span class="number">-1</span>);</span><br><span class="line">            <span class="keyword">while</span>(n%i == <span class="number">0</span>)</span><br><span class="line">                n /= i;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">if</span> (n &gt; <span class="number">1</span>)</span><br><span class="line">        res = res/n*(n<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    string s1, s2;</span><br><span class="line">    cin &gt;&gt; s1 &gt;&gt; s2;</span><br><span class="line">    ll p = <span class="built_in">euler</span>(MOD);</span><br><span class="line">    ll len = s1.<span class="built_in">size</span>();</span><br><span class="line">    ll ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">      ans = (ans*<span class="number">10</span> + s1[i] - <span class="string">&#x27;0&#x27;</span>) % p; <span class="comment">//ç®—å‡ºn mod phi(m),phiï¼šæ¬§æ‹‰å‡½æ•°</span></span><br><span class="line">    ans += p; <span class="comment">//ç®—å‡ºn mod phi(m) + phi(m)</span></span><br><span class="line">    cout &lt;&lt; <span class="built_in">mod_pow</span>(<span class="number">2</span>, ans) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°å­¦çŸ¥è¯† </tag>
            
            <tag> æ¬§æ‹‰é™å¹‚ </tag>
            
            <tag> ç»„åˆæ•°å­¦ </tag>
            
            <tag> è´¹é©¬å°å®šç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¬§æ‹‰å‡½æ•°</title>
      <link href="/2019/02/04/%E6%AC%A7%E6%8B%89%E5%87%BD%E6%95%B0/"/>
      <url>/2019/02/04/%E6%AC%A7%E6%8B%89%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>æ¬§æ‹‰å‡½æ•°å…¬å¼ï¼Œæ€§è´¨ï¼Œæ¨¡æ¿</p><span id="more"></span><h1 id="æ¬§æ‹‰å‡½æ•°"><a href="#æ¬§æ‹‰å‡½æ•°" class="headerlink" title="æ¬§æ‹‰å‡½æ•°"></a>æ¬§æ‹‰å‡½æ•°</h1><p>å¯¹æ­£æ•´æ•°nï¼Œæ¬§æ‹‰å‡½æ•°æ˜¯å°äºnçš„æ­£æ•´æ•°ä¸­ä¸näº’è´¨çš„æ•°çš„æ•°ç›®ã€‚ä¾‹å¦‚Ï†(8)=4ï¼Œå› ä¸º1,3,5,7å‡å’Œ8äº’è´¨ã€‚</p><h3 id="æ¬§æ‹‰å‡½æ•°å…¬å¼"><a href="#æ¬§æ‹‰å‡½æ•°å…¬å¼" class="headerlink" title="æ¬§æ‹‰å‡½æ•°å…¬å¼"></a>æ¬§æ‹‰å‡½æ•°å…¬å¼</h3><script type="math/tex; mode=display">euler(x) =x\times(1-\frac{1}{p_1})\times(1-\frac{1}{p_2})\times......\times(1-\frac{1}{p_n})</script><p><em>(å…¶ä¸­p1, p2â€¦â€¦pnä¸ºxçš„æ‰€æœ‰è´¨å› æ•°ï¼Œxæ˜¯ä¸ä¸º0çš„æ•´æ•°)</em></p><p><img src="/2019/02/04/%E6%AC%A7%E6%8B%89%E5%87%BD%E6%95%B0/ohiexample.png" alt></p><p><strong>æ³¨æ„ï¼š</strong></p><p><code>Ï†(1) = 1</code>ï¼ˆå”¯ä¸€å’Œ1äº’è´¨çš„æ•°(å°äºç­‰äº1)å°±æ˜¯1æœ¬èº«ï¼‰ã€‚ (æ³¨æ„ï¼šæ¯ç§è´¨å› æ•°åªä¸€ä¸ªã€‚æ¯”å¦‚ <script type="math/tex">12 = 2\times2\times3</script> é‚£ä¹ˆ <script type="math/tex">Ï†(12) = 12\times (1-\frac{1}{2}) \times (1-\frac{1}{3})=4  )</script></p><h3 id="æ€§è´¨"><a href="#æ€§è´¨" class="headerlink" title="æ€§è´¨"></a>æ€§è´¨</h3><ol><li>å½“nä¸ºè´¨æ•°æ—¶ï¼Œ$Ï†(n)=n-1$ã€‚</li><li>å½“$n=p^k$æ—¶ï¼ˆpæ˜¯ç´ æ•°ï¼‰ï¼Œ$Ï†(n)=Ï†(p^k )=p^k-p^{k-1}=(p-1)p^{k-1}$</li><li>è‹¥n,mäº’è´¨ï¼Œ$Ï†(nm)=Ï†(n)Ï†(m)=(n-1)(m-1)$</li><li>è‹¥næ˜¯å¥‡æ•°ï¼Œåˆ™$Ï†(2n)=Ï†(n)$</li></ol><p><strong>ç‰¹æ®Šæ€§è´¨</strong></p><ol><li>å½“aä¸näº’è´¨æ—¶(n&gt;2)æœ‰:$a^{Ï†(n)}\  mod\ n=1$ (æ’ç­‰äº)æ­¤å…¬å¼å³ <strong>æ¬§æ‹‰å®šç†</strong></li><li>å½“aä¸näº’è´¨ä¸”nä¸ºè´¨æ•°æ—¶(å³:gcd(a,n)=1)åˆ™ä¸Šå¼æœ‰:$ a^{(n-1)}\ mod \ n=1$(æ’ç­‰äº)æ­¤å…¬å¼å³ <strong>è´¹é©¬å°å®šç†</strong></li></ol><h3 id="å»¶ä¼¸"><a href="#å»¶ä¼¸" class="headerlink" title="å»¶ä¼¸"></a>å»¶ä¼¸</h3><p>å°äºnä¸”ä¸näº’è´¨çš„æ•°çš„å’Œï¼š</p><script type="math/tex; mode=display">\frac{Ï†(n)âˆ—n}2  (n>1)</script><h3 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h3><p><strong>æ±‚$7^{222}$çš„ä¸ªä½æ•°ã€‚</strong></p><p>å› ä¸º7å’Œ10äº’è´¨ï¼Œä¸”$Ï†(10)=4$</p><p>æ‰€ä»¥$7^4  mod 10=1$</p><p>æ‰€ä»¥$7^{222}  mod 10=7^{4âˆ—55}âˆ—7^2  mod 10=7^2  mod 10=9$</p><p>å³$7^{222}  mod 10=7^{222\%4}  mod 10=7^2  mod 10=9$</p><h3 id="æ¨¡æ¿"><a href="#æ¨¡æ¿" class="headerlink" title="æ¨¡æ¿"></a>æ¨¡æ¿</h3><p>å‚è€ƒï¼š</p><p><a href="https://www.cnblogs.com/wkfvawl/p/9317125.html">https://www.cnblogs.com/wkfvawl/p/9317125.html</a></p><h5 id="ç›´æ¥æ±‚å°äºn-ä¸”ä¸näº’è´¨çš„ä¸ªæ•°ï¼ˆæ¬§æ‹‰å‡½æ•°æ¨¡æ¿ï¼‰"><a href="#ç›´æ¥æ±‚å°äºn-ä¸”ä¸näº’è´¨çš„ä¸ªæ•°ï¼ˆæ¬§æ‹‰å‡½æ•°æ¨¡æ¿ï¼‰" class="headerlink" title="ç›´æ¥æ±‚å°äºn,ä¸”ä¸näº’è´¨çš„ä¸ªæ•°ï¼ˆæ¬§æ‹‰å‡½æ•°æ¨¡æ¿ï¼‰"></a>ç›´æ¥æ±‚å°äºn,ä¸”ä¸näº’è´¨çš„ä¸ªæ•°ï¼ˆæ¬§æ‹‰å‡½æ•°æ¨¡æ¿ï¼‰</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span>  <span class="title">eular</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i,ret=n;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">2</span>; i&lt;=<span class="built_in">sqrt</span>(n); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(n%i==<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            ret=ret/i*(i<span class="number">-1</span>);<span class="comment">//è¿™é‡Œå…ˆä½¿ç”¨é™¤æ³•æ˜¯ä¸ºäº†é˜²æ­¢æº¢å‡ºï¼Œret=ret*(1-1/p(1))</span></span><br><span class="line">            <span class="comment">//ä¸ºäº†å®Œå…¨æ¶ˆé™¤æˆ‘ä»¬å·²ç»é™¤å®Œäº†åˆšæ‰å¾—åˆ°çš„é‚£ä¸ªiå› å­,ç¡®ä¿ä¸‹ä¸€ä¸ªå¾—åˆ°çš„iæ˜¯nçš„ç´ å› å­</span></span><br><span class="line">            <span class="keyword">while</span>(n%i==<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                n/=i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(n&gt;<span class="number">1</span>)<span class="comment">//å¯èƒ½è¿˜å‰©ä¸‹ä¸€ä¸ªç´ å› å­æ²¡æœ‰é™¤ </span></span><br><span class="line">    &#123;</span><br><span class="line">        ret=ret/n*(n<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ç­›é€‰æ¨¡æ¿-æ±‚-1-n-ä¹‹é—´æ¯ä¸ªæ•°çš„è´¨å› æ•°çš„ä¸ªæ•°"><a href="#ç­›é€‰æ¨¡æ¿-æ±‚-1-n-ä¹‹é—´æ¯ä¸ªæ•°çš„è´¨å› æ•°çš„ä¸ªæ•°" class="headerlink" title="ç­›é€‰æ¨¡æ¿:æ±‚[1,n]ä¹‹é—´æ¯ä¸ªæ•°çš„è´¨å› æ•°çš„ä¸ªæ•°"></a>ç­›é€‰æ¨¡æ¿:æ±‚[1,n]ä¹‹é—´æ¯ä¸ªæ•°çš„è´¨å› æ•°çš„ä¸ªæ•°</h5><p>å¦‚æœæˆ‘ä»¬è¦æ±‚çš„æ•°æ¯”è¾ƒå¤šï¼Œå¦‚æœä¸€ä¸ªä¸€ä¸ªæ±‚é‚£ä¹ˆå¾ˆå®¹æ˜“å°±è¶…æ—¶ï¼Œæ‰€ä»¥æˆ‘ä»¬è‡ªç„¶è€Œç„¶å°±æƒ³åˆ°â€”â€”æ‰“è¡¨ã€‚</p><p>å¦‚æœæˆ‘ä»¬ä¾ç…§ä¸Šè¿°æ€æƒ³ï¼Œæ¥ä¸ªæœ€æœ´ç´ çš„æ‰“è¡¨ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> size 1000001</span></span><br><span class="line"><span class="keyword">int</span> euler[size];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    euler[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;size; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(!euler[i])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i; j&lt;size; j+=i)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(!euler[j])</span><br><span class="line">                &#123;</span><br><span class="line">                    euler[j]=j;</span><br><span class="line">                &#125;</span><br><span class="line">                euler[j]=euler[j]/i*(i<span class="number">-1</span>);<span class="comment">//å…ˆè¿›è¡Œé™¤æ³•æ˜¯ä¸ºäº†é˜²æ­¢ä¸­é—´æ•°æ®çš„æº¢å‡º</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ¬§æ‹‰é™å¹‚"><a href="#æ¬§æ‹‰é™å¹‚" class="headerlink" title="æ¬§æ‹‰é™å¹‚"></a>æ¬§æ‹‰é™å¹‚</h1><script type="math/tex; mode=display">A^Bmod\ C=A^{ Bmod\varphi(C)+\varphi(C) }mod\ C</script><p>$\varphi()$ä¸ºæ¬§æ‹‰å‡½æ•°</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°å­¦çŸ¥è¯† </tag>
            
            <tag> æ¬§æ‹‰é™å¹‚ </tag>
            
            <tag> æ¬§æ‹‰å‡½æ•° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¨¡è¿ç®—</title>
      <link href="/2019/02/03/%E6%A8%A1%E8%BF%90%E7%AE%97/"/>
      <url>/2019/02/03/%E6%A8%A1%E8%BF%90%E7%AE%97/</url>
      
        <content type="html"><![CDATA[<p>æ¨¡è¿ç®—</p><span id="more"></span><h1 id="æ¨¡è¿ç®—"><a href="#æ¨¡è¿ç®—" class="headerlink" title="æ¨¡è¿ç®—"></a>æ¨¡è¿ç®—</h1><p><strong>ä¸€äº›åŸºæœ¬è§„åˆ™</strong></p><p>åŠ æ³•ï¼š</p><p>$(a+b)\mod n=(a \mod n+b \mod n)\mod n$</p><p>å‡æ³•ï¼š</p><p>$(a-b)\mod n=(a \mod n-b \mod n)\mod n$</p><p>ä¹˜æ³•ï¼š</p><p>$(aâˆ—b)\mod n=(a \mod nâˆ—b \mod n)\mod n$</p><p>å¹‚ï¼š</p><p>$a^b \mod n=(a \mod n)^b  mod \ n$</p><p><strong><em>æ³¨æ„ï¼é™¤æ³•ä¸æˆç«‹ã€‚</em></strong></p><p>é‚£ä¹ˆï¼Œå¦‚ä½•è®¡ç®—$(a/b)\ mod\  n$?</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†é™¤bè½¬æ¢æˆä¹˜bçš„é€†å…ƒæ¥è§£å†³ï¼Œå³$(aâˆ—b^{-1} )\mod n$ </p><h1 id="æ±‚-a-b-mod-m"><a href="#æ±‚-a-b-mod-m" class="headerlink" title="æ±‚$(a/b)\ mod\ m $"></a>æ±‚$(a/b)\ mod\ m $</h1><h3 id="é€†å…ƒå®šä¹‰"><a href="#é€†å…ƒå®šä¹‰" class="headerlink" title="é€†å…ƒå®šä¹‰"></a>é€†å…ƒå®šä¹‰</h3><p>å¯¹äºæ­£æ•´æ•°$a$å’Œ$m$ï¼Œå¦‚æœæœ‰$ax\equiv 1(\ mod\ m)$ï¼Œé‚£ä¹ˆæŠŠè¿™ä¸ªåŒä½™æ–¹ç¨‹ä¸­çš„$x$æœ€å°æ­£æ•´æ•°è§£å«åš$a$æ¨¡$m$çš„é€†å…ƒã€‚</p><p><strong>é€†å…ƒçš„å­˜åœ¨æ€§è´¨ï¼šå½“$a$ä¸$m$äº’ç´ çš„æ—¶å€™ï¼Œé€†å…ƒæ‰å­˜åœ¨è§£ï¼Œå¦‚æœä¸äº’ç´ åˆ™æ— è§£ï¼ˆè¿™é‡Œè¯´çš„éƒ½æ˜¯æ•´æ•°è§£ï¼‰</strong></p><h3 id="æ±‚æ³•"><a href="#æ±‚æ³•" class="headerlink" title="æ±‚æ³•"></a>æ±‚æ³•</h3><p>é€†å…ƒä¸€èˆ¬ç”¨æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•æ¥æ±‚å¾—ï¼Œå¦‚æœ$m$ä¸ºç´ æ•°ï¼Œé‚£ä¹ˆè¿˜å¯ä»¥æ ¹æ®è´¹é©¬å°å®šç†å¾—åˆ°é€†å…ƒä¸º$a^{m-2}\ mod\ m$ã€‚ï¼ˆéƒ½è¦æ±‚$a$å’Œ$m$äº’è´¨ï¼‰</p><hr><h4 id="è´¹é©¬å°å®šç†æ±‚è§£ï¼ˆmä¸ºç´ æ•°æ˜¯è´¹é©¬å°å®šç†çš„å‰ç½®æ¡ä»¶ï¼‰"><a href="#è´¹é©¬å°å®šç†æ±‚è§£ï¼ˆmä¸ºç´ æ•°æ˜¯è´¹é©¬å°å®šç†çš„å‰ç½®æ¡ä»¶ï¼‰" class="headerlink" title="è´¹é©¬å°å®šç†æ±‚è§£ï¼ˆmä¸ºç´ æ•°æ˜¯è´¹é©¬å°å®šç†çš„å‰ç½®æ¡ä»¶ï¼‰"></a>è´¹é©¬å°å®šç†æ±‚è§£ï¼ˆmä¸ºç´ æ•°æ˜¯è´¹é©¬å°å®šç†çš„å‰ç½®æ¡ä»¶ï¼‰</h4><p>è´¹é©¬å°å®šç†ï¼šå¯¹äºç´ æ•° $m$ ä»»æ„ä¸æ˜¯ $m$ çš„å€æ•°çš„ $b$ï¼Œéƒ½æœ‰ï¼š$b^{m-1}\equiv1\  mod \ m$</p><p>äºæ˜¯æœ‰$ b* b^{m-2}\equiv1\ mod \ m $</p><p>äºæ˜¯æœ‰</p><script type="math/tex; mode=display">a/b=a/b*(b * b ^ {m-2})=a*b ^ {m-2}\ mod\ m</script><h4 id="æ‰©å±•æ¬§å‡ é‡Œå¾—"><a href="#æ‰©å±•æ¬§å‡ é‡Œå¾—" class="headerlink" title="æ‰©å±•æ¬§å‡ é‡Œå¾—"></a>æ‰©å±•æ¬§å‡ é‡Œå¾—</h4><p>åˆ©ç”¨è´¹é©¬å°å®šç†åªèƒ½æ±‚å‡ºmä¸ºç´ æ•°çš„æƒ…å†µä¸‹çš„ä¹˜æ³•é€†å…ƒï¼Œæ‰€ä»¥è¿˜æ˜¯éœ€è¦é‡‡ç”¨æ‰©å±•æ¬§å‡ é‡Œå¾·ç®—æ³•æ¥è®¡ç®—æ™®éæƒ…å†µä¸‹çš„ä¹˜æ³•é€†å…ƒçš„æƒ…å†µã€‚</p><p>å½“ a ä¸ b äº’ç´ æ—¶æœ‰$ gcd ï¼ˆ a ï¼Œ b ï¼‰ = 1 $ï¼›</p><p>å³å¾—ï¼š<script type="math/tex">a*x + b*y = 1</script></p><p>$a * x â‰¡ 1 ï¼ˆ mod b ï¼‰ï¼›$</p><p>ç”±äº a ä¸ b äº’ç´ ï¼ŒåŒä½™å¼ä¸¤è¾¹å¯ä»¥åŒé™¤ a ï¼Œå¾—ï¼š</p><p>$1 * x â‰¡ 1 / a ï¼ˆmod bï¼‰$ï¼›</p><p>å› æ­¤ $x$ æ˜¯ $a \ mod\  b$ çš„é€†å…ƒï¼›</p><script type="math/tex; mode=display">a*x + b*y = 1</script><p><strong>æ±‚å¾—$x$å³ä¸º$a\%b$çš„é€†å…ƒ$(ax\%b \equiv 1)$ï¼›$ y$å³ä¸º$b\%a$çš„é€†å…ƒ$(by\%a \equiv 1)$ã€‚</strong></p><p><strong>æ‰€ä»¥</strong></p><p>ç”¨æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•æ±‚å¾—ä¸€ç»„$x0,y0$å’Œ$gcd$;æ£€æŸ¥$gcd$æ˜¯å¦ä¸º1<br>$gcd$ä¸ä¸º1è¯´æ˜é€†å…ƒä¸å­˜åœ¨ï¼Œè‹¥ä¸º1,è°ƒæ•´$x0$åˆ°0~m-1çš„èŒƒå›´ä¸­å³å¯ã€‚ </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ­¤ç®—æ³•å³å¯æ±‚å‡ºgcd(a,b)ï¼Œä¹Ÿå¯æ±‚å‡ºxå’Œyã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">ex_gcd</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b,<span class="keyword">int</span> &amp;x,<span class="keyword">int</span> &amp;y)</span>       <span class="comment">//æ‰©å±•æ¬§å‡ é‡Œå¾— </span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(b==<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        x=<span class="number">1</span>;</span><br><span class="line">        y=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> r=<span class="built_in">ex_gcd</span>(b,a%b,x,y);</span><br><span class="line">    <span class="keyword">int</span> t=x;</span><br><span class="line">    x=y;</span><br><span class="line">    y=t-a/b*y;</span><br><span class="line">    <span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mod_reverse</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> n)</span><span class="comment">//ax=1(mod n) æ±‚açš„é€†å…ƒx </span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> d,x,y;</span><br><span class="line">    d=<span class="built_in">ex_gcd</span>(a,n,x,y);</span><br><span class="line">    <span class="keyword">if</span>(d==<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> (x%n+n)%n;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="é€šç”¨"><a href="#é€šç”¨" class="headerlink" title="é€šç”¨"></a>é€šç”¨</h4><p>è´¹é©¬å°å®šç†å’Œæ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•æ±‚é€†å…ƒæ˜¯æœ‰å±€é™æ€§çš„ï¼Œå®ƒä»¬éƒ½ä¼šè¦æ±‚<img src="https://img-blog.csdn.net/20140613102654328" alt="img">ä¸<img src="https://img-blog.csdn.net/20140613102712781" alt="img">äº’ç´ ã€‚å®é™…ä¸Šæˆ‘ä»¬è¿˜æœ‰ä¸€</p><p>ç§é€šç”¨çš„æ±‚é€†å…ƒæ–¹æ³•ï¼Œé€‚åˆæ‰€æœ‰æƒ…å†µã€‚å…¬å¼å¦‚ä¸‹</p><p>$ans=a*b^{-1}\ mod\ m=a\ mod\ (mb)/b$</p><p>å‚è€ƒï¼š</p><p><a href="http://www.cnblogs.com/cenariusxz/p/4323872.html">http://www.cnblogs.com/cenariusxz/p/4323872.html</a></p><p><a href="https://blog.csdn.net/liangzhaoyang1/article/details/56514028">https://blog.csdn.net/liangzhaoyang1/article/details/56514028</a></p><p><a href="https://blog.csdn.net/greenary/article/details/79343176">https://blog.csdn.net/greenary/article/details/79343176</a></p><p><a href="https://blog.csdn.net/acdreamers/article/details/8220787">https://blog.csdn.net/acdreamers/article/details/8220787</a></p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è´¹é©¬å°å®šç† </tag>
            
            <tag> æ¨¡è¿ç®— </tag>
            
            <tag> æ•°è®º </tag>
            
            <tag> é€†å…ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç´ æ•°ç­›å¿«é€Ÿå¹‚</title>
      <link href="/2019/02/03/%E7%B4%A0%E6%95%B0%E7%AD%9B%E5%BF%AB%E9%80%9F%E5%B9%82/"/>
      <url>/2019/02/03/%E7%B4%A0%E6%95%B0%E7%AD%9B%E5%BF%AB%E9%80%9F%E5%B9%82/</url>
      
        <content type="html"><![CDATA[<p>ç´ æ•°ç­›å¿«é€Ÿå¹‚</p><span id="more"></span><h1 id="ç´ æ•°ç­›"><a href="#ç´ æ•°ç­›" class="headerlink" title="ç´ æ•°ç­›"></a>ç´ æ•°ç­›</h1><h2 id="åŸƒæ°ç­›æ³•â€”-æ±‚è§£nä»¥å†…çš„ç´ æ•°ä¸ªæ•°"><a href="#åŸƒæ°ç­›æ³•â€”-æ±‚è§£nä»¥å†…çš„ç´ æ•°ä¸ªæ•°" class="headerlink" title="åŸƒæ°ç­›æ³•â€”-æ±‚è§£nä»¥å†…çš„ç´ æ•°ä¸ªæ•°"></a>åŸƒæ°ç­›æ³•â€”-æ±‚è§£nä»¥å†…çš„ç´ æ•°ä¸ªæ•°</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> prime[MAXN]; <span class="comment">//ç¬¬iä¸ªç´ æ•°çš„å€¼</span></span><br><span class="line"><span class="keyword">bool</span> is_prime[MAXN]; <span class="comment">//is_prime[i]ä¸ºtrueæ—¶è¡¨ç¤ºiæ˜¯ç´ æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›nä»¥å†…ç´ æ•°çš„ä¸ªæ•°</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> p = <span class="number">0</span>; <span class="comment">//ä»£è¡¨ç´ æ•°ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++)</span><br><span class="line">        is_prime[i] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(is_prime[i])</span><br><span class="line">        &#123;</span><br><span class="line">            prime[p++] = i; <span class="comment">//æ¯æœ‰ä¸€ä¸ªç´ æ•°ï¼Œpå°±++ï¼Œç„¶åprimeå­˜çš„å°±æ˜¯ç´ æ•°çš„å€¼ï¼Œç„¶åè¿›è¡Œç­›é€‰</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i * i; j &lt;= n; j += i)</span><br><span class="line">                is_prime[j] = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p; <span class="comment">//prime[p - 1]ä»£è¡¨nä»¥å†…æœ€å¤§çš„ç´ æ•°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹æ³•æ¯”è¾ƒå¥½ç†è§£ï¼Œåˆå§‹æ—¶ï¼Œå‡è®¾å…¨éƒ¨éƒ½æ˜¯ç´ æ•°ï¼Œå½“æ‰¾åˆ°ä¸€ä¸ªç´ æ•°æ—¶ï¼Œæ˜¾ç„¶è¿™ä¸ªç´ æ•°ä¹˜ä¸Šå¦å¤–ä¸€ä¸ªæ•°ä¹‹åéƒ½æ˜¯åˆæ•°(æ³¨æ„ä¸Šé¢çš„i*i ,  æ¯” i*2 è¦å¿«ç‚¹ )ï¼ŒæŠŠè¿™äº›åˆæ•°éƒ½ç­›æ‰ï¼Œå³ç®—æ³•åå­—çš„ç”±æ¥ã€‚</p><p>ä½†ä»”ç»†åˆ†æèƒ½å‘ç°ï¼Œè¿™ç§æ–¹æ³•ä¼šé€ æˆé‡å¤ç­›é™¤åˆæ•°ï¼Œå½±å“æ•ˆç‡ã€‚æ¯”å¦‚10ï¼Œåœ¨i=2çš„æ—¶å€™ï¼Œk=2*15ç­›äº†ä¸€æ¬¡ï¼›åœ¨i=5ï¼Œk=5*6 çš„æ—¶å€™åˆç­›äº†ä¸€æ¬¡ã€‚æ‰€ä»¥ï¼Œä¹Ÿå°±æœ‰äº†å¿«é€Ÿçº¿æ€§ç­›æ³•ã€‚</p><h2 id="å¿«é€Ÿçº¿æ€§ç­›æ³•"><a href="#å¿«é€Ÿçº¿æ€§ç­›æ³•" class="headerlink" title="å¿«é€Ÿçº¿æ€§ç­›æ³•"></a>å¿«é€Ÿçº¿æ€§ç­›æ³•</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;    </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">long</span> N = <span class="number">200000</span>;   </span><br><span class="line"><span class="keyword">long</span> prime[N] = &#123;<span class="number">0</span>&#125;,num_prime = <span class="number">0</span>;    </span><br><span class="line"><span class="keyword">int</span> isNotPrime[N] = &#123;<span class="number">1</span>, <span class="number">1</span>&#125;;   </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>    </span></span><br><span class="line"><span class="function"></span>&#123;     </span><br><span class="line">     <span class="keyword">for</span>(<span class="keyword">long</span> i = <span class="number">2</span> ; i &lt; N ; i ++)       </span><br><span class="line">       &#123;            </span><br><span class="line"><span class="keyword">if</span>(!isNotPrime[i])               </span><br><span class="line"> prime[num_prime++]=i;  </span><br><span class="line"><span class="comment">//å…³é”®å¤„1        </span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">long</span> j = <span class="number">0</span> ; j &lt; num_prime &amp;&amp; i * prime[j] &lt;  N ; j ++)</span><br><span class="line">    &#123;               </span><br><span class="line">      isNotPrime[i * prime[j]] = <span class="number">1</span>;  </span><br><span class="line">  <span class="keyword">if</span>( !(i % prime[j] ) )  <span class="comment">//å…³é”®å¤„2                  </span></span><br><span class="line"><span class="keyword">break</span>;           </span><br><span class="line">&#125;    </span><br><span class="line">&#125;        </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸¤è€…å¯¹æ¯”"><a href="#ä¸¤è€…å¯¹æ¯”" class="headerlink" title="ä¸¤è€…å¯¹æ¯”"></a>ä¸¤è€…å¯¹æ¯”</h2><p><img src="/2019/02/03/%E7%B4%A0%E6%95%B0%E7%AD%9B%E5%BF%AB%E9%80%9F%E5%B9%82/duibi.jpg" alt></p><p>ç”±ä¸Šè¿°æ•°æ®ä¸éš¾çœ‹å‡ºï¼Œå¿«é€Ÿçº¿æ€§ç­›æ³•çš„æ•ˆç‡åŸºæœ¬æ¯”æ™®é€šç­›æ³•æ±‚ç´ æ•°çš„æ•ˆç‡é«˜ä¸€å€ï¼Œè¯´æ˜è¿™çš„ç¡®æ˜¯ä¸€ç§æ¯”è¾ƒå¯é çš„å…³äºæ±‚ç´ æ•°ä¼˜åŒ–çš„ç®—æ³•~ï¼</p><p>å‚è€ƒ:</p><p><a href="https://blog.csdn.net/dinosoft/article/details/5829550">https://blog.csdn.net/dinosoft/article/details/5829550</a></p><p><a href="https://zhuanlan.zhihu.com/p/42609585">https://zhuanlan.zhihu.com/p/42609585</a></p><h1 id="å¿«é€Ÿå¹‚ï¼Œå¿«é€Ÿä¹˜"><a href="#å¿«é€Ÿå¹‚ï¼Œå¿«é€Ÿä¹˜" class="headerlink" title="å¿«é€Ÿå¹‚ï¼Œå¿«é€Ÿä¹˜"></a>å¿«é€Ÿå¹‚ï¼Œå¿«é€Ÿä¹˜</h1><p>å‚è€ƒï¼š<a href="https://blog.xehoth.cc/DurationPlan-modPow/#%E5%8D%81%E8%BF%9B%E5%88%B6%E5%BF%AB%E9%80%9F%E5%B9%82">https://blog.xehoth.cc/DurationPlan-modPow/#%E5%8D%81%E8%BF%9B%E5%88%B6%E5%BF%AB%E9%80%9F%E5%B9%82</a></p><h3 id="å¿«é€Ÿä¹˜"><a href="#å¿«é€Ÿä¹˜" class="headerlink" title="å¿«é€Ÿä¹˜"></a>å¿«é€Ÿä¹˜</h3><p>æ™®é€šå¿«é€Ÿå¹‚åœ¨é¢å¯¹å¤§é‡æ•°æ®æˆ–å•ä¸ªå¤Ÿå¤§æ•°æ®æ—¶æ•ˆç‡å¾ˆä½ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦åè¿›åˆ¶å¿«é€Ÿå¹‚ï¼Œè€Œå¦‚æœæ¨¡æ•°æ˜¯ <code>long long</code> ä»¥å†…çš„æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¿«é€Ÿå¹‚æ€æƒ³ <em>O</em>(log n)O(log n) å®Œæˆå¿«é€Ÿä¹˜ï¼Œä½†æˆ‘ä»¬å…¶å®å¯ä»¥ <em>O</em>(1)å®Œæˆã€‚</p><p>åˆ©ç”¨ <code>long double</code>ï¼Œè€Œ <code>long double</code>çš„ç²¾åº¦å…¶å®åªæœ‰ 19 ä½ï¼Œç›´æ¥ä¹˜æ˜¯ä¸è¡Œçš„ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆé™¤å†ä¹˜ï¼Œè¿™æ ·å°±ä¸ä¼šå‡ºç°ç²¾åº¦é—®é¢˜ï¼Œè€Œå‰é¢ç›´æ¥è®¡ç®— <em>a</em>Ã—<em>b</em>ï¼Œå†å‡å»åé¢çš„éƒ¨åˆ†ï¼Œå³ä½¿å‰é¢ <em>a</em>Ã—<em>b</em> çˆ†è´Ÿï¼Œå®ƒè¿˜ä¼šå†çˆ†ä¸€éå˜ä¸ºæ­£çš„ï¼Œä¿è¯äº†ç­”æ¡ˆçš„æ­£ç¡®ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">double</span> ld;</span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> ll <span class="title">mul</span><span class="params">(ll a, ll b)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (a * b - (ll)((ld)a / MOD * b) * MOD + MOD) % MOD;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="äºŒè¿›åˆ¶å¿«é€Ÿå¹‚"><a href="#äºŒè¿›åˆ¶å¿«é€Ÿå¹‚" class="headerlink" title="äºŒè¿›åˆ¶å¿«é€Ÿå¹‚"></a>äºŒè¿›åˆ¶å¿«é€Ÿå¹‚</h3><p><strong>åŸºæœ¬ä»£ç ï¼Œéƒ½æ‡‚</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="function">ll <span class="title">mod_pow</span><span class="params">(ll x, ll n, ll mod)</span> <span class="comment">//x^n % mod</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll ans = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(n &gt; <span class="number">0</span>) <span class="comment">//éå†æ‰€æœ‰äºŒè¿›åˆ¶ä½</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(n &amp; <span class="number">1</span>) <span class="comment">//å¯¹åº”nçš„äºŒè¿›åˆ¶ä½æ˜¯ä¸æ˜¯1</span></span><br><span class="line">            ans = ans * x % mod; <span class="comment">//ä¹˜ä¸Šx^(2^i)</span></span><br><span class="line">        x = x * x % mod;  <span class="comment">//xå¹³æ–¹</span></span><br><span class="line">        n &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>èœœæ±ä¼˜åŒ–ç‰ˆæœ¬ï¼ˆå‚è€ƒext/numeric.hçš„powerå‡½æ•°ï¼‰</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">long</span> <span class="title">optimizedModPow</span><span class="params">(<span class="keyword">long</span> a, <span class="keyword">long</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (b == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (; ~b &amp; <span class="number">1</span>; b &gt;&gt;= <span class="number">1</span>, a = <span class="built_in">mul</span>(a, a));</span><br><span class="line">    <span class="keyword">register</span> <span class="keyword">long</span> ret = a;</span><br><span class="line">    <span class="keyword">for</span> (b &gt;&gt;= <span class="number">1</span>; b; b &gt;&gt;= <span class="number">1</span>)</span><br><span class="line">        a = <span class="built_in">mul</span>(a, a), (b &amp; <span class="number">1</span>) ? ret = <span class="built_in">mul</span>(a, ret) : <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//balabala--çœ‹ä¸æ‡‚ç³»åˆ—ï¼ï¼</span></span><br></pre></td></tr></table></figure><h3 id="åè¿›åˆ¶å¿«é€Ÿå¹‚"><a href="#åè¿›åˆ¶å¿«é€Ÿå¹‚" class="headerlink" title="åè¿›åˆ¶å¿«é€Ÿå¹‚"></a>åè¿›åˆ¶å¿«é€Ÿå¹‚</h3><p>è¯´ç™½äº†å°±æ˜¯æ‹†æˆåè¿›åˆ¶æ•°</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¿«é€Ÿå¹‚ </tag>
            
            <tag> å¿«é€Ÿä¹˜ </tag>
            
            <tag> æ•°è®º </tag>
            
            <tag> ç´ æ•°ç­› </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¬§å‡ é‡Œå¾—</title>
      <link href="/2019/02/03/%E6%AC%A7%E5%87%A0%E9%87%8C%E5%BE%97/"/>
      <url>/2019/02/03/%E6%AC%A7%E5%87%A0%E9%87%8C%E5%BE%97/</url>
      
        <content type="html"><![CDATA[<p>gcd, lcm, exgcd</p><span id="more"></span><h1 id="æ¬§å‡ é‡Œå¾—â€”æœ€å¤§å…¬çº¦æ•°"><a href="#æ¬§å‡ é‡Œå¾—â€”æœ€å¤§å…¬çº¦æ•°" class="headerlink" title="æ¬§å‡ é‡Œå¾—â€”æœ€å¤§å…¬çº¦æ•°"></a>æ¬§å‡ é‡Œå¾—â€”æœ€å¤§å…¬çº¦æ•°</h1><h3 id="gcdï¼ˆa-b-gcd-b-a-mod-b"><a href="#gcdï¼ˆa-b-gcd-b-a-mod-b" class="headerlink" title="gcdï¼ˆa, b) = gcd(b, a mod b)"></a>gcdï¼ˆa, b) = gcd(b, a mod b)</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(b == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">gcd</span>(b, a % )b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€æ³¢åº”ç”¨ï¼š<a href="https://www.cnblogs.com/kimsimple/p/6680820.html">çº¿æ®µä¸Šæ ¼ç‚¹ä¸ªæ•°â€”-æŒ‘æˆ˜ç¼–ç¨‹â€”-æ¬§å‡ é‡Œå¾—</a></p><h3 id="algorithmåº“çš„std-gcdå‡½æ•°"><a href="#algorithmåº“çš„std-gcdå‡½æ•°" class="headerlink" title="algorithmåº“çš„std::_gcdå‡½æ•°"></a>algorithmåº“çš„std::_gcdå‡½æ•°</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">8</span>;</span><br><span class="line">    <span class="keyword">int</span> b = <span class="number">12</span>;</span><br><span class="line">    cout &lt;&lt;__gcd(a, b); <span class="comment">//ä¸¤ä¸ª&#x27;_&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//outï¼š4   //g++-4.8 </span></span><br></pre></td></tr></table></figure><h3 id="æœ€å°å…¬å€æ•°-LCM-å’Œæœ€å¤§å…¬çº¦æ•°-GCD"><a href="#æœ€å°å…¬å€æ•°-LCM-å’Œæœ€å¤§å…¬çº¦æ•°-GCD" class="headerlink" title="æœ€å°å…¬å€æ•°(LCM)å’Œæœ€å¤§å…¬çº¦æ•°(GCD)"></a>æœ€å°å…¬å€æ•°(LCM)å’Œæœ€å¤§å…¬çº¦æ•°(GCD)</h3><p><code>lcm(a, b) = (a*b)/gcd(a,b)</code></p><h1 id="æ‰©å±•æ¬§å‡ é‡Œå¾—"><a href="#æ‰©å±•æ¬§å‡ é‡Œå¾—" class="headerlink" title="æ‰©å±•æ¬§å‡ é‡Œå¾—"></a>æ‰©å±•æ¬§å‡ é‡Œå¾—</h1><p>åŸºæœ¬ç®—æ³•ï¼šå¯¹äºä¸å®Œå…¨ä¸º 0 çš„éè´Ÿæ•´æ•° aï¼Œbï¼Œgcdï¼ˆaï¼Œbï¼‰è¡¨ç¤º aï¼Œb çš„æœ€å¤§å…¬çº¦æ•°ï¼Œå¿…ç„¶å­˜åœ¨æ•´æ•°å¯¹ xï¼Œy ï¼Œä½¿å¾— gcdï¼ˆaï¼Œbï¼‰=ax+byã€‚</p><p>å½“ gcd ï¼ˆ a ï¼Œ b ï¼‰= d æ—¶ï¼Œæ±‚ç»å¯¹å€¼å’Œæœ€å°çš„ x ï¼Œ y ä½¿å¾— x <em> a + y </em> b = d ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ­¤ç®—æ³•å³å¯æ±‚å‡ºgcd(a,b)ï¼Œä¹Ÿå¯æ±‚å‡ºxå’Œyã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">exgcd</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b,<span class="keyword">int</span> &amp;x,<span class="keyword">int</span> &amp;y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(b==<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        x=<span class="number">1</span>;</span><br><span class="line">        y=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> r=<span class="built_in">exgcd</span>(b,a%b,x,y);</span><br><span class="line">    <span class="keyword">int</span> t=x;</span><br><span class="line">    x=y;</span><br><span class="line">    y=t-a/b*y;</span><br><span class="line">    <span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°å­¦çŸ¥è¯† </tag>
            
            <tag> gcd </tag>
            
            <tag> lcm </tag>
            
            <tag> exgcd </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç‰›å®¢--appleseçš„å›æ–‡ä¸²</title>
      <link href="/2019/01/30/%E7%89%9B%E5%AE%A2--applese%E7%9A%84%E5%9B%9E%E6%96%87%E4%B8%B2/"/>
      <url>/2019/01/30/%E7%89%9B%E5%AE%A2--applese%E7%9A%84%E5%9B%9E%E6%96%87%E4%B8%B2/</url>
      
        <content type="html"><![CDATA[<p>åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²åœ¨ä»»æ„ä½ç½®(åŒ…æ‹¬æœ€å‰é¢å’Œæœ€åé¢)æ’å…¥ä¸€ä¸ªå­—ç¬¦åèƒ½ä¸èƒ½æ„æˆä¸€ä¸ªå›æ–‡ä¸²</p> <span id="more"></span><p><a href="https://ac.nowcoder.com/acm/contest/330/I">Applese çš„å›æ–‡ä¸²</a></p><p><strong>è§£æ</strong></p><p>TAGï¼šæ€ç»´ï¼Œæƒ³æ³•</p><p>å¯ä»¥è®¤ä¸ºæ’å…¥å’Œåˆ é™¤æ˜¯ç­‰ä»·çš„æ“ä½œã€‚æƒ³åˆ°è¿™ä¸€ç‚¹ï¼Œè¿™é¢˜å°±ä¼šå¥½åšå¾ˆå¤šã€‚<br>å¦‚æœè¿™ä¸ªä¸²æœ¬èº«å°±æ˜¯å›æ–‡ä¸²ï¼Œç­”æ¡ˆä¸€å®šæ˜¯Yesã€‚<br>å¦åˆ™æˆ‘ä»¬åªéœ€è¦è€ƒè™‘ä¸²ä¸­å¯¹ç§°çš„ä½ç½®ä¸ç›¸ç­‰çš„ä¸¤ä¸ªå­—ç¬¦ï¼Œåˆ†åˆ«å°è¯•æŠŠå®ƒä»¬åˆ æ‰ååˆ¤æ–­ä¸€ä¸‹æ˜¯ä¸æ˜¯å›æ–‡çš„å°±è¡Œäº†ã€‚</p><p>å‚è€ƒè‡ªï¼š<a href="https://ac.nowcoder.com/discuss/153012?type=101">https://ac.nowcoder.com/discuss/153012?type=101</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æäº¤æ—¶é—´ï¼š2019-01-30 12:03:32 è¯­è¨€ï¼šC++ ä»£ç é•¿åº¦ï¼š695 è¿è¡Œæ—¶é—´ï¼š 4 ms å ç”¨å†…å­˜ï¼š996K </span></span><br><span class="line"><span class="comment">è¿è¡ŒçŠ¶æ€ï¼šç­”æ¡ˆæ­£ç¡®</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­å¯¹ç§°ä½ç½®çš„å­—ç¬¦æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰è¿”å›-1ï¼Œä¸æ˜¯è¿”å›ä¸ç›¸ç­‰çš„ä½ç½®</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">check</span><span class="params">(string s)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> len = s.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i  = <span class="number">0</span>; i &lt; len ; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(s[i] != s[len - <span class="number">1</span> - i])</span><br><span class="line">            <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    string s;</span><br><span class="line">    cin &gt;&gt; s;</span><br><span class="line">    <span class="keyword">int</span> diff = <span class="built_in">check</span>(s);</span><br><span class="line">    <span class="keyword">if</span>(diff == <span class="number">-1</span>)</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Yes&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        string tmp = s;</span><br><span class="line">        <span class="comment">//åˆ é™¤æ‰ä¸ç›¸ç­‰çš„é‚£ä¸ªå­—ç¬¦ï¼Œs1æ˜¯åˆ æ‰å·¦è¾¹çš„ï¼Œs2çš„åˆ æ‰å³è¾¹çš„</span></span><br><span class="line">        string s1 = s.<span class="built_in">erase</span>(diff, <span class="number">1</span>); </span><br><span class="line">        string s2 = tmp.<span class="built_in">erase</span>(tmp.<span class="built_in">size</span>() - <span class="number">1</span> - diff, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">check</span>(s1) == <span class="number">-1</span> || <span class="built_in">check</span>(s2) == <span class="number">-1</span>)</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;Yes&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;No&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›æ–‡ä¸² </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ—¥å¸¸waäºæ¨¡æ‹Ÿé¢˜</title>
      <link href="/2019/01/29/%E6%97%A5%E5%B8%B8wa%E4%BA%8E%E6%A8%A1%E6%8B%9F%E9%A2%98/"/>
      <url>/2019/01/29/%E6%97%A5%E5%B8%B8wa%E4%BA%8E%E6%A8%A1%E6%8B%9F%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>ç‰›å®¢â€”<a href="https://ac.nowcoder.com/acm/contest/330/C">Applese èµ°è¿·å®«</a></p><span id="more"></span><p>æ¨¡æ‹Ÿé¢˜ï¼Œå°±æ˜¯ç»™å‡ºä¸ªmÃ—nçŸ©é˜µï¼Œä»(0,0)å¼€å§‹ï¼Œè¾“å‡ºä¸€ç§æ–¹æ¡ˆèƒ½å¤Ÿä¸é‡å¤å¾—èµ°å®Œæ‰€æœ‰çš„ç‚¹å¹¶ä¸”å›åˆ°èµ·ç‚¹ï¼Œæ²¡æœ‰çš„è¯è¾“å‡º-1ã€‚</p><p>æ‰äº†ä¸¤ä¸ªå‘ï¼š</p><ul><li>ç‰¹æ®Šæƒ…å†µï¼š1è¡Œ2åˆ—æˆ–2è¡Œ1åˆ—ï¼Œæ²¡æœ‰è€ƒè™‘è¿™ä¸ªä¹Ÿå¯ä»¥å›åˆ°åŸç‚¹ï¼Œä»¥ä¸ºåªè¦æ˜¯<code>m==1||n==1</code>å°±ä¸èƒ½èµ°äº†</li><li>æ²¡æœ‰è€ƒè™‘åˆ°åˆ«çš„èµ°æ³•ï¼Œä»¥è‡³äºä»¥ä¸º<code>m%2==0</code>å°±ä¸èƒ½èµ°äº†</li></ul><p>æœ‰ä¸€ä¸ªè¿˜éœ€è¦çš„ä¼˜åŒ–çš„åœ°æ–¹å°±æ˜¯ä»£ç é€»è¾‘ã€‚</p><p><strong>è§£æ</strong></p><p>ä¸»è¦æ˜¯ä¸¤ç§æƒ…å†µï¼Œå½“<code>n%2==0</code>æ—¶ï¼Œå¯ä»¥æŒ‰ç…§ä¸‹é¢è¿™ç§èµ°æ³•è¾“å‡ºæ–¹æ¡ˆ</p><p><img src="/2019/01/29/%E6%97%A5%E5%B8%B8wa%E4%BA%8E%E6%A8%A1%E6%8B%9F%E9%A2%98/one.png" alt></p><p>å½“<code>n%2!=0&amp;&amp;m%2==0</code>æ—¶ï¼Œå¯ä»¥æŒ‰ç…§ä¸‹é¢è¿™ç§èµ°æ³•è¾“å‡ºæ–¹æ¡ˆ</p><p><img src="/2019/01/29/%E6%97%A5%E5%B8%B8wa%E4%BA%8E%E6%A8%A1%E6%8B%9F%E9%A2%98/two.png" alt></p><p>å…¶ä»–æƒ…å†µéƒ½æ²¡æœ‰æ–¹æ¡ˆï¼Œè¾“å‡º-1</p><p>ä»£ç é€»è¾‘æ–¹é¢ï¼Œæœ‰ä¸€éƒ¨åˆ†éƒ½æ˜¯ä¸€æ ·çš„è¾“å‡ºï¼Œæ‰€ä»¥å¯é‡å¤åˆ©ç”¨ï¼Œå¦‚çº¢è‰²éƒ¨åˆ†ã€‚æ‰€ä»¥å¯ç²¾ç®€ä»£ç ã€‚</p><p><img src="/2019/01/29/%E6%97%A5%E5%B8%B8wa%E4%BA%8E%E6%A8%A1%E6%8B%9F%E9%A2%98/code.png" alt></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æäº¤æ—¶é—´ï¼š2019-01-29 19:41:29 è¯­è¨€ï¼šC++ ä»£ç é•¿åº¦ï¼š1360 è¿è¡Œæ—¶é—´ï¼š 5 ms å ç”¨å†…å­˜ï¼š504K </span></span><br><span class="line"><span class="comment">è¿è¡ŒçŠ¶æ€ï¼šç­”æ¡ˆæ­£ç¡®</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (m == <span class="number">2</span>)</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;RL&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            cout &lt;&lt; <span class="number">-1</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (m == <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">2</span>)</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;DU&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            cout &lt;&lt; <span class="number">-1</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (n % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;R&quot;</span>;</span><br><span class="line">         <span class="comment">//é‡å¤åˆ©ç”¨éƒ¨åˆ†</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i += <span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (i)</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;D&quot;</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; m - <span class="number">1</span>; j++)</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;R&quot;</span>;</span><br><span class="line">          <span class="comment">//  </span></span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;D&quot;</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; m - <span class="number">1</span>; j++)</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;L&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;L&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; i++)</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;U&quot;</span>;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (m % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;D&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i += <span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (i)</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;R&quot;</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; n - <span class="number">1</span>; j++)</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;D&quot;</span>;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;R&quot;</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; n - <span class="number">1</span>; j++)</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;U&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;U&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m - <span class="number">1</span>; i++)</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;L&quot;</span>;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        cout &lt;&lt; <span class="number">-1</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å¹³è¡¡ä¸‰è¿›åˆ¶</title>
      <link href="/2019/01/28/%E5%B9%B3%E8%A1%A1%E4%B8%89%E8%BF%9B%E5%88%B6/"/>
      <url>/2019/01/28/%E5%B9%B3%E8%A1%A1%E4%B8%89%E8%BF%9B%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<p>å¹³è¡¡ä¸‰è¿›åˆ¶</p> <span id="more"></span><p><a href="https://baike.baidu.com/item/%E5%B9%B3%E8%A1%A1%E4%B8%89%E8%BF%9B%E5%88%B6/9370144?fr=aladdin">å¹³è¡¡ä¸‰è¿›åˆ¶â€”ç™¾åº¦ç™¾ç§‘</a></p><p>ä¸€é“ç®€å•å¹³è¡¡ä¸‰è¿›åˆ¶é¢˜ç›®:</p><p><a href="https://ac.nowcoder.com/acm/contest/327/C">ç‰›å®¢â€”å¤„å¥³åº§çš„ç ç </a></p><p>å‚è€ƒ:<a href="https://blog.csdn.net/Sherry_Yue/article/details/86658533">https://blog.csdn.net/Sherry_Yue/article/details/86658533</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//submit time:2019-01-28 22:26:07</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">double</span> n, res = <span class="number">0</span>, cnt = <span class="number">0</span>;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">while</span>(cnt &lt; n) </span><br><span class="line">    &#123;</span><br><span class="line">        cnt = <span class="number">3</span> * cnt + <span class="number">1</span>;</span><br><span class="line">        res++;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><code>long longä¸ long double</code></p><p>æŒ‰é“ç†æ¥è¯´ï¼Œ<code>long double</code> æ¯”<code>double</code>å’Œ<code>long long</code>è¦è¡¨ç¤ºçš„èŒƒå›´è¦å¤§ï¼Œä½†æ˜¯ä¾æ®æƒ…å†µè€Œå®šï¼Œåœ¨æœ¬æœº64ä½æœºæµ‹è¯•ä¸Šæµ‹è¯•:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in"><span class="keyword">sizeof</span></span>(<span class="keyword">long</span> <span class="keyword">double</span>) = <span class="number">16</span></span><br><span class="line"><span class="built_in"><span class="keyword">sizeof</span></span>(<span class="keyword">long</span> <span class="keyword">long</span>) = <span class="number">8</span></span><br><span class="line"><span class="built_in"><span class="keyword">sizeof</span></span>(<span class="keyword">double</span>) = <span class="number">8</span>    </span><br></pre></td></tr></table></figure><hr><p>æ›´å¤šäº†è§£:</p><p><a href="http://poj.org/problem?id=1702">poj1702â€”Evaâ€™s Balance</a></p><p><a href="https://blog.csdn.net/yeruby/article/details/47047385">https://blog.csdn.net/yeruby/article/details/47047385</a></p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¹³è¡¡ä¸‰è¿›åˆ¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åšå¼ˆè®º</title>
      <link href="/2019/01/27/%E5%8D%9A%E5%BC%88%E8%AE%BA/"/>
      <url>/2019/01/27/%E5%8D%9A%E5%BC%88%E8%AE%BA/</url>
      
        <content type="html"><![CDATA[<p>åšå¼ˆè®º</p> <span id="more"></span><h1 id="åšå¼ˆè®ºä¸¤é“é¢˜"><a href="#åšå¼ˆè®ºä¸¤é“é¢˜" class="headerlink" title="åšå¼ˆè®ºä¸¤é“é¢˜"></a>åšå¼ˆè®ºä¸¤é“é¢˜</h1><h2 id="ç‰›å®¢â€”å¤„å¥³åº§å’Œå°å§å§"><a href="#ç‰›å®¢â€”å¤„å¥³åº§å’Œå°å§å§" class="headerlink" title="ç‰›å®¢â€”å¤„å¥³åº§å’Œå°å§å§"></a><a href="https://ac.nowcoder.com/acm/contest/329/E">ç‰›å®¢â€”å¤„å¥³åº§å’Œå°å§å§</a></h2><p>åˆ†æï¼š</p><p>ä½œè€…ï¼šå„’ç”Ÿé›„æ‰1<br>é“¾æ¥ï¼š<a href="https://ac.nowcoder.com/discuss/152781?type=101&amp;order=0&amp;pos=1&amp;page=1">https://ac.nowcoder.com/discuss/152781?type=101&amp;order=0&amp;pos=1&amp;page=1</a><br>æ¥æºï¼šç‰›å®¢ç½‘</p><p>æ˜¾ç„¶å¤„å¥³åº§ååˆ†ç‰›é€¼ï¼Œå› æ­¤è¾“å‡ºâ€œcnznbâ€å³å¯<br> å’³å’³â€¦â€¦è‡³äºæ­£ç¡®çš„åšæ³•ã€‚é¦–å…ˆå› ä¸ºæ¯æ¬¡åœ¨å³è¾¹ç æ‰ä¸€ä¸ªå¤´å°±ç›¸å½“äºåœ¨å·¦è¾¹ä¼šå¤šå‡ºæ¥ä¸€ä¸ªå¤´ï¼Œæ‰€ä»¥å¯ä»¥æŠŠæ¯ğ‘›æ¬¡æ“ä½œçœ‹ä½œä¸€è½®ï¼Œæ¯è½®çš„æ“ä½œéƒ½æ˜¯ä»01ä¸²å³è¾¹å‘å·¦è¾¹å¯¹æ¯ä¸ªä½ç½®åœ¨åŸä½ä¾æ¬¡è¿›è¡Œæ“ä½œã€‚æˆ‘ä»¬è€ƒè™‘è¿™ç§åšæ³•ï¼Œä»å³åˆ°å·¦æˆ‘ä»¬é¦–å…ˆçœ‹åˆ°1å°±æŠŠä»–å˜æˆ0ï¼Œ0çš„è¯è®©ä»–éšæœºï¼Œç›´åˆ°ç¬¬ä¸€æ¬¡å‡ºç°æœ‰0å˜æˆäº†1çš„æƒ…å†µã€‚å¦‚æœæ²¡æœ‰å‡ºç°è¿™ç§æƒ…å†µé‚£ä¹ˆè¿™ä¸ªä¸²å·²ç»ç¬¦åˆäº†è¦æ±‚ï¼Œå¦‚æœæœ‰0å˜æˆ1å‘ç”Ÿï¼Œé‚£ä¹ˆåœ¨è¿™ä¹‹åçš„1æˆ‘ä»¬éƒ½ç»§ç»­å˜æˆ1ã€‚è¿™æ ·ä¸€è½®ç»“æŸä¹‹åï¼Œè¿™ä¸ª01ä¸²æ‰€è¡¨ç¤ºçš„äºŒè¿›åˆ¶æ•°çš„çš„å¤§å°ä¸€å®šæ˜¯ä¸¥æ ¼å¢åŠ äº†çš„ï¼ˆå› ä¸ºè™½ç„¶ä½ å¯èƒ½æŠŠä¸€äº›1å˜æˆäº†0ä½†æ˜¯æœ‰ä¸€ä¸ªé«˜ä½çš„0å˜æˆäº†1ï¼‰è€Œè¿™ä¸ªäºŒè¿›åˆ¶æ•°çš„å¤§å°æ˜¯æœ‰é™çš„ï¼Œå› æ­¤åœ¨æœ‰é™æ­¥å†…ä¸€å®šå¯ä»¥æŠŠè¿™ä¸²æ•°å˜æˆå…¨0ä¸²ã€‚</p><h2 id="HDU6312â€”GAME"><a href="#HDU6312â€”GAME" class="headerlink" title="HDU6312â€”GAME"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=6312">HDU6312â€”GAME</a></h2><p>å‚è€ƒï¼š</p><p><a href="https://blog.csdn.net/qq_37025443/article/details/81214403">https://blog.csdn.net/qq_37025443/article/details/81214403</a></p><p><em>ä¸Šé¢ä¸¤å¤§é¢˜éƒ½æ˜¯è¾“å‡ºä¸€ä¸ªç»“æœï¼Œæ— è®ºè¾“å…¥çš„æ˜¯ä»€ä¹ˆã€‚è¿™åªæ˜¯åšå¼ˆè®ºä¹‹ä¸€ï¼Œåšå¼ˆè®ºè¿˜æœ‰å…¶ä»–çš„å†…å®¹</em></p><h1 id="åšå¼ˆè®ºå¸¸è§ç±»å‹"><a href="#åšå¼ˆè®ºå¸¸è§ç±»å‹" class="headerlink" title="åšå¼ˆè®ºå¸¸è§ç±»å‹"></a>åšå¼ˆè®ºå¸¸è§ç±»å‹</h1><p>å‚è€ƒ:<a href="https://blog.csdn.net/lgdblue/article/details/15809893">https://blog.csdn.net/lgdblue/article/details/15809893</a></p><h2 id="å·´ä»€åšå¼ˆ"><a href="#å·´ä»€åšå¼ˆ" class="headerlink" title="å·´ä»€åšå¼ˆ"></a>å·´ä»€åšå¼ˆ</h2><ol><li><p>é—®é¢˜æ¨¡å‹ï¼šåªæœ‰ä¸€å †nä¸ªç‰©å“ï¼Œä¸¤ä¸ªäººè½®æµä»è¿™å †ç‰©å“ä¸­å–ç‰©ï¼Œè§„å®šæ¯æ¬¡è‡³å°‘å–ä¸€ä¸ªï¼Œæœ€å¤šå–mä¸ªï¼Œæœ€åå–å…‰è€…å¾—èƒœã€‚</p></li><li><p>è§£å†³æ€è·¯ï¼šå½“n=m+1æ—¶ï¼Œç”±äºä¸€æ¬¡æœ€å¤šåªèƒ½å–mä¸ªï¼Œæ‰€ä»¥æ— è®ºå…ˆå–è€…æ‹¿èµ°å¤šå°‘ä¸ªï¼Œåå–è€…éƒ½èƒ½å¤Ÿä¸€æ¬¡æ‹¿èµ°å‰©ä½™çš„ç‰©å“ï¼Œåè€…å–èƒœï¼Œ<code>æ‰€ä»¥å½“ä¸€æ–¹é¢å¯¹çš„å±€åŠ¿æ˜¯n%(m+1)=0æ—¶ï¼Œå…¶é¢ä¸´çš„æ˜¯å¿…è´¥çš„å±€åŠ¿</code>ã€‚æ‰€ä»¥å½“n=ï¼ˆm+1)*r+sï¼Œï¼ˆrä¸ºä»»æ„è‡ªç„¶æ•°ï¼Œsâ‰¤m)æ—¶,å¦‚æœå…ˆå–è€…è¦æ‹¿èµ°sä¸ªç‰©å“ï¼Œå¦‚æœåå–è€…æ‹¿èµ°xï¼ˆâ‰¤m)ä¸ªï¼Œé‚£ä¹ˆå…ˆå–è€…å†æ‹¿èµ°m+1-kä¸ªï¼Œç»“æœå‰©ä¸‹ï¼ˆm+1ï¼‰ï¼ˆr-1ï¼‰ä¸ªï¼Œä»¥åä¿æŒè¿™æ ·çš„å–æ³•ï¼Œé‚£ä¹ˆå…ˆå–è€…è‚¯å®šè·èƒœã€‚æ€»ä¹‹ï¼Œè¦ä¿æŒç»™å¯¹æ‰‹ç•™ä¸‹ï¼ˆm+1ï¼‰çš„å€æ•°ï¼Œå°±èƒ½æœ€åè·èƒœã€‚</p></li><li><p>å˜å½¢ï¼šæ¡ä»¶ä¸å˜ï¼Œæ”¹ä¸ºæœ€åå–å…‰çš„äººè¾“ã€‚</p></li><li><p>ç»“è®ºï¼šå½“ä¸€æ–¹é¢å¯¹çš„å±€åŠ¿æ˜¯n%(m+1)=0æ—¶ï¼Œå…¶é¢ä¸´çš„æ˜¯å¿…è´¥çš„å±€åŠ¿</p></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å…·ä½“æ¥è¯´ï¼Œå½“må¤§äºç­‰äºnæ—¶è‚¯å®šæ˜¯å…ˆæ‰‹èµ¢ï¼Œæ‰€ä»¥è¿™æ˜¯å¿…èƒœç‚¹ï¼Œè€Œm = n+1å°±æ˜¯å¿…è´¥ç‚¹äº†ï¼Œå› ä¸ºè¿™æ—¶ä½ è‡³å°‘åŠ 1ï¼Œè‡³å¤šåŠ nï¼Œè¾¾ä¸åˆ°n+1ï¼Œè€Œåæ‰‹è‚¯å®šèƒ½è¡¥æ»¡åˆ°n+1ï¼Œå¦‚æœmæ˜¯ï¼ˆn+1ï¼‰çš„å€æ•°ï¼Œé‚£ä¹ˆä¹Ÿæ˜¯å¿…è´¥ç‚¹ï¼›å› ä¸ºåæ‰‹åªæ˜¯æ¯æ¬¡ä¿æŒmæ˜¯ï¼ˆn+1ï¼‰çš„å€æ•°ï¼Œæœ€åä¸€è½®ï¼Œè‚¯å®šåˆå‡ºç°n+1çš„å¿…è´¥ç‚¹ã€‚ç›¸åmä¸æ˜¯ï¼ˆn+1ï¼‰çš„å€æ•°ï¼Œé‚£ä¹ˆå°±æ˜¯å¿…èƒœç‚¹ï¼Œå› ä¸ºæˆ‘ä»¬åªè¦åŠ ä»·è®©å‰©ä½™ä»·æ ¼æ˜¯ï¼ˆn+1ï¼‰çš„å€æ•°ï¼Œå°±å¯ä»¥åˆ°è¾¾å¿…è´¥ç‚¹</span><br></pre></td></tr></table></figure><h3 id="HDU2188â€”æ‚¼å¿µ512æ±¶å·å¤§åœ°éœ‡é‡éš¾åŒèƒâ€”â€”é€‰æ‹”å¿—æ„¿è€…"><a href="#HDU2188â€”æ‚¼å¿µ512æ±¶å·å¤§åœ°éœ‡é‡éš¾åŒèƒâ€”â€”é€‰æ‹”å¿—æ„¿è€…" class="headerlink" title="HDU2188â€”æ‚¼å¿µ512æ±¶å·å¤§åœ°éœ‡é‡éš¾åŒèƒâ€”â€”é€‰æ‹”å¿—æ„¿è€…"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2188">HDU2188â€”æ‚¼å¿µ512æ±¶å·å¤§åœ°éœ‡é‡éš¾åŒèƒâ€”â€”é€‰æ‹”å¿—æ„¿è€…</a></h3><p>å·´ä»€åšå¼ˆåº”ç”¨é¢˜</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *Submit Time2019-01-27 15:25:37</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">int</span> n ,m;</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">        <span class="keyword">if</span>(n % (m + <span class="number">1</span>) == <span class="number">0</span>)</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;Rabbit&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;Grass&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="HDU2149â€”Public-Sale"><a href="#HDU2149â€”Public-Sale" class="headerlink" title="HDU2149â€”Public Sale"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2149">HDU2149â€”Public Sale</a></h3><p>å‚è€ƒ:<a href="http://blog.sina.com.cn/s/blog_a16dd6d101013lha.html">http://blog.sina.com.cn/s/blog_a16dd6d101013lha.html</a></p><p>ç»“æœå¯ä»¥åˆ†ä¸‰ç§æƒ…å†µï¼š</p><ol><li>å½“n&gt;=mï¼Œå³å…ˆæ‰‹ç¬¬ä¸€æ¬¡å¯ä»¥åŠ çš„ä»·æ ¼å¤§äºç­‰äºç”°åœ°çš„æˆæœ¬ä»·ï¼Œæ­¤æ—¶å¯ä»¥åŠ çš„ä»·æ ¼ä¾æ¬¡ä¸ºm~nï¼›â‘¡</li><li>å½“m%(n+1)==0æ—¶ï¼Œåæ‰‹å¿…èµ¢ï¼Œå³æ­¤æ—¶è¾“å‡ºâ€œnoneâ€ï¼›</li><li>å½“m%(n+1)!=0æ—¶ï¼Œé¢˜ç›®è¦æ±‚è¾“å‡ºç¬¬ä¸€æ¬¡æŠ¥ä»·ï¼Œæšä¸¾æ¯ä¸€ç§å¯èƒ½çš„å‡ºä»·ï¼Œåªè¦èƒ½ä½¿ç»“æœæ»¡è¶³m%(n+1) == 0ï¼Œ å°±æ˜¯ä¸€æ¬¡åˆç†çš„å‡ºä»·</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *Submit Time2019-01-27 16:06:11</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">int</span> n ,m;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; m &gt;&gt; n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(m % (n + <span class="number">1</span>) == <span class="number">0</span>)</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;none&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> ans[<span class="number">10000</span>];</span><br><span class="line">            <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//ç¬¬äºŒç§æƒ…å†µæˆ–è€…ä¿æŒç»™å¯¹æ‰‹ç•™ä¸‹ï¼ˆm+1ï¼‰çš„å€æ•°ï¼Œå°±èƒ½æœ€åè·èƒœ</span></span><br><span class="line">                <span class="keyword">if</span>(m-i&lt;=<span class="number">0</span> || (m-i)%(n+<span class="number">1</span>)==<span class="number">0</span>) </span><br><span class="line">                    ans[num++] = i;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//æ³¨æ„é¢˜ç›®è¾“å‡ºè¦æ±‚ï¼Œä¸èƒ½å¤šä½™ç©ºæ ¼ï¼Œä¸ç„¶æŠ¥PE</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num<span class="number">-1</span>; i++)</span><br><span class="line">                cout &lt;&lt; ans[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">            cout &lt;&lt; ans[num - <span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¨ä½å¤«åšå¥•"><a href="#å¨ä½å¤«åšå¥•" class="headerlink" title="å¨ä½å¤«åšå¥•"></a>å¨ä½å¤«åšå¥•</h2><p>é—®é¢˜æ¨¡å‹ï¼šæœ‰ä¸¤å †å„è‹¥å¹²ä¸ªç‰©å“ï¼Œä¸¤ä¸ªäººè½®æµä»æŸä¸€å †æˆ–åŒæ—¶ä»ä¸¤å †ä¸­å–åŒæ ·å¤šçš„ç‰©å“ï¼Œè§„å®šæ¯æ¬¡è‡³å°‘å–ä¸€ä¸ªï¼Œå¤šè€…ä¸é™ï¼Œæœ€åå–å…‰è€…å¾—èƒœã€‚</p><p>è¯æ˜å¯å‚è€ƒï¼š</p><p><a href="https://blog.csdn.net/qq_41311604/article/details/79980882">https://blog.csdn.net/qq_41311604/article/details/79980882</a></p><h3 id="HDU1527â€”å–çŸ³å­æ¸¸æˆ"><a href="#HDU1527â€”å–çŸ³å­æ¸¸æˆ" class="headerlink" title="HDU1527â€”å–çŸ³å­æ¸¸æˆ"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1527">HDU1527â€”å–çŸ³å­æ¸¸æˆ</a></h3><p>è£¸å¨ä½å¤«åšå¥•é¢˜</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *Submit Time2019-01-27 18:08:52</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; n &gt;&gt; m)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> MIN = n;</span><br><span class="line">        <span class="keyword">if</span>(n &gt; m)</span><br><span class="line">            MIN = m;</span><br><span class="line">        <span class="keyword">double</span> r = (<span class="built_in">sqrt</span>(<span class="number">5.0</span>)+<span class="number">1</span>)/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">int</span> num = (<span class="keyword">int</span>)(<span class="built_in">abs</span>(n - m) * r);</span><br><span class="line">        <span class="keyword">if</span>(num == MIN)</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;0&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;1&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ–æ³¢é‚£å¥‘åšå¼ˆ-Fibonacci-Nim"><a href="#æ–æ³¢é‚£å¥‘åšå¼ˆ-Fibonacci-Nim" class="headerlink" title="æ–æ³¢é‚£å¥‘åšå¼ˆ(Fibonacci Nim)"></a>æ–æ³¢é‚£å¥‘åšå¼ˆ(Fibonacci Nim)</h1><p>å‚è€ƒ:<a href="https://blog.csdn.net/dgq8211/article/details/7602807">https://blog.csdn.net/dgq8211/article/details/7602807 </a></p><p>æœ‰ä¸€å †ä¸ªæ•°ä¸ºn(n&gt;=2)çš„çŸ³å­ï¼Œæ¸¸æˆåŒæ–¹è½®æµå–çŸ³å­ï¼Œè§„åˆ™å¦‚ä¸‹ï¼š</p><ol><li><p>å…ˆæ‰‹ä¸èƒ½åœ¨ç¬¬ä¸€æ¬¡æŠŠæ‰€æœ‰çš„çŸ³å­å–å®Œï¼Œè‡³å°‘å–1é¢—ï¼›</p></li><li><p>ä¹‹åæ¯æ¬¡å¯ä»¥å–çš„çŸ³å­æ•°è‡³å°‘ä¸º1ï¼Œè‡³å¤šä¸ºå¯¹æ‰‹åˆšå–çš„çŸ³å­æ•°çš„2å€ã€‚</p></li></ol><p>çº¦å®šå–èµ°æœ€åä¸€ä¸ªçŸ³å­çš„äººä¸ºèµ¢å®¶ï¼Œæ±‚å¿…è´¥æ€ã€‚</p><p>ç»“è®ºï¼šå½“nä¸ºFibonacciæ•°çš„æ—¶å€™ï¼Œå¿…è´¥ã€‚</p><p><code>f[i]ï¼š1,2,3,5,8,13,21,34,55,89â€¦â€¦</code></p><h3 id="HDU2516â€”å–çŸ³å­æ¸¸æˆ"><a href="#HDU2516â€”å–çŸ³å­æ¸¸æˆ" class="headerlink" title="HDU2516â€”å–çŸ³å­æ¸¸æˆ"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2516">HDU2516â€”å–çŸ³å­æ¸¸æˆ</a></h3><p>æ–æ³¢é‚£å¥‘åšå¼ˆè£¸é¢˜</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *Submit Time2019-01-27 18:18:24</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1E2</span>;</span><br><span class="line"><span class="keyword">int</span> f[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    f[<span class="number">0</span>] = f[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;MAXN;i++)</span><br><span class="line">        f[i] = f[i<span class="number">-1</span>] + f[i<span class="number">-2</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">init</span>();</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; n &amp;&amp; n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; MAXN; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(n == f[i])</span><br><span class="line">            &#123;</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(flag)</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;Second win&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;First win&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å°¼å§†åšå¼ˆ"><a href="#å°¼å§†åšå¼ˆ" class="headerlink" title="å°¼å§†åšå¼ˆ"></a>å°¼å§†åšå¼ˆ</h2><p>é—®é¢˜æ¨¡å‹ï¼šæœ‰ä¸‰å †å„è‹¥å¹²ä¸ªç‰©å“ï¼Œä¸¤ä¸ªäººè½®æµä»æŸä¸€å †å–ä»»æ„å¤šçš„ç‰©å“ï¼Œè§„å®šæ¯æ¬¡è‡³å°‘å–ä¸€ä¸ªï¼Œå¤šè€…ä¸é™ï¼Œæœ€åå–å…‰è€…å¾—èƒœ</p><p>å¯å‚è€ƒ:<a href="https://blog.csdn.net/tianweidadada/article/details/80091063">https://blog.csdn.net/tianweidadada/article/details/80091063</a></p><h3 id="HDU1847â€”Good-Luck-in-CET-4-Everybody"><a href="#HDU1847â€”Good-Luck-in-CET-4-Everybody" class="headerlink" title="HDU1847â€”Good Luck in CET-4 Everybody!"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1847">HDU1847â€”Good Luck in CET-4 Everybody!</a></h3><p>è£¸å°¼å§†åšå¼ˆé¢˜</p><p>å‚è€ƒ:<a href="https://blog.csdn.net/a1214034447/article/details/78872034">https://blog.csdn.net/a1214034447/article/details/78872034</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *Submit Time2019-01-27 18:33:03</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; n &amp;&amp; n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(n%<span class="number">3</span>==<span class="number">0</span>)</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;Cici&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;Kiki&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å…¬å¹³ç»„åˆåšå¼ˆï¼ˆImpartial-Combinatori-Gamesï¼‰"><a href="#å…¬å¹³ç»„åˆåšå¼ˆï¼ˆImpartial-Combinatori-Gamesï¼‰" class="headerlink" title="å…¬å¹³ç»„åˆåšå¼ˆï¼ˆImpartial Combinatori Gamesï¼‰"></a>å…¬å¹³ç»„åˆåšå¼ˆï¼ˆImpartial Combinatori Gamesï¼‰</h2><p>é—®é¢˜æ¨¡å‹ï¼š</p><ol><li><p>ä¸¤äººå‚ä¸ã€‚</p></li><li><p>æ¸¸æˆå±€é¢çš„çŠ¶æ€é›†åˆæ˜¯æœ‰é™ã€‚</p></li><li><p>å¯¹äºåŒä¸€ä¸ªå±€é¢ï¼Œä¸¤ä¸ªæ¸¸æˆè€…çš„å¯æ“ä½œé›†åˆå®Œå…¨ç›¸åŒ</p></li><li><p>æ¸¸æˆè€…è½®æµè¿›è¡Œæ¸¸æˆã€‚</p></li><li><p>å½“æ— æ³•è¿›è¡Œæ“ä½œæ—¶æ¸¸æˆç»“æŸï¼Œæ­¤æ—¶ä¸èƒ½è¿›è¡Œæ“ä½œçš„ä¸€æ–¹ç®—è¾“ã€‚</p></li><li><p>æ— è®ºæ¸¸æˆå¦‚ä½•è¿›è¡Œï¼Œæ€»å¯ä»¥åœ¨æœ‰é™æ­¥æ•°ä¹‹å†…ç»“æŸã€‚</p></li></ol><h2 id="SGå‡½æ•°"><a href="#SGå‡½æ•°" class="headerlink" title="SGå‡½æ•°"></a>SGå‡½æ•°</h2><p>å¯å‚è€ƒ:<a href="https://blog.csdn.net/qq_40774175/article/details/80526991">https://blog.csdn.net/qq_40774175/article/details/80526991</a></p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°å­¦çŸ¥è¯† </tag>
            
            <tag> åšå¼ˆè®º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡ä»¶æµ‹è¯•testCast</title>
      <link href="/2019/01/25/%E6%96%87%E4%BB%B6%E6%B5%8B%E8%AF%95testCast/"/>
      <url>/2019/01/25/%E6%96%87%E4%BB%B6%E6%B5%8B%E8%AF%95testCast/</url>
      
        <content type="html"><![CDATA[<p>é‡‡ç”¨æ–‡ä»¶è¯»å†™åŠæ³•è¿›è¡Œæ ·ä¾‹æµ‹è¯•ä»¥åŠç”Ÿæˆå„ç§æµ‹è¯•ç”¨ä¾‹</p> <span id="more"></span><p>å†™OJè°ƒè¯•çš„æ—¶å€™å¦‚æœè¾“å…¥æ•°æ®æ¯”è¾ƒå¤šï¼Œæ¯æ¬¡è°ƒè¯•æ‰‹åŠ¨è¾“å…¥ä¼šå¾ˆéº»çƒ¦ï¼ŒæŠŠæµ‹è¯•æ•°æ®å†™åˆ°æ–‡ä»¶é‡Œç”¨æ–‡ä»¶è¾“å…¥ä¼šæ¯”è¾ƒæ–¹ä¾¿ã€‚<em>æœ¬æ¬¡ä¸»è¦ç”¨<code>freopen</code>è¿›è¡Œæ–‡ä»¶è¯»å–</em></p><h1 id="freopen"><a href="#freopen" class="headerlink" title="freopen"></a>freopen</h1><p>å‚è€ƒ</p><p><a href="https://blog.csdn.net/u013480600/article/details/18372341">https://blog.csdn.net/u013480600/article/details/18372341</a></p><h2 id="å¤´æ–‡ä»¶"><a href="#å¤´æ–‡ä»¶" class="headerlink" title="å¤´æ–‡ä»¶"></a>å¤´æ–‡ä»¶</h2><p>é¦–å…ˆå¿…é¡»çŸ¥é“è°ƒå–<code>freopen</code>å¿…é¡»ç”¨åˆ°å¤´æ–‡ä»¶<code>cstdio</code> æˆ–è€… <code>stdio.h</code></p><h2 id="å‡½æ•°å£°æ˜"><a href="#å‡½æ•°å£°æ˜" class="headerlink" title="å‡½æ•°å£°æ˜"></a>å‡½æ•°å£°æ˜</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">FILE * <span class="title">freopen</span> <span class="params">( <span class="keyword">const</span> <span class="keyword">char</span> * filename, <span class="keyword">const</span> <span class="keyword">char</span> * mode, FILE * stream )</span></span>;</span><br><span class="line"><span class="comment">//filename: è¦æ‰“å¼€çš„æ–‡ä»¶å</span></span><br><span class="line"><span class="comment">//mode: æ–‡ä»¶æ‰“å¼€çš„æ¨¡å¼ï¼Œå’Œfopenä¸­çš„æ¨¡å¼(r/w)ç›¸åŒ</span></span><br><span class="line"><span class="comment">//stream: æ–‡ä»¶æŒ‡é’ˆï¼Œé€šå¸¸ä½¿ç”¨æ ‡å‡†æµæ–‡ä»¶(stdin/stdout/stderr)</span></span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h2><p><em>å› ä¸ºæ–‡ä»¶æŒ‡é’ˆä½¿ç”¨çš„æ˜¯æ ‡å‡†æµæ–‡ä»¶ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä¸å®šä¹‰æ–‡ä»¶æŒ‡é’ˆ</em></p><ol><li><p>ä½¿ç”¨<code>freopen()</code>å‡½æ•°ä»¥åªè¯»æ–¹å¼r(read)æ‰“å¼€æµ‹è¯•æ ·ä¾‹æ–‡ä»¶<code>in.txt</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;in.txt&quot;</span>, <span class="string">&quot;r&quot;</span>, stdin);</span><br></pre></td></tr></table></figure><p>ä»¥å†™å…¥æ–¹å¼w(write)æ‰“å¼€è¾“å‡ºæ–‡ä»¶<code>out.txt</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;out.txt&quot;</span>, <span class="string">&quot;w&quot;</span>, stdout);</span><br></pre></td></tr></table></figure></li><li><p>ä¸å†éœ€è¦ä¿®æ”¹è¾“å…¥å’Œè¾“å‡ºï¼Œè€Œæ˜¯ç»´æŒä»£ç çš„åŸæ ·å°±å¯ä»¥äº†ã€‚å› ä¸ºfreopen()å‡½æ•°é‡å®šå‘äº†æ ‡å‡†æµï¼Œä½¿å…¶æŒ‡å‘å‰é¢æŒ‡å®šçš„æ–‡ä»¶ã€‚</p></li><li>ä½¿ç”¨<code>fclose</code>å…³é—­è¾“å…¥æ–‡ä»¶å’Œè¾“å‡ºæ–‡ä»¶</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">fclose</span>(stdin);</span><br><span class="line"><span class="built_in">fclose</span>(stdout);</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li>æœ€å¥½ä½¿ç”¨æ‰©å±•åä¸º<code>.txt</code>ï¼Œå› ä¸ºå®ƒæœ€ç¨³å®š</li><li><p>æ³¨æ„æ–‡ä»¶çš„è·¯å¾„</p></li><li><p>ä¸€å®šè¦ç”¨<code>fcolse</code>å…³é—­,å¦åˆ™ä¸‹æ¬¡ç»§ç»­è¯»å–æˆ–å†™å…¥æ•°æ®çš„æ—¶å€™å¾ˆæœ‰å¯èƒ½å‡ºé”™.</p></li><li><p><code>in.txt</code>å¿…é¡»å·²ç»åˆ›å»ºï¼Œ<code>out.txt</code>ä¸éœ€è¦ï¼Œæ— åˆ™â€”-ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºï¼Œæœ‰åˆ™â€”-åŸæ¥æ–‡ä»¶ä¸­çš„å†…å®¹ä¼šè¢«å…¨éƒ¨æ›´æ–°ã€‚</p></li></ul><h2 id="æ¨¡æ¿"><a href="#æ¨¡æ¿" class="headerlink" title="æ¨¡æ¿"></a>æ¨¡æ¿</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span>   </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">freopen</span>(<span class="string">&quot;in.txt&quot;</span>, <span class="string">&quot;r&quot;</span>, stdin);</span><br><span class="line">    <span class="built_in">freopen</span>(<span class="string">&quot;out.txt&quot;</span>, <span class="string">&quot;w&quot;</span>, stdout);</span><br><span class="line">    <span class="comment">/* ä¸­é—´æŒ‰åŸæ ·å†™ä»£ç ï¼Œä»€ä¹ˆéƒ½ä¸ç”¨ä¿®æ”¹ */</span>  </span><br><span class="line">    <span class="built_in">fclose</span>(stdin);</span><br><span class="line">    <span class="built_in">fclose</span>(stdout);</span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æµ‹è¯•æ ·ä¾‹ç”Ÿæˆ"><a href="#æµ‹è¯•æ ·ä¾‹ç”Ÿæˆ" class="headerlink" title="æµ‹è¯•æ ·ä¾‹ç”Ÿæˆ"></a>æµ‹è¯•æ ·ä¾‹ç”Ÿæˆ</h1><p>å·¥å…·ï¼š</p><p><a href="https://github.com/luogu-dev/cyaron">https://github.com/luogu-dev/cyaron</a></p><p>è¯¥æ–‡ä»¶éœ€è¦pythonç¯å¢ƒï¼Œè¯¦ç»†çœ‹<code>README.md</code></p><p>ä¸€ä¸ªç”Ÿæˆæ ·ä¾‹pythonä»£ç </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="keyword">from</span> cyaron <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">io = IO(<span class="string">&quot;test.in&quot;</span>) </span><br><span class="line"><span class="comment">#ç”Ÿæˆ20ä¸ª</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">21</span>):</span><br><span class="line">    <span class="comment">#ç”Ÿæˆä¸€ä¸ª4åˆ°6ä¸ªå­—æ¯ä¹‹é—´çš„å•è¯ï¼Œåªæœ‰&#x27;a&#x27;,&#x27;b&#x27;ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œaçš„å¯èƒ½æ€§æ˜¯90%ï¼Œbçš„å¯èƒ½æ€§æ˜¯10%</span></span><br><span class="line">    <span class="built_in">str</span> = String.random((<span class="number">4</span>,<span class="number">6</span>), charset=<span class="string">&quot;aaaaaaaaab&quot;</span>)</span><br><span class="line">    io.input_writeln(<span class="built_in">str</span>)</span><br></pre></td></tr></table></figure><h1 id="æ–‡ä»¶å¯¹æ¯”"><a href="#æ–‡ä»¶å¯¹æ¯”" class="headerlink" title="æ–‡ä»¶å¯¹æ¯”"></a>æ–‡ä»¶å¯¹æ¯”</h1><p>æœ‰æ—¶å€™éœ€è¦å¯¹æ¯”ä¸€ä¸‹æ‰¾å‡ºä¸€äº›é”™è¯¯ï¼Œä¾‹å¦‚ï¼š</p><p>å·²çŸ¥æµ‹è¯•æ ·ä¾‹æ–‡ä»¶<code>testcase.txt</code>ï¼Œæ­£ç¡®ä»£ç è¾“å‡ºæ–‡ä»¶<code>true.txt</code>ï¼Œæµ‹è¯•ä»£ç è¾“å‡ºæ–‡ä»¶<code>test.txt</code></p><p><strong>åœ¨linuxä¸‹</strong>å¯ä»¥ä½¿ç”¨<code>diff</code>å‘½ä»¤å¯¹æ¯”</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">diff</span>(é€‰é¡¹)(å‚æ•°)</span><br></pre></td></tr></table></figure><ul><li><strong>é€‰é¡¹</strong></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">-&lt;è¡Œæ•°&gt;ï¼šæŒ‡å®šè¦æ˜¾ç¤ºå¤šå°‘è¡Œçš„æ–‡æœ¬ã€‚æ­¤å‚æ•°å¿…é¡»ä¸-cæˆ–-uå‚æ•°ä¸€å¹¶ä½¿ç”¨ï¼›</span><br><span class="line">-aæˆ–â€”â€”textï¼šdiffé¢„è®¾åªä¼šé€è¡Œæ¯”è¾ƒæ–‡æœ¬æ–‡ä»¶ï¼›</span><br><span class="line">-bæˆ–--ignore-space-changeï¼šä¸æ£€æŸ¥ç©ºæ ¼å­—ç¬¦çš„ä¸åŒï¼›</span><br><span class="line">-Bæˆ–--ignore-blank-linesï¼šä¸æ£€æŸ¥ç©ºç™½è¡Œï¼›</span><br><span class="line">-cï¼šæ˜¾ç¤ºå…¨éƒ¨å†…å®¹ï¼Œå¹¶æ ‡å‡ºä¸åŒä¹‹å¤„ï¼›</span><br><span class="line">-C&lt;è¡Œæ•°&gt;æˆ–--context&lt;è¡Œæ•°&gt;ï¼šä¸æ‰§è¡Œâ€œ-c-&lt;è¡Œæ•°&gt;â€æŒ‡ä»¤ç›¸åŒï¼›</span><br><span class="line">-dæˆ–â€”â€”minimalï¼šä½¿ç”¨ä¸åŒçš„æ¼”ç®—æ³•ï¼Œä»¥å°çš„å•ä½æ¥åšæ¯”è¾ƒï¼›</span><br><span class="line">-D&lt;å·¨é›†åç§°&gt;æˆ–ifdef&lt;å·¨é›†åç§°&gt;ï¼šæ­¤å‚æ•°çš„è¾“å‡ºæ ¼å¼å¯ç”¨äºå‰ç½®å¤„ç†å™¨å·¨é›†ï¼›</span><br><span class="line">-eæˆ–â€”â€”edï¼šæ­¤å‚æ•°çš„è¾“å‡ºæ ¼å¼å¯ç”¨äºedçš„scriptæ–‡ä»¶ï¼›</span><br><span class="line">-fæˆ–-forward-edï¼šè¾“å‡ºçš„æ ¼å¼ç±»ä¼¼edçš„scriptæ–‡ä»¶ï¼Œä½†æŒ‰ç…§åŸæ¥æ–‡ä»¶çš„é¡ºåºæ¥æ˜¾ç¤ºä¸åŒå¤„ï¼›</span><br><span class="line">-Hæˆ–--speed-large-filesï¼šæ¯”è¾ƒå¤§æ–‡ä»¶æ—¶ï¼Œå¯åŠ å¿«é€Ÿåº¦ï¼›</span><br><span class="line">-l&lt;å­—ç¬¦æˆ–å­—ç¬¦ä¸²&gt;æˆ–--ignore-matching-lines&lt;å­—ç¬¦æˆ–å­—ç¬¦ä¸²&gt;ï¼šè‹¥ä¸¤ä¸ªæ–‡ä»¶åœ¨æŸå‡ è¡Œæœ‰æ‰€ä¸åŒï¼Œè€Œä¹‹é™…èˆªåŒæ—¶éƒ½åŒ…å«äº†é€‰é¡¹ä¸­æŒ‡å®šçš„å­—ç¬¦æˆ–å­—ç¬¦ä¸²ï¼Œåˆ™ä¸æ˜¾ç¤ºè¿™ä¸¤ä¸ªæ–‡ä»¶çš„å·®å¼‚ï¼›</span><br><span class="line">-iæˆ–--ignore-caseï¼šä¸æ£€æŸ¥å¤§å°å†™çš„ä¸åŒï¼›</span><br><span class="line">-læˆ–â€”â€”paginateï¼šå°†ç»“æœäº¤ç”±prç¨‹åºæ¥åˆ†é¡µï¼›</span><br><span class="line">-næˆ–â€”â€”rcsï¼šå°†æ¯”è¾ƒç»“æœä»¥RCSçš„æ ¼å¼æ¥æ˜¾ç¤ºï¼›</span><br><span class="line">-Næˆ–--new-fileï¼šåœ¨æ¯”è¾ƒç›®å½•æ—¶ï¼Œè‹¥æ–‡ä»¶Aä»…å‡ºç°åœ¨æŸä¸ªç›®å½•ä¸­ï¼Œé¢„è®¾ä¼šæ˜¾ç¤ºï¼šOnly inç›®å½•ï¼Œæ–‡ä»¶A è‹¥ä½¿ç”¨-Nå‚æ•°ï¼Œåˆ™diffä¼šå°†æ–‡ä»¶A ä¸ä¸€ä¸ªç©ºç™½çš„æ–‡ä»¶æ¯”è¾ƒï¼›</span><br><span class="line">-pï¼šè‹¥æ¯”è¾ƒçš„æ–‡ä»¶ä¸ºCè¯­è¨€çš„ç¨‹åºç æ–‡ä»¶æ—¶ï¼Œæ˜¾ç¤ºå·®å¼‚æ‰€åœ¨çš„å‡½æ•°åç§°ï¼›</span><br><span class="line">-Pæˆ–--unidirectional-new-fileï¼šä¸-Nç±»ä¼¼ï¼Œä½†åªæœ‰å½“ç¬¬äºŒä¸ªç›®å½•åŒ…å«äº†ç¬¬ä¸€ä¸ªç›®å½•æ‰€æ²¡æœ‰çš„æ–‡ä»¶æ—¶ï¼Œæ‰ä¼šå°†è¿™ä¸ªæ–‡ä»¶ä¸ç©ºç™½çš„æ–‡ä»¶åšæ¯”è¾ƒï¼›</span><br><span class="line">-qæˆ–--briefï¼šä»…æ˜¾ç¤ºæœ‰æ— å·®å¼‚ï¼Œä¸æ˜¾ç¤ºè¯¦ç»†çš„ä¿¡æ¯ï¼›</span><br><span class="line">-ræˆ–â€”â€”recursiveï¼šæ¯”è¾ƒå­ç›®å½•ä¸­çš„æ–‡ä»¶ï¼›</span><br><span class="line">-sæˆ–--report-identical-filesï¼šè‹¥æ²¡æœ‰å‘ç°ä»»ä½•å·®å¼‚ï¼Œä»ç„¶æ˜¾ç¤ºä¿¡æ¯ï¼›</span><br><span class="line">-S&lt;æ–‡ä»¶&gt;æˆ–--starting-file&lt;æ–‡ä»¶&gt;ï¼šåœ¨æ¯”è¾ƒç›®å½•æ—¶ï¼Œä»æŒ‡å®šçš„æ–‡ä»¶å¼€å§‹æ¯”è¾ƒï¼›</span><br><span class="line">-tæˆ–--expand-tabsï¼šåœ¨è¾“å‡ºæ—¶ï¼Œå°†tabå­—ç¬¦å±•å¼€ï¼›</span><br><span class="line">-Tæˆ–--initial-tabï¼šåœ¨æ¯è¡Œå‰é¢åŠ ä¸Štabå­—ç¬¦ä»¥ä¾¿å¯¹é½ï¼›</span><br><span class="line">-uï¼Œ-U&lt;åˆ—æ•°&gt;æˆ–--unified=&lt;åˆ—æ•°&gt;ï¼šä»¥åˆå¹¶çš„æ–¹å¼æ¥æ˜¾ç¤ºæ–‡ä»¶å†…å®¹çš„ä¸åŒï¼›</span><br><span class="line">-væˆ–â€”â€”versionï¼šæ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ï¼›</span><br><span class="line">-wæˆ–--ignore-all-spaceï¼šå¿½ç•¥å…¨éƒ¨çš„ç©ºæ ¼å­—ç¬¦ï¼›</span><br><span class="line">-W&lt;å®½åº¦&gt;æˆ–--width&lt;å®½åº¦&gt;ï¼šåœ¨ä½¿ç”¨-yå‚æ•°æ—¶ï¼ŒæŒ‡å®šæ å®½ï¼›</span><br><span class="line">-x&lt;æ–‡ä»¶åæˆ–ç›®å½•&gt;æˆ–--exclude&lt;æ–‡ä»¶åæˆ–ç›®å½•&gt;ï¼šä¸æ¯”è¾ƒé€‰é¡¹ä¸­æ‰€æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•ï¼›</span><br><span class="line">-X&lt;æ–‡ä»¶&gt;æˆ–--exclude-from&lt;æ–‡ä»¶&gt;ï¼›æ‚¨å¯ä»¥å°†æ–‡ä»¶æˆ–ç›®å½•ç±»å‹å­˜æˆæ–‡æœ¬æ–‡ä»¶ï¼Œç„¶ååœ¨=&lt;æ–‡ä»¶&gt;ä¸­æŒ‡å®šæ­¤æ–‡æœ¬æ–‡ä»¶ï¼›</span><br><span class="line">-yæˆ–--side-by-sideï¼šä»¥å¹¶åˆ—çš„æ–¹å¼æ˜¾ç¤ºæ–‡ä»¶çš„å¼‚åŒä¹‹å¤„ï¼›</span><br><span class="line">--helpï¼šæ˜¾ç¤ºå¸®åŠ©ï¼›</span><br><span class="line">--left-columnï¼šåœ¨ä½¿ç”¨-yå‚æ•°æ—¶ï¼Œè‹¥ä¸¤ä¸ªæ–‡ä»¶æŸä¸€è¡Œå†…å®¹ç›¸åŒï¼Œåˆ™ä»…åœ¨å·¦ä¾§çš„æ ä½æ˜¾ç¤ºè¯¥è¡Œå†…å®¹ï¼›</span><br><span class="line">--suppress-common-linesï¼šåœ¨ä½¿ç”¨-yå‚æ•°æ—¶ï¼Œä»…æ˜¾ç¤ºä¸åŒä¹‹å¤„ã€‚</span><br></pre></td></tr></table></figure><ul><li><strong>å‚æ•°</strong><ul><li>æ–‡ä»¶1ï¼šæŒ‡å®šè¦æ¯”è¾ƒçš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼›</li><li>æ–‡ä»¶2ï¼šæŒ‡å®šè¦æ¯”è¾ƒçš„ç¬¬äºŒä¸ªæ–‡ä»¶ã€‚</li></ul></li></ul><p>ä¾‹å¦‚ä¸Šä¾‹ï¼š</p><p><code>diff test.txt true.txt -y</code></p><p><img src="/2019/01/25/%E6%96%87%E4%BB%B6%E6%B5%8B%E8%AF%95testCast/diff.png" alt></p><p>ç„¶åå°±å¯ä»¥çŸ¥é“å“ªä¸ªæµ‹è¯•æ ·ä¾‹å‡ºé”™äº†ã€‚</p><p>å…¶ä»–ç³»ç»Ÿå¯ä»¥è‡ªè¡ŒæŸ¥æ‰¾å·¥å…·ã€‚</p><h2 id="å¤šæ¬¡å¯¹æ¯”"><a href="#å¤šæ¬¡å¯¹æ¯”" class="headerlink" title="å¤šæ¬¡å¯¹æ¯”"></a>å¤šæ¬¡å¯¹æ¯”</h2><p>æœ‰æ—¶å€™å¯èƒ½ä¸€æ¬¡æµ‹è¯•çš„æ ·ä¾‹ä¸é”™ï¼Œæˆ‘ä»¬éœ€è¦ä¸æ–­ç”Ÿæˆæµ‹è¯•æ ·ä¾‹ï¼Œä½†æ˜¯å¦‚æœä¸€æ¬¡æ€§ç”Ÿæˆè¿‡å¤šä¼šé€ æˆæŸ¥æ‰¾ä»¥åŠå¯¹æ¯”éº»çƒ¦ï¼Œæ‰€ä»¥ä¸€æ¬¡æ€§æœ€å¥½ä¸è¦ç”Ÿæˆå¤ªå¤šæµ‹è¯•æ ·ä¾‹ã€‚</p><p>æœ€å¥½åŠæ³•æ˜¯å¤šæ¬¡ç”Ÿæˆä¸åŒçš„æµ‹è¯•æ ·ä¾‹ã€‚</p><p>ä¸¾ä¾‹ï¼Œæœ‰ä¸‹åˆ—æ–‡ä»¶:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ç”Ÿæˆæµ‹è¯•æ ·ä¾‹è§„åˆ™ï¼šceate.py</span><br><span class="line">æµ‹è¯•æ ·ä¾‹ï¼štestcase.txt</span><br><span class="line">æµ‹è¯•ä»£ç ï¼štest.cpp</span><br><span class="line">æ­£ç¡®ä»£ç : true.cpp</span><br><span class="line">æµ‹è¯•ä»£ç è¾“å‡ºï¼štest.txt</span><br><span class="line">æ­£ç¡®ä»£ç : true.txt</span><br></pre></td></tr></table></figure><ol><li>æˆ‘ä»¬å¯ä»¥å…ˆç”Ÿæˆæµ‹è¯•æ ·ä¾‹<code>testcase.txt</code></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python ceate.py</span><br></pre></td></tr></table></figure><ol><li>ç¼–è¯‘ä¸¤ä¸ªcppæ–‡ä»¶</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">g++ <span class="literal">-o</span> true true.cpp</span><br><span class="line">g++ <span class="literal">-o</span> test test.cpp</span><br></pre></td></tr></table></figure><ol><li>è¿è¡Œæ–‡ä»¶</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./true</span><br><span class="line">./test</span><br></pre></td></tr></table></figure><p>â€‹    è¿™æ ·å°±å°±ç”Ÿæˆäº†ä¸¤ä¸ªè¾“å‡ºæ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯æ­£ç¡®çš„<code>true.txt</code>ï¼Œä¸€ä¸ªæµ‹è¯•çš„<code>test.txt</code>ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨<code>dif</code>å·¥å…·å¯¹æ¯”ã€‚æ¥ç€ï¼Œå†æ¬¡è¿›è¡Œç”Ÿæˆæµ‹è¯•æ ·ä¾‹å¹¶ä¸”æµ‹è¯•</p><ol><li>å†æ¬¡ç”Ÿæˆæµ‹è¯•æ ·ä¾‹</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python ceate.py</span><br></pre></td></tr></table></figure><ol><li>è¿™æ¬¡æˆ‘ä»¬åªéœ€è¦</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./true</span><br><span class="line">./test</span><br></pre></td></tr></table></figure><p>â€‹    å°±å¯ä»¥é‡æ–°è¿è¡Œå¹¶ä¸”ç”Ÿæˆæ–°çš„è¾“å‡ºæ–‡ä»¶ï¼Œç„¶åå°±å†å¯¹æ¯”ï¼Œå¦‚æ­¤å¾ªç¯</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>n1é…ç½®</title>
      <link href="/2018/11/24/n1%E9%85%8D%E7%BD%AE/"/>
      <url>/2018/11/24/n1%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<p>æŸè®¯æ—¥å¸¸å€’é—­</p><span id="more"></span><h1 id="æ¸…ç©ºdata"><a href="#æ¸…ç©ºdata" class="headerlink" title="æ¸…ç©ºdata"></a>æ¸…ç©º<code>data</code></h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkfs.ext4 /dev/data</span><br></pre></td></tr></table></figure><h1 id="å¼€å¯WiFi"><a href="#å¼€å¯WiFi" class="headerlink" title="å¼€å¯WiFi"></a>å¼€å¯<code>WiFi</code></h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">modprobe dhd &amp;&amp; echo dhd &gt;&gt; /etc/modules</span><br></pre></td></tr></table></figure><h1 id="é…ç½®Sakura-Frp"><a href="#é…ç½®Sakura-Frp" class="headerlink" title="é…ç½®Sakura Frp"></a>é…ç½®<code>Sakura Frp</code></h1><p>é…ç½®<code>frp</code>å†…ç½‘ç©¿é€ï¼Œä»Šå¤©å¡åœ¨å¼€æœºè‡ªå¯è¿™é‡Œäº†ï¼Œåæ¥æŸ¥äº†ä¸‹<code>linux</code>å¯åŠ¨é¡ºåºæ‰çŸ¥é“é”™å¤„</p><p>å‚è€ƒï¼š</p><p><a href="http://blog.51cto.com/net881004/2073150">centos 6å’Œcentos 7å¯åŠ¨é¡ºåº</a></p><p><a href="https://blog.csdn.net/fireroll/article/details/15503463">linuxæ·»åŠ å¼€æœºè‡ªå¯åŠ¨è„šæœ¬ç¤ºä¾‹è¯¦è§£</a>â€˜</p><p><a href="Linux å°† Sakura Frp è®¾ç½®ä¸ºæœåŠ¡ï¼Œå¼€æœºè‡ªåŠ¨å¯åŠ¨">Linux å°† Sakura Frp è®¾ç½®ä¸ºæœåŠ¡ï¼Œå¼€æœºè‡ªåŠ¨å¯åŠ¨</a></p><p><strong>1. è·å–<code>Sakura Frp arm</code>ç‰ˆå¹¶ä¸”è§£å‹</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://s1.tcotp.cn/cdn/SakuraFrpClient-2.3/Sakura_frpc_linux_arm.tar.gz </span><br><span class="line">tar -xvf Sakura_frpc_linux_arm.tar.gz</span><br></pre></td></tr></table></figure><p><strong>2. åœ¨<code>/etc/init.d</code>ç›®å½•ä¸‹æ”¾ä¸ªå¯åŠ¨æ— çº¿ç½‘å¡çš„è„šæœ¬<code>dhd</code>å¹¶ä¸”èµ‹äºˆæƒé™</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/init.d/dhd</span><br></pre></td></tr></table></figure><p><code>dhd</code>å†…å®¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line">modprobe dhd</span><br></pre></td></tr></table></figure><p>å¦‚æœå¼€æœºä¸èƒ½å¯åŠ¨è¯<br><code>ln -s /etc/init.d/dhd /etc/rc.d/rc3.d/S70dhd</code><br>ç„¶å</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x dhd</span><br></pre></td></tr></table></figure><p><strong>3. ç„¶ååœ¨<code>/etc/systemd/system</code>ç›®å½•ä¸‹æ”¾å…³äº<code>frp</code>çš„<code>service</code>æ–‡ä»¶</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/systemd/system/sakurafrp.service</span><br></pre></td></tr></table></figure><p>å…¶å†…å®¹:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Sakura Frp Client</span><br><span class="line">Wants=network-online.target</span><br><span class="line">After=network-online.target</span><br><span class="line">[Service]</span><br><span class="line">User=root</span><br><span class="line">WorkingDirectory=/root #ä½ çš„å®¢æˆ·ç«¯å‚¨å­˜ä½ç½®</span><br><span class="line">LimitNOFILE=4096</span><br><span class="line">PIDFile=/var/run/sakurafrp/client.pid</span><br><span class="line">ExecStart=/root/Sakura_frpc_linux_arm --su=test --sp=test --sid=2 </span><br><span class="line"><span class="meta">#</span><span class="bash">æ‰§è¡Œå‘½ä»¤su:ç”¨æˆ·åï¼Œsp:å¯†ç ,sid:èŠ‚ç‚¹åºå·</span></span><br><span class="line">Restart=on-failure</span><br><span class="line">StartLimitInterval=600</span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><p>æ¥ç€é‡æ–°åŠ è½½<code>service</code>æ–‡ä»¶è¿˜æœ‰è®¾ç½®å¼€æœºè‡ªå¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl start sakurafrp</span><br><span class="line">systemctl enable sakurafrp</span><br></pre></td></tr></table></figure><h1 id="é…ç½®frp"><a href="#é…ç½®frp" class="headerlink" title="é…ç½®frp"></a>é…ç½®frp</h1><p>é…ç½®æ–‡ä»¶ï¼š<code>frps.ini</code>å’Œ<code>frpc.ini</code></p><ol><li><p>å°†<code>frps</code>åŠ<code>frps.ini</code> æ”¾åˆ°å…·æœ‰å…¬ç½‘ IP çš„æœºå™¨ä¸Š</p></li><li><p>å°† <code>frpc</code>åŠ<code>frpc.ini</code>æ”¾åˆ°å¤„äºå†…ç½‘ç¯å¢ƒçš„æœºå™¨ä¸Š</p></li></ol><h2 id="æœåŠ¡å™¨"><a href="#æœåŠ¡å™¨" class="headerlink" title="æœåŠ¡å™¨"></a>æœåŠ¡å™¨</h2><p><strong>1. è·å–<a href="https://github.com/fatedier/frp">frp</a></strong><br><strong>2. è§£å‹ç„¶åè®¾ç½®<code>frps.ini</code></strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">common</span>]</span><br><span class="line"><span class="comment"># ç”¨äºæ¥æ”¶ frpc è¿æ¥çš„ç«¯å£</span></span><br><span class="line">bind_port = <span class="number">7000</span></span><br></pre></td></tr></table></figure><p><strong>3. å¯åŠ¨</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./frps <span class="literal">-c</span> ./frps.ini</span><br></pre></td></tr></table></figure><p>æˆ–è€…<br><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup ./frps <span class="literal">-c</span> ./frps.ini &amp;</span><br></pre></td></tr></table></figure><br><strong>4. è®¾ç½®å¼€æœºè‡ªå¯</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /lib/systemd/system/frps.service</span><br></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">Unit</span>]</span><br><span class="line">Description=frps daemon</span><br><span class="line"></span><br><span class="line">[<span class="type">Service</span>]</span><br><span class="line"><span class="built_in">Type</span>=simple</span><br><span class="line">ExecStart=/root/frp/frps <span class="literal">-c</span> /root/frp/frps.ini</span><br><span class="line"></span><br><span class="line">[<span class="type">Install</span>]</span><br><span class="line">WantedBy=multi<span class="literal">-user</span>.target</span><br></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon<span class="literal">-reload</span></span><br><span class="line">systemctl <span class="built_in">start</span> frps</span><br><span class="line">systecmtl enable frps</span><br></pre></td></tr></table></figure><h2 id="å®¢æˆ·ç«¯"><a href="#å®¢æˆ·ç«¯" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h2><p><strong>1. è·å–<code>frp</code></strong><br><strong>2. é…ç½®<code>frpc.ini</code></strong></p><ul><li>ftp</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">ä¸€é”®è„šæœ¬</span></span><br><span class="line">wget -c https://www.2dan.cc/download/ftp.sh</span><br><span class="line">sh ftp.sh</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è¢«åŠ¨æ¨¡å¼</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/local/etc/proftpd.conf</span><br><span class="line">PassivePortRange         20000 20005</span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š<a href="http://www.wenrouge.com/post/1483">http://www.wenrouge.com/post/1483</a></p><ul><li>å…¶ä»–</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">common</span>]</span><br><span class="line">server_addr = ip</span><br><span class="line">server_port = <span class="number">7000</span></span><br><span class="line"></span><br><span class="line">[<span class="type">ssh</span>]</span><br><span class="line"><span class="built_in">type</span> = tcp</span><br><span class="line">local_ip = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line">local_port = <span class="number">22</span></span><br><span class="line">remote_port = <span class="number">7022</span></span><br><span class="line"></span><br><span class="line">[<span class="type">range</span>:<span class="type">ftp</span>]</span><br><span class="line"><span class="built_in">type</span> = tcp</span><br><span class="line">local_ip = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line">local_port = <span class="number">21</span>,<span class="number">20000</span><span class="literal">-20005</span></span><br><span class="line">remote_port = <span class="number">21</span>,<span class="number">20000</span><span class="literal">-20005</span></span><br><span class="line"></span><br><span class="line">[<span class="type">rdp</span>]</span><br><span class="line"><span class="built_in">type</span> = tcp</span><br><span class="line">local_ip = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line">local_port = <span class="number">3389</span></span><br><span class="line">remote_port = <span class="number">3389</span></span><br></pre></td></tr></table></figure><p><strong>3. è¿æ¥</strong><br><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./frpc <span class="literal">-c</span> ./frpc.ini</span><br></pre></td></tr></table></figure></p><p>æˆ–è€…</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup ./frpc <span class="literal">-c</span> ./frpc.ini &amp;</span><br></pre></td></tr></table></figure><p><strong>4. å¼€æœºè‡ªå¯</strong></p><p>è®¾ç½®ç›’å­çš„å¼€å¯ç½‘å¡ä¸º</p><p><code>ln -s /etc/init.d/dhd /etc/rc.d/rc3.d/S70dhd</code></p><p>ç„¶å</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vimã€€/etc/init.d/frp</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">nohup /root/frp/frpc -c ./root/frp/frpc.ini &amp;</span><br></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln <span class="literal">-s</span> /etc/init.d/frp /etc/rc.d/rc3.d/S99frp</span><br></pre></td></tr></table></figure><p><strong>å¤‡ç”¨æ–¹æ¡ˆ</strong><br><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#vim /etc/rc.local</span></span><br><span class="line"><span class="built_in">sleep</span> <span class="number">20</span></span><br><span class="line">nohup /root/frp/frpc <span class="literal">-c</span> ./root/frp/frpc.ini &amp;</span><br><span class="line">nohup ./v2ray/v2ray &amp;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> n1 </tag>
            
            <tag> frp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤§æ•°æ¨¡æ¿</title>
      <link href="/2018/11/22/%E5%A4%A7%E6%95%B0%E6%A8%A1%E6%9D%BF/"/>
      <url>/2018/11/22/%E5%A4%A7%E6%95%B0%E6%A8%A1%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<p>å¤§æ•°å››åˆ™è¿ç®—æ¨¡æ¿</p> <span id="more"></span><p>å‚è€ƒï¼š</p><p><a href="https://www.xuebuyuan.com/1860973.html">https://www.xuebuyuan.com/1860973.html</a></p><h1 id="å¤§æ•°åŠ æ³•"><a href="#å¤§æ•°åŠ æ³•" class="headerlink" title="å¤§æ•°åŠ æ³•"></a>å¤§æ•°åŠ æ³•</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e6</span>;</span><br><span class="line"><span class="keyword">int</span> ia[MAXN];</span><br><span class="line"><span class="keyword">int</span> ib[MAXN];</span><br><span class="line"><span class="keyword">int</span> ans[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string sa, sb;</span><br><span class="line">    cin &gt;&gt; sa &gt;&gt; sb;</span><br><span class="line">    <span class="keyword">int</span> la = sa.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">int</span> lb = sb.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">int</span> ml = la &gt; lb ? la : lb;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; la; i++)</span><br><span class="line">        ia[i] = sa[la - i - <span class="number">1</span>] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; lb; i++)</span><br><span class="line">        ib[i] = sb[lb - i - <span class="number">1</span>] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    <span class="keyword">int</span> next = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; ml; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        ans[i] = (ia[i] + ib[i] + next) % <span class="number">10</span>;</span><br><span class="line">        next = (ia[i] + ib[i] + next) / <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(next &gt; <span class="number">0</span>)</span><br><span class="line">        cout &lt;&lt; next;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = ml - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">        cout &lt;&lt; ans[i];</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å¤§æ•°å‡æ³•"><a href="#å¤§æ•°å‡æ³•" class="headerlink" title="å¤§æ•°å‡æ³•"></a>å¤§æ•°å‡æ³•</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1E6</span>;</span><br><span class="line"><span class="keyword">int</span> ia[MAXN];</span><br><span class="line"><span class="keyword">int</span> ib[MAXN];</span><br><span class="line"><span class="keyword">int</span> ans[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string sa, sb;</span><br><span class="line">    cin &gt;&gt; sa &gt;&gt; sb;</span><br><span class="line">    <span class="keyword">if</span>(sa == sb)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;0&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> la = sa.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">int</span> lb = sb.<span class="built_in">size</span>();</span><br><span class="line">    <span class="comment">//é»˜è®¤å–saå¤§äºsbï¼Œå¦‚æœsbå¤§äºsaï¼Œé‚£ä¹ˆéœ€è¦äº¤æ¢ï¼Œå¹¶ä¸”åœ¨è¾“å‡ºç»“æœå‰é¢åŠ ä¸Š-</span></span><br><span class="line">    <span class="keyword">if</span>(lb &gt; la || (la == lb &amp;&amp; sb &gt; sa))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">swap</span>(sa, sb);</span><br><span class="line">        <span class="built_in">swap</span>(la, lb);</span><br><span class="line">        flag = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; la; i++)</span><br><span class="line">        ia[i] = sa[la - i - <span class="number">1</span>] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; lb; i++)</span><br><span class="line">        ib[i] = sb[lb - i - <span class="number">1</span>] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; la; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        ia[i] -= ib[i];</span><br><span class="line">        <span class="keyword">if</span>(ia[i] &lt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            ia[i] += <span class="number">10</span>;</span><br><span class="line">            ia[i + <span class="number">1</span>]--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> j = la - <span class="number">1</span>;;</span><br><span class="line">    <span class="keyword">while</span>(ia[j] == <span class="number">0</span>)</span><br><span class="line">        j--;</span><br><span class="line">    <span class="keyword">if</span>(flag)</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;-&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(;j &gt;= <span class="number">0</span>; j--)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, ia[j]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å¤§æ•°ä¹˜æ³•"><a href="#å¤§æ•°ä¹˜æ³•" class="headerlink" title="å¤§æ•°ä¹˜æ³•"></a>å¤§æ•°ä¹˜æ³•</h1><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/1542849793970.jpg"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1E3</span>;</span><br><span class="line"><span class="keyword">int</span> ia[MAXN];</span><br><span class="line"><span class="keyword">int</span> ib[MAXN];</span><br><span class="line"><span class="keyword">int</span> ic[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string sa, sb;</span><br><span class="line">    cin &gt;&gt; sa &gt;&gt; sb;</span><br><span class="line">    <span class="keyword">int</span> la = sa.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">int</span> lb = sb.<span class="built_in">size</span>();</span><br><span class="line">    <span class="built_in">memset</span>(ia, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(ia));</span><br><span class="line">    <span class="built_in">memset</span>(ib, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(ib));</span><br><span class="line">    <span class="comment">//é»˜è®¤å–saå¤§äºsbï¼Œå¦‚æœsbå¤§äºsaï¼Œé‚£ä¹ˆéœ€è¦äº¤æ¢ï¼Œå› ä¸ºæ¶‰åŠåˆ°åé¢çš„2Ã—laï¼Œæ–¹ä¾¿å¤„ç†</span></span><br><span class="line">    <span class="keyword">if</span>(lb &gt; la || (lb == la &amp;&amp; lb &gt; la))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">swap</span>(sa, sb);</span><br><span class="line">        <span class="built_in">swap</span>(la, lb);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; la; i++)</span><br><span class="line">        ia[i] = sa[la - i - <span class="number">1</span>] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; lb; i++)</span><br><span class="line">        ib[i] = sb[lb - i - <span class="number">1</span>] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; lb; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; la; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            ic[i + j] = ic[i + j] + ia[j] * ib[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span> * la; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(ic[i] &gt; <span class="number">10</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            ic[i + <span class="number">1</span>] = ic[i + <span class="number">1</span>] + ic[i] / <span class="number">10</span>;</span><br><span class="line">            ic[i] = ic[i] % <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> j = <span class="number">2</span> * la;</span><br><span class="line">    <span class="keyword">while</span>(ic[j] == <span class="number">0</span>)</span><br><span class="line">        j--;</span><br><span class="line">    <span class="keyword">if</span>(j &lt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;0&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(;j &gt;= <span class="number">0</span>; j--)</span><br><span class="line">        cout &lt;&lt; ic[j];</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å¤§æ•°é™¤æ³•"><a href="#å¤§æ•°é™¤æ³•" class="headerlink" title="å¤§æ•°é™¤æ³•"></a>å¤§æ•°é™¤æ³•</h1><p>å‚è€ƒï¼š<br><a href="http://www.cnblogs.com/wuqianling/p/5387099.html">http://www.cnblogs.com/wuqianling/p/5387099.html</a><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å‡½æ•°subåŠŸèƒ½ï¼š </span></span><br><span class="line"><span class="comment">ç”¨é•¿åº¦ä¸ºlen1çš„å¤§æ•´æ•°num1å‡å»é•¿åº¦ä¸ºlen2çš„å¤§æ•´æ•°num2 </span></span><br><span class="line"><span class="comment">ç»“æœå­˜åœ¨num1ä¸­ï¼Œè¿”å›å€¼ä»£è¡¨ç»“æœçš„é•¿åº¦ </span></span><br><span class="line"><span class="comment">ä¸å¤Ÿå‡ï¼šè¿”å›-1 ï¼Œ æ­£å¥½å¤Ÿï¼šè¿”å›0</span></span><br><span class="line"><span class="comment">*/</span>    </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sub</span><span class="params">(<span class="keyword">int</span> *num1, <span class="keyword">int</span> len1, <span class="keyword">int</span> *num2, <span class="keyword">int</span> len2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(len1 &lt; len2)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(len1 == len2) <span class="comment">//ä¸¤æ•°å­—ä½æ•°ç›¸åŒæ—¶ï¼Œå¯¹æ¯”å“ªä¸ªæ•°å¤§</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = len1 - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(num1[i] &gt; num2[i]) <span class="comment">//num1å¤§ï¼Œæ»¡è¶³æ¡ä»¶</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(num1[i] &lt; num2[i]) <span class="comment">//å½“n2å¤§äºn1æ—¶ï¼Œæ­¤æ—¶ä¸å¤Ÿå‡ï¼Œè¿”å›ï¼1</span></span><br><span class="line">                <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= len1 - <span class="number">1</span>; i++) <span class="comment">//å‡æ³•æ“ä½œ</span></span><br><span class="line">    &#123;</span><br><span class="line">        num1[i] -= num2[i];</span><br><span class="line">        <span class="keyword">if</span>(num1[i] &lt; <span class="number">0</span>) <span class="comment">//éœ€è¦å€Ÿä½</span></span><br><span class="line">        &#123;</span><br><span class="line">            num1[i] += <span class="number">10</span>;</span><br><span class="line">            num1[i + <span class="number">1</span>]--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = len1 - <span class="number">1</span>;i &gt;= <span class="number">0</span>; i--) <span class="comment">//å»é™¤å‰å¯¼0ï¼ŒæŸ¥æ‰¾ç»“æœæœ€é«˜ä½ã€‚</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(num1[i])</span><br><span class="line">            <span class="keyword">return</span> i + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">//ä¸¤æ•°ç›¸ç­‰æ—¶è¿”å›0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å¤§æ•°é™¤æ³•---ç»“æœä¸åŒ…æ‹¬å°æ•°ç‚¹ </span></span><br><span class="line"><span class="comment">num1 / num2  </span></span><br><span class="line"><span class="comment">ans:ç»“æœæ•°ç»„,å•†ï¼Œå­˜æ”¾è®¡ç®—çš„ç»“æœï¼Œ</span></span><br><span class="line"><span class="comment">å³ï¼šnum1/num2=ans</span></span><br><span class="line"><span class="comment">è¿”å›æ•°ç»„ansçš„æœ‰æ•ˆé•¿åº¦ï¼Œå³å•†çš„ä½æ•° </span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">division</span><span class="params">(<span class="keyword">char</span>* num1, <span class="keyword">char</span>* num2, <span class="keyword">char</span>* ans)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> len1 = <span class="built_in">strlen</span>(num1);</span><br><span class="line">    <span class="keyword">int</span> len2 = <span class="built_in">strlen</span>(num2);</span><br><span class="line">    <span class="keyword">int</span> num_a[MAXN] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> num_b[MAXN] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> num_c[MAXN] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len1; i++) <span class="comment">//å°†å­—ç¬¦æ•°å­—æ¯ä¸ªæ•°å­—å¤„ç†ä¸ºintï¼Œç„¶åå€’åºå­˜åœ¨å¦å¤–ä¸€ä¸ªæ•°ç»„</span></span><br><span class="line">        num_a[i] = num1[len1 - i - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len2; i++)</span><br><span class="line">        num_b[i] = num2[len2 - i - <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(len1 &lt; len2) <span class="comment">//å¦‚æœè¢«é™¤æ•°å°äºé™¤æ•°ï¼Œç›´æ¥è¿”å›-1ï¼Œè¡¨ç¤ºç»“æœä¸º0</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> dvalue = len1 - len2; <span class="comment">//ä¸¤å¤§æ•°ç›¸å·®ä½æ•°</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//è¿›è¡Œæ‰©å±•ï¼Œä¸æ˜¯ä¸€ä¸ªä¸ªå‡ï¼Œè€Œæ˜¯ä»¥å…¶10çš„å€æ•°å‡ï¼Œåˆšå¼€å§‹æ‰©å±•åˆ°ä¸è¢«é™¤æ•°ç›¸ç­‰çš„ä½æ•°ï¼Œå³ç›¸å½“äºä¹˜ä»¥10çš„xæ¬¡æ–¹</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = len1 - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(i &gt;= dvalue)</span><br><span class="line">            num_b[i] = num_b[i - dvalue];</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            num_b[i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    len2 = len1;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="comment">//è¿›è¡Œå‡æ³•</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= dvalue; i++)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="comment">//num_b + iä»£è¡¨ä¸æ–­å°è¯•10çš„xæ¬¡æ–¹,å› ä¸ºå…¶åé¢ä¸º0,æ•…ç›¸å½“äºä¹˜ä»¥10çš„xæ¬¡æ–¹</span></span><br><span class="line">        <span class="keyword">while</span>((n = <span class="built_in">sub</span>(num_a, len1, num_b + i, len2 - i)) &gt;= <span class="number">0</span>) <span class="comment">//ä¸æ–­å°è¯•å°†é™¤æ•°æ‰©å¤§æ¥å‡</span></span><br><span class="line">        &#123;</span><br><span class="line">            len1 = n;</span><br><span class="line">            num_c[dvalue - i]++; </span><br><span class="line">            <span class="comment">//å¯¹åº”çš„ç»“æœä½æ•°++ï¼Œåˆšå¼€å§‹åŠ çš„ä½æ•°å¾ˆå¤§ï¼Œæ¯”å¦‚ç™¾ä½ï¼Œç„¶åé™¤æ•°é€æ¸å‡å°‘ï¼Œå¯¹åº”çš„å°±ä¼šåŠ åœ¨åä½ä¸ªä½</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> j;</span><br><span class="line"><span class="comment">//è·³è¿‡é«˜ä½0ï¼Œè·å–å•†çš„ä½æ•°</span></span><br><span class="line">    <span class="keyword">for</span>(j = MAXN - <span class="number">1</span>; j &gt;= <span class="number">0</span>; j--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(num_c[j] != <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> len = <span class="number">-1</span>; <span class="comment">//å•†çš„ä½æ•°</span></span><br><span class="line">    <span class="keyword">if</span>(j &gt;= <span class="number">0</span>)</span><br><span class="line">        len = j + <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//å› ä¸ºå¾—åˆ°çš„ç»“æœæ˜¯å€’åºçš„ï¼Œæ•…å€’åºå°†ç»“æœå¤åˆ¶åˆ°ansæ•°ç»„</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; j &gt;= <span class="number">0</span>; i++, j--)</span><br><span class="line">        ans[i] = num_c[j];</span><br><span class="line">    ans[j] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> len;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> num1[MAXN] = <span class="string">&quot;1234567899876543210&quot;</span>;</span><br><span class="line">    <span class="keyword">char</span> num2[MAXN] = <span class="string">&quot;20160415123025&quot;</span>;</span><br><span class="line">    <span class="keyword">char</span> ans[MAXN];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> len = <span class="built_in">division</span>(num1, num2, ans);</span><br><span class="line">    <span class="keyword">if</span>(len &gt;= <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">            cout &lt;&lt; ans[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;0&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°è®¡ç®— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­—ç¬¦ä¸²å¸¸è§ç®—æ³•--kmpï¼ŒE-kmpï¼Œmanacherï¼Œacè‡ªåŠ¨æœº</title>
      <link href="/2018/10/27/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B8%B8%E8%A7%81%E7%AE%97%E6%B3%95-kmp%EF%BC%8CE-kmp%EF%BC%8Cmancher%EF%BC%8Cac%E8%87%AA%E5%8A%A8%E6%9C%BA/"/>
      <url>/2018/10/27/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B8%B8%E8%A7%81%E7%AE%97%E6%B3%95-kmp%EF%BC%8CE-kmp%EF%BC%8Cmancher%EF%BC%8Cac%E8%87%AA%E5%8A%A8%E6%9C%BA/</url>
      
        <content type="html"><![CDATA[<p>kmpï¼ŒE-kmpï¼Œmanacherï¼Œacè‡ªåŠ¨æœº</p> <span id="more"></span><h1 id="KMP"><a href="#KMP" class="headerlink" title="KMP"></a>KMP</h1><p><a href="http://t.cn/EZlzRyg">http://t.cn/EZlzRyg</a></p><h1 id="Manacherâ€”æœ€é•¿å›æ–‡ä¸²O-N"><a href="#Manacherâ€”æœ€é•¿å›æ–‡ä¸²O-N" class="headerlink" title="Manacherâ€”æœ€é•¿å›æ–‡ä¸²O(N)"></a>Manacherâ€”æœ€é•¿å›æ–‡ä¸²O(N)</h1><h2 id="å…³äºæ±‚æœ€é•¿å›æ–‡ä¸²åŠæ³•"><a href="#å…³äºæ±‚æœ€é•¿å›æ–‡ä¸²åŠæ³•" class="headerlink" title="å…³äºæ±‚æœ€é•¿å›æ–‡ä¸²åŠæ³•"></a>å…³äºæ±‚æœ€é•¿å›æ–‡ä¸²åŠæ³•</h2><p><a href="https://www.jianshu.com/p/c82cada7e5b0">å››ç§æ–¹æ³•æ±‚æœ€é•¿å›æ–‡ä¸²</a></p><p>ä½†æ˜¯ä¸Šé¢å‡ ç§éƒ½ä¸æ˜¯æœ€å¿«çš„ï¼Œæœ€å¿«çš„æ˜¯Manacherï¼ˆé©¬æ‹‰è½¦ï¼‰ç®—æ³•ï¼Œç®—æ³•å¤æ‚åº¦æ˜¯O(N)</p><h2 id="Manacher"><a href="#Manacher" class="headerlink" title="Manacher"></a>Manacher</h2><p><a href="https://www.cnblogs.com/grandyang/p/4475985.html">https://www.cnblogs.com/grandyang/p/4475985.html</a></p><p><a href="https://www.cnblogs.com/z360/p/6375514.html">https://www.cnblogs.com/z360/p/6375514.html</a></p><p><a href="https://segmentfault.com/a/1190000008484167">https://segmentfault.com/a/1190000008484167</a></p><p><a href="https://www.bilibili.com/video/av4829276?from=search&amp;seid=9253656566579281943">https://www.bilibili.com/video/av4829276?from=search&amp;seid=9253656566579281943</a></p><p><a href="https://www.bilibili.com/video/av20495920?from=search&amp;seid=9253656566579281943">https://www.bilibili.com/video/av20495920?from=search&amp;seid=9253656566579281943</a></p><h3 id="æ¨¡æ¿é¢˜â€”HDU-3068-æœ€é•¿å›æ–‡"><a href="#æ¨¡æ¿é¢˜â€”HDU-3068-æœ€é•¿å›æ–‡" class="headerlink" title="æ¨¡æ¿é¢˜â€”HDU-3068(æœ€é•¿å›æ–‡)"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=3068">æ¨¡æ¿é¢˜â€”HDU-3068(æœ€é•¿å›æ–‡)</a></h3><p>æ³¨æ„ï¼Œæ­¤é¢˜åˆ«çš„ç®—æ³•O(NlogN)éƒ½ä¼šè¶…æ—¶ï¼Œæ‰€ä»¥åªèƒ½ç”¨é©¬æ‹‰è½¦çš„O(N)ç®—æ³•</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Exe.Time:1154MS</span></span><br><span class="line"><span class="comment">Exe.Memory:3328K</span></span><br><span class="line"><span class="comment">Submit Time:2018-10-27 19:10:19</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1E6</span>;</span><br><span class="line"><span class="keyword">int</span> p[MAXN];</span><br><span class="line"> </span><br><span class="line"><span class="function">string <span class="title">Manacher</span><span class="params">(string s)</span> <span class="comment">//è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²ä¸ºå½¢å‚sçš„æœ€é•¿å›æ–‡ä¸²</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string t = <span class="string">&quot;$#&quot;</span>; <span class="comment">//å­—ç¬¦ä¸²å¼€å¤´å¢åŠ ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦&#x27;$&#x27;ï¼Œé˜²æ­¢è¶Šç•Œ</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.<span class="built_in">size</span>(); i++) <span class="comment">//æ‰©å±•åŸæ¥çš„å­—ç¬¦ä¸²ï¼Œä½¿ä¹‹å­—ç¬¦ä¸ªæ•°ä¸ºå¥‡æ•°(ä¸åŒ…æ‹¬å­—ç¬¦&#x27;$&#x27;)</span></span><br><span class="line">    &#123;</span><br><span class="line">        t += s[i];</span><br><span class="line">        t += <span class="string">&quot;#&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//mxå³ä¸ºå½“å‰è®¡ç®—å›æ–‡ä¸²æœ€å³è¾¹å­—ç¬¦çš„æœ€å¤§å€¼</span></span><br><span class="line">    <span class="comment">//idä¸ºèƒ½å»¶ä¼¸åˆ°æœ€å³ç«¯çš„ä½ç½®çš„é‚£ä¸ªå›æ–‡å­ä¸²çš„ä¸­å¿ƒç‚¹ä½ç½®</span></span><br><span class="line">    <span class="comment">//maxLenï¼šæœ€é•¿çš„é•¿åº¦</span></span><br><span class="line">    <span class="comment">//maxCenterï¼šæœ€é•¿å›æ–‡ä¸­å¿ƒ</span></span><br><span class="line">    <span class="keyword">int</span> mx = <span class="number">0</span>, id = <span class="number">0</span>, maxLen = <span class="number">0</span>, maxCenter = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; t.<span class="built_in">size</span>(); ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        p[i] = mx &gt; i ? <span class="built_in">min</span>(p[<span class="number">2</span> * id - i], mx - i) : <span class="number">1</span>; <span class="comment">//å–minæ˜¯ä¸ºäº†é˜²æ­¢è¶…è¿‡mx</span></span><br><span class="line">        <span class="keyword">while</span> (t[i + p[i]] == t[i - p[i]]) ++p[i]; </span><br><span class="line">        <span class="comment">/*æš´åŠ›ä»æŸä¸€ä¸ªç‚¹ä»å·¦å³æ‰©å±•ï¼Œæ³¨æ„æ­¤æ—¶p[i]çš„å–å€¼ï¼Œ</span></span><br><span class="line"><span class="comment">         *ä¾‹å¦‚å½“mx&lt;iæ—¶ï¼Œp[i]=1ï¼Œ é‚£ä¹ˆè¯´æ­¤æ—¶æœ€é•¿å›æ–‡æ˜¯è‡ªå·±ï¼Œç„¶åæ‹“å±•åŒ¹é…</span></span><br><span class="line"><span class="comment">         *ä¸éœ€è¾¹ç•Œåˆ¤æ–­ï¼Œå› ä¸ºå·¦æœ‰&#x27;$&#x27;,å³æœ‰&#x27;\0&#x27;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         *æˆ‘ä»¬æ¯èµ°ä¸€æ­¥ iï¼Œéƒ½è¦å’Œ mx æ¯”è¾ƒ</span></span><br><span class="line"><span class="comment">         *æˆ‘ä»¬å¸Œæœ› mx å°½å¯èƒ½çš„è¿œï¼Œè¿™æ ·æ‰èƒ½æ›´æœ‰æœºä¼šæ‰§è¡Œ if (i &lt; mx)è¿™å¥ä»£ç ï¼Œä»è€Œæé«˜æ•ˆç‡</span></span><br><span class="line"><span class="comment">         *å³ä¸æ–­æ›´æ–°å€¼</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">if</span> (mx &lt; i + p[i])</span><br><span class="line">        &#123;</span><br><span class="line">            mx = i + p[i];</span><br><span class="line">            id = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (maxLen &lt; p[i])</span><br><span class="line">        &#123;</span><br><span class="line">            maxLen = p[i];</span><br><span class="line">            maxCenter = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s.<span class="built_in">substr</span>((maxCenter - maxLen) / <span class="number">2</span>, maxLen - <span class="number">1</span>);</span><br><span class="line">    <span class="comment">//æœ€é•¿å­ä¸²çš„é•¿åº¦æ˜¯åŠå¾„å‡1ï¼Œèµ·å§‹ä½ç½®æ˜¯ä¸­é—´ä½ç½®å‡å»åŠå¾„å†é™¤ä»¥2ã€‚</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    string s;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; s)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="built_in">Manacher</span>(s).<span class="built_in">size</span>() &lt;&lt; endl; <span class="comment">//è¾“å‡ºæœ€é•¿å›æ–‡é•¿åº¦</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> manacher </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaåŸºäºURLç½‘ç»œç¼–ç¨‹--è·å–ç½‘é¡µHTML</title>
      <link href="/2018/09/30/java%E5%9F%BA%E4%BA%8EURL%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-%E8%8E%B7%E5%8F%96%E7%BD%91%E9%A1%B5HTML/"/>
      <url>/2018/09/30/java%E5%9F%BA%E4%BA%8EURL%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-%E8%8E%B7%E5%8F%96%E7%BD%91%E9%A1%B5HTML/</url>
      
        <content type="html"><![CDATA[<p>JAVA URLç¼–ç¨‹</p><span id="more"></span><h1 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h1><ol><li>åˆ›å»ºä¸€ä¸ªURLã€‚</li><li>è·å–URLConnectionå¯¹è±¡ã€‚</li><li>åœ¨URLConnectionä¸Šè®¾ç½®è¾“å‡ºåŠŸèƒ½ã€‚</li><li>ä»è¿æ¥è·å–è¾“å…¥æˆ–è¾“å‡ºæµã€‚</li><li>è¯»å–è¾“å…¥æµæˆ–å†™å…¥è¾“å‡ºæµã€‚</li><li>å…³é—­è¾“å…¥æµæˆ–è¾“å‡ºæµã€‚</li></ol><h1 id="å…·ä½“æ­¥éª¤"><a href="#å…·ä½“æ­¥éª¤" class="headerlink" title="å…·ä½“æ­¥éª¤"></a>å…·ä½“æ­¥éª¤</h1><h2 id="åˆ›å»ºä¸€ä¸ªURL"><a href="#åˆ›å»ºä¸€ä¸ªURL" class="headerlink" title="åˆ›å»ºä¸€ä¸ªURL"></a>åˆ›å»ºä¸€ä¸ªURL</h2><h3 id="URLåœ¨ç¨‹åºä¸­çš„è¡¨ç¤º"><a href="#URLåœ¨ç¨‹åºä¸­çš„è¡¨ç¤º" class="headerlink" title="URLåœ¨ç¨‹åºä¸­çš„è¡¨ç¤º"></a>URLåœ¨ç¨‹åºä¸­çš„è¡¨ç¤º</h3><p>åœ¨Javaä¸­å®šä¹‰äº†ä¸€ä¸ªURLç±»ï¼Œè¯¥ç±»å¯ä»¥å°è£…URLä¿¡æ¯ï¼Œåˆ›å»ºä¸€ä¸ªURLå¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h3 id="URLæ„é€ åŠæ³•"><a href="#URLæ„é€ åŠæ³•" class="headerlink" title="URLæ„é€ åŠæ³•"></a>URLæ„é€ åŠæ³•</h3><p>å¸¸ç”¨çš„ä¼ ä¸€ä¸ªç½‘å€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">URL(String spec)</span><br><span class="line"><span class="comment">//ä» Stringè¡¨ç¤ºå½¢æˆä¸€ä¸ª URLå¯¹è±¡ã€‚</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">URL myURL = <span class="keyword">new</span> URL(<span class="string">&quot;http://example.com/&quot;</span>);</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰æ ¹æ®åè®®ï¼Œç«¯å£ç­‰ç­‰è¿›è¡Œåˆ›å»ºçš„ã€‚</p><h3 id="ä½¿ç”¨URLå¯¹è±¡"><a href="#ä½¿ç”¨URLå¯¹è±¡" class="headerlink" title="ä½¿ç”¨URLå¯¹è±¡"></a>ä½¿ç”¨URLå¯¹è±¡</h3><p>åˆ›å»ºå®ŒæˆURLå¯¹è±¡åï¼Œå¯ä»¥åƒä½¿ç”¨æ™®é€šçš„ç±»å¯¹è±¡ä¸€æ ·å»è°ƒç”¨URLç±»çš„å„ç§æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">String <span class="title">getHost</span><span class="params">( )</span></span></span><br><span class="line"><span class="function"><span class="comment">//è¿”å›URLçš„ä¸»æœºå</span></span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getPort</span><span class="params">( )</span></span></span><br><span class="line"><span class="function"><span class="comment">//è¿”å›URLçš„ç«¯å£å·, å¦‚æœæ²¡æœ‰è®¾ç½®ç«¯å£å·è¿”å›å€¼ä¸º-1ï¼‰ã€‚</span></span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">String <span class="title">getFile</span><span class="params">( )</span></span></span><br><span class="line"><span class="function"><span class="comment">//è¿”å›URLçš„æ–‡ä»¶ååŠè·¯å¾„ã€‚</span></span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">String <span class="title">getRef</span><span class="params">( )</span></span></span><br><span class="line"><span class="function"><span class="comment">//è¿”å›URLçš„æ ‡è®°    </span></span></span><br></pre></td></tr></table></figure><p>ç­‰ç­‰</p><h2 id="è·å–URLConnectionå¯¹è±¡"><a href="#è·å–URLConnectionå¯¹è±¡" class="headerlink" title="è·å–URLConnectionå¯¹è±¡"></a>è·å–URLConnectionå¯¹è±¡</h2><h3 id="URLä¸URLConnection"><a href="#URLä¸URLConnection" class="headerlink" title="URLä¸URLConnection"></a>URLä¸URLConnection</h3><ul><li>æ¦‚å¿µ</li></ul><p>â€‹        URLç±»å°†URLåœ°å€å°è£…æˆå¯¹è±¡ï¼Œæä¾›äº†è§£æURLåœ°å€çš„æ–¹æ³•ï¼Œå¦‚è·å–uriéƒ¨åˆ†ã€hostéƒ¨åˆ†ã€ç«¯å£ç­‰ã€‚</p><p>â€‹         URLConnectionåˆ™æ˜¯URLå¯¹è±¡å’ŒSocketè¿æ¥ç»™ç»“åˆèµ·æ¥äº†ï¼Œä½¿å¾—å¯ä»¥æ›´è½»æ¾åœ°è·å–å‘èµ·URLè¯·æ±‚çš„è¿æ¥å¥—æ¥å­—ã€‚</p><ul><li>ä¸¤è€…å…³ç³»</li></ul><p>â€‹         é€šè¿‡URLçš„openConnection()æ–¹æ³•å¯ä»¥è·å–URLConnectionå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯é¢å¯¹è¿™ä¸ªURLçš„è¿æ¥ã€‚</p><p>â€‹        ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªå¯¹è±¡å…¶å®æ˜¯ä¸€ä¸ªå·²è¿æ¥å¥—æ¥å­—ï¼Œå®ƒä¸ä»…å…·æœ‰è§£æhttpå“åº”æŠ¥æ–‡çš„åŠŸèƒ½ï¼Œè¿˜å…·æœ‰å¥—æ¥å­—çš„ç›¸å…³åŠŸèƒ½(ä¾‹å¦‚è·å–è¾“å…¥æµã€è¾“å‡ºæµç­‰)ã€‚</p><ul><li>ä»…å°±è§£æå¯¹è±¡æ¥è¯´ï¼ŒURLå¯¹è±¡è§£æçš„æ˜¯URLåœ°å€ï¼Œå¯ä»¥çœ‹ä½œæ˜¯è§£æhttpè¯·æ±‚æŠ¥æ–‡(å¦‚getPort(),getFile()ç­‰)ï¼Œè€ŒURLConnectionåˆ™è§£æçš„æ˜¯httpå“åº”æŠ¥æ–‡(å¦‚getLastModified(),getHeaderFields()ç­‰)ã€‚</li></ul><h3 id="URLConnection"><a href="#URLConnection" class="headerlink" title="URLConnection"></a>URLConnection</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//java.net.URLConnection</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">URLConnection</span> <span class="keyword">extends</span> <span class="title">Object</span></span></span><br></pre></td></tr></table></figure><p>å¯ä»¥ç”±URLè·å¾—URLConnection</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">URLConnection(URL url)</span><br><span class="line"><span class="comment">//æ„é€ ä¸æŒ‡å®šURLçš„URLè¿æ¥ã€‚</span></span><br><span class="line">URLConnection conn = url.openConnection();<span class="comment">//è·å–URLConnectionå¯¹è±¡</span></span><br></pre></td></tr></table></figure><h2 id="è·å–ç½‘ç»œè¾“å…¥æµ"><a href="#è·å–ç½‘ç»œè¾“å…¥æµ" class="headerlink" title="è·å–ç½‘ç»œè¾“å…¥æµ"></a>è·å–ç½‘ç»œè¾“å…¥æµ</h2><p>é˜²æ­¢è¯»å–è¶…æ—¶å¯ä»¥è®¾ç½®ä¸€æ³¢è¿æ¥è¶…æ—¶æ—¶é—´</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">setConnectTimeout(<span class="keyword">int</span> timeout)</span><br><span class="line"><span class="comment">//è®¾ç½®æ‰“å¼€ä¸æ­¤URLConnectionå¼•ç”¨çš„èµ„æºçš„é€šä¿¡é“¾æ¥æ—¶ä½¿ç”¨çš„æŒ‡å®šè¶…æ—¶å€¼ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚</span></span><br><span class="line">conn.setConnectTimeout(<span class="number">3</span> * <span class="number">1000</span>);</span><br><span class="line"><span class="comment">//connï¼šURLConnectionå¯¹è±¡</span></span><br></pre></td></tr></table></figure><p>è·å–ç½‘ç»œè¾“å…¥æµ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">InputStream inputStream = conn.getInputStream();</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æŒ‘æˆ˜ç¨‹åºè®¾è®¡ç«èµ›---poj2431(è´ªå¿ƒ+ä¼˜å…ˆé˜Ÿåˆ—)</title>
      <link href="/2018/09/29/%E6%8C%91%E6%88%98%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%AB%9E%E8%B5%9B-poj2431-%E8%B4%AA%E5%BF%83-%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/"/>
      <url>/2018/09/29/%E6%8C%91%E6%88%98%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%AB%9E%E8%B5%9B-poj2431-%E8%B4%AA%E5%BF%83-%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/</url>
      
        <content type="html"><![CDATA[<p>è´ªå¿ƒï¼Œä¼˜å…ˆé˜Ÿåˆ—</p><span id="more"></span><p><strong>é¢˜ç›®é“¾æ¥ï¼š</strong><a href="http://poj.org/problem?id=2431">http://poj.org/problem?id=2431</a></p><p><strong>é¢˜ç›®å¤§æ„ï¼š</strong></p><p>ä¸€è¾†å¡è½¦ï¼Œåˆå§‹æ—¶ï¼Œè·ç¦»ç»ˆç‚¹Lï¼Œæ²¹é‡ä¸ºPï¼Œåœ¨èµ·ç‚¹åˆ°ç»ˆç‚¹é€”ä¸­æœ‰nä¸ªåŠ æ²¹ç«™ï¼Œæ¯ä¸ªåŠ æ²¹ç«™æ²¹é‡æœ‰é™ï¼Œè€Œå¡è½¦çš„æ²¹ç®±å®¹é‡æ— é™ï¼Œå¡è½¦åœ¨è¡Œè½¦é€”ä¸­ï¼Œæ¯èµ°ä¸€ä¸ªå•ä½çš„è·ç¦»æ¶ˆè€—ä¸€ä¸ªå•ä½çš„æ²¹é‡ï¼Œç»™å®šnä¸ªåŠ æ²¹ç«™è·ç¦»ç»ˆç‚¹çš„è·ç¦»ä»¥åŠæ²¹å­˜å‚¨é‡ã€‚é—®å¡è½¦æ˜¯å¦èƒ½åˆ°è¾¾ç»ˆç‚¹ï¼Œå¦‚æœå¯è¾¾ï¼Œæœ€å°‘éœ€è¦åŠ å¤šå°‘æ¬¡æ²¹ï¼Œå¦åˆ™è¾“å‡º-1.</p><p><strong>é¢˜ç›®æ€è·¯ï¼š</strong></p><p>é‡‡ç”¨è´ªå¿ƒçš„æ€æƒ³ï¼Œå¡è½¦å½“ç„¶åœ¨ä¸åŠ æ²¹çš„æƒ…å†µä¸‹èµ°çš„è¶Šè¿œè¶Šå¥½äº†ï¼Œè€Œå½“å®ƒæ²¡æ²¹æ—¶ï¼Œæˆ‘ä»¬å†åˆ¤æ–­å¡è½¦åœ¨ç»è¿‡çš„é€”ä¸­çš„åŠ æ²¹ç«™ï¼Œå“ªä¸ªåŠ æ²¹ç«™åŠ çš„æ²¹æœ€å¤šï¼Œé€‰æ²¹é‡æœ€å¤šçš„ï¼Œè¿™æ ·åé¢åŠ æ²¹æ¬¡æ•°ä¹Ÿè¶Šå°‘ï¼Œç„¶ååˆç»§ç»­è¡Œé©¶ï¼Œå½“å®ƒåˆæ²¡æ²¹äº†çš„æ—¶å€™ï¼Œç»§ç»­é€‰å®ƒä»èµ·ç‚¹åˆ°è¯¥ç‚¹æ‰€ç»è¿‡çš„åŠ æ²¹ç«™æ²¹é‡æœ€å¤šçš„åŠ æ²¹ã€‚</p><p>åšæ³•å…ˆå°†åŠ æ²¹ç«™åˆ°ç»ˆç‚¹çš„è·ç¦»ç”±è¿œåˆ°è¿‘æ’ä¸‹åºï¼Œè¿™æ ·ç¦»èµ·ç‚¹å°±æ˜¯ç”±è¿‘åˆ°è¿œã€‚å°±æ˜¯æ¯ç»è¿‡ä¸€ä¸ªåŠ æ²¹ç«™å°±å°†è¯¥åŠ æ²¹ç«™çš„æ²¹é‡å‹å…¥ä¼˜å…ˆé˜Ÿåˆ—ä¸­ï¼Œç„¶åæ¯æ¬¡æ²¡æ²¹çš„æ—¶å€™ï¼Œå»é˜Ÿé¦–å…ƒç´ åŠ æ²¹å³å¯ã€‚</p><p>å‚è€ƒï¼š<a href="https://www.cnblogs.com/zjl192628928/p/9414201.html">https://www.cnblogs.com/zjl192628928/p/9414201.html</a></p><p><em>ä¸ºä»€ä¹ˆè¿™æ ·åšå‘¢ï¼Œç»è¿‡åŠ æ²¹ç«™åè¿˜å¯ä»¥åŠ æ²¹ï¼Ÿå…¶å®ä¸æ˜¯è¿™æ ·çš„ï¼Œåªæ˜¯é¢„å…ˆæ¨¡æ‹Ÿæ±½è½¦åˆ°è¾¾é‚£ä¸ªåŠ æ²¹ç«™çš„æƒ…å†µï¼Œå¹¶ä¸æ˜¯æ±½è½¦çœŸæ­£åˆ°è¾¾é‚£ä¸ªåŠ æ²¹ç«™ï¼Œè¿™æ ·æ‰èƒ½é¢„ç®—æ²¿é€”ç©¶ç«Ÿåœ¨å“ªä¸ªåŠ æ²¹ç«™åŠ æ²¹æœ€å¥½ã€‚ä¹‹å‰çº ç»“è¿™ä¸ªæœ‰ç‚¹ä¹…2333ï¼Œåæ¥å°±æƒ³æƒ³è¿™ä¸ªåªæ˜¯é¢„æƒ³æ±½è½¦åˆ°è¾¾é‚£ä¸ªåŠ æ²¹ç«™ï¼Œå¹¶æ²¡æœ‰çœŸæ­£åˆ°è¾¾</em></p><p><strong>Code</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Submit Time:2018-09-29 12:18:22</span></span><br><span class="line"><span class="comment">Time:172MS</span></span><br><span class="line"><span class="comment">Memory:300K</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1E6</span>;</span><br><span class="line"><span class="comment">//ä»£è¡¨ä¸€ä¸ªåŠ æ²¹ç«™ï¼Œxä»£è¡¨è·ç¦»ç»ˆç‚¹ä½ç½®ï¼Œyä»£è¡¨èƒ½åŠ çš„æ²¹é‡</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> x, y;</span><br><span class="line">&#125;stru[MAXN];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node x1, node x2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x1.x &lt; x2.x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">int</span> p, l, n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        cin &gt;&gt; stru[i].x &gt;&gt; stru[i].y;</span><br><span class="line">    cin &gt;&gt; p &gt;&gt; l;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å› ä¸ºç»™çš„æ˜¯è·ç¦»ç»ˆç‚¹çš„è·ç¦»ï¼Œä¸æ˜¯è·ç¦»èµ·ç‚¹ï¼Œæ‰€ä»¥å¾—ç®—å‡ºè·ç¦»èµ·ç‚¹çš„</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        stru[i].x = p - stru[i].x;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//å°†ç»ˆç‚¹ä¹Ÿçœ‹æ˜¯ä¸€ä¸ªåŠ æ²¹ç«™ï¼Œé¿å…ä¸€äº›ç‰¹æ®Šæƒ…å†µï¼Œæ¯”å¦‚</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    0</span></span><br><span class="line"><span class="comment">    3 1</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    stru[n].x = p;</span><br><span class="line">    stru[n].y = <span class="number">0</span>;</span><br><span class="line">    n++;</span><br><span class="line">    <span class="built_in">sort</span>(stru, stru + n, cmp); <span class="comment">//å› ä¸ºé¢˜ç›®ä¸ä¸€å®šæŒ‰é¡ºåºè¾“å…¥ï¼Œæ‰€ä»¥å¾—æ‰‹åŠ¨æ’åºï¼Œå°†ç¦»èµ·ç‚¹æœ€è¿‘çš„æ”¾åœ¨å‰é¢</span></span><br><span class="line"></span><br><span class="line">    priority_queue&lt;<span class="keyword">int</span>&gt;pq;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>, pos = <span class="number">0</span>, tank = l; <span class="comment">//ans:åŠ æ²¹æ¬¡æ•°ï¼Œposï¼šç°åœ¨æ‰€åœ¨ä½ç½®ï¼Œtankï¼šæ²¹ç®±ä¸­çš„æ±½æ²¹é‡</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) <span class="comment">//æ¨¡æ‹Ÿç»è¿‡æ‰€æœ‰åŠ æ²¹ç«™</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> d = stru[i].x - pos; <span class="comment">//åˆ°ä¸‹ä¸€ä¸ªåŠ æ²¹ç«™éœ€è¦çš„è·¯ç¨‹</span></span><br><span class="line">        <span class="keyword">while</span>(tank - d &lt; <span class="number">0</span>) <span class="comment">//åˆ°ä¸äº†äº†ï¼Œéœ€è¦åœ¨æ²¿é€”åŠ æ²¹</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(pq.<span class="built_in">empty</span>()) <span class="comment">//æ²¡æœ‰åŠ æ²¹ç«™å¯ä»¥åŠ æ²¹ï¼Œè¾“å…¥-1ï¼Œä»£è¡¨åˆ°è¾¾ä¸äº†</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">puts</span>(<span class="string">&quot;-1&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            tank += pq.<span class="built_in">top</span>(); <span class="comment">//å¦åˆ™æ‰¾ä¸ªåŠ æ²¹ç«™ï¼ŒåŠ æœ€å¤šçš„æ²¹ï¼Œæ­£å¥½ä¼˜å…ˆé˜Ÿåˆ—ç¬¬ä¸€ä¸ªå…ƒç´ å°±æ˜¯æœ€å¤§å€¼</span></span><br><span class="line">            pq.<span class="built_in">pop</span>(); </span><br><span class="line">            ans++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        tank -= d; <span class="comment">//å¦‚æœåˆ°è¾¾çš„äº†è¿™ä¸ªåŠ æ²¹ç«™ï¼Œè¯´æ˜æ²¹å¤Ÿï¼Œä¸éœ€è¦åŠ ï¼Œé‚£ä¹ˆåªéœ€è¦å‡å»åˆ°è¾¾è¿™ä¸ªåŠ æ²¹ç«™çš„æ²¹é‡å°±è¡Œäº†</span></span><br><span class="line">        pos = stru[i].x; <span class="comment">//ä½ç½®æ›´æ–°ä¸ºè¿™ä¸ªåŠ æ²¹ç«™</span></span><br><span class="line">        pq.<span class="built_in">push</span>(stru[i].y); </span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¼˜å…ˆé˜Ÿåˆ— </tag>
            
            <tag> æŒ‘æˆ˜ç¨‹åºè®¾è®¡ </tag>
            
            <tag> è´ªå¿ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MOOCå­¦ä¹ pythonçˆ¬è™«ä¹‹ä¸­å›½å¤§å­¦æ’å</title>
      <link href="/2018/09/25/MOOC%E5%AD%A6%E4%B9%A0python%E7%88%AC%E8%99%AB%E4%B9%8B%E4%B8%AD%E5%9B%BD%E5%A4%A7%E5%AD%A6%E6%8E%92%E5%90%8D/"/>
      <url>/2018/09/25/MOOC%E5%AD%A6%E4%B9%A0python%E7%88%AC%E8%99%AB%E4%B9%8B%E4%B8%AD%E5%9B%BD%E5%A4%A7%E5%AD%A6%E6%8E%92%E5%90%8D/</url>
      
        <content type="html"><![CDATA[<p>å®šå‘çˆ¬è™«</p><span id="more"></span><h1 id="åŠŸèƒ½æè¿°"><a href="#åŠŸèƒ½æè¿°" class="headerlink" title="åŠŸèƒ½æè¿°"></a>åŠŸèƒ½æè¿°</h1><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-%E7%88%AC%E5%8F%96%E4%B8%AD%E5%9B%BD%E5%A4%A7%E5%AD%A6.png"></p><p><strong>è¿˜å¾—ç¡®å®šæ’åä¿¡æ¯æ˜¯ä¸æ˜¯å†™åœ¨HTMLé‡Œé¢</strong></p><h1 id="ç¨‹åºè®¾è®¡"><a href="#ç¨‹åºè®¾è®¡" class="headerlink" title="ç¨‹åºè®¾è®¡"></a>ç¨‹åºè®¾è®¡</h1><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-%E7%88%AC%E5%8F%96%E4%B8%AD%E5%9B%BD%E5%A4%A7%E5%AD%A62.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-%E7%88%AC%E5%8F%96%E4%B8%AD%E5%9B%BD%E5%A4%A7%E5%AD%A63.png"></p><h1 id="å®ä¾‹ä»£ç "><a href="#å®ä¾‹ä»£ç " class="headerlink" title="å®ä¾‹ä»£ç "></a>å®ä¾‹ä»£ç </h1><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-%E7%88%AC%E5%8F%96%E4%B8%AD%E5%9B%BD%E5%A4%A7%E5%AD%A64.png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> bs4</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getHTMLTest</span>(<span class="params">url</span>):</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        r = requests.get(url)</span><br><span class="line">        r.raise_for_status()</span><br><span class="line">        r.encoding = r.apparent_encoding</span><br><span class="line">        <span class="keyword">return</span> r.text</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fillUnivList</span>(<span class="params">ulist, html</span>):</span></span><br><span class="line">    soup = BeautifulSoup(html, <span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> tr <span class="keyword">in</span> soup.find(<span class="string">&#x27;tbody&#x27;</span>).children:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(tr, bs4.element.Tag):</span><br><span class="line">            tds = tr(<span class="string">&#x27;td&#x27;</span>)</span><br><span class="line">            ulist.append([tds[<span class="number">0</span>].string, tds[<span class="number">1</span>].string, tds[<span class="number">2</span>].string, tds[<span class="number">3</span>].string])</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printUnivLIst</span>(<span class="params">ulist, num</span>):</span></span><br><span class="line">    tplt = <span class="string">&quot;&#123;0:^10&#125;\t&#123;1:^10&#125;\t&#123;2:&#123;4&#125;^10&#125;\t&#123;3:^10&#125;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(tplt.<span class="built_in">format</span>(<span class="string">&quot;æ’å&quot;</span>, <span class="string">&quot;å­¦æ ¡åç§°&quot;</span>, <span class="string">&quot;åœ°åŒº&quot;</span>, <span class="string">&quot;åˆ†æ•°&quot;</span>, <span class="built_in">chr</span>(<span class="number">12288</span>)))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num):</span><br><span class="line">        u = ulist[i]</span><br><span class="line">        <span class="built_in">print</span>(tplt.<span class="built_in">format</span>(u[<span class="number">0</span>], u[<span class="number">1</span>], u[<span class="number">2</span>], u[<span class="number">3</span>], <span class="built_in">chr</span>(<span class="number">12288</span>)))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    uinfo = []</span><br><span class="line">    url = <span class="string">&#x27;http://www.zuihaodaxue.cn/zuihaodaxuepaiming2018.html&#x27;</span></span><br><span class="line">    html = getHTMLTest(url)</span><br><span class="line">    fillUnivList(uinfo, html)</span><br><span class="line">    printUnivLIst(uinfo, <span class="number">20</span>)</span><br><span class="line">main()</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-%E7%88%AC%E5%8F%96%E4%B8%AD%E5%9B%BD%E5%A4%A7%E5%AD%A65.png"></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çˆ¬è™« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MOOCå­¦ä¹ pythonçˆ¬è™«ä¹‹beautifulsoup</title>
      <link href="/2018/09/24/MOOC%E5%AD%A6%E4%B9%A0python%E7%88%AC%E8%99%AB%E4%B9%8Bbeautifulsoup/"/>
      <url>/2018/09/24/MOOC%E5%AD%A6%E4%B9%A0python%E7%88%AC%E8%99%AB%E4%B9%8Bbeautifulsoup/</url>
      
        <content type="html"><![CDATA[<p>beautifulsoup4</p><span id="more"></span><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip3 install beautifulsoup4</span><br><span class="line"><span class="comment">#python 3.6 deepin15.7</span></span><br></pre></td></tr></table></figure><h1 id="bs4ç†è§£ä»¥åŠå¼•ç”¨"><a href="#bs4ç†è§£ä»¥åŠå¼•ç”¨" class="headerlink" title="bs4ç†è§£ä»¥åŠå¼•ç”¨"></a>bs4ç†è§£ä»¥åŠå¼•ç”¨</h1><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-bs%E7%90%86%E8%A7%A3.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-bs%E7%B1%BB.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-bs4%E5%BC%95%E7%94%A8%60.png"></p><h1 id="bsç±»åŸºæœ¬å…ƒç´ "><a href="#bsç±»åŸºæœ¬å…ƒç´ " class="headerlink" title="bsç±»åŸºæœ¬å…ƒç´ "></a>bsç±»åŸºæœ¬å…ƒç´ </h1><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-bs%E5%9F%BA%E6%9C%AC%E5%85%83%E7%B4%A0.png"></p><h2 id="Nameå±æ€§"><a href="#Nameå±æ€§" class="headerlink" title="Nameå±æ€§"></a>Nameå±æ€§</h2><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-bs%E5%9F%BA%E6%9C%AC%E5%85%83%E7%B4%A02.png"></p><h2 id="Attribuså±æ€§"><a href="#Attribuså±æ€§" class="headerlink" title="Attribuså±æ€§"></a>Attribuså±æ€§</h2><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-bs%E5%9F%BA%E6%9C%AC%E5%85%83%E7%B4%A03.png"></p><h2 id="NavigableStringå±æ€§"><a href="#NavigableStringå±æ€§" class="headerlink" title="NavigableStringå±æ€§"></a>NavigableStringå±æ€§</h2><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-bs%E5%9F%BA%E6%9C%AC%E5%85%83%E7%B4%A04.png"></p><h1 id="Commentå±æ€§"><a href="#Commentå±æ€§" class="headerlink" title="Commentå±æ€§"></a>Commentå±æ€§</h1><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-bs%E5%9F%BA%E6%9C%AC%E5%85%83%E7%B4%A05.png"></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/pythob-bs%E5%9F%BA%E6%9C%AC%E5%85%83%E7%B4%A06.png"></p><h1 id="HTMLåŸºæœ¬æ ¼å¼ä»¥åŠéå†"><a href="#HTMLåŸºæœ¬æ ¼å¼ä»¥åŠéå†" class="headerlink" title="HTMLåŸºæœ¬æ ¼å¼ä»¥åŠéå†"></a>HTMLåŸºæœ¬æ ¼å¼ä»¥åŠéå†</h1><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-html.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-html2.png"></p><h2 id="ä¸‹è¡Œéå†"><a href="#ä¸‹è¡Œéå†" class="headerlink" title="ä¸‹è¡Œéå†"></a>ä¸‹è¡Œéå†</h2><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-html3.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/pythob-html4.png"></p><h2 id="ä¸Šè¡Œéå†"><a href="#ä¸Šè¡Œéå†" class="headerlink" title="ä¸Šè¡Œéå†"></a>ä¸Šè¡Œéå†</h2><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-html5.png"></p><h2 id="å¹³è¡Œéå†"><a href="#å¹³è¡Œéå†" class="headerlink" title="å¹³è¡Œéå†"></a>å¹³è¡Œéå†</h2><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-html6.png"></p><p>è¿­ä»£ç±»å‹ï¼šåªèƒ½æ”¾åœ¨å¾ªç¯é‡Œé¢</p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-html7.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-html8.png"></p><h1 id="pretiffy"><a href="#pretiffy" class="headerlink" title="pretiffy()"></a>pretiffy()</h1><p>ç¾åŒ–ä»£ç </p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-prettify.png"></p><h1 id="find-all"><a href="#find-all" class="headerlink" title="find_all"></a>find_all</h1><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-find_all.png"></p><h2 id="name"><a href="#name" class="headerlink" title="name"></a>name</h2><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-find_all2.png"></p><h2 id="attrs"><a href="#attrs" class="headerlink" title="attrs"></a>attrs</h2><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-find_all3.png"></p><h2 id="recursive"><a href="#recursive" class="headerlink" title="recursive"></a>recursive</h2><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-find_all4.png"></p><h2 id="string"><a href="#string" class="headerlink" title="string"></a>string</h2><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-find_all5.png"></p><h2 id="æ‹“å±•åŠæ³•"><a href="#æ‹“å±•åŠæ³•" class="headerlink" title="æ‹“å±•åŠæ³•"></a>æ‹“å±•åŠæ³•</h2><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-find_all6.png"></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çˆ¬è™« </tag>
            
            <tag> beautifulsoup </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MOOCå­¦ä¹ pythonçˆ¬è™«ä¹‹ç®€å•å®æˆ˜</title>
      <link href="/2018/09/24/MOOC%E5%AD%A6%E4%B9%A0python%E7%88%AC%E8%99%AB%E4%B9%8B%E7%AE%80%E5%8D%95%E5%AE%9E%E6%88%98/"/>
      <url>/2018/09/24/MOOC%E5%AD%A6%E4%B9%A0python%E7%88%AC%E8%99%AB%E4%B9%8B%E7%AE%80%E5%8D%95%E5%AE%9E%E6%88%98/</url>
      
        <content type="html"><![CDATA[<p>ç®€å•æŠ“å–äº¬ä¸œï¼Œäºšé©¬é€Šï¼Œæœç´¢å¼•æ“ä¿¡æ¯ï¼Œipå½’å±åœ°æŸ¥è¯¢</p><span id="more"></span><h1 id="äº¬ä¸œ"><a href="#äº¬ä¸œ" class="headerlink" title="äº¬ä¸œ"></a>äº¬ä¸œ</h1><p>æ— æ„å¤–ï¼Œstatus_codeè¿”å›202</p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-%E4%BA%AC%E4%B8%9C.png"></p><h1 id="å¤©çŒ«"><a href="#å¤©çŒ«" class="headerlink" title="å¤©çŒ«"></a>å¤©çŒ«</h1><p>status_codeè¿”å›503ã€‚æ¨¡æ‹Ÿä¸€æ³¢head</p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-%E5%A4%A9%E7%8C%AB.png"></p><h1 id="æœç´¢å¼•æ“"><a href="#æœç´¢å¼•æ“" class="headerlink" title="æœç´¢å¼•æ“"></a>æœç´¢å¼•æ“</h1><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E6%8E%A5%E5%8F%A3.png"></p><p>google:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.google.com/search?q=keyword</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-%E7%99%BE%E5%BA%A6.png"></p><h1 id="çˆ¬å–ç½‘é¡µå›¾ç‰‡å¹¶ä¸”ä¿å­˜"><a href="#çˆ¬å–ç½‘é¡µå›¾ç‰‡å¹¶ä¸”ä¿å­˜" class="headerlink" title="çˆ¬å–ç½‘é¡µå›¾ç‰‡å¹¶ä¸”ä¿å­˜"></a>çˆ¬å–ç½‘é¡µå›¾ç‰‡å¹¶ä¸”ä¿å­˜</h1><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-%E5%9B%BE%E7%89%87%E7%88%AC%E5%8F%96.png"></p><h1 id="IPåœ°å€å½’å±åœ°è‡ªåŠ¨æŸ¥è¯¢"><a href="#IPåœ°å€å½’å±åœ°è‡ªåŠ¨æŸ¥è¯¢" class="headerlink" title="IPåœ°å€å½’å±åœ°è‡ªåŠ¨æŸ¥è¯¢"></a>IPåœ°å€å½’å±åœ°è‡ªåŠ¨æŸ¥è¯¢</h1><p> <img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-ip.png"></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çˆ¬è™« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MOOCå­¦ä¹ pythonçˆ¬è™«å­¦ä¹ ä¹‹Requests</title>
      <link href="/2018/09/23/MOOC%E5%AD%A6%E4%B9%A0python%E7%88%AC%E8%99%AB%E5%AD%A6%E4%B9%A0%E4%B9%8BRequests/"/>
      <url>/2018/09/23/MOOC%E5%AD%A6%E4%B9%A0python%E7%88%AC%E8%99%AB%E5%AD%A6%E4%B9%A0%E4%B9%8BRequests/</url>
      
        <content type="html"><![CDATA[<p>Python-Requestsåº“</p><span id="more"></span><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip3 install requests</span><br><span class="line"><span class="comment"># python3 deepin15.6</span></span><br></pre></td></tr></table></figure><h1 id="Requestsåº“çš„7ä¸ªä¸»è¦åŠæ³•"><a href="#Requestsåº“çš„7ä¸ªä¸»è¦åŠæ³•" class="headerlink" title="Requestsåº“çš„7ä¸ªä¸»è¦åŠæ³•"></a>Requestsåº“çš„7ä¸ªä¸»è¦åŠæ³•</h1><div class="table-container"><table><thead><tr><th>requests.request()</th><th>æ„é€ ä¸€ä¸ªè¯·æ±‚ï¼Œæ”¯æ’‘ä»¥ä¸‹å„æ–¹æ³•çš„åŸºç¡€æ–¹æ³•</th></tr></thead><tbody><tr><td>requests.get()</td><td>è·å–HTMLç½‘é¡µçš„ä¸»è¦æ–¹æ³•ï¼Œå¯¹åº”äºHTTPçš„GET</td></tr><tr><td>requests.head()</td><td>è·å–HTMLç½‘é¡µå¤´ä¿¡æ¯çš„æ–¹æ³•ï¼Œå¯¹åº”äºHTTPçš„HEAD</td></tr><tr><td>requests.post()</td><td>å‘HTMLç½‘é¡µæäº¤POSTè¯·æ±‚çš„æ–¹æ³•ï¼Œå¯¹åº”äºHTTPçš„POST</td></tr><tr><td>requests.put()</td><td>å‘HTMLç½‘é¡µæäº¤PUTè¯·æ±‚çš„æ–¹æ³•ï¼Œå¯¹åº”äºHTTPçš„PUT</td></tr><tr><td>requests.patch()</td><td>å‘HTMLç½‘é¡µæäº¤å±€éƒ¨ä¿®æ”¹è¯·æ±‚ï¼Œå¯¹åº”äºHTTPçš„PATCH</td></tr><tr><td>requests.delete()</td><td>å‘HTMLé¡µé¢æäº¤åˆ é™¤è¯·æ±‚ï¼Œå¯¹åº”äºHTTPçš„DELETE</td></tr></tbody></table></div><h1 id="request-get"><a href="#request-get" class="headerlink" title="request.get()"></a>request.get()</h1><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-requests.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-requests2.png"></p><h1 id="requests-head"><a href="#requests-head" class="headerlink" title="requests.head()"></a>requests.head()</h1><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-requests-gead.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-requests-head.png"></p><p><em>HEADè·å–å¤´éƒ¨ä¿¡æ¯ï¼Œæ²¡æœ‰htmlä¸»ä½“ï¼Œæ•…r.textä¸ºç©º</em>â€˜</p><h1 id="requests-post"><a href="#requests-post" class="headerlink" title="requests.post()"></a>requests.post()</h1><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-post.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-requests-post.png"></p><h1 id="requests-put"><a href="#requests-put" class="headerlink" title="requests.put()"></a>requests.put()</h1><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-put.png"></p><h1 id="requests-patch"><a href="#requests-patch" class="headerlink" title="requests.patch()"></a>requests.patch()</h1><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-patch.png"></p><h1 id="requests-delete"><a href="#requests-delete" class="headerlink" title="requests.delete()"></a>requests.delete()</h1><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-delete.png"></p><h1 id="Responseå¯¹è±¡"><a href="#Responseå¯¹è±¡" class="headerlink" title="Responseå¯¹è±¡"></a>Responseå¯¹è±¡</h1><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-requests3.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-Response.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-response.png"></p><h1 id="Requestsåº“çš„å¼‚å¸¸"><a href="#Requestsåº“çš„å¼‚å¸¸" class="headerlink" title="Requestsåº“çš„å¼‚å¸¸"></a>Requestsåº“çš„å¼‚å¸¸</h1><p> <img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-requests%E5%BC%82%E5%B8%B8.png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">r.raise_for_status() <span class="comment">#å¦‚æœä¸æ˜¯200ï¼Œäº§ç”Ÿå¼‚å¸¸requests.HTTPError</span></span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python%E7%88%AC%E5%8F%96%E7%BD%91%E9%A1%B5%E9%80%9A%E7%94%A8%E6%A1%86%E6%9E%B6.png"></p><h1 id="Httpåè®®å¯¹èµ„æºçš„æ“ä½œ"><a href="#Httpåè®®å¯¹èµ„æºçš„æ“ä½œ" class="headerlink" title="Httpåè®®å¯¹èµ„æºçš„æ“ä½œ"></a>Httpåè®®å¯¹èµ„æºçš„æ“ä½œ</h1><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-http%E5%AF%B9%E5%BF%97%E6%84%BF%E7%9A%84%E6%93%8D%E4%BD%9C.png"></p><h1 id="resquests-request"><a href="#resquests-request" class="headerlink" title="resquests.request()"></a>resquests.request()</h1><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-request.png"></p><p><strong>kwargså‚æ•°è®²è§£</strong></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-requests-request.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-requests-request2.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-requests-request3.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-requests-request4.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-requests-request5.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-requests-request6.png"></p><p> <img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-requests-request7.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-requests-request8.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-requests-request9.png"></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çˆ¬è™« </tag>
            
            <tag> requests </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MOOCå­¦ä¹ pythonçˆ¬è™«å­¦ä¹ ä¹‹å…¥é—¨</title>
      <link href="/2018/09/23/MOOC%E5%AD%A6%E4%B9%A0python%E7%88%AC%E8%99%AB%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%85%A5%E9%97%A8/"/>
      <url>/2018/09/23/MOOC%E5%AD%A6%E4%B9%A0python%E7%88%AC%E8%99%AB%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<p>å…¥é—¨</p><span id="more"></span><h1 id="å‡ ä¸ªåº“"><a href="#å‡ ä¸ªåº“" class="headerlink" title="å‡ ä¸ªåº“"></a>å‡ ä¸ªåº“</h1><p>Requestsï¼šè‡ªåŠ¨çˆ¬å–HTMLé¡µé¢ï¼Œè‡ªåŠ¨ç½‘ç»œè¯·æ±‚æäº¤</p><p>robots.txtï¼šç½‘ç»œçˆ¬è™«æ’é™¤æ ‡å‡†</p><p>Beautiful Soupï¼šè§£æHTMLé¡µé¢</p><p>Scrapyï¼šçˆ¬è™«æ¡†æ¶</p><p>é‡‡ç”¨Python 3.xç³»åˆ—ç‰ˆæœ¬</p><h1 id="ç½‘ç»œçˆ¬è™«å°ºå¯¸"><a href="#ç½‘ç»œçˆ¬è™«å°ºå¯¸" class="headerlink" title="ç½‘ç»œçˆ¬è™«å°ºå¯¸"></a>ç½‘ç»œçˆ¬è™«å°ºå¯¸</h1><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/python-%E7%88%AC%E8%99%AB%E5%B0%BA%E5%AF%B8.png"></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çˆ¬è™« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æŒ‘æˆ˜ç¨‹åºè®¾è®¡ç«èµ›---POJ3253åˆ‡æœ¨æ¿</title>
      <link href="/2018/09/23/%E6%8C%91%E6%88%98%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%AB%9E%E8%B5%9B-POJ3253%E5%88%87%E6%9C%A8%E6%9D%BF/"/>
      <url>/2018/09/23/%E6%8C%91%E6%88%98%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%AB%9E%E8%B5%9B-POJ3253%E5%88%87%E6%9C%A8%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<p>ã€ŠæŒ‘æˆ˜ç¨‹åºè®¾è®¡ç«èµ›ã€‹â€”è´ªå¿ƒæ³•å¦ä¸€ä¾‹å­</p><span id="more"></span><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E6%8C%91%E6%88%98%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-%E5%88%87%E6%9C%A8%E6%9D%BF.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E6%8C%91%E6%88%98%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-%E5%88%87%E6%9C%A8%E6%9D%BF2.jpg"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E6%8C%91%E6%88%98%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-%E5%88%87%E6%9C%A8%E6%9D%BF3.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æŒ‘æˆ˜ç¨‹åºè®¾è®¡ </tag>
            
            <tag> è´ªå¿ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æŒ‘æˆ˜ç¨‹åºè®¾è®¡ç«èµ›---åŒºé—´é—®é¢˜ï¼ˆé€‰æ‹©æœ€å¤šçš„å·¥ä½œé‡ï¼‰è´ªå¿ƒ</title>
      <link href="/2018/09/23/%E6%8C%91%E6%88%98%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%AB%9E%E8%B5%9B-%E5%8C%BA%E9%97%B4%E9%97%AE%E9%A2%98%EF%BC%88%E9%80%89%E6%8B%A9%E6%9C%80%E5%A4%9A%E7%9A%84%E5%B7%A5%E4%BD%9C%E9%87%8F%EF%BC%89%E8%B4%AA%E5%BF%83/"/>
      <url>/2018/09/23/%E6%8C%91%E6%88%98%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%AB%9E%E8%B5%9B-%E5%8C%BA%E9%97%B4%E9%97%AE%E9%A2%98%EF%BC%88%E9%80%89%E6%8B%A9%E6%9C%80%E5%A4%9A%E7%9A%84%E5%B7%A5%E4%BD%9C%E9%87%8F%EF%BC%89%E8%B4%AA%E5%BF%83/</url>
      
        <content type="html"><![CDATA[<p>ã€ŠæŒ‘æˆ˜ç¨‹åºè®¾è®¡ç«èµ›ã€‹â€”-è´ªå¿ƒ</p><span id="more"></span><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E6%8C%91%E6%88%98%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-%E5%8C%BA%E9%97%B4%E9%97%AE%E9%A2%98.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E6%8C%91%E6%88%98%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-%E5%8C%BA%E9%97%B4%E9%97%AE%E9%A2%982.jpg"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E6%8C%91%E6%88%98%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-%E5%8C%BA%E9%97%B4%E9%97%AE%E9%A2%983.jpg"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E6%8C%91%E6%88%98%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-%E5%8C%BA%E9%97%B4%E9%97%AE%E9%A2%984png.png"></p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æŒ‘æˆ˜ç¨‹åºè®¾è®¡ </tag>
            
            <tag> è´ªå¿ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æŒ‘æˆ˜ç¨‹åºè®¾è®¡--- ä»»æ„å››ä¸ªæ•°å­—ä¸ºå®šå’Œ</title>
      <link href="/2018/09/22/%E6%8C%91%E6%88%98%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-%E4%BB%BB%E6%84%8F%E5%9B%9B%E4%B8%AA%E6%95%B0%E5%AD%97%E4%B8%BA%E5%AE%9A%E5%92%8C/"/>
      <url>/2018/09/22/%E6%8C%91%E6%88%98%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-%E4%BB%BB%E6%84%8F%E5%9B%9B%E4%B8%AA%E6%95%B0%E5%AD%97%E4%B8%BA%E5%AE%9A%E5%92%8C/</url>
      
        <content type="html"><![CDATA[<p>ã€ŠæŒ‘æˆ˜ç¨‹åºè®¾è®¡çº§ç«èµ›ã€‹æŠ½ç­¾é—®é¢˜â€”-ä»»æ„å››ä¸ªæ•°å­—ä¸ºå®šå’Œ</p><span id="more"></span><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E6%8C%91%E6%88%98%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-%E6%8A%BD%E7%AD%BE%E9%97%AE%E9%A2%98.png"><br><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E6%8C%91%E6%88%98%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-%E6%8A%BD%E7%AD%BE%E9%97%AE%E9%A2%982.png"><br><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E6%8C%91%E6%88%98%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-%E6%8A%BD%E7%AD%BE%E9%97%AE%E9%A2%983.jpg"><br><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E6%8C%91%E6%88%98%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-%E6%8A%BD%E7%AD%BE%E9%97%AE%E9%A2%984.jpg"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E6%8C%91%E6%88%98%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-%E6%8A%BD%E7%AD%BE%E9%97%AE%E9%A2%985.jpg"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E6%8C%91%E6%88%98%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-%E6%8A%BD%E7%AD%BE%E9%97%AE%E9%A2%986.png"></p><p><em>æ‰©å±•æ­¤ç±»é¢˜ç›®å¯çœ‹</em></p><p><a href="https://wizardforcel.gitbooks.io/the-art-of-programming-by-july/content/02.03.html">https://wizardforcel.gitbooks.io/the-art-of-programming-by-july/content/02.03.html</a></p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äºŒåˆ† </tag>
            
            <tag> æŒ‘æˆ˜ç¨‹åºè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æŒ‘æˆ˜ç¨‹åºè®¾è®¡--POJ1852(Ants)æ€ç»´</title>
      <link href="/2018/09/22/%E6%8C%91%E6%88%98%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-POJ1852-Ants-%E6%80%9D%E7%BB%B4/"/>
      <url>/2018/09/22/%E6%8C%91%E6%88%98%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-POJ1852-Ants-%E6%80%9D%E7%BB%B4/</url>
      
        <content type="html"><![CDATA[<p> ã€ŠæŒ‘æˆ˜ç¨‹åºè®¾è®¡ç«èµ›å…¥é—¨ã€‹â€”POJ1852</p><span id="more"></span><p><a href="http://poj.org/problem?id=1852">POJ1852 Antsï¼ˆæ€ç»´ï¼‰</a></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/POJ1852-1.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/POJ1852-2.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/POJ1852-3.png"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Judge Status : Accepted Language : C++</span></span><br><span class="line"><span class="comment"> Submit Timeï¼š2018-09-22 09:20:29</span></span><br><span class="line"><span class="comment"> Exe.Time:641MS Exe.Memoryï¼š572K</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1E6</span>;</span><br><span class="line"><span class="keyword">int</span> arr[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">int</span> test;</span><br><span class="line">    cin &gt;&gt; test;</span><br><span class="line">    <span class="keyword">while</span>(test--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> l, n;</span><br><span class="line">        cin &gt;&gt; l &gt;&gt; n;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">            cin &gt;&gt; arr[i];</span><br><span class="line">        <span class="keyword">int</span> minT = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            minT = <span class="built_in">max</span>(minT, <span class="built_in">min</span>(arr[i], l - arr[i])); <span class="comment">//æ±‚çš„æ˜¯æ‰€æœ‰èš‚èšéƒ½ä¸‹è½çš„æ—¶é—´ï¼Œæ‰€ä»¥æ±‚çš„æ˜¯æœ€å¤§å€¼ï¼Œä¿è¯æ‰€æœ‰èš‚èšéƒ½ä¸‹è½äº†</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> maxT = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            maxT = <span class="built_in">max</span>(maxT, <span class="built_in">max</span>(arr[i], l - arr[i]));</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; minT &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; maxT &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ€ç»´é¢˜ç›® </tag>
            
            <tag> æŒ‘æˆ˜ç¨‹åºè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDBCä¹‹PreparedStatementå¯¹è±¡æ‰§è¡ŒSQLè¯­å¥</title>
      <link href="/2018/09/18/JDBC%E4%B9%8BPreparedStatement%E5%AF%B9%E8%B1%A1%E6%89%A7%E8%A1%8CSQL%E8%AF%AD%E5%8F%A5/"/>
      <url>/2018/09/18/JDBC%E4%B9%8BPreparedStatement%E5%AF%B9%E8%B1%A1%E6%89%A7%E8%A1%8CSQL%E8%AF%AD%E5%8F%A5/</url>
      
        <content type="html"><![CDATA[<p>å®ç°Statementæ¥å£</p><span id="more"></span><h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p>PreparedStatementå®ç°äº†Statementæ¥å£ï¼Œä½¿ç”¨è¯¥æ¥å£ç±»å‹çš„å¯¹è±¡åŒæ ·å¯ä»¥æ‰§è¡ŒSQLè¯­å¥ã€‚</p><p><strong>ç‰¹ç‚¹</strong></p><ul><li>é¢„ç¼–è¯‘ï¼šåˆ›å»ºæ—¶å°±åŒ…å«äº†ä¸€ä¸ªSQLè¯­å¥ï¼Œå¹¶é€åˆ°æ•°æ®åº“ç³»ç»Ÿè¿›è¡Œç¼–è¯‘ï¼Œä¸‹æ¬¡å†æ‰§è¡ŒåŒæ ·çš„å¯¹è±¡å°±ä¸ç”¨åœ¨ç¼–è¯‘äº†ï¼ŒèŠ‚çœæ—¶é—´ã€‚</li><li>SQLè¯­å¥å¯ä»¥åŒ…å«å‚æ•°ï¼šä½¿ç”¨é‡‡ç”¨å‚æ•°çš„SQLè¯­å¥çš„ä¼˜ç‚¹æ˜¯å¯ä»¥ä½¿ç”¨ç›¸åŒçš„è¯­å¥ï¼Œå¹¶åœ¨æ¯æ¬¡æ‰§è¡Œå®ƒæ—¶æä¾›ä¸åŒçš„å€¼</li></ul><h1 id="ä½¿ç”¨ä»£ç "><a href="#ä½¿ç”¨ä»£ç " class="headerlink" title="ä½¿ç”¨ä»£ç "></a>ä½¿ç”¨ä»£ç </h1><p><em>å‡è®¾ä¹‹å‰çš„å·¥ä½œå·²ç»åšå¥½ï¼Œconæ˜¯å·²ç»è·å–åˆ°çš„connectionå¯¹è±¡</em></p><h2 id="æŸ¥è¯¢"><a href="#æŸ¥è¯¢" class="headerlink" title="æŸ¥è¯¢"></a>æŸ¥è¯¢</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Preparestatement pstmt = con.prepareStatement(<span class="string">&quot;select * from student&quot;</span>);</span><br><span class="line">ResultSet rs = pstmt.execuQuery();</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(rs.next())</span><br><span class="line">    System.out.println(rs.getString(<span class="string">&quot;Name&quot;</span>));</span><br><span class="line">&#125;<span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ’å…¥"><a href="#æ’å…¥" class="headerlink" title="æ’å…¥"></a>æ’å…¥</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Preparestatement pstmt = con.prepareStatement(<span class="string">&quot;insert into student1 values (?,?,?,?)&quot;</span>);</span><br><span class="line">pstmt.setString(<span class="number">1</span>, <span class="string">&quot;Name&quot;</span>);</span><br><span class="line">pstmt.setString(<span class="number">2</span>, <span class="string">&quot;Grade&quot;</span>);</span><br><span class="line">pstmt.setString(<span class="number">3</span>, <span class="string">&quot;Sex&quot;</span>);</span><br><span class="line">pstmt.setString(<span class="number">4</span>, <span class="string">&quot;Sno&quot;</span>);  </span><br><span class="line"><span class="keyword">int</span> numInsert=pstmt.executeUpdate(); <span class="comment">//è¿”å›æ’å…¥çš„æ•°é‡                                     </span></span><br></pre></td></tr></table></figure><p>setStringæ˜¯å®šä¹‰äº†å­—ç¬¦ä¸²ä¸­ç¬¬nä¸ªâ€?â€œå­—ç¬¦çš„æ›¿æ¢</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setString</span><span class="params">(<span class="keyword">int</span> parameterIndex, String x)</span> <span class="keyword">throws</span> SQLException</span></span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹"><a href="#ä¿®æ”¹" class="headerlink" title="ä¿®æ”¹"></a>ä¿®æ”¹</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Preparestatement pstmt = con.prepareStatement(<span class="string">&quot;update student1 set NAME=?,SEX=?,DEPT=? where NO=?&quot;</span>);</span><br><span class="line">pstmt.setString(<span class="number">1</span>, <span class="string">&quot;Name&quot;</span>);</span><br><span class="line">pstmt.setString(<span class="number">2</span>, <span class="string">&quot;Grade&quot;</span>);</span><br><span class="line">pstmt.setString(<span class="number">3</span>, <span class="string">&quot;Sex&quot;</span>);</span><br><span class="line">pstmt.setString(<span class="number">4</span>, <span class="string">&quot;Sno&quot;</span>);  </span><br><span class="line"><span class="keyword">int</span> numDelete=pstmt.executeUpdate();</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Preparestatement pstmt = con.prepareStatement(<span class="string">&quot;delete from student1 where NO=?&quot;</span>);</span><br><span class="line">pstmt.setString(<span class="number">1</span>, <span class="string">&quot;Sno&quot;</span>);</span><br><span class="line"><span class="keyword">int</span> numDelete=pstmt.executeUpdate();</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDBCå…¥é—¨</title>
      <link href="/2018/09/18/JDBC%E5%85%A5%E9%97%A8/"/>
      <url>/2018/09/18/JDBC%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<p>javaè®¿é—®æ•°æ®åº“æŠ€æœ¯</p><span id="more"></span><h1 id="JDBCæ¦‚è¿°ä»¥åŠåŠŸèƒ½"><a href="#JDBCæ¦‚è¿°ä»¥åŠåŠŸèƒ½" class="headerlink" title="JDBCæ¦‚è¿°ä»¥åŠåŠŸèƒ½"></a>JDBCæ¦‚è¿°ä»¥åŠåŠŸèƒ½</h1><p><strong>æ¦‚è¿°</strong></p><ul><li>JDBCï¼ˆJava DataBase Connectivityï¼‰æ˜¯æ•°æ®åº“å…¬å¸å¼€å‘çš„ä¸€ç§æä¾›ç»™Javaç¼–ç¨‹è€…ä½¿ç”¨çš„Java APIï¼ˆç±»åº“ï¼‰ï¼Œèƒ½å¤Ÿå¸®åŠ©Javaç¨‹åºè®¿é—®è¡¨æ ¼æ•°æ®ï¼Œä¸»è¦åº”ç”¨åœ¨å¯¹å…³ç³»æ•°æ®åº“çš„è®¿é—®ä¸­ã€‚</li><li>åœ¨Javaç¨‹åºä¸­ï¼Œéœ€è¦JDKä¸­java.sqlå’Œjavax.sqlåŒ…ä¸­çš„ç±»å’ŒJDBCåŒ…ä¸­çš„ç±»é…åˆå®Œæˆå¯¹æ•°æ®åº“çš„è®¿é—®ã€‚</li></ul><p><strong>åŠŸèƒ½</strong></p><ol><li>è¿æ¥æ•°æ®æºï¼ˆæ•°æ®åº“ï¼‰ã€‚</li><li>å°†SQLè¯­å¥ï¼ˆæŸ¥è¯¢ã€æ›´æ–°ï¼‰å‘é€åˆ°æ•°æ®åº“ã€‚</li><li>è·å–å¹¶å¤„ç†ä»æ•°æ®åº“ä¸­è¿”å›çš„ç»“æœ</li></ol><h1 id="åŸºæœ¬ä»£ç "><a href="#åŸºæœ¬ä»£ç " class="headerlink" title="åŸºæœ¬ä»£ç "></a>åŸºæœ¬ä»£ç </h1><p><em>çœå»é¡¹ç›®åŠ è½½é©±åŠ¨åŒ…è¿‡ç¨‹ï¼Œç›´æ¥ä»£ç </em></p><h2 id="åŠ è½½é©±åŠ¨ç±»"><a href="#åŠ è½½é©±åŠ¨ç±»" class="headerlink" title="åŠ è½½é©±åŠ¨ç±»"></a>åŠ è½½é©±åŠ¨ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(driverClass);</span><br></pre></td></tr></table></figure><ul><li><p>Class.forName(xxx.xx.xx)è¿”å›çš„æ˜¯ä¸€ä¸ªç±»ã€‚<br>Class.forName(xxx.xx.xx)çš„ä½œç”¨æ˜¯è¦æ±‚JVMæŸ¥æ‰¾å¹¶åŠ è½½æŒ‡å®šçš„ç±»ï¼Œä¹Ÿå°±æ˜¯è¯´JVMä¼šæ‰§è¡Œè¯¥ç±»çš„é™æ€ä»£ç æ®µ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> Class&lt;?&gt; forName(String className)</span><br></pre></td></tr></table></figure><p><em>&lt;ï¼Ÿ&gt;æ˜¯1.5çš„æ–°ç‰¹æ€§ï¼Œæ³›å‹  å¦‚æœæ˜¯?è¡¨ç¤ºå¯ä»¥æ”¾Objectç±»å‹ä»¥åŠä»–çš„å­</em>ç±»</p></li><li><p>driverClassï¼šä¸åŒæ•°æ®åº“çš„é©±åŠ¨ç±»ä¸ä¸€æ ·</p><ul><li>MySQLçš„jdbcé©±åŠ¨ç±»æ˜¯ï¼š com.mysql.jdbc.Driver</li><li>Oracleçš„jdbcé©±åŠ¨ç±»æ˜¯ï¼šoracle.jdbc.driver.OracleDriver</li></ul></li></ul><h2 id="è¿æ¥æ•°æ®åº“ï¼Œè·å–Connectionå¯¹è±¡"><a href="#è¿æ¥æ•°æ®åº“ï¼Œè·å–Connectionå¯¹è±¡" class="headerlink" title="è¿æ¥æ•°æ®åº“ï¼Œè·å–Connectionå¯¹è±¡"></a>è¿æ¥æ•°æ®åº“ï¼Œè·å–Connectionå¯¹è±¡</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Connection con = DriverManager.getConnection(URL, databaseUserName, databasePassword);</span><br></pre></td></tr></table></figure><ul><li>Connectionï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Connection</span> <span class="keyword">extends</span> <span class="title">Wrapper</span>, <span class="title">AutoCloseable</span></span>;</span><br></pre></td></tr></table></figure><ul><li>DriverManagerç±»çš„é™æ€æ–¹æ³•é€šè¿‡æ•°æ®åº“URLï¼Œå¯ä»¥è¿æ¥æ•°æ®åº“å¹¶è·å¾—ä¸€ä¸ªConnectionå¯¹è±¡ï¼Œæ–¹æ³•çš„åä¸¤ä¸ªå‚æ•°æ˜¯è¿æ¥æ•°æ®åº“çš„ç”¨æˆ·åå’Œå¯†ç ã€‚</li></ul><h2 id="è·å–Statementå¯¹è±¡ï¼Œç”¨äºæ‰§è¡ŒSQLè¯­å¥"><a href="#è·å–Statementå¯¹è±¡ï¼Œç”¨äºæ‰§è¡ŒSQLè¯­å¥" class="headerlink" title="è·å–Statementå¯¹è±¡ï¼Œç”¨äºæ‰§è¡ŒSQLè¯­å¥"></a>è·å–Statementå¯¹è±¡ï¼Œç”¨äºæ‰§è¡ŒSQLè¯­å¥</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Statement stmt  =  con.creatStatement();</span><br></pre></td></tr></table></figure><ul><li>Statement:</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Statement</span> <span class="keyword">extends</span> <span class="title">Object</span></span>;</span><br></pre></td></tr></table></figure><ul><li><p>Statementå¯¹è±¡:</p><p>ç”±Connectionå¯¹è±¡è·å¾—Statementå¯¹è±¡ï¼ŒStatementå¯¹è±¡å¯ä»¥æ‰§è¡ŒSQLè¯­å¥ï¼š</p><ul><li>executeQueryæ–¹æ³•æ‰§è¡ŒæŸ¥è¯¢è¯­å¥</li><li>executeUpdateæ–¹æ³•æ‰§è¡Œæ›´æ–°è¯­å¥ï¼ˆå¢ï¼Œåˆ ï¼Œæ”¹ï¼‰</li></ul></li></ul><h2 id="æ‰§è¡ŒSQLè¯­å¥ï¼Œè·å–æŸ¥è¯¢ç»“æœ"><a href="#æ‰§è¡ŒSQLè¯­å¥ï¼Œè·å–æŸ¥è¯¢ç»“æœ" class="headerlink" title="æ‰§è¡ŒSQLè¯­å¥ï¼Œè·å–æŸ¥è¯¢ç»“æœ"></a>æ‰§è¡ŒSQLè¯­å¥ï¼Œè·å–æŸ¥è¯¢ç»“æœ</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ResultSet rs = stmt.executeQuery(querySQL);</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ResultSet executeQuery(String sql) throws SQLException //æ‰§è¡Œç»™å®šçš„SQLè¯­å¥ï¼Œè¿”å›å•ä¸ªResultSetå¯¹è±¡</span><br></pre></td></tr></table></figure><p><em>querySQLä»£è¡¨æ˜¯SQLçš„æŸ¥è¯¢è¯­å¥</em></p><ul><li>ResultSet:</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ResultSet</span> <span class="keyword">extends</span> <span class="title">Wrapper</span>, <span class="title">AutoCloseable</span></span>;</span><br></pre></td></tr></table></figure><h2 id="å…³é—­æ•°æ®åº“è¿æ¥ï¼Œé‡Šæ”¾èµ„æº"><a href="#å…³é—­æ•°æ®åº“è¿æ¥ï¼Œé‡Šæ”¾èµ„æº" class="headerlink" title="å…³é—­æ•°æ®åº“è¿æ¥ï¼Œé‡Šæ”¾èµ„æº"></a>å…³é—­æ•°æ®åº“è¿æ¥ï¼Œé‡Šæ”¾èµ„æº</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rs.close();rs = <span class="keyword">null</span>;</span><br><span class="line">stmt.close(); stmt = <span class="keyword">null</span>;</span><br><span class="line">con.close(); con = <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure><p>ä¾æ¬¡å…³é—­ResultSetã€Statementã€Connectionå¯¹è±¡ï¼Œé€šè¿‡èµ‹å€¼nullé‡Šæ”¾èµ„æºã€‚</p><h1 id="ResultSet"><a href="#ResultSet" class="headerlink" title="ResultSet"></a>ResultSet</h1><ol><li><p>ResultSetå¯¹è±¡è¡¨ç¤ºæ•°æ®åº“æŸ¥è¯¢ç»“æœé›†ï¼Œå¯ä»¥çœ‹æˆä¸€ä¸ªæ•°æ®è¡¨ï¼Œé€šå¸¸é€šè¿‡æ‰§è¡ŒæŸ¥è¯¢æ•°æ®åº“æ¥ç”Ÿæˆã€‚ </p></li><li><p>å®ç°Statementæ¥å£çš„ä»»ä½•å¯¹è±¡ï¼ˆåŒ…æ‹¬PreparedStatementï¼ŒCallableStatementå’ŒRowSetï¼‰éƒ½å¯ä»¥åˆ›å»ºä¸€ä¸ªResultSetå¯¹è±¡ã€‚</p></li><li><p>è®¿é—®ResultSetä¸­çš„å¯¹è±¡ï¼š</p><p>å¯ä»¥é€šè¿‡æ¸¸æ ‡è®¿é—®ResultSetå¯¹è±¡ä¸­çš„æ•°æ®ï¼Œæ¸¸æ ‡å¯ä»¥çœ‹åšæ˜¯æŒ‡å‘ResultSetå¯¹è±¡ä¸­çš„ä¸€è¡Œæ•°æ®çš„æŒ‡é’ˆã€‚ </p><p>æœ€åˆï¼Œæ¸¸æ ‡ä½äºæ•°æ®è¡¨ç¬¬ä¸€è¡Œä¹‹å‰ã€‚ResultSet.next()æ–¹æ³•å°†æ¸¸æ ‡ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œã€‚ å¦‚æœæ¸¸æ ‡ä½äºæœ€åä¸€è¡Œä¹‹åï¼Œæ­¤æ–¹æ³•è¿”å›falseï¼Œå¦åˆ™è¿”å›trueã€‚ è¯¥æ–¹æ³•å¯ä»¥ä½œä¸ºwhileå¾ªç¯çš„æ¡ä»¶ï¼Œæ¥éå†ResultSetä¸­çš„æ‰€æœ‰æ•°æ®ã€‚</p><p><strong>å¸¸ç”¨é»˜è®¤ç±»å‹æ˜¯æ¸¸æ ‡åªèƒ½å‰ç§»ï¼Œåªè¯»</strong></p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(rs.next())</span><br><span class="line">&#123;</span><br><span class="line">    System.out.println(rs.getString(<span class="string">&quot;Name&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">String <span class="title">getString</span><span class="params">(<span class="keyword">int</span> columnIndex)</span> <span class="keyword">throws</span> SQLException</span></span><br><span class="line"><span class="function">String <span class="title">getString</span><span class="params">(<span class="keyword">int</span> columnIndex)</span> <span class="keyword">throws</span> SQLException</span></span><br></pre></td></tr></table></figure><p>rs:æ•°æ®é›†ï¼Œå³ResultSetå¯¹è±¡ã€‚<br>â€‹    rs.getInt(int index);<br>â€‹    rs.getInt(String columName);<br>â€‹    å¯ä»¥é€šè¿‡ç´¢å¼•æˆ–è€…åˆ—åæ¥è·å¾—æŸ¥è¯¢ç»“æœé›†ä¸­çš„æŸä¸€åˆ—çš„å€¼ã€‚</p><h1 id="å…ƒæ•°æ®-MetaData"><a href="#å…ƒæ•°æ®-MetaData" class="headerlink" title="å…ƒæ•°æ®(MetaData)"></a>å…ƒæ•°æ®(MetaData)</h1><h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><p>å…ƒæ•°æ®ï¼šæè¿°æ•°æ®åº“æˆ–æ•°æ®è¡¨æœ¬èº«å±æ€§çš„æ•°æ®ï¼Œä¾‹å¦‚æ•°æ®åº“ä¸­çš„è¡¨åï¼Œæ¯ä¸ªè¡¨ä¸­çš„åˆ—åç§°ï¼Œä¸»é”®ï¼Œå¤–é”®ï¼Œå­˜å‚¨è¿‡ç¨‹ç­‰ã€‚</p><p>æ‰€è°“çš„MetaDataåœ¨è‹±æ–‡ä¸­çš„è§£é‡Šä¸ºâ€œData about Dataâ€ï¼Œç›´è¯‘æˆä¸­æ–‡åˆ™ä¸ºâ€œæœ‰å…³æ•°æ®çš„æ•°æ®â€æˆ–è€…â€œæè¿°æ•°æ®çš„æ•°æ®â€ï¼Œå®é™…ä¸Šå°±æ˜¯æè¿°åŠè§£é‡Šå«ä¹‰çš„æ•°æ®ã€‚ä»¥Resultçš„MetaDataä¸ºä¾‹ï¼ŒResultSetæ˜¯ä»¥è¡¨æ ¼çš„å½¢å¼å­˜åœ¨ï¼Œæ‰€ä»¥getMetaDataå°±åŒ…æ‹¬äº†æ•°æ®çš„å­—æ®µåç§°ã€ç±»å‹ä»¥åŠæ•°ç›®ç­‰è¡¨æ ¼æ‰€å¿…é¡»å…·å¤‡çš„ä¿¡æ¯ã€‚ </p><h2 id="è·å–"><a href="#è·å–" class="headerlink" title="è·å–"></a>è·å–</h2><p>JDBCæä¾›äº†ResultSetMetaDataæ¥å£ï¼Œè¯¥æ¥å£å¯ä»¥è·å¾—æ•°æ®è¡¨çš„å…ƒæ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ResultSetMetaData <span class="title">getMetaData</span><span class="params">()</span> <span class="comment">//ResultSetæ¥å£ä¸­å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•</span></span></span><br><span class="line"><span class="function"><span class="comment">//è¯¥æ–¹æ³•è¿”å›çš„å¯¹è±¡å¯ä»¥è·å–è¡¨çš„å…ƒæ•°æ®ï¼Œä¾‹å¦‚æœ‰å¤šå°‘åˆ—ï¼Œåˆ—åæ˜¯ä»€ä¹ˆç­‰</span></span></span><br></pre></td></tr></table></figure><h1 id="æ€»ç»“ä»£ç "><a href="#æ€»ç»“ä»£ç " class="headerlink" title="æ€»ç»“ä»£ç "></a>æ€»ç»“ä»£ç </h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DB</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> Statement stm = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">static</span> ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿æ¥æ•°æ®åº“å¹¶ä¸”è·å–Statementå¯¹è±¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DB</span><span class="params">(String driverClass, String dataBase, String usrName, String passWord)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(driverClass);</span><br><span class="line">            Connection con = DriverManager.getConnection(dataBase, usrName, passWord);</span><br><span class="line">            stm = con.createStatement();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (ClassNotFoundException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŸ¥è¯¢æ•°æ®åº“</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">queryDatabase</span><span class="params">(String querySQL)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            rs = stm.executeQuery(querySQL);</span><br><span class="line">            ResultSetMetaData rsmd = rs.getMetaData();</span><br><span class="line">            <span class="keyword">int</span> columnCount = rsmd.getColumnCount(); <span class="comment">//è·å–è¡¨çš„åˆ—æ•°</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= columnCount; i++)</span><br><span class="line">                System.out.print(rsmd.getColumnName(i) + <span class="string">&quot; &quot;</span>); <span class="comment">//è¾“å‡ºæ¯ä¸€åˆ—çš„åˆ—å</span></span><br><span class="line">            System.out.println();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span>(rs.next())</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= columnCount; i++)</span><br><span class="line">                    System.out.print(rs.getObject(i) + <span class="string">&quot;  &quot;</span>); <span class="comment">//è¾“å‡ºæ¯ä¸€åˆ—å†…å®¹</span></span><br><span class="line">                System.out.println();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¿®æ”¹æ•°æ®åº“ä¸­çš„ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateDatabase</span><span class="params">(String updateSQL)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="keyword">int</span> numUpate = stm.executeUpdate(updateSQL); <span class="comment">//è¿”å›å·²æ›´æ–°ä¸ªæ•°</span></span><br><span class="line">            System.out.println(<span class="string">&quot;å·²æ›´æ–°äº†&quot;</span> + numUpate + <span class="string">&quot;æ¡è®°å½•&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤æ•°æ®åº“ä¸­çš„ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteDatabase</span><span class="params">(String deleteSQL)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            stm.executeUpdate(deleteSQL);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¾€æ•°æ®åº“ä¸­æ·»åŠ ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertDatabase</span><span class="params">(String insertSQL)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            stm.executeUpdate(insertSQL);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            rs.close();</span><br><span class="line">            rs = <span class="keyword">null</span>;</span><br><span class="line">stmt.close(); </span><br><span class="line">            stmt = <span class="keyword">null</span>;</span><br><span class="line">con.close(); </span><br><span class="line">            con = <span class="keyword">null</span>;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        String schema = <span class="string">&quot;data&quot;</span>;</span><br><span class="line">        String table = <span class="string">&quot;new_table&quot;</span>;</span><br><span class="line">        String driverClass = <span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>;</span><br><span class="line">        String database = <span class="string">&quot;jdbc:mysql://localhost:3306/&quot;</span> + schema + <span class="string">&quot;?useSSL=false&amp;serverTimezone=GMT%2B8&amp;characterEncoding=UTF-8&quot;</span>;</span><br><span class="line">        String username = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">        String password = <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"></span><br><span class="line">        String querySQL = <span class="string">&quot;select* from &quot;</span> + table;</span><br><span class="line">        String updateSQL = <span class="string">&quot;update &quot;</span> + table + <span class="string">&quot; set grade=70 where name=&#x27;å°é™ˆ&#x27;&quot;</span>;</span><br><span class="line">        String deleteSQL = <span class="string">&quot;delete from &quot;</span> + table + <span class="string">&quot; where name=&#x27;å°ä¸½&#x27;&quot;</span>;</span><br><span class="line">        String insertSQL = <span class="string">&quot;insert into &quot;</span> + table + <span class="string">&quot; values(&#x27;å°ç™½&#x27;, &#x27;ç”·&#x27;, &#x27;98&#x27;)&quot;</span>;</span><br><span class="line"></span><br><span class="line">        DB db = <span class="keyword">new</span> DB(driverClass, database, username, password);</span><br><span class="line">        System.out.println(<span class="string">&quot;åŸå…ˆçš„æ•°æ®åº“æ•°æ®ä¸º&quot;</span>);</span><br><span class="line">        db.queryDatabase(querySQL);</span><br><span class="line">        System.out.println();</span><br><span class="line">        db.updateDatabase(updateSQL);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œupdateå°†å°é™ˆæˆç»©å˜æˆ70&quot;</span>);</span><br><span class="line">        db.queryDatabase(querySQL);</span><br><span class="line">        System.out.println();</span><br><span class="line">        System.out.println(<span class="string">&quot;å°†åä¸ºå°ä¸½é‚£ä¸€è¡Œåˆ é™¤&quot;</span>);</span><br><span class="line">        db.deleteDatabase(deleteSQL);</span><br><span class="line">        db.queryDatabase(querySQL);</span><br><span class="line">        System.out.println();</span><br><span class="line">        System.out.println(<span class="string">&quot;æ·»åŠ åä¸ºå°ç™½ä¸€è¡Œ&quot;</span>);</span><br><span class="line">        db.insertDatabase(insertSQL);</span><br><span class="line">        db.queryDatabase(querySQL);</span><br><span class="line">        db.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL--deepin15.7ç¯å¢ƒä¸‹çš„é…ç½®</title>
      <link href="/2018/09/16/mySQL-deepin15-7%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E9%85%8D%E7%BD%AE/"/>
      <url>/2018/09/16/mySQL-deepin15-7%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<p>deepin15.7åŸºäºdebian9</p><span id="more"></span><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/deepin%E4%BF%A1%E6%81%AF.png"></p><p>ä¸ºäº†è¿˜åŸæœ€å¥½çš„é…ç½®ç¯å¢ƒï¼Œå…ˆæŠŠMySQLçš„é—ç•™é…ç½®ä»¥åŠéƒ¨åˆ†ä¾èµ–å¸è½½å¹²å‡€</p><h1 id="ä½¿ç”¨APTåˆ é™¤MySQL"><a href="#ä½¿ç”¨APTåˆ é™¤MySQL" class="headerlink" title="ä½¿ç”¨APTåˆ é™¤MySQL"></a>ä½¿ç”¨APTåˆ é™¤MySQL</h1><p>å‚è€ƒï¼š</p><p><a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#apt-repo-remove">Removing MySQL with APT</a></p><p>è¦å¸è½½MySQLæœåŠ¡å™¨ä»¥åŠä½¿ç”¨MySQL APTå­˜å‚¨åº“å®‰è£…çš„ç›¸å…³ç»„ä»¶ï¼Œé¦–å…ˆï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ é™¤MySQLæœåŠ¡å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove mysql-server</span><br></pre></td></tr></table></figure><p>å¼ºåŠ›å¸è½½å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¿™æ¡å‘½ä»¤ï¼ˆå¸è½½å¹¶æ¸…é™¤è½¯ä»¶åŒ…çš„é…ç½®ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get purge mysql-server</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œåˆ é™¤ä½¿ç”¨MySQLæœåŠ¡å™¨è‡ªåŠ¨å®‰è£…çš„ä»»ä½•å…¶ä»–è½¯ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get autoremove</span><br></pre></td></tr></table></figure><p>å¦‚æœè¦å¸è½½MySQLå…¶ä»–ç»„ä»¶ï¼Œå¯ä»¥å…ˆçœ‹çœ‹è½¯ä»¶åŒ…åˆ—è¡¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -l | grep mysql | grep ii</span><br></pre></td></tr></table></figure><p>ç„¶åå†å¯¹åº”åˆ é™¤</p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/mysql%E5%8D%B8%E8%BD%BD.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/mysql%E5%8D%B8%E8%BD%BD2.png"></p><h1 id="å…¨æ–°å®‰è£…MySQLæ­¥éª¤ä¹‹ä¹‹é…ç½®è½¯ä»¶æº-APT"><a href="#å…¨æ–°å®‰è£…MySQLæ­¥éª¤ä¹‹ä¹‹é…ç½®è½¯ä»¶æº-APT" class="headerlink" title="å…¨æ–°å®‰è£…MySQLæ­¥éª¤ä¹‹ä¹‹é…ç½®è½¯ä»¶æº(APT)"></a>å…¨æ–°å®‰è£…MySQLæ­¥éª¤ä¹‹ä¹‹é…ç½®è½¯ä»¶æº(APT)</h1><p>å‚è€ƒï¼š</p><p><a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#apt-repo-fresh-install">Steps for a Fresh Installation of MySQL</a></p><p>è¿™é‡Œå¯¼å…¥ç›¸å…³æºçš„ä¿¡æ¯æ˜¯ç”¨debåŒ…ï¼Œä¹Ÿå¯ä»¥è‡ªå·±æ‰‹åŠ¨ç¼–è¾‘å¯¹åº”çš„æºæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://repo.mysql.com//mysql-apt-config_0.8.10-1_all.deb</span><br></pre></td></tr></table></figure><p>ç„¶åå®‰è£…å¯¹åº”çš„debåŒ…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -i mysql-apt-config_0.8.10-1_all.deb</span><br></pre></td></tr></table></figure><p>æ¥ç€ä¼šè¿›å…¥ç›¸å…³çš„è®¾ç½®</p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/mysql-apt-config1.png"></p><p>å› ä¸ºæœ¬æ¬¡é…ç½®çš„ç¯å¢ƒæ˜¯debian stretchï¼Œæ‰€ä»¥é€‰æ‹©debian stretch</p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/mysql-apt-config2.png"></p><p>ç„¶åé»˜è®¤okï¼Œç„¶åå°±å®Œæˆäº†aptæºçš„è®¾ç½®</p><p>æ¥ç€å°±æ˜¯å¸¸è§„æ›´æ–°æº</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure><p>é‡æ–°é…ç½®mysql-apt-config</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg-reconfigure mysql-apt-config</span><br></pre></td></tr></table></figure><h1 id="å…¨æ–°å®‰è£…MySQLæ­¥éª¤ä¹‹ä¹‹å®‰è£…MySQL-APT"><a href="#å…¨æ–°å®‰è£…MySQLæ­¥éª¤ä¹‹ä¹‹å®‰è£…MySQL-APT" class="headerlink" title="å…¨æ–°å®‰è£…MySQLæ­¥éª¤ä¹‹ä¹‹å®‰è£…MySQL(APT)"></a>å…¨æ–°å®‰è£…MySQLæ­¥éª¤ä¹‹ä¹‹å®‰è£…MySQL(APT)</h1><p>é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£…MySQL,è¿™å°†å®‰è£…MySQLæœåŠ¡å™¨çš„åŒ…ï¼Œä»¥åŠå®¢æˆ·ç«¯å’Œæ•°æ®åº“å…¬å…±æ–‡ä»¶çš„åŒ…ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install mysql-server</span><br></pre></td></tr></table></figure><p><em>ç„¶åæ®è¯´å®‰è£…æ–°ç‰ˆMySQL(8.0)æ²¡æœ‰å‡ºç°è®¾ç½®rootçš„æç¤ºæ¡†ï¼Œç¡®å®ï¼Œè¿™æ¬¡å®‰è£…æˆ‘ä¹Ÿæ²¡æœ‰å‡ºç°ï¼Œé‚£ä¹ˆå°±å®‰è£…åå†é€šè¿‡å‘½ä»¤è¡Œè®¾ç½®</em></p><p>å¯é€‰å®‰è£…å›¾å½¢åŒ–ç®¡ç†å·¥å…·workbench</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install mysql-workbench </span><br></pre></td></tr></table></figure><h1 id="å®Œæˆä¸Šä¸€æ­¥æœªå®Œæˆçš„å·¥ä½œâ€”-è®¾ç½®rootå¯†ç "><a href="#å®Œæˆä¸Šä¸€æ­¥æœªå®Œæˆçš„å·¥ä½œâ€”-è®¾ç½®rootå¯†ç " class="headerlink" title="å®Œæˆä¸Šä¸€æ­¥æœªå®Œæˆçš„å·¥ä½œâ€”-è®¾ç½®rootå¯†ç "></a>å®Œæˆä¸Šä¸€æ­¥æœªå®Œæˆçš„å·¥ä½œâ€”-è®¾ç½®rootå¯†ç </h1><p>å‚è€ƒï¼š</p><p><a href="https://bbs.deepin.org/forum.php?mod=viewthread&amp;tid=168685&amp;highlight=mysql">deepin15.7å®‰è£…mysqlæ— è¾“å…¥å¯†ç æç¤ºï¼Œå¯¼è‡´å®‰è£…åæ— æ³•ä½¿ç”¨mysql</a></p><p>ç™»å½•Mysql</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mysql -uroot -p</span><br></pre></td></tr></table></figure><p>è¾“å…¥ç³»ç»Ÿå¯†ç å›è½¦</p><p>ç„¶åè¾“å…¥ï¼Œæ³¨æ„è¿˜æœ‰<code>;</code>å·</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use sql;</span><br></pre></td></tr></table></figure><p>å›è½¦ï¼Œæ¥ç€è¾“å…¥ä¸‹é¢çš„å‘½ä»¤,123456æ˜¯å°†è¦è®¾ç½®çš„å¯†ç ï¼Œç„¶åå¯ä»¥è‡ªå·±æ›´æ”¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update user set authentication_string=password(&#x27;123456&#x27;),plugin=&#x27;mysql_native_password&#x27; where user=&#x27;root&#x27;;</span><br></pre></td></tr></table></figure><p>å›è½¦ï¼Œæ¥ç€è¾“å…¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><p>å›è½¦ï¼Œå·²ç»è®¾ç½®å¥½äº†å¯†ç ï¼Œè¾“å…¥<code>exit</code>å›è½¦é€€å‡ºå‘½ä»¤è¡Œ</p><h1 id="ä¸çŸ¥é“å¯†ç ç™»å½•MySQL"><a href="#ä¸çŸ¥é“å¯†ç ç™»å½•MySQL" class="headerlink" title="ä¸çŸ¥é“å¯†ç ç™»å½•MySQL"></a>ä¸çŸ¥é“å¯†ç ç™»å½•MySQL</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service mysql stopå›è½¦</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mysqld_safe --skip-grant-tables &amp;å›è½¦</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqlå›è½¦</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> deepin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>kmp</title>
      <link href="/2018/08/15/kmp/"/>
      <url>/2018/08/15/kmp/</url>
      
        <content type="html"><![CDATA[<p><strong>KMPæ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•</strong></p><span id="more"></span><p>æ¨èç½‘ç«™ï¼š</p><p><a href="https://www.cnblogs.com/yjiyjige/p/3263858.html">https://www.cnblogs.com/yjiyjige/p/3263858.html</a> <a href="https://blog.csdn.net/starstar1992/article/details/54913261/">https://blog.csdn.net/starstar1992/article/details/54913261/</a></p><p>è§†é¢‘ï¼š</p><p> <a href="https://is.gd/KMP01">KMPå­—ç¬¦ä¸²åŒ¹é…ç®—æ³•1â€”-kmpå¦‚ä½•è¿ä½œ</a> </p><p><a href="https://is.gd/KMP02">KMPå­—ç¬¦ä¸²åŒ¹é…ç®—æ³•2â€”â€”ä»£ç å®ç°</a></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/KMP1.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/kmp2.png"></p><h1 id="HDU-1711-Number-Sequence"><a href="#HDU-1711-Number-Sequence" class="headerlink" title="HDU - 1711 Number Sequence"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1711">HDU - 1711 Number Sequence</a></h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Judge Status : Accepted Language : C++</span></span><br><span class="line"><span class="comment"> Submit Timeï¼š2018-08-16 16:11:34</span></span><br><span class="line"><span class="comment"> Exe.Time:748MS Exe.Memoryï¼š5.4MB</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1000000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> type;</span><br><span class="line">type text[MAXN]; <span class="comment">//è¾ƒé•¿çš„</span></span><br><span class="line">type pattern[MAXN]; <span class="comment">//è¾ƒçŸ­çš„</span></span><br><span class="line"><span class="keyword">int</span> prefix[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">get_prefix</span><span class="params">(<span class="keyword">int</span> len_pattern)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">-1</span>;</span><br><span class="line">    prefix[<span class="number">0</span>] = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">while</span>(i &lt; len_pattern)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(j == <span class="number">-1</span> || pattern[i] == pattern[j])</span><br><span class="line">        &#123;</span><br><span class="line">            i++;</span><br><span class="line">            j++;</span><br><span class="line">            <span class="keyword">if</span>(pattern[i] != pattern[j]) <span class="comment">//æ­£å¸¸æƒ…å†µ</span></span><br><span class="line">                prefix[i] = j;</span><br><span class="line">            <span class="keyword">else</span> <span class="comment">//ç‰¹æ®Šæƒ…å†µï¼Œè¿™é‡Œå³ä¸ºä¼˜åŒ–ä¹‹å¤„ã€‚è€ƒè™‘ä¸‹AAAB, é˜²æ­¢4ä¸ªAå½¢æˆ012åœ¨åŒ¹é…æ—¶å¤šæ¬¡è¿­ä»£</span></span><br><span class="line">                prefix[i] = prefix[j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            j = prefix[j];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">kmp</span><span class="params">(<span class="keyword">int</span> len_text, <span class="keyword">int</span> len_pattern)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">get_prefix</span>(len_pattern);</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(i &lt; len_text)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (j == <span class="number">-1</span> || text[i] == pattern[j])</span><br><span class="line">        &#123;</span><br><span class="line">            i++;</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            j = prefix[j];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (j == len_pattern)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; i - j + <span class="number">1</span> &lt;&lt; endl;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;-1&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> len_text, len_pattern;</span><br><span class="line">        cin &gt;&gt; len_text &gt;&gt; len_pattern;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len_text; i++)</span><br><span class="line">            cin &gt;&gt; text[i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len_pattern; i++)</span><br><span class="line">            cin &gt;&gt; pattern[i];</span><br><span class="line">        <span class="built_in">kmp</span>(len_text, len_pattern);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="HDU-1358-Periodâ€”-æ±‚å¾ªç¯èŠ‚è¿˜æœ‰æ¬¡æ•°"><a href="#HDU-1358-Periodâ€”-æ±‚å¾ªç¯èŠ‚è¿˜æœ‰æ¬¡æ•°" class="headerlink" title="HDU 1358 Periodâ€”-æ±‚å¾ªç¯èŠ‚è¿˜æœ‰æ¬¡æ•°"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1358">HDU 1358 Periodâ€”-æ±‚å¾ªç¯èŠ‚è¿˜æœ‰æ¬¡æ•°</a></h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å­—ç¬¦ç¼–å·ä»<span class="number">1</span>å¼€å§‹ï¼Œé‚£ä¹ˆ<span class="keyword">if</span>(i%(i-next[i])==<span class="number">0</span>)ï¼Œåˆ™iå‰é¢çš„ä¸²ä¸ºä¸€ä¸ªè½®å›ä¸²ï¼Œå…¶ä¸­è½®å›å­ä¸²å‡ºç°i/(i-next[i])æ¬¡ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Judge Status : Accepted Language : C++</span></span><br><span class="line"><span class="comment"> Submit Timeï¼š2018-08-17 11:42:23</span></span><br><span class="line"><span class="comment"> Exe.Time:171MS Exe.Memoryï¼š6308K</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1000000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">char</span> type;</span><br><span class="line">type pattern[MAXN];</span><br><span class="line"><span class="keyword">int</span> prefix[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">get_prefix</span><span class="params">(<span class="keyword">int</span> len_pattern)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">-1</span>;</span><br><span class="line">    prefix[<span class="number">0</span>] = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">while</span>(i &lt; len_pattern)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(j == <span class="number">-1</span> || pattern[i] == pattern[j])</span><br><span class="line">        &#123;</span><br><span class="line">            i++;</span><br><span class="line">            j++;</span><br><span class="line">            prefix[i] = j;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            j = prefix[j];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> len_pattern)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= len_pattern; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> tmp = i - prefix[i];</span><br><span class="line">        <span class="keyword">if</span>(i % tmp == <span class="number">0</span> &amp;&amp; i / tmp &gt; <span class="number">1</span>)</span><br><span class="line">            cout &lt;&lt; i &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; i / tmp &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">int</span> n, cas = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; n &amp;&amp; n)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; pattern;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Test case #&quot;</span> &lt;&lt; cas++ &lt;&lt; endl;</span><br><span class="line">        <span class="built_in">get_prefix</span>(n);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        for(int i = 1; i &lt;= n; i++)</span></span><br><span class="line"><span class="comment">            cout &lt;&lt; prefix[i] &lt;&lt; &quot; &quot;;</span></span><br><span class="line"><span class="comment">        cout &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="built_in">solve</span>(n);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Test:</span></span><br><span class="line"><span class="comment">3</span></span><br><span class="line"><span class="comment">aaa</span></span><br><span class="line"><span class="comment">12</span></span><br><span class="line"><span class="comment">aabaabaabaab</span></span><br><span class="line"><span class="comment">0</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Output array of prefix(1 &lt;= i &lt;= n):</span></span><br><span class="line"><span class="comment">Test case #1</span></span><br><span class="line"><span class="comment">0 1 2 </span></span><br><span class="line"><span class="comment">Test case #2</span></span><br><span class="line"><span class="comment">0 1 0 1 2 3 4 5 6 7 8 9 </span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> KMP </tag>
            
            <tag> å­—ç¬¦ä¸² </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DP</title>
      <link href="/2018/08/02/DP/"/>
      <url>/2018/08/02/DP/</url>
      
        <content type="html"><![CDATA[<p>åŠ¨æ€è§„åˆ’</p><span id="more"></span><h1 id="å…¥é—¨"><a href="#å…¥é—¨" class="headerlink" title="å…¥é—¨"></a>å…¥é—¨</h1><p>DPå…¥é—¨å‚è€ƒï¼š<a href="https://www.sohu.com/a/153858619_466939">æ¼«ç”»ï¼šä»€ä¹ˆæ˜¯åŠ¨æ€è§„åˆ’ï¼Ÿ</a></p><p>è¿›é˜¶å‚è€ƒï¼š<a href="https://blog.csdn.net/cc_again/article/details/25866971">ã€DPä¸“è¾‘ã€‘ACMåŠ¨æ€è§„åˆ’æ€»ç»“</a></p><p><a href="http://www.cnblogs.com/raichen/p/5772056.html">http://www.cnblogs.com/raichen/p/5772056.html</a></p><p> <strong>åŠ¨æ€è§„åˆ’åŸç†</strong></p><p><strong>1-æœ€ä¼˜å­ç»“æ„</strong></p><p>ç”¨åŠ¨æ€è§„åˆ’æ±‚è§£æœ€ä¼˜åŒ–é—®é¢˜çš„ç¬¬ä¸€æ­¥å°±æ˜¯åˆ»ç”»æœ€ä¼˜è§£çš„ç»“æ„ï¼Œå¦‚æœä¸€ä¸ªé—®é¢˜çš„è§£ç»“æ„åŒ…å«å…¶å­é—®é¢˜çš„æœ€ä¼˜è§£ï¼Œå°±ç§°æ­¤é—®é¢˜å…·æœ‰æœ€ä¼˜å­ç»“æ„æ€§è´¨ã€‚å› æ­¤ï¼ŒæŸä¸ªé—®é¢˜æ˜¯å¦é€‚åˆåº”ç”¨åŠ¨æ€è§„åˆ’ç®—æ³•ï¼Œå®ƒæ˜¯å¦å…·æœ‰æœ€ä¼˜å­ç»“æ„æ€§è´¨æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„çº¿ç´¢ã€‚ä½¿ç”¨åŠ¨æ€è§„åˆ’ç®—æ³•æ—¶ï¼Œç”¨å­é—®é¢˜çš„æœ€ä¼˜è§£æ¥æ„é€ åŸé—®é¢˜çš„æœ€ä¼˜è§£ã€‚å› æ­¤å¿…é¡»è€ƒæŸ¥æœ€ä¼˜è§£ä¸­ç”¨åˆ°çš„æ‰€æœ‰å­é—®é¢˜ã€‚</p><p><strong>2-é‡å å­é—®é¢˜</strong></p><p>åœ¨æ–æ³¢æ‹‰å¥‘æ•°åˆ—ï¼Œå¯ä»¥çœ‹åˆ°å¤§é‡çš„é‡å å­é—®é¢˜ï¼Œæ¯”å¦‚è¯´åœ¨æ±‚fibï¼ˆ6ï¼‰çš„æ—¶å€™ï¼Œfibï¼ˆ2ï¼‰è¢«è°ƒç”¨äº†5æ¬¡ã€‚å¦‚æœä½¿ç”¨é€’å½’ç®—æ³•çš„æ—¶å€™ä¼šåå¤çš„æ±‚è§£ç›¸åŒçš„å­é—®é¢˜ï¼Œä¸åœçš„è°ƒç”¨å‡½æ•°ï¼Œè€Œä¸æ˜¯ç”Ÿæˆæ–°çš„å­é—®é¢˜ã€‚å¦‚æœé€’å½’ç®—æ³•åå¤æ±‚è§£ç›¸åŒçš„å­é—®é¢˜ï¼Œå°±ç§°ä¸ºå…·æœ‰é‡å å­é—®é¢˜ï¼ˆoverlapping subproblemsï¼‰æ€§è´¨ã€‚åœ¨åŠ¨æ€è§„åˆ’ç®—æ³•ä¸­ä½¿ç”¨æ•°ç»„æ¥ä¿å­˜å­é—®é¢˜çš„è§£ï¼Œè¿™æ ·å­é—®é¢˜å¤šæ¬¡æ±‚è§£çš„æ—¶å€™å¯ä»¥ç›´æ¥æŸ¥è¡¨ä¸ç”¨è°ƒç”¨å‡½æ•°é€’å½’ã€‚</p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/20170715205029376.png"></p><p><strong>3-æ— åæ•ˆæ€§</strong></p><p>å°†å„é˜¶æ®µæŒ‰ç…§ä¸€å®šçš„æ¬¡åºæ’åˆ—å¥½ä¹‹åï¼Œå¯¹äºæŸä¸ªç»™å®šçš„é˜¶æ®µçŠ¶æ€ï¼Œå®ƒä»¥å‰å„é˜¶æ®µçš„çŠ¶æ€æ— æ³•ç›´æ¥å½±å“å®ƒæœªæ¥çš„å†³ç­–ï¼Œè€Œåªèƒ½é€šè¿‡å½“å‰çš„è¿™ä¸ªçŠ¶æ€ã€‚æ¢å¥è¯è¯´ï¼Œæ¯ä¸ªçŠ¶æ€éƒ½æ˜¯è¿‡å»å†å²çš„ä¸€ä¸ªå®Œæ•´æ€»ç»“ã€‚è¿™å°±æ˜¯æ— åå‘æ€§ï¼Œåˆç§°ä¸ºæ— åæ•ˆæ€§ã€‚</p><h1 id="æ•°å¡”ç³»åˆ—"><a href="#æ•°å¡”ç³»åˆ—" class="headerlink" title="æ•°å¡”ç³»åˆ—"></a>æ•°å¡”ç³»åˆ—</h1><p>é¦–å…ˆä»€ä¹ˆæ˜¯â€œæ•°å¡”ç±»å‹â€ï¼Ÿä»æŸä¸€ç‚¹è½¬å‘å¦ä¸€ç‚¹æˆ–è€…è¯´æ˜¯ä»æŸä¸€çŠ¶æ€è½¬å‘å¦ä¸€çŠ¶æ€ï¼Œæœ‰å¤šç§é€‰æ‹©æ–¹å¼ï¼ˆæ¯”å¦‚è¿™é‡Œçš„9-&gt;12 , 9-&gt;15ï¼‰ï¼Œä»ä¸­é€‰å–ä¸€æ¡èƒ½äº§ç”Ÿæœ€ä¼˜å€¼çš„è·¯å¾„ã€‚</p><p>å‚è€ƒï¼š</p><p><a href="https://www.cnblogs.com/DiaoCow/archive/2010/04/18/1714859.html">åŠ¨æ€è§„åˆ’â€œæ•°å¡”â€ç±»å‹é¢˜ç›®æ€»ç»“</a></p><h2 id="ç»å…¸æ•°å¡”HDU-2048"><a href="#ç»å…¸æ•°å¡”HDU-2048" class="headerlink" title="ç»å…¸æ•°å¡”HDU[2048]"></a>ç»å…¸æ•°å¡”<a href="http://acm.hdu.edu.cn/showproblem.php?pid=2084">HDU[2048]</a></h2><p>æ•°å¡”é—®é¢˜ ï¼šè¦æ±‚ä»é¡¶å±‚èµ°åˆ°åº•å±‚ï¼Œè‹¥æ¯ä¸€æ­¥åªèƒ½èµ°åˆ°ç›¸é‚»çš„ç»“ç‚¹ï¼Œåˆ™ç»è¿‡çš„ç»“ç‚¹çš„æ•°å­—ä¹‹å’Œæœ€å¤§æ˜¯å¤šå°‘ï¼Ÿ</p><p>æ•°å¡”é—®é¢˜çš„ç»å…¸è§£æ³•æ˜¯ä»åé¢ç®—åˆ°å‰é¢ï¼Œå¦‚æœä»å‰é¢ç®—åˆ°åé¢å¾ˆéº»çƒ¦ï¼Œå› ä¸ºåé¢ä¸€å±‚æœ‰å¾ˆå¤šä¸ªæ•°å­—æ˜¯ç”±å°‘åˆ°å¤šï¼Œå¦‚æœåè¿‡æ¥ç”±å¤šåˆ°å°‘å°±ç®€å•äº†</p><p>åˆ†æï¼šç«™åœ¨ä½ç½®9ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©æ²¿12æ–¹å‘ç§»åŠ¨ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©æ²¿ç€15æ–¹å‘ç§»åŠ¨ï¼Œç°åœ¨æˆ‘ä»¬å‡è®¾â€œå·²ç»æ±‚çš„â€æ²¿12æ–¹å‘çš„æœ€å¤§å€¼xå’Œæ²¿15æ–¹å‘çš„æœ€å¤§å€¼yï¼Œé‚£ä¹ˆç«™åœ¨9çš„æœ€å¤§å€¼å¿…ç„¶æ˜¯ï¼šMax(x,y) + 9ã€‚</p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/æ•°å¡”.png"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Judge Status : Accepted Language : C++</span></span><br><span class="line"><span class="comment"> Submit Timeï¼š2018-08-13 13:05:10</span></span><br><span class="line"><span class="comment"> Exe.Time:171MS Exe.Memoryï¼š1848k</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">111</span>;</span><br><span class="line"><span class="keyword">int</span> Map[MAXN][MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">int</span> test;</span><br><span class="line">    cin &gt;&gt; test;</span><br><span class="line">    <span class="keyword">while</span>(test--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> n;</span><br><span class="line">        cin &gt;&gt; n;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= i; j++)</span><br><span class="line">                cin &gt;&gt; Map[i][j];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">1</span>; i--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= i; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                Map[i][j] = Map[i][j] + <span class="built_in">max</span>(Map[i + <span class="number">1</span>][j], Map[i + <span class="number">1</span>][j + <span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; Map[<span class="number">1</span>][<span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="HDU1176-å…è´¹é¦…é¥¼"><a href="#HDU1176-å…è´¹é¦…é¥¼" class="headerlink" title="HDU1176[å…è´¹é¦…é¥¼]"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1176">HDU1176[å…è´¹é¦…é¥¼]</a></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ç¬¬0ç§’                       5                         ï¼ˆè¿™é‡Œçš„æ•°å­—æŒ‡çš„æ˜¯ç¬¬Nç§’å¯èƒ½åˆ°è¾¾çš„ä½ç½®åæ ‡ï¼‰</span><br><span class="line"></span><br><span class="line">ç¬¬1ç§’                     4 5 6</span><br><span class="line"></span><br><span class="line">ç¬¬2ç§’                   3 4 5 6 7</span><br><span class="line"></span><br><span class="line">ç¬¬3ç§’                 2 3 4 5 6 7 8</span><br><span class="line"></span><br><span class="line">ç¬¬4ç§’               1 2 3 4 5 6 7 8 9</span><br><span class="line"></span><br><span class="line">ç¬¬5ç§’             0 1 2 3 4 5 6 7 8 9 10</span><br><span class="line"></span><br><span class="line">ç¬¬6ç§’             0 1 2 3 4 5 6 7 8 9 10</span><br><span class="line"></span><br><span class="line">ç¬¬7ç§’ .................  </span><br><span class="line"></span><br><span class="line">å¯ä»¥å‘ç°ä»ç¬¬5ç§’å¼€å§‹ä¹‹åå°±éƒ½æ˜¯ 0 1 2 3 4 5 6 7 8 9 10 </span><br></pre></td></tr></table></figure><p>å’Œâ€œæ•°å¡”â€ä¸€æ ·ï¼Œå®ƒä¹Ÿæ˜¯ä»æŸä¸€ç‚¹å‡ºå‘ï¼Œæœ‰å¤šä¸ªé€‰æ‹©çš„é—®é¢˜ï¼ˆå¾€å‰èµ°ä¸€æ­¥ï¼Œå‘†åœ¨åŸåœ°ï¼Œå¾€åèµ°ä¸€æ­¥ï¼‰ä»ä¸­é€‰æ‹©ä¸€æ¡æœ€ä¼˜å€¼è·¯å¾„ï¼ˆè·å¾—é¦…é¥¼æœ€å¤šï¼‰ã€‚è¿˜æ˜¯æŒ‰ç…§â€œæ•°å¡”â€çš„æ€è€ƒæ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å‡è®¾â€œå·²ç»æ±‚å¾—â€ä¸‹ä¸€ä¸ªç«™åœ¨ä½ç½®4è·å¾—çš„æœ€å¤§å€¼xå’Œå‘†åœ¨åŸåœ°è·å¾—çš„æœ€å¤§å€¼yä»¥åŠç«™åœ¨ä½ç½®6è·å¾—çš„æœ€å¤§å€¼z,é‚£ä¹ˆå¯¹äºèµ·å§‹ä½ç½®5è·å¾—æœ€å¤§å€¼å°±æ˜¯Max(x,y,z) ï¼Œå› æ­¤å¯ä»¥å¾—åˆ°çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸º:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dp[t][x] += <span class="built_in">max</span>(<span class="built_in">max</span>(dp[t + <span class="number">1</span>][x - <span class="number">1</span>], dp[t + <span class="number">1</span>][x + <span class="number">1</span>]),dp[t + <span class="number">1</span>][x]);</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Judge Status : Accepted Language : C++</span></span><br><span class="line"><span class="comment"> Submit Timeï¼š2018-08-13 17:53:03</span></span><br><span class="line"><span class="comment"> Exe.Time:265MS Exe.Memoryï¼š10012k</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">110000</span>;</span><br><span class="line"><span class="keyword">int</span> dp[MAXN][<span class="number">20</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, Max, t, x;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; n &amp;&amp; n)</span><br><span class="line">    &#123;</span><br><span class="line">        Max = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(dp));</span><br><span class="line">        <span class="keyword">while</span>(n--)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; x &gt;&gt; t;</span><br><span class="line">            <span class="keyword">if</span>(t &gt; Max) <span class="comment">//è®°å½•æœ€å¤§æ—¶é—´ï¼Œæ—¶é—´æ˜¯çºµåæ ‡ï¼Œè½åœ°ç‚¹æ˜¯æ¨ªåæ ‡</span></span><br><span class="line">                Max = t;</span><br><span class="line">            dp[t][x]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(t = Max - <span class="number">1</span>; t &gt;= <span class="number">0</span>; t--)</span><br><span class="line">        &#123;</span><br><span class="line">            dp[t][<span class="number">0</span>] += <span class="built_in">max</span>(dp[t+<span class="number">1</span>][<span class="number">0</span>],dp[t+<span class="number">1</span>][<span class="number">1</span>]);<span class="comment">//æ¯è¡Œçš„ç¬¬ä¸€ä¸ªåªæœ‰äºŒç§é€‰æ‹©</span></span><br><span class="line">            <span class="keyword">for</span>(x = <span class="number">1</span>; x &lt; <span class="number">10</span>; x++)</span><br><span class="line">            &#123;</span><br><span class="line">                dp[t][x] += <span class="built_in">max</span>( <span class="built_in">max</span>(dp[t + <span class="number">1</span>][x - <span class="number">1</span>],dp[t + <span class="number">1</span>][x]),</span><br><span class="line">                                    dp[t + <span class="number">1</span>][x + <span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">            dp[t][<span class="number">10</span>] += <span class="built_in">max</span>(dp[t + <span class="number">1</span>][<span class="number">9</span>], dp[t + <span class="number">1</span>][<span class="number">10</span>]); <span class="comment">//æ¯è¡Œçš„æœ€åä¸€ä¸ªåªæœ‰äºŒç§é€‰æ‹©</span></span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; dp[<span class="number">0</span>][<span class="number">5</span>] &lt;&lt; endl;<span class="comment">//ä¸æ˜¯dp[1][5]ï¼Œåˆšå¼€å§‹åƒçš„ä¸ä¸€å®šåœ¨5ï¼Œæœ‰å¯èƒ½åœ¨4,6</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="poj1088-æ»‘é›ª"><a href="#poj1088-æ»‘é›ª" class="headerlink" title="poj1088(æ»‘é›ª)"></a><a href="http://poj.org/problem?id=1088">poj1088(æ»‘é›ª)</a></h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ä¾ç„¶å’Œâ€œæ•°å¡”â€ä¸€æ ·ï¼Œä»æŸä¸€ç‚¹å‡ºå‘ï¼Œé¢ä¸´å¤šä¸ªé€‰æ‹©ï¼ˆå¾€ä¸Šï¼Œå¾€å·¦ï¼Œå¾€ä¸‹ï¼Œå¾€å³ï¼‰ä»ä¸­é€‰æ‹©ä¸€æ¡æœ€ä¼˜å€¼è·¯å¾„ï¼ˆæ»‘é›ªè·ç¦»æœ€é•¿ï¼‰</span><br><span class="line">è‹¥å¯¹Aç‚¹æ±‚ï¼Œå¾ˆæ˜¾ç„¶å®ƒçš„æœ€å¤§å€¼å°±ä¸ºï¼š <span class="built_in">Max</span>(ä¸Šï¼Œå³ï¼Œä¸‹ï¼Œå·¦) + <span class="number">1</span></span><br><span class="line">å› æ­¤å¯¹äºä»»æ„ä½ç½®[i,j], å…¶çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸ºï¼šm[i][j] = <span class="built_in">Max</span>(m[i<span class="number">-1</span>][j] , m[i][j+<span class="number">1</span>] , m[i+<span class="number">1</span>][j] , m[i][j<span class="number">-1</span>]) + <span class="number">1</span></span><br><span class="line">ç”±äºè¿™é“é¢˜å¾ˆéš¾ç”»å‡ºå®ƒçš„è·¯å¾„å›¾ï¼ˆèµ·ç‚¹å’Œç»ˆç‚¹éƒ½ä¸çŸ¥é“ï¼‰å› æ­¤å¾ˆéš¾ç”¨â€œåˆ—è¡¨æ ¼â€çš„æ–¹å¼è‡ªåº•å‘ä¸Šæ±‚è§£ã€‚</span><br><span class="line"></span><br><span class="line">è§£é¢˜æ€è·¯ï¼šè®¾ä¸€ä¸è¾“å…¥æ•°ç»„å¯¹åº”çš„çŠ¶æ€æ•°ç»„ dpï¼Œå…¶å€¼ä»£è¡¨è¾“å…¥æ•°ç»„ä¸­æ­¤ç‚¹çš„æœ€é•¿æ»‘é›ªè·¯å¾„ã€‚ä½¿ç”¨å¹¿æœå¡«è¡¨ï¼Œæœ€åéå†è¾“å‡ºæœ€å¤§å€¼å³å¯    </span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Judge Status : Accepted Language : C++</span></span><br><span class="line"><span class="comment"> Submit Timeï¼š2018-08-13 23:04:42</span></span><br><span class="line"><span class="comment"> Exe.Time:79MS Exe.Memoryï¼š320k</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">int</span> row, col; <span class="comment">//äºŒç»´æ•°ç»„çš„è¡Œä¸åˆ—</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX = <span class="number">1e2</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> Map[MAX][MAX];</span><br><span class="line"><span class="keyword">int</span> dp[MAX][MAX]; <span class="comment">// è®°å½•æ¯ä¸€ä¸ªç‚¹çš„æœ€å¤§æ»‘é›ªé•¿åº¦</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (i &gt;= <span class="number">1</span> &amp;&amp; j &gt;= <span class="number">1</span> &amp;&amp; i &lt;= row &amp;&amp; j &lt;= col);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">BFS</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> Max = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ¤æ–­å³è¾¹èƒ½ä¸èƒ½èµ°ï¼ŒåŒæ—¶è¦æ»¡è¶³å³è¾¹çš„æ•°å°</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">check</span>(i, j + <span class="number">1</span>) &amp;&amp; Map[i][j] &gt; Map[i][j + <span class="number">1</span>])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(dp[i][j + <span class="number">1</span>]) <span class="comment">//å¦‚æœä¹‹å‰èµ°è¿‡ï¼Œé‚£å°±æ¯”è¾ƒä¸‹æ˜¯ç°åœ¨çš„çº¿è·¯çš„å€¼è¿˜æ˜¯ä¹‹å‰çš„å¤§</span></span><br><span class="line">           Max = Max &gt; dp[i][j + <span class="number">1</span>] ? Max : dp[i][j + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">//æ²¡æœ‰èµ°è¿‡çš„è¯ï¼Œé‚£å°±éœ€è¦BFSä¸€é</span></span><br><span class="line">        &#123;</span><br><span class="line">            Max = Max &gt; <span class="built_in">BFS</span>(i, j + <span class="number">1</span>) ? Max : <span class="built_in">BFS</span>(i, j + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘ä¸‹å¹¿æœ</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">check</span>(i + <span class="number">1</span>, j) &amp;&amp; Map[i][j] &gt; Map[i + <span class="number">1</span>][j])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (dp[i + <span class="number">1</span>][j])</span><br><span class="line">        &#123;</span><br><span class="line">            Max = Max &gt; dp[i + <span class="number">1</span>][j] ? Max : dp[i + <span class="number">1</span>][j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            Max = Max &gt; <span class="built_in">BFS</span>(i + <span class="number">1</span>, j) ? Max : <span class="built_in">BFS</span>(i + <span class="number">1</span>, j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘å·¦å¹¿æœ</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">check</span>(i, j - <span class="number">1</span>) &amp;&amp; Map[i][j] &gt; Map[i][j - <span class="number">1</span>])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (dp[i][j - <span class="number">1</span>])</span><br><span class="line">        &#123;</span><br><span class="line">            Max = Max &gt; dp[i][j - <span class="number">1</span>] ? Max : dp[i][j - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            Max = Max &gt; <span class="built_in">BFS</span>(i, j - <span class="number">1</span>) ? Max : <span class="built_in">BFS</span>(i, j - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘ä¸Šå¹¿æœ</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">check</span>(i - <span class="number">1</span>, j) &amp;&amp; Map[i][j] &gt; Map[i - <span class="number">1</span>][j])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (dp[i - <span class="number">1</span>][j])</span><br><span class="line">        &#123;</span><br><span class="line">            Max = Max &gt; dp[i - <span class="number">1</span>][j] ? Max : dp[i - <span class="number">1</span>][j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            Max = Max &gt; <span class="built_in">BFS</span>(i - <span class="number">1</span>, j) ? Max : <span class="built_in">BFS</span>(i - <span class="number">1</span>, j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚ä¸Šä¸‹å·¦å³å‡ä¸é€šï¼Œè¯¥ç‚¹è·¯å¾„å€¼ä¸º 1ï¼›</span></span><br><span class="line">    <span class="comment">// å¦åˆ™å–æœ€å¤§è·¯å¾„å€¼åŠ  1</span></span><br><span class="line">    <span class="comment">//å°†ç»“æœè®°å½•åœ¨dpæ•°ç»„ä¸­(è®°å¿†åŒ–æœç´¢çš„é‡ç‚¹)</span></span><br><span class="line">    <span class="keyword">if</span> (Max == <span class="number">0</span>)</span><br><span class="line">        dp[i][j] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        dp[i][j] = <span class="number">1</span> + Max;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dp[i][j];</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">while</span> (cin &gt;&gt; row &gt;&gt; col)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(dp));</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= row; i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= col; j++)</span><br><span class="line">                cin &gt;&gt; Map[i][j];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= row; i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= col; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">int</span> tmp = <span class="built_in">BFS</span>(i, j);</span><br><span class="line">                <span class="keyword">if</span>(tmp &gt; ans)</span><br><span class="line">                    ans = tmp;</span><br><span class="line">            &#125;</span><br><span class="line">        cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ•°ä½DP"><a href="#æ•°ä½DP" class="headerlink" title="æ•°ä½DP"></a>æ•°ä½DP</h1><p>æ•°ä½dpæ˜¯ä¸€ç§è®¡æ•°ç”¨çš„dpï¼Œä¸€èˆ¬å°±æ˜¯è¦ç»Ÿè®¡ä¸€ä¸ªåŒºé—´å†…æ»¡è¶³ä¸€äº›æ¡ä»¶æ•°çš„ä¸ªæ•°ã€‚</p><p>å‚è€ƒï¼š</p><p><a href="https://blog.csdn.net/wust_zzwh/article/details/52100392">æ•°ä½dpæ€»ç»“ ä¹‹ ä»å…¥é—¨åˆ°æ¨¡æ¿</a></p><p><a href="https://www.bilibili.com/video/av27156563?from=search&amp;seid=3730573967901251511">æ•°ä½dpè®°å½•â€”â€”bili</a></p><h2 id="HDU3555-Bomb-æ¨¡æ¿é¢˜"><a href="#HDU3555-Bomb-æ¨¡æ¿é¢˜" class="headerlink" title="HDU3555( Bomb )æ¨¡æ¿é¢˜"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=3555">HDU3555( Bomb )æ¨¡æ¿é¢˜</a></h2><p>é¢˜ç›®å¤§æ„ï¼šåœ¨[0,n]çš„èŒƒå›´å†…å­˜åœ¨å¤šå°‘ä¸ªæ•°å­—å«æœ‰49</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Judge Status : AcceptedLanguage : C++  </span></span><br><span class="line"><span class="comment">Submit Timeï¼š2018-08-07 15:54:05</span></span><br><span class="line"><span class="comment">Exe.Time:93MS Exe.Memoryï¼š1796k</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">int</span> digit[<span class="number">20</span>]; <span class="comment">//å­˜ä½æ•°ï¼Œæœ€é•¿20ä½</span></span><br><span class="line">ll dp[<span class="number">20</span>][<span class="number">2</span>]; <span class="comment">//dp[i][j]è¡¨ç¤ºå½“å‰ç¬¬iä½ï¼Œå‰ä¸€ä½çš„æ•°å­—æ˜¯å¦æ˜¯j</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//len:ç¬¬lenä¸ªæ•°ä½ï¼Œif_num:åˆ¤æ–­æŸä¸€ä½æ˜¯å¦åˆ°åˆ°è¾¾çº¦æŸæ•°ä½, limit:ä¸Šä¸€ä½æ˜¯å¦æœ‰é™åˆ¶</span></span><br><span class="line"><span class="function">ll <span class="title">dfs</span><span class="params">(ll len, <span class="keyword">bool</span> if_num, <span class="keyword">bool</span> limit)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//é€’å½’è¾¹ç•Œï¼Œæ—¢ç„¶æ˜¯æŒ‰ä½æšä¸¾ï¼Œæœ€ä½ä½æ˜¯0ï¼Œé‚£ä¹ˆlen == 0è¯´æ˜è¿™ä¸ªæ•°æˆ‘æšä¸¾å®Œäº†</span></span><br><span class="line">    <span class="keyword">if</span>(len == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//ä¸¤ä¸ªçº¦æŸæ¡ä»¶,limité˜²æ­¢å‰é¢çš„dp[len][if_num]è®©æ¡ä»¶ä¸ºçœŸï¼Œæ¯”å¦‚dp[1][1]æ—¶ï¼Œå½“ç™¾ä½æœ‰é™åˆ¶ï¼Œ</span></span><br><span class="line">    <span class="comment">// è€Œdp[1][1]ä¹‹å‰æœ‰å€¼äº†ï¼Œå¦‚æœæ²¡æœ‰limitï¼Œå°±ä¼šå¤šç®—äº†ã€‚</span></span><br><span class="line">    <span class="keyword">if</span>(!limit &amp;&amp; dp[len][if_num]) <span class="comment">//ä¸ç”¨å»ç»Ÿè®¡49</span></span><br><span class="line">        <span class="keyword">return</span> dp[len][if_num];</span><br><span class="line">    ll cnt = <span class="number">0</span>, up = (limit ? digit[len] : <span class="number">9</span>); <span class="comment">//up:å¦‚æœåˆ°äº†é™åˆ¶é‚£ä¸ªæ•°ä½ï¼Œé‚£ä¹ˆå°±é™åˆ¶ï¼Œå¦åˆ™å¾ªç¯0-9</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= up; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(if_num &amp;&amp; i == <span class="number">9</span>)</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        cnt += <span class="built_in">dfs</span>(len - <span class="number">1</span>, i == <span class="number">4</span>, limit &amp;&amp; i == up);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!limit) <span class="comment">//å¦‚æœæ²¡æœ‰çº¦æŸï¼Œè¯´æ˜æ˜¯å®Œæ•´è®¡ç®—çš„ï¼Œé‚£ä¹ˆå°±è®°å¿†ä¸‹ï¼Œä¸‹æ¬¡ç›´æ¥å°±å¯ä»¥è¿”å›å€¼äº†</span></span><br><span class="line">        dp[len][if_num] = cnt;</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">solve</span><span class="params">(ll num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(num) <span class="comment">//å¾—åˆ°ä½æ•°ï¼Œå­˜åˆ°ké‡Œé¢</span></span><br><span class="line">    &#123;</span><br><span class="line">        digit[++k] = num % <span class="number">10</span>;</span><br><span class="line">        num /= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dfs</span>(k, <span class="literal">false</span>, <span class="literal">true</span>); <span class="comment">//ä»æœ€é«˜ä½å¼€å§‹æšä¸¾</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    ll n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">while</span>(n--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(dp));</span><br><span class="line">        ll num;</span><br><span class="line">        cin &gt;&gt; num;</span><br><span class="line">        <span class="comment">//solve:ç®—çš„æ˜¯æ²¡æœ‰49çš„ä¸ªæ•°</span></span><br><span class="line">        cout &lt;&lt; num + <span class="number">1</span> - <span class="built_in">solve</span>(num) &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç¨å¾®ä¿®æ”¹HDU2089-ä¸è¦62"><a href="#ç¨å¾®ä¿®æ”¹HDU2089-ä¸è¦62" class="headerlink" title="ç¨å¾®ä¿®æ”¹HDU2089(ä¸è¦62)"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2089">ç¨å¾®ä¿®æ”¹HDU2089(ä¸è¦62)</a></h2><p>åœ¨HDU3555åŸºç¡€ä¸Šé¢å¤šäº†ä¸€ä¸ªåŒºé—´ï¼Œå¼€å§‹çš„æ—¶å€™æ˜¯ç»™å‡ºæœ€å¤§å€¼mï¼ŒåŒºé—´æ˜¯1ï½mï¼Œç°åœ¨æ˜¯åŒºé—´æ˜¯nï½mï¼Œé‚£ä¹ˆåªè¦solve(m) - solve(n - 1)å°±è¡Œäº†</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Judge Status : Accepted Language : C++</span></span><br><span class="line"><span class="comment"> Submit Timeï¼š2018-08-07 18:22:21</span></span><br><span class="line"><span class="comment"> Exe.Time:15MS Exe.Memoryï¼š1792k</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">///æ ‡æœ‰æ”¹çš„æ³¨é‡Šæ˜¯è¯´è¿™é‡Œç›¸å½“äº3555é‚£é“é¢˜å˜äº†</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> digit[<span class="number">20</span>];</span><br><span class="line">ll dp[<span class="number">20</span>][<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">dfs</span><span class="params">(ll len, <span class="keyword">bool</span> if_num, <span class="keyword">bool</span> limit)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(len == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(!limit &amp;&amp; dp[len][if_num]) </span><br><span class="line">        <span class="keyword">return</span> dp[len][if_num];</span><br><span class="line">    ll cnt = <span class="number">0</span>, up = (limit ? digit[len] : <span class="number">9</span>); </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= up; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(if_num &amp;&amp; i == <span class="number">2</span>) <span class="comment">//æ”¹</span></span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span>(if_num ==<span class="number">4</span> || i == <span class="number">4</span>) <span class="comment">//æ”¹</span></span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        cnt += <span class="built_in">dfs</span>(len - <span class="number">1</span>, i == <span class="number">6</span>, limit &amp;&amp; i == up); <span class="comment">//æ”¹</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!limit) </span><br><span class="line">        dp[len][if_num] = cnt;</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">solve</span><span class="params">(ll num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(num) </span><br><span class="line">    &#123;</span><br><span class="line">        digit[++k] = num % <span class="number">10</span>;</span><br><span class="line">        num /= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dfs</span>(k, <span class="literal">false</span>, <span class="literal">true</span>); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    ll n, m;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; n &gt;&gt; m &amp;&amp; n &amp;&amp; m)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(dp));</span><br><span class="line">        cout &lt;&lt; <span class="built_in">solve</span>(m) - <span class="built_in">solve</span>(n - <span class="number">1</span>) &lt;&lt; endl; <span class="comment">//æ”¹</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç‰›å®¢â€”åŒºé—´å†…æ•°å­—å«æœ‰6çš„ä¸ªæ•°"><a href="#ç‰›å®¢â€”åŒºé—´å†…æ•°å­—å«æœ‰6çš„ä¸ªæ•°" class="headerlink" title="ç‰›å®¢â€”åŒºé—´å†…æ•°å­—å«æœ‰6çš„ä¸ªæ•°"></a><a href="https://ac.nowcoder.com/acm/contest/329/G">ç‰›å®¢â€”åŒºé—´å†…æ•°å­—å«æœ‰6çš„ä¸ªæ•°</a></h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Submit Time 2019-01-27 23:21:50</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">int</span> digit[<span class="number">20</span>];</span><br><span class="line">ll dp[<span class="number">20</span>][<span class="number">2</span>];</span><br><span class="line"> </span><br><span class="line"><span class="function">ll <span class="title">dfs</span><span class="params">(ll len, <span class="keyword">bool</span> if_num, <span class="keyword">bool</span> limit)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(len == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> if_num;</span><br><span class="line">    <span class="keyword">if</span>(!limit &amp;&amp; dp[len][if_num])</span><br><span class="line">        <span class="keyword">return</span> dp[len][if_num];</span><br><span class="line">    ll cnt = <span class="number">0</span>, up = (limit ? digit[len] : <span class="number">9</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= up; i++)</span><br><span class="line">        cnt += <span class="built_in">dfs</span>(len - <span class="number">1</span>, if_num || i == <span class="number">6</span>, limit &amp;&amp;i == digit[len]);</span><br><span class="line">    <span class="keyword">if</span>(!limit)</span><br><span class="line">        dp[len][if_num] = cnt;</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function">ll <span class="title">solve</span><span class="params">(ll num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(num)</span><br><span class="line">    &#123;</span><br><span class="line">        digit[++k] = num % <span class="number">10</span>;</span><br><span class="line">        num /= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dfs</span>(k, <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    ll n, m;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; n &gt;&gt; m)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(dp));</span><br><span class="line">        cout &lt;&lt; <span class="built_in">solve</span>(m) - <span class="built_in">solve</span>(n - <span class="number">1</span>) &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="LCISâ€”æœ€é•¿ä¸Šå‡å…¬å…±å­åºåˆ—"><a href="#LCISâ€”æœ€é•¿ä¸Šå‡å…¬å…±å­åºåˆ—" class="headerlink" title="LCISâ€”æœ€é•¿ä¸Šå‡å…¬å…±å­åºåˆ—"></a>LCISâ€”æœ€é•¿ä¸Šå‡å…¬å…±å­åºåˆ—</h1><p>è®²è§£ï¼š</p><p><a href="https://www.cnblogs.com/wd-one/p/4470844.html">zoj2432 hdoj1423 æœ€é•¿å…¬å…±ä¸Šå‡å­åºåˆ—ï¼ˆLCISï¼‰</a></p><p><a href="https://www.cnblogs.com/WArobot/p/7479431.html">LCIS æœ€é•¿å…¬å…±ä¸Šå‡å­åºåˆ—é—®é¢˜DPç®—æ³•åŠä¼˜åŒ–</a></p><h2 id="æ¨¡æ¿é¢˜HDU1423-Greatest-Common-Increasing-Subsequence"><a href="#æ¨¡æ¿é¢˜HDU1423-Greatest-Common-Increasing-Subsequence" class="headerlink" title="æ¨¡æ¿é¢˜HDU1423(Greatest Common Increasing Subsequence)"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1423">æ¨¡æ¿é¢˜HDU1423(Greatest Common Increasing Subsequence)</a></h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Judge Status : Accepted Language : C++</span></span><br><span class="line"><span class="comment"> Submit Timeï¼š2018-09-07 21:30:12</span></span><br><span class="line"><span class="comment"> Exe.Time:15MS Exe.Memoryï¼š5712KB</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1E3</span>;</span><br><span class="line"><span class="keyword">int</span> s1[MAXN], s2[MAXN];</span><br><span class="line"><span class="keyword">int</span> len1, len2;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">LCIS</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> dp[MAXN][MAXN]  = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len1; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> maxdp = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; len2; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(s1[i] != s2[j])</span><br><span class="line">                dp[i + <span class="number">1</span>][j] = dp[i][j];</span><br><span class="line">            <span class="keyword">if</span>(s1[i] &gt; s2[j] &amp;&amp; maxdp &lt; dp[i + <span class="number">1</span>][j])</span><br><span class="line">                maxdp = dp[i + <span class="number">1</span>][j];</span><br><span class="line">            <span class="keyword">if</span>(s1[i] == s2[j])</span><br><span class="line">                dp[i + <span class="number">1</span>][j] = maxdp + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(dp[i + <span class="number">1</span>][j] &gt; ans)</span><br><span class="line">                ans = dp[i + <span class="number">1</span>][j];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">int</span> test;</span><br><span class="line">    cin &gt;&gt; test;</span><br><span class="line">    <span class="keyword">while</span>(test--)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; len1;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len1; i++)</span><br><span class="line">            cin &gt;&gt; s1[i];</span><br><span class="line">        cin &gt;&gt; len2;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len2; i++)</span><br><span class="line">            cin &gt;&gt; s2[i];</span><br><span class="line">        cout &lt;&lt; <span class="built_in">LCIS</span>() &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">if</span>(test)</span><br><span class="line">            cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="LISâ€”æœ€é•¿é€’å¢å­åºåˆ—"><a href="#LISâ€”æœ€é•¿é€’å¢å­åºåˆ—" class="headerlink" title="LISâ€”æœ€é•¿é€’å¢å­åºåˆ—"></a>LISâ€”<strong>æœ€é•¿é€’å¢å­åºåˆ—</strong></h1><p>é—®é¢˜æè¿°ï¼šæ‰¾å‡ºä¸€ä¸ªnä¸ªæ•°çš„åºåˆ—çš„æœ€é•¿å•è°ƒé€’å¢å­åºåˆ—ï¼š æ¯”å¦‚<code>A = &#123;5,6,7,1,2,8&#125;</code> çš„LISæ˜¯<code>5,6,7,8</code></p><h2 id="O-n-2-çš„å¤æ‚åº¦"><a href="#O-n-2-çš„å¤æ‚åº¦" class="headerlink" title="O(n^2)çš„å¤æ‚åº¦"></a><code>O(n^2)</code>çš„å¤æ‚åº¦</h2><p><strong>æœ€ä¼˜å­ç»“æ„</strong></p><p> å‡è®¾<code>LIS[i]</code> æ˜¯ä»¥<code>arr[i]</code>ä¸ºæœ«å°¾çš„LISåºåˆ—çš„é•¿åº¦ã€‚åˆ™ï¼š</p><p> <code>LIS[i] = &#123;1+Max(LIS(j))&#125;</code>; <code>j&lt;i, arr[j]&lt;arr[i]</code>; </p><p><code>LIS[i] = 1, j&lt;i</code>, ä½†æ˜¯ä¸å­˜åœ¨<code>arr[j]&lt;arr[i]</code>; </p><p>æ‰€ä»¥é—®é¢˜è½¬åŒ–ä¸ºè®¡ç®—<code>Max(LIS(j))</code> <code>0&lt;i&lt;n</code></p><p><strong>é‡å çš„å­é—®é¢˜</strong></p><p>ä»¥<code>arr[i] (1&lt;= i &lt;= n)</code>æ¯ä¸ªå…ƒç´ ç»“å°¾çš„LISåºåˆ—çš„å€¼æ˜¯ é‡å çš„å­é—®é¢˜ã€‚ </p><p>æ‰€ä»¥å¡«è¡¨æ—¶å€™å°±æ˜¯å»ºç«‹ä¸€ä¸ªæ•°ç»„<code>DP[i]</code>, è®°å½•ä»¥<code>arr[i]</code>ä¸ºåºåˆ—æœ«å°¾çš„LISé•¿åº¦ã€‚</p><p><strong>DP[i]æ€ä¹ˆè®¡ç®—ï¼Ÿ</strong></p><p>éå†æ‰€æœ‰<code>j&lt;i</code>çš„å…ƒç´ ï¼Œæ£€æŸ¥æ˜¯å¦<code>DP[j]+1&gt;DP[i] &amp;&amp; arr[j]&lt;arry[i]</code> è‹¥æ˜¯ï¼Œåˆ™å¯ä»¥æ›´æ–°<code>DP[i]</code></p><p><strong>å›¾ç¤º</strong></p><ul><li>arr[1]åˆ°arr[9]å­˜å€¼</li><li>LISä»£è¡¨æ­¤å…ƒç´ åˆ°arr[1]çš„LIS</li><li>LISæ¥æºä»£è¡¨æ˜¯ä»å“ªä¸ªç»§æ‰¿è€Œæ¥ï¼Œå€¼ä¸ºæ•°ç»„ä¸‹æ ‡</li></ul><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/LIS.png"></p><p><strong>HDU1257(æœ€å°‘æ‹¦æˆªç³»ç»Ÿ)æ¨¡æ¿é¢˜</strong></p><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1257">http://acm.hdu.edu.cn/showproblem.php?pid=1257</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Judge Status : Accepted Language : C++</span></span><br><span class="line"><span class="comment"> Submit Timeï¼š2018-08-03 11:16:58</span></span><br><span class="line"><span class="comment"> Exe.Time:62MS Exe.Memoryï¼š1844k</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">LIS</span><span class="params">(<span class="keyword">int</span> arr[], <span class="keyword">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">int</span> dp_len = len + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> *dp = <span class="keyword">new</span> <span class="keyword">int</span>[dp_len];</span><br><span class="line">    <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(dp[<span class="number">0</span>]) * dp_len); <span class="comment">//åˆ›å»ºåŠ¨æ€æ•°ç»„å¹¶ä¸”åˆå§‹åŒ–</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">// int * dp = new int[dp_len]();</span></span><br><span class="line"></span><br><span class="line">    arr[<span class="number">0</span>] = <span class="number">-1e9</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= len; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[i] &gt; arr[j] &amp;&amp; dp[i] &lt; dp[j] + <span class="number">1</span>)</span><br><span class="line">                dp[i] = dp[j] + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> MAX = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= len; i++)  <span class="comment">//æ‰¾å‡ºdpæ•°ç»„ä¸­æœ€å¤§çš„é‚£ä¸ªå€¼</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(dp[i] &gt; MAX)</span><br><span class="line">            MAX = dp[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">delete</span>[] dp;</span><br><span class="line">    <span class="keyword">return</span> MAX;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> *arr = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">10</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            cin &gt;&gt; arr[i];</span><br><span class="line">        cout &lt;&lt; <span class="built_in">LIS</span>(arr, n) &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š</p><p><a href="https://segmentfault.com/a/1190000002641054">ç®—æ³•è®¾è®¡ - LCS æœ€é•¿å…¬å…±å­åºåˆ—&amp;&amp;æœ€é•¿å…¬å…±å­ä¸² &amp;&amp;LIS æœ€é•¿é€’å¢å­åºåˆ—</a></p><p><a href="https://blog.csdn.net/u011268787/article/details/78675388">ã€ç®—æ³•çŸ¥è¯†æ€»ç»“ã€‘æœ€é•¿é€’å¢å­åºåˆ—</a></p><p><a href="https://www.bilibili.com/video/av15439338?from=search&amp;seid=17716055664494305815">ã€ç®—æ³•è®¾è®¡æŒ‡å—ã€‘æœ€é•¿é€’å¢å­åºåˆ—(å¾®åš/å¾®ä¿¡å…¬ä¼—å·:@ç®—æ³•æ—¶ç©ºâ€”bilibili)</a></p><h2 id="nlgnçš„å¤æ‚åº¦"><a href="#nlgnçš„å¤æ‚åº¦" class="headerlink" title="nlgnçš„å¤æ‚åº¦"></a><code>nlgn</code>çš„å¤æ‚åº¦</h2><p>å‚è€ƒï¼š</p><p><a href="https://www.bilibili.com/video/av18339080?from=search&amp;seid=11934838010834623209">HRBU ACM 01èƒŒåŒ… LIS æ‹“æ‰‘ å‡¸åŒ…â€”-bilibiliâ€”â€”20:41</a></p><p>è¿™ä¸ªæ¯”è¾ƒéš¾è®²ï¼Œçœ‹è§†é¢‘æ¯”è¾ƒå¥½ç†è§£</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Judge Status : Accepted Language : C++</span></span><br><span class="line"><span class="comment"> Submit Timeï¼š2018-08-03 14:27:55</span></span><br><span class="line"><span class="comment"> Exe.Time:15MS Exe.Memoryï¼š1884k</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">LIS</span><span class="params">(<span class="keyword">int</span> arr[], <span class="keyword">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> *dp = <span class="keyword">new</span> <span class="keyword">int</span>[len + <span class="number">10</span>]();</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> pos = <span class="built_in">lower_bound</span>(dp + <span class="number">1</span>, dp + ans + <span class="number">1</span>, arr[i]) - dp; </span><br><span class="line">        <span class="comment">//æ±‚æœ€é•¿éé€’å‡åºåˆ—å¯ä»¥å°†lower_boundå˜ä¸ºupper_bound</span></span><br><span class="line">        dp[pos] = arr[i];</span><br><span class="line">        ans = <span class="built_in">max</span>(ans, pos);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> *arr = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">10</span>]();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            cin &gt;&gt; arr[i];</span><br><span class="line">        cout &lt;&lt; <span class="built_in">LIS</span>(arr, n) &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å›¾ç¤º</strong></p><Img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180803145239.png"><h2 id="LISå˜å½¢â€”æœ‰å‡æœ‰é™"><a href="#LISå˜å½¢â€”æœ‰å‡æœ‰é™" class="headerlink" title="LISå˜å½¢â€”æœ‰å‡æœ‰é™"></a><a href="http://fzcoj.hustoj.com/problem.php?id=4493">LISå˜å½¢â€”æœ‰å‡æœ‰é™</a></h2><p><img src="/2018/08/02/DP/timu.png" alt></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Time:54 ms</span></span><br><span class="line"><span class="comment">    Memory:2252 kb</span></span><br><span class="line"><span class="comment">    2019-04-08 16:45:30</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1E5</span>+<span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> arr[MAXN], dp[MAXN] = &#123;<span class="number">0</span>&#125;, rdp[MAXN] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;arr[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(arr[i<span class="number">-1</span>] &gt;= arr[i])</span><br><span class="line">            dp[i] = dp[i<span class="number">-1</span>] + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            dp[i] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = n; i &gt;= <span class="number">1</span>; i--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(arr[i+<span class="number">1</span>] &gt;= arr[i])</span><br><span class="line">            rdp[i] = rdp[i+<span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            rdp[i] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="keyword">int</span> n1, n2;</span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n1, &amp;n2);</span><br><span class="line">        <span class="keyword">if</span>(dp[n2] + rdp[n1] &gt;= n2-n1+<span class="number">1</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;Yes\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;No\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æœ€å¤§é€’å¢å­æ•°ç»„å’Œ"><a href="#æœ€å¤§é€’å¢å­æ•°ç»„å’Œ" class="headerlink" title="æœ€å¤§é€’å¢å­æ•°ç»„å’Œ"></a>æœ€å¤§é€’å¢å­æ•°ç»„å’Œ</h2><p>è¿™ä¸ªæ˜¯ç”±LIS O(n2)çš„åŠæ³•å˜åŒ–è€Œæ¥çš„ï¼Œå› ä¸ºO(nlgn)çš„é‚£ä¸ªä»£ç çš„dpæ•°ç»„è™½ç„¶ä¿å­˜çš„æ˜¯ä¸€ä¸ªæœ€é•¿é€’å¢åºåˆ—ï¼Œä½†æ˜¯é‡Œé¢æ˜¯æœ€å°çš„ï¼Œä¸æ˜¯æœ€å¤§çš„ï¼Œæ‰€ä»¥åªèƒ½ç”±n2é‚£ä¸ªåŠæ³•è½¬å˜è€Œæ¥</p><p>è¿™ä¸ªåŠ¨æ€è§„åˆ’å¯ä»¥å…ˆçœ‹å‰ä¸‰é¡¹</p><ul><li><p>dp[1] = num[1]</p></li><li><p>num[2]å¦‚æœå¤§äºnum[1]</p><ul><li><p>dp[2] = dp[1] + num[2]</p></li><li><p>å¦åˆ™dp[2] = num[2]</p></li></ul></li><li>num[3]å¦‚æœå¤§äºnum[2]<ul><li>é‚£ä¹ˆdp[3] = dp[2] + num[3]</li></ul></li><li>å¦‚æœnum[3]å¤§äºnum[1]<ul><li>dp[3] = dp[1] + num[3]</li></ul></li><li>å¦‚æœnum[3]ä¸å¤§äºnum[2]åŒæ—¶ä¹Ÿä¸å¤§äºnum[1]<ul><li>dp[3] = num[3]ã€‚</li></ul></li></ul><p>è¯´äº†è¿™ä¹ˆå¤šå…¶å®å°±æ˜¯ä¸€ä¸ªæ„æ€ï¼Œç”¨ä¹‹å‰çš„æ¯ä¸€ä¸ªæ•°å’Œå½“å‰çš„æ•°æ¯”è¾ƒï¼Œæ¯”å½“å‰æ•°å°çš„å°±åŠ ä¸Šdpã€ä¹‹å‰æ•°ã€‘ï¼Œä¸ç„¶å°±ç­‰äºå½“å‰æ•°</p><p>å‚è€ƒ:<a href="https://blog.csdn.net/yopilipala/article/details/74372746">åŠ¨æ€è§„åˆ’ï¼šHDU1087-Super Jumping! Jumping! Jumping!ï¼ˆæœ€å¤§ä¸Šå‡å­åºåˆ—å’Œï¼‰</a></p><p><strong>HDU1087(Super Jumping! Jumping! Jumping!)æ¨¡æ¿é¢˜</strong></p><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1087">http://acm.hdu.edu.cn/showproblem.php?pid=1087</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Judge Status : Accepted Language : C++</span></span><br><span class="line"><span class="comment"> Submit Timeï¼š2018-08-03 18:38:13</span></span><br><span class="line"><span class="comment"> Exe.Time:31MS Exe.Memoryï¼š1828k</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">LIS</span><span class="params">(<span class="keyword">int</span> arr[], <span class="keyword">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">int</span> dp_len = len + <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span> * dp = <span class="keyword">new</span> <span class="keyword">int</span>[dp_len]();</span><br><span class="line"></span><br><span class="line">    arr[<span class="number">0</span>] = <span class="number">-1e9</span>;</span><br><span class="line">    <span class="keyword">int</span> MAX = <span class="number">-1e9</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= i; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[i] &gt; arr[j]) <span class="comment">//ä¹‹å‰æ•°æ¯”å½“å‰æ•°å°ï¼Œå°±åŠ ä¸Šå½“å‰æ•°åˆ°ä¹‹å‰æ•°çš„å’Œä¸Šé¢</span></span><br><span class="line">                dp[i] = <span class="built_in">max</span>(dp[i], dp[j] + arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        dp[i] = <span class="built_in">max</span>(dp[i], arr[i]);<span class="comment">//ä¹‹å‰æ•°éƒ½ä¸æ¯”å½“å‰æ•°å°çš„æƒ…å†µä¸‹ç›´æ¥å°±æ˜¯å½“å‰æ•°</span></span><br><span class="line">        <span class="keyword">if</span>(dp[i] &gt; MAX)<span class="comment">//è®°å½•æœ€å¤§çš„é‚£ä¸ªå’Œ</span></span><br><span class="line">            MAX = dp[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">delete</span>[] dp;</span><br><span class="line">    <span class="keyword">return</span> MAX;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; n &amp;&amp; n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> *arr = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">10</span>]();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            cin &gt;&gt; arr[i];</span><br><span class="line">        cout &lt;&lt; <span class="built_in">LIS</span>(arr, n) &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="LCSâ€”æœ€é•¿å…¬å…±å­åºåˆ—"><a href="#LCSâ€”æœ€é•¿å…¬å…±å­åºåˆ—" class="headerlink" title="LCSâ€”æœ€é•¿å…¬å…±å­åºåˆ—"></a>LCSâ€”æœ€é•¿å…¬å…±å­åºåˆ—</h1><p>æ‰¾ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±å­ä¸²ï¼Œè¿™ä¸ªå­ä¸²è¦æ±‚åœ¨åŸå­—ç¬¦ä¸²ä¸­æ˜¯è¿ç»­çš„ã€‚è€Œæœ€é•¿å…¬å…±å­åºåˆ—åˆ™å¹¶ä¸è¦æ±‚è¿ç»­ã€‚</p><p>cnblogsä¸belongï¼Œæœ€é•¿å…¬å…±å­åºåˆ—ä¸ºblogï¼ˆcnblogs, belongï¼‰ï¼Œæœ€é•¿å…¬å…±å­ä¸²ä¸ºloï¼ˆcnblogs, belongï¼‰è¿™ä¸¤ä¸ªé—®é¢˜éƒ½æ˜¯ç”¨ç©ºé—´æ¢ç©ºé—´ï¼Œåˆ›å»ºä¸€ä¸ªäºŒç»´æ•°ç»„æ¥è®°å½•ä¹‹å‰çš„æ¯ä¸ªçŠ¶æ€</p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/LCS(%E4%B8%8D%E8%BF%9E%E7%BB%AD%EF%BC%89.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/lcs.png"></p><p>è§£é‡Šå‚è€ƒï¼š<a href="https://blog.csdn.net/zhuiqiuzhuoyue583/article/details/79178521">LCSï¼ˆæœ€é•¿å…¬å…±å­åºåˆ—ï¼‰æ³¨æ„ï¼šæ˜¯å¯ä»¥ä¸è¿ç»­çš„ï¼ŒåŒºåˆ«äºæœ€é•¿å…¬å…±å­ä¸²</a></p><p><strong><a href="http://poj.org/problem?id=1458">poj1458ï¼ˆCommon Subsequenceï¼‰æ¨¡æ¿é¢˜</a></strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Judge Status : Accepted Language : C++</span></span><br><span class="line"><span class="comment"> Submit Timeï¼š2018-08-09 11:45:50</span></span><br><span class="line"><span class="comment"> Exe.Time:0MS Exe.Memoryï¼š1036k</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXDP = <span class="number">1e3</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXS = <span class="number">1e7</span>;</span><br><span class="line"><span class="keyword">int</span> dp[MAXDP][MAXDP];</span><br><span class="line"><span class="keyword">char</span> s1[MAXS], s2[MAXS];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">LCS</span><span class="params">(<span class="keyword">char</span>* s1, <span class="keyword">char</span>* s2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> len1 = <span class="built_in">strlen</span>(s1) - <span class="number">1</span>;<span class="comment">//å› ä¸ºs1,s2æ˜¯ä»1å¼€å§‹å­˜çš„ï¼Œæ‰€ä»¥é•¿åº¦è¦å‡1</span></span><br><span class="line">    <span class="keyword">int</span> len2 = <span class="built_in">strlen</span>(s2) - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= len1; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= len2; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(i == <span class="number">0</span> || j == <span class="number">0</span>)</span><br><span class="line">                dp[i][j] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(s1[i] == s2[j])</span><br><span class="line">                dp[i][j] = dp[i - <span class="number">1</span>][j - <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                dp[i][j] = <span class="built_in">max</span>(dp[i - <span class="number">1</span>][j], dp[i][j - <span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        for(int i = 0; i &lt;= len1 ; i++)</span></span><br><span class="line"><span class="comment">        &#123;</span></span><br><span class="line"><span class="comment">            for(int j = 0;j &lt;= len2; j++)</span></span><br><span class="line"><span class="comment">                cout &lt;&lt; dp[i][j] &lt;&lt; &quot; &quot;;</span></span><br><span class="line"><span class="comment">            cout &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[len1][len2];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    s1[<span class="number">0</span>] = <span class="string">&#x27; &#x27;</span>, s2[<span class="number">0</span>] = <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; s1 +<span class="number">1</span> &gt;&gt; s2 + <span class="number">1</span>)</span><br><span class="line">        cout &lt;&lt; <span class="built_in">LCS</span>(s1, s2) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="HDU1503-Advanced-Fruits-è¿˜åŸæœ€é•¿å…¬å…±å­åºåˆ—ã€è®°å½•è·¯å¾„"><a href="#HDU1503-Advanced-Fruits-è¿˜åŸæœ€é•¿å…¬å…±å­åºåˆ—ã€è®°å½•è·¯å¾„" class="headerlink" title="HDU1503(Advanced Fruits)è¿˜åŸæœ€é•¿å…¬å…±å­åºåˆ—ã€è®°å½•è·¯å¾„"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1503">HDU1503(Advanced Fruits)è¿˜åŸæœ€é•¿å…¬å…±å­åºåˆ—ã€è®°å½•è·¯å¾„</a></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å¯ä»¥ç”¨pre[i][j]æ¥è®°å½•dp[i][j]çŠ¶æ€è½¬ç§»æ—¶æ˜¯ä»å“ªç§çŠ¶æ€è½¬ç§»è¿‡æ¥çš„ï¼Œä¸€å…±å°±ä¸‰ç§ï¼šdp[iâˆ’1][jâˆ’1]+1,dp[iâˆ’1][j],dp[i][jâˆ’1]ã€‚ç„¶åä»dp[len0][len1]å¼€å§‹å¾€å‰é€’å½’ï¼Œé‡åˆ°ä»dp[iâˆ’1][jâˆ’1]+1çŠ¶æ€è½¬ç§»çš„æƒ…å†µå°±æ ‡è®°ï¼Œç›´åˆ°é€’å½’åˆ°dp[0][]æˆ–è€…dp[][0]ç»“æŸã€‚</span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/Ramay7/article/details/52003368">https://blog.csdn.net/Ramay7/article/details/52003368</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Judge Status : Accepted Language : C++</span></span><br><span class="line"><span class="comment"> Submit Timeï¼š2018-08-10 11:33:40</span></span><br><span class="line"><span class="comment"> Exe.Time:62MS Exe.Memoryï¼š9620k</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXDP = <span class="number">1e3</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXS = <span class="number">1e7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> dp[MAXDP][MAXDP];</span><br><span class="line"><span class="keyword">char</span> s1[MAXS], s2[MAXS];</span><br><span class="line"><span class="keyword">int</span> pre[MAXDP][MAXDP]; <span class="comment">//dfséœ€è¦ï¼Œè®°å½•çŠ¶æ€</span></span><br><span class="line"><span class="keyword">int</span> vis[MAXDP];  <span class="comment">//è®°å½•ç¬¬ä¸€ä¸ªä¸²ä¸­å“ªäº›ä½ç½®è¢«ç”¨æ‰</span></span><br><span class="line"><span class="keyword">int</span> len_s1, len_s2; <span class="comment">//s1,s2çš„é•¿åº¦</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> len1, <span class="keyword">int</span> len2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(len1 == <span class="number">0</span> || len2 == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(pre[len1][len2] == <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        vis[len1] = <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">dfs</span>(len1 - <span class="number">1</span>, len2 - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(pre[len1][len2] == <span class="number">2</span>)</span><br><span class="line">        <span class="built_in">dfs</span>(len1, len2 - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">dfs</span>(len1 - <span class="number">1</span>, len2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">LCS</span><span class="params">(<span class="keyword">char</span>* s1, <span class="keyword">char</span>* s2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    len_s1 = <span class="built_in">strlen</span>(s1) - <span class="number">1</span>;</span><br><span class="line">    len_s2 = <span class="built_in">strlen</span>(s2) - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= len_s1; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= len_s2; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(i == <span class="number">0</span> || j == <span class="number">0</span>)</span><br><span class="line">                dp[i][j] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(s1[i] == s2[j])</span><br><span class="line">            &#123;</span><br><span class="line">                dp[i][j] = dp[i - <span class="number">1</span>][j - <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">                pre[i][j] = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(dp[i][j - <span class="number">1</span>] &gt; dp[i - <span class="number">1</span>][j])</span><br><span class="line">                &#123;</span><br><span class="line">                    dp[i][j] = dp[i][j - <span class="number">1</span>];</span><br><span class="line">                    pre[i][j] = <span class="number">2</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    dp[i][j] = dp[i - <span class="number">1</span>][j];</span><br><span class="line">                    pre[i][j] = <span class="number">3</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> st = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= len_s1; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(vis[i] == <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = st; j &lt;= len_s2; ++j)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(s1[i] == s2[j])</span><br><span class="line">                &#123;</span><br><span class="line">                    st = j + <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                cout &lt;&lt; s2[j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; s1[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = st; j &lt;= len_s2; ++j)</span><br><span class="line">        cout &lt;&lt; s2[j];</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    s1[<span class="number">0</span>] = <span class="string">&#x27; &#x27;</span>, s2[<span class="number">0</span>] = <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; s1 +<span class="number">1</span> &gt;&gt; s2 + <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(dp));</span><br><span class="line">        <span class="built_in">memset</span>(pre, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(pre));</span><br><span class="line">        <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">        <span class="built_in">LCS</span>(s1, s2);</span><br><span class="line">        <span class="built_in">dfs</span>(len_s1, len_s2);</span><br><span class="line">        <span class="built_in">print</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="poj1080-Human-Gene-Functions-LCSåº”ç”¨"><a href="#poj1080-Human-Gene-Functions-LCSåº”ç”¨" class="headerlink" title="poj1080(Human Gene Functions)LCSåº”ç”¨"></a><a href="http://poj.org/problem?id=1080">poj1080(Human Gene Functions)LCSåº”ç”¨</a></h2><p>é¢˜æ„</p><p>ç»™å®šä¸¤ä¸ªåŸºå› å­—ç¬¦ä¸²ï¼Œç”¨Aï¼ŒCï¼ŒGï¼ŒTè¡¨ç¤ºå…¶ç»„æˆæˆåˆ†ã€‚è‹¥ä¸¤ä¸ªåŸºå› çš„é•¿åº¦ä¸ä¸€æ ·ï¼Œå¯ä»¥é€šè¿‡åœ¨ä¸¤ä¸ªä¸²ä¸­åˆ†åˆ«æ·»åŠ ç©ºæ ¼ä½¿å…¶é•¿åº¦ä¸€è‡´ã€‚å½“å…¶é•¿åº¦ä¸€æ ·åï¼Œåˆ†åˆ«è®¡ç®—å¯¹åº”ä½ç½®ä¸Šçš„ä¸¤ä¸ªå­—æ¯çš„åˆ†æ•°ï¼Œå¹¶å°†æ‰€æœ‰çš„åˆ†æ•°ç›¸åŠ ä¾¿å¾—åˆ°ä¸¤ä¸ªä¸²çš„ç›¸ä¼¼åº¦åˆ†æ•°ã€‚æ±‚ï¼Œä¸¤ä¸ªåŸºå› ä¸²çš„æœ€é«˜åˆ†æ•°ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è®¾dp(i,j)ä¸ºç¬¬ä¸€ä¸ªåºåˆ—(s1)çš„å‰iä¸ªæ•°å’Œç¬¬äºŒä¸ªåºåˆ—(s2)çš„å‰jä¸ªæ•°çš„ç›¸ä¼¼åº¦çš„æœ€å¤§å€¼ã€‚å½“s1[i-1]==s2[j-1]æ—¶ï¼Œç”±é¢˜ç›®ç»™å‡ºçš„è¡¨æ˜¾ç„¶å¯ä»¥å¾—å‡ºdp(i,j)=dp(i-1,j-1)+score[s1[i-1]][s2[j-1]];scoreæ•°ç»„ä¸ºé¢˜ç›®ä¸­ç»™å‡ºçš„é‚£ä¸ªè¡¨æ ¼ã€‚å½“s1[i-1]!=s2[j-1]æ—¶ï¼Œç”±æ™®é€šçš„LCSæ˜¾ç„¶æœ‰dp(i,j)=max(d(i-1,j)+score[s1[i-1]][&#x27;-&#x27;],dp(i,j-1)+score[&#x27;-&#x27;][],d(i-1,j-1)+score[s1[i-1]][s2[j-1]])ã€‚äºæ˜¯ï¼Œä¸¤ä¸ªforå°±è§£å†³é—®é¢˜äº†ã€‚æ³¨æ„åˆå§‹åŒ–æ•°ç»„ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Judge Status : Accepted Language : C++</span></span><br><span class="line"><span class="comment"> Submit Timeï¼š2018-07-29 12:43:57</span></span><br><span class="line"><span class="comment"> Exe.Time:0MS Exe.Memoryï¼š0.6MB</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> LEN = <span class="number">1e3</span>;</span><br><span class="line"><span class="keyword">int</span> dp[LEN][LEN];</span><br><span class="line"><span class="keyword">int</span> score[LEN][LEN];</span><br><span class="line"><span class="keyword">char</span> c1[LEN];</span><br><span class="line"><span class="keyword">char</span> c2[LEN];</span><br><span class="line"><span class="keyword">int</span> len1, len2;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    score[<span class="string">&#x27;A&#x27;</span>][<span class="string">&#x27;A&#x27;</span>]=score[<span class="string">&#x27;C&#x27;</span>][<span class="string">&#x27;C&#x27;</span>]=score[<span class="string">&#x27;G&#x27;</span>][<span class="string">&#x27;G&#x27;</span>]=score[<span class="string">&#x27;T&#x27;</span>][<span class="string">&#x27;T&#x27;</span>]=<span class="number">5</span>;</span><br><span class="line">    score[<span class="string">&#x27;A&#x27;</span>][<span class="string">&#x27;C&#x27;</span>]=score[<span class="string">&#x27;C&#x27;</span>][<span class="string">&#x27;A&#x27;</span>]=score[<span class="string">&#x27;A&#x27;</span>][<span class="string">&#x27;T&#x27;</span>]=score[<span class="string">&#x27;T&#x27;</span>][<span class="string">&#x27;A&#x27;</span>]=score[<span class="string">&#x27;T&#x27;</span>][<span class="string">&#x27; &#x27;</span>]=score[<span class="string">&#x27; &#x27;</span>][<span class="string">&#x27;T&#x27;</span>]=<span class="number">-1</span>;</span><br><span class="line">    score[<span class="string">&#x27;A&#x27;</span>][<span class="string">&#x27;G&#x27;</span>]=score[<span class="string">&#x27;G&#x27;</span>][<span class="string">&#x27;A&#x27;</span>]=score[<span class="string">&#x27;C&#x27;</span>][<span class="string">&#x27;T&#x27;</span>]=score[<span class="string">&#x27;T&#x27;</span>][<span class="string">&#x27;C&#x27;</span>]=score[<span class="string">&#x27;G&#x27;</span>][<span class="string">&#x27;T&#x27;</span>]=score[<span class="string">&#x27;T&#x27;</span>][<span class="string">&#x27;G&#x27;</span>]=score[<span class="string">&#x27;G&#x27;</span>][<span class="string">&#x27; &#x27;</span>]=score[<span class="string">&#x27; &#x27;</span>][<span class="string">&#x27;G&#x27;</span>]=<span class="number">-2</span>;</span><br><span class="line">    score[<span class="string">&#x27;A&#x27;</span>][<span class="string">&#x27; &#x27;</span>]=score[<span class="string">&#x27; &#x27;</span>][<span class="string">&#x27;A&#x27;</span>]=score[<span class="string">&#x27;G&#x27;</span>][<span class="string">&#x27;C&#x27;</span>]=score[<span class="string">&#x27;C&#x27;</span>][<span class="string">&#x27;G&#x27;</span>]=<span class="number">-3</span>;</span><br><span class="line">    score[<span class="string">&#x27;C&#x27;</span>][<span class="string">&#x27; &#x27;</span>]=score[<span class="string">&#x27; &#x27;</span>][<span class="string">&#x27;C&#x27;</span>]=<span class="number">-4</span>;</span><br><span class="line"></span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len1; i++)</span><br><span class="line">        dp[<span class="number">0</span>][i + <span class="number">1</span>] = dp[<span class="number">0</span>][i] + score[c1[i]][<span class="string">&#x27; &#x27;</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len2; i++)</span><br><span class="line">        dp[i + <span class="number">1</span>][<span class="number">0</span>] = dp[i][<span class="number">0</span>] + score[c2[i]][<span class="string">&#x27; &#x27;</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">while</span>(n--)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; len1 &gt;&gt; c1;</span><br><span class="line">        cin &gt;&gt; len2 &gt;&gt; c2;</span><br><span class="line">        <span class="built_in">init</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= len1; i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= len2; j++)</span><br><span class="line">                dp[j][i] = <span class="built_in">max</span>(<span class="built_in">max</span>(dp[j - <span class="number">1</span>][i - <span class="number">1</span>] + score[c2[j - <span class="number">1</span>]][c1[i - <span class="number">1</span>]], dp[j - <span class="number">1</span>][i] + score[c2[j - <span class="number">1</span>]][<span class="string">&#x27; &#x27;</span>]),</span><br><span class="line">                               dp[j][i - <span class="number">1</span>] + score[c1[i - <span class="number">1</span>]][<span class="string">&#x27; &#x27;</span>]);</span><br><span class="line">        cout &lt;&lt; dp[len2][len1] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æœ€é•¿å…¬å…±å­ä¸²ï¼ˆè¿ç»­ï¼‰"><a href="#æœ€é•¿å…¬å…±å­ä¸²ï¼ˆè¿ç»­ï¼‰" class="headerlink" title="æœ€é•¿å…¬å…±å­ä¸²ï¼ˆè¿ç»­ï¼‰"></a>æœ€é•¿å…¬å…±å­ä¸²ï¼ˆè¿ç»­ï¼‰</h1><p>å’ŒLCSåŒºåˆ«æ˜¯åŒºåˆ«å°±æ˜¯å› ä¸ºæ˜¯è¿ç»­çš„ï¼Œå¦‚æœä¸¤ä¸ªå…ƒç´ ä¸ç­‰ï¼Œé‚£ä¹ˆå°±è¦=0äº†è€Œä¸èƒ½ç”¨ä¹‹å‰ä¸€ä¸ªçŠ¶æ€çš„æœ€å¤§å…ƒç´ </p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E6%9C%80%E9%95%BF%E5%85%AC%E5%85%B1%E5%AD%90%E4%B8%B2%EF%BC%88%E8%BF%9E%E7%BB%AD%EF%BC%89.png"></p><h1 id="åŒºé—´DP"><a href="#åŒºé—´DP" class="headerlink" title="åŒºé—´DP"></a>åŒºé—´DP</h1><p>åŒºé—´dpï¼Œé¡¾åæ€ä¹‰å°±æ˜¯åœ¨ä¸€æ®µåŒºé—´ä¸Šè¿›è¡ŒåŠ¨æ€è§„åˆ’ã€‚å¯¹äºæ¯æ®µåŒºé—´ï¼Œä»–ä»¬çš„æœ€ä¼˜å€¼éƒ½æ˜¯ç”±å‡ æ®µæ›´å°åŒºé—´çš„æœ€ä¼˜å€¼å¾—åˆ°ï¼Œæ˜¯åˆ†æ²»æ€æƒ³çš„ä¸€ç§åº”ç”¨ï¼Œå°†ä¸€ä¸ªåŒºé—´é—®é¢˜ä¸æ–­åˆ’åˆ†ä¸ºæ›´å°çš„åŒºé—´ç›´è‡³ä¸€ä¸ªå…ƒç´ ç»„æˆçš„åŒºé—´ï¼Œæšä¸¾ä»–ä»¬çš„ç»„åˆ ï¼Œæ±‚åˆå¹¶åçš„æœ€ä¼˜å€¼ã€‚</p><h2 id="ç®—æ³•ç»“æ„"><a href="#ç®—æ³•ç»“æ„" class="headerlink" title="ç®—æ³•ç»“æ„"></a>ç®—æ³•ç»“æ„</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><p>è®¾F[i,j]ï¼ˆ1&lt;=i&lt;=j&lt;=nï¼‰è¡¨ç¤ºåŒºé—´[i,j]å†…çš„æ•°å­—ç›¸åŠ çš„æœ€å°ä»£ä»·<br>æ¯æ¬¡ç”¨å˜é‡kï¼ˆi&lt;=k&lt;=j-1ï¼‰å°†åŒºé—´åˆ†ä¸º[i,k]å’Œ[k+1,j]ä¸¤æ®µ</p><p>For l:=2 to n do // æšä¸¾åŒºé—´é•¿åº¦<br>for i:=1 to n do // æšä¸¾åŒºé—´çš„å·¦ç«¯ç‚¹<br>begin<br>j:=i+l-1; // è®¡ç®—åŒºé—´çš„å³ç«¯ç‚¹,å› ä¸ºåŒºé—´é•¿åº¦å’Œå·¦ç«¯ç‚¹å¾ªç¯åµŒå¥—æšä¸¾ï¼Œä¿è¯äº†[i,j]å†…çš„æ‰€æœ‰å­åŒºé—´éƒ½è¢«æšä¸¾åˆ°<br>if j&gt;n then break; // ä¿è¯äº†ä¸‹æ ‡ä¸è¶Šç•Œ<br>for k:= i to j-1 do // çŠ¶æ€è½¬ç§»ï¼Œå»æ¨å‡º f[i,j]<br>f[i , j]= max{f[ i,k]+ f[k+1,j]+ w[i,j] }<br>end;</p><p>ä½œè€…ï¼šSteven1997<br>é“¾æ¥ï¼š<a href="https://www.jianshu.com/p/9c6401ea2f9b">https://www.jianshu.com/p/9c6401ea2f9b</a><br>ä¾†æºï¼šç®€ä¹¦<br>ç®€ä¹¦è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ï¼Œä»»ä½•å½¢å¼çš„è½¬è½½éƒ½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒå¹¶æ³¨æ˜å‡ºå¤„ã€‚<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## [poj 1651 Multiplication Puzzle (åŒºé—´dp)](http://poj.org/problem?id=1651)</span><br><span class="line"></span><br><span class="line">**é¢˜æ„**</span><br><span class="line"></span><br><span class="line">â€‹```c++</span><br><span class="line">ç»™å‡ºä¸€ä¸ªæ•°ç»„aï¼Œå¯ä»¥å°†å…¶ä¸­é™¤äº†å¤´å°¾ä¸¤ä¸ªæ•°ä¹‹å¤–çš„ä»»ä½•ä¸€ä¸ªæ•°å­—a[i]å–å‡ºæ•°åˆ—ï¼Œéœ€è¦çš„èŠ±è´¹ä¸º   a[i-1] * a[i] * a[i+1]ï¼Œé—®å¦‚æœéœ€è¦æŠŠè¿™ä¸ªæ•°åˆ—é™¤äº†å¤´å°¾ä¹‹å¤–çš„æ•°å­—éƒ½å–å®Œï¼Œæ€æ ·çš„å–å‡ºé¡ºåºæ˜¯èŠ±è´¹æœ€å°çš„ï¼Œè¾“å‡ºè¿™ä¸ªæœ€å°èŠ±è´¹</span><br></pre></td></tr></table></figure></p><p>å¦‚æœè´ªå¿ƒæ¯æ¬¡å–æœ€å°çš„è¯æ˜¯é”™çš„ï¼Œçœ‹ä¸‹é¢ä¸€ç»„æµ‹è¯•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">1 2 1 100 1</span><br></pre></td></tr></table></figure><p><strong>æ€è·¯</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">é¦–å…ˆæˆ‘ä»¬å¯ä»¥è€ƒè™‘æœ€å°çš„ä¸€ä¸ªå¯ä»¥æ“ä½œçš„åŒºé—´ä¸º<span class="number">3</span>ä¸ªæ•°å­—ï¼Œæ˜¯å¯ä»¥ç›´æ¥ç®—å‡ºç­”æ¡ˆçš„ã€‚</span><br><span class="line">å¯¹äºé•¿åº¦å°äº<span class="number">3</span>çš„åŒºé—´ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å¾—åˆ° dp[i][i] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">å¯¹äºé•¿åº¦å¤§äº<span class="number">3</span>çš„åŒºé—´ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¸­æ‰¾åˆ°ä¸€ä¸ªä¸­ç‚¹ï¼Œä¾‹å¦‚åŒºé—´ i ~ j  å–ä¸­ç‚¹k å³åˆ†ä¸ºåŒºé—´  i~k å’Œ k+<span class="number">1</span>~j, å¯¹äºåŒºé—´ i~k æˆ‘ä»¬æœ‰ç­”æ¡ˆ dp[i][k]  å¯¹äºåŒºé—´ k+<span class="number">1</span>~j æˆ‘ä»¬æœ‰ç­”æ¡ˆ  dp[k+<span class="number">1</span>][j] ï¼Œè€Œåœ¨è¿™ä¸¤ä¸ªåŒºé—´è¿ç®—å®Œä¹‹å ä¼šå‰©ä¸‹çš„æ˜¯ a[i],a[k+<span class="number">1</span>],a[j+<span class="number">1</span>]ï¼Œæ‰€ä»¥ä¸ºäº†æ¶ˆé™¤kæˆ‘ä»¬ä¼šæœ‰èŠ±è´¹ a[i] * a[k+<span class="number">1</span>] * a[j+<span class="number">1</span>]ï¼Œå³è½¬ç§»æ–¹ç¨‹ ï¼š</span><br><span class="line"></span><br><span class="line">dp[i][j]= <span class="built_in">min</span>(dp[i][k] + dp[k + <span class="number">1</span>][j] + arr[i] * arr[k + <span class="number">1</span>] * arr[j + <span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å…ˆè®¡ç®—ans[i][i + <span class="number">1</span>] ( <span class="number">1</span> &lt;= i &lt; N â€“ <span class="number">1</span> )ï¼Œans[i][i + <span class="number">2</span>] ( <span class="number">1</span> &lt;= i &lt; N â€“ <span class="number">2</span> )ï¼Œâ€¦â€¦</span><br><span class="line">å³è®¡ç®—ans[i][i + j] ( <span class="number">1</span> &lt;= j &lt; N â€“ <span class="number">1</span>, <span class="number">1</span> &lt;= i &lt; N â€“ j )</span><br><span class="line"></span><br><span class="line">é‚£ä¹ˆå¯ä»¥è¿™æ ·å†™</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n - <span class="number">1</span>; j++) <span class="comment">//çœ‹ä¸Šé¢jçš„å–å€¼èŒƒå›´</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n - j; i++) <span class="comment">//çœ‹ä¸Šé¢içš„å–å€¼èŒƒå›´</span></span><br><span class="line">        &#123;</span><br><span class="line">            dp[i][i + j] = INF; <span class="comment">//å–çš„æ˜¯æœ€å°ï¼Œå¯ä»¥åˆå§‹åŒ–ä¸ºæ— ç©·å¤§</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = i; k &lt; i + j; k++) <span class="comment">//ä»ç»™å‡ºçš„åŒºé—´[i, i + j]çš„å·¦è¾¹å¼€å§‹,ä¸€ç›´åˆ°å³è¾¹</span></span><br><span class="line">            &#123;</span><br><span class="line">                dp[i][i + j]= <span class="built_in">min</span>(dp[i][k] + dp[k + <span class="number">1</span>][i + j] + arr[i] * arr[k + <span class="number">1</span>] * arr[i + j + <span class="number">1</span>], dp[i][i + j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š</p><p><a href="http://www.voidcn.com/article/p-xcolbvjf-bke.html">http://www.voidcn.com/article/p-xcolbvjf-bke.html</a></p><p><a href="https://111qqz.com/2016/07/poj-1651/">https://111qqz.com/2016/07/poj-1651/</a></p><p><a href="http://www.acmsearch.com/article/show/16953">http://www.acmsearch.com/article/show/16953</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Judge Status : Accepted Language : C++</span></span><br><span class="line"><span class="comment"> Submit Timeï¼š2018-08-11 12:08:14</span></span><br><span class="line"><span class="comment"> Exe.Time:0MS Exe.Memoryï¼š624k</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">1e10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1E3</span>;</span><br><span class="line"><span class="keyword">int</span> dp[MAXN][MAXN];</span><br><span class="line"><span class="keyword">int</span> arr[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; arr[i];</span><br><span class="line">        dp[i][i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n - <span class="number">1</span>; j++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n - j; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            dp[i][i + j] = INF;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = i; k &lt; i + j; k++)</span><br><span class="line">            &#123;</span><br><span class="line">                dp[i][i + j]= <span class="built_in">min</span>(dp[i][k] + dp[k + <span class="number">1</span>][i + j] + arr[i] * arr[k + <span class="number">1</span>] * arr[i + j + <span class="number">1</span>], dp[i][i + j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    cout&lt;&lt;dp[<span class="number">1</span>][n - <span class="number">1</span>]&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="LeetCode664-Strange-Printer-å¥‡æ€ªçš„æ‰“å°æœº"><a href="#LeetCode664-Strange-Printer-å¥‡æ€ªçš„æ‰“å°æœº" class="headerlink" title="LeetCode664 Strange Printer å¥‡æ€ªçš„æ‰“å°æœº"></a><a href="https://www.cnblogs.com/grandyang/p/8319913.html">LeetCode664 Strange Printer å¥‡æ€ªçš„æ‰“å°æœº</a></h2><p>é¢˜è§£ï¼š</p><p><a href="http://www.cnblogs.com/grandyang/p/8319913.html">http://www.cnblogs.com/grandyang/p/8319913.html</a></p><p><a href="https://www.bilibili.com/video/av22290452/?p=30&amp;t=878">åˆ·é¢˜æ‰¾å·¥ä½œâ€”-leetcode 664 â€”bili</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">strangePrinter</span><span class="params">(string s)</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt; <span class="built_in">dp</span>(n, vector&lt;<span class="keyword">int</span>&gt;(n, <span class="number">0</span>));</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt; n; ++j) </span><br><span class="line">            &#123;</span><br><span class="line">                dp[i][j] = (i == j) ? <span class="number">1</span> : (<span class="number">1</span> + dp[i + <span class="number">1</span>][j]); <span class="comment">//å–çš„minï¼Œå¯ä»¥å…ˆè€ƒè™‘æœ€åæƒ…å†µ</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = i + <span class="number">1</span>; k &lt;= j; ++k) </span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span> (s[k] == s[i]) dp[i][j] = <span class="built_in">min</span>(dp[i][j], dp[i + <span class="number">1</span>][k - <span class="number">1</span>] + dp[k][j]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (n == <span class="number">0</span>) ? <span class="number">0</span> : dp[<span class="number">0</span>][n - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="Leetcode-813-Largest-Sum-of-Averages"><a href="#Leetcode-813-Largest-Sum-of-Averages" class="headerlink" title="Leetcode 813. Largest Sum of Averages"></a><a href="https://leetcode.com/problems/largest-sum-of-averages/description/">Leetcode 813. Largest Sum of Averages</a></h2><p>é¢˜è§£ï¼š</p><p><a href="https://blog.csdn.net/magicbean2/article/details/79893634">https://blog.csdn.net/magicbean2/article/details/79893634</a></p><p><a href="https://www.bilibili.com/video/av22290452/?p=45">åˆ·é¢˜æ‰¾å·¥ä½œâ€”-leetcode 813 â€”bili</a></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20180812161908.png"></p><p><strong>é€’æ¨ç‰ˆæœ¬</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Status: Accepted</span></span><br><span class="line"><span class="comment">Runtime: 4 ms</span></span><br><span class="line"><span class="comment">Submitted: ä¸‹åˆ5:16,æ˜ŸæœŸæ—¥, 2018å¹´8æœˆ12æ—¥</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">largestSumOfAverages</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; A, <span class="keyword">int</span> K)</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">int</span> n = A.<span class="built_in">size</span>();</span><br><span class="line">        m_ = vector&lt;vector&lt;<span class="keyword">double</span>&gt;&gt;(K + <span class="number">1</span>, vector&lt;<span class="keyword">double</span>&gt;(n + <span class="number">1</span>, <span class="number">0.0</span>)); <span class="comment">//ä¸‹æ ‡ä»1å¼€å§‹ï¼Œåˆå§‹åŒ–ä¸º0ï¼Œä»£è¡¨æ²¡æœ‰æ±‚è§£è¿‡</span></span><br><span class="line">        sums_ = vector&lt;<span class="keyword">double</span>&gt;(n + <span class="number">1</span>, <span class="number">0.0</span>); <span class="comment">//å‰iä¸ªå…ƒç´ çš„å’Œ</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            sums_[i] = sums_[i - <span class="number">1</span>] + A[i - <span class="number">1</span>]; <span class="comment">//suns_[i]å­˜çš„æ˜¯å‰iä¸ªå…ƒç´ å’Œ</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">LSA</span>(A, n, K); <span class="comment">//åœ¨Aä¸­æœ‰nä¸ªå…ƒç´ åˆ†ä¸ºkç»„</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    vector&lt;vector&lt;<span class="keyword">double</span>&gt;&gt; m_;</span><br><span class="line">    vector&lt;<span class="keyword">double</span>&gt; sums_;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">LSA</span><span class="params">(<span class="keyword">const</span> vector&lt;<span class="keyword">int</span>&gt;&amp; A, <span class="keyword">int</span> n, <span class="keyword">int</span> k)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(m_[k][n] &gt; <span class="number">0</span>) <span class="comment">//è®°å¿†åŒ–ï¼Œæ±‚è§£è¿‡çš„è¯å°±ç›´æ¥è¿”å›</span></span><br><span class="line">            <span class="keyword">return</span> m_[k][n];</span><br><span class="line">        <span class="keyword">if</span>(k == <span class="number">1</span>) </span><br><span class="line">            <span class="keyword">return</span> sums_[n] / n; <span class="comment">//é€’å½’ç»“æŸ</span></span><br><span class="line">        <span class="comment">//iæ˜¯åˆ†å‰²ç‚¹ï¼Œå°†å‰nä¸ªå…ƒç´ åˆ†ä¸ºä¸¤åŠï¼Œä¸€ä¸ªæ˜¯1ï½iï¼Œå¦ä¸€ä¸ªæ˜¯i+1ï½n</span></span><br><span class="line">        <span class="comment">//é€’å½’æ±‚è§£iä¸ªå…ƒç´ åˆ†æˆk-1ç»„èƒ½å–çš„æœ€å¤§å€¼</span></span><br><span class="line">        <span class="comment">//å› ä¸ºæ˜¯k-1ç»„ï¼Œæ‰€ä»¥å¾—è‡³å°‘æœ‰k-1ä¸ªå…ƒç´ ï¼Œiä»k - 1å¼€å§‹</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = k - <span class="number">1</span>; i &lt; n; i++)</span><br><span class="line">         m_[k][n] = <span class="built_in">max</span>(m_[k][n], <span class="built_in">LSA</span>(A, i, k - <span class="number">1</span>) + (sums_[n] - sums_[i]) / (n - i));</span><br><span class="line">        <span class="comment">//sum_[n] - sums_[i]ï¼ši+1ï½nçš„å’Œ</span></span><br><span class="line">        <span class="keyword">return</span> m_[k][n];                   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>DPç‰ˆæœ¬</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">51 / 51 test cases passed.</span></span><br><span class="line"><span class="comment">Status: Accepted</span></span><br><span class="line"><span class="comment">Runtime: 12 ms</span></span><br><span class="line"><span class="comment">Submitted: ä¸‹åˆ5:21,æ˜ŸæœŸæ—¥, 2018å¹´8æœˆ12æ—¥</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">largestSumOfAverages</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; A, <span class="keyword">int</span> K)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">         <span class="keyword">const</span> <span class="keyword">int</span> n = A.<span class="built_in">size</span>();</span><br><span class="line">        <span class="comment">//ä¸‹æ ‡ä»1å¼€å§‹ï¼Œåˆå§‹åŒ–ä¸º0ï¼Œä»£è¡¨æ²¡æœ‰æ±‚è§£è¿‡</span></span><br><span class="line">        vector&lt;vector&lt;<span class="keyword">double</span>&gt;&gt; <span class="built_in">dp</span>(K + <span class="number">1</span>, vector&lt;<span class="keyword">double</span>&gt;(n + <span class="number">1</span>, <span class="number">0.0</span>));</span><br><span class="line">         <span class="comment">//å‰iä¸ªå…ƒç´ çš„å’Œ</span></span><br><span class="line">         vector&lt;<span class="keyword">double</span>&gt;<span class="built_in">sums</span>(n + <span class="number">1</span>, <span class="number">0.0</span>);</span><br><span class="line">         <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">         &#123;</span><br><span class="line">             sums[i] = sums[i - <span class="number">1</span>] + A[i - <span class="number">1</span>]; <span class="comment">//suns_[i]å­˜çš„æ˜¯å‰iä¸ªå…ƒç´ å’Œ</span></span><br><span class="line">             dp[<span class="number">1</span>][i] = sums[i] / i; <span class="comment">//å‰iä¸ªå…ƒç´ åŒ–åˆ†ä¸ºä¸€ç»„çš„å¹³å‡æ•°</span></span><br><span class="line">         &#125;</span><br><span class="line">          </span><br><span class="line">         <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">2</span>; k &lt;= K; k++) <span class="comment">//ç¬¬ä¸€ç»„å·²ç»åˆ†äº†ï¼Œç»„çš„ä¸ªæ•°ä»2å¼€å§‹</span></span><br><span class="line">             <span class="keyword">for</span>(<span class="keyword">int</span> i = k; i &lt;= n; i++) <span class="comment">//ä½¿ç”¨iä¸ªå…ƒç´ ï¼ŒåŒ–åˆ†ä¸ºkç»„ï¼Œè‡³å°‘kä¸ªå…ƒç´ </span></span><br><span class="line">                 <span class="comment">//jæ˜¯åˆ†å‰²ç‚¹ï¼ŒæŠŠå‰iä¸ªå…ƒç´ åˆ†ä¸ºä¸¤åŠ,ä¸€åŠæ˜¯1~j,å¦ä¸€åŠæ˜¯j+1~i</span></span><br><span class="line">                 <span class="keyword">for</span>(<span class="keyword">int</span> j = k - <span class="number">1</span>; j &lt; i; j++) </span><br><span class="line">                 &#123;</span><br><span class="line">                     <span class="comment">//æŠŠiä¸ªå…ƒç´ åˆ†æˆkç»„å–å¾—çš„æœ€å¤§å€¼</span></span><br><span class="line">                     dp[k][i] = <span class="built_in">max</span>(dp[k][i], dp[k - <span class="number">1</span>][j] + (sums[i] - sums[j]) / (i - j));</span><br><span class="line">                 &#125;</span><br><span class="line">          <span class="keyword">return</span> dp[K][n];             </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å› ä¸ºdp[k]åªä¸dp[k - 1]æœ‰å…³ã€‚æ‰€ä»¥å¯ä»¥é™ç»´</p><p><strong>é™ç»´ç‰ˆæœ¬</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">51 / 51 test cases passed.</span></span><br><span class="line"><span class="comment">Status: Accepted</span></span><br><span class="line"><span class="comment">Runtime: 4 ms</span></span><br><span class="line"><span class="comment">Submitted: Submitted: ä¸‹åˆ5:23,æ˜ŸæœŸæ—¥, 2018å¹´8æœˆ12æ—¥</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">largestSumOfAverages</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; A, <span class="keyword">int</span> K)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">         <span class="keyword">const</span> <span class="keyword">int</span> n = A.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="keyword">double</span>&gt; <span class="title">dp</span><span class="params">(n + <span class="number">1</span>, <span class="number">0.0</span>)</span></span>; <span class="comment">//æ”¹</span></span><br><span class="line">         <span class="function">vector&lt;<span class="keyword">double</span>&gt; <span class="title">sums</span><span class="params">(n + <span class="number">1</span>, <span class="number">0.0</span>)</span></span>;</span><br><span class="line">         <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">         &#123;</span><br><span class="line">             sums[i] = sums[i - <span class="number">1</span>] + A[i - <span class="number">1</span>];</span><br><span class="line">             dp[i] = sums[i] / i; <span class="comment">//æ”¹ </span></span><br><span class="line">         &#125;</span><br><span class="line">          </span><br><span class="line">         <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">2</span>; k &lt;= K; k++) </span><br><span class="line">         &#123;</span><br><span class="line">             <span class="function">vector&lt;<span class="keyword">double</span>&gt; <span class="title">tmp</span><span class="params">(n + <span class="number">1</span>, <span class="number">0.0</span>)</span></span>; <span class="comment">//tmpå­˜çš„æ˜¯å½“å‰kçš„æœ€å¤§å€¼ï¼Œdpå­˜çš„æ˜¯k-1</span></span><br><span class="line">             <span class="keyword">for</span>(<span class="keyword">int</span> i = k; i &lt;= n; i++) </span><br><span class="line">                 <span class="keyword">for</span>(<span class="keyword">int</span> j = k - <span class="number">1</span>; j &lt; i; j++) </span><br><span class="line">                 &#123;</span><br><span class="line">                   <span class="comment">//  dp[k][i] = max(dp[k][i], dp[k - 1][j] + (sums[i] - sums[j]) / (i - j));</span></span><br><span class="line">                     tmp[i] = <span class="built_in">max</span>(tmp[i], dp[j] + (sums[i] - sums[j]) / (i - j));</span><br><span class="line">                 &#125;</span><br><span class="line">             dp.<span class="built_in">swap</span>(tmp);</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">return</span> dp[n];             </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="POJ-1160åŒºé—´DP-å¹³è¡Œå››è¾¹å½¢ä¼˜åŒ–-Post-Office"><a href="#POJ-1160åŒºé—´DP-å¹³è¡Œå››è¾¹å½¢ä¼˜åŒ–-Post-Office" class="headerlink" title="POJ 1160åŒºé—´DP+å¹³è¡Œå››è¾¹å½¢ä¼˜åŒ–(Post Office)"></a><a href="http://poj.org/problem?id=1160">POJ 1160åŒºé—´DP+å¹³è¡Œå››è¾¹å½¢ä¼˜åŒ–(Post Office)</a></h2><p><strong>é¢˜æ„</strong></p><p> æœ‰nä¸ªæ‘åº„ç°åœ¨è¦å»ºç«‹mä¸ªé‚®å±€ï¼Œé—®æ€ä¹ˆå»ºé‚®å±€æ‰èƒ½ä½¿å¾—æ‘åº„åˆ°æœ€è¿‘çš„é‚®å±€è·ç¦»å’Œæœ€å°ã€‚è¾“å‡ºè·ç¦»å’Œå³å¯ã€‚</p><p><strong>æ€è·¯</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä¸€èˆ¬çš„åŒºé—´dpæ˜¯ä»å°åŒºé—´åˆ°å¤§åŒºé—´ï¼Œè€Œæ­¤é¢˜åœ¨æ­¤ä¹‹å¤–è¿˜æœ‰ä¸€ä¸ªé™åˆ¶æ˜¯mä¸ªé‚®å±€ã€‚å¯¹äºæ­¤ç±»é—®é¢˜å¯ä»¥ç›´æ¥å»ºç«‹dpçš„æ—¶å€™åŠ ä¸Šé™åˆ¶æ¡ä»¶ï¼šdp[i][j]=<span class="built_in">min</span>(dp[k][jâˆ’<span class="number">1</span>]+one[k+<span class="number">1</span>][i]) å®šä¹‰dpå«ä¹‰ä¸ºå‰iä¸ªæ‘åº„å»ºç«‹äº†jä¸ªé‚®å±€çš„æœ€å°è·ç¦»å’Œï¼Œé‚£ä¹ˆåœ¨å»ºç«‹ç¬¬jçš„æ—¶å€™å¯ä»¥æšä¸¾ä¹‹å‰å·²ç»æ±‚å‡ºçš„åŒºé—´ï¼Œä»j<span class="number">-1</span>ä¸ªé‚®å±€çš„å‰æä¸‹åŠ ä¸Šç°åœ¨çš„<span class="number">1</span>ä¸ªé‚®å±€ï¼Œone[i][j] çš„å«ä¹‰æ˜¯åœ¨åŒºé—´iåˆ°j çš„èŒƒå›´ä¹‹ä¸­å»ºç«‹ä¸€ä¸ªé‚®å±€ï¼Œå…¶å®ä¹Ÿå°±æ˜¯ä¸­ä½æ•°çš„ä½ç½®ï¼Œç„¶åé€’æ¨æ‰¾å‡ºæœ€å°çš„å€¼å³å¯ã€‚</span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š</p><p><a href="https://blog.csdn.net/since_natural_ran/article/details/77629901">https://blog.csdn.net/since_natural_ran/article/details/77629901</a></p><p><strong>æœªç”¨ä¼˜åŒ–</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Judge Status : Accepted Language : C++</span></span><br><span class="line"><span class="comment"> Submit Timeï¼š2018-07-27 20:33:12</span></span><br><span class="line"><span class="comment"> Exe.Time:94MS Exe.Memoryï¼š5.3MB</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> len = <span class="number">1e3</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> dp[len][len]; <span class="comment">//å‰iä¸ªæ‘åº„å»ºç«‹äº†jä¸ªé‚®å±€çš„æœ€å°è·ç¦»å’Œ</span></span><br><span class="line"><span class="keyword">int</span> onePost[len][len] = &#123;<span class="number">0</span>&#125;; <span class="comment">//iåˆ°j çš„èŒƒå›´ä¹‹ä¸­å»ºç«‹ä¸€ä¸ªé‚®å±€æœ€å°è·ç¦»</span></span><br><span class="line"><span class="keyword">int</span> arr[len];</span><br><span class="line"><span class="keyword">int</span> numV, numP;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= numV; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i; j &lt;= numV; j++)</span><br><span class="line">            onePost[i][j] = onePost[i][j - <span class="number">1</span>] + arr[j] - arr[(i + j) / <span class="number">2</span>]; <span class="comment">//ä¸­ä½æ•°ä½ç½®ï¼ŒåŠ å¤šä¸€ä¸ªæ•°ï¼ŒåŒæ—¶å–å…¶ä¸­ä½æ•°ï¼Œåˆ™éœ€è¦æ·»åŠ çš„è·ç¦»ä¸º arr[j] - arr[(i + j) / 2]</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">memset</span>(dp, <span class="number">0x3f</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(dp)); <span class="comment">//å› ä¸ºæ˜¯å–minï¼Œæ‰€ä»¥å¯ä»¥åˆå§‹åŒ–dpæ•°ç»„ä¸ºè¾ƒå¤§å€¼</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= numP; ++i)</span><br><span class="line">        dp[i][i] = <span class="number">0</span>; <span class="comment">//å‰iä¸ªæ‘åº„å»ºç«‹äº†iä¸ªé‚®å±€ï¼Œåˆ™è·ç¦»ä¸º0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin &gt;&gt; numV &gt;&gt; numP;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= numV; i++)</span><br><span class="line">        cin &gt;&gt; arr[i];</span><br><span class="line">    <span class="built_in">init</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= numV; i++) <span class="comment">//æ‘åº„æ•°é‡ï¼Œ[1,numV]</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= numP; j++) <span class="comment">//é‚®å±€æ•°é‡ï¼Œå°äºç­‰äºnumP</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = j - <span class="number">1</span>; k &lt; i; k++)</span><br><span class="line">                dp[i][j] = <span class="built_in">min</span>(dp[i][j], dp[k][j - <span class="number">1</span>] + onePost[k + <span class="number">1</span>][i]);</span><br><span class="line">    cout &lt;&lt; dp[numV][numP];</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¼˜åŒ–</strong></p><p>å‚è€ƒï¼š</p><p><a href="https://blog.csdn.net/since_natural_ran/article/details/77629901">https://blog.csdn.net/since_natural_ran/article/details/77629901</a></p><p><a href="https://blog.csdn.net/u012139398/article/details/43956985">https://blog.csdn.net/u012139398/article/details/43956985</a></p><p><a href="http://www.cnblogs.com/vongang/archive/2013/01/21/2869315.html">http://www.cnblogs.com/vongang/archive/2013/01/21/2869315.html</a></p><p>å››è¾¹å½¢ä¼˜åŒ–å…¬å¼:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ss[i, j<span class="number">-1</span>] &lt;= ss[i,j] &lt;= ss[i + <span class="number">1</span>, j]</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">int</span> numVillages, numPost;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1E3</span>;</span><br><span class="line"><span class="keyword">int</span> dp[MAXN][MAXN];</span><br><span class="line"><span class="keyword">int</span> onePost[MAXN][MAXN];</span><br><span class="line"><span class="keyword">int</span> arr[MAXN];</span><br><span class="line"><span class="keyword">int</span> ss[MAXN][MAXN]; <span class="comment">//ss[i][j]è¡¨ç¤ºdp[i][j]å–å¾—æœ€ä¼˜è§£æ—¶ï¼Œæœ€åä¸€ä¸ªé‚®å±€è®¾ç«‹åœ¨åŸå¸‚çš„ç¼–å·,å³å†³ç­–å˜é‡</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(dp, <span class="number">0x3f</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(dp));</span><br><span class="line">    <span class="built_in">memset</span>(ss, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(ss));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;= numPost; i++)</span><br><span class="line">        dp[i][i] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= numVillages; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i; j &lt;= numVillages; j++)</span><br><span class="line">            onePost[i][j] = onePost[i][j - <span class="number">1</span>] + arr[j] - arr[(i + j) / <span class="number">2</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin &gt;&gt; numVillages &gt;&gt; numPost;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= numVillages; i++)</span><br><span class="line">        cin &gt;&gt; arr[i];</span><br><span class="line">    <span class="built_in">init</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= numVillages; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= numPost; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            ss[i + <span class="number">1</span>][j] = i + <span class="number">1</span>; <span class="comment">//ä¸çŸ¥é“iï¼Œjå…³ç³»ï¼Œé»˜è®¤æœç´¢å®Œæ‰€æœ‰çš„æ‘åº„</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = ss[i][j - <span class="number">1</span>]; k &lt;= ss[i + <span class="number">1</span>][j]; k++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(dp[i][j] &gt; dp[k][j - <span class="number">1</span>] + onePost[k + <span class="number">1</span>][i])</span><br><span class="line">                &#123;</span><br><span class="line">                    dp[i][j] = dp[k][j - <span class="number">1</span>] + onePost[k + <span class="number">1</span>][i];</span><br><span class="line">                    ss[i][j] = k;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; dp[numVillages][numPost] &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="å‹ç¼©äºŒç»´æœ€å¤§å­åºåˆ—å’Œ"><a href="#å‹ç¼©äºŒç»´æœ€å¤§å­åºåˆ—å’Œ" class="headerlink" title="å‹ç¼©äºŒç»´æœ€å¤§å­åºåˆ—å’Œ"></a>å‹ç¼©äºŒç»´æœ€å¤§å­åºåˆ—å’Œ</h1><h2 id="HDU1081-To-The-Max"><a href="#HDU1081-To-The-Max" class="headerlink" title="HDU1081(To The Max)"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1081">HDU1081(To The Max)</a></h2><p><strong>é¢˜æ„:å¤§è‡´æ˜¯æ±‚äºŒç»´æ•°ç»„çš„æœ€å¤§çŸ©é˜µå’Œã€‚</strong></p><p>å‚è€ƒï¼š</p><p><a href="https://www.cnblogs.com/BlackStorm/p/4922207.html">https://www.cnblogs.com/BlackStorm/p/4922207.html</a></p><p><a href="https://blog.csdn.net/linraise/article/details/16349527">https://blog.csdn.net/linraise/article/details/16349527</a></p><p><a href="https://blog.csdn.net/hitwhylz/article/details/11848439">https://blog.csdn.net/hitwhylz/article/details/11848439</a></p><p>äºŒç»´å‹ç¼©æˆä¸€ç»´ï¼Œç„¶åæŒ‰ç…§æ±‚æœ€å¤§åºåˆ—å’Œçš„åŠæ³•å»æ±‚æœ€å¤§å€¼å°±è¡Œäº†ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Judge Status : Accepted Language : C++</span></span><br><span class="line"><span class="comment"> Submit Timeï¼š2018-09-04 19:59:05</span></span><br><span class="line"><span class="comment"> Exe.Time:15MS Exe.Memoryï¼š1892k</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">200</span>;</span><br><span class="line"><span class="keyword">int</span> arr[MAXN][MAXN];</span><br><span class="line"><span class="keyword">int</span> cntRow[MAXN];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">maxSubArr</span><span class="params">()</span> <span class="comment">//æ±‚ä¸€ç»´æœ€å¤§åºåˆ—å’Œ</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> dp[MAXN] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> MAX = INT_MIN;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        dp[i] = <span class="built_in">max</span>(dp[i - <span class="number">1</span>] + cntRow[i], cntRow[i]); <span class="comment">//æœ€å¤§å­åºåˆ—å’Œè½¬ç§»æ–¹ç¨‹</span></span><br><span class="line">        <span class="keyword">if</span>(MAX &lt; dp[i])</span><br><span class="line">            MAX = dp[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> MAX;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ans = INT_MIN;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)ã€€<span class="comment">//å‹ç¼©</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(cntRow, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(cntRow));</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i; j &lt;= n; ++j)ã€€</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt;= n; ++k)</span><br><span class="line">                cntRow[k] += arr[j][k];</span><br><span class="line">            <span class="keyword">int</span> tmp = <span class="built_in">maxSubArr</span>();</span><br><span class="line">            <span class="keyword">if</span> (tmp &gt; ans)</span><br><span class="line">                ans = tmp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j)</span><br><span class="line">            &#123;</span><br><span class="line">                cin &gt;&gt; arr[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="built_in">solve</span>() &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ‚é¡¹äºŒç»´dpè½¬ç§»"><a href="#æ‚é¡¹äºŒç»´dpè½¬ç§»" class="headerlink" title="æ‚é¡¹äºŒç»´dpè½¬ç§»"></a>æ‚é¡¹äºŒç»´dpè½¬ç§»</h1><h2 id="POJ2192-Zipper-ï¼ï¼ï¼åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²èƒ½å¦åˆæˆä¸€ä¸ªå­—ç¬¦ä¸²"><a href="#POJ2192-Zipper-ï¼ï¼ï¼åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²èƒ½å¦åˆæˆä¸€ä¸ªå­—ç¬¦ä¸²" class="headerlink" title="POJ2192 (Zipper)ï¼ï¼ï¼åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²èƒ½å¦åˆæˆä¸€ä¸ªå­—ç¬¦ä¸²"></a><a href="https://vjudge.net/problem/POJ-2192">POJ2192 (Zipper)ï¼ï¼ï¼åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²èƒ½å¦åˆæˆä¸€ä¸ªå­—ç¬¦ä¸²</a></h2><p>é¢˜æ„ï¼šç»™ä½ ä¸‰ä¸ªå­—ç¬¦ä¸²ï¼Œé—®ä½ èƒ½å¦ç”±å‰ä¸¤ä¸ªåˆæˆç¬¬ä¸‰ä¸ªï¼Œä¸”è¦æ±‚ä¸æ”¹å˜å‰ä¸¤ä¸ªå­—ç¬¦ä¸²çš„é¡ºåºã€‚é¢˜ç›®ä¿è¯ç¬¬ä¸‰ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ä¸ºå‰ä¸¤ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ä¹‹å’Œã€‚</p><p>å‚è€ƒï¼š</p><p><a href="https://www.cnblogs.com/huashanqingzhu/p/7348218.html">https://www.cnblogs.com/huashanqingzhu/p/7348218.html</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æœ€ä¼˜å­ç»“æ„åˆ†æï¼šå¦‚æœAã€Bå¯ä»¥ç»„æˆCï¼Œé‚£ä¹ˆï¼ŒCæœ€åä¸€ä¸ªå­—æ¯ï¼Œå¿…å®šæ˜¯ A æˆ– B çš„æœ€åä¸€ä¸ªå­—æ¯ç»„æˆã€‚</span><br><span class="line">Cå»é™¤é™¤æœ€åä¸€ä½ï¼Œå°±å˜æˆæ˜¯å¦å¯ä»¥æ±‚å‡º A<span class="number">-1</span>å’ŒB æˆ–è€… Aä¸B<span class="number">-1</span> ä¸ æ˜¯å¦å¯ä»¥æ„æˆ C<span class="number">-1</span>ã€‚ã€‚ã€‚</span><br><span class="line"> çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š</span><br><span class="line">ç”¨f[i][j] è¡¨ç¤º Aå‰ i ä½ å’ŒB å‰j ä½æ˜¯å¦å¯ä»¥ç»„æˆ Cçš„å‰i+jä½</span><br><span class="line">             dp[i][j]= (dp[i<span class="number">-1</span>][j]&amp;&amp;(a[i]==c[i+j]))||(dp[i][j<span class="number">-1</span>]&amp;&amp;(b[j]==c[i+j]))</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Judge Status : Accepted Language : C++</span></span><br><span class="line"><span class="comment"> Submit Timeï¼š2018-07-30 16:52:10</span></span><br><span class="line"><span class="comment"> Exe.Time:407MS Exe.Memoryï¼š4048KB</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1E3</span>;</span><br><span class="line"><span class="keyword">char</span> a[MAXN], b[MAXN], c[MAXN];</span><br><span class="line"><span class="keyword">int</span> dp[MAXN][MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= n; k++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(dp));</span><br><span class="line">        a[<span class="number">0</span>] = b[<span class="number">0</span>] = c[<span class="number">0</span>] = <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">        cin &gt;&gt; a + <span class="number">1</span>&gt;&gt; b + <span class="number">1</span>&gt;&gt; c + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> lenA = <span class="built_in">strlen</span>(a);</span><br><span class="line">        <span class="keyword">int</span> lenB = <span class="built_in">strlen</span>(b);</span><br><span class="line">        <span class="keyword">int</span> lenC = <span class="built_in">strlen</span>(c);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; lenA; i++) <span class="comment">//åˆå§‹åŒ–ï¼Œå•ç‹¬ï½ä¸ï½ƒåŒ¹é…</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i] == c[i])ã€€</span><br><span class="line">                dp[i][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; lenB; i++) <span class="comment">//åˆå§‹åŒ–ï¼Œå•ç‹¬ï½‚ä¸ï½ƒåŒ¹é…</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(b[i] == c[i])</span><br><span class="line">                dp[<span class="number">0</span>][i] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= lenA; i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= lenB; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                dp[i][j] = ( (dp[i - <span class="number">1</span>][j] &amp;&amp; a[i] == c[i + j]) || (dp[i][j - <span class="number">1</span>] &amp;&amp; b[j] == c[i + j]) );</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Data set &quot;</span> &lt;&lt; k &lt;&lt; <span class="string">&quot;: &quot;</span>;</span><br><span class="line">        <span class="keyword">if</span>(dp[lenA][lenB])</span><br><span class="line">             cout &lt;&lt; <span class="string">&quot;yes&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">             cout &lt;&lt; <span class="string">&quot;no&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="POJ3356-AGTC-ï¼ï¼ï¼s2å˜æˆs1æœ€å°‘çš„æ“ä½œ"><a href="#POJ3356-AGTC-ï¼ï¼ï¼s2å˜æˆs1æœ€å°‘çš„æ“ä½œ" class="headerlink" title="POJ3356(AGTC)ï¼ï¼ï¼s2å˜æˆs1æœ€å°‘çš„æ“ä½œ"></a><a href="https://vjudge.net/problem/POJ-3356">POJ3356(AGTC)ï¼ï¼ï¼s2å˜æˆs1æœ€å°‘çš„æ“ä½œ</a></h2><p><strong>é¢˜æ„ï¼š</strong>ç»™å‡ºä¸¤ä¸ªå­—ç¬¦ä¸²x ä¸ yï¼Œå…¶ä¸­xçš„é•¿åº¦ä¸ºnï¼Œyçš„é•¿åº¦ä¸ºmï¼Œå¹¶ä¸”m&gt;=n.ç„¶åyå¯ä»¥ç»è¿‡åˆ é™¤ä¸€ä¸ªå­—æ¯ï¼Œæ·»åŠ ä¸€ä¸ªå­—æ¯ï¼Œè½¬æ¢ä¸€ä¸ªå­—æ¯ï¼Œä¸‰ç§æ“ä½œå¾—åˆ°x.é—®æœ€å°‘å¯ä»¥ç»è¿‡å¤šå°‘æ¬¡æ“ä½œ</p><p> å‚è€ƒï¼š</p><p><a href="https://blog.csdn.net/u013480600/article/details/40780781">https://blog.csdn.net/u013480600/article/details/40780781</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Judge Status : Accepted Language : C++</span></span><br><span class="line"><span class="comment"> Submit Timeï¼š2018-07-30 20:55:35</span></span><br><span class="line"><span class="comment"> Exe.Time:32MS Exe.Memoryï¼š4188MB</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> LEN = <span class="number">1e3</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> dp[LEN][LEN];</span><br><span class="line"><span class="keyword">char</span> s1[LEN], s2[LEN];</span><br><span class="line"><span class="keyword">int</span> n1, n2;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; n1 &gt;&gt; s1)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; n2 &gt;&gt; s2;</span><br><span class="line">        <span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n1; i++) <span class="comment">//s2ä¸ºç©ºï¼Œs1åˆ é™¤å­—ç¬¦ä¸²å˜æˆs2</span></span><br><span class="line">            dp[i][<span class="number">0</span>] = i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n2; i++) <span class="comment">//s1ä¸ºç©ºï¼Œs1æ·»åŠ å­—ç¬¦ä¸²å˜æˆs2</span></span><br><span class="line">            dp[<span class="number">0</span>][i] = i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n1; i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n2; j++)</span><br><span class="line">                dp[i][j]=<span class="built_in">min</span>(dp[i<span class="number">-1</span>][j<span class="number">-1</span>]+(s1[i<span class="number">-1</span>]==s2[j<span class="number">-1</span>]?<span class="number">0</span>:<span class="number">1</span>),</span><br><span class="line">                              <span class="built_in">min</span>(dp[i<span class="number">-1</span>][j]+<span class="number">1</span>,dp[i][j<span class="number">-1</span>]+<span class="number">1</span>));</span><br><span class="line">        cout &lt;&lt; dp[n1][n2] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></Img>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> dp </tag>
            
            <tag> æ•°ä½dp </tag>
            
            <tag> æœ€é•¿ä¸Šå‡å…¬å…±å­åºåˆ— </tag>
            
            <tag> æœ€é•¿é€’å¢å­åºåˆ— </tag>
            
            <tag> æœ€é•¿å…¬å…±å­åºåˆ— </tag>
            
            <tag> æœ€é•¿å…¬å…±å­ä¸² </tag>
            
            <tag> åŒºé—´dp </tag>
            
            <tag> æœ€å¤§åºåˆ—å’Œ </tag>
            
            <tag> äºŒç»´dp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¯¹ä¸€ä¸ªæ•´æ•°å¤„ç†</title>
      <link href="/2018/07/19/%E5%AF%B9%E4%B8%80%E4%B8%AA%E6%95%B4%E6%95%B0%E5%A4%84%E7%90%86/"/>
      <url>/2018/07/19/%E5%AF%B9%E4%B8%80%E4%B8%AA%E6%95%B4%E6%95%B0%E5%A4%84%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>sprintf,Stringstream</p><span id="more"></span><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/fanyun_01/article/details/66967710">STLä¹‹Stringstreamå­—ç¬¦ä¸²æµä½¿ç”¨æ€»ç»“</a></p><h1 id="sstream"><a href="#sstream" class="headerlink" title="sstream"></a>sstream</h1><p><code>&lt;sstream&gt;</code>åº“å®šä¹‰äº†ä¸‰ç§ç±»ï¼š<code>istringstream</code>ã€<code>ostringstream</code> å’Œ <code>stringstream</code>ï¼Œåˆ†åˆ«ç”¨æ¥è¿›è¡Œæµçš„è¾“å…¥ã€è¾“å‡ºå’Œè¾“å…¥è¾“å‡ºæ“ä½œã€‚æœ¬æ¬¡ä¸»è¦æ˜¯è®¨è®º<code>stringstream</code></p><p><em>æ³¨æ„ï¼Œ<code>&lt;sstream&gt;</code>ä½¿ç”¨stringå¯¹è±¡æ¥ä»£æ›¿å­—ç¬¦æ•°ç»„ã€‚è¿™æ ·å¯ä»¥é¿å…ç¼“å†²åŒºæº¢å‡ºçš„å±é™©ã€‚è€Œä¸”ï¼Œä¼ å…¥å‚æ•°å’Œç›®æ ‡å¯¹è±¡çš„ç±»å‹è¢«è‡ªåŠ¨æ¨å¯¼å‡ºæ¥ï¼Œå³ä½¿ä½¿ç”¨äº†ä¸æ­£ç¡®çš„æ ¼å¼åŒ–ç¬¦ä¹Ÿæ²¡æœ‰å±é™©ã€‚</em></p><h1 id="é‡å¤åˆ©ç”¨stringstreamå¯¹è±¡"><a href="#é‡å¤åˆ©ç”¨stringstreamå¯¹è±¡" class="headerlink" title="é‡å¤åˆ©ç”¨stringstreamå¯¹è±¡"></a>é‡å¤åˆ©ç”¨stringstreamå¯¹è±¡</h1><p>å¦‚æœä½ æ‰“ç®—åœ¨å¤šæ¬¡è½¬æ¢ä¸­ä½¿ç”¨åŒä¸€ä¸ª<code>stringstream</code>å¯¹è±¡ï¼Œè®°ä½å†æ¯æ¬¡è½¬æ¢å‰è¦ä½¿ç”¨<code>clear()</code>æ–¹æ³•ï¼›</p><p>åœ¨å¤šæ¬¡è½¬æ¢ä¸­é‡å¤ä½¿ç”¨åŒä¸€ä¸ª<code>stringstream</code>ï¼ˆè€Œä¸æ˜¯æ¯æ¬¡éƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼‰å¯¹è±¡æœ€å¤§çš„å¥½å¤„åœ¨äºæ•ˆç‡ã€‚<code>stringstream</code>å¯¹è±¡çš„æ„é€ å’Œææ„å‡½æ•°é€šå¸¸æ˜¯éå¸¸è€—è´¹CPUæ—¶é—´çš„ã€‚</p><h1 id="å¸¸è§åŸºæœ¬ç±»å‹äº’ç›¸è½¬æ¢"><a href="#å¸¸è§åŸºæœ¬ç±»å‹äº’ç›¸è½¬æ¢" class="headerlink" title="å¸¸è§åŸºæœ¬ç±»å‹äº’ç›¸è½¬æ¢"></a>å¸¸è§åŸºæœ¬ç±»å‹äº’ç›¸è½¬æ¢</h1><h2 id="stringè½¬int"><a href="#stringè½¬int" class="headerlink" title="stringè½¬int"></a>stringè½¬int</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    stringstream stream;</span><br><span class="line">    string s = <span class="string">&quot;100&quot;</span>;</span><br><span class="line">    <span class="keyword">int</span> ans;</span><br><span class="line">    stream &lt;&lt; s;</span><br><span class="line">    stream &gt;&gt; ans;</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; ans - <span class="number">1</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">out: <span class="number">100</span> <span class="number">99</span></span><br></pre></td></tr></table></figure><p><strong>åŒç†å¯ä»¥åè¿‡æ¥</strong></p><h1 id="å–ä¸€ä¸ªæ•´æ•°kå‰nä½"><a href="#å–ä¸€ä¸ªæ•´æ•°kå‰nä½" class="headerlink" title="å–ä¸€ä¸ªæ•´æ•°kå‰nä½"></a>å–ä¸€ä¸ªæ•´æ•°kå‰nä½</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span> <span class="comment">//sprintf</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="function">LL <span class="title">firstN</span> <span class="params">(LL k, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> a[<span class="number">30</span>];</span><br><span class="line">    <span class="built_in">sprintf</span> (a, <span class="string">&quot;%ld&quot;</span>, k); <span class="comment">//å°†kè½¬æ¢ä¸ºå­—ç¬¦ä¸²</span></span><br><span class="line">    a [n] = <span class="number">0</span>; <span class="comment">//æˆªæ–­nä½</span></span><br><span class="line">    stringstream stream;</span><br><span class="line">    stream &lt;&lt; a;</span><br><span class="line">    LL ans;</span><br><span class="line">    stream &gt;&gt; ans;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å–ä¸€ä¸ªæ•´æ•°kånä½"><a href="#å–ä¸€ä¸ªæ•´æ•°kånä½" class="headerlink" title="å–ä¸€ä¸ªæ•´æ•°kånä½"></a>å–ä¸€ä¸ªæ•´æ•°kånä½</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span> <span class="comment">//sprintf</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span> <span class="comment">//atol</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span> <span class="comment">//strlen</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="function">LL <span class="title">firstN</span> <span class="params">(LL k, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> a [<span class="number">30</span>], b[<span class="number">30</span>];</span><br><span class="line">    <span class="built_in">sprintf</span> (a, <span class="string">&quot;%ld&quot;</span>, k);</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="built_in">strlen</span>(a) - n; i &lt; <span class="built_in">strlen</span>(a); i++)</span><br><span class="line">        b[cnt++] = a[i];</span><br><span class="line">    stream &lt;&lt; b;</span><br><span class="line">    LL ans;</span><br><span class="line">    stream &gt;&gt; ans;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="sprintf"><a href="#sprintf" class="headerlink" title="sprintf"></a>sprintf</h1><p>å¤´æ–‡ä»¶ï¼šstdio.h</p><p>å‡½æ•°åŸå‹ï¼šint sprintf(char <em>buffer, const char </em>format, [argument]â€¦)</p><p>å‚æ•°ï¼š  </p><p>ï¼ˆ1ï¼‰bufferï¼šæ˜¯charç±»å‹çš„æŒ‡é’ˆï¼ŒæŒ‡å‘å†™å…¥çš„å­—ç¬¦ä¸²æŒ‡é’ˆï¼›  </p><p>ï¼ˆ2ï¼‰formatï¼šæ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œå³åœ¨ç¨‹åºä¸­æƒ³è¦çš„æ ¼å¼ï¼›  </p><p>ï¼ˆ3ï¼‰argumentï¼šå¯é€‰å‚æ•°ï¼Œå¯ä»¥ä¸ºä»»æ„ç±»å‹çš„æ•°æ®ï¼›  </p><p>å‡½æ•°è¿”å›å€¼ï¼šbufferæŒ‡å‘çš„å­—ç¬¦ä¸²çš„é•¿åº¦ï¼›  </p><p>æ›´å¤šå‚è€ƒï¼š<a href="https://blog.csdn.net/nopoppy/article/details/52589745">sprintfçš„ä½¿ç”¨</a></p><p><a href="https://baike.baidu.com/item/atol/10931326?fr=aladdin">https://baike.baidu.com/item/atol/10931326?fr=aladdin</a>)</p><h1 id="sprintf-sscanf-snprintfåŒºåˆ«"><a href="#sprintf-sscanf-snprintfåŒºåˆ«" class="headerlink" title="sprintf,sscanf,snprintfåŒºåˆ«"></a>sprintf,sscanf,snprintfåŒºåˆ«</h1><p><a href="https://www.cnblogs.com/Anker/p/3351168.html">Cè¯­è¨€sprintfä¸sscanfå‡½æ•°æ€»ç»“</a></p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•´æ•°å¤„ç† </tag>
            
            <tag> sstream </tag>
            
            <tag> sprintf </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CodeForcesæ°´ä¸€æ°´</title>
      <link href="/2018/07/07/CodeForces/"/>
      <url>/2018/07/07/CodeForces/</url>
      
        <content type="html"><![CDATA[<p>B. Binary String Constructingï¼ˆDiv3â€”æ„é€ ï¼‰,CodeForces - 1004Cï¼ˆDiv2â€”æ€ç»´ï¼‰,CodeForces - 962D(Div2â€”è¾ƒä¸ºç²¾è¾Ÿçš„è§£æ³•),1055B - Alice and Hairdresser(æ€ç»´),1088A. Ehab and another construction problem(æš´åŠ›ä¸O(1)),</p><p>1088C. Ehab and a 2-operation task(é€šè¿‡æ“ä½œä½¿æ•°ç»„é€’å¢)</p><span id="more"></span><h1 id="B-Binary-String-Constructingï¼ˆDiv3â€”æ„é€ ï¼‰"><a href="#B-Binary-String-Constructingï¼ˆDiv3â€”æ„é€ ï¼‰" class="headerlink" title="B. Binary String Constructingï¼ˆDiv3â€”æ„é€ ï¼‰"></a>B. Binary String Constructingï¼ˆDiv3â€”æ„é€ ï¼‰</h1><p><a href="http://codeforces.com/contest/1003/problem/B">B. Binary String Constructing</a></p><p>é¢˜æ„ï¼šç»™å‡ºaï¼Œbï¼Œxï¼Œæ„é€ ä¸€ä¸ª01ä¸²ï¼Œæœ‰aä¸ª0ï¼Œbä¸ª1ã€‚è¿™ä¸ª01ä¸²åˆšå¥½æœ‰xä¸ª S[i] ä½¿å¾—S[i] != S[i+1]ã€‚</p><p>æ€è·¯ï¼šå¯¹äºxï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±å¯ä»¥æƒ³åˆ°å…ˆè¾“å‡ºx/2å¯¹0å’Œ1ï¼ˆnå¯¹0å’Œ1äº¤é”™å‡ºç°å¯ä»¥æä¾›2*n-1ä¸ªç¬¦åˆé¢˜æ„çš„S[i]ï¼‰ï¼Œç„¶åå°†å‰©ä½™çš„0å’Œå‰©ä½™çš„1è¿ç»­è¾“å‡ºï¼ˆæä¾›1ä¸ªç¬¦åˆæ¡ä»¶çš„S[i]ï¼Œè¿™æ ·å°±åˆšå¥½æ˜¯xä¸ªç¬¦åˆæ¡ä»¶çš„S[i]äº†ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬è¦ä¼˜å…ˆå°†ä¸ªæ•°å¤šçš„æ”¾åœ¨å‰é¢ï¼Œä¾‹å¦‚ï¼Œæœ‰10ä¸ª1,5ä¸ª0çš„è¯ï¼Œæˆ‘ä»¬å…ˆè¾“å‡ºx/2ä¸ªâ€œ10â€ï¼Œå¦åˆ™ï¼Œè¾“å‡ºx/2ä¸ªâ€œ01â€ï¼‰ã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªæƒ…å†µå°±æ˜¯xåˆšå¥½æ•´é™¤2ï¼Œè¿™æ—¶å€™å¾—é¢å¤–å¤„ç†ä¸€ä¸ªã€‚</p><p>æ¯”å¦‚4 3 2</p><p>å°±éœ€è¦è¾“å‡º0111000ï¼Œè€Œä¸æ˜¯0100011</p><p>ä¹‹å‰æ²¡æœ‰åˆ¤æ–­xåˆšå¥½æ•´é™¤2ï¼Œwaäº†ä¸€ä¸ª</p><p>Input  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">50 47 18</span><br></pre></td></tr></table></figure><p>Output  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0101010101010101010000000000000000000000000000000000000000011111111111111111111111111111111111111</span><br></pre></td></tr></table></figure><p>Answer  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0101010101010101011111111111111111111111111111111111111100000000000000000000000000000000000000000</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> zero, one, x;</span><br><span class="line">    cin &gt;&gt; zero &gt;&gt; one &gt;&gt; x;</span><br><span class="line">    zero -= x / <span class="number">2</span>;</span><br><span class="line">    one -= x / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span>(zero &gt; one)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; x / <span class="number">2</span>; i++)</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;0&quot;</span> &lt;&lt; <span class="string">&quot;1&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span>(x % <span class="number">2</span> == <span class="number">0</span>) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; one; i++)</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;1&quot;</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; zero; i++)</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;0&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; zero; i++)</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;0&quot;</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; one; i++)</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;1&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; x / <span class="number">2</span>; i++)</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;1&quot;</span> &lt;&lt; <span class="string">&quot;0&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span>(x % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; zero; i++)</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;0&quot;</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; one; i++)</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;1&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; one; i++)</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;1&quot;</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; zero; i++)</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;0&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="CodeForces-1004Cï¼ˆDiv2â€”æ€ç»´ï¼‰"><a href="#CodeForces-1004Cï¼ˆDiv2â€”æ€ç»´ï¼‰" class="headerlink" title="CodeForces - 1004Cï¼ˆDiv2â€”æ€ç»´ï¼‰"></a>CodeForces - 1004Cï¼ˆDiv2â€”æ€ç»´ï¼‰</h1><p><a href="https://vjudge.net/problem/1655834/origin">CodeForces - 1004C</a></p><p>é¢˜ç›®å¤§æ„:æœ‰nä¸ªæ•°,æ¯ä¸ªæ•°åªèƒ½ä¸è‡ªå·±åé¢çš„æ•°é…å¯¹,ç›¸åŒçš„é…å¯¹åªç®—ä¸€ä¸ª,æ±‚é…å¯¹çš„æ•°é‡.</p><p>æœ€å¼€å§‹ç”¨setæš´åŠ›æ±‚è§£ï¼Œå½“ç„¶æ˜¯TLEäº†ã€‚</p><p>æˆ‘ä»¬åªéœ€ä»1å·ä½ç½®å¼€å§‹æ£€æŸ¥ï¼Œåˆ¤æ–­1å·ä½ç½®åé¢æœ‰å¤šå°‘ä¸ªä¸åŒçš„æ•°å­—ï¼Œç„¶åå†ä»2å·ä½ç½®å¼€å§‹æ£€æŸ¥ï¼Œåˆ¤æ–­2å·ä½ç½®åé¢æœ‰å¤šå°‘ä¸ªä¸åŒçš„æ•°å­—ï¼Œä¾æ­¤ç±»æ¨ï¼Œæœ€åå°†æ‰€æœ‰çš„ç»“æœåŠ èµ·æ¥å°±å¯ä»¥äº†ï¼ˆæ³¨æ„ï¼Œä»iå·ä½ç½®æ£€æŸ¥åé¢çš„æ•°æ—¶ï¼Œéœ€è¦å…ˆåˆ¤è¯»è¿™ä¸ªä½ç½®çš„æ•°æ˜¯å¦ä»¥åŠå‡ºç°è¿‡ï¼‰ã€‚ å¦‚æœç›´æ¥æš´åŠ›æ£€æŸ¥çš„è¯ï¼Œè‚¯å®šä¼štleï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å…ˆé¢„å¤„ç†å‡ºæ¯ä¸ªä½ç½®åé¢ä¸åŒæ•°å­—çš„ä¸ªæ•°ï¼Œç„¶åç´¯åŠ ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Status:AcceptedTime:62ms</span></span><br><span class="line"><span class="comment">Memory:117424kBLength:863</span></span><br><span class="line"><span class="comment">2018-07-21 14:57:53</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxLen = <span class="number">10000000</span>;</span><br><span class="line"><span class="keyword">int</span> arr[maxLen];</span><br><span class="line"><span class="keyword">int</span> vis[maxLen]; <span class="comment">//è®°å½•æŸä¸ªæ•°å­—æœ‰æ²¡æœ‰è¢«ç®—è¿‡äº†</span></span><br><span class="line"><span class="keyword">int</span> cnt[maxLen]; <span class="comment">//è®°å½•æŸä¸ªæ•°å­—åé¢æœ‰å‡ ä¸ªä¸åŒçš„æ•°å­—</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        cin &gt;&gt; arr[i];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">    <span class="built_in">memset</span>(cnt, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(cnt));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = n; i &gt;= <span class="number">1</span>; i--) <span class="comment">//æ±‚å‡ºæ¯ä¸ªæ•°å­—åé¢æœ‰å‡ ä¸ªä¸åŒçš„æ•°å­—</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(!vis[arr[i]])</span><br><span class="line">        &#123;</span><br><span class="line">            cnt[i] = cnt[i + <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">            vis[arr[i]] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            cnt[i] = cnt[i + <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> ans = <span class="number">0</span>; <span class="comment">//æ³¨æ„ç”¨long long</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(!vis[arr[i]])</span><br><span class="line">        &#123;</span><br><span class="line">            ans += cnt[i + <span class="number">1</span>];</span><br><span class="line">            vis[arr[i]] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="CodeForces-962D-Div2â€”è¾ƒä¸ºç²¾è¾Ÿçš„è§£æ³•"><a href="#CodeForces-962D-Div2â€”è¾ƒä¸ºç²¾è¾Ÿçš„è§£æ³•" class="headerlink" title="CodeForces - 962D(Div2â€”è¾ƒä¸ºç²¾è¾Ÿçš„è§£æ³•)"></a>CodeForces - 962D(Div2â€”è¾ƒä¸ºç²¾è¾Ÿçš„è§£æ³•)</h1><p><a href="https://vjudge.net/problem/1484062/origin">CodeForces - 962D</a></p><p>é¢˜æ„ï¼šç»™å‡ºä¸€ä¸ªæ•´æ•°åºåˆ—ã€‚é€‰æ‹©å…¶ä¸­æœ€å°ä¸”å‡ºç°ä¸¤æ¬¡ï¼ˆæˆ–ä»¥ä¸Šï¼‰çš„æ•°ï¼ŒæŠŠæœ€å·¦è¾¹çš„ä¸¤ä¸ªä»åºåˆ—ä¸­ç§»é™¤ï¼Œ ç„¶åæŠŠå®ƒä»¬çš„å’Œæ”¾åˆ°å®ƒä»¬çš„åé¢ç¬¬ä¸€ä½ã€‚ä¸æ–­é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°åºåˆ—ä¸­çš„æ¯ä¸ªæ•°éƒ½æ˜¯å”¯ä¸€çš„ã€‚ è¾“å‡ºæœ€åçš„åºåˆ—ã€‚</p><p>è¿™é“é¢˜å¯ä»¥ç”¨ä¼˜å…ˆé˜Ÿåˆ—ï¼Œsetå’Œmapæ¥åšï¼ŒæŒ‘äº†ä¸€ç§æ¯”è¾ƒç²¾è¾Ÿçš„è§£æ³•</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Status:AcceptedTime:171ms</span></span><br><span class="line"><span class="comment">Memory:84344kBLength:593</span></span><br><span class="line"><span class="comment">2018-07-21 16:06:35</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll; <span class="comment">//æ³¨æ„è¦ç”¨long long</span></span><br><span class="line">map&lt;ll, ll&gt;Map; <span class="comment">//Map[i]ä»£è¡¨iåœ¨æ•°ç»„ä¸­å‡ºç°çš„ä½ç½®</span></span><br><span class="line"></span><br><span class="line">ll arr[<span class="number">10000000</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">int</span> cnt = n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; arr[i];</span><br><span class="line">        <span class="keyword">while</span>(Map[arr[i]])  <span class="comment">//æŸ¥çœ‹å‰é¢æœ‰æ²¡æœ‰å‡ºç°è¿‡ç›¸åŒçš„æ•°å­—ï¼Œå¦‚æœæœ‰ï¼Œé‚£ä¹ˆMap[arr[i]]é0</span></span><br><span class="line">        &#123;</span><br><span class="line">            arr[Map[arr[i]]] = <span class="number">0</span>; <span class="comment">//å°†ä¹‹å‰é‚£ä¸ªä½ç½®çš„æ•°å­—å˜ä¸º0ï¼Œä¸ºäº†åœ¨åé¢è¾“å‡ºæ—¶åˆ¤æ–­ä¸æ˜¯0å°±è¾“å‡º</span></span><br><span class="line">            Map[arr[i]] = <span class="number">0</span>; <span class="comment">//å¤„ç†å®Œåæ¢å¤MapçŠ¶æ€</span></span><br><span class="line">            arr[i] += arr[i]; </span><br><span class="line">            cnt--; <span class="comment">//åºåˆ—ä¸ªæ•°å‡ä¸€</span></span><br><span class="line">        &#125;</span><br><span class="line">        Map[arr[i]] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; cnt &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(arr[i])</span><br><span class="line">            cout &lt;&lt; arr[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="1055B-Alice-and-Hairdresser-div2â€”æ€ç»´"><a href="#1055B-Alice-and-Hairdresser-div2â€”æ€ç»´" class="headerlink" title="1055B - Alice and Hairdresser(div2â€”æ€ç»´)"></a><a href="http://codeforces.com/problemset/problem/1055/B">1055B - Alice and Hairdresser(div2â€”æ€ç»´)</a></h1><p>æ ‡ç­¾æ˜¯å†™ç€å¹¶æŸ¥é›†å’Œæ¨¡æ‹Ÿï¼Œåˆšå¼€å§‹æƒ³åˆ°ç”¨å¹¶æŸ¥é›†ï¼Œä½†æ˜¯åæ¥è¡Œä¸é€šï¼ŒçŸ¥é“å¾—åˆ†é›†åˆï¼Œè¿˜å¾—åˆå¹¶é›†åˆï¼Œä½†æ˜¯ä¸çŸ¥é“æ€ä¹ˆå­˜å‚¨ï¼Œç„¶åçœ‹äº†åˆ«çš„ä»£ç æ‰çŸ¥é“ä¸ç”¨é‚£ä¹ˆéº»çƒ¦ï¼Œç›´æ¥åˆ¤æ–­å·¦å³æ•°å­—å°±å¯ä»¥ç¡®å®šä¸€ä¸ªé›†åˆï¼Œè¿˜æ˜¯å¤ªå¹´è½»ã€‚</p><p>é¢˜ç›®å¤§æ„ï¼š</p><pre><code>   Aliceå»å‰ªå‘ï¼Œä¸€å…±æœ‰næ ¹å¤´å‘ï¼Œé•¿åº¦å¤§äºlçš„å¤´å‘éœ€è¦å‰ªï¼Œå¦‚æœä¸€ä¸ªåŒºé—´ä¸­çš„å¤´å‘é•¿åº¦å…¨éƒ¨å¤§äºlï¼Œé‚£ä¹ˆå¯ä»¥ä¸€æ¬¡ç»™è¿™ä¸ªåŒºé—´çš„æ‰€æœ‰å¤´å‘éƒ½å‰ªï¼Œè¾“å…¥ç»™å‡º0æ˜¯è¯¢é—®éœ€è¦å‰ªå‡ æ¬¡ã€‚ç»™å‡º1æ˜¯ç¬¬pæ ¹å¤´å‘é•¿äº†dé•¿åº¦</code></pre><p>é¢˜è§£ï¼š</p><pre><code>  é¦–å…ˆæ€»è®¡ä¸€ä¸‹ç»™å‡ºçš„æ•°æ®éœ€è¦å‰ªçš„åŒºé—´æœ‰å‡ ä¸ªï¼Œä¹Ÿå°±æ˜¯éœ€è¦å‰ªçš„æ€»æ¬¡æ•°æ˜¯å¤šå°‘ã€‚  å½“ç»™ç¬¬pæ ¹å¤´å‘å¢é•¿äº†dåï¼Œä»¥å‰å°äºlï¼Œå¢é•¿ä¹‹åå¤§äºlçš„è¯         å¦‚æœå·¦å³ä¸¤è¾¹éƒ½å¤§äºlï¼Œé‚£ä¹ˆç°åœ¨ç¬¬pæ ¹ä¹Ÿå¤§äºläº†ï¼Œå°±å¯ä»¥å’Œå·¦å³ä¸¤è¾¹è¿æˆç‰‡ï¼Œä¸€æ¬¡å‡æ‰ï¼Œæ‰€ä»¥è¦å‰ªçš„æ€»æ¬¡æ•°å‡ä¸€ã€‚         å¦‚æœå·¦å³ä¸¤è¾¹éƒ½å°äºç­‰äºlï¼Œé‚£ä¹ˆç¬¬pæ ¹ç°åœ¨éœ€è¦å‰ªäº†ï¼Œå°±è¦å‰ªçš„æ€»æ¬¡æ•°åŠ ä¸€ã€‚ å…¶ä»–æƒ…å†µéƒ½ä¸å½±å“å‰ªçš„æ€»æ¬¡æ•°ã€‚</code></pre><hr><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/hxxjxw/article/details/83990002">https://blog.csdn.net/hxxjxw/article/details/83990002</a> </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">submit time:2018-11-20 12:39:55</span></span><br><span class="line"><span class="comment">time:109 ms</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1E6</span>;</span><br><span class="line">ll arr[MAXN];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, m, l, cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;n, &amp;m, &amp;l);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>, arr+i);</span><br><span class="line">        <span class="keyword">if</span>(arr[i<span class="number">-1</span>] &lt;= l &amp;&amp; arr[i] &gt; l)</span><br><span class="line">            cnt++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> q, p, d;</span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;q);</span><br><span class="line">        <span class="keyword">if</span>(q == <span class="number">0</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, cnt);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;p, &amp;d);</span><br><span class="line">            <span class="keyword">if</span>(arr[p] &lt;= l &amp;&amp; (arr[p]+d) &gt; l)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(arr[p<span class="number">-1</span>] &lt;= l &amp;&amp; arr[p+<span class="number">1</span>]&lt;= l)</span><br><span class="line">                    cnt++;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(arr[p<span class="number">-1</span>] &gt; l &amp;&amp; arr[p+<span class="number">1</span>] &gt; l)</span><br><span class="line">                    cnt--;</span><br><span class="line">            &#125;</span><br><span class="line">            arr[p] += d;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="1088A-Ehab-and-another-construction-problem-æš´åŠ›ä¸O-1"><a href="#1088A-Ehab-and-another-construction-problem-æš´åŠ›ä¸O-1" class="headerlink" title="1088A. Ehab and another construction problem(æš´åŠ›ä¸O(1))"></a><a href="http://codeforces.com/contest/1088/problem/A">1088A. Ehab and another construction problem(æš´åŠ›ä¸O(1))</a></h1><p>ç»™å®šä¸€ä¸ªnï¼Œæ‰¾åˆ°ä¸¤ä¸ªæ•°<code>a,b&#123;1 &lt;= a,b &lt;= n&#125;</code>ä½¿å¾—aè¢«bæ•´é™¤ä¸”<code>ab&gt;n</code>ä¸”<code>a/b&lt;n</code><br><em>ç¬¦åˆæ¡ä»¶çš„a,béå¸¸å¤šï¼Œä»»æ„è¾“å‡ºä¸€ä¸ªå³å¯</em></p><h2 id="è§£æ³•1â€”-æš´åŠ›"><a href="#è§£æ³•1â€”-æš´åŠ›" class="headerlink" title="è§£æ³•1â€”-æš´åŠ›"></a>è§£æ³•1â€”-æš´åŠ›</h2><p>æš´åŠ›çš„è¯å°±æ˜¯ç”¨ä¸¤ä¸ªforå¾ªç¯å»æš´åŠ›æšä¸¾aï¼Œbï¼Œç„¶åæ‰¾å‡ºç¬¦åˆæ¡ä»¶çš„aï¼Œbè¾“å‡ºå°±è¡Œäº†ã€‚</p><h2 id="è§£æ³•2â€”-ç¡®å®šä¸€ä¸ªæ•°"><a href="#è§£æ³•2â€”-ç¡®å®šä¸€ä¸ªæ•°" class="headerlink" title="è§£æ³•2â€”-ç¡®å®šä¸€ä¸ªæ•°"></a>è§£æ³•2â€”-ç¡®å®šä¸€ä¸ªæ•°</h2><p>æˆ‘ä»¬å¯ä»¥ç¡®å®šbä¸º2ï¼Œé‚£ä¹ˆaçš„å€¼å°±æ˜¯<code>n-n%2</code>ï¼Œå¯ä»¥å¾—åˆ°å¦‚ä¸‹è¯æ˜ï¼š<br>(n-n%2)çš„æ„æ€ï¼šå°±æ˜¯åœ¨å°äºç­‰äºnçš„èŒƒå›´å†…æ‰¾å‡ºæœ€å¤§èƒ½è¢«æ¨¡2çš„æ•°ï¼Œä¾‹å¦‚11ï¼Œ<code>n%2=11%2=1</code>ï¼Œé‚£ä¹ˆ<code>n-n%2=10</code>ï¼Œåˆå¦‚12ï¼Œ<code>n%2=12%2=0</code>ï¼Œé‚£ä¹ˆ<code>n-n%2=12</code>ã€‚<br>ç„¶åçš„è¯å¯ä»¥è¯æ˜ä¸‹ï¼Œé¦–å…ˆçœ‹èŒƒå›´ï¼Œå½“<code>n&gt;=2</code>æ—¶ï¼Œbè‚¯å®šæ˜¯æ»¡è¶³<code>[1ï¼Œ n]</code>ï¼Œçœ‹ä¸Šé¢çš„ä¸¤ä¸ªä¾‹å­ï¼Œå½“næ˜¯å¥‡æ•°æ—¶ï¼Œå› ä¸ºaè‚¯å®šæ˜¯å¾—åˆ°å¶æ•°ï¼Œå› ä¸ºnæ˜¯å¥‡æ•°ï¼Œåˆæ˜¯å‡æ³•ï¼Œæ•…æ­¤æ—¶aå°±æ˜¯<code>a-1</code>äº†ï¼Œç¬¦åˆæ¡ä»¶ï¼Œå½“næ˜¯å¶æ•°æ—¶ï¼Œé‚£ä¹ˆæ˜¯æ ¹æ®ä¸Šå¼å¾—å‡ºçš„aå°±æ˜¯nã€‚<br>å½“næ˜¯å¥‡æ•°æ—¶ï¼Œaä¸º<code>n-1</code>ï¼Œbä¸º2ï¼Œé‚£ä¹ˆå°±æœ‰<code>a*b=2*(n-1)</code>ï¼Œå½“<code>n&gt;2</code>æ—¶æ»¡è¶³<code>a*b&gt;n</code>ï¼ŒåŒæ—¶æœ‰<code>(n-1)/2&lt;n</code><br>å½“næ˜¯å¶æ•°æ—¶ï¼Œaä¸º<code>n</code>ï¼Œ bä¸º2ï¼Œé‚£ä¹ˆå°±æœ‰<code>a*b=2*n</code>ï¼Œå½“<code>n&gt;=1</code>æ—¶æ»¡è¶³<code>a*b&gt;n</code>ï¼ŒåŒæ—¶æœ‰<code>n/2&lt;n</code><br>æ ¹æ®ä¸Šé¢å¯ä»¥å¾—å‡ºï¼Œå½“n&gt;=2æ—¶ï¼Œå›ºå®šbä¸º2ï¼Œé‚£ä¹ˆaçš„å€¼å°±æ˜¯<code>n-n%2</code>ã€‚<br><em>å¯ä»¥çœ‹å‡ºå›ºå®šbä¸º2çš„æƒ…å†µå®¹æ˜“è¯æ˜ï¼Œä½†æ˜¯å›ºå®šbä¸º3ï¼ˆæˆ–è€…3ä»¥åï¼‰çš„æƒ…å†µå°±éš¾ä»¥è®¨è®ºã€‚</em><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    cin &gt;&gt; x;</span><br><span class="line">    <span class="keyword">if</span> (x==<span class="number">1</span>)</span><br><span class="line">    cout &lt;&lt; <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    cout &lt;&lt; x-x%<span class="number">2</span> &lt;&lt; <span class="string">&#x27;   &#x27;</span> &lt;&lt; <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="1088C-Ehab-and-a-2-operation-task-é€šè¿‡æ“ä½œä½¿æ•°ç»„é€’å¢"><a href="#1088C-Ehab-and-a-2-operation-task-é€šè¿‡æ“ä½œä½¿æ•°ç»„é€’å¢" class="headerlink" title="1088C. Ehab and a 2-operation task(é€šè¿‡æ“ä½œä½¿æ•°ç»„é€’å¢)"></a><a href="http://codeforces.com/contest/1088/problem/C">1088C. Ehab and a 2-operation task(é€šè¿‡æ“ä½œä½¿æ•°ç»„é€’å¢)</a></h1><p>ç»™å®šä¸€ä¸ªåºåˆ— ä¸¤ç§æ“ä½œï¼š</p><ol><li>é€‰å®šä¸€ä¸ªiï¼Œå°†[1,i]å†…çš„æ‰€æœ‰æ•°åŠ ä¸Šx</li><li>é€‰å®šä¸€ä¸ªiï¼Œå°†[i,j]å†…æ‰€æœ‰æ•°æ¨¡x</li></ol><p>è®©ä½ åœ¨ä¸å¤§äºn+1æ¬¡æ“ä½œåä½¿åºåˆ—ä¸¥æ ¼é€’å¢ï¼Œè¾“å‡ºæ‰€è¿›è¡Œçš„æ“ä½œ</p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/_20181205_100439.JPG"></p><p>è§£æ³•çœ‹ä¸Šå›¾ï¼Œä¸‹é¢ä»£ç ç”¨çš„æ˜¯Second solution</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">submit time: 2018-12-05 10:02:07</span></span><br><span class="line"><span class="comment">time: 31ms</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">int</span> num = <span class="number">1e5</span>;</span><br><span class="line">    cout &lt;&lt; n + <span class="number">1</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;1 &quot;</span> &lt;&lt; n  &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">int</span> input;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; input;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;2 &quot;</span> &lt;&lt; i &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; input + num - i &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ€ç»´é¢˜ç›® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LinuxShell</title>
      <link href="/2018/06/16/LinuxShell/"/>
      <url>/2018/06/16/LinuxShell/</url>
      
        <content type="html"><![CDATA[<p>LinuxShellæ“ä½œå°æ€»ç»“</p><span id="more"></span><h1 id="sedï¼Œè·å–å½“å‰è·¯å¾„ï¼Œå¼ºåˆ¶å¤åˆ¶ï¼Œduçš„ç”¨æ³•"><a href="#sedï¼Œè·å–å½“å‰è·¯å¾„ï¼Œå¼ºåˆ¶å¤åˆ¶ï¼Œduçš„ç”¨æ³•" class="headerlink" title="sedï¼Œè·å–å½“å‰è·¯å¾„ï¼Œå¼ºåˆ¶å¤åˆ¶ï¼Œduçš„ç”¨æ³•"></a>sedï¼Œè·å–å½“å‰è·¯å¾„ï¼Œå¼ºåˆ¶å¤åˆ¶ï¼Œduçš„ç”¨æ³•</h1><h2 id="å‘½ä»¤æ ¼å¼"><a href="#å‘½ä»¤æ ¼å¼" class="headerlink" title="å‘½ä»¤æ ¼å¼"></a>å‘½ä»¤æ ¼å¼</h2><p>sed [é€‰é¡¹] â€˜å‘½ä»¤â€™ è¾“å…¥æ–‡æœ¬ </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed [-nefri] â€˜commandâ€™ è¾“å…¥æ–‡æœ¬   </span><br></pre></td></tr></table></figure><h2 id="é€‰é¡¹ä¸å‚æ•°"><a href="#é€‰é¡¹ä¸å‚æ•°" class="headerlink" title="é€‰é¡¹ä¸å‚æ•°"></a>é€‰é¡¹ä¸å‚æ•°</h2><div class="table-container"><table><thead><tr><th style="text-align:center">é€‰é¡¹</th><th style="text-align:left">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">-n</td><td style="text-align:left">ä½¿ç”¨å®‰é™(silent)æ¨¡å¼ã€‚åœ¨ä¸€èˆ¬ sed çš„ç”¨æ³•ä¸­ï¼Œæ‰€æœ‰æ¥è‡ª STDIN çš„æ•°æ®ä¸€èˆ¬éƒ½ä¼šè¢«åˆ—å‡ºåˆ°ç»ˆç«¯ä¸Šã€‚ä½†å¦‚æœåŠ ä¸Šå‚æ•°åï¼Œåˆ™åªæœ‰ç»è¿‡sed ç‰¹æ®Šå¤„ç†çš„é‚£ä¸€è¡Œ(æˆ–è€…åŠ¨ä½œ)æ‰ä¼šè¢«åˆ—å‡ºæ¥</td></tr><tr><td style="text-align:center">-e</td><td style="text-align:left">ç›´æ¥åœ¨å‘½ä»¤åˆ—æ¨¡å¼ä¸Šè¿›è¡Œ sed çš„åŠ¨ä½œç¼–è¾‘</td></tr><tr><td style="text-align:center">-f</td><td style="text-align:left">ç›´æ¥å°† sed çš„åŠ¨ä½œå†™åœ¨ä¸€ä¸ªæ–‡ä»¶å†…ï¼Œ -f filename åˆ™å¯ä»¥è¿è¡Œ filename å†…çš„ sed åŠ¨ä½œ</td></tr><tr><td style="text-align:center">-r</td><td style="text-align:left">sed çš„åŠ¨ä½œæ”¯æŒçš„æ˜¯å»¶ä¼¸å‹æ­£è§„è¡¨ç¤ºæ³•çš„è¯­æ³•ã€‚(é»˜è®¤æ˜¯åŸºç¡€æ­£è§„è¡¨ç¤ºæ³•è¯­æ³•)</td></tr><tr><td style="text-align:center">-i</td><td style="text-align:left">ç›´æ¥ä¿®æ”¹è¯»å–çš„æ–‡ä»¶å†…å®¹ï¼Œè€Œä¸æ˜¯è¾“å‡ºåˆ°ç»ˆç«¯</td></tr></tbody></table></div><h2 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h2><div class="table-container"><table><thead><tr><th style="text-align:center">å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">a</td><td>æ–°å¢ï¼Œ a çš„åé¢å¯ä»¥æ¥å­—ä¸²ï¼Œè€Œè¿™äº›å­—ä¸²ä¼šåœ¨æ–°çš„ä¸€è¡Œå‡ºç°(ç›®å‰çš„ä¸‹ä¸€è¡Œ)</td></tr><tr><td style="text-align:center">c</td><td>å–ä»£ï¼Œ c çš„åé¢å¯ä»¥æ¥å­—ä¸²ï¼Œè¿™äº›å­—ä¸²å¯ä»¥å–ä»£n1,n2 ä¹‹é—´çš„è¡Œï¼</td></tr><tr><td style="text-align:center">d</td><td>åˆ é™¤ï¼Œå› ä¸ºæ˜¯åˆ é™¤å•Šï¼Œæ‰€ä»¥ dåé¢é€šå¸¸ä¸æ¥ä»»ä½•å’šå’š</td></tr><tr><td style="text-align:center">i</td><td>æ’å…¥ï¼Œ içš„åé¢å¯ä»¥æ¥å­—ä¸²ï¼Œè€Œè¿™äº›å­—ä¸²ä¼šåœ¨æ–°çš„ä¸€è¡Œå‡ºç°(ç›®å‰çš„ä¸Šä¸€è¡Œ)</td></tr><tr><td style="text-align:center">p</td><td>è¾“å‡ºï¼Œäº¦å³å°†æŸä¸ªé€‰æ‹©çš„èµ„æ–™è¾“å‡ºã€‚é€šå¸¸ p ä¼šä¸å‚æ•° sed-n ä¸€èµ·è¿ä½œ</td></tr><tr><td style="text-align:center">s</td><td>å–ä»£ï¼Œå¯ä»¥ç›´æ¥è¿›è¡Œå–ä»£çš„å·¥ä½œå“©ï¼é€šå¸¸è¿™ä¸ª sçš„åŠ¨ä½œå¯ä»¥æ­é…æ­£åˆ™è¡¨è¾¾å¼ï¼ä¾‹å¦‚ 1,20s/old/new/g å°±æ˜¯å•¦ï¼</td></tr></tbody></table></div><h2 id="å¯¹è¡Œæ“ä½œ"><a href="#å¯¹è¡Œæ“ä½œ" class="headerlink" title="å¯¹è¡Œæ“ä½œ"></a>å¯¹è¡Œæ“ä½œ</h2><p>ç°æœ‰ä¸€æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> cat ~/test.sh</span> </span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">str1=&quot;[archlinuxcn]&quot;</span><br><span class="line">str2=&quot;Server = https://mirrors.ustc.edu.cn/archlinuxcn/\$arch&quot;</span><br><span class="line">echo $&#123;str2&#125;</span><br><span class="line">echo &quot;å†™å…¥å®Œæˆ&quot;</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤ä¸€è¡Œ"><a href="#åˆ é™¤ä¸€è¡Œ" class="headerlink" title="åˆ é™¤ä¸€è¡Œ"></a>åˆ é™¤ä¸€è¡Œ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;1d&#x27; ~/test.sh</span><br></pre></td></tr></table></figure><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><p>(ä»¥ååŒç†)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> sed <span class="string">&#x27;1d&#x27;</span> ~/test.sh</span></span><br><span class="line">str1=&quot;[archlinuxcn]&quot;</span><br><span class="line">str2=&quot;Server = https://mirrors.ustc.edu.cn/archlinuxcn/\$arch&quot;</span><br><span class="line">echo $&#123;str2&#125;</span><br><span class="line">echo &quot;å†™å…¥å®Œæˆ&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash"> cat ~/test.sh</span>  </span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">str1=&quot;[archlinuxcn]&quot;</span><br><span class="line">str2=&quot;Server = https://mirrors.ustc.edu.cn/archlinuxcn/\$arch&quot;</span><br><span class="line">echo $&#123;str2&#125;</span><br><span class="line">echo &quot;å†™å…¥å®Œæˆ&quot;</span><br></pre></td></tr></table></figure><p>å¯¹æºæ–‡ä»¶è¿›è¡Œæ“ä½œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> sed -i <span class="string">&#x27;1d&#x27;</span> ~/test.sh</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> cat ~/test.sh</span>           </span><br><span class="line">str1=&quot;[archlinuxcn]&quot;</span><br><span class="line">str2=&quot;Server = https://mirrors.ustc.edu.cn/archlinuxcn/\$arch&quot;</span><br><span class="line">echo $&#123;str2&#125;</span><br><span class="line">echo &quot;å†™å…¥å®Œæˆ&quot;</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤æœ€åä¸€è¡Œ"><a href="#åˆ é™¤æœ€åä¸€è¡Œ" class="headerlink" title="åˆ é™¤æœ€åä¸€è¡Œ"></a>åˆ é™¤æœ€åä¸€è¡Œ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;$d&#x27; ~/test.sh</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤ç¬¬ä¸€è¡Œåˆ°ç¬¬äºŒè¡Œ"><a href="#åˆ é™¤ç¬¬ä¸€è¡Œåˆ°ç¬¬äºŒè¡Œ" class="headerlink" title="åˆ é™¤ç¬¬ä¸€è¡Œåˆ°ç¬¬äºŒè¡Œ"></a>åˆ é™¤ç¬¬ä¸€è¡Œåˆ°ç¬¬äºŒè¡Œ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;1,2d&#x27; ~/test.sh</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤ç¬¬äºŒè¡Œåˆ°æœ€åä¸€è¡Œ"><a href="#åˆ é™¤ç¬¬äºŒè¡Œåˆ°æœ€åä¸€è¡Œ" class="headerlink" title="åˆ é™¤ç¬¬äºŒè¡Œåˆ°æœ€åä¸€è¡Œ"></a>åˆ é™¤ç¬¬äºŒè¡Œåˆ°æœ€åä¸€è¡Œ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;2,$d&#x27; ï½/test.sh</span><br></pre></td></tr></table></figure><h3 id="æ˜¾ç¤ºæŸè¡Œ"><a href="#æ˜¾ç¤ºæŸè¡Œ" class="headerlink" title="æ˜¾ç¤ºæŸè¡Œ"></a>æ˜¾ç¤ºæŸè¡Œ</h3><p>ç¬¬ä¸€è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n &#x27;1p&#x27; ï½/test.sh</span><br></pre></td></tr></table></figure><p>æœ€åä¸€è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n &#x27;$p&#x27; ~/test.sh</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€è¡Œåˆ°ç¬¬äºŒè¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n &#x27;1,2p&#x27; ï½/test.sh</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒè¡Œåˆ°æœ€åä¸€è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n &#x27;2,$p&#x27; ~/test.sh</span><br></pre></td></tr></table></figure><p><em>ä¸åŠ -n</em></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> sed <span class="string">&#x27;$p&#x27;</span> ~/test.sh</span>  </span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">str1=&quot;[archlinuxcn]&quot;</span><br><span class="line">str2=&quot;Server = https://mirrors.ustc.edu.cn/archlinuxcn/\$arch&quot;</span><br><span class="line">echo $&#123;str2&#125;</span><br><span class="line">echo &quot;å†™å…¥å®Œæˆ&quot;</span><br><span class="line">echo &quot;å†™å…¥å®Œæˆ&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> sed <span class="string">&#x27;1p&#x27;</span> ~/test.sh</span></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">str1=&quot;[archlinuxcn]&quot;</span><br><span class="line">str2=&quot;Server = https://mirrors.ustc.edu.cn/archlinuxcn/\$arch&quot;</span><br><span class="line">echo $&#123;str2&#125;</span><br><span class="line">echo &quot;å†™å…¥å®Œæˆ&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ˜¾ç¤ºå«æœ‰æŸä¸ªå­—ç¬¦ä¸²çš„æ‰€æœ‰è¡Œ"><a href="#æ˜¾ç¤ºå«æœ‰æŸä¸ªå­—ç¬¦ä¸²çš„æ‰€æœ‰è¡Œ" class="headerlink" title="æ˜¾ç¤ºå«æœ‰æŸä¸ªå­—ç¬¦ä¸²çš„æ‰€æœ‰è¡Œ"></a>æ˜¾ç¤ºå«æœ‰æŸä¸ªå­—ç¬¦ä¸²çš„æ‰€æœ‰è¡Œ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n &#x27;/echo/p&#x27; ~/test.sh </span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> sed -n <span class="string">&#x27;/echo/p&#x27;</span> ~/test.sh</span> </span><br><span class="line">echo $&#123;str2&#125;</span><br><span class="line">echo &quot;å†™å…¥å®Œæˆ&quot;</span><br></pre></td></tr></table></figure><h3 id="åœ¨ç¬¬ä¸€è¡Œåå¢åŠ ä¸€è¡Œ"><a href="#åœ¨ç¬¬ä¸€è¡Œåå¢åŠ ä¸€è¡Œ" class="headerlink" title="åœ¨ç¬¬ä¸€è¡Œåå¢åŠ ä¸€è¡Œ"></a>åœ¨ç¬¬ä¸€è¡Œåå¢åŠ ä¸€è¡Œ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;1a new str1&#x27; ~/test.sh</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> sed <span class="string">&#x27;1a new str1&#x27;</span> ~/test.sh</span></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">new str1</span><br><span class="line">str1=&quot;[archlinuxcn]&quot;</span><br><span class="line">str2=&quot;Server = https://mirrors.ustc.edu.cn/archlinuxcn/\$arch&quot;</span><br><span class="line">echo $&#123;str2&#125;</span><br><span class="line">echo &quot;å†™å…¥å®Œæˆ&quot;</span><br></pre></td></tr></table></figure><h3 id="åœ¨ç¬¬ä¸€è¡Œåˆ°ç¬¬ä¸‰è¡Œåå¢åŠ ä¸€è¡Œ"><a href="#åœ¨ç¬¬ä¸€è¡Œåˆ°ç¬¬ä¸‰è¡Œåå¢åŠ ä¸€è¡Œ" class="headerlink" title="åœ¨ç¬¬ä¸€è¡Œåˆ°ç¬¬ä¸‰è¡Œåå¢åŠ ä¸€è¡Œ"></a>åœ¨ç¬¬ä¸€è¡Œåˆ°ç¬¬ä¸‰è¡Œåå¢åŠ ä¸€è¡Œ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;1,3a new str&#x27; ~/test.sh</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> sed <span class="string">&#x27;1,3a new str&#x27;</span> ~/test.sh</span></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">new str</span><br><span class="line">str1=&quot;[archlinuxcn]&quot;</span><br><span class="line">new str</span><br><span class="line">str2=&quot;Server = https://mirrors.ustc.edu.cn/archlinuxcn/\$arch&quot;</span><br><span class="line">new str</span><br><span class="line">echo $&#123;str2&#125;</span><br><span class="line">echo &quot;å†™å…¥å®Œæˆ&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="åœ¨ç¬¬ä¸€è¡Œåå¢åŠ å¤šè¡Œ"><a href="#åœ¨ç¬¬ä¸€è¡Œåå¢åŠ å¤šè¡Œ" class="headerlink" title="åœ¨ç¬¬ä¸€è¡Œåå¢åŠ å¤šè¡Œ"></a>åœ¨ç¬¬ä¸€è¡Œåå¢åŠ å¤šè¡Œ</h3><p>ä½¿ç”¨\nå°†è¦å¢åŠ çš„æ¯è¡Œå†…å®¹åˆ†å‰²å¼€</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;1a newstr1\nnewstr2&#x27; ~/test.sh</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;1a newstr1\nnewstr2&#x27; ~/test.sh</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">newstr1</span><br><span class="line">newstr2</span><br><span class="line">str1=&quot;[archlinuxcn]&quot;</span><br><span class="line">str2=&quot;Server = https://mirrors.ustc.edu.cn/archlinuxcn/\$arch&quot;</span><br><span class="line">echo $&#123;str2&#125;</span><br><span class="line">echo &quot;å†™å…¥å®Œæˆ&quot;</span><br></pre></td></tr></table></figure><h1 id="è·å–å½“å‰è·¯å¾„"><a href="#è·å–å½“å‰è·¯å¾„" class="headerlink" title="è·å–å½“å‰è·¯å¾„"></a>è·å–å½“å‰è·¯å¾„</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">filepath=$(cd &quot;$(dirname &quot;$0&quot;)&quot;; pwd)</span><br></pre></td></tr></table></figure><p>dirname $0ï¼Œå–å¾—å½“å‰æ‰§è¡Œçš„è„šæœ¬æ–‡ä»¶çš„çˆ¶ç›®å½•</p><p>cd <code>dirname $0</code>ï¼Œè¿›å…¥è¿™ä¸ªç›®å½•(åˆ‡æ¢å½“å‰å·¥ä½œç›®å½•)</p><p>pwdï¼Œæ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•(cdæ‰§è¡Œåçš„)</p><h1 id="cp-få¼ºåˆ¶å¤åˆ¶"><a href="#cp-få¼ºåˆ¶å¤åˆ¶" class="headerlink" title="cp -få¼ºåˆ¶å¤åˆ¶"></a>cp -få¼ºåˆ¶å¤åˆ¶</h1><p>-f å‚æ•°æ˜¯å¼ºåˆ¶å¤åˆ¶,æ¯”å¦‚ä½ åœ¨Aæ–‡ä»¶å¤¹é‡Œé¢æœ‰ä¸ªæ–‡ä»¶åå«Bï¼Œç„¶åä½ æŠŠCæ–‡ä»¶å¤¹é‡Œé¢çš„å¦ä¸€ä¸ªæ–‡ä»¶åå«Bçš„å¤åˆ¶åˆ°Aé‡Œé¢,è¿™ä¸ªæ—¶å€™ä¼šç…§æˆå†²çª,ç„¶åä¼šæç¤ºä½ è¦ä¸è¦ç»§ç»­å¤åˆ¶.åŠ ä¸Š-f å°±ä¸ä¼šæç¤ºä½ äº†</p><h1 id="duçš„ç”¨æ³•"><a href="#duçš„ç”¨æ³•" class="headerlink" title="duçš„ç”¨æ³•"></a>duçš„ç”¨æ³•</h1><p>duå‘½ä»¤ç”¨æ¥æŸ¥çœ‹ç›®å½•æˆ–æ–‡ä»¶æ‰€å ç”¨ç£ç›˜ç©ºé—´çš„å¤§å°ã€‚å¸¸ç”¨é€‰é¡¹ç»„åˆä¸ºï¼šdu -sh</p><div class="table-container"><table><thead><tr><th>duå¸¸ç”¨çš„é€‰é¡¹</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>-h</td><td>ä»¥äººç±»å¯è¯»çš„æ–¹å¼æ˜¾ç¤º</td></tr><tr><td>-a</td><td>æ˜¾ç¤ºç›®å½•å ç”¨çš„ç£ç›˜ç©ºé—´å¤§å°ï¼Œè¿˜è¦æ˜¾ç¤ºå…¶ä¸‹ç›®å½•å’Œæ–‡ä»¶å ç”¨ç£ç›˜ç©ºé—´çš„å¤§å°</td></tr><tr><td>-s</td><td>æ˜¾ç¤ºç›®å½•å ç”¨çš„ç£ç›˜ç©ºé—´å¤§å°ï¼Œä¸è¦æ˜¾ç¤ºå…¶ä¸‹å­ç›®å½•å’Œæ–‡ä»¶å ç”¨çš„ç£ç›˜ç©ºé—´å¤§å°</td></tr><tr><td>â€”apparent-size</td><td>æ˜¾ç¤ºç›®å½•æˆ–æ–‡ä»¶è‡ªèº«çš„å¤§å°</td></tr><tr><td>-l</td><td>ç»Ÿè®¡ç¡¬é“¾æ¥å ç”¨ç£ç›˜ç©ºé—´çš„å¤§å°</td></tr><tr><td>-L</td><td>ç»Ÿè®¡ç¬¦å·é“¾æ¥æ‰€æŒ‡å‘çš„æ–‡ä»¶å ç”¨çš„ç£ç›˜ç©ºé—´å¤§å°</td></tr><tr><td>-c</td><td>æ˜¾ç¤ºå‡ ä¸ªç›®å½•æˆ–æ–‡ä»¶å ç”¨çš„ç£ç›˜ç©ºé—´å¤§å°ï¼Œè¿˜è¦ç»Ÿè®¡å®ƒä»¬çš„æ€»å’Œ</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>duå¸¸ç”¨å‘½ä»¤</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>du -sh</td><td>æŸ¥çœ‹å½“å‰ç›®å½•æ€»å…±å çš„å®¹é‡ã€‚è€Œä¸å•ç‹¬åˆ—å‡ºå„å­é¡¹å ç”¨çš„å®¹é‡</td></tr><tr><td>du -lh â€”max-depth=1</td><td>æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹ä¸€çº§å­æ–‡ä»¶å’Œå­ç›®å½•å ç”¨çš„ç£ç›˜å®¹é‡ã€‚</td></tr><tr><td>du -sh * \</td><td>sort -n</td><td>ç»Ÿè®¡å½“å‰æ–‡ä»¶å¤¹(ç›®å½•)å¤§å°ï¼Œå¹¶æŒ‰æ–‡ä»¶å¤§å°æ’åº</td></tr><tr><td>du -sk filename</td><td>æŸ¥çœ‹æŒ‡å®šæ–‡ä»¶å¤§å°</td></tr></tbody></table></div>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shell </tag>
            
            <tag> sed </tag>
            
            <tag> cp </tag>
            
            <tag> du </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¹¶æŸ¥é›†å…¥é—¨</title>
      <link href="/2018/06/13/%E5%B9%B6%E6%9F%A5%E9%9B%86%E5%85%A5%E9%97%A8/"/>
      <url>/2018/06/13/%E5%B9%B6%E6%9F%A5%E9%9B%86%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<p>å¹¶æŸ¥é›†æ¨¡æ¿</p><span id="more"></span><p>å‚è€ƒï¼š<br><a href="https://www.xuebuyuan.com/3256535.html">https://www.xuebuyuan.com/3256535.html</a></p><h1 id="æ€»ä½“æ€è·¯"><a href="#æ€»ä½“æ€è·¯" class="headerlink" title="æ€»ä½“æ€è·¯"></a>æ€»ä½“æ€è·¯</h1><p><strong>1. åˆå§‹åŒ–</strong>ï¼š</p><p>æŠŠæ¯ä¸ªç‚¹æ‰€åœ¨é›†åˆåˆå§‹åŒ–ä¸ºå…¶è‡ªèº«ã€‚  </p><p>é€šå¸¸æ¥è¯´ï¼Œè¿™ä¸ªæ­¥éª¤åœ¨æ¯æ¬¡ä½¿ç”¨è¯¥æ•°æ®ç»“æ„æ—¶åªéœ€è¦æ‰§è¡Œä¸€æ¬¡ï¼Œæ— è®ºä½•ç§å®ç°æ–¹å¼ï¼Œæ—¶é—´å¤æ‚åº¦å‡ä¸ºO(N)ã€‚  </p><p><strong>2.æŸ¥æ‰¾ï¼š</strong></p><p>æŸ¥æ‰¾å…ƒç´ æ‰€åœ¨çš„é›†åˆï¼Œå³æ ¹èŠ‚ç‚¹</p><p><strong>3.åˆå¹¶ï¼š</strong></p><p>ä¸¤ä¸ªå…ƒç´ æ‰€åœ¨çš„é›†åˆåˆå¹¶ä¸ºä¸€ä¸ªé›†åˆã€‚  </p><p>é€šå¸¸æ¥è¯´ï¼Œåˆå¹¶ä¹‹å‰ï¼Œåº”å…ˆåˆ¤æ–­ä¸¤ä¸ªå…ƒç´ æ˜¯å¦å±äºåŒä¸€é›†åˆï¼Œè¿™å¯ç”¨ä¸Šé¢çš„â€œæŸ¥æ‰¾â€æ“ä½œå®ç°</p><h1 id="çŠ¶æ€å‹ç¼©"><a href="#çŠ¶æ€å‹ç¼©" class="headerlink" title="çŠ¶æ€å‹ç¼©"></a>çŠ¶æ€å‹ç¼©</h1><p>å»ºç«‹é—¨æ´¾çš„è¿‡ç¨‹æ˜¯ç”¨joinå‡½æ•°ä¸¤ä¸ªäººä¸¤ä¸ªäººåœ°è¿æ¥èµ·æ¥çš„ï¼Œè°å½“è°çš„æ‰‹ä¸‹å®Œå…¨éšæœºã€‚æœ€åçš„æ ‘çŠ¶ç»“æ„ä¼šå˜æˆä»€ä¹ˆæ ·ï¼Œæˆ‘ä¹Ÿæ— æ³•é¢„çŸ¥ï¼Œä¸€å­—é•¿è›‡é˜µä¹Ÿæœ‰å¯èƒ½ã€‚è¿™æ ·æŸ¥æ‰¾çš„æ•ˆç‡å°±ä¼šæ¯”è¾ƒä½ä¸‹ã€‚æœ€ç†æƒ³çš„æƒ…å†µå°±æ˜¯æ‰€æœ‰äººçš„ç›´æ¥ä¸Šçº§éƒ½æ˜¯æŒé—¨ï¼Œä¸€å…±å°±ä¸¤çº§ç»“æ„ï¼Œåªè¦æ‰¾ä¸€æ¬¡å°±æ‰¾åˆ°æŒé—¨äº†ã€‚å“ªæ€•ä¸èƒ½å®Œå…¨åšåˆ°ï¼Œä¹Ÿæœ€å¥½å°½é‡æ¥è¿‘ã€‚è¿™æ ·å°±äº§ç”Ÿäº†è·¯å¾„å‹ç¼©ç®—æ³•ã€‚</p><h1 id="ä¾‹é¢˜"><a href="#ä¾‹é¢˜" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h1><h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p><strong>Input</strong></p><p>è¾“å…¥å¤šç»„æ•°æ®</p><p>æ¯ç»„æ•°æ®ç¬¬ä¸€è¡Œæ˜¯ä¸¤ä¸ªæ•´æ•°nï¼ˆ1ï¼œï¼nï¼œï¼10ï¼¾6ï¼‰ï¼Œmï¼ˆ1ï¼œï¼mï¼œï¼10ï¼¾6ï¼‰ã€‚åˆ†åˆ«è¡¨ç¤ºå…ƒç´ æ•°ã€æ“ä½œæ•°ï¼ˆåˆå§‹æ—¶æ¯ä¸ªå…ƒç´ ä»¥è‡ªå·±ä¸ºä¸€ä¸ªé›†åˆå…ƒç´ ç¼–å·æ˜¯1-nï¼‰  </p><p>æ¥ä¸‹æ¥mè¡Œï¼Œæ¯è¡Œæœ‰å¦‚ä¸‹å‡ ç§è¾“å…¥:    </p><p>union x yâ€”â€”è¡¨ç¤ºå°†xæ‰€åœ¨çš„é›†å°å’Œyæ‰€åœ¨çš„é›†åˆåˆå¹¶ä¸ºä¸€ä¸ªé›†åˆ   </p><p>same x yâ€”â€”è¯¢é—®xå’Œyæ˜¯å¦ä¸ºåŒä¸€ä¸ªé›†å°ï¼Œä¸ºåŒä¸€ä¸ªé›†åˆè¾“å‡º1ï¼Œä¸åŒé›†åˆè¾“å‡º0     </p><p>num xâ€”â€”è¯¢é—®xæ‰€åœ¨çš„é›†åˆå…±æœ‰å¤šå°‘ä¸ªå…ƒç´    </p><p>max xâ€”â€”è¯¢é—®xæ‰€åœ¨çš„é›†åˆä¸­å…ƒç´ ç¼–å·æœ€å¤§æ˜¯å¤šå°‘    </p><p>setuum è¯¢é—®ç°åœ¨æ€»å…±æœ‰å¤šå°‘ä¸ªé›†åˆ   </p><p><strong>Output</strong></p><p>å¯¹äºæ¯ä¸ªæ“ä½œè¾“å‡ºä¸€è¡Œï¼Œç”¨ä¸€ä¸ªæ•´æ•°è¡¨ç¤ºç­”æ¡ˆ</p><p><strong>SimpleInput</strong></p><p>5 10  </p><p>setnum  </p><p>same 1 2  </p><p>union 1 2  </p><p>same 1 2  </p><p>union 2 3  </p><p>same 1 3  </p><p>union 4 5  </p><p>setnum  </p><p>max 1  </p><p>num 4  </p><p><strong>SimpleOutput</strong></p><p>5<br>0<br>1<br>1<br>2<br>3<br>2  </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> len = <span class="number">1e6</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> pre[len], Max[len], num[len]; <span class="comment">//æ•°ç»„Maxï¼šä¿å­˜é›†åˆæœ€å¤§å€¼ï¼Œnumï¼šä¿å­˜çš„æ˜¯é›†åˆä¸ªæ•°</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Find</span><span class="params">(<span class="keyword">int</span> x)</span> <span class="comment">//è·¯å¾„å‹ç¼©</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> p, tmp;</span><br><span class="line">    p = x;</span><br><span class="line">    <span class="keyword">while</span>(x != pre[x]) <span class="comment">//åˆ¤æ–­ä¸Šä¸€çº§æ˜¯ä¸æ˜¯è‡ªå·±æœ¬èº«</span></span><br><span class="line">        x = pre[x]; <span class="comment">//å°†xå˜æˆxå¯¹åº”çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">while</span>(p != x) <span class="comment">//å¦‚æœä¸æ˜¯çš„è¯ï¼Œé‚£ä¹ˆå°±å°†xè¿åˆ°æ ¹èŠ‚ç‚¹ä¸Šé¢å»</span></span><br><span class="line">    &#123;</span><br><span class="line">        tmp = pre[p];</span><br><span class="line">        pre[p] = x;</span><br><span class="line">        p = tmp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Join</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> p, q;</span><br><span class="line">    p = <span class="built_in">Find</span>(x);</span><br><span class="line">    q = <span class="built_in">Find</span>(y);</span><br><span class="line">    <span class="keyword">if</span>(p != q)</span><br><span class="line">    &#123;</span><br><span class="line">        pre[p] = q;</span><br><span class="line">        Max[q] = <span class="built_in">max</span>(Max[q], Max[p]); <span class="comment">//æ±‚é›†åˆæœ€å¤§å€¼ï¼Œå› ä¸ºç°åœ¨qæ˜¯æ ¹èŠ‚ç‚¹ï¼Œå°†æ ¹èŠ‚ç‚¹å’Œä¹‹å‰pçš„å€¼æƒ³æ¯”è¾ƒ</span></span><br><span class="line">        num[q] += num[p]; <span class="comment">//æ±‚é›†åˆçš„ä¸ªæ•°ï¼Œå°†åŸæœ¬æ ¹èŠ‚ç‚¹çš„æ•°åŠ ä¸Šåæ¥å¹¶ä¸Šçš„</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        pre[i] = i;  <span class="comment">//è®©è‡ªå·±æˆä¸ºæ ¹èŠ‚ç‚¹ï¼Œå³å„è‡ªéƒ½æ²¡æœ‰å…³ç³»</span></span><br><span class="line">        num[i] = <span class="number">1</span>;</span><br><span class="line">        Max[i] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> x, y;</span><br><span class="line">        string s;</span><br><span class="line">        cin &gt;&gt; s; </span><br><span class="line">        <span class="keyword">int</span> cnt = n; <span class="comment">//åˆå§‹çŠ¶æ€å…±æœ‰nä¸ªé›†åˆ</span></span><br><span class="line">        <span class="keyword">if</span>(s == <span class="string">&quot;union&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">Find</span>(x) != <span class="built_in">Find</span>(y))  <span class="comment">//ä¸åœ¨ä¸€ä¸ªé›†åˆï¼Œåˆå¹¶</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">Join</span>(x, y);</span><br><span class="line">                cnt--; <span class="comment">//é›†åˆä¸ªæ•°å‡ä¸€</span></span><br><span class="line">            &#125;             </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(s == <span class="string">&quot;same&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">Find</span>(x) == <span class="built_in">Find</span>(y))</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;1&quot;</span> &lt;&lt; endl;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;0&quot;</span> &lt;&lt; endl;</span><br><span class="line">        &#125;   </span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(s == <span class="string">&quot;num&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; x;</span><br><span class="line">            cout &lt;&lt; num[<span class="built_in">Find</span>(x)] &lt;&lt; endl; <span class="comment">//æ‰¾åˆ°æ ¹ç»“ç‚¹ï¼Œç„¶åè¾“å‡ºä¸ªæ•°</span></span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(s == <span class="string">&quot;max&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; x;</span><br><span class="line">            cout &lt;&lt; Max[<span class="built_in">Find</span>(x)] &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">            cout &lt;&lt; cnt &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ¨¡æ¿"><a href="#æ¨¡æ¿" class="headerlink" title="æ¨¡æ¿"></a>æ¨¡æ¿</h1><p><img src="/2018/06/13/%E5%B9%B6%E6%9F%A5%E9%9B%86%E5%85%A5%E9%97%A8/timu.png" alt></p><h2 id="æœªè·¯å¾„å‹ç¼©"><a href="#æœªè·¯å¾„å‹ç¼©" class="headerlink" title="æœªè·¯å¾„å‹ç¼©"></a>æœªè·¯å¾„å‹ç¼©</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> Max = <span class="number">30010</span>;</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="keyword">int</span> pre[Max],People[Max];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(x != pre[x])</span><br><span class="line">x = pre[x];</span><br><span class="line"><span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Union</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">x = <span class="built_in">find</span>(x);</span><br><span class="line">y = <span class="built_in">find</span>(y);</span><br><span class="line"><span class="keyword">if</span>(x!=y)</span><br><span class="line">pre[y] = x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="keyword">int</span> a,b,num;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">pre[i] = i;</span><br><span class="line"><span class="keyword">while</span>(m--)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;num);</span><br><span class="line"><span class="keyword">if</span>(num&gt;<span class="number">0</span>)</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; num; i++)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;b);</span><br><span class="line"><span class="built_in">Union</span>(a,b);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">People[i] = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> k;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">k = <span class="built_in">find</span>(i);</span><br><span class="line">People[k]++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> maxn = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">maxn = <span class="built_in">max</span>(maxn,People[i]);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,maxn);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è·¯å¾„å‹ç¼©ï¼Œæ•ˆç‡æ›´é«˜"><a href="#è·¯å¾„å‹ç¼©ï¼Œæ•ˆç‡æ›´é«˜" class="headerlink" title="è·¯å¾„å‹ç¼©ï¼Œæ•ˆç‡æ›´é«˜"></a>è·¯å¾„å‹ç¼©ï¼Œæ•ˆç‡æ›´é«˜</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> Max = <span class="number">30005</span>;</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="keyword">int</span> par[Max],People[Max];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span>  <span class="comment">//æ‰¾æ ¹</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(par[x]==x)</span><br><span class="line">       <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> par[x]=<span class="built_in">find</span>(par[x]);<span class="comment">//è·¯å¾„å‹ç¼©ï¼Œä½¿è·¯å¾„ä¸Šç»è¿‡çš„æ‰€æœ‰èŠ‚ç‚¹ç›´æ¥è¿åˆ°æ ¹</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Union</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> <span class="comment">//åˆå¹¶</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">x = <span class="built_in">find</span>(x); <span class="comment">//æ‰¾xçš„æ ¹ï¼Œ</span></span><br><span class="line">y = <span class="built_in">find</span>(y); <span class="comment">//æ‰¾yçš„æ ¹</span></span><br><span class="line"><span class="keyword">if</span>(x!=y)     <span class="comment">//æ ¹ä¸åŒï¼Œå¯è§ä¸åœ¨åŒä¸€æ£µæ ‘</span></span><br><span class="line">par[y] = x;  <span class="comment">//æŠŠä¸€æ£µæ ‘çš„æ ¹ä½œä¸ºå¦ä¸€æ£µæ ‘çš„æ ¹çš„å„¿å­</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="keyword">int</span> a,b,num;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">par[i] = i;  <span class="comment">//åˆå§‹åŒ–ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸€å¼€å§‹éƒ½å„è‡ªæ˜¯æ ¹ï¼Œå…¶paræ˜¯å…¶è‡ªå·±ã€‚</span></span><br><span class="line"><span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;num);</span><br><span class="line"><span class="keyword">if</span>(num&gt;<span class="number">0</span>)</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; num; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;b);</span><br><span class="line"><span class="built_in">Union</span>(a,b);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">People[i] = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> k;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">k = <span class="built_in">find</span>(i);</span><br><span class="line">People[k]++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> maxn = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(People[i]&gt;maxn)</span><br><span class="line">            maxn = People[i];</span><br><span class="line">    &#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,maxn);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¹¶æŸ¥é›† </tag>
            
            <tag> çŠ¶æ€å‹ç¼© </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°è®º</title>
      <link href="/2018/05/24/%E6%95%B0%E8%AE%BA/"/>
      <url>/2018/05/24/%E6%95%B0%E8%AE%BA/</url>
      
        <content type="html"><![CDATA[<p>æ¬§å‡ é‡Œå¾—åŠå…¶æ‰©å±•ï¼Œç´ æ•°ï¼Œæ¨¡è¿ç®—ï¼Œå¿«é€Ÿå¹‚ï¼Œæ¬§æ‹‰å‡½æ•°ï¼Œå¿«é€Ÿä¹˜ã€‚</p><span id="more"></span><h1 id="æ¬§å‡ é‡Œå¾—â€”æœ€å¤§å…¬çº¦æ•°"><a href="#æ¬§å‡ é‡Œå¾—â€”æœ€å¤§å…¬çº¦æ•°" class="headerlink" title="æ¬§å‡ é‡Œå¾—â€”æœ€å¤§å…¬çº¦æ•°"></a>æ¬§å‡ é‡Œå¾—â€”æœ€å¤§å…¬çº¦æ•°</h1><h3 id="gcdï¼ˆa-b-gcd-b-a-mod-b"><a href="#gcdï¼ˆa-b-gcd-b-a-mod-b" class="headerlink" title="gcdï¼ˆa, b) = gcd(b, a mod b)"></a>gcdï¼ˆa, b) = gcd(b, a mod b)</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(b == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">gcd</span>(b, a % )b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€æ³¢åº”ç”¨ï¼š<a href="https://www.cnblogs.com/kimsimple/p/6680820.html">çº¿æ®µä¸Šæ ¼ç‚¹ä¸ªæ•°â€”-æŒ‘æˆ˜ç¼–ç¨‹â€”-æ¬§å‡ é‡Œå¾—</a></p><h3 id="algorithmåº“çš„std-gcdå‡½æ•°"><a href="#algorithmåº“çš„std-gcdå‡½æ•°" class="headerlink" title="algorithmåº“çš„std::_gcdå‡½æ•°"></a>algorithmåº“çš„std::_gcdå‡½æ•°</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">8</span>;</span><br><span class="line">    <span class="keyword">int</span> b = <span class="number">12</span>;</span><br><span class="line">    cout &lt;&lt;__gcd(a, b); <span class="comment">//ä¸¤ä¸ª&#x27;_&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//outï¼š4   //g++-4.8 </span></span><br></pre></td></tr></table></figure><h3 id="æœ€å°å…¬å€æ•°-LCM-å’Œæœ€å¤§å…¬çº¦æ•°-GCD"><a href="#æœ€å°å…¬å€æ•°-LCM-å’Œæœ€å¤§å…¬çº¦æ•°-GCD" class="headerlink" title="æœ€å°å…¬å€æ•°(LCM)å’Œæœ€å¤§å…¬çº¦æ•°(GCD)"></a>æœ€å°å…¬å€æ•°(LCM)å’Œæœ€å¤§å…¬çº¦æ•°(GCD)</h3><p><code>lcm(a, b) = (a*b)/gcd(a,b)</code></p><h3 id="æ‰©å±•æ¬§å‡ é‡Œå¾—"><a href="#æ‰©å±•æ¬§å‡ é‡Œå¾—" class="headerlink" title="æ‰©å±•æ¬§å‡ é‡Œå¾—"></a>æ‰©å±•æ¬§å‡ é‡Œå¾—</h3><p>åŸºæœ¬ç®—æ³•ï¼šå¯¹äºä¸å®Œå…¨ä¸º 0 çš„éè´Ÿæ•´æ•° aï¼Œbï¼Œgcdï¼ˆaï¼Œbï¼‰è¡¨ç¤º aï¼Œb çš„æœ€å¤§å…¬çº¦æ•°ï¼Œå¿…ç„¶å­˜åœ¨æ•´æ•°å¯¹ xï¼Œy ï¼Œä½¿å¾— gcdï¼ˆaï¼Œbï¼‰=ax+byã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">exgcd</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b,<span class="keyword">int</span> &amp;x,<span class="keyword">int</span> &amp;y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(b==<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        x=<span class="number">1</span>;</span><br><span class="line">        y=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> r=<span class="built_in">exgcd</span>(b,a%b,x,y);</span><br><span class="line">    <span class="keyword">int</span> t=x;</span><br><span class="line">    x=y;</span><br><span class="line">    y=t-a/b*y;</span><br><span class="line">    <span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ç´ æ•°"><a href="#ç´ æ•°" class="headerlink" title="ç´ æ•°"></a>ç´ æ•°</h1><p><strong>åŸƒæ°ç­›æ³•</strong>â€”-æ±‚è§£nä»¥å†…çš„ç´ æ•°ä¸ªæ•°</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> prime[MAXN]; <span class="comment">//ç¬¬iä¸ªç´ æ•°çš„å€¼</span></span><br><span class="line"><span class="keyword">bool</span> is_prime[MAXN]; <span class="comment">//is_prime[i]ä¸ºtrueæ—¶è¡¨ç¤ºiæ˜¯ç´ æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›nä»¥å†…ç´ æ•°çš„ä¸ªæ•°</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> p = <span class="number">0</span>; <span class="comment">//ä»£è¡¨ç´ æ•°ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++)</span><br><span class="line">        is_prime[i] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(is_prime[i])</span><br><span class="line">        &#123;</span><br><span class="line">            prime[p++] = i; <span class="comment">//æ¯æœ‰ä¸€ä¸ªç´ æ•°ï¼Œpå°±++ï¼Œç„¶åprimeå­˜çš„å°±æ˜¯ç´ æ•°çš„å€¼ï¼Œç„¶åè¿›è¡Œç­›é€‰</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">2</span> * i; j &lt;= n; j += i)</span><br><span class="line">                is_prime[j] = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p; <span class="comment">//prime[p - 1]ä»£è¡¨nä»¥å†…æœ€å¤§çš„ç´ æ•°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ¨¡è¿ç®—"><a href="#æ¨¡è¿ç®—" class="headerlink" title="æ¨¡è¿ç®—"></a>æ¨¡è¿ç®—</h1><p><strong>ä¸€äº›åŸºæœ¬è§„åˆ™</strong></p><p><a href="https://blog.csdn.net/x_i_y_u_e/article/details/50823235">https://blog.csdn.net/x_i_y_u_e/article/details/50823235</a></p><p><strong>é™¤æ³•å–æ¨¡ä¸è´¹é©¬å°å®šç†</strong></p><p><a href="http://www.cnblogs.com/ECJTUACM-873284962/p/6847672.html">http://www.cnblogs.com/ECJTUACM-873284962/p/6847672.html</a></p><p><a href="https://blog.csdn.net/liangzhaoyang1/article/details/56514028">https://blog.csdn.net/liangzhaoyang1/article/details/56514028</a></p><h1 id="å¿«é€Ÿå¹‚ï¼Œå¿«é€Ÿä¹˜"><a href="#å¿«é€Ÿå¹‚ï¼Œå¿«é€Ÿä¹˜" class="headerlink" title="å¿«é€Ÿå¹‚ï¼Œå¿«é€Ÿä¹˜"></a>å¿«é€Ÿå¹‚ï¼Œå¿«é€Ÿä¹˜</h1><p>å‚è€ƒï¼š<a href="https://blog.xehoth.cc/DurationPlan-modPow/#%E5%8D%81%E8%BF%9B%E5%88%B6%E5%BF%AB%E9%80%9F%E5%B9%82">https://blog.xehoth.cc/DurationPlan-modPow/#%E5%8D%81%E8%BF%9B%E5%88%B6%E5%BF%AB%E9%80%9F%E5%B9%82</a></p><h3 id="å¿«é€Ÿä¹˜"><a href="#å¿«é€Ÿä¹˜" class="headerlink" title="å¿«é€Ÿä¹˜"></a>å¿«é€Ÿä¹˜</h3><p>æ™®é€šå¿«é€Ÿå¹‚åœ¨é¢å¯¹å¤§é‡æ•°æ®æˆ–å•ä¸ªå¤Ÿå¤§æ•°æ®æ—¶æ•ˆç‡å¾ˆä½ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦åè¿›åˆ¶å¿«é€Ÿå¹‚ï¼Œè€Œå¦‚æœæ¨¡æ•°æ˜¯ <code>long long</code> ä»¥å†…çš„æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¿«é€Ÿå¹‚æ€æƒ³ <em>O</em>(log n)O(log n) å®Œæˆå¿«é€Ÿä¹˜ï¼Œä½†æˆ‘ä»¬å…¶å®å¯ä»¥ <em>O</em>(1)å®Œæˆã€‚</p><p>åˆ©ç”¨ <code>long double</code>ï¼Œè€Œ <code>long double</code>çš„ç²¾åº¦å…¶å®åªæœ‰ 19 ä½ï¼Œç›´æ¥ä¹˜æ˜¯ä¸è¡Œçš„ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆé™¤å†ä¹˜ï¼Œè¿™æ ·å°±ä¸ä¼šå‡ºç°ç²¾åº¦é—®é¢˜ï¼Œè€Œå‰é¢ç›´æ¥è®¡ç®— <em>a</em>Ã—<em>b</em>ï¼Œå†å‡å»åé¢çš„éƒ¨åˆ†ï¼Œå³ä½¿å‰é¢ <em>a</em>Ã—<em>b</em> çˆ†è´Ÿï¼Œå®ƒè¿˜ä¼šå†çˆ†ä¸€éå˜ä¸ºæ­£çš„ï¼Œä¿è¯äº†ç­”æ¡ˆçš„æ­£ç¡®ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">double</span> ld;</span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> ll <span class="title">mul</span><span class="params">(ll a, ll b)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (a * b - (ll)((ld)a / MOD * b) * MOD + MOD) % MOD;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="äºŒè¿›åˆ¶å¿«é€Ÿå¹‚"><a href="#äºŒè¿›åˆ¶å¿«é€Ÿå¹‚" class="headerlink" title="äºŒè¿›åˆ¶å¿«é€Ÿå¹‚"></a>äºŒè¿›åˆ¶å¿«é€Ÿå¹‚</h3><p><strong>åŸºæœ¬ä»£ç ï¼Œéƒ½æ‡‚</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="function">ll <span class="title">mod_pow</span><span class="params">(ll x, ll n, ll mod)</span> <span class="comment">//x^n % mod</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll ans = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(n &gt; <span class="number">0</span>) <span class="comment">//éå†æ‰€æœ‰äºŒè¿›åˆ¶ä½</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(n &amp; <span class="number">1</span>) <span class="comment">//å¯¹åº”nçš„äºŒè¿›åˆ¶ä½æ˜¯ä¸æ˜¯1</span></span><br><span class="line">            ans = ans * x % mod; <span class="comment">//ä¹˜ä¸Šx^(2^i)</span></span><br><span class="line">        x = x * x % mod;  <span class="comment">//xå¹³æ–¹</span></span><br><span class="line">        n &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>èœœæ±ä¼˜åŒ–ç‰ˆæœ¬ï¼ˆå‚è€ƒext/numeric.hçš„powerå‡½æ•°ï¼‰</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">long</span> <span class="title">optimizedModPow</span><span class="params">(<span class="keyword">long</span> a, <span class="keyword">long</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (b == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (; ~b &amp; <span class="number">1</span>; b &gt;&gt;= <span class="number">1</span>, a = <span class="built_in">mul</span>(a, a));</span><br><span class="line">    <span class="keyword">register</span> <span class="keyword">long</span> ret = a;</span><br><span class="line">    <span class="keyword">for</span> (b &gt;&gt;= <span class="number">1</span>; b; b &gt;&gt;= <span class="number">1</span>)</span><br><span class="line">        a = <span class="built_in">mul</span>(a, a), (b &amp; <span class="number">1</span>) ? ret = <span class="built_in">mul</span>(a, ret) : <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//balabala--çœ‹ä¸æ‡‚ç³»åˆ—ï¼ï¼</span></span><br></pre></td></tr></table></figure><h3 id="åè¿›åˆ¶å¿«é€Ÿå¹‚"><a href="#åè¿›åˆ¶å¿«é€Ÿå¹‚" class="headerlink" title="åè¿›åˆ¶å¿«é€Ÿå¹‚"></a>åè¿›åˆ¶å¿«é€Ÿå¹‚</h3><p>è¯´ç™½äº†å°±æ˜¯æ‹†æˆåè¿›åˆ¶æ•°</p><h1 id="æ¬§æ‹‰å‡½æ•°"><a href="#æ¬§æ‹‰å‡½æ•°" class="headerlink" title="æ¬§æ‹‰å‡½æ•°"></a>æ¬§æ‹‰å‡½æ•°</h1><p>å¯¹æ­£æ•´æ•°nï¼Œæ¬§æ‹‰å‡½æ•°æ˜¯å°äºnçš„æ­£æ•´æ•°ä¸­ä¸näº’è´¨çš„æ•°çš„æ•°ç›®ã€‚ä¾‹å¦‚Ï†(8)=4ï¼Œå› ä¸º1,3,5,7å‡å’Œ8äº’è´¨ã€‚</p><h3 id="æ¬§æ‹‰å‡½æ•°å…¬å¼"><a href="#æ¬§æ‹‰å‡½æ•°å…¬å¼" class="headerlink" title="æ¬§æ‹‰å‡½æ•°å…¬å¼"></a>æ¬§æ‹‰å‡½æ•°å…¬å¼</h3><script type="math/tex; mode=display">euler(x) =x\times(1-\frac{1}{p_1})\times(1-\frac{1}{p_2})\times......\times(1-\frac{1}{p_n})</script><p><em>(å…¶ä¸­p1, p2â€¦â€¦pnä¸ºxçš„æ‰€æœ‰è´¨å› æ•°ï¼Œxæ˜¯ä¸ä¸º0çš„æ•´æ•°)</em></p><p><img src="/2018/05/24/%E6%95%B0%E8%AE%BA/ohiexample.png" alt></p><p><strong>æ³¨æ„ï¼š</strong></p><p><code>Ï†(1) = 1</code>ï¼ˆå”¯ä¸€å’Œ1äº’è´¨çš„æ•°(å°äºç­‰äº1)å°±æ˜¯1æœ¬èº«ï¼‰ã€‚ (æ³¨æ„ï¼šæ¯ç§è´¨å› æ•°åªä¸€ä¸ªã€‚æ¯”å¦‚ <script type="math/tex">12 = 2\times2\times3</script> é‚£ä¹ˆ <script type="math/tex">Ï†(12) = 12\times (1-\frac{1}{2}) \times (1-\frac{1}{3})=4  )</script></p><h3 id="æ€§è´¨"><a href="#æ€§è´¨" class="headerlink" title="æ€§è´¨"></a>æ€§è´¨</h3><ol><li>å½“nä¸ºè´¨æ•°æ—¶ï¼Œ$Ï†(n)=n-1$ã€‚</li><li>å½“$n=p^k$æ—¶ï¼ˆpæ˜¯ç´ æ•°ï¼‰ï¼Œ$Ï†(n)=Ï†(p^k )=p^k-p^{k-1}=(p-1)p^{k-1}$</li><li>è‹¥n,mäº’è´¨ï¼Œ$Ï†(nm)=Ï†(n)Ï†(m)=(n-1)(m-1)$</li><li>è‹¥næ˜¯å¥‡æ•°ï¼Œåˆ™$Ï†(2n)=Ï†(n)$</li></ol><p><strong>ç‰¹æ®Šæ€§è´¨</strong></p><ol><li>å½“aä¸näº’è´¨æ—¶(n&gt;2)æœ‰:$a^{Ï†(n)}\  mod\ n=1$ (æ’ç­‰äº)æ­¤å…¬å¼å³ <strong>æ¬§æ‹‰å®šç†</strong></li><li>å½“aä¸näº’è´¨ä¸”nä¸ºè´¨æ•°æ—¶(å³:gcd(a,n)=1)åˆ™ä¸Šå¼æœ‰:$ a^{(n-1)}\ mod \ n=1$(æ’ç­‰äº)æ­¤å…¬å¼å³ <strong>è´¹é©¬å°å®šç†</strong></li></ol><h3 id="å»¶ä¼¸"><a href="#å»¶ä¼¸" class="headerlink" title="å»¶ä¼¸"></a>å»¶ä¼¸</h3><p>å°äºnä¸”ä¸näº’è´¨çš„æ•°çš„å’Œï¼š</p><script type="math/tex; mode=display">\frac{Ï†(n)âˆ—n}2  (n>1)</script><h3 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h3><p><strong>æ±‚$7^{222}$çš„ä¸ªä½æ•°ã€‚</strong></p><p>å› ä¸º7å’Œ10äº’è´¨ï¼Œä¸”$Ï†(10)=4$</p><p>æ‰€ä»¥$7^4  mod 10=1$</p><p>æ‰€ä»¥$7^{222}  mod 10=7^{4âˆ—55}âˆ—7^2  mod 10=7^2  mod 10=9$</p><p>å³$7^{222}  mod 10=7^{222\%4}  mod 10=7^2  mod 10=9$</p><h3 id="æ¨¡æ¿"><a href="#æ¨¡æ¿" class="headerlink" title="æ¨¡æ¿"></a>æ¨¡æ¿</h3><p>å‚è€ƒï¼š</p><p><a href="https://www.cnblogs.com/wkfvawl/p/9317125.html">https://www.cnblogs.com/wkfvawl/p/9317125.html</a></p><h5 id="ç›´æ¥æ±‚å°äºæˆ–ç­‰äºn-ä¸”ä¸näº’è´¨çš„ä¸ªæ•°"><a href="#ç›´æ¥æ±‚å°äºæˆ–ç­‰äºn-ä¸”ä¸näº’è´¨çš„ä¸ªæ•°" class="headerlink" title="ç›´æ¥æ±‚å°äºæˆ–ç­‰äºn,ä¸”ä¸näº’è´¨çš„ä¸ªæ•°"></a>ç›´æ¥æ±‚å°äºæˆ–ç­‰äºn,ä¸”ä¸näº’è´¨çš„ä¸ªæ•°</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span>  <span class="title">eular</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i,ret=n;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">2</span>; i&lt;=<span class="built_in">sqrt</span>(n); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(n%i==<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            ret=ret/i*(i<span class="number">-1</span>);<span class="comment">//è¿™é‡Œå…ˆä½¿ç”¨é™¤æ³•æ˜¯ä¸ºäº†é˜²æ­¢æº¢å‡ºï¼Œret=ret*(1-1/p(1))</span></span><br><span class="line">            <span class="comment">//ä¸ºäº†å®Œå…¨æ¶ˆé™¤æˆ‘ä»¬å·²ç»é™¤å®Œäº†åˆšæ‰å¾—åˆ°çš„é‚£ä¸ªiå› å­,ç¡®ä¿ä¸‹ä¸€ä¸ªå¾—åˆ°çš„iæ˜¯nçš„ç´ å› å­</span></span><br><span class="line">            <span class="keyword">while</span>(n%i==<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                n/=i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(n&gt;<span class="number">1</span>)<span class="comment">//å¯èƒ½è¿˜å‰©ä¸‹ä¸€ä¸ªç´ å› å­æ²¡æœ‰é™¤ </span></span><br><span class="line">    &#123;</span><br><span class="line">        ret=ret/n*(n<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ç­›é€‰æ¨¡æ¿-æ±‚-1-n-ä¹‹é—´æ¯ä¸ªæ•°çš„è´¨å› æ•°çš„ä¸ªæ•°"><a href="#ç­›é€‰æ¨¡æ¿-æ±‚-1-n-ä¹‹é—´æ¯ä¸ªæ•°çš„è´¨å› æ•°çš„ä¸ªæ•°" class="headerlink" title="ç­›é€‰æ¨¡æ¿:æ±‚[1,n]ä¹‹é—´æ¯ä¸ªæ•°çš„è´¨å› æ•°çš„ä¸ªæ•°"></a>ç­›é€‰æ¨¡æ¿:æ±‚[1,n]ä¹‹é—´æ¯ä¸ªæ•°çš„è´¨å› æ•°çš„ä¸ªæ•°</h5><p>å¦‚æœæˆ‘ä»¬è¦æ±‚çš„æ•°æ¯”è¾ƒå¤šï¼Œå¦‚æœä¸€ä¸ªä¸€ä¸ªæ±‚é‚£ä¹ˆå¾ˆå®¹æ˜“å°±è¶…æ—¶ï¼Œæ‰€ä»¥æˆ‘ä»¬è‡ªç„¶è€Œç„¶å°±æƒ³åˆ°â€”â€”æ‰“è¡¨ã€‚</p><p>å¦‚æœæˆ‘ä»¬ä¾ç…§ä¸Šè¿°æ€æƒ³ï¼Œæ¥ä¸ªæœ€æœ´ç´ çš„æ‰“è¡¨ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> size 1000001</span></span><br><span class="line"><span class="keyword">int</span> euler[size];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    euler[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;size; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(!euler[i])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i; j&lt;size; j+=i)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(!euler[j])</span><br><span class="line">                &#123;</span><br><span class="line">                    euler[j]=j;</span><br><span class="line">                &#125;</span><br><span class="line">                euler[j]=euler[j]/i*(i<span class="number">-1</span>);<span class="comment">//å…ˆè¿›è¡Œé™¤æ³•æ˜¯ä¸ºäº†é˜²æ­¢ä¸­é—´æ•°æ®çš„æº¢å‡º</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°å­¦çŸ¥è¯† </tag>
            
            <tag> gcd </tag>
            
            <tag> lcm </tag>
            
            <tag> exgcd </tag>
            
            <tag> åŸƒæ°ç­›æ³• </tag>
            
            <tag> æ¨¡è¿ç®— </tag>
            
            <tag> å¿«é€Ÿå¹‚ </tag>
            
            <tag> å¿«é€Ÿä¹˜ </tag>
            
            <tag> æ¬§æ‹‰å‡½æ•° </tag>
            
            <tag> è´¨å› æ•° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœç´¢å…¥é—¨</title>
      <link href="/2018/05/21/%E6%90%9C%E7%B4%A2%E5%85%A5%E9%97%A8/"/>
      <url>/2018/05/21/%E6%90%9C%E7%B4%A2%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<p>HDU1241 Oil Deposits(DFSæ¨¡æ¿é¢˜)ï¼ŒHZAU 1097 Yuchang and Zixiang â€˜s maze(BFSæ¨¡æ¿é¢˜)ï¼ŒP1683 å…¥é—¨(bfsæœç´¢æ²¡æœ‰ç»ˆç‚¹)ï¼ŒP1162 å¡«æ¶‚é¢œè‰²(BFSè”é€šå—)ï¼ŒPoj-1321(DFSé€å±‚æœç´¢)ï¼ŒHDU-2553(Nçš‡åï¼‰</p><span id="more"></span><h1 id="HDU1241-Oil-Deposits-DFSæ¨¡æ¿é¢˜"><a href="#HDU1241-Oil-Deposits-DFSæ¨¡æ¿é¢˜" class="headerlink" title="HDU1241 Oil Deposits(DFSæ¨¡æ¿é¢˜)"></a>HDU1241 Oil Deposits(DFSæ¨¡æ¿é¢˜)</h1><p>é¢˜ç›®ï¼š<a href="http://acm.hdu.edu.cn/showproblem.php?pid=1241">HDU1241</a></p><p>å¤§æ„ï¼šå’Œè¿·å®«çš„è¾“å…¥å·®ä¸å¤šï¼Œâ€˜*â€™æ˜¯å¢™ï¼Œâ€˜@â€™æ˜¯æ²¹ç”°ï¼Œä»¥ä¸€ä¸ªæ²¹ç”°ä¸ºä¸­å¿ƒï¼Œå¦‚æœå®ƒçš„ä¸œå—è¥¿åŒ—ä¸€ä¸ªå„ä¸ªè§’è½ï¼Œä¸€å…±å…«ä¸ªæ–¹å‘ä¹Ÿæœ‰æ²¹ç”°çš„è¯ï¼Œè¿™äº›æ²¹ç”°å°±ç®—ä½œä¸€ä¸ªæ²¹ç”°ã€‚  </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">char</span> a[<span class="number">102</span>][<span class="number">102</span>];</span><br><span class="line"><span class="keyword">int</span> row,col;</span><br><span class="line"><span class="keyword">int</span> dir[<span class="number">8</span>][<span class="number">2</span>]= <span class="comment">//å…«ä¸ªæ–¹å‘</span></span><br><span class="line">&#123;</span><br><span class="line">    &#123;<span class="number">1</span>, <span class="number">0</span>&#125;,</span><br><span class="line">    &#123;<span class="number">0</span>, <span class="number">1</span>&#125;,</span><br><span class="line">    &#123;<span class="number">-1</span>, <span class="number">0</span>&#125;,</span><br><span class="line">    &#123;<span class="number">0</span>, <span class="number">-1</span>&#125;,</span><br><span class="line">    &#123;<span class="number">1</span>, <span class="number">1</span>&#125;,</span><br><span class="line">    &#123;<span class="number">1</span>, <span class="number">-1</span>&#125;,</span><br><span class="line">    &#123;<span class="number">-1</span>, <span class="number">1</span>&#125;,</span><br><span class="line">    &#123;<span class="number">-1</span>, <span class="number">-1</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    a[i][j]=<span class="string">&#x27;*&#x27;</span>; <span class="comment">//æ‰«æè¿‡åå°±å°†@å˜æˆ*ï¼Œé˜²æ­¢ä¸‹æ¬¡é‡å¤æœç´¢</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;<span class="number">8</span>;k++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> x=i+dir[k][<span class="number">0</span>]; <span class="comment">//å¼€å§‹æœç´¢</span></span><br><span class="line">        <span class="keyword">int</span> y=j+dir[k][<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (x&gt;=<span class="number">1</span>&amp;&amp;x&lt;=row&amp;&amp;y&gt;=<span class="number">1</span>&amp;&amp;y&lt;=col&amp;&amp;a[x][y]==<span class="string">&#x27;@&#x27;</span>)</span><br><span class="line">            <span class="built_in">dfs</span>(x,y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> ((cin&gt;&gt;row&gt;&gt;col)&amp;&amp;(row!=<span class="number">0</span>||col!=<span class="number">0</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> c=<span class="number">0</span>;</span><br><span class="line">        <span class="built_in">getchar</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=row;i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=col;j++)</span><br><span class="line">            cin&gt;&gt;a[i][j];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=row;i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=col;j++)</span><br><span class="line">            <span class="keyword">if</span> (a[i][j]==<span class="string">&#x27;@&#x27;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">dfs</span>(i,j);</span><br><span class="line">                c++;</span><br><span class="line">            &#125;</span><br><span class="line">        cout &lt;&lt; c &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="HZAU-1097-Yuchang-and-Zixiang-â€˜s-maze-BFSæ¨¡æ¿é¢˜"><a href="#HZAU-1097-Yuchang-and-Zixiang-â€˜s-maze-BFSæ¨¡æ¿é¢˜" class="headerlink" title="HZAU 1097 Yuchang and Zixiang â€˜s maze(BFSæ¨¡æ¿é¢˜)"></a>HZAU 1097 Yuchang and Zixiang â€˜s maze(BFSæ¨¡æ¿é¢˜)</h1><p>é¢˜ç›®ï¼š<a href="https://blog.csdn.net/hhu1506010220/article/details/53730637">HZAU 1097 Yuchang and Zixiang â€˜s maze</a></p><p>å¤§æ„ï¼šç»™å‡ºèµ·ç‚¹å’Œç»ˆç‚¹ï¼Œè¿˜æœ‰ä¸€äº›ä¸èƒ½èµ°çš„åœ°æ–¹ï¼Œæ±‚èµ°åˆ°ç»ˆç‚¹çš„æœ€çŸ­æ­¥æ•°</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxLen = <span class="number">1100</span>;</span><br><span class="line"><span class="keyword">int</span> vis[maxLen][maxLen]; <span class="comment">//åˆ¤æ–­æœ‰æ²¡æœ‰èµ°è¿‡äº†</span></span><br><span class="line"><span class="keyword">char</span> Map[maxLen][maxLen];</span><br><span class="line"><span class="keyword">int</span> step[maxLen][maxLen];<span class="comment">//æ­¥æ•°è®¡æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> dir[<span class="number">4</span>][<span class="number">2</span>] = <span class="comment">//å››ä¸ªæ–¹å‘</span></span><br><span class="line">&#123;</span><br><span class="line">    &#123;<span class="number">-1</span>, <span class="number">0</span>&#125;,</span><br><span class="line">    &#123;<span class="number">1</span>, <span class="number">0</span>&#125;,</span><br><span class="line">    &#123;<span class="number">0</span>, <span class="number">1</span>&#125;,</span><br><span class="line">    &#123;<span class="number">0</span>, <span class="number">-1</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point</span> </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> x, y;<span class="comment">//ä½ç½®</span></span><br><span class="line">&#125;in, out, beg;<span class="comment">//å…¥é˜Ÿçš„å€¼ï¼Œå‡ºé˜Ÿçš„å€¼ï¼Œå¼€å§‹çš„å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, t, X, Y, a, b, c, d; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> <span class="comment">//æ£€æŸ¥è¾¹ç•Œæˆ–è€…æ˜¯å¦ç»ˆç‚¹</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!vis[x][y] &amp;&amp; x &gt;= <span class="number">1</span> &amp;&amp; y &gt;= <span class="number">1</span> &amp;&amp; x &lt;= n &amp;&amp; y &lt;= m &amp;&amp; Map[x][y] != <span class="string">&#x27;#&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bfs</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis)); <span class="comment">//åˆšå¼€å§‹å“ªä¸ªéƒ½æ²¡æœ‰è®¿é—®</span></span><br><span class="line">    <span class="built_in">memset</span>(step, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(step));<span class="comment">//åˆšå¼€å§‹æ­¥æ•°ä¸º0</span></span><br><span class="line">    vis[beg.x][beg.y] = <span class="number">1</span>; <span class="comment">//ç¬¬ä¸€ä¸ªé˜Ÿåˆ—çš„å…ƒç´ ï¼Œç„¶åæ ‡è®°ä¸ºå·²ç»è®¿é—®è¿‡äº†</span></span><br><span class="line">    step[beg.x][beg.y] = <span class="number">0</span>; <span class="comment">//è¿˜æ²¡æœ‰å¼€å§‹èµ°ï¼Œæ­¥æ•°ä¸º0</span></span><br><span class="line">    queue&lt;point&gt;q;</span><br><span class="line">    q.<span class="built_in">push</span>(beg); <span class="comment">//å°†ç¬¬ä¸€ä¸ªå…ƒç´ å…¥é˜Ÿ</span></span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        out = q.<span class="built_in">front</span>(); <span class="comment">//å°†ç¬¬ä¸€ä¸ªå…ƒç´ å‡ºé˜Ÿ</span></span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) <span class="comment">//å››ä¸ªæ–¹å‘å¼€å§‹èµ°</span></span><br><span class="line">        &#123;</span><br><span class="line">            in.x = out.x + dir[i][<span class="number">0</span>];</span><br><span class="line">            in.y = out.y + dir[i][<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">check</span>(in.x, in.y))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(Map[in.x][in.y] == <span class="string">&#x27;E&#x27;</span>) <span class="comment">//ç»ˆç‚¹ï¼Œç›´æ¥è¾“å‡ºé‚£ä¸ªå…ƒç´ çš„æ­¥æ•°ï¼Œå› ä¸ºèµ°åˆ°Eï¼Œstepæ•°ç»„è¿˜æ²¡æœ‰+1ï¼Œæ‰€ä»¥è¦+1</span></span><br><span class="line">                    <span class="keyword">return</span> step[out.x][out.y] + <span class="number">1</span>;</span><br><span class="line">                q.<span class="built_in">push</span>(in); <span class="comment">//å¦åˆ™å…¥é˜Ÿ</span></span><br><span class="line">                vis[in.x][in.y] = <span class="number">1</span>; <span class="comment">//è®¿é—®è¿‡äº†</span></span><br><span class="line">                step[in.x][in.y] = step[out.x][out.y] + <span class="number">1</span>; <span class="comment">//æ­¥æ•°ç´¯åŠ </span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>; <span class="comment">//æ²¡æœ‰æ‰¾åˆ°ï¼Œè¿”å›-1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; n &gt;&gt; m &gt;&gt; t)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; j++)</span><br><span class="line">                Map[i][j] = <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; t; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; X &gt;&gt; Y;</span><br><span class="line">            Map[X][Y] = <span class="string">&#x27;#&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c &gt;&gt; d; <span class="comment">//ä»abèµ°åˆ°cd</span></span><br><span class="line">        <span class="keyword">if</span>(a == c &amp;&amp; b == d) cout &lt;&lt; <span class="string">&quot;0&quot;</span> &lt;&lt; endl; <span class="comment">//åŒä¸€ä¸ªä½ç½®ä¸ç”¨èµ°</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            beg.x = a;</span><br><span class="line">            beg.y = b;</span><br><span class="line">            <span class="keyword">int</span> ans = <span class="built_in">bfs</span>();</span><br><span class="line">        cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="P1683-å…¥é—¨-bfsæœç´¢æ²¡æœ‰ç»ˆç‚¹"><a href="#P1683-å…¥é—¨-bfsæœç´¢æ²¡æœ‰ç»ˆç‚¹" class="headerlink" title="P1683 å…¥é—¨(bfsæœç´¢æ²¡æœ‰ç»ˆç‚¹)"></a>P1683 å…¥é—¨(bfsæœç´¢æ²¡æœ‰ç»ˆç‚¹)</h1><p>é¢˜ç›®ï¼š<a href="https://www.luogu.org/problemnew/show/P1683">p1683</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> len = <span class="number">300</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> Map[len][len];</span><br><span class="line"><span class="keyword">int</span> vis[len][len] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> w, h;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> x, y;</span><br><span class="line">&#125;in, out, beg;</span><br><span class="line">queue&lt;point&gt; q;</span><br><span class="line"><span class="keyword">int</span> dir[<span class="number">4</span>][<span class="number">2</span>] =</span><br><span class="line">&#123;</span><br><span class="line">    &#123;<span class="number">1</span>, <span class="number">0</span>&#125;,</span><br><span class="line">    &#123;<span class="number">-1</span>, <span class="number">0</span>&#125;,</span><br><span class="line">    &#123;<span class="number">0</span>, <span class="number">1</span>&#125;,</span><br><span class="line">    &#123;<span class="number">0</span>, <span class="number">-1</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!vis[x][y] &amp;&amp; x &gt;= <span class="number">1</span> &amp;&amp; y &gt;= <span class="number">1</span> &amp;&amp; x &lt;= h &amp;&amp; y &lt;= w</span><br><span class="line">            &amp;&amp; Map[x][y] != <span class="string">&#x27;#&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    vis[beg.x][beg.y] = <span class="number">1</span>;</span><br><span class="line">    q.<span class="built_in">push</span>(beg);</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        out = q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            in.x = out.x + dir[i][<span class="number">0</span>];</span><br><span class="line">            in.y = out.y + dir[i][<span class="number">1</span>];</span><br><span class="line">        <span class="comment">//    cout &lt;&lt; in.x &lt;&lt; &quot; &quot; &lt;&lt; in.y &lt;&lt; endl;</span></span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">check</span>(in.x, in.y)) <span class="comment">//è¿™é‡Œæ”¹äº†ä¸‹å°±è¡Œäº†ï¼Œå¦‚æœç¬¦åˆæ¡ä»¶å°±ä¼šè‡ªå·±èµ°ï¼Œä¸ç¬¦åˆæ¡ä»¶çš„è¯å°±ç»“æŸå‡½æ•°</span></span><br><span class="line">            &#123;</span><br><span class="line">                q.<span class="built_in">push</span>(in);</span><br><span class="line">                vis[in.x][in.y] = <span class="number">1</span>;</span><br><span class="line">                ans++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin &gt;&gt; w &gt;&gt; h;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= h; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= w; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; Map[i][j];</span><br><span class="line">            <span class="keyword">if</span>(Map[i][j] == <span class="string">&#x27;@&#x27;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                beg.x = i;</span><br><span class="line">                beg.y = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="built_in">bfs</span>(beg.x, beg.y);</span><br><span class="line">    cout &lt;&lt; ans + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="P1162-å¡«æ¶‚é¢œè‰²-BFSè”é€šå—"><a href="#P1162-å¡«æ¶‚é¢œè‰²-BFSè”é€šå—" class="headerlink" title="P1162 å¡«æ¶‚é¢œè‰²(BFSè”é€šå—)"></a>P1162 å¡«æ¶‚é¢œè‰²(BFSè”é€šå—)</h1><p><a href="https://www.luogu.org/problemnew/show/P1162">p1162</a></p><p><strong>æ‰€æœ‰ä¸åœ¨åœˆå†…çš„0ç»„æˆçš„å—ï¼Œå¿…å®šä¼šè§¦ç¢°è¾¹ç•Œã€‚  </strong></p><p><strong>æ‰€ä»¥ä»è¾¹ç•Œä¸Šçš„0å¼€å§‹è¿›è¡Œå¹¿æœï¼ŒæŠŠæœè¿‡çš„è¿›è¡Œæ ‡è®°ï¼Œé‚£ä¹ˆæ²¡æœè¿‡çš„ä¹Ÿä¸æ˜¯1çš„å°±æ˜¯è¦æ‰¾çš„2äº†ã€‚</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxLen = <span class="number">1100</span>;</span><br><span class="line"><span class="keyword">int</span> vis[maxLen][maxLen]; <span class="comment">//åˆ¤æ–­æœ‰æ²¡æœ‰èµ°è¿‡äº†</span></span><br><span class="line"><span class="keyword">int</span> Map[maxLen][maxLen];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> dir[<span class="number">4</span>][<span class="number">2</span>] = <span class="comment">//å››ä¸ªæ–¹å‘</span></span><br><span class="line">        &#123;</span><br><span class="line">                &#123;<span class="number">-1</span>, <span class="number">0</span>&#125;,</span><br><span class="line">                &#123;<span class="number">1</span>, <span class="number">0</span>&#125;,</span><br><span class="line">                &#123;<span class="number">0</span>, <span class="number">1</span>&#125;,</span><br><span class="line">                &#123;<span class="number">0</span>, <span class="number">-1</span>&#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> x, y;<span class="comment">//ä½ç½®</span></span><br><span class="line">&#125;in, out, beg;<span class="comment">//å…¥é˜Ÿçš„å€¼ï¼Œå‡ºé˜Ÿçš„å€¼ï¼Œå¼€å§‹çš„å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> <span class="comment">//æ£€æŸ¥è¾¹ç•Œæˆ–è€…æ˜¯å¦ç»ˆç‚¹</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!vis[x][y] &amp;&amp; x &gt;= <span class="number">1</span> &amp;&amp; y &gt;= <span class="number">1</span> &amp;&amp; x &lt;= n &amp;&amp; y &lt;= n &amp;&amp; Map[x][y] != <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bfs</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis)); <span class="comment">//åˆšå¼€å§‹å“ªä¸ªéƒ½æ²¡æœ‰è®¿é—®</span></span><br><span class="line">    queue&lt;point&gt;q;</span><br><span class="line">    <span class="comment">//ä¸‹é¢å››ä¸ªforå¾ªç¯è¡¨ç¤ºæœç´¢æœ€å¤–ä¸€å±‚ï¼Œå¦‚æœæŸä¸ªä½ç½®ä¸º0ï¼Œé‚£ä¹ˆå°±æœç´¢ï¼Œæ²¡æœ‰çš„è¯å°±ä¸ç”¨äº†</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(Map[<span class="number">1</span>][i] == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            beg.x = <span class="number">1</span>;</span><br><span class="line">            beg.y = i;</span><br><span class="line">            vis[beg.x][beg.y] = <span class="number">1</span>;</span><br><span class="line">            q.<span class="built_in">push</span>(beg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(Map[i][<span class="number">1</span>] == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            beg.x = i;</span><br><span class="line">            beg.y = <span class="number">1</span>;</span><br><span class="line">            vis[beg.x][beg.y] = <span class="number">1</span>;</span><br><span class="line">            q.<span class="built_in">push</span>(beg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(Map[i][n] == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            beg.x = i;</span><br><span class="line">            beg.y = n;</span><br><span class="line">            vis[beg.x][beg.y] = <span class="number">1</span>;</span><br><span class="line">            q.<span class="built_in">push</span>(beg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(Map[n][i] == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            beg.x = n;</span><br><span class="line">            beg.y = i;</span><br><span class="line">            vis[beg.x][beg.y] = <span class="number">1</span>;</span><br><span class="line">            q.<span class="built_in">push</span>(beg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        out = q.<span class="built_in">front</span>(); <span class="comment">//å°†ç¬¬ä¸€ä¸ªå…ƒç´ å‡ºé˜Ÿ</span></span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) <span class="comment">//å››ä¸ªæ–¹å‘å¼€å§‹èµ°</span></span><br><span class="line">        &#123;</span><br><span class="line">            in.x = out.x + dir[i][<span class="number">0</span>];</span><br><span class="line">            in.y = out.y + dir[i][<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">check</span>(in.x, in.y))</span><br><span class="line">            &#123;</span><br><span class="line">                q.<span class="built_in">push</span>(in); <span class="comment">//å…¥é˜Ÿ</span></span><br><span class="line">                vis[in.x][in.y] = <span class="number">1</span>; <span class="comment">//è®¿é—®è¿‡äº†</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">            cin &gt;&gt; Map[i][j];</span><br><span class="line">    <span class="built_in">bfs</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(!vis[i][j] &amp;&amp; Map[i][j] == <span class="number">0</span>) <span class="comment">//æ²¡è¢«è®¿é—®è¿‡ï¼ŒåŒæ—¶ä¸º0ï¼Œå°±è¾“å‡º2</span></span><br><span class="line">                cout &lt;&lt; <span class="number">2</span> &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                cout &lt;&lt; Map[i][j] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Poj-1321-DFSé€å±‚æœç´¢"><a href="#Poj-1321-DFSé€å±‚æœç´¢" class="headerlink" title="Poj-1321(DFSé€å±‚æœç´¢)"></a>Poj-1321(DFSé€å±‚æœç´¢)</h1><p><a href="https://vjudge.net/problem/15202/origin">POJ - 1321</a></p><p>æ£‹å­æ”¾åœ¨â€™#â€™,  â€˜.â€™ä¸èƒ½æ”¾æ£‹å­ï¼Œæ±‚æ»¡è¶³æ¡ä»¶çš„æ‘†æ”¾æ–¹æ¡ˆæ¬¡æ•°ï¼Œå’Œå…«çš‡åé—®é¢˜ç›¸ä¼¼ï¼Œè¿™æ¬¡é‡‡ç”¨çš„åŠæ³•æ˜¯é€å±‚DFS</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Code 1</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Memory: 672KTime: 47MS</span></span><br><span class="line"><span class="comment">Language: G++Result: Accepted</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxLen = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">char</span> chess[maxLen][maxLen];</span><br><span class="line"><span class="keyword">bool</span> vis[<span class="number">10</span>] = &#123;<span class="literal">false</span>&#125;; <span class="comment">//ç”¨æ¥è®°å½•æŸä¸€åˆ—æœ‰æ²¡æœ‰è¢«æ ‡è®°</span></span><br><span class="line"><span class="keyword">int</span> row, k, ans = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> r, <span class="keyword">int</span> cnt)</span> <span class="comment">//rä»£è¡¨è¡Œæ•°ï¼Œcntä»£è¡¨æ”¾çš„æ˜¯å·²ç»æ”¾çš„æ£‹å­çš„ä¸ªæ•°</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    è¿™ä¸¤ä¸ªifèƒ½ä¸èƒ½è°ƒæ¢ï¼Ÿ</span></span><br><span class="line"><span class="comment">    ä¸èƒ½ï¼Œå¦‚æœè°ƒæ¢äº†ä¼šå¯¼è‡´ä¸èƒ½ans++ï¼Œå› ä¸ºå·²ç»ruturnï¼Œä½†æ˜¯dfsæ˜¯æ»¡è¶³æ¡ä»¶åæ‰dfs(r + 1, cnt + 1);</span></span><br><span class="line"><span class="comment">    è¿™æ—¶å€™å·²ç»æ»¡è¶³æ¡ä»¶äº†ï¼Œå¾—ans++ï¼Œä½†æ˜¯r+1å¯èƒ½ä¼šå¯¼è‡´r&gt;row</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">if</span>(cnt == k)</span><br><span class="line">    &#123;</span><br><span class="line">        ans++;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(r &gt; row)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= row; i++) <span class="comment">//æœç´¢è¿™ä¸€è¡Œçš„å…¨éƒ¨åˆ—</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(chess[r][i] == <span class="string">&#x27;#&#x27;</span> &amp;&amp; !vis[i]) <span class="comment">//æ»¡è¶³æ¡ä»¶</span></span><br><span class="line">            &#123;</span><br><span class="line">                vis[i] = <span class="literal">true</span>; <span class="comment">//æ ‡è®°è¿™ä¸€åˆ—å·²ç»èµ°è¿‡äº†</span></span><br><span class="line">                <span class="built_in">dfs</span>(r + <span class="number">1</span>, cnt + <span class="number">1</span>); <span class="comment">//æ¥ç€èµ°ä¸‹ä¸€è¡Œï¼Œå¯¹åº”çš„æ£‹å­æ•°è¦åŠ 1</span></span><br><span class="line">                vis[i] = <span class="literal">false</span>; <span class="comment">//dfs(r + 1, cnt + 1);ç»“æŸåiç»§ç»­++ï¼Œèµ°åˆ«çš„åˆ—ï¼Œé‚£ä¹ˆåˆšåˆšé‚£ä¸€åˆ—å°±è¦æ ‡è®°ä¸ºæ²¡æœ‰èµ°è¿‡</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">dfs</span>(r + <span class="number">1</span>, cnt);</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">4 2</span></span><br><span class="line"><span class="comment">#...</span></span><br><span class="line"><span class="comment">##..</span></span><br><span class="line"><span class="comment">...#</span></span><br><span class="line"><span class="comment">..#.</span></span><br><span class="line"><span class="comment">å¤„ç†è¿™ç§æƒ…å†µï¼Œå½“k&lt;rowæ—¶ï¼Œå¾—èµ°å®Œæ‰€æœ‰çš„è¡Œ</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; row &gt;&gt; k &amp;&amp; row != <span class="number">-1</span> &amp;&amp; k != <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(vis, <span class="literal">false</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= row; i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= row; j++)</span><br><span class="line">                cin &gt;&gt; chess[i][j];</span><br><span class="line">        <span class="built_in">dfs</span>(<span class="number">1</span>, <span class="number">0</span>); <span class="comment">//ä»£è¡¨ä»ç¬¬ä¸€è¡Œå¼€å§‹é€å±‚dfsï¼Œæ”¾çš„æ£‹å­çš„æ•°ç›®ä¸º0</span></span><br><span class="line">        cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">        ans = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//code2(æ€è·¯ä¸€æ ·)</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Memory: 672KTime: 47MS</span></span><br><span class="line"><span class="comment">Language: G++Result: Accepted</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxLen = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">char</span> chess[maxLen][maxLen];</span><br><span class="line"><span class="keyword">bool</span> vis[<span class="number">10</span>] = &#123;<span class="literal">false</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> row, k, ans = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> r, <span class="keyword">int</span> cnt)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(cnt == k)</span><br><span class="line">    &#123;</span><br><span class="line">        ans++;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        ä¸éœ€è¦</span></span><br><span class="line"><span class="comment">    if(r &gt; row)</span></span><br><span class="line"><span class="comment">        return;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = r + <span class="number">1</span>; j &lt;= row; j++) <span class="comment">//è¿™é‡Œä»£è¡¨æœç´¢ä¸‹ä¸€è¡Œï¼Œæ‰€æœ‰dfsèµ·å§‹æ˜¯dfs(0,0)ï¼Œè¿™æ ·çš„è¯å°±ä¸èƒ½æœç´¢å®Œæ‰€æœ‰çš„è¡Œ</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= row; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(chess[j][i] == <span class="string">&#x27;#&#x27;</span> &amp;&amp; !vis[i])</span><br><span class="line">            &#123;</span><br><span class="line">                vis[i] = <span class="literal">true</span>;</span><br><span class="line">                <span class="built_in">dfs</span>(j, cnt + <span class="number">1</span>);</span><br><span class="line">                vis[i] = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; row &gt;&gt; k &amp;&amp; row != <span class="number">-1</span> &amp;&amp; k != <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(vis, <span class="literal">false</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= row; i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= row; j++)</span><br><span class="line">                cin &gt;&gt; chess[i][j];</span><br><span class="line">        <span class="built_in">dfs</span>(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">        ans = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>test:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2</span> <span class="number">1</span></span><br><span class="line">#.</span><br><span class="line">.#</span><br><span class="line"><span class="number">4</span> <span class="number">4</span></span><br><span class="line">...#</span><br><span class="line">..#.</span><br><span class="line">.#..</span><br><span class="line">#...</span><br><span class="line"><span class="number">4</span> <span class="number">2</span></span><br><span class="line">#...</span><br><span class="line">##..</span><br><span class="line">...#</span><br><span class="line">..#.</span><br><span class="line"><span class="number">3</span> <span class="number">2</span></span><br><span class="line">#.#</span><br><span class="line">##.</span><br><span class="line">#.# </span><br><span class="line"><span class="number">2</span> <span class="number">2</span></span><br><span class="line">#.</span><br><span class="line">.#</span><br><span class="line"><span class="number">2</span> <span class="number">1</span></span><br><span class="line">#.</span><br><span class="line">#. </span><br><span class="line"><span class="number">8</span> <span class="number">8</span></span><br><span class="line">########</span><br><span class="line">########</span><br><span class="line">########</span><br><span class="line">########</span><br><span class="line">########</span><br><span class="line">########</span><br><span class="line">########</span><br><span class="line">######## </span><br><span class="line"><span class="number">-1</span> <span class="number">-1</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">40320</span></span><br></pre></td></tr></table></figure><h1 id="HDU-2553-Nçš‡å"><a href="#HDU-2553-Nçš‡å" class="headerlink" title="HDU-2553(Nçš‡å)"></a>HDU-2553(Nçš‡å)</h1><p><a href="https://vjudge.net/problem/33634/origin">HDU - 2553</a></p><p>è¿™é“é¢˜æ˜¯ä¸Šé“é¢˜(poj-1321)çš„åŠ å¼ºç‰ˆï¼Œæ„æ€æ˜¯è¯´å¤šäº†ä¸ªé™åˆ¶æ¡ä»¶ï¼Œå¯¹è§’çº¿é™åˆ¶ï¼ŒæŒ‰ç…§ä¸Šé“é¢˜æ¥ï¼Œæˆ‘ä»¬å¯ä»¥é€å±‚æœç´¢ï¼Œç„¶åæ ‡è®°åˆ—å’Œå¯¹è§’çº¿å°±è¡Œäº†ï¼Œä½†æ˜¯æ€ä¹ˆæ ‡è®°å¯¹è§’çº¿å‘¢ï¼Ÿ</p><p>å‚è€ƒ<a href="https://www.cnblogs.com/chenchengxun/p/3759278.html">HDU 2553 Nçš‡åé—®é¢˜ï¼ˆè¯¦ç»†é¢˜è§£ï¼‰</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Status:AcceptedTime:46ms</span></span><br><span class="line"><span class="comment">Memory:1808kBLength:753</span></span><br><span class="line"><span class="comment">Lang:C++</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">int</span> n, ans = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> vis[<span class="number">5</span>][<span class="number">100</span>];</span><br><span class="line"><span class="keyword">int</span> ANS[<span class="number">20</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> r, <span class="keyword">int</span> cnt)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(cnt == n)</span><br><span class="line">    &#123;</span><br><span class="line">        ans++;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(!vis[<span class="number">0</span>][i] &amp;&amp; !vis[<span class="number">1</span>][r + i] &amp;&amp; !vis[<span class="number">2</span>][r - i + n])</span><br><span class="line">        &#123;</span><br><span class="line">            vis[<span class="number">0</span>][i] = vis[<span class="number">1</span>][r + i] = vis[<span class="number">2</span>][r - i + n] = <span class="number">1</span>;</span><br><span class="line">            <span class="built_in">dfs</span>(r + <span class="number">1</span>, cnt + <span class="number">1</span>);</span><br><span class="line">            vis[<span class="number">0</span>][i] = vis[<span class="number">1</span>][r + i] = vis[<span class="number">2</span>][r - i + n] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">for</span>(n = <span class="number">1</span>; n &lt;= <span class="number">10</span>; n++) <span class="comment">//è¿™é“é¢˜å¾—æ‰“è¡¨ï¼Œä¸ç„¶è¶…æ—¶</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(vis));</span><br><span class="line">        ans = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">dfs</span>(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        ANS[n] = ans;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; n &amp;&amp; n != <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; ANS[n] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DFS </tag>
            
            <tag> BFS </tag>
            
            <tag> Nçš‡å </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>luogué¢˜ç›®</title>
      <link href="/2018/05/14/luogu%E9%A2%98%E7%9B%AE/"/>
      <url>/2018/05/14/luogu%E9%A2%98%E7%9B%AE/</url>
      
        <content type="html"><![CDATA[<p>P1022 è®¡ç®—å™¨çš„æ”¹è‰¯(è§£ç®€å•ä¸€å…ƒä¸€æ¬¡æ–¹ç¨‹), P1583 é­”æ³•ç…§ç‰‡ï¼ˆå¤šä¸ªä¿¡æ¯å¤šä¸ªå¤„ç†ç³»åˆ—ï¼ˆé¢˜æ„æ¯”è¾ƒç»•ï¼‰ï¼‰, P1588 ä¸¢å¤±çš„ç‰›(å€’é€†æ€æƒ³), P1459 ä¸‰å€¼çš„æ’åº, P2386 æ”¾è‹¹æœ(é€’å½’ã€dpã€dfséƒ½å¯ä»¥åš),  P2562 [AHOI2002]KittyçŒ«åŸºå› ç¼–ç ï¼ŒP1106 åˆ æ•°é—®é¢˜ ï¼ˆè´ªå¿ƒï¼‰,P2758 ç¼–è¾‘è·ç¦»(dp)ï¼ŒP2404 è‡ªç„¶æ•°çš„æ‹†åˆ†é—®é¢˜ï¼ˆå›æº¯ï¼‰</p><span id="more"></span><h1 id="P1022-è®¡ç®—å™¨çš„æ”¹è‰¯-è§£ç®€å•ä¸€å…ƒä¸€æ¬¡æ–¹ç¨‹"><a href="#P1022-è®¡ç®—å™¨çš„æ”¹è‰¯-è§£ç®€å•ä¸€å…ƒä¸€æ¬¡æ–¹ç¨‹" class="headerlink" title="P1022 è®¡ç®—å™¨çš„æ”¹è‰¯(è§£ç®€å•ä¸€å…ƒä¸€æ¬¡æ–¹ç¨‹)"></a>P1022 è®¡ç®—å™¨çš„æ”¹è‰¯(è§£ç®€å•ä¸€å…ƒä¸€æ¬¡æ–¹ç¨‹)</h1><p><a href="https://www.luogu.org/problemnew/show/P1022">P1022</a></p><p>è¿™é“é¢˜å¦‚æœç›´æ¥è¯»å…¥ä¸€ä¸ªå­—ç¬¦ä¸²å†ä¸€ä¸ªä¸ªå¤„ç†çš„è¯å¯ä»¥ä¼šæƒ³å¤æ‚ï¼Œæˆ‘ä¹‹å‰è¿™æ ·çš„å¤„ç†çš„è¯ä»£ç é•¿è¿˜waï¼ˆèœé¸¡ï¼‰ï¼Œå¦‚æœé‡‡ç”¨æ ˆçš„æ€æƒ³ï¼Œåˆ™ä¼šç®€å•å¾ˆå¤š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line">ll nowValue = <span class="number">0</span>; <span class="comment">//å½“å‰è¾“å…¥çš„å€¼</span></span><br><span class="line">ll coefficient; <span class="comment">//è¡¨ç¤ºç³»æ•°</span></span><br><span class="line">ll position = <span class="number">1</span>;    <span class="comment">//æ ‡ç¤ºæ˜¯åœ¨ç­‰å¼å·¦è¾¹è¿˜æ˜¯ç­‰å¼å³è¾¹</span></span><br><span class="line">ll sign = <span class="number">1</span>;    <span class="comment">//è¡¨ç¤ºç¬¦å·</span></span><br><span class="line">ll value; <span class="comment">//è¡¨ç¤ºæŸä¸ªæ“ä½œç¬¦å‰é¢çš„å€¼</span></span><br><span class="line"><span class="keyword">bool</span> is = <span class="literal">false</span>; <span class="comment">//åˆ¤æ–­æœ‰æ²¡æœ‰è¯»å…¥æ•°æ®äº†</span></span><br><span class="line"><span class="keyword">char</span> x;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> c;</span><br><span class="line">    c = <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">   <span class="comment">//     cout &lt;&lt; nowValue &lt;&lt; &quot; &quot; &lt;&lt; value &lt;&lt; &quot; &quot; &lt;&lt; coefficient &lt;&lt; endl;</span></span><br><span class="line">        <span class="keyword">if</span>(c &gt;= <span class="string">&#x27;a&#x27;</span> &amp;&amp; c &lt;= <span class="string">&#x27;z&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            x = c;</span><br><span class="line">            <span class="keyword">if</span>(nowValue == <span class="number">0</span> &amp;&amp; !is)</span><br><span class="line">            &#123;</span><br><span class="line">                coefficient += position * sign;</span><br><span class="line">                is = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                coefficient += position * sign * nowValue;</span><br><span class="line">                sign = <span class="number">1</span>;</span><br><span class="line">                nowValue = <span class="number">0</span>;</span><br><span class="line">                is = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æœ‰ä¸ªå‘ç‚¹ï¼ˆè™½ç„¶æ•°æ®æ²¡æœ‰æ¶‰åŠï¼‰ï¼Œå¦‚æœnowValueä¸º0åˆè¯»å…¥äº†å˜é‡åç§°æœ‰ä¸¤ç§æƒ…å†µï¼šä¸€æ—¶+0xæˆ–-0xï¼Œå¦ä¸€ç§æ˜¯é»˜è®¤ç³»æ•°ä¸º1ï¼Œisä¸“é—¨åˆ¤æ–­è¿™ä¸¤ç§æƒ…å†µ </span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(c &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; c &lt;= <span class="string">&#x27;9&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            nowValue = nowValue * <span class="number">10</span> + c - <span class="string">&#x27;0&#x27;</span>; <span class="comment">//å°†è¾“å…¥çš„å­—ç¬¦ä¸²æ•°å­—è½¬åŒ–ä¸ºæ•´å‹æ•°å­—</span></span><br><span class="line">            is = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(c == <span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            value += -position * sign * nowValue;    <span class="comment">//å°†å‰é¢çš„å€¼ç´¯åŠ </span></span><br><span class="line">            sign = <span class="number">-1</span>;     <span class="comment">//å› ä¸ºæ˜¯è´Ÿå·ï¼Œæ‰€ä»¥åé¢çš„å€¼æ˜¯è´Ÿæ•°</span></span><br><span class="line">            nowValue = <span class="number">0</span>;</span><br><span class="line">            is = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(c == <span class="string">&#x27;+&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            value += -position * sign * nowValue;</span><br><span class="line">            sign = <span class="number">1</span>;</span><br><span class="line">            nowValue = <span class="number">0</span>;</span><br><span class="line">            is = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(c == <span class="string">&#x27;=&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            value += -position * sign * nowValue;   <span class="comment">//ç®—å‡ºç­‰å·å‰é¢é‚£ä¸ªæ•°å­—å€¼</span></span><br><span class="line">            nowValue = <span class="number">0</span>;</span><br><span class="line">            sign = <span class="number">1</span>;</span><br><span class="line">            position = <span class="number">-1</span>; <span class="comment">//å°†ä¸€äº›å€¼æ¢å¤ä¸ºé»˜è®¤çŠ¶æ€</span></span><br><span class="line">            is = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">//æœ€åçš„å€¼ç´¯åŠ ä¸Šå»</span></span><br><span class="line">        &#123;</span><br><span class="line">            value += -position * sign * nowValue;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        c = <span class="built_in">getchar</span>();</span><br><span class="line">    &#125;</span><br><span class="line"> <span class="comment">//   cout &lt;&lt; nowValue &lt;&lt; &quot; &quot; &lt;&lt; value &lt;&lt; &quot; &quot; &lt;&lt; coefficient &lt;&lt; endl;</span></span><br><span class="line">    <span class="keyword">double</span> ans = (<span class="keyword">double</span>)(value) / coefficient;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%c=%.3lf&quot;</span>,x,ans==<span class="number">0</span>?<span class="built_in">abs</span>(ans):ans);</span><br><span class="line">    <span class="comment">//è¿™æ¶‰åŠä¸€ä¸ªå¾ˆå‘çš„åœ°æ–¹ï¼šC++é‡Œ0é™¤ä»¥ä¸€ä¸ªè´Ÿæ•°å€¼ä¸º-0ï¼Œä¸“é—¨é¿å…è¿™ç§æƒ…å†µ</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="P1583-é­”æ³•ç…§ç‰‡ï¼ˆå¤šä¸ªä¿¡æ¯å¤šä¸ªå¤„ç†ç³»åˆ—ï¼ˆé¢˜æ„æ¯”è¾ƒç»•ï¼‰ï¼‰"><a href="#P1583-é­”æ³•ç…§ç‰‡ï¼ˆå¤šä¸ªä¿¡æ¯å¤šä¸ªå¤„ç†ç³»åˆ—ï¼ˆé¢˜æ„æ¯”è¾ƒç»•ï¼‰ï¼‰" class="headerlink" title="P1583 é­”æ³•ç…§ç‰‡ï¼ˆå¤šä¸ªä¿¡æ¯å¤šä¸ªå¤„ç†ç³»åˆ—ï¼ˆé¢˜æ„æ¯”è¾ƒç»•ï¼‰ï¼‰"></a>P1583 é­”æ³•ç…§ç‰‡ï¼ˆå¤šä¸ªä¿¡æ¯å¤šä¸ªå¤„ç†ç³»åˆ—ï¼ˆé¢˜æ„æ¯”è¾ƒç»•ï¼‰ï¼‰</h1><p><a href="https://www.luogu.org/problemnew/show/P1583">p1583</a></p><p>è¿™é“é¢˜å¦‚æœç›´æ¥ç”¨ç»“æ„ä½“æˆ–è€…ç”¨mapå’Œæ•°ç»„æ¨¡æ‹Ÿçš„è¯ï¼ŒåŸåˆ™ä¸Šæ˜¯å¯ä»¥ï¼Œä½†æ˜¯æ¯”è¾ƒå¤æ‚ï¼ˆå› ä¸ºé¢˜ç›®æ¯”è¾ƒç»•ï¼‰ï¼Œåæ¥åœ¨è¯„è®ºåŒºçœ‹è§ä¸€ä¸ªæ¯”è¾ƒæ–¹ä¾¿çš„è§£æ³•</p><p>æ‘˜è‡ªè¯„è®ºåŒº  ä½œè€…: <a href="https://www.luogu.org/space/show?uid=52913">ç™½äº•é»‘å­1</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">é¢˜ç›®å®é™…ä¸ŠæŒ‡çš„æ˜¯å…ˆç»™å®šä½ 1~nå·å¯¹åº”çš„æƒå€¼ï¼Œä»å¤§åˆ°å°æ’åºåæ ¹æ®å½“å‰æ¬¡åºå†ç¼–ç¬¬äºŒæ¬¡å·ï¼Œåˆ†ç±»åˆ«åŠ ä¸Šå¯¹åº”çš„e[i]ï¼Œå†æ¬¡ä»å¤§åˆ°å°è¿›è¡Œæ’åºåè¾“å‡ºå‰kå¤§æƒå€¼åˆ†åˆ«çš„åˆå§‹ç¼–å·ã€‚</span><br><span class="line">æ³¨æ„ï¼ç¬¬äºŒæ¬¡ç¼–å·ä¸æœ€ç»ˆçš„ç¼–å·è¾“å‡ºæ— å…³ï¼Œä»…ç”¨äºåˆ†ç±»ã€‚</span><br><span class="line">ä¸¾ä¸ªä¾‹å­ï¼š</span><br><span class="line">è¾“å…¥ï¼šï¼ˆæµ‹è¯•ç‚¹#1ï¼‰</span><br><span class="line"></span><br><span class="line">14 3 9 2 5 4 0 0 0 0 0 0</span><br><span class="line"></span><br><span class="line">1 1 3 4 9 2 8 2 8 8 8 7 1 9</span><br><span class="line"></span><br><span class="line">ç¼–å·ä¸ºï¼š1 2 3 4 5 6 7 8 9 10 11 12 13 14</span><br><span class="line"></span><br><span class="line">ç¬¬ä¸€æ¬¡æ’åºåï¼šï¼ˆåºå·å°ä¼˜å…ˆï¼‰</span><br><span class="line"></span><br><span class="line">9 9 8 8 8 8 7 4 3 2 2 1 1 1</span><br><span class="line"></span><br><span class="line">ç¼–å·ä¸ºï¼š5 14 7 9 10 11 12 4 3 6 8 1 2 13</span><br><span class="line"></span><br><span class="line">ç±»åˆ«ä¸ºï¼š1 2 3 4 5 6 7 8 9 10 1 2 3 4</span><br><span class="line"></span><br><span class="line">åŠ ä¸Še[i]åï¼š18 11 13 12 8 8 7 4 3 2 11 3 6 5</span><br><span class="line"></span><br><span class="line">ç¬¬äºŒæ¬¡æ’åºåï¼šï¼ˆåºå·å°ä¼˜å…ˆï¼‰</span><br><span class="line"></span><br><span class="line">18 13 12 11 11 8 8 7 6 5 4 3 3 2</span><br><span class="line"></span><br><span class="line">ç¼–å·ä¸ºï¼š5 7 9 8 14 10 11 12 2 13 4 1 3</span><br><span class="line"></span><br><span class="line">è¾“å‡ºï¼š5 7 9</span><br><span class="line"></span><br><span class="line">è¿™å°±æ˜¯è¿™é“é¢˜å¤§æ¦‚çš„æ€è·¯ï¼šè¾“å…¥â€”â€”æ’å·â€”â€”æ’åºâ€”â€”åˆ†ç±»åŠ e[i]â€”â€”æ’åºâ€”â€”è¾“å‡º</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">int</span> e[<span class="number">12</span>],n,k;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">person</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> w;<span class="comment">//æƒå€¼ </span></span><br><span class="line">    <span class="keyword">int</span> num;<span class="comment">//ç¼–å· </span></span><br><span class="line">    <span class="keyword">int</span> d;<span class="comment">//ç±»åˆ« </span></span><br><span class="line">&#125;p[<span class="number">20010</span>];<span class="comment">//å‚¨å­˜æ¯ä¸ªäººçš„ä¿¡æ¯ </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">w_comp</span><span class="params">(<span class="keyword">const</span> person &amp;a,<span class="keyword">const</span> person &amp;b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(a.w!=b.w)<span class="keyword">return</span> a.w&gt;b.w;<span class="comment">//ä»å¤§åˆ°å°æ’åº </span></span><br><span class="line">    <span class="keyword">return</span> a.num&lt;b.num;<span class="comment">//åºå·å°ä¼˜å…ˆ </span></span><br><span class="line">&#125;<span class="comment">//ç»“æ„ä½“æ’åº </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;k);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;e[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;p[i].w);</span><br><span class="line">        p[i].num=i+<span class="number">1</span>;</span><br><span class="line">    &#125;<span class="comment">//è¯»å…¥+ç¼–å· </span></span><br><span class="line">    <span class="built_in">sort</span>(p,p+n,w_comp);<span class="comment">//ç¬¬ä¸€æ¬¡æ’åº </span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        p[i].d=i%<span class="number">10</span>;<span class="comment">//åˆ†ç±» </span></span><br><span class="line">        p[i].w+=e[p[i].d];<span class="comment">//åŠ ä¸Še[i] </span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(p,p+n,w_comp);<span class="comment">//ç¬¬äºŒæ¬¡æ’åº </span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;k;i++)<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,p[i].num);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="P1588-ä¸¢å¤±çš„ç‰›-å€’é€†æ€æƒ³"><a href="#P1588-ä¸¢å¤±çš„ç‰›-å€’é€†æ€æƒ³" class="headerlink" title="P1588 ä¸¢å¤±çš„ç‰›(å€’é€†æ€æƒ³)"></a>P1588 ä¸¢å¤±çš„ç‰›(å€’é€†æ€æƒ³)</h1><p><a href="https://www.luogu.org/problemnew/show/P1588">p1588</a></p><p>è¿™é“é¢˜å¯ä»¥ç”¨bfsï¼Œä½†æ˜¯å¯èƒ½æ¯”è¾ƒå¤æ‚ï¼Œåæ¥åœ¨é¢˜è§£å‘ç°äº†æ¯”è¾ƒå®¹æ˜“çš„è§£æ³•ï¼Œå°±å€’è¿‡æ¥æƒ³åŠ ä¸Šä¸€ç‚¹è´ªå¿ƒã€‚</p><p>ä½œè€…: <a href="https://www.luogu.org/space/show?uid=19174">æˆ‘çœŸçš„è¦åƒé…±</a></p><p>çœ‹åˆ°é¢˜è§£ä¸€æºœæºœå…¨æ˜¯æœç´¢ï¼Œè¿™é‡Œå‘ä¸ªå¸¦è´ªå¿ƒçš„è§£é¢˜æ–¹æ³•ï¼Œè€Œä¸”æ˜¯æ‰€æœ‰é¢˜è§£ä¸­æœ€å¿«çš„ï¼ˆ0msï¼‰  </p><p>åŸé¢˜æ˜¯FJè¿½ç‰›ï¼Œæˆ‘ä»¬å¯ä»¥åè¿‡æ¥æƒ³ï¼Œå˜æˆç‰›è¿½FJï¼Œè¿™æ ·å­ï¼Œç‰›çš„ç§»åŠ¨æ–¹å¼æœ‰y+1ï¼Œy-1ï¼Œå’Œç›´æ¥y/2ï¼Œå› æ­¤æˆ‘ä»¬åœ¨ç§»åŠ¨ç‰›çš„æ—¶å€™å¯ä»¥<strong>ä¼˜å…ˆ</strong>è€ƒè™‘èƒ½å¦y/2ï¼Œç„¶åå†è€ƒè™‘y+1,y-1çš„ç§»åŠ¨æ–¹å¼  </p><p>ä¹‹æ‰€ä»¥è¦åè¿‡æ¥æƒ³æ˜¯å› ä¸º åœ¨FJè¿½ç‰›çš„æ—¶å€™æ˜¯ä¸èƒ½ä¼˜å…ˆè€ƒè™‘x<em>2å†è€ƒè™‘x+1ï¼Œx-1çš„ï¼Œä¹Ÿä¸èƒ½ä¼˜å…ˆè€ƒè™‘x+1,x-1å†è€ƒè™‘x</em>2ï¼ï¼  </p><p>ä¸¾ä¸ªä¾‹å­ï¼ŒFJåœ¨25ï¼Œç‰›åœ¨102ï¼Œå…ˆ<em>2å†+1å†</em>2å…±ä¸‰æ­¥ï¼ŒFJè¿½ç‰›çš„æ—¶å€™æ²¡åŠæ³•ä¼˜å…ˆè€ƒè™‘æ€ä¹ˆèµ°ã€‚ä½†æ˜¯å¦‚æœæ˜¯ç‰›è¿½FJï¼Œç‰›å¯ä»¥ç›´æ¥y/2ï¼Œè¿™ä¸ªæ—¶å€™ç‰›çš„ä½ç½®å˜æˆ51ï¼Œå¯ä»¥å‘ç°æ˜¯å¥‡æ•°ï¼Œæ²¡åŠæ³•ä¼˜å…ˆy/2ï¼Œæ‰€ä»¥y-1å˜æˆ50ï¼ˆy+1ä¹Ÿè¦è€ƒè™‘ï¼‰ï¼Œç„¶åä¼˜å…ˆè€ƒè™‘y/2å˜æˆ25ï¼Œå…±ä¸‰æ­¥ã€‚  </p><p>ç„¶åè¿™ä¸ªæ€è·¯æˆ‘åˆšå¼€å§‹æ˜¯ç”¨æ•°ç»„å†™ï¼Œå‘ç°åœ¨-1ï¼Œ+1é‚£é‡Œè¦è€ƒè™‘å¾ˆå¤šä¸œè¥¿ï¼Œç„¶åçœ‹ä¸‹äº†ç”¨é˜Ÿåˆ—ï¼Œç¬é—´ç®€å•äº†å¾ˆå¤šã€‚ã€‚ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; P; <span class="comment">//p.first è¡¨ç¤ºç‰›çš„ä½ç½®ï¼Œp.secondè¡¨ç¤ºç‰›èµ°äº†å¤šå°‘æ­¥ </span></span><br><span class="line">    P p;</span><br><span class="line">    queue&lt;P&gt;q;</span><br><span class="line">    <span class="keyword">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> Min = <span class="number">100000000</span>;</span><br><span class="line">        <span class="keyword">int</span> n;</span><br><span class="line">        cin &gt;&gt; n &gt;&gt; p.first;</span><br><span class="line">        q.<span class="built_in">push</span>(<span class="built_in">P</span>(p.first, <span class="number">0</span>));</span><br><span class="line">        <span class="keyword">while</span>(q.<span class="built_in">size</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            p = q.<span class="built_in">front</span>();</span><br><span class="line">            q.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">if</span>(p.first &lt; n) <span class="comment">////å¦‚æœç‰›åœ¨FJçš„åé¢ï¼Œé‚£å°±ç›´æ¥èµ°åˆ°FJ</span></span><br><span class="line">            &#123;</span><br><span class="line">                p.second += n - p.first;</span><br><span class="line">                <span class="keyword">if</span>(Min &gt; p.second) Min = p.second;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(p.first % <span class="number">2</span> == <span class="number">0</span>) <span class="comment">//ç‰›å¯ä»¥ç›´æ¥é™¤ä»¥2ï¼Œä¼˜å…ˆè€ƒè™‘é™¤ä»¥2 </span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(p.first / <span class="number">2</span> &gt; n)</span><br><span class="line">                    q.<span class="built_in">push</span>(<span class="built_in">P</span>(p.first / <span class="number">2</span>, p.second + <span class="number">1</span>)); </span><br><span class="line">                <span class="comment">//è¿™é‡Œè€ƒè™‘çš„æ˜¯é™¤ä»¥2åä¼šè¶…è¿‡FJçš„æƒ…å†µï¼Œç„¶åå‰è¿›ï¼Œä½†æ˜¯è¿˜æ˜¯æ¯”ç›´æ¥èµ°åˆ°FJå¿«</span></span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(n - p.first / <span class="number">2</span> &lt; p.first - n)</span><br><span class="line">                    q.<span class="built_in">push</span>(<span class="built_in">P</span>(p.first / <span class="number">2</span>, p.second + <span class="number">1</span>));</span><br><span class="line">                <span class="keyword">else</span> <span class="comment">//å¦åˆ™ç›´æ¥èµ°åˆ°FJ</span></span><br><span class="line">                &#123;</span><br><span class="line">                    p.second += p.first - n;</span><br><span class="line">                    <span class="keyword">if</span>( Min &gt; p.second ) Min = p.second;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span><span class="comment">//å¦‚æœä¸èƒ½ç›´æ¥y/2ï¼Œé€‰æ‹©y+1ï¼Œy-1çš„æ–¹å¼ ï¼Œè¿™é‡Œæ˜¯é˜Ÿåˆ—æ–¹ä¾¿ä¹‹å¤„ï¼Œç›´æ¥åŠ åˆ°é˜Ÿåˆ—ï¼Œç„¶åä¸€ä¸€åˆ¤æ–­</span></span><br><span class="line">            &#123;</span><br><span class="line">                q.<span class="built_in">push</span>( <span class="built_in">P</span>(p.first+<span class="number">1</span>,p.second+<span class="number">1</span>) );</span><br><span class="line">                q.<span class="built_in">push</span>( <span class="built_in">P</span>(p.first<span class="number">-1</span>,p.second+<span class="number">1</span>) );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; Min &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="P1459-ä¸‰å€¼çš„æ’åº"><a href="#P1459-ä¸‰å€¼çš„æ’åº" class="headerlink" title="P1459 ä¸‰å€¼çš„æ’åº"></a>P1459 ä¸‰å€¼çš„æ’åº</h1><p>é¢˜ç›®ï¼š<a href="https://www.luogu.org/problemnew/show/P1459">P1459</a></p><p>ä½œè€…: <a href="https://www.luogu.org/space/show?uid=65602">æ•Œæ•Œç•</a> </p><p>è¿™é“é¢˜å¯ä»¥ç”¨çº¿æ®µæ ‘ä»€ä¹ˆçš„ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥ç”¨æ¨¡æ‹Ÿï¼Œå…ˆæ¨¡æ‹Ÿ1ã€2ã€3å„æœ‰å¤šå°‘ä¸ªï¼Œå‘ç°1åŒºé—´çš„2ä¸2åŒºé—´çš„1äº¤æ¢ï¼Œå‘ç°1åŒºé—´çš„3ä¸3åŒºé—´çš„1äº¤æ¢ï¼Œå‘ç°2åŒºé—´çš„3ä¸3åŒºé—´çš„2äº¤æ¢ã€‚  </p><p>å‰©ä¸‹çš„3ä¸ªåŒºé—´å†…çš„æ— æ³•ä¸€æ¬¡äº¤æ¢çš„æ•°ä¹Ÿåªç”¨ä¸¤æ¬¡äº¤æ¢å°±å¯ä»¥æŠŠæ— æ³•ä¸€æ¬¡äº¤æ¢çš„ä¸‰ä¸ªæ•°æ¢äº†ã€‚</p><p>ä¸»è¦æ˜¯éå†è¿‡ç¨‹ã€‚æ€ä¹ˆæ ·æ‰èƒ½åšåˆ°ä¸æ¼å‘¢ã€‚</p><p>ä¸‹é¢ä»£ç ä¸»è¦æ€è·¯ï¼š  </p><p>åŒºé—´ä¸€ï¼šåº”è¯¥å­˜çš„æ˜¯1ï¼ŒåŒºé—´äºŒï¼šå­˜çš„æ˜¯åº”è¯¥æ˜¯2ï¼ŒåŒºé—´ä¸‰åŒç†</p><p>ä»æœ«å°¾å¼€å§‹éå†åŒºé—´ä¸‰ï¼Œå¦‚æœæ˜¯1çš„è¯ï¼Œé‚£ä¹ˆå°±åœ¨åŒºé—´ä¸€æ‰¾çœ‹çœ‹æœ‰æ²¡æœ‰3ï¼Œæœ‰çš„è¯å°±äº¤æ¢ï¼Œæ²¡æœ‰çš„è¯åœ¨åŒºé—´ä¸€äºŒæœç´¢ä¸ç­‰äº1çš„å€¼ï¼Œç„¶åäº¤æ¢ï¼Œæ¥ç€åˆ¤æ–­å¦‚æœæ˜¯2çš„è¯ï¼ˆå¦‚æœä¸Šé¢æ‰¾ä¸åˆ°3å°†2ä¸1äº¤æ¢çš„è¯ï¼Œé‚£ä¹ˆåŒæ ·ä¹Ÿå¯ä»¥åˆ¤æ–­åˆ°è¿™ä¸ªå·²ç»äº¤æ¢äº†çš„2ï¼‰ï¼Œç„¶ååœ¨åŒºé—´2æ‰¾3ï¼Œå¦‚æœæ‰¾ä¸åˆ°çš„è¯ï¼Œåœ¨åŒºé—´ä¸€æ‰¾ã€‚å…¶å®ä¸»è¦æ˜¯è¿˜æ˜¯ä¸Šé¢é‚£ä¸ªæ‰¾ä¸åˆ°1çš„è¯ï¼Œå°±å°†å…¶ä»–å€¼äº¤æ¢äº†ï¼Œè¿™æ ·å°±å¯ä»¥å°†1æ¢åˆ°ä¸Šé¢äº†ã€‚</p><p>ç„¶åå†å¤„ç†åŒºé—´äºŒå°±è¡Œäº†ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> len = <span class="number">1010</span>;</span><br><span class="line"><span class="keyword">int</span> arr[len];</span><br><span class="line"><span class="keyword">int</span> num[<span class="number">4</span>]; <span class="comment">//num[1]ä»£è¡¨å¤§å°ä¸º1çš„æ•°é‡ï¼Œä»¥åçš„ç±»æ¨</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i &lt;= n;i ++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; arr[i];</span><br><span class="line">        num[arr[i]]++;</span><br><span class="line">    &#125;</span><br><span class="line">    num[<span class="number">2</span>] = num[<span class="number">1</span>] + num[<span class="number">2</span>];</span><br><span class="line">    num[<span class="number">3</span>] = num[<span class="number">1</span>] + num[<span class="number">2</span>] + num[<span class="number">3</span>];</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = n; i &gt; num[<span class="number">2</span>]; i--) <span class="comment">//æœç´¢åŒºé—´ä¸‰</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(arr[i] == <span class="number">1</span>) <span class="comment">//åŒºé—´ä¸‰æœ¬æ¥åº”è¯¥æ˜¯3ï¼Œå¦‚æœæ˜¯1çš„è¯ï¼Œé‚£ä¸ªå¾—è¿›è¡Œäº¤æ¢</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">bool</span> l = <span class="number">1</span>; <span class="comment">//åˆ¤æ–­æ˜¯å¦æ‰¾åˆ°äº†3ï¼Œå¦‚æœæ²¡æœ‰å°±æœç´¢2</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= num[<span class="number">1</span>]; k++) <span class="comment">//1åœ¨åŒºé—´ä¸€ï¼Œåœ¨åŒºé—´1æœç´¢</span></span><br><span class="line">                <span class="keyword">if</span>(arr[k] == <span class="number">3</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">swap</span>(arr[k], arr[i]);</span><br><span class="line">                    l = <span class="number">0</span>;</span><br><span class="line">                    ans++;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">if</span>(l)   <span class="comment">//åœ¨åŒºé—´ä¸€æ‰¾ä¸åˆ°3</span></span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">1</span>;k &lt;= num[<span class="number">2</span>]; k++) <span class="comment">//ç„¶ååœ¨åŒºé—´ä¸€ï¼ŒäºŒæœç´¢ä¸ç­‰äº1çš„æ•°å­—</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span>(arr[k] != <span class="number">1</span>)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="built_in">swap</span>(arr[k], arr[i]); <span class="comment">//æŠŠ1æ¢åˆ°åŒºé—´ä¸€ï¼ŒæŠŠ2æˆ–3æ¢åˆ°åŒºé—´ä¸‰</span></span><br><span class="line">                        ans++;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(arr[i] == <span class="number">2</span>) <span class="comment">//å¦‚æœä¸Šä¸€æ­¥æ˜¯æŠŠ2æ¢åˆ°åŒºé—´ä¸‰ï¼Œé‚£ä¹ˆå°±åœ¨åŒºé—´äºŒé‡Œé¢æ‰¾3ï¼Œç„¶åä¸¤è€…äº¤æ¢</span></span><br><span class="line">        &#123;               <span class="comment">//æˆ–è€…æœ¬æ¥å°±æ˜¯2</span></span><br><span class="line">            <span class="keyword">bool</span> l = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = num[<span class="number">1</span>] + <span class="number">1</span>; k &lt;= num[<span class="number">2</span>]; k++)</span><br><span class="line">                <span class="keyword">if</span>(arr[k] == <span class="number">3</span>) <span class="comment">//æ‰¾åˆ°3ï¼Œç„¶åäº¤æ¢</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">swap</span>(arr[k],arr[i]);</span><br><span class="line">                    ans++;</span><br><span class="line">                    l = <span class="number">0</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">if</span>(l) <span class="comment">//å¦‚æœæ‰¾ä¸åˆ°ï¼Œé‚£å°±åœ¨åŒºé—´ä¸€æ‰¾</span></span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= num[<span class="number">1</span>]; k++)</span><br><span class="line">                    <span class="keyword">if</span>(arr[k] == <span class="number">3</span>)&#123;</span><br><span class="line">                        ans ++;</span><br><span class="line">                        <span class="built_in">swap</span>(arr[k], arr[i]);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = num[<span class="number">2</span>]; i &gt;= num[<span class="number">1</span>]+<span class="number">1</span>; i--) <span class="comment">//å¤„ç†åŒºé—´ä¸‰åå†å¤„ç†åŒºé—´äºŒã€‚è¿™é‡Œåªè¦äº¤æ¢1,2ï¼Œå› ä¸º3å·²ç»å…¨éƒ¨åœ¨åŒºé—´ä¸‰äº†</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(arr[i] == <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= num[<span class="number">1</span>]; k++)</span><br><span class="line">                <span class="keyword">if</span>(arr[k] == <span class="number">2</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">swap</span>(arr[k], arr[i]);</span><br><span class="line">                    ans++;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="P2386-æ”¾è‹¹æœ"><a href="#P2386-æ”¾è‹¹æœ" class="headerlink" title="P2386 æ”¾è‹¹æœ"></a>P2386 æ”¾è‹¹æœ</h1><p>é¢˜ç›®ï¼š<a href="https://www.luogu.org/problemnew/show/P2386">P2386 æ”¾è‹¹æœ</a></p><p>é¢˜è§£ï¼šä½œè€…: <a href="https://www.luogu.org/space/show?uid=45384">ybb756032937</a> é€’å½’</p><p>è¯¦ç»†è§£é‡Šæ€è·¯ï¼ˆå½“è‹¹æœæ•°å¤§äºç­‰äºç›˜å­æ•°æ—¶çš„åˆ†æ³•ï¼‰ï¼šä¸€ç§æ˜¯<strong>ç›®å‰</strong>æ‰€æœ‰çš„ç›˜å­éƒ½æ”¾ä¸€ä¸ªè‹¹æœï¼Œç›˜å­æ•°ä¸å˜ï¼Œå³ï¼šapple(m-n,n);  </p><p>å¦ä¸€ç§æ˜¯å°†ä¸€ä¸ªç›˜å­ä¸æ”¾ï¼Œå†æ¥è¿›è¡Œæ€è€ƒï¼Œå³ï¼šapple(m,n-1);  </p><p>ä¸¤ç§æƒ…å†µçš„æ€»å’Œå°±æ˜¯ç­”æ¡ˆï¼›  </p><p>æ¥ä¸‹æ¥å°±ç”¨ä¸€ä¸ªä¾‹å­æ¥è¯¦ç»†è§£é‡Šï¼š  </p><p>ç°åœ¨æœ‰5ä¸ªè‹¹æœå’Œ3ä¸ªç›˜å­ï¼›  </p><p>å› ä¸ºè‹¹æœæ•°å¤§äºç›˜å­æ•°ï¼Œæ‰€ä»¥åˆ†æˆä¸¤ç§ï¼š  </p><p>ç¬¬ä¸€ç§ï¼šç›®å‰æ‰€æœ‰ç›˜å­æ”¾ä¸€ä¸ªè‹¹æœï¼ˆç›®å‰ç›˜å­æ•°3ä¸ªï¼‰apple(2,3);  </p><p>ç¬¬äºŒç§ï¼šæ‹¿ä¸€ä¸ªç›˜å­ä¸æ”¾è‹¹æœï¼Œå‰©ä¸‹çš„ç›˜å­ç»§ç»­è€ƒè™‘ï¼Œapple(5,2);  </p><p>apple(2,3):å› ä¸ºè‹¹æœæ•°å°äºç›˜å­æ•°ï¼Œæ‰€ä»¥apple(2,2);  </p><p>apple(2,2):å› ä¸ºè‹¹æœæ•°ç­‰äºç›˜å­æ•°ï¼Œæ‰€ä»¥åˆåˆ†ä¸ºä¸¤ç§ï¼š  </p><p>ç¬¬ä¸€ç§ï¼šç›®å‰æ‰€æœ‰ç›˜å­æ”¾ä¸€ä¸ªè‹¹æœï¼ˆç›®å‰ç›˜å­æ•°2ä¸ªï¼‰apple(0,2); æ²¡æœ‰è‹¹æœï¼Œè¾¾åˆ°è¾¹ç•Œï¼Œ<strong>è¿”å›å€¼1</strong>ï¼›  </p><p>ç¬¬äºŒç§ï¼šæ‹¿ä¸€ä¸ªç›˜å­ä¸æ”¾è‹¹æœï¼Œå‰©ä¸‹çš„ç›˜å­ç»§ç»­è€ƒè™‘ï¼Œapple(2,1); ç›˜å­æ•°åªæœ‰1ä¸ªï¼Œè¾¾åˆ°è¾¹ç•Œï¼Œ<strong>è¿”å›å€¼1</strong>ï¼›  </p><p>apple(5,2):å› ä¸ºè‹¹æœæ•°å¤§äºç›˜å­æ•°ï¼Œæ‰€ä»¥åˆåˆ†ä¸ºä¸¤ç§ï¼š  </p><p>ç¬¬ä¸€ç§ï¼šç›®å‰æ‰€æœ‰ç›˜å­æ”¾ä¸€ä¸ªè‹¹æœï¼ˆç›®å‰ç›˜å­æ•°2ä¸ª)apple(3,2);  </p><p>ç¬¬äºŒç§ï¼šæ‹¿ä¸€ä¸ªç›˜å­ä¸æ”¾è‹¹æœï¼Œå‰©ä¸‹çš„ç›˜å­ç»§ç»­è€ƒè™‘ï¼Œapple(5,1); å› ä¸ºç›˜å­æ•°åªæœ‰1ä¸ªï¼Œè¾¾åˆ°è¾¹ç•Œï¼Œ<strong>è¿”å›å€¼1</strong>ï¼›  </p><p>apple(3,2):å› ä¸ºè‹¹æœæ•°å¤§äºç›˜å­æ•°ï¼Œæ‰€ä»¥åˆåˆ†ä¸ºä¸¤ç§ï¼š  </p><p>ç¬¬ä¸€ç§ï¼šç›®å‰æ‰€æœ‰ç›˜å­æ”¾ä¸€ä¸ªè‹¹æœï¼ˆç›®å‰ç›˜å­æ•°2ä¸ª)apple(1,2); è‹¹æœæ•°åªæœ‰1ä¸ªï¼Œè¾¾åˆ°è¾¹ç•Œï¼Œ<strong>è¿”å›å€¼1</strong>ï¼›  </p><p>ç¬¬äºŒç§ï¼šæ‹¿ä¸€ä¸ªç›˜å­ä¸æ”¾è‹¹æœï¼Œå‰©ä¸‹çš„ç›˜å­ç»§ç»­è€ƒè™‘ï¼Œapple(3,1); ç›˜å­æ•°åªæœ‰1ä¸ªï¼Œè¾¾åˆ°è¾¹ç•Œï¼Œ<strong>è¿”å›å€¼1</strong>ï¼›  </p><p>æ‰€æœ‰çš„å€¼ç›¸åŠ å¾—åˆ°æœ€åçš„ç»“æœ5ï¼Œè®°å½•åœ¨æ•°ç»„sumä¸­ï¼Œæœ€åè¾“å‡ºï¼›  </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">put</span><span class="params">(<span class="keyword">int</span> m,<span class="keyword">int</span> n)</span> <span class="comment">//mæ˜¯è‹¹æœæ•°ï¼Œnæ˜¯ç›˜å­æ•°</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(m == <span class="number">0</span> || m == <span class="number">1</span> || n == <span class="number">1</span>) <span class="comment">//è¾¹ç•Œï¼šå½“è‹¹æœåªæœ‰ä¸€ä¸ªæˆ–è€…æ²¡æœ‰è‹¹æœæ—¶æˆ–è€…ç›˜å­åªæœ‰ä¸€ä¸ªæ—¶ï¼Œåªæœ‰ä¸€ç§æ”¾æ³•ï¼Œæ‰€ä»¥è¾¾åˆ°è¾¹ç•Œï¼Œè¿”å›å€¼ï¼›</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(m &lt; n) <span class="comment">//å½“è‹¹æœæ•°å°‘äºç›˜å­æ•°ï¼Œå°±åªæœ‰mä¸ªç›˜å­ä½œç”¨ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥å°±è®¡ç®—mä¸ªè‹¹æœå’Œmä¸ªç›˜å­ï¼›</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">put</span>(m, m);</span><br><span class="line">    <span class="keyword">if</span>(m &gt;= n) <span class="comment">//å¦‚æœè‹¹æœæ•°å¤§äºç­‰äºç›˜å­æ•°ï¼Œåˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ç§æ˜¯ç›®å‰æ‰€æœ‰çš„ç›˜å­éƒ½æ”¾ä¸€ä¸ªè‹¹æœï¼Œå¦ä¸€ç§æ˜¯æ‹¿ä¸€ä¸ªç›˜å­ä¸æ”¾ï¼›</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">put</span>(m - n, n) + <span class="built_in">put</span>(m, n - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> m ,n, cnt = <span class="number">0</span>;</span><br><span class="line">        cin &gt;&gt; m &gt;&gt; n;</span><br><span class="line">        cnt = <span class="built_in">put</span>(m, n);</span><br><span class="line">        cout &lt;&lt; cnt &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="P2562-AHOI2002-KittyçŒ«åŸºå› ç¼–ç -é€’å½’"><a href="#P2562-AHOI2002-KittyçŒ«åŸºå› ç¼–ç -é€’å½’" class="headerlink" title="P2562 [AHOI2002]KittyçŒ«åŸºå› ç¼–ç (é€’å½’)"></a>P2562 [AHOI2002]KittyçŒ«åŸºå› ç¼–ç (é€’å½’)</h1><p>é¢˜ç›®ï¼š<a href="https://www.luogu.org/problemnew/show/P2562">p2562</a></p><p>çœ‹åˆ°è¿™é“é¢˜ä¸€æƒ³å°±æ˜¯é€’å½’é¢˜ï¼Œç±»ä¼¼äºåˆ†æ®µå‡½æ•°çš„é¢˜ç›®éƒ½å¯ä»¥æƒ³æƒ³é€’å½’ï¼Œä½†æ˜¯æœ‰äº†åˆ«çš„æ€è·¯ï¼Œç”¨é˜Ÿåˆ—æ¥åšï¼Œå°±æ˜¯ä¸æ–­å‡ºé˜Ÿå…¥é˜Ÿï¼Œä½†æ˜¯å¦‚æœæå‰å‡ºé˜Ÿçš„è¯è¿™æ ·çš„ç»“æœä¸å¯¹ï¼Œå¦‚æœéƒ½ä¸å‡ºé˜Ÿçš„è¯ï¼Œç›´æ¥å¤„ç†å®Œäº†çš„è¯åˆä¸çŸ¥é“æ€ä¹ˆç»“æŸå¾ªç¯ï¼Œæ‰€ä»¥è¿˜æ˜¯é€’å½’å¥½</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function">string <span class="title">check</span><span class="params">(string s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> mid = s.<span class="built_in">size</span>() / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span>(s.<span class="built_in">find</span>(<span class="string">&#x27;0&#x27;</span>) != string::npos) <span class="comment">//è¡¨ç¤ºæ‰¾åˆ°äº†0</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(s.<span class="built_in">find</span>(<span class="string">&#x27;1&#x27;</span>) != string::npos) <span class="comment">//åŒæ—¶æ‰¾åˆ°äº†1</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;C&#x27;</span> + <span class="built_in">check</span>(s.<span class="built_in">substr</span>(<span class="number">0</span>, mid)) +</span><br><span class="line">                    <span class="built_in">check</span>(s.<span class="built_in">substr</span>(mid, mid));</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">//æ²¡æœ‰çš„æ‰¾åˆ°1çš„è¯é‚£ä¹ˆå°±ä»£è¡¨å…¨æ˜¯0</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;A&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="comment">//æ²¡æœ‰æ‰¾åˆ°0ï¼Œä»£è¡¨å…¨æ˜¯1</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;B&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    string in;</span><br><span class="line">    cin &gt;&gt; in;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">check</span>(in);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="P1209-USACO1-3-ä¿®ç†ç‰›æ£š-Barn-Repairï¼ˆè´ªå¿ƒï¼‰"><a href="#P1209-USACO1-3-ä¿®ç†ç‰›æ£š-Barn-Repairï¼ˆè´ªå¿ƒï¼‰" class="headerlink" title="P1209 [USACO1.3]ä¿®ç†ç‰›æ£š Barn Repairï¼ˆè´ªå¿ƒï¼‰"></a>P1209 [USACO1.3]ä¿®ç†ç‰›æ£š Barn Repairï¼ˆè´ªå¿ƒï¼‰</h1><p>é¢˜ç›®ï¼š<a href="https://www.luogu.org/problemnew/show/P1209">p1209</a></p><p>é¢˜è§£ä½œè€…: <a href="https://www.luogu.org/space/show?uid=41165">Starlight_Glimmer</a> </p><p>å…¸å‹çš„è´ªå¿ƒé¢˜ç›®</p><p>æˆ‘ä»¬å¯ä»¥å…ˆå‡è®¾åªæœ‰ä¸€å—æœ¨æ¿ä»ç¼–å·æœ€å°çš„ç‰›æ£šä¸€ç›´é“ºåˆ°ç¼–å·æœ€å¤§çš„ç‰›æ£šï¼Œç„¶åæ–­å¼€m-1å¤„ã€‚è‡ªç„¶è¦æŒ‰ç›¸é‚»ç‰›æ£šçš„ç¼–å·å·®ä»å¤§åˆ°å°æ–­å¼€æ‰èƒ½ä½¿æˆ‘ä»¬æ–­å¼€çš„åœ°æ–¹å¯ä»¥æœ‰æ•ˆèŠ‚çœæœ¨æ¿é•¿åº¦ï¼ˆå› ä¸ºä¸­é—´çœå»çš„è¦æ›´å¤šï¼‰</p><p>å¦å¤–ï¼Œè¦å°†è¾“å…¥çš„æ•°æ®æ’åºï¼Œæ•°æ®å¯èƒ½ä¸æ˜¯æŒ‰ç¼–å·ä»å°åˆ°å¤§ç»™çš„</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> len = <span class="number">1000000</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m, s, c;</span><br><span class="line">    <span class="keyword">int</span> C[len], dis[len]; <span class="comment">//disä»£è¡¨ä¸¤ä¸ªç‰›æ£šä¹‹é—´çš„è·ç¦»</span></span><br><span class="line">    cin &gt;&gt; m &gt;&gt; s &gt;&gt; c;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; c; i++)</span><br><span class="line">        cin &gt;&gt; C[i];</span><br><span class="line">    <span class="keyword">if</span>(m &gt; c) <span class="comment">//ç‰¹åˆ¤ï¼Œå¦‚æœæœ¨æ¿æ•°å¤§äºç‰›æ•°ï¼Œé‚£ä¹ˆæ¯åªç‰›å¯ä»¥æœ‰ä¸€å—æœ¨æ¿</span></span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; c;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">sort</span>(C, C + c);</span><br><span class="line">    ans = C[c - <span class="number">1</span>] - C[<span class="number">0</span>] + <span class="number">1</span>; <span class="comment">//å‡è®¾åªæœ‰ä¸€å—æœ¨æ¿è¿ç»­åœ°é“ºç€</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; c - <span class="number">1</span>; i++)</span><br><span class="line">        dis[i] = C[i + <span class="number">1</span>] - C[i];</span><br><span class="line">    <span class="built_in">sort</span>(dis, dis + c - <span class="number">1</span>, greater&lt;<span class="keyword">int</span>&gt;());</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m - <span class="number">1</span>; i++) <span class="comment">//åŸæ¥å·²ç»å‡è®¾æœ‰ä¸€å—äº†ï¼Œåˆ™éœ€è¦å‡å»m-1ä¸ª</span></span><br><span class="line">        ans = ans - dis[i] + <span class="number">1</span>;</span><br><span class="line">    cout &lt;&lt; ans;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="P1106-åˆ æ•°é—®é¢˜-ï¼ˆè´ªå¿ƒï¼‰"><a href="#P1106-åˆ æ•°é—®é¢˜-ï¼ˆè´ªå¿ƒï¼‰" class="headerlink" title="P1106 åˆ æ•°é—®é¢˜ ï¼ˆè´ªå¿ƒï¼‰"></a>P1106 åˆ æ•°é—®é¢˜ ï¼ˆè´ªå¿ƒï¼‰</h1><p><a href="https://www.luogu.org/problemnew/show/P1106">P1106 åˆ æ•°é—®é¢˜</a></p><p>é¢˜è§£å‚è€ƒï¼š <a href="https://www.luogu.org/space/show?uid=39912">ä¹¦æµ·æ‰¬å¸†</a> </p><p>è¿™é“é¢˜ç›®æ˜¯ä¸€é“éå¸¸ç»å…¸çš„è´ªå¿ƒé—®é¢˜ã€‚ç”±äºnçš„ä½æ•°éå¸¸å¤šï¼Œè€Œä¸”åˆ é™¤æ“ä½œæ”¹å˜çš„æ˜¯æ¯ä¸ªæ•°ä½ï¼Œæ‰€ä»¥æˆ‘ä»¬éå¸¸è‡ªç„¶åœ°èƒ½æƒ³åˆ°ç”¨å­—ç¬¦ä¸²æ¥å­˜å‚¨nã€‚  </p><p>æœ¬é¢˜ç›®çš„è´ªå¿ƒç­–ç•¥ï¼šä»é«˜ä½åˆ°ä½ä½æœç´¢ï¼Œå¦‚æœå„ä½æ•°å­—å‡é€’å¢ï¼Œåˆ™åˆ å»æœ€åä¸€ä¸ªæ•°å­—ï¼Œå¦åˆ™åˆ é™¤ç¬¬ä¸€ä¸ªé€’å‡åŒºé—´çš„é¦–å­—ç¬¦ã€‚ä¸¾ä¸ªæ —å­ï¼Œå¦‚æœ1234567è¦åˆ é™¤2ä½çš„è¯ï¼Œæˆ‘ä»¬å¿…å®šæ˜¯åˆ é™¤6å’Œ7ï¼Œè€Œ3654321å¦‚æœè¦åˆ é™¤2ä½çš„è¯ï¼Œæˆ‘ä»¬åˆ™è¦é€‰æ‹©åˆ å»6å’Œ5.</p><p>é‡å¤ä»¥ä¸Šè¿‡ç¨‹sæ¬¡ï¼Œå‰©ä¸‹çš„æ•°å­—ä¸²ä¾¿æ˜¯é—®é¢˜çš„è§£äº†ã€‚</p><p>è¿™é‡Œå†è°ˆä¸€ä¸‹0çš„é—®é¢˜ï¼Œç”±äºå‰å¯¼0ä¸èƒ½è¾“å‡º<del>ï¼ˆä½ è§è¿‡æœ‰äººæŠŠ123å†™æˆ0123æˆ–æ˜¯000123å˜›ï¼‰</del>æ‰€ä»¥æˆ‘ä»¬å†æ¥ä¸€ä¸ªå¸ƒå°”å˜é‡flagæ¥è®°å½•æ¯ä¸€ä½æ˜¯å¦ä¸º0.ä½†æ˜¯è¿™ä¸ªæ—¶å€™è¿˜å‡ºç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯è¿™ä¸ªå­—ç¬¦ä¸²è¢«åˆ é™¤å®Œäº†ï¼Œåªå‰©ä¸‹ä¸€ä¸ª0æ€ä¹ˆåŠï¼Ÿæ¯”å¦‚è¯´æ ·ä¾‹7ï¼Œ10åˆ é™¤1ä½ä¹‹åï¼Œæˆ‘ä»¬è¿˜æ˜¯å¿…é¡»è¦è¾“å‡º0çš„ã€‚å› æ­¤æˆ‘ä»¬å†å»ºç«‹ä¸€ä¸ªcntå˜é‡æ¥å­˜å‚¨è¾“å‡ºçš„æ•°å­—çš„ä¸ªæ•°ã€‚å¦‚æœä¸ªæ•°ä¸º0ï¼Œé‚£ä¹ˆè¯´æ˜æ•´ä¸ªå­—ç¬¦ä¸²å‡ä¸º0ï¼Œæ­¤æ—¶æˆ‘ä»¬è¿˜éœ€è¦è¾“å‡ºä¸€ä¸ª0.</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    string s;</span><br><span class="line">    cin &gt;&gt; s;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">int</span> len = s.<span class="built_in">size</span>(); <span class="comment">//é•¿åº¦ï¼Œä¸èƒ½éƒ½ç”¨s.size()ï¼›å› ä¸ºè¦ç¼©å‡ï¼Œæ•°ç»„å‘å‰ç§»ï¼Œä½†æ˜¯s.size()ä¸å˜</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; len; j++) <span class="comment">//ä»å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹æŸ¥æ‰¾ï¼Œlenæ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(s[j] &gt; s[j + <span class="number">1</span>]) <span class="comment">//å¦‚æœæ‰¾åˆ°äº†é€’å‡åŒºé—´</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> k = j; k &lt; len - <span class="number">1</span>; k++) <span class="comment">//é‚£ä¹ˆå°±åˆ é™¤å­—ç¬¦ä¸²nçš„ç¬¬jä¸ªå­—ç¬¦ï¼Œåé¢å­—ç¬¦å¾€å‰è°ƒæ•´ã€‚</span></span><br><span class="line">                    s[k] = s[k + <span class="number">1</span>];</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        len--;  <span class="comment">//ç”±äºå·²ç»åˆ é™¤äº†ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥é•¿åº¦-1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>; <span class="comment">//è®°å½•è¢«è¾“å‡ºå­—ç¬¦çš„ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(s[i] != <span class="string">&#x27;0&#x27;</span>) <span class="comment">//å¦‚æœä¸æ˜¯0ï¼Œåˆ™è¯´æ˜å¯ä»¥è¾“å‡ºï¼Œflag=1</span></span><br><span class="line">            flag = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(flag)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; s[i];</span><br><span class="line">            cnt++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(cnt == <span class="number">0</span>) <span class="comment">//å¦‚æœå•¥éƒ½æ²¡è¾“å‡ºï¼Œå°±è¯´æ˜æ•´ä¸ªå­—ç¬¦ä¸²éƒ½æ˜¯0ï¼Œæ­¤äº‹æˆ‘ä»¬è¿˜è¦è¾“å‡ºä¸€ä¸ª0</span></span><br><span class="line">        cout &lt;&lt; <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="P2758-ç¼–è¾‘è·ç¦»-dp"><a href="#P2758-ç¼–è¾‘è·ç¦»-dp" class="headerlink" title="P2758 ç¼–è¾‘è·ç¦»(dp)"></a>P2758 ç¼–è¾‘è·ç¦»(dp)</h1><p><a href="https://www.luogu.org/problemnew/show/P2758">p2758</a></p><p>é¢˜è§£å‚è€ƒï¼š</p><p><a href="https://www.luogu.org/space/show?uid=36788">4396ç</a></p><p> <a href="https://www.luogu.org/space/show?uid=22136">qwaszx</a></p><p>åšåŠ¨æ€è§„åˆ’çš„é¢˜ä¸€èˆ¬åˆ†ä¸ºå››ä¸ªæ­¥éª¤ï¼šç¡®å®šå­é—®é¢˜â€”&gt;å®šä¹‰çŠ¶æ€â€”&gt;è½¬ç§»æ–¹ç¨‹â€”&gt;é¿å…é‡å¤æ±‚è§£  </p><p><strong>1.ç¡®å®šå­é—®é¢˜ï¼š  </strong>  </p><p>ç”±äºå¯¹äºå­—ç¬¦ä¸²çš„æ“ä½œåªæœ‰4ç§æƒ…å†µï¼ˆåˆ é™¤ï¼Œæ·»åŠ ã€æ›´æ”¹ã€ä¸å˜ï¼‰ï¼Œæ‰€ä»¥è¯¥é¢˜çš„å­é—®é¢˜å°±æ˜¯è¿›è¡Œäº†è¿™4ç§æ“ä½œåçš„Aå­—ç¬¦ä¸²å˜ä¸ºBå­—ç¬¦ä¸²éœ€è¦å¤šå°‘æ­¥ã€‚  </p><p><strong>2.å®šä¹‰çŠ¶æ€ï¼š </strong> </p><p>ä¹Ÿå°±æ˜¯è¯´é€’å½’çš„dpå‡½æ•°éœ€è¦å“ªäº›å‚æ•°ï¼Œå‚æ•°è¶Šå°‘è¶Šå¥½å› ä¸ºéœ€è¦å»ºmemoã€‚åæ¥æƒ³åˆ°dpï¼ˆiï¼Œjï¼‰ä»£è¡¨å­—ç¬¦ä¸²Açš„å‰iä¸ªå­—ç¬¦ï¼ˆåŒ…æ‹¬ç¬¬iä¸ªï¼‰å˜ä¸ºå­—ç¬¦ä¸²Bçš„å‰jä¸ªï¼ˆåŒ…æ‹¬ç¬¬jä¸ªï¼‰éœ€è¦å¤šå°‘æ­¥ã€‚ä¹Ÿå°±æ˜¯è¯´è§£å‡ºæ¥dpï¼ˆlenAï¼ŒlenBï¼‰å°±å¯ä»¥äº†ã€‚</p><p> <strong>3.è½¬ç§»æ–¹ç¨‹ï¼š  </strong></p><p>å‡è®¾ç”¨f[i][j]è¡¨ç¤ºå°†ä¸²a[1â€¦i]è½¬æ¢ä¸ºä¸²b[1â€¦j]æ‰€éœ€çš„æœ€å°‘æ“ä½œæ¬¡æ•°ï¼ˆæœ€çŸ­è·ç¦»ï¼‰</p><p>é¦–å…ˆæ˜¯è¾¹ç•Œï¼š  </p><p>â‘ i==0æ—¶ï¼Œå³aä¸ºç©ºï¼Œé‚£ä¹ˆå¯¹åº”çš„f[0][j]çš„å€¼å°±ä¸ºjï¼šå¢åŠ jä¸ªå­—ç¬¦ï¼Œä½¿aè½¬åŒ–ä¸ºb  </p><p>â‘¡j==0æ—¶ï¼Œå³bä¸ºç©ºï¼Œé‚£ä¹ˆå¯¹åº”çš„f[i][0]çš„å€¼å°±ä¸ºiï¼šå‡å°‘iä¸ªå­—ç¬¦ï¼Œä½¿aè½¬åŒ–ä¸ºb  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">è½¬ç§»æœ‰ä¸‰ç§:</span><br><span class="line"></span><br><span class="line">â‘ f[i - 1][j] -&gt; f[i][j],æ’å…¥å³å¯,f[i][j] = f[i - 1][j] + 1;</span><br><span class="line"></span><br><span class="line">â‘¡f[i][j - 1] -&gt;f [i][j],åˆ é™¤å³å¯f[i][j] = f[i][j - 1] + 1;</span><br><span class="line"></span><br><span class="line">â‘¢f[i - 1][j - 1] -&gt; f[i][j],è¦æŠŠa[i - 1]æ¢æˆb[j - 1],å¦‚æœç›¸åŒå°±ä¸ç”¨æ¢äº†</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆï¼Œ</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(a[i<span class="number">-1</span>] == b[j<span class="number">-1</span>])</span><br><span class="line">f[i][j] = f[i - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">f[i][j] = <span class="built_in">min</span>(f[i - <span class="number">1</span>][j] + <span class="number">1</span>,f[i][j - <span class="number">1</span>] + <span class="number">1</span>,f[i - <span class="number">1</span>][j - <span class="number">1</span>] + <span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>ä»£ç :</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line">string s1, s2;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxLen = <span class="number">3000</span>;</span><br><span class="line"><span class="keyword">int</span> arr[maxLen][maxLen];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dp</span><span class="params">(<span class="keyword">int</span> lenA, <span class="keyword">int</span> lenB)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= lenA; i++) <span class="comment">//aä¸ä¸ºç©ºï¼Œé•¿åº¦ä¸ºiï¼Œbä¸ºç©ºï¼Œåˆ™aéœ€è¦åˆ å»iä¸ªå­—æ¯</span></span><br><span class="line">        arr[i][<span class="number">0</span>] = i;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= lenB; i++) <span class="comment">//åŒç†</span></span><br><span class="line">        arr[<span class="number">0</span>][i] = i;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= lenA; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= lenB; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(s1[i - <span class="number">1</span>] == s2[j - <span class="number">1</span>])</span><br><span class="line">                arr[i][j] = arr[i - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                arr[i][j] = <span class="built_in">min</span>(arr[i - <span class="number">1</span>][j] + <span class="number">1</span>, <span class="built_in">min</span>(arr[i][j - <span class="number">1</span>] + <span class="number">1</span>, arr[i - <span class="number">1</span>][j - <span class="number">1</span>] + <span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin &gt;&gt; s1 &gt;&gt; s2;</span><br><span class="line">    <span class="built_in">dp</span>(s1.<span class="built_in">size</span>(), s2.<span class="built_in">size</span>());</span><br><span class="line">    cout &lt;&lt; arr[s1.<span class="built_in">size</span>()][s2.<span class="built_in">size</span>()];</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="P2404-è‡ªç„¶æ•°çš„æ‹†åˆ†é—®é¢˜ï¼ˆå›æº¯ï¼‰"><a href="#P2404-è‡ªç„¶æ•°çš„æ‹†åˆ†é—®é¢˜ï¼ˆå›æº¯ï¼‰" class="headerlink" title="P2404 è‡ªç„¶æ•°çš„æ‹†åˆ†é—®é¢˜ï¼ˆå›æº¯ï¼‰"></a>P2404 è‡ªç„¶æ•°çš„æ‹†åˆ†é—®é¢˜ï¼ˆå›æº¯ï¼‰</h1><p><a href="https://www.luogu.org/problemnew/show/P2404">p2404</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> arr[<span class="number">1000</span>] = &#123;<span class="number">1</span>&#125;; <span class="comment">//ä»æ‹†1å¼€å§‹</span></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; num; i++)</span><br><span class="line">        cout &lt;&lt; arr[i] &lt;&lt; <span class="string">&quot;+&quot;</span>;</span><br><span class="line">    cout &lt;&lt; arr[num] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = arr[num - <span class="number">1</span>]; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(i == n) <span class="keyword">continue</span>; <span class="comment">//é˜²æ­¢nè¿›å…¥åˆ°æ•°ç»„arrï¼Œé¿å…æœ€åè¾“å‡ºn</span></span><br><span class="line">        arr[num] = i; <span class="comment">//ç»“æœæ”¾åˆ°arré‡Œé¢</span></span><br><span class="line">        m -= i; <span class="comment">//å·²ç»æ‹†åˆ†å‡ºäº†ä¸€ä¸ªiï¼Œå¯¹åº”çš„mè¦å‡i</span></span><br><span class="line">        <span class="keyword">if</span>(m == <span class="number">0</span>)  <span class="comment">//è¯´æ˜må·²ç»æ‹†åˆ†å®Œæˆäº†ï¼Œç›´æ¥è¾“å‡º</span></span><br><span class="line">            <span class="built_in">print</span>(num);</span><br><span class="line">        <span class="keyword">else</span>    <span class="comment">//è¿˜æ²¡æœ‰æ‹†åˆ†å®Œæˆï¼Œç»§ç»­æ‹†åˆ†</span></span><br><span class="line">            <span class="built_in">dfs</span>(num + <span class="number">1</span>);</span><br><span class="line">        m += i; <span class="comment">//å›æº¯ï¼Œå³è¿›å…¥åˆ°ä¸‹ä¸ªé˜¶æ®µçš„æ‹†åˆ†</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    m = n;</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>èƒŒåŒ…é—®é¢˜</title>
      <link href="/2018/05/09/%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/"/>
      <url>/2018/05/09/%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>éƒ¨åˆ†èƒŒåŒ…ï¼Œ01èƒŒåŒ…ï¼Œå®Œå…¨èƒŒåŒ…ï¼Œå¤šé‡èƒŒåŒ…</p><span id="more"></span><ul><li><p>éƒ¨åˆ†èƒŒåŒ…é—®é¢˜å’Œ01èƒŒåŒ…é—®é¢˜çš„åŒºåˆ«å°±æ˜¯ï¼šéƒ¨åˆ†èƒŒåŒ…é—®é¢˜ä¸­çš„å•ä¸ªç‰©å“ï¼Œå¯ä»¥å–ä¸€éƒ¨åˆ†è£…å…¥èƒŒåŒ…ã€‚è€Œ0/1èƒŒåŒ…é—®é¢˜åˆ™æ˜¯è¦ä¹ˆå…¨éƒ¨æ‹¿èµ°ï¼Œè¦ä¹ˆä¸€æ— æ‰€æœ‰</p></li><li><p>å®Œå…¨èƒŒåŒ…ä¸0-1èƒŒåŒ…é—®é¢˜çš„åŒºåˆ«æ˜¯ï¼šåœ¨0-1èƒŒåŒ…é—®é¢˜ä¸­ï¼Œæ¯ä¸ªç‰©å“ä»…æœ‰ä¸€ä»¶ï¼›åœ¨å®Œå…¨èƒŒåŒ…é—®é¢˜ä¸­ï¼Œæ¯ä¸ªç‰©å“æœ‰æ— é™ä»¶</p></li><li>å¤šé‡èƒŒåŒ…ä¸å®Œå…¨èƒŒåŒ…é—®é¢˜çš„åŒºåˆ«æ˜¯ï¼šåœ¨å®Œå…¨èƒŒåŒ…é—®é¢˜ä¸­ï¼Œæ¯ä¸ªç‰©å“æœ‰æ— é™ä»¶ï¼›åœ¨å¤šé‡èƒŒåŒ…é—®é¢˜ä¸­ï¼Œæ¯ä¸ªç‰©å“æœ‰Miä»¶</li><li>æ··åˆèƒŒåŒ…é—®é¢˜ç›¸å½“äºä¸Šé¢æåˆ°æ‰€æœ‰èƒŒåŒ…é—®é¢˜çš„æ··åˆï¼šæœ‰çš„ç‰©å“ä»…æœ‰1ä»¶ï¼Œæœ‰çš„ç‰©å“æœ‰æ— é™ä»¶ï¼Œæœ‰çš„ç‰©å“æœ‰Miä»¶ï¼ˆæœ‰é™ä»¶ï¼‰</li></ul><h1 id="éƒ¨åˆ†èƒŒåŒ…"><a href="#éƒ¨åˆ†èƒŒåŒ…" class="headerlink" title="éƒ¨åˆ†èƒŒåŒ…"></a>éƒ¨åˆ†èƒŒåŒ…</h1><p>ã€éƒ¨åˆ†èƒŒåŒ…ã€‘é—®é¢˜æè¿°ï¼šnä»¶ç‰©å“ï¼Œç¬¬iä»¶ç‰©å“ä»·å€¼ vi å…ƒï¼Œé‡wi ç£…ã€‚å¸Œæœ›ç”¨ Wç£…çš„èƒŒåŒ… æ‹¿èµ°æœ€é‡çš„ç‰©å“ã€‚ç¬¬iä»¶ç‰©å“å¯ä»¥éƒ½æ‹¿èµ°ï¼Œä¹Ÿå¯ä»¥æ‹¿èµ°ä¸€éƒ¨åˆ†ã€‚ï¼ˆç‰©å“å¯ä»¥åˆ†å‰²æ‰€ä»¥ç§°ä¸ºéƒ¨åˆ†èƒŒåŒ…ï¼‰</p><p>å› ä¸ºæ¯ä¸€ä¸ªç‰©å“éƒ½å¯ä»¥åˆ†å‰²æˆå•ä½å—ï¼Œå•ä½å—çš„åˆ©ç›Šè¶Šå¤§æ˜¾ç„¶æ€»æ”¶ç›Šè¶Šå¤§ï¼Œæ‰€ä»¥å®ƒå±€éƒ¨æœ€ä¼˜æ»¡è¶³å…¨å±€æœ€ä¼˜ï¼Œå¯ä»¥ç”¨è´ªå¿ƒæ³•è§£ç­”ã€‚<br>ï¼ˆ1ï¼‰å…ˆå°†å•ä½å—æ”¶ç›ŠæŒ‰ä»å¤§åˆ°å°è¿›è¡Œæ’åºï¼›<br>ï¼ˆ2ï¼‰åˆå§‹åŒ–èƒŒåŒ…çš„å‰©ä½™ä½“ç§¯å’Œå½“å‰ä»·å€¼ï¼›<br>ï¼ˆ3ï¼‰ä»å‰åˆ°åè€ƒè™‘æ‰€æœ‰ç‰©å“ï¼ša.å¦‚æœå¯ä»¥å®Œå…¨æ”¾å…¥ï¼Œå½“å‰ä»·å€¼åŠ ä¸Šç‰©å“æ€»ä»·å€¼ï¼Œå‰©ä½™ä½“ç§¯å‡å»ç‰©å“æ€»ä½“ç§¯ï¼›b.å¦‚æœå¯ä»¥éƒ¨åˆ†æ”¾è¿›ï¼Œå½“å‰ä»·å€¼åŠ ä¸Šç‰©å“ä»·å€¼*å‰©ä½™ä½“ç§¯ï¼Œä½¿å‰©ä½™ä½“ç§¯ä¸º0.</p><h2 id="æ¨¡æ¿é¢˜L2-003-æœˆé¥¼"><a href="#æ¨¡æ¿é¢˜L2-003-æœˆé¥¼" class="headerlink" title="æ¨¡æ¿é¢˜L2-003 æœˆé¥¼"></a>æ¨¡æ¿é¢˜<a href="https://pintia.cn/problem-sets/994805046380707840/problems/994805071789801472">L2-003 æœˆé¥¼</a></h2><p><img src="/2018/05/09/%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/bufen.png" alt></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e4</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">double</span> w, v;</span><br><span class="line">&#125;stru[MAXN];</span><br><span class="line"><span class="keyword">int</span> dp[MAXN] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">double</span> arr[MAXN] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node x, node y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x.v/x.w &gt; y.v/y.w;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, d;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; d;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        cin &gt;&gt; stru[i].w;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        cin &gt;&gt; stru[i].v;</span><br><span class="line">    <span class="built_in">sort</span>(stru, stru + n, cmp);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(stru[i].w &gt; d)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        d -= stru[i].w;</span><br><span class="line">        arr[i] = <span class="number">1.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(i &lt; n)</span><br><span class="line">        arr[i] = d / stru[i].w;</span><br><span class="line">    <span class="keyword">double</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(j = i; j &gt;= <span class="number">0</span>; j--)</span><br><span class="line">        ans += stru[j].v*arr[j];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%0.2lf&quot;</span>, ans);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="01èƒŒåŒ…"><a href="#01èƒŒåŒ…" class="headerlink" title="01èƒŒåŒ…"></a>01èƒŒåŒ…</h1><h2 id="å…¥é—¨"><a href="#å…¥é—¨" class="headerlink" title="å…¥é—¨"></a>å…¥é—¨</h2><p><a href="www.cnblogs.com/fancy-itlife/p/4393213.html">åŠ¨æ€è§„åˆ’ä¸“é¢˜ 01èƒŒåŒ…é—®é¢˜è¯¦è§£ã€è½¬ã€‘ - fancy_boy - åšå®¢å›­</a></p><p><a href="https://blog.csdn.net/fx677588/article/details/68951593">äºŒç»´èƒŒåŒ…</a></p><p><a href="https://blog.csdn.net/qq_33279781/article/details/52073519">ä¸€ç»´èƒŒåŒ…</a></p><h2 id="åˆå§‹åŒ–ç»†èŠ‚"><a href="#åˆå§‹åŒ–ç»†èŠ‚" class="headerlink" title="åˆå§‹åŒ–ç»†èŠ‚"></a>åˆå§‹åŒ–ç»†èŠ‚</h2><p>æˆ‘ä»¬çœ‹åˆ°çš„æ±‚æœ€ä¼˜è§£çš„èƒŒåŒ…é—®é¢˜é¢˜ç›®ä¸­ï¼Œäº‹å®ä¸Šæœ‰ä¸¤ç§ä¸å¤ªç›¸åŒçš„é—®æ³•ã€‚æœ‰çš„é¢˜ç›®è¦æ±‚â€œæ°å¥½è£…æ»¡èƒŒåŒ…â€æ—¶çš„æœ€ä¼˜è§£ï¼Œæœ‰çš„é¢˜ç›®åˆ™å¹¶æ²¡æœ‰è¦æ±‚å¿…é¡»æŠŠèƒŒåŒ…è£…æ»¡ã€‚ä¸€ç§åŒºåˆ«è¿™ä¸¤ç§é—®æ³•çš„å®ç°æ–¹æ³•æ˜¯åœ¨åˆå§‹åŒ–çš„æ—¶å€™æœ‰æ‰€ä¸åŒã€‚</p><p>å¦‚æœæ˜¯ç¬¬ä¸€ç§é—®æ³•ï¼Œè¦æ±‚æ°å¥½è£…æ»¡èƒŒåŒ…ï¼Œé‚£ä¹ˆåœ¨åˆå§‹åŒ–æ—¶é™¤äº†f[0]ä¸º0å…¶å®ƒf[1..V]å‡è®¾ä¸º-âˆï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯æœ€ç»ˆå¾—åˆ°çš„f[N]æ˜¯ä¸€ç§æ°å¥½è£…æ»¡èƒŒåŒ…çš„æœ€ä¼˜è§£ã€‚</p><p>å¦‚æœå¹¶æ²¡æœ‰è¦æ±‚å¿…é¡»æŠŠèƒŒåŒ…è£…æ»¡ï¼Œè€Œæ˜¯åªå¸Œæœ›ä»·æ ¼å°½é‡å¤§ï¼Œåˆå§‹åŒ–æ—¶åº”è¯¥å°†f[0..V]å…¨éƒ¨è®¾ä¸º0</p><p>ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå¯ä»¥è¿™æ ·ç†è§£ï¼šåˆå§‹åŒ–çš„fæ•°ç»„äº‹å®ä¸Šå°±æ˜¯åœ¨æ²¡æœ‰ä»»ä½•ç‰©å“å¯ä»¥æ”¾å…¥èƒŒåŒ…æ—¶çš„åˆæ³•çŠ¶æ€ã€‚å¦‚æœè¦æ±‚èƒŒåŒ…æ°å¥½è£…æ»¡ï¼Œé‚£ä¹ˆæ­¤æ—¶åªæœ‰å®¹é‡ä¸º0çš„èƒŒåŒ…å¯èƒ½è¢«ä»·å€¼ä¸º0çš„nothingâ€œæ°å¥½è£…æ»¡â€ï¼Œå…¶å®ƒå®¹é‡çš„èƒŒåŒ…å‡æ²¡æœ‰åˆæ³•çš„è§£ï¼Œå±äºæœªå®šä¹‰çš„çŠ¶æ€ï¼Œå®ƒä»¬çš„å€¼å°±éƒ½åº”è¯¥æ˜¯-âˆäº†ã€‚å¦‚æœèƒŒåŒ…å¹¶éå¿…é¡»è¢«è£…æ»¡ï¼Œé‚£ä¹ˆä»»ä½•å®¹é‡çš„èƒŒåŒ…éƒ½æœ‰ä¸€ä¸ªåˆæ³•è§£â€œä»€ä¹ˆéƒ½ä¸è£…â€ï¼Œè¿™ä¸ªè§£çš„ä»·å€¼ä¸º0ï¼Œæ‰€ä»¥åˆå§‹æ—¶çŠ¶æ€çš„å€¼ä¹Ÿå°±å…¨éƒ¨ä¸º0äº†ã€‚<br>è¿™ä¸ªå°æŠ€å·§å®Œå…¨å¯ä»¥æ¨å¹¿åˆ°å…¶å®ƒç±»å‹çš„èƒŒåŒ…é—®é¢˜ï¼Œåé¢ä¹Ÿå°±ä¸å†å¯¹è¿›è¡ŒçŠ¶æ€è½¬ç§»ä¹‹å‰çš„åˆå§‹åŒ–è¿›è¡Œè®²è§£ã€‚</p><h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><h3 id="æ¨¡æ¿é¢˜-HDU2602-Bone-Collector"><a href="#æ¨¡æ¿é¢˜-HDU2602-Bone-Collector" class="headerlink" title="æ¨¡æ¿é¢˜-HDU2602-Bone Collector"></a>æ¨¡æ¿é¢˜-HDU2602-Bone Collector</h3><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2602">HDU2602</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> len = <span class="number">10000</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> n, m;</span><br><span class="line">        cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">        <span class="keyword">int</span> dp[len] = &#123;<span class="number">0</span>&#125;, val[len] = &#123;<span class="number">0</span>&#125;, w[len] = &#123;<span class="number">0</span>&#125;; <span class="comment">//valä»·å€¼ wä½“ç§¯</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            cin &gt;&gt; val[i];</span><br><span class="line">         <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            cin &gt;&gt; w[i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = m; j &gt;=w[i]; j--)</span><br><span class="line">        &#123;</span><br><span class="line">            dp[j] = <span class="built_in">max</span>(dp[j], dp[j - w[i]] + val[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; dp[m] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="01å˜å½¢-HDU2546-é¥­å¡"><a href="#01å˜å½¢-HDU2546-é¥­å¡" class="headerlink" title="01å˜å½¢-HDU2546-é¥­å¡"></a>01å˜å½¢-HDU2546-é¥­å¡</h3><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2546">hdu2546</a></p><p>æ¯”è¾ƒè¯¦ç»†çš„è§£æ:<a href="https://www.cnblogs.com/fancy-itlife/p/4394398.html">åŠ¨æ€è§„åˆ’ä¸“é¢˜ 01èƒŒåŒ…é—®é¢˜è¯¦è§£ HDU 2546 é¥­å¡ - fancy_boy - åšå®¢å›­</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> len = <span class="number">1005</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; n&amp;&amp; n != <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> w[len] = &#123;<span class="number">0</span>&#125;;<span class="comment">//w:èœçš„ä»·æ ¼</span></span><br><span class="line">        <span class="keyword">int</span> dp[len] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            cin &gt;&gt; w[i];</span><br><span class="line">        <span class="keyword">int</span> m;</span><br><span class="line">        cin &gt;&gt; m;</span><br><span class="line">        <span class="keyword">if</span>(m &lt;= <span class="number">4</span>)<span class="comment">//ä½™é¢å°äº4ï¼Œä»€ä¹ˆéƒ½ä¸èƒ½è´­ä¹°ï¼Œç›´æ¥è¾“å‡º</span></span><br><span class="line">            cout &lt;&lt; m &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">sort</span>(w + <span class="number">1</span>, w + n + <span class="number">1</span>); <span class="comment">//æ’åºåå°†æœ€å¤§çš„ç•™åˆ°æœ€åå‡ï¼Œå°†m-1ä¸ªè¿›è¡Œ01èƒŒåŒ…æ±‚è§£</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n - <span class="number">1</span>; i++)</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j = m - <span class="number">5</span>; j &gt;= <span class="number">0</span>; j--)</span><br><span class="line">                &#123;       </span><br><span class="line">                    <span class="keyword">if</span>(j &gt;= w[i]) </span><br><span class="line">                    &#123;</span><br><span class="line">                        dp[j]= <span class="built_in">max</span>(dp[j], dp[j - w[i]] + w[i]);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">int</span> s = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m<span class="number">-5</span>; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(s&lt;dp[j])</span><br><span class="line">                    s=dp[j];</span><br><span class="line">            &#125;  <span class="comment">//æŒ‘å‡ºèŠ±é”€æœ€å¤§çš„                </span></span><br><span class="line">            cout &lt;&lt; m - s - w[n] &lt;&lt; endl; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="01å˜å½¢-nyoj860-ç”¨ä»·å€¼ä¿å­˜è´¨é‡"><a href="#01å˜å½¢-nyoj860-ç”¨ä»·å€¼ä¿å­˜è´¨é‡" class="headerlink" title="01å˜å½¢-nyoj860-ç”¨ä»·å€¼ä¿å­˜è´¨é‡"></a>01å˜å½¢-nyoj860-ç”¨ä»·å€¼ä¿å­˜è´¨é‡</h3><p><a href="https://blog.csdn.net/sinat_26019265/article/details/51057698">nyoj860 åˆè§01èƒŒåŒ…</a></p><h3 id="hdu2639ï¼ˆ01èƒŒåŒ…æ±‚ç¬¬kä¼˜è§£ï¼‰"><a href="#hdu2639ï¼ˆ01èƒŒåŒ…æ±‚ç¬¬kä¼˜è§£ï¼‰" class="headerlink" title="hdu2639ï¼ˆ01èƒŒåŒ…æ±‚ç¬¬kä¼˜è§£ï¼‰"></a>hdu2639ï¼ˆ01èƒŒåŒ…æ±‚ç¬¬kä¼˜è§£ï¼‰</h3><p>é¢˜ç›®ï¼š<a href="http://acm.hdu.edu.cn/showproblem.php?pid=2639">HDU2639-Bone Collector II</a></p><p>é¢˜è§£ï¼š<a href="https://blog.csdn.net/martinue/article/details/51427171">csdn</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> len = <span class="number">1000</span>;</span><br><span class="line"><span class="keyword">int</span> val[len], cost[len], dp[len][len];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> n, v, k;    <span class="comment">//nä¸ªç‰©å“ï¼Œä½“ç§¯ä¸ºvï¼Œæ±‚è§£ç¬¬kä¸ªæœ€ä¼˜å€¼</span></span><br><span class="line">        cin &gt;&gt; n &gt;&gt; v &gt;&gt; k;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            cin &gt;&gt; val[i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            cin &gt;&gt; cost[i];</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(dp));</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = v; j &gt;= cost[i]; j--)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">int</span> A[len], B[len];</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> kk = <span class="number">1</span>; kk &lt;= k; kk++)</span><br><span class="line">                &#123;</span><br><span class="line">                    A[kk] = dp[j - cost[i]][kk] + val[i];</span><br><span class="line">                    B[kk] = dp[j][kk];</span><br><span class="line">                    <span class="comment">//é€‰æ‹©ä¸ä¸é€‰æ‹©</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">int</span> a = <span class="number">1</span>, b = <span class="number">1</span>, c = <span class="number">1</span>;</span><br><span class="line">                A[k + <span class="number">1</span>] = <span class="number">-1</span>, B[k + <span class="number">1</span>] = <span class="number">-1</span>; <span class="comment">//ç»“æŸå¾ªç¯çš„ä¸€ä¸ªæ ‡å¿—</span></span><br><span class="line">                <span class="keyword">while</span>(c &lt;= k &amp;&amp; (A[a] != <span class="number">-1</span> || B[b] != <span class="number">-1</span>)) <span class="comment">//æ’åºè¿‡ç¨‹ï¼Œå½“æœ‰ä¸€ä¸ªåˆ°è¾¾åœ°K+1é¡¹åœæ­¢</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span>(A[a] &gt; B[b])</span><br><span class="line">                        dp[j][c] = A[a++];</span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                        dp[j][c] = B[b++];</span><br><span class="line">                    <span class="keyword">if</span>(dp[j][c] != dp[j][c - <span class="number">1</span>])</span><br><span class="line">                        c++;    <span class="comment">//è¿™é‡Œæ˜¯ä¸ºäº†é˜²æ­¢ç›¸åŒçš„æ•°ä¹Ÿå ç”¨ï¼Œæœ‰å¯èƒ½æœ‰å‡ ä¸ªç›¸åŒçš„ç»“æœä½†å®ƒä»¬åªèƒ½æœ‰ä¸€ä¸ªåæ¬¡è€Œå·²</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        cout &lt;&lt; dp[v][k] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="é™åˆ¶æ¡ä»¶çš„01èƒŒåŒ…"><a href="#é™åˆ¶æ¡ä»¶çš„01èƒŒåŒ…" class="headerlink" title="é™åˆ¶æ¡ä»¶çš„01èƒŒåŒ…"></a>é™åˆ¶æ¡ä»¶çš„01èƒŒåŒ…</h3><p><a href="https://blog.csdn.net/u011663071/article/details/44307273">hdu5188</a></p><h3 id="01å˜å½¢-æ´›è°·P1802"><a href="#01å˜å½¢-æ´›è°·P1802" class="headerlink" title="01å˜å½¢-æ´›è°·P1802"></a>01å˜å½¢-æ´›è°·P1802</h3><p>å‚è€ƒé¢˜è§£: <a href="https://www.luogu.org/space/show?uid=19842">åŠä»™èƒ¡å°æ¡ƒ</a> </p><p>ä¸€ä¸ªå˜å½¢ç‰ˆçš„01èƒŒåŒ…ã€‚  </p><p>dp[i]è¡¨ç¤ºç”¨iç“¶è¯è·å¾—çš„æœ€å¤šç»éªŒã€‚  </p><p>å†³ç­–ï¼Ÿ</p><p>å½“i&gt;=useæ—¶ï¼Œå¯ä»¥é€‰æ‹©æ‰“è´¥æˆ–è€…ä¸æ‰“è´¥</p><p>dp[i]=max(dp[i]+lose,dp[i-use]+win)ã€‚</p><p>å½“i&lt;useæ—¶ï¼Œæ— æ³•æˆ˜èƒœå¯¹æ–¹ã€‚</p><p>dp[i]+=lose</p><p>è‡³äºæ•°æ®èŒƒå›´ï¼Œæœ€åè¾“å‡ºæ—¶å¼ºåˆ¶è½¬æ¢ä¸€ä¸‹å°±è¡Œäº†ã€‚(è¿™é‡Œéœ€è¦long long)</p><p>é¢˜ç›®ï¼š<a href="https://www.luogu.org/problemnew/show/P1802">P1802</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> len = <span class="number">100000</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line">ll dp[len];</span><br><span class="line">ll win[len],lose[len],use[len];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n,m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">     cin &gt;&gt; lose[i] &gt;&gt; win[i] &gt;&gt; use[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">     &#123;</span><br><span class="line">         <span class="keyword">for</span>(<span class="keyword">int</span> j = m; j &gt;= use[i]; j--)</span><br><span class="line">            dp[j] = <span class="built_in">max</span>(dp[j] + lose[i], dp[j - use[i]] + win[i]);</span><br><span class="line">         <span class="keyword">for</span>(<span class="keyword">int</span> j = use[i] - <span class="number">1</span>;j &gt;= <span class="number">0</span>; j--)</span><br><span class="line">            dp[j] += lose[i];</span><br><span class="line">     &#125;</span><br><span class="line">     cout &lt;&lt; <span class="number">5</span> * dp[m];</span><br><span class="line">     <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="P1757-é€šå¤©ä¹‹åˆ†ç»„èƒŒåŒ…"><a href="#P1757-é€šå¤©ä¹‹åˆ†ç»„èƒŒåŒ…" class="headerlink" title="P1757 é€šå¤©ä¹‹åˆ†ç»„èƒŒåŒ…"></a>P1757 é€šå¤©ä¹‹åˆ†ç»„èƒŒåŒ…</h3><p>é¢˜ç›®ï¼š<a href="https://www.luogu.org/problemnew/show/P1757">p1757</a></p><p>è¿™ä¸€é¢˜æ˜¯åˆ†ç»„èƒŒåŒ…é—®é¢˜ã€‚æ€è·¯æ˜¯æŠŠæ¯ä¸€ç»„çœ‹åšä¸€ä¸ªç‰©å“ï¼Œè½¬åŒ–ä¸º01èƒŒåŒ…åšã€‚  </p><p>å¯¹äºåˆ†ç»„èƒŒåŒ…ï¼Œå¯ä»¥è¿™æ ·æƒ³ï¼šè™½ç„¶åˆ†æˆå¾ˆå¤šç»„ï¼Œä½†åªèƒ½é€‰ä¸€ä¸ªï¼Œæˆ–è€…ä¸é€‰ï¼Œè¿™å’Œ01èƒŒåŒ…æ˜¯ä¸€æ ·çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äº01èƒŒåŒ…é‡Œæ¯ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ç‰©å“ï¼Œå¯¹åº”çš„åˆ†ç»„èƒŒåŒ…å°±æ˜¯æ¯ä¸€ç»„ä¸­é€‰æ‹©ä¸€ä¸ªç‰©å“ï¼Œè¿™æ ·æ¥çœ‹ï¼Œå®Œå…¨å°±æ˜¯01èƒŒåŒ…é—®é¢˜ã€‚  </p><p>å¯ä»¥æƒ³ä¸€ä¸‹01èƒŒåŒ…çš„çŠ¶æ€æ–¹ç¨‹ï¼Œå’Œè¿™ä¸ªå¤–ä¸¤å±‚çš„å¾ªç¯æ˜¯ä¸€æ ·çš„ï¼Œä¸ä¸€æ ·çš„æ˜¯é‡Œé¢åˆåŠ äº†ä¸€å±‚ï¼Œè¿™å±‚å¾ªç¯æ˜¯éå†æ¯ä¸€ç»„çš„ç‰©å“ç”¨çš„ï¼Œå¯¹äºdp[]ä¸­æ¯ä¸€ä¸ªçŠ¶æ€éƒ½æ˜¯å¾ªç¯äº†ä¸€éæ¯ä¸€ç»„çš„ç‰©å“æ‰æ¢åˆ°ä¸‹ä¸€ä¸ªçš„ï¼Œæ‰€ä»¥å¯¹åé¢çš„æ²¡æœ‰å½±å“ï¼Œä¹Ÿå°±ä¿è¯äº†æ¯ç»„ç‰©å“æœ€å¤šåªæœ‰ä¸€ä»¶ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> w[<span class="number">1100</span>] = &#123;<span class="number">0</span>&#125;;    <span class="comment">//é‡é‡</span></span><br><span class="line"><span class="keyword">int</span> v[<span class="number">1100</span>] = &#123;<span class="number">0</span>&#125;;    <span class="comment">//ä»·å€¼</span></span><br><span class="line"><span class="keyword">int</span> num[<span class="number">1100</span>][<span class="number">1100</span>] = &#123;<span class="number">0</span>&#125;;<span class="comment">//ç”¨æ¥è®°å½•ç¼–å·çš„æ•°ç»„ï¼ŒæŒ‰ç…§è¾“å…¥çš„é¡ºå¯»è°ƒç”¨æ‰€å¯¹åº”çš„wã€v</span></span><br><span class="line"><span class="keyword">int</span> dp[<span class="number">1100</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m ,n, g;</span><br><span class="line">    cin &gt;&gt; m &gt;&gt; n;</span><br><span class="line">    <span class="keyword">int</span> Maxg = <span class="number">0</span>; <span class="comment">//æœ€å¤§ç»„æ•°</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; w[i] &gt;&gt; v[i] &gt;&gt; g;</span><br><span class="line">        Maxg = <span class="built_in">max</span>(Maxg, g);</span><br><span class="line">        num[g][++num[g][<span class="number">0</span>]] = i; <span class="comment">//pç»„æ¯æœ‰ä¸ªç‰©å“ç¬¬äºŒç»´æ•°é‡å°±åŠ ä¸€å¹¶ä¸”è®°ä¸‹æ˜¯ç¬¬å‡ ä¸ª</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= Maxg; i++) <span class="comment">//ç»„æ•°</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = m; j &gt;= <span class="number">0</span>; j--) <span class="comment">//å®¹é‡</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= num[i][<span class="number">0</span>]; k++) <span class="comment">//å„ç»„ä¸­ç‰©å“çš„åºå·</span></span><br><span class="line">                <span class="keyword">if</span>(j &gt;= w[num[i][k]])</span><br><span class="line">                    dp[j] = <span class="built_in">max</span>(dp[j], dp[j - w[num[i][k]]] + v[num[i][k]]);</span><br><span class="line">    cout &lt;&lt; dp[m];</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="HDU2955"><a href="#HDU2955" class="headerlink" title="HDU2955"></a>HDU2955</h3><h3 id="HDU3466"><a href="#HDU3466" class="headerlink" title="HDU3466"></a>HDU3466</h3><h3 id="HDU1881"><a href="#HDU1881" class="headerlink" title="HDU1881"></a>HDU1881</h3><h1 id="å®Œå…¨èƒŒåŒ…"><a href="#å®Œå…¨èƒŒåŒ…" class="headerlink" title="å®Œå…¨èƒŒåŒ…"></a>å®Œå…¨èƒŒåŒ…</h1><p><a href="http://www.cnblogs.com/Kalix/p/7622102.html">åŠ¨æ€è§„åˆ’ä¹‹å®Œå…¨èƒŒåŒ…è¯¦è§£</a></p><h2 id="hdu-1114-Piggy-Bankï¼ˆå®Œå…¨èƒŒåŒ…ï¼‰"><a href="#hdu-1114-Piggy-Bankï¼ˆå®Œå…¨èƒŒåŒ…ï¼‰" class="headerlink" title="hdu 1114 Piggy-Bankï¼ˆå®Œå…¨èƒŒåŒ…ï¼‰"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1114">hdu 1114 Piggy-Bankï¼ˆå®Œå…¨èƒŒåŒ…ï¼‰</a></h2><p>å¤§æ„ï¼šç»™å‡ºå­˜é’±ç½æœ¬èº«çš„é‡é‡å’Œè£…é’±åçš„é‡é‡ï¼Œä»¥åŠå­˜é’±ç½ä¸­é’±çš„é¢å€¼å’Œé‡é‡ï¼Œæ±‚å­˜é’±ç½è£…æ»¡æ—¶ï¼Œé’±çš„æ€»å’Œæœ€å°æ˜¯å¤šå°‘</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Judge Status : Accepted Language : C++</span></span><br><span class="line"><span class="comment"> Submit Timeï¼š2018-08-15 12:32:04</span></span><br><span class="line"><span class="comment"> Exe.Time:46MS Exe.Memoryï¼š1828k</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">1E9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1E5</span> + <span class="number">100</span>;</span><br><span class="line"><span class="keyword">int</span> dp[MAXN];</span><br><span class="line"><span class="keyword">int</span> weight[MAXN], value[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; MAXN; i++)</span><br><span class="line">        dp[i] = INF;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> empty, full;</span><br><span class="line">        cin &gt;&gt; empty &gt;&gt; full;</span><br><span class="line">        <span class="keyword">int</span> V = full -empty;</span><br><span class="line">        <span class="keyword">int</span> n;</span><br><span class="line">        cin &gt;&gt; n;</span><br><span class="line">        <span class="built_in">init</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            cin &gt;&gt; value[i] &gt;&gt; weight[i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = weight[i]; j &lt;= V; j++)</span><br><span class="line">                dp[j] = <span class="built_in">min</span>(dp[j - weight[i]] + value[i], dp[j]);</span><br><span class="line">        <span class="keyword">if</span>(dp[V] == INF)</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;This is impossible.&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;The minimum amount of money in the piggy-bank is &quot;</span></span><br><span class="line">                &lt;&lt; dp[V] &lt;&lt; <span class="string">&quot;.&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å¤šé‡èƒŒåŒ…"><a href="#å¤šé‡èƒŒåŒ…" class="headerlink" title="å¤šé‡èƒŒåŒ…"></a>å¤šé‡èƒŒåŒ…</h1><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2191">HDU2191-æ‚¼å¿µ512æ±¶å·å¤§åœ°éœ‡é‡éš¾åŒèƒâ€”â€”çæƒœç°åœ¨ï¼Œæ„Ÿæ©ç”Ÿæ´»</a></p><p>æ­¤é¢˜å½“ä¸­æ˜¯æŠŠé‡é‡å½“æˆæ¯ä»¶ç‰©å“çš„ä»·å€¼ã€‚æŠŠæ€»çš„é’±æ•°å½“æˆèƒŒåŒ…çš„å®¹é‡ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Judge Status : Accepted Language : C++</span></span><br><span class="line"><span class="comment"> Submit Timeï¼š2018-08-25 11:04:19</span></span><br><span class="line"><span class="comment"> Exe.Time:0MS Exe.Memoryï¼š1428KB</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e2</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> cntValue, cntKind, value[MAXN], weight[MAXN], bag[MAXN], dp[MAXN]; <span class="comment">//bag--æ¯ä¸ªç‰©å“çš„æ•°é‡</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(dp));</span><br><span class="line">        cin &gt;&gt; cntValue &gt;&gt; cntKind;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cntKind; i++)</span><br><span class="line">            cin &gt;&gt; value[i] &gt;&gt; weight[i] &gt;&gt; bag[i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cntKind; i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; bag[i]; j++)</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> k = cntValue; k &gt;=value[i]; k--)</span><br><span class="line">                    dp[k] = <span class="built_in">max</span>(dp[k], dp[k - value[i]] + weight[i]);</span><br><span class="line">        cout &lt;&lt; dp[cntValue] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ACMç®—æ³• </tag>
            
            <tag> éƒ¨åˆ†èƒŒåŒ… </tag>
            
            <tag> 01èƒŒåŒ… </tag>
            
            <tag> å®Œå…¨èƒŒåŒ… </tag>
            
            <tag> å¤šé‡èƒŒåŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€’æ¨(for beginner)</title>
      <link href="/2018/04/27/%E9%80%92%E6%8E%A8-for-beginner/"/>
      <url>/2018/04/27/%E9%80%92%E6%8E%A8-for-beginner/</url>
      
        <content type="html"><![CDATA[<p>æ–æ³¢é‚£å¥‘å…”å­é—®é¢˜ã€æ–æ³¢é‚£å¥‘æ•°ï¼ä»çˆ¬æ¥¼æ¢¯é—®é¢˜ã€HDU2046 éª¨ç‰Œé“ºæ–¹æ ¼ã€ï¼¨DU2044 ä¸€åªå°èœœèœ‚ã€HDU2048 ç¥ã€ä¸Šå¸ä»¥åŠè€å¤©çˆ·ã€HDU2049 ä¸å®¹æ˜“ç³»åˆ—ä¹‹(4)â€”â€”è€ƒæ–°éƒã€é€’æ¨ä¸­çš„å¹³é¢é—®é¢˜ã€HDU 2097 Childrenâ€™s Queueã€HDU2045 ä¸å®¹æ˜“ç³»åˆ—ä¹‹(3)â€”â€” LELEçš„RPGéš¾é¢˜ã€HDU2047 é˜¿ç‰›çš„EOFç‰›è‚‰ã€for beginner,HDU2563ç»Ÿè®¡é—®é¢˜</p><span id="more"></span><h1 id="é€’æ¨çš„åŸºæœ¬æ€æƒ³"><a href="#é€’æ¨çš„åŸºæœ¬æ€æƒ³" class="headerlink" title="é€’æ¨çš„åŸºæœ¬æ€æƒ³"></a>é€’æ¨çš„åŸºæœ¬æ€æƒ³</h1><ol><li>é¦–å…ˆç¡®è®¤ï¼Œæ˜¯å¦èƒ½å¾ˆå®¹æ˜“çš„å¾—åˆ°ç®€å•æƒ…å†µçš„è§£</li><li><ul><li>å‡è®¾è§„æ¨¡ä¸ºN-1çš„æƒ…å†µå·²ç»å¾—åˆ°è§£å†³</li><li>é‡ç‚¹åˆ†æï¼šå½“è§„æ¨¡æ‰©å¤§åˆ°Næ—¶ï¼Œå¦‚ä½•æšä¸¾å‡ºæ‰€æœ‰çš„æƒ…å†µï¼Œå¹¶ä¸”è¦ç¡®ä¿å¯¹äºæ¯ä¸€ç§å­æƒ…å†µéƒ½èƒ½ç”¨å·²ç»å¾—åˆ°çš„æ•°æ®è§£å†³</li></ul></li><li><ul><li>ç¼–ç¨‹ä¸­çš„ç©ºé—´æ¢æ—¶é—´çš„æ€æƒ³</li><li>å¹¶ä¸ä¸€å®šæ˜¯ä»N-1åˆ°Nçš„åˆ†æ</li></ul></li></ol><h1 id="é€’æ¨ä¸­çš„ç»å…¸â€”â€”Fibonacci-sequence-æ–æ³¢é‚£å¥‘æ•°åˆ—"><a href="#é€’æ¨ä¸­çš„ç»å…¸â€”â€”Fibonacci-sequence-æ–æ³¢é‚£å¥‘æ•°åˆ—" class="headerlink" title="é€’æ¨ä¸­çš„ç»å…¸â€”â€”Fibonacci sequence(æ–æ³¢é‚£å¥‘æ•°åˆ—)"></a>é€’æ¨ä¸­çš„ç»å…¸â€”â€”Fibonacci sequence(æ–æ³¢é‚£å¥‘æ•°åˆ—)</h1><p>å…ˆä¸Šé€’æ¨ä¸­çš„fibæ•°åˆ—çš„è§£é¢˜æ¨¡æ¿</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;isotream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> num;</span><br><span class="line">    <span class="keyword">while</span>( cin &gt;&gt;num)</span><br><span class="line">    &#123;</span><br><span class="line">        ll arr[<span class="number">100000</span>] = &#123;<span class="number">0</span>&#125;;  </span><br><span class="line">        arr[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        arr[<span class="number">2</span>] = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">int</span> i;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">3</span>; i &lt;= num; i++)</span><br><span class="line">            arr[i] = arr[i - <span class="number">1</span>] + arr[i - <span class="number">2</span>];</span><br><span class="line">        cout &lt;&lt; arr[num]  &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åº”ç”¨ï¼š</p><ol><li><p>æœ€ç»å…¸å½“ç„¶æ˜¯å…”å­ç¹æ®–é—®é¢˜ <a href="https://baike.baidu.com/item/%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E5%85%94%E5%AD%90%E9%97%AE%E9%A2%98/1430035">æ–æ³¢é‚£å¥‘å…”å­é—®é¢˜</a></p></li><li><p>è¿˜æœ‰ä¸€ä¸ªç»å…¸çš„ä¸Šæ¥¼æ¢¯é—®é¢˜<a href="https://blog.csdn.net/bairongdong1/article/details/52270726">æ–æ³¢é‚£å¥‘æ•°ï¼ä»çˆ¬æ¥¼æ¢¯é—®é¢˜</a></p></li><li><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2046">HDU2046 éª¨ç‰Œé“ºæ–¹æ ¼</a></p><p>è§£é¢˜:<a href="https://blog.csdn.net/hellohelloC/article/details/47699831">HDU 2046 éª¨ç‰Œé“ºæ–¹æ ¼(ç®€å•é€’æ¨ï¼‰</a></p><p>è‡ªå·±ä»£ç :</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> num;</span><br><span class="line">    <span class="keyword">while</span>( cin &gt;&gt;num)</span><br><span class="line">    &#123;</span><br><span class="line">        ll arr[<span class="number">100000</span>] = &#123;<span class="number">0</span>&#125;;  </span><br><span class="line">        arr[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        arr[<span class="number">2</span>] = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">int</span> i;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">3</span>; i &lt;= num; i++)</span><br><span class="line">            arr[i] = arr[i - <span class="number">1</span>] + arr[i - <span class="number">2</span>];</span><br><span class="line">        cout &lt;&lt; arr[num]  &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>   ä¸»è¦è¿˜æ˜¯æ¨å‡ºè¿™ä¸ªçŠ¶æ€å¯ä»¥ç”±ä¸Šæ¬¡çš„çŠ¶æ€æ¨å‡ºã€‚</p><ol><li><p>å°å˜å½¢:<a href="http://acm.hdu.edu.cn/showproblem.php?pid=2044">ï¼¨DU2044 ä¸€åªå°èœœèœ‚</a></p><p>è§£é¢˜:<a href="https://blog.csdn.net/xu_fish/article/details/50128855">ä¸€åªå°èœœèœ‚</a></p><p>è‡ªå·±ä»£ç :</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">while</span>(n--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> arr[<span class="number">10000</span>];</span><br><span class="line">        arr[<span class="number">1</span>] = arr[<span class="number">2</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> a , b;</span><br><span class="line">        cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">        <span class="keyword">int</span> temp;</span><br><span class="line">        <span class="keyword">if</span>(a&gt;b)<span class="comment">//ä¿è¯æ€»æ˜¯ä»æ•°å­—è¾ƒå°çš„èœ‚æˆ¿åˆ°æ•°å­—æ•°å­—è¾ƒå¤§çš„èœ‚æˆ¿ï¼Œç›´æ¥ç›¸å‡å¯èƒ½ä¼šå‡ºç°è´Ÿæ•°</span></span><br><span class="line">        &#123;</span><br><span class="line">                temp=a;</span><br><span class="line">                a=b;</span><br><span class="line">                b=temp;</span><br><span class="line">       &#125;</span><br><span class="line">        b = b - a + <span class="number">1</span>;<span class="comment">//åŒ–ä¸ºæ–æ³¢é‚£å¥‘æ•°åˆ—æ¨¡å¼ï¼Œå³ä»3èµ°åˆ°4å¯ä»¥åŒ–ä¸ºæ±‚fibé‡Œé¢çš„f(2)</span></span><br><span class="line">        <span class="keyword">int</span> i;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">3</span> ;i &lt;= b; i++)</span><br><span class="line">            arr[i] = arr[i - <span class="number">1</span>] + arr[i - <span class="number">2</span>];</span><br><span class="line">        cout &lt;&lt; arr[b];</span><br><span class="line">     <span class="comment">//   if(n != 0)</span></span><br><span class="line">            cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h1 id="é”™æ’å…¬å¼"><a href="#é”™æ’å…¬å¼" class="headerlink" title="é”™æ’å…¬å¼"></a>é”™æ’å…¬å¼</h1><ol><li><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2048">HDU2048 ç¥ã€ä¸Šå¸ä»¥åŠè€å¤©çˆ·</a></p><p>è§£é¢˜:<a href="https://blog.csdn.net/a1647566717/article/details/6680001">HDU2048</a></p><p>å…¬å¼:M(n)=(n-1)[M(n-2)+M(n-1)]ï¼Œå¯ä»¥è€ƒè™‘å‚è€ƒä¸Šé¢ç†è§£</p><p>è‡ªå·±ä»£ç :</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">while</span>(n--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> num;</span><br><span class="line">        ll arr[<span class="number">100000</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">        arr[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">        arr[<span class="number">2</span>] = <span class="number">1</span>; </span><br><span class="line">        cin &gt;&gt; num;</span><br><span class="line">        <span class="keyword">int</span> i;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">3</span>; i &lt;= num; i++) <span class="comment">//æ‰€æœ‰äººæŠ½ä¸åˆ°çš„ç»“æœ</span></span><br><span class="line">            arr[i] = (arr[i - <span class="number">1</span>] + arr[i - <span class="number">2</span>]) * (i - <span class="number">1</span>);</span><br><span class="line">        ll all = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">1</span>; i &lt;= num; i++) <span class="comment">//æ‰€æœ‰å¯èƒ½å‡ºç°çš„ç»“æœ</span></span><br><span class="line">            all *= i;</span><br><span class="line">        <span class="keyword">double</span> ans = arr[num] / (<span class="keyword">double</span>)all; </span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%.02lf%%\n&quot;</span>, ans * <span class="number">100</span>); <span class="comment">//å››èˆäº”å…¥</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2049">HDU2049 ä¸å®¹æ˜“ç³»åˆ—ä¹‹(4)â€”â€”è€ƒæ–°éƒ</a></p><p>è§£é¢˜:<a href="https://blog.csdn.net/zhouhong1026/article/details/7855919">HDU2049</a></p><p>å…¶å®å°±æ˜¯éƒ¨åˆ†æ’é”™ï¼Œåˆ©ç”¨ç»„åˆå…¬å¼å®ç°æˆå°éƒ¨åˆ†ç¾¤ä½“ä¸­å…¨éƒ¨æ’é”™çš„æ•ˆæœï¼Œä»è€Œå¯ä»¥ç”¨å…¬å¼</p><p>è‡ªå·±ä»£ç :</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">fun</span><span class="params">(<span class="keyword">int</span> n)</span> <span class="comment">//æ±‚nï¼</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll num = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        num *= i;</span><br><span class="line">    <span class="keyword">return</span> num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> n, m;</span><br><span class="line">        cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">        ll arr[<span class="number">10000</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">        arr[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">        arr[<span class="number">2</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">3</span>; i &lt;= m; i++)<span class="comment">//å…¬å¼</span></span><br><span class="line">            arr[i] = (i - <span class="number">1</span>) * (arr[i - <span class="number">1</span>] + arr[i <span class="number">-2</span>]);</span><br><span class="line">       cout &lt;&lt; <span class="built_in">fun</span>(n) / <span class="built_in">fun</span>(m) / <span class="built_in">fun</span>(n - m) * arr[m] &lt;&lt; endl;</span><br><span class="line">        <span class="comment">//CMN=N!/M!/(N-M)!,ç„¶åå†ä¹˜ä¸Šå…¬å¼å¾—åˆ°çš„ç»“æœ</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol></li></ol><p>   â€‹</p><h1 id="é€’æ¨ä¸­çš„å¹³é¢é—®é¢˜"><a href="#é€’æ¨ä¸­çš„å¹³é¢é—®é¢˜" class="headerlink" title="é€’æ¨ä¸­çš„å¹³é¢é—®é¢˜"></a>é€’æ¨ä¸­çš„å¹³é¢é—®é¢˜</h1><ol><li><p>næ¡ç›´çº¿åˆ†å¹³é¢é—®é¢˜</p></li><li><p>å°é—­æ›²çº¿åˆ†å¹³é¢é—®é¢˜</p></li><li><p>æŠ˜çº¿åˆ†å‰²å¹³é¢</p><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2050">HDU 2050</a></p><p>ä»£ç :</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">while</span>(n--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> num;</span><br><span class="line">        cin &gt;&gt;num;</span><br><span class="line">    ll arr[<span class="number">100000</span>] = &#123;<span class="number">0</span>&#125;;  </span><br><span class="line">    arr[<span class="number">1</span>] = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">2</span>; i &lt;= num; i++)</span><br><span class="line">        arr[i] = arr[i - <span class="number">1</span>] + <span class="number">4</span>*(i - <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">    cout &lt;&lt; arr[num]  &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>å¹³é¢å‰²ç©ºé—´</li><li>åœ†åœˆåˆ†å‰²å¹³é¢</li></ol><ul><li>è®¾æœ‰næ¡å°é—­æ›²çº¿ç”»åœ¨å¹³é¢ä¸Šï¼Œè€Œä»»ä½•ä¸¤æ¡å°é—­æ›²çº¿æ°å¥½ç›¸äº¤äºä¸¤ç‚¹ï¼Œä¸”ä»»ä½•ä¸‰æ¡å°é—­æ›²çº¿ä¸ç›¸äº¤äºåŒä¸€ç‚¹ï¼Œé—®è¿™äº›å°é—­æ›²çº¿æŠŠå¹³é¢åˆ†å‰²æˆçš„åŒºåŸŸä¸ªæ•°ã€‚</li></ul><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E9%80%89%E5%8C%BA_011.png"></p></li></ol><p>   å¯ä»¥çœ‹pdf,<a href="https://github.com/GreenHatHG/blog_image/blob/master/%E5%90%84%E7%A7%8D%E5%88%86%E5%89%B2%E9%97%AE%E9%A2%98(hdu2050%261290">github</a>.pdf)</p><h1 id="å‡è£…å‰é¢æ’é”™ç³»åˆ—"><a href="#å‡è£…å‰é¢æ’é”™ç³»åˆ—" class="headerlink" title="å‡è£…å‰é¢æ’é”™ç³»åˆ—"></a>å‡è£…å‰é¢æ’é”™ç³»åˆ—</h1><ol><li><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1297">HDU 2097 Childrenâ€™s Queue</a></p><p>è§£æï¼š</p><p>æŒ‰ç…§æœ€åä¸€ä¸ªäººçš„æ€§åˆ«åˆ†æï¼Œä»–è¦ä¹ˆæ˜¯ç”·ï¼Œè¦ä¹ˆæ˜¯å¥³ï¼Œæ‰€ä»¥å¯ä»¥åˆ†ä¸¤å¤§ç±»è®¨è®ºï¼š</p></li></ol><ul><li>å¦‚æœnä¸ªäººçš„åˆæ³•é˜Ÿåˆ—çš„æœ€åä¸€ä¸ªäººæ˜¯ç”·ï¼Œåˆ™å¯¹å‰é¢n-1ä¸ªäººçš„é˜Ÿåˆ—æ²¡æœ‰ä»»ä½•é™åˆ¶ï¼Œä»–åªè¦ç«™åœ¨æœ€åå³å¯ï¼Œæ‰€ä»¥ï¼Œè¿™ç§æƒ…å†µä¸€å…±æœ‰F(n-1);</li><li><p>å¦‚æœnä¸ªäººçš„åˆæ³•é˜Ÿåˆ—çš„æœ€åä¸€ä¸ªäººæ˜¯å¥³ï¼Œåˆ™è¦æ±‚é˜Ÿåˆ—çš„ç¬¬n-1ä¸ªäººåŠ¡å¿…ä¹Ÿæ˜¯å¥³ç”Ÿï¼Œè¿™å°±æ˜¯è¯´ï¼Œé™å®šäº†æœ€åä¸¤ä¸ªäººå¿…é¡»éƒ½æ˜¯å¥³ç”Ÿï¼Œè¿™åˆå¯ä»¥åˆ†ä¸¤ç§æƒ…å†µï¼š</p><ul><li>å¦‚æœé˜Ÿåˆ—çš„å‰n-2ä¸ªäººæ˜¯åˆæ³•çš„é˜Ÿåˆ—ï¼Œåˆ™æ˜¾ç„¶åé¢å†åŠ ä¸¤ä¸ªå¥³ç”Ÿï¼Œä¹Ÿä¸€å®šæ˜¯åˆæ³•çš„ï¼Œè¿™ç§æƒ…å†µæœ‰F(n-2);</li><li>ä½†æ˜¯ï¼Œéš¾ç‚¹åœ¨äºï¼Œå³ä½¿å‰é¢n-2ä¸ªäººä¸æ˜¯åˆæ³•çš„é˜Ÿåˆ—ï¼ŒåŠ ä¸Šä¸¤ä¸ªå¥³ç”Ÿä¹Ÿæœ‰å¯èƒ½æ˜¯åˆæ³•çš„ï¼Œå½“ç„¶ï¼Œè¿™ç§é•¿åº¦ä¸ºn-2çš„ä¸åˆæ³•é˜Ÿåˆ—ï¼Œä¸åˆæ³•çš„åœ°æ–¹å¿…é¡»æ˜¯å°¾å·´ï¼Œå°±æ˜¯è¯´ï¼Œè¿™é‡Œè¯´çš„é•¿åº¦æ˜¯n-2çš„ä¸åˆæ³•ä¸²çš„å½¢å¼å¿…é¡»æ˜¯â€œF(n-4)+ç”·+å¥³â€ï¼Œè¿™ç§æƒ…å†µä¸€å…±æœ‰F(n-4).</li></ul><p>æ‰€ä»¥ï¼Œé€šè¿‡ä»¥ä¸Šçš„åˆ†æï¼Œå¯ä»¥å¾—åˆ°é€’æ¨çš„é€šé¡¹å…¬å¼ï¼šF(n)=F(n-1)+F(n-2)+F(n-4)   (n&gt;3)ã€‚ç„¶åå°±æ˜¯å¯¹n&lt;=3 çš„ä¸€äº›ç‰¹æ®Šæƒ…å†µçš„å¤„ç†äº†ï¼Œæ˜¾ç„¶ï¼šF(0)=1   (æ²¡æœ‰äººä¹Ÿæ˜¯åˆæ³•çš„ï¼Œè¿™ä¸ªå¯ä»¥ç‰¹æ®Šå¤„ç†ï¼Œå°±åƒ0çš„é˜¶ä¹˜å®šä¹‰ä¸º1ä¸€æ ·)   F(1)=1ï¼ŒF(2)=2ï¼ŒF(3)=4</p><p>æ ¹æ®è¿™ä¸ªå…¬å¼è®¡ç®—f(n),å…¶æ•°åˆ—å€¼çš„å¢é•¿é€Ÿåº¦å¤ªå¿«äº†ï¼Œéœ€è¦æ„ç­‘ä¸€ä¸ªå¤§æ•´æ•°ç±»æ¥è§£å†³ã€‚æ­¤å¤„é€‰æ‹©ç”¨javaè§£å†³</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.math.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> num;</span><br><span class="line">        Scanner in = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">while</span>(in.hasNextInt())</span><br><span class="line">        &#123;</span><br><span class="line">            num = in.nextInt();</span><br><span class="line">            BigInteger[] arr = <span class="keyword">new</span> BigInteger[<span class="number">10000</span>];</span><br><span class="line">            arr[<span class="number">0</span>] =BigInteger.valueOf(<span class="number">1</span>);</span><br><span class="line">            arr[<span class="number">1</span>] = BigInteger.valueOf(<span class="number">1</span>);</span><br><span class="line">            arr[<span class="number">2</span>] = BigInteger.valueOf(<span class="number">2</span>);</span><br><span class="line">            arr[<span class="number">3</span>] =BigInteger.valueOf(<span class="number">4</span>);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">4</span>; i &lt;= num; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                arr[i] = arr[i - <span class="number">2</span>].add(arr[i  - <span class="number">1</span>]);</span><br><span class="line">                arr[i] = arr[i].add(arr[i - <span class="number">4</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(arr[num]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><ol><li><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2045">HDU2045 ä¸å®¹æ˜“ç³»åˆ—ä¹‹(3)â€”â€” LELEçš„RPGéš¾é¢˜</a></p><p>è§£é¢˜ï¼š<a href="https://blog.csdn.net/mengxianglong123/article/details/79881899">HDU2045</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; n)</span><br><span class="line">    &#123;</span><br><span class="line">        ll arr[<span class="number">100000</span>] = &#123;<span class="number">0</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">6</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">4</span>; i &lt;= n; i++)</span><br><span class="line">            arr[i] = <span class="number">2</span> * arr[i - <span class="number">2</span>] + arr[i  - <span class="number">1</span>];</span><br><span class="line">        cout &lt;&lt; arr[n] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹</p></li></ol><h1 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h1><ol><li><a href="https://blog.csdn.net/jarvenman/article/details/53132732">HDU2047 é˜¿ç‰›çš„EOFç‰›è‚‰</a></li></ol><p>è§£é¢˜:<a href="https://blog.csdn.net/jarvenman/article/details/53132732">HDU2047</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; n)</span><br><span class="line">    &#123;</span><br><span class="line">    ll arr[<span class="number">10000</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    arr[<span class="number">1</span>] = <span class="number">3</span>;</span><br><span class="line">    arr[<span class="number">2</span>] = <span class="number">8</span>;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">3</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        arr[i] = <span class="number">2</span> * (arr[i - <span class="number">1</span>] + arr[i - <span class="number">2</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; arr[n] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong><em>for beginner:</em></strong></p><ul><li>HDU1290 çŒ®ç»™æ­ç”µäº”åå‘¨å¹´æ ¡åº†çš„ç¤¼ç‰© </li><li>HDU1297 Childrenâ€™s Queue </li><li>HDU1438 é’¥åŒ™è®¡æ•°ä¹‹ä¸€ </li><li>HDU1465 ~1466 1480 é’¥åŒ™è®¡æ•°ä¹‹äºŒ </li><li>HDU2013 èŸ æ¡ƒè®° </li><li>HDU2018 æ¯ç‰›çš„æ•…äº‹ </li><li>HDU2041~2042<br>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</li><li>HDU2044~2050 (10/5ä¸“é¢˜ç»ƒä¹ )</li></ul><h1 id="HDU2563-ç»Ÿè®¡é—®é¢˜"><a href="#HDU2563-ç»Ÿè®¡é—®é¢˜" class="headerlink" title="HDU2563 ç»Ÿè®¡é—®é¢˜"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2563">HDU2563 ç»Ÿè®¡é—®é¢˜</a></h1><p><strong>é€’æ¨</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">é¢˜ç›®ä¿¡æ¯è½¬åŒ–ï¼šå½“ä½ èµ°å®Œç¬¬ï¼ˆn-2)æ­¥</span><br><span class="line">           ï¼ˆ1ï¼‰.å¦‚æœä½ å‘å·¦ï¼ˆæˆ–å‘å³ï¼‰èµ°å‡ºç¬¬(n-1)æ­¥ï¼Œä½ çš„ç¬¬næ­¥åªèƒ½é€‰æ‹©å‘å³ï¼ˆæˆ–å‘å·¦ï¼‰å’Œå‘ä¸Šã€‚ï¼ˆå› ä¸ºä½ èµ°çš„å‰ä¸€æ­¥è·¯ä¼šå¡Œé™·è€Œä¸èƒ½å†èµ°ï¼‰</span><br><span class="line">           ï¼ˆ2ï¼‰.å¦‚æœä½ å‘ä¸Šèµ°å‡ºç¬¬ï¼ˆn-1ï¼‰æ­¥ï¼Œé‚£ä½ çš„ç¬¬næ­¥å¯ä»¥é€‰æ‹©å‘å·¦å‘å³å‘ä¸Šä¸‰ä¸ªæ–¹å‘ã€‚</span><br><span class="line">ï¼ˆå¦‚æœä½ èƒ½ç†è§£ä¸Šé¢çš„æ„æ€é‚£ä¹ˆæ¨å‡ºå…¬å¼å¯¹ä½ æ¥è¯´å°±æ˜¯å°èœä¸€ç¢Ÿäº†ï¼‰</span><br><span class="line"></span><br><span class="line">é€’æ¨å…¬å¼æ€è·¯ï¼šå½“ä½ èµ°å®Œç¬¬ï¼ˆn-1ï¼‰æ­¥ï¼Œä½ ä¸€å®šæœ‰è‡³å°‘ä¸¤ä¸ªæ–¹å‘å¯ä»¥é€‰æ‹©ï¼Œæ•…æ­¤æ—¶èƒ½èµ°ä¸¤ä¸ªæ–¹å‘çš„æƒ…å†µä¸º 2*f(n-1)ã€‚</span><br><span class="line">           è‹¥ä½ æƒ³èµ°å®Œç¬¬ï¼ˆn-1ï¼‰æ­¥åä¸€å®šæœ‰ä¸‰ä¸ªæ–¹å‘å¯ä»¥é€‰æ‹©ï¼Œåˆ™è¦æ±‚èµ°å®Œç¬¬(n-2)æ­¥åå¿…é¡»æ˜¯å‘ä¸Šèµ°å‡ºï¼ˆn-1ï¼‰æ­¥ï¼Œæ•…æ­¤æ—¶çš„æƒ…å†µæ•°ä¸º f(n-2)ã€‚</span><br><span class="line"></span><br><span class="line">ç»¼ä¸Šæ‰€è¿°ï¼š f(n) = 2*f(n-1) + f(n-2)</span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š<a href="http://acm.hdu.edu.cn/discuss/problem/post/reply.php?postid=30032&amp;messageid=1&amp;deep=0">http://acm.hdu.edu.cn/discuss/problem/post/reply.php?postid=30032&amp;messageid=1&amp;deep=0</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Time:  2018-10-17 11:27:08</span></span><br><span class="line"><span class="comment"> Ext.time:  2ms</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1E3</span>;</span><br><span class="line"><span class="keyword">int</span> arr[MAXN] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fun</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    arr[<span class="number">1</span>] = <span class="number">3</span>;</span><br><span class="line">    arr[<span class="number">2</span>] = <span class="number">7</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">3</span>; i &lt;= <span class="number">20</span>; i++)</span><br><span class="line">        arr[i] = <span class="number">2</span> * arr[i - <span class="number">1</span>] + arr[i - <span class="number">2</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">fun</span>();</span><br><span class="line">    <span class="keyword">int</span> test;</span><br><span class="line">    cin &gt;&gt; test;</span><br><span class="line">    <span class="keyword">while</span>(test--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> num;</span><br><span class="line">        cin &gt;&gt; num;</span><br><span class="line">        cout &lt;&lt; arr[num] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>DFS</strong></p><p>DFSçš„è¯æ˜¯è¶…æ—¶äº†</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1E3</span>;</span><br><span class="line"><span class="keyword">int</span> arr[MAXN][MAXN] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> dir[<span class="number">3</span>][<span class="number">2</span>]=&#123;</span><br><span class="line">        &#123;<span class="number">0</span>, <span class="number">1</span>&#125;,</span><br><span class="line">        &#123;<span class="number">1</span>, <span class="number">0</span>&#125;,</span><br><span class="line">        &#123;<span class="number">-1</span>, <span class="number">0</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">int</span> has[<span class="number">25</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="keyword">int</span> cnt)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(cnt == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        ans++;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">3</span>; k++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> x = i + dir[k][<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> y = j + dir[k][<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span>(x &gt;= <span class="number">0</span> &amp;&amp; y &gt;= <span class="number">0</span> &amp;&amp; !arr[x][y])</span><br><span class="line">        &#123;</span><br><span class="line">            arr[i][j] = <span class="number">1</span>;</span><br><span class="line">            <span class="built_in">dfs</span>(x, y, cnt - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        arr[x][y] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">20</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        ans = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">memset</span>(arr, <span class="number">0</span> ,<span class="built_in"><span class="keyword">sizeof</span></span>(arr));</span><br><span class="line">        has[i] = <span class="built_in">dfs</span>(<span class="number">500</span>, <span class="number">0</span>, i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> test;</span><br><span class="line">    cin &gt;&gt; test;</span><br><span class="line">    <span class="keyword">while</span>(test--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> num;</span><br><span class="line">        cin &gt;&gt; num;</span><br><span class="line">        cout &lt;&lt; has[num] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹‹å‰å†™äº†ä¸€å‘é”™è¯¯çš„dfsï¼Œé¦–å…ˆæ˜¯dfsæ–¹å‘èµ°é”™äº†ï¼Œææ··äº†xï¼Œyè½´ï¼Œå‘ä¸‹æ˜¯xè½´ï¼Œå‘å³æ˜¯yè½´ã€‚å…¶æ¬¡æ˜¯çŠ¶æ€å›æº¯æé”™äº†ï¼Œåº”è¯¥æ˜¯å›æº¯æœ€åä¸€ä¸ªç‚¹ï¼Œè€Œä¸æ˜¯å‰ä¸€ä¸ªç‚¹ï¼Œå› ä¸ºæœ€åé‚£ä¸€ä¸ªç‚¹å¯èƒ½é€šè¿‡åˆ«çš„æ–¹å¼è¿˜ä¼šèµ°åˆ°ã€‚è¿˜æœ‰ä¸€ä¸ªå°±æ˜¯æ¯æ¬¡èµ°è¿‡ä¸€ä¸ªç‚¹åº”è¯¥æ ‡è®°ï¼Œé‚£ä¸ªæ ‡è®°è¯­å¥åº”è¯¥æ”¾åœ¨foré‡Œé¢ï¼Œæ”¾åœ¨å¤–é¢çš„è¯</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1E3</span>;</span><br><span class="line"><span class="keyword">int</span> arr[MAXN][MAXN] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> dir[<span class="number">3</span>][<span class="number">2</span>]=&#123;</span><br><span class="line">    &#123;<span class="number">1</span>, <span class="number">0</span>&#125;,</span><br><span class="line">    &#123;<span class="number">0</span>, <span class="number">1</span>&#125;,</span><br><span class="line">    &#123;<span class="number">0</span>, <span class="number">-1</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">int</span> has[<span class="number">25</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="keyword">int</span> cnt, <span class="keyword">const</span> <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(i &lt; <span class="number">0</span> || j &lt; <span class="number">0</span> || cnt &gt; n || arr[i][j])</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    arr[i][j] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">3</span>; k++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> x = i + dir[k][<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> y = j + dir[k][<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span>(x &gt;= <span class="number">0</span> &amp;&amp; y &gt;= <span class="number">0</span> &amp;&amp; !arr[x][y])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">dfs</span>(x, y, cnt + <span class="number">1</span>, n);</span><br><span class="line">            <span class="keyword">if</span>(cnt == n)</span><br><span class="line">            &#123;</span><br><span class="line">                ans++;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        arr[i][j] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ”¹æ­£åçš„</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">int dfs(int i, int j, int cnt, const int n)</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">    if(cnt == n)</span></span><br><span class="line"><span class="comment">    &#123;</span></span><br><span class="line"><span class="comment">        ans++;</span></span><br><span class="line"><span class="comment">        return 0;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    for(int k = 0; k &lt; 3; k++)</span></span><br><span class="line"><span class="comment">    &#123;</span></span><br><span class="line"><span class="comment">        int x = i + dir[k][0];</span></span><br><span class="line"><span class="comment">        int y = j + dir[k][1];</span></span><br><span class="line"><span class="comment">        if(x &gt;= 0 &amp;&amp; y &gt;= 0 &amp;&amp; !arr[x][y])</span></span><br><span class="line"><span class="comment">        &#123;</span></span><br><span class="line"><span class="comment">            arr[i][j] = 1;</span></span><br><span class="line"><span class="comment">            dfs(x, y, cnt + 1, n);</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        arr[x][y] = 0;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    return ans;</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">20</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        ans = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">memset</span>(arr, <span class="number">0</span> ,<span class="built_in"><span class="keyword">sizeof</span></span>(arr));</span><br><span class="line">        has[i] = <span class="built_in">dfs</span>(<span class="number">500</span>, <span class="number">500</span>, <span class="number">0</span>, i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> test;</span><br><span class="line">    cin &gt;&gt; test;</span><br><span class="line">    <span class="keyword">while</span>(test--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> num;</span><br><span class="line">        cin &gt;&gt; num;</span><br><span class="line">        cout &lt;&lt; has[num] &lt;&lt; endl;</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>HDU2044~2050 (10/5ä¸“é¢˜ç»ƒä¹ )</li></ul>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é€’æ¨ </tag>
            
            <tag> é”™æ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°å­—ç‰¹ç‚¹</title>
      <link href="/2018/04/26/%E6%95%B0%E5%AD%97%E7%89%B9%E7%82%B9/"/>
      <url>/2018/04/26/%E6%95%B0%E5%AD%97%E7%89%B9%E7%82%B9/</url>
      
        <content type="html"><![CDATA[<p>èƒ½è¢«æ•´é™¤çš„é‚£äº›äº‹</p><span id="more"></span><h1 id="èƒ½è¢«2æ•´é™¤"><a href="#èƒ½è¢«2æ•´é™¤" class="headerlink" title="èƒ½è¢«2æ•´é™¤"></a>èƒ½è¢«2æ•´é™¤</h1><p>è‹¥ä¸€ä¸ªæ•´æ•°çš„æœ«ä½æ˜¯0ã€2ã€4ã€6æˆ–8ï¼Œåˆ™è¿™ä¸ªæ•°èƒ½è¢«2æ•´é™¤ã€‚ </p><h1 id="èƒ½è¢«3æ•´é™¤"><a href="#èƒ½è¢«3æ•´é™¤" class="headerlink" title="èƒ½è¢«3æ•´é™¤"></a>èƒ½è¢«3æ•´é™¤</h1><p>è‹¥ä¸€ä¸ªæ•´æ•°çš„æ•°å­—å’Œèƒ½è¢«3æ•´é™¤ï¼Œåˆ™è¿™ä¸ªæ•´æ•°èƒ½è¢«3æ•´é™¤ã€‚ </p><h1 id="èƒ½è¢«4æ•´é™¤"><a href="#èƒ½è¢«4æ•´é™¤" class="headerlink" title="èƒ½è¢«4æ•´é™¤"></a>èƒ½è¢«4æ•´é™¤</h1><p>è‹¥ä¸€ä¸ªæ•´æ•°çš„æœ«å°¾ä¸¤ä½æ•°èƒ½è¢«4æ•´é™¤ï¼Œåˆ™è¿™ä¸ªæ•°èƒ½è¢«4æ•´é™¤</p><h1 id="èƒ½è¢«5æ•´é™¤"><a href="#èƒ½è¢«5æ•´é™¤" class="headerlink" title="èƒ½è¢«5æ•´é™¤"></a>èƒ½è¢«5æ•´é™¤</h1><p>è‹¥ä¸€ä¸ªæ•´æ•°çš„æœ«ä½æ˜¯0æˆ–5ï¼Œåˆ™è¿™ä¸ªæ•°èƒ½è¢«5æ•´é™¤</p><h1 id="èƒ½è¢«6æ•´é™¤"><a href="#èƒ½è¢«6æ•´é™¤" class="headerlink" title="èƒ½è¢«6æ•´é™¤"></a>èƒ½è¢«6æ•´é™¤</h1><p>èƒ½è¢«6æ•´é™¤çš„æ•°çš„ç‰¹å¾æœ«å°¾æ˜¯0ã€2ã€4ã€6ã€8ä¸”å„ä½ä¸Šæ•°å­—çš„å’Œèƒ½è¢«3æ•´é™¤<br>èƒ½è¢«6æ•´é™¤çš„æ•°çš„ç‰¹å¾æ—¢è¦ç¬¦åˆèƒ½è¢«2æ•´é™¤çš„æ•°çš„ç‰¹å¾,åˆè¦ç¬¦åˆèƒ½è¢«3æ•´é™¤çš„æ•°çš„ç‰¹å¾  </p><h1 id="èƒ½è¢«7æ•´é™¤"><a href="#èƒ½è¢«7æ•´é™¤" class="headerlink" title="èƒ½è¢«7æ•´é™¤"></a>èƒ½è¢«7æ•´é™¤</h1><p>è‹¥ä¸€ä¸ªæ•´æ•°çš„ä¸ªä½æ•°å­—æˆªå»ï¼Œå†ä»ä½™ä¸‹çš„æ•°ä¸­ï¼Œå‡å»ä¸ªä½æ•°çš„2å€ï¼Œå¦‚æœå·®æ˜¯7çš„å€æ•°ï¼Œåˆ™åŸæ•°èƒ½è¢«7æ•´é™¤ã€‚å¦‚æœå·®å¤ªå¤§æˆ–å¿ƒç®—ä¸æ˜“çœ‹å‡ºæ˜¯å¦7çš„å€æ•°ï¼Œå°±éœ€è¦ç»§ç»­ä¸Šè¿°ã€Œæˆªå°¾ã€å€å¤§ã€ç›¸å‡ã€éªŒå·®ã€çš„è¿‡ç¨‹ï¼Œç›´åˆ°èƒ½æ¸…æ¥šåˆ¤æ–­ä¸ºæ­¢ã€‚ä¾‹å¦‚ï¼Œåˆ¤æ–­133æ˜¯å¦7çš„å€æ•°çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š13ï¼3Ã—2ï¼7ï¼Œæ‰€ä»¥133æ˜¯7çš„å€æ•°ï¼›åˆä¾‹å¦‚åˆ¤æ–­6139æ˜¯å¦7çš„å€æ•°çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š613ï¼9Ã—2ï¼595 ï¼Œ 59ï¼5Ã—2ï¼49ï¼Œæ‰€ä»¥6139æ˜¯7çš„å€æ•°ï¼Œä½™ç±»æ¨ã€‚ </p><h1 id="èƒ½è¢«8æ•´é™¤"><a href="#èƒ½è¢«8æ•´é™¤" class="headerlink" title="èƒ½è¢«8æ•´é™¤"></a>èƒ½è¢«8æ•´é™¤</h1><p>è‹¥ä¸€ä¸ªæ•´æ•°çš„æœªå°¾ä¸‰ä½æ•°èƒ½è¢«8æ•´é™¤ï¼Œåˆ™è¿™ä¸ªæ•°èƒ½è¢«8æ•´é™¤</p><h1 id="èƒ½è¢«9æ•´é™¤"><a href="#èƒ½è¢«9æ•´é™¤" class="headerlink" title="èƒ½è¢«9æ•´é™¤"></a>èƒ½è¢«9æ•´é™¤</h1><p>è‹¥ä¸€ä¸ªæ•´æ•°çš„æ•°å­—å’Œèƒ½è¢«9æ•´é™¤ï¼Œåˆ™è¿™ä¸ªæ•´æ•°èƒ½è¢«9æ•´é™¤</p><h1 id="èƒ½è¢«10æ•´é™¤"><a href="#èƒ½è¢«10æ•´é™¤" class="headerlink" title="èƒ½è¢«10æ•´é™¤"></a>èƒ½è¢«10æ•´é™¤</h1><p>è‹¥ä¸€ä¸ªæ•´æ•°çš„æœ«ä½æ˜¯0ï¼Œåˆ™è¿™ä¸ªæ•°èƒ½è¢«10æ•´é™¤ã€‚</p><h1 id="èƒ½è¢«11æ•´é™¤"><a href="#èƒ½è¢«11æ•´é™¤" class="headerlink" title="èƒ½è¢«11æ•´é™¤"></a>èƒ½è¢«11æ•´é™¤</h1><p>è‹¥ä¸€ä¸ªæ•´æ•°çš„å¥‡ä½æ•°å­—ä¹‹å’Œä¸å¶ä½æ•°å­—ä¹‹å’Œçš„å·®èƒ½è¢«11æ•´é™¤ï¼Œåˆ™è¿™ä¸ªæ•°èƒ½è¢«11æ•´é™¤ã€‚11çš„å€æ•°æ£€éªŒæ³•ä¹Ÿå¯ç”¨ä¸Šè¿°æ£€æŸ¥7çš„ã€Œå‰²å°¾æ³•ã€å¤„ç†ï¼è¿‡ç¨‹ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ï¼šå€æ•°ä¸æ˜¯2è€Œæ˜¯1ï¼</p><h1 id="èƒ½è¢«12æ•´é™¤"><a href="#èƒ½è¢«12æ•´é™¤" class="headerlink" title="èƒ½è¢«12æ•´é™¤"></a>èƒ½è¢«12æ•´é™¤</h1><p>è‹¥ä¸€ä¸ªæ•´æ•°èƒ½è¢«3å’Œ4æ•´é™¤ï¼Œåˆ™è¿™ä¸ªæ•°èƒ½è¢«12æ•´é™¤</p><h1 id="èƒ½è¢«13æ•´é™¤"><a href="#èƒ½è¢«13æ•´é™¤" class="headerlink" title="èƒ½è¢«13æ•´é™¤"></a>èƒ½è¢«13æ•´é™¤</h1><p>è‹¥ä¸€ä¸ªæ•´æ•°çš„ä¸ªä½æ•°å­—æˆªå»ï¼Œå†ä»ä½™ä¸‹çš„æ•°ä¸­ï¼ŒåŠ ä¸Šä¸ªä½æ•°çš„4å€ï¼Œå¦‚æœå·®æ˜¯13çš„å€æ•°ï¼Œåˆ™åŸæ•°èƒ½è¢«13æ•´é™¤ã€‚å¦‚æœå·®å¤ªå¤§æˆ–å¿ƒç®—ä¸æ˜“çœ‹å‡ºæ˜¯å¦13çš„å€æ•°ï¼Œå°±éœ€è¦ç»§ç»­ä¸Šè¿°ã€Œæˆªå°¾ã€å€å¤§ã€ç›¸åŠ ã€éªŒå·®ã€çš„è¿‡ç¨‹ï¼Œç›´åˆ°èƒ½æ¸…æ¥šåˆ¤æ–­ä¸ºæ­¢ã€‚ </p><h1 id="èƒ½è¢«17æ•´é™¤"><a href="#èƒ½è¢«17æ•´é™¤" class="headerlink" title="èƒ½è¢«17æ•´é™¤"></a>èƒ½è¢«17æ•´é™¤</h1><ul><li>è‹¥ä¸€ä¸ªæ•´æ•°çš„ä¸ªä½æ•°å­—æˆªå»ï¼Œå†ä»ä½™ä¸‹çš„æ•°ä¸­ï¼Œå‡å»ä¸ªä½æ•°çš„5å€ï¼Œå¦‚æœå·®æ˜¯17çš„å€æ•°ï¼Œåˆ™åŸæ•°èƒ½è¢«17æ•´é™¤ã€‚å¦‚æœå·®å¤ªå¤§æˆ–å¿ƒç®—ä¸æ˜“çœ‹å‡ºæ˜¯å¦17çš„å€æ•°ï¼Œå°±éœ€è¦ç»§ç»­ä¸Šè¿°ã€Œæˆªå°¾ã€å€å¤§ã€ç›¸å‡ã€éªŒå·®ã€çš„è¿‡ç¨‹ï¼Œç›´åˆ°èƒ½æ¸…æ¥šåˆ¤æ–­ä¸ºæ­¢</li><li>è‹¥ä¸€ä¸ªæ•´æ•°çš„æœ«ä¸‰ä½ä¸3å€çš„å‰é¢çš„éš”å‡ºæ•°çš„å·®èƒ½è¢«17æ•´é™¤ï¼Œåˆ™è¿™ä¸ªæ•°èƒ½è¢«17æ•´é™¤</li></ul><h1 id="èƒ½è¢«19æ•´é™¤"><a href="#èƒ½è¢«19æ•´é™¤" class="headerlink" title="èƒ½è¢«19æ•´é™¤"></a>èƒ½è¢«19æ•´é™¤</h1><ul><li>è‹¥ä¸€ä¸ªæ•´æ•°çš„ä¸ªä½æ•°å­—æˆªå»ï¼Œå†ä»ä½™ä¸‹çš„æ•°ä¸­ï¼ŒåŠ ä¸Šä¸ªä½æ•°çš„2å€ï¼Œå¦‚æœå·®æ˜¯19çš„å€æ•°ï¼Œåˆ™åŸæ•°èƒ½è¢«19æ•´é™¤ã€‚å¦‚æœå·®å¤ªå¤§æˆ–å¿ƒç®—ä¸æ˜“çœ‹å‡ºæ˜¯å¦19çš„å€æ•°ï¼Œå°±éœ€è¦ç»§ç»­ä¸Šè¿°ã€Œæˆªå°¾ã€å€å¤§ã€ç›¸åŠ ã€éªŒå·®ã€çš„è¿‡ç¨‹ï¼Œç›´åˆ°èƒ½æ¸…æ¥šåˆ¤æ–­ä¸ºæ­¢</li><li>è‹¥ä¸€ä¸ªæ•´æ•°çš„æœ«ä¸‰ä½ä¸7å€çš„å‰é¢çš„éš”å‡ºæ•°çš„å·®èƒ½è¢«19æ•´é™¤ï¼Œåˆ™è¿™ä¸ªæ•°èƒ½è¢«19æ•´é™¤</li></ul><h1 id="èƒ½è¢«23æ•´é™¤"><a href="#èƒ½è¢«23æ•´é™¤" class="headerlink" title="èƒ½è¢«23æ•´é™¤"></a>èƒ½è¢«23æ•´é™¤</h1><p>è‹¥ä¸€ä¸ªæ•´æ•°çš„æœ«å››ä½ä¸å‰é¢5å€çš„éš”å‡ºæ•°çš„å·®èƒ½è¢«23(æˆ–29)æ•´é™¤ï¼Œåˆ™è¿™ä¸ªæ•°èƒ½è¢«23æ•´é™¤</p><h1 id="èƒ½è¢«43æ•´é™¤"><a href="#èƒ½è¢«43æ•´é™¤" class="headerlink" title="èƒ½è¢«43æ•´é™¤"></a>èƒ½è¢«43æ•´é™¤</h1><ul><li>è‹¥ä¸€ä¸ªæ•´æ•°å»æ‰æœ«ä¸¤ä½æ•°å­—åæ‰©å¤§14å€ä¸æœ«ä¸¤ä½æ•°å­—çš„æ•°çš„å’Œï¼ˆå¾—åˆ°å’Œåå¯é‡å¤è¿›è¡Œï¼‰ï¼Œè‹¥æœ€åç»“æœèƒ½è¢«43æ•´é™¤ï¼Œåˆ™è¯¥æ•°å°±èƒ½è¢«43æ•´é™¤ï¼Œå¦åˆ™ä¸èƒ½(å¦‚æœåœ¨é‡å¤è®¡ç®—çš„è¿‡ç¨‹ä¸­æœ‰é‡å¤æ•°å‡ºç°ï¼Œåˆ™å¯ä»¥åˆ¤æ–­è¿™ä¸ªæ•°ä¸èƒ½è¢«43æ•´é™¤)ã€‚</li><li>ä¸€ä¸ªæ•´æ•°çš„ä¸ªä½æ•°å­—æ‰©å¤§13å€ä¸å»æ‰ä¸ªä½æ•°å­—åçš„æ•°çš„å’Œï¼ˆå¾—åˆ°å’Œåå¯é‡å¤è¿›è¡Œï¼‰ï¼Œè‹¥æœ€åç»“æœèƒ½è¢«43æ•´é™¤ï¼Œåˆ™è¯¥æ•°å°±èƒ½è¢«43æ•´é™¤ï¼Œå¦åˆ™å°±ä¸èƒ½(å¦‚æœåœ¨é‡å¤è®¡ç®—çš„è¿‡ç¨‹ä¸­æœ‰é‡å¤æ•°å‡ºç°ï¼Œåˆ™å¯ä»¥åˆ¤æ–­è¿™ä¸ªæ•°ä¸èƒ½è¢«43æ•´é™¤)ã€‚</li></ul><h1 id="èƒ½è¢«7-11-13æ•´é™¤"><a href="#èƒ½è¢«7-11-13æ•´é™¤" class="headerlink" title="èƒ½è¢«7,11,13æ•´é™¤"></a>èƒ½è¢«7,11,13æ•´é™¤</h1><p>è‹¥ä¸€ä¸ªæ•´æ•°æ•°çš„æœ«ä¸‰ä½æ•°ä¸æœ«ä¸‰ä½æ•°ä»¥å‰çš„æ•°å­—æ‰€ç»„æˆçš„æ•°ä¹‹å·®èƒ½è¢«7ã€11ã€13æ•´é™¤ï¼Œåˆ™è¿™ä¸ªæ•°èƒ½è¢«7ã€11ã€13æ•´é™¤ã€‚</p><h1 id="æ•´é™¤çš„æ€§è´¨"><a href="#æ•´é™¤çš„æ€§è´¨" class="headerlink" title="æ•´é™¤çš„æ€§è´¨"></a>æ•´é™¤çš„æ€§è´¨</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(1)è‹¥a|bï¼Œä¸”b|cï¼Œåˆ™a|cã€‚</span><br><span class="line">(2)è‹¥a|bä¸”a|cï¼Œç­‰ä»·äºå¯¹äºä»»æ„çš„æ•´æ•°xã€yï¼Œæœ‰a|(b*x+c*y)ã€‚</span><br><span class="line">(3)è®¾mâ‰ 0ï¼Œåˆ™a|bç­‰ä»·äº(m*a)|(m*b)ã€‚</span><br><span class="line">(4)è‹¥a|bï¼Œä¸”b|aï¼Œåˆ™a=Â±bã€‚</span><br><span class="line">(5)è‹¥a|bä¸”bâ‰ 0ï¼Œåˆ™|a|â‰¤|b|ã€‚</span><br><span class="line">(6)è®¾æ•´æ•°xã€yæ»¡è¶³ä¸‹å¼ï¼ša*x+b*y=1ï¼Œä¸”a|nï¼Œb|nï¼Œé‚£ä¹ˆ(a*b)|nã€‚</span><br></pre></td></tr></table></figure><p>å‚è€ƒ:<a href="http://acm.sdibt.edu.cn/blog/?p=1204">å…³äºæ•´é™¤</a></p><h1 id="å¤§æ•°è¢«æ•´é™¤çš„ä¸‡èƒ½å…¬å¼"><a href="#å¤§æ•°è¢«æ•´é™¤çš„ä¸‡èƒ½å…¬å¼" class="headerlink" title="å¤§æ•°è¢«æ•´é™¤çš„ä¸‡èƒ½å…¬å¼"></a>å¤§æ•°è¢«æ•´é™¤çš„ä¸‡èƒ½å…¬å¼</h1><p>é™¤äº†ç”¨å¤§æ•°æ•´é™¤æ–¹æ³•å¤–ï¼Œå¯ä»¥è¯•è¯•ä¸‹é¢çš„ä¸‡èƒ½å…¬å¼  </p><p>åŸç†ï¼šæ¯ä¸€ä¸ªAéƒ½å¯ä»¥åˆ†è§£æˆn*B+Cï¼Œå…¶ä¸­Cä¸ºA%Bçš„å€¼ï¼Œè¿™æ ·çš„è¯æˆ‘ä»¬èƒ½å¤Ÿæƒ³åˆ°ä¸€ä¸ªæ•°å¯ä»¥å°†å…¶å‰ç¼€æ¯æ¬¡éƒ½modBï¼Œæœ€åå¾—åˆ°çš„æ•°å¦‚æœæ˜¯0çš„è¯ï¼Œé‚£ä¹ˆèƒ½å¤Ÿæ•´é™¤ï¼Œå¦è€…ä¸èƒ½æ•´é™¤</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string str;</span><br><span class="line">    cin &gt;&gt; str; <span class="comment">//è¾“å…¥è¢«é™¤æ•°</span></span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;   <span class="comment">//è¾“å…¥é™¤æ•°</span></span><br><span class="line">    <span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; str.<span class="built_in">size</span>();i++)</span><br><span class="line">    &#123;</span><br><span class="line">        temp *= <span class="number">10</span>;</span><br><span class="line">        temp += str[i];</span><br><span class="line">        temp %= n;</span><br><span class="line">        <span class="comment">//temp = (temp * 10 + (str[i] - &#x27;0&#x27;)) % n;//æ•´åˆå¼å­</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(temp % n == <span class="number">0</span>)</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;1&quot;</span> &lt;&lt; endl; <span class="comment">//èƒ½è¢«æ•´é™¤</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;0&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è§£è¯»ï¼š  </p><p>è¦åˆ¤æ–­çš„è¿™ä¸ªæ•°å…ˆæ‹†åˆ†æˆä¸¤ä¸ªæ•°çš„å’Œæˆ–è€…å·®ï¼Œè¦æ±‚è¾ƒå¤§æ•°å¿…é¡»æ˜¯è¿™ä¸ªæ•°çš„å€æ•°ï¼Œè¿™æ ·æˆ‘ä»¬åªè¦åˆ¤æ–­è¾ƒå°çš„æ•°å°±å¯ä»¥äº†ã€‚å¦‚æœè¾ƒå°çš„è¿™ä¸ªæ•°ä¹Ÿèƒ½è¢«è¿™ä¸ªæ•°æ•´é™¤ï¼Œæˆ‘ä»¬å°±è¯´åŸæ¥è¿™ä¸ªæ•°ä¹Ÿä¸€å®šèƒ½è¢«è¿™ä¸ªæ•°æ•´é™¤ã€‚</p><ul><li>936èƒ½ä¸èƒ½è¢«7æ•´é™¤ã€‚  </li></ul><p>æˆ‘ä»¬è¦åˆ¤æ–­936è¿™ä¸ªæ•°èƒ½ä¸èƒ½è¢«7æ•´é™¤ï¼Œå¯ä»¥å…ˆæŠŠ936æ‹†æˆä¸¤ä¸ªæ•°çš„å’Œï¼š936=910+26ã€‚ç”±äºè¾ƒå¤§æ•°910æ˜¯7çš„å€æ•°(èƒ½è¢«7æ•´é™¤)ï¼Œå› æ­¤æˆ‘ä»¬åªè¦åˆ¤æ–­è¾ƒå°æ•°26èƒ½ä¸èƒ½è¢«7æ•´é™¤å°±è¡Œäº†ã€‚å› ä¸º26ä¸æ˜¯7çš„å€æ•°ï¼Œä¸èƒ½è¢«7æ•´é™¤ï¼Œæ‰€ä»¥936ä¹Ÿä¸€å®šä¸èƒ½è¢«7æ•´é™¤ã€‚   </p><p>æ‰€ä»¥æˆ‘ä»¬é€šè¿‡æ‹†åˆ†æ³•æ¥è§£é‡Šè¿™ä¸ªé—®é¢˜</p><ul><li>æˆ‘ä»¬éšä¾¿å–ä¸€ä¸ªæ•°289  </li></ul><p>2/17=0â€¦â€¦.2ç›¸å½“äº289-17*0=289  </p><p>28/17=1â€¦â€¦.11ç›¸å½“äº289-17*10=119  </p><p>119ä¸èƒ½è¢«17æ•´é™¤  </p><ul><li>34    </li></ul><p>3%17=0â€¦â€¦.3ç›¸å½“äº34-17*0=34  </p><p>34%17=2â€¦â€¦0ç›¸å½“äº34-17*2=0ï¼  </p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°å­¦çŸ¥è¯† </tag>
            
            <tag> æ•´é™¤ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mapå‡ é“æ°´é¢˜</title>
      <link href="/2018/04/06/map%E5%87%A0%E9%81%93%E6%B0%B4%E9%A2%98/"/>
      <url>/2018/04/06/map%E5%87%A0%E9%81%93%E6%B0%B4%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>uva156 codeforces 959B</p><span id="more"></span><h1 id="uva156"><a href="#uva156" class="headerlink" title="uva156"></a>uva156</h1><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>è¾“å…¥ä¸€äº›å•è¯ï¼Œæ‰¾å‡ºæ‰€æœ‰æ»¡è¶³å¦‚ä¸‹æ¡ä»¶çš„å•è¯ï¼šè¯¥å•è¯ä¸èƒ½é€šè¿‡å­—æ¯é‡æ’ï¼Œå¾—åˆ°è¾“å…¥æ–‡æœ¬ä¸­çš„å¦å¤–ä¸€ä¸ªå•è¯ã€‚åœ¨åˆ¤æ–­æ˜¯å¦æ»¡è¶³æ¡ä»¶æ—¶ï¼Œå­—æ¯ä¸åˆ†å¤§å°å†™ï¼Œä½†åœ¨è¾“å‡ºæ—¶åº”ä¿ç•™è¾“å…¥ä¸­å¤§å°å†™ï¼ŒæŒ‰ç…§å­—å…¸åºè¿›è¡Œæ’åºã€‚</p><h2 id="è¾“å…¥"><a href="#è¾“å…¥" class="headerlink" title="è¾“å…¥"></a>è¾“å…¥</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ladder came tape soon leader acme RIDE lone Dreis peat</span><br><span class="line"> ScAlE orb  eye  Rides dealer  NotE derail LaCeS  drIed</span><br><span class="line">noel dire Disk mace Rob dries</span><br><span class="line">#</span><br></pre></td></tr></table></figure><h2 id="è¾“å‡º"><a href="#è¾“å‡º" class="headerlink" title="è¾“å‡º"></a>è¾“å‡º</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Disk</span><br><span class="line">NotE</span><br><span class="line">derail</span><br><span class="line">drIed</span><br><span class="line">eye</span><br><span class="line">ladder</span><br><span class="line">soon</span><br></pre></td></tr></table></figure><h2 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h2><p>å…¶å®è¿™é“é¢˜æŒºç®€å•çš„ï¼ŒæŠŠæ‰€æœ‰å•è¯å˜æˆå°å†™ï¼Œç„¶åæ’åºï¼Œç„¶åæ”¾åˆ°mapé‡Œé¢ï¼Œæ²¡æœ‰é‡å¤çš„å°±è¾“å‡ºï¼Œä½†æ˜¯è‡ªå·±å†™çš„è¿‡ç¨‹ä¸­è¿˜æ˜¯å‡ºäº†ç‚¹é—®é¢˜ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cctype&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†è¾“è¿›æ¥çš„å­—ç¬¦ä¸²è½¬æ¢æˆå°å†™ï¼Œå¹¶ä¸”æŒ‰ç…§å­—å…¸åºä»å°åˆ°å¤§æ’åº</span></span><br><span class="line"><span class="function">string <span class="title">repr</span><span class="params">(<span class="keyword">const</span> string&amp;s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string ans = s;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; ans.<span class="built_in">length</span>(); i++)</span><br><span class="line">        ans[i] = <span class="built_in">tolower</span>(ans[i]);</span><br><span class="line">    <span class="built_in">sort</span>(ans.<span class="built_in">begin</span>(), ans.<span class="built_in">end</span>());</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string s;   <span class="comment">//æ¥å—è¾“å…¥çš„å•è¯</span></span><br><span class="line">    vector&lt;string&gt; words;   <span class="comment">//å‚¨å­˜è¾“å…¥çš„æ‰€æœ‰å•è¯</span></span><br><span class="line">    map&lt;string, <span class="keyword">int</span>&gt; cnt;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; s)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(s[<span class="number">0</span>] == <span class="string">&#x27;#&#x27;</span>)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        words.<span class="built_in">push_back</span>(s);</span><br><span class="line">        string r = <span class="built_in">repr</span>(s);</span><br><span class="line">        <span class="keyword">if</span>(!cnt.<span class="built_in">count</span>(r))</span><br><span class="line">            cnt[r] = <span class="number">0</span>;   <span class="comment">//å¦‚æœrä¹‹å‰æ²¡æœ‰è¢«æ’å…¥åˆ°ä¸­ï¼Œåˆ™å°†cntçš„ç¬¬äºŒä¸ªå€¼ï¼Œä¹Ÿå°±æ˜¯valueå˜æˆ0</span></span><br><span class="line">        cnt[r]++;   <span class="comment">//è¿™é‡Œä»£è¡¨ç€å­—ç¬¦ä¸²rå‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line">    &#125;</span><br><span class="line">    vector&lt;string&gt; ans; <span class="comment">//ä¿å­˜æ»¡è¶³æ¡ä»¶çš„å•è¯</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; words.<span class="built_in">size</span>(); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(cnt[<span class="built_in">repr</span>(words[i])] == <span class="number">1</span>) <span class="comment">//å¦‚æœå¤„ç†åçš„å•è¯åœ¨cntåªå‡ºç°ä¸€æ¬¡çš„è¯ï¼Œé‚£ä¹ˆå°±è¾“å‡º,æ³¨æ„è¿™é‡Œä¸èƒ½æ”¹wordsé‡Œé¢çš„å†…å®¹ã€‚</span></span><br><span class="line">            ans.<span class="built_in">push_back</span>(words[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(ans.<span class="built_in">begin</span>(), ans.<span class="built_in">end</span>());   <span class="comment">//æŒ‰ç…§å­—å…¸åºè¾“å‡º</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; ans.<span class="built_in">size</span>(); i++)</span><br><span class="line">        cout &lt;&lt; ans[i] &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»çš„æ¥è¯´ï¼Œå·®ä¸å¤šå°±æ˜¯å…ˆæŠŠè¦è¾“å…¥çš„å•è¯ç»è¿‡å¤„ç†åæ”¾åˆ°mapé‡Œé¢ï¼Œç„¶åè®°å½•å‡ºç°çš„æ¬¡æ•°ï¼Œä¸€ç‚¹æ³¨æ„å°±æ˜¯å‡½æ•°ä¸èƒ½ç›´æ¥å¤„ç†å­˜æ”¾æ‰€æœ‰å•è¯çš„æ•°ç»„ï¼Œå› ä¸ºè¦æŒ‰ç…§åŸæ ·è¾“å‡ºï¼Œæ‰€ä»¥åœ¨å¤„ç†å‡½æ•°é‡Œé¢èµ‹å€¼ç»™äº†ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œç„¶åè¿”å›ï¼Œæœ€åå†éå†ä¸€æ¬¡mapï¼ŒæŠŠæ»¡è¶³æ¡ä»¶çš„è¾“å‡ºã€‚å…¶å®è¿™é‡Œå¤„ç†äº†ä¸¤æ¬¡ï¼Œä¸€æ¬¡åœ¨è¾“å…¥åå¤„ç†åæ”¾åˆ°mapï¼Œä¸€æ¬¡æ˜¯æŠŠwordsæ•°ç»„é‡Œé¢çš„å…ƒç´ å¤„ç†åå½“åšmapçš„keyå»åˆ¤æ–­æ”¹keyæœ‰æ²¡æœ‰æ»¡è¶³è¿™ä¸ªæ¡ä»¶ã€‚</p><h1 id="codeforces-959B"><a href="#codeforces-959B" class="headerlink" title="codeforces 959B"></a>codeforces 959B</h1><h2 id="é¢˜ç›®åŸæ–‡ï¼š959B"><a href="#é¢˜ç›®åŸæ–‡ï¼š959B" class="headerlink" title="é¢˜ç›®åŸæ–‡ï¼š959B"></a>é¢˜ç›®åŸæ–‡ï¼š<a href="http://codeforces.com/problemset/problem/959/B">959B</a></h2><p>ä¸€ä¸ªäººç»™å¦ä¸€ä¸ªäººå‘æ¶ˆæ¯ï¼Œå…¶ä¸­å‘çš„æ¶ˆæ¯é‡Œé¢çš„ä¿¡æ¯ï¼Œæ¯ä¸€ä¸ªä¿¡æ¯éƒ½æœ‰å¯¹åº”çš„ä»·å€¼ï¼Œä¹Ÿå°±æ˜¯å‘é€çš„æˆæœ¬ã€‚ è¿™ä¸ªæƒ³å‘é€çš„æˆæœ¬æœ€ä½ã€‚è¾“å‡ºæœ€ä½çš„æˆæœ¬ã€‚ä»£è¡¨è¾“å…¥nä¸ªå·²çŸ¥çš„ä¿¡æ¯ï¼Œä¸‹é¢ä¸€è¡Œå¯¹åº”æ¯ä¸ªä¿¡æ¯çš„ä»·å€¼ã€‚ç„¶åæ˜¯kè¡Œï¼Œæ¯ä¸€è¡Œç¬¬ä¸€ä¸ªå°±ä»£è¡¨æœ‰xä¸ªå¯ä»¥äº’ç›¸æ›¿æ¢çš„ä¿¡æ¯çš„ä¸‹æ ‡ã€‚</p><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/memory_qianxiao/article/details/79828217">csdn</a></p><h2 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p> æ¨¡æ‹Ÿ  è¿™é“é¢˜ä¸¤ç§’  æš´åŠ›å¤§æ³•å¥½ ç”¨mapç”¨string longlong å¯¹åº”å€¼ã€‚è€å¿ƒæ¨¡æ‹Ÿå°±å¥½ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line">map&lt;string,<span class="keyword">int</span>&gt; gr;</span><br><span class="line">string arr[<span class="number">100005</span>];</span><br><span class="line"><span class="keyword">int</span> cost[<span class="number">100005</span>];</span><br><span class="line"><span class="keyword">int</span> gcost[<span class="number">100005</span>];</span><br><span class="line"><span class="keyword">int</span> n,k,m;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; k &gt;&gt; m;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        cin &gt;&gt; arr[i];</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        cin &gt;&gt; cost[i];</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;k;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        gcost[i]=INT_MIN;   </span><br><span class="line">        <span class="keyword">int</span> x;</span><br><span class="line">        cin &gt;&gt; x;</span><br><span class="line">        <span class="keyword">while</span>(x--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> z;</span><br><span class="line">            cin &gt;&gt; z; z--;</span><br><span class="line">            gcost[i]=<span class="built_in">min</span>(gcost[i],cost[z]);</span><br><span class="line">            gr[arr[z]]=i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        string x;</span><br><span class="line">        cin &gt;&gt; x;</span><br><span class="line">        ans+=gcost[gr[x]];</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> map </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>c++/javaæ€ç»´å¯¼å›¾å„ä¸¤å¼ </title>
      <link href="/2018/04/06/c-java%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%E5%90%84%E4%B8%A4%E5%BC%A0/"/>
      <url>/2018/04/06/c-java%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%E5%90%84%E4%B8%A4%E5%BC%A0/</url>
      
        <content type="html"><![CDATA[<p>c++/javaæ€ç»´å¯¼å›¾å„ä¸¤å¼ </p><span id="more"></span><h1 id="c"><a href="#c" class="headerlink" title="c++"></a>c++</h1><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/c%2B%2B%E6%80%9D%E7%BB%B4.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/c%2B%2B%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE.png"></p><h1 id="java"><a href="#java" class="headerlink" title="java"></a>java</h1><p>è¿˜æœ‰ä¸€ä¸ªç½‘å€ï¼Œé‡Œé¢åˆ—å‡ºæ¥äº†æ¯”è¾ƒè¯¦ç»†çš„æ€ç»´å¯¼å›¾</p><p><a href="https://segmentfault.com/a/1190000013700582">JavaçŸ¥è¯†æ±‡æ€»â€”â€”æ€ç»´å¯¼å›¾</a></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/java%E6%80%9D%E7%BB%B4.jpg"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/java%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE.jpg"></p><p>è½¬è½½è‡ªï¼š </p><p><a href="https://blog.csdn.net/jackfrued/article/details/41576837">JavaåŸºç¡€çŸ¥è¯†æ€ç»´å¯¼å›¾</a></p><p><a href="https://www.jianshu.com/p/1480cbf8891e">c++çŸ¥è¯†æ€ç»´å¯¼å›¾</a></p><p><a href="https://www.2cto.com/kf/201712/703613.html">C++åˆå­¦è€…å¿…çœ‹çš„çŸ¥è¯†æ€ç»´å¯¼å›¾</a></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ è·¯çº¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>c++ map</title>
      <link href="/2018/04/03/c-map/"/>
      <url>/2018/04/03/c-map/</url>
      
        <content type="html"><![CDATA[<p> mapå’Œmultimap</p><span id="more"></span><h1 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h1><ol><li>c++æœ‰mapå’Œmultimapä¸¤ç§å®¹å™¨ï¼ŒåŒºåˆ«åœ¨äºmultimapå…è®¸é‡å¤å…ƒç´ ï¼Œmapåˆ™ä¸å…è®¸ï¼Œåœ¨å¤´æ–‡ä»¶ä¸­&lt; map &gt;ä¸­å®šä¹‰</li><li>Mapæ˜¯STLçš„ä¸€ä¸ªå…³è”å®¹å™¨ï¼Œå®ƒæä¾›ä¸€å¯¹ä¸€ï¼ˆå…¶ä¸­ç¬¬ä¸€ä¸ªå¯ä»¥ç§°ä¸ºå…³é”®å­—(key)ï¼Œæ¯ä¸ªå…³é”®å­—åªèƒ½åœ¨mapä¸­å‡ºç°ä¸€æ¬¡ï¼Œç¬¬äºŒä¸ªå¯èƒ½ç§°ä¸ºè¯¥å…³é”®å­—çš„å€¼(value)ï¼‰çš„æ•°æ®å¤„ç†èƒ½åŠ›ï¼Œç”±äºè¿™ä¸ªç‰¹æ€§ï¼Œå®ƒå®Œæˆæœ‰å¯èƒ½åœ¨æˆ‘ä»¬å¤„ç†ä¸€å¯¹ä¸€æ•°æ®çš„æ—¶å€™ï¼Œåœ¨ç¼–ç¨‹ä¸Šæä¾›å¿«é€Ÿé€šé“ã€‚è¿™é‡Œè¯´ä¸‹mapå†…éƒ¨æ•°æ®çš„ç»„ç»‡ï¼Œmapå†…éƒ¨è‡ªå»ºä¸€é¢—çº¢é»‘æ ‘(ä¸€ç§éä¸¥æ ¼æ„ä¹‰ä¸Šçš„å¹³è¡¡äºŒå‰æ ‘)ï¼Œè¿™é¢—æ ‘å…·æœ‰å¯¹æ•°æ®è‡ªåŠ¨æ’åºçš„åŠŸèƒ½ï¼Œæ‰€ä»¥åœ¨mapå†…éƒ¨æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯æœ‰åºçš„</li></ol><p>&lt;/div&gt;</p><p><div align="center"><br><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/map-example.png"></div></p><ol><li><p>å®ƒçš„ç‰¹ç‚¹æ˜¯å¢åŠ å’Œåˆ é™¤èŠ‚ç‚¹å¯¹è¿­ä»£å™¨çš„å½±å“å¾ˆå°ï¼Œé™¤äº†é‚£ä¸ªæ“ä½œèŠ‚ç‚¹ï¼Œå¯¹å…¶ä»–çš„èŠ‚ç‚¹éƒ½æ²¡æœ‰ä»€ä¹ˆå½±å“ã€‚å¯¹äºè¿­ä»£å™¨æ¥è¯´ï¼Œå¯ä»¥ä¿®æ”¹å®å€¼ï¼Œè€Œä¸èƒ½ä¿®æ”¹keyã€‚</p></li><li><p>è‡ªåŠ¨å»ºç«‹Key ï¼ valueçš„å¯¹åº”ã€‚key å’Œ valueå¯ä»¥æ˜¯ä»»æ„ä½ éœ€è¦çš„ç±»å‹ã€‚  <strong>æ ¹æ®keyå€¼å¿«é€ŸæŸ¥æ‰¾è®°å½•ï¼ŒæŸ¥æ‰¾çš„å¤æ‚åº¦åŸºæœ¬æ˜¯Log</strong>(N)ï¼Œå¦‚æœæœ‰1000ä¸ªè®°å½•ï¼Œæœ€å¤šæŸ¥æ‰¾10æ¬¡ï¼Œ1,000,000ä¸ªè®°å½•ï¼Œæœ€å¤šæŸ¥æ‰¾20æ¬¡ã€‚</p></li><li><p>ä»€ä¹ˆæ˜¯ä¸€å¯¹ä¸€çš„æ•°æ®æ˜ å°„ã€‚æ¯”å¦‚ä¸€ä¸ªç­çº§ä¸­ï¼Œæ¯ä¸ªå­¦ç”Ÿçš„å­¦å·è·Ÿä»–çš„å§“åå°±å­˜åœ¨ç€ä¸€ä¸€æ˜ å°„çš„å…³ç³»ï¼Œè¿™ä¸ªæ¨¡å‹ç”¨mapå¯èƒ½è½»æ˜“æè¿°ï¼Œå¾ˆæ˜æ˜¾å­¦å·ç”¨intæè¿°ï¼Œå§“åç”¨å­—ç¬¦ä¸²æè¿°,ä¸‹é¢ç»™å‡ºmapæè¿°ä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">map&lt;<span class="keyword">int</span>, string&gt; mapStudent;</span><br></pre></td></tr></table></figure></li></ol><h1 id="å£°æ˜åˆå§‹åŒ–"><a href="#å£°æ˜åˆå§‹åŒ–" class="headerlink" title="å£°æ˜åˆå§‹åŒ–"></a>å£°æ˜åˆå§‹åŒ–</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¤´æ–‡ä»¶</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line">map&lt;<span class="keyword">int</span>, string&gt; ID_Name;</span><br><span class="line">map&lt;<span class="keyword">int</span>, string, op&gt;; <span class="comment">//ä»¥opä¸ºæ’åºå‡†åˆ™ã€‚</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨&#123;&#125;èµ‹å€¼æ˜¯ä»c++11å¼€å§‹çš„ï¼Œå› æ­¤ç¼–è¯‘å™¨ç‰ˆæœ¬è¿‡ä½æ—¶ä¼šæŠ¥é”™ï¼Œå¦‚visual studio 2012</span></span><br><span class="line">map&lt;<span class="keyword">int</span>, string&gt; ID_Name = &#123;</span><br><span class="line">                &#123; <span class="number">2015</span>, <span class="string">&quot;Jim&quot;</span> &#125;,</span><br><span class="line">                &#123; <span class="number">2016</span>, <span class="string">&quot;Tom&quot;</span> &#125;,</span><br><span class="line">                &#123; <span class="number">2017</span>, <span class="string">&quot;Bob&quot;</span> &#125; &#125;;</span><br></pre></td></tr></table></figure><h1 id="æ’å…¥æ“ä½œ"><a href="#æ’å…¥æ“ä½œ" class="headerlink" title="æ’å…¥æ“ä½œ"></a>æ’å…¥æ“ä½œ</h1><h2 id="ä½¿ç”¨æ•°ç»„æ–¹å¼æ’å…¥"><a href="#ä½¿ç”¨æ•°ç»„æ–¹å¼æ’å…¥" class="headerlink" title="ä½¿ç”¨æ•°ç»„æ–¹å¼æ’å…¥"></a>ä½¿ç”¨æ•°ç»„æ–¹å¼æ’å…¥</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    map&lt;<span class="keyword">int</span>, string&gt; mymap;</span><br><span class="line">    mymap[<span class="number">10</span>] = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    <span class="comment">//å¦‚æœå·²ç»å­˜åœ¨é”®å€¼10ï¼Œåˆ™ä¼šä½œèµ‹å€¼ä¿®æ”¹æ“ä½œï¼Œå¦‚æœæ²¡æœ‰åˆ™æ’å…¥</span></span><br><span class="line">    cout &lt;&lt; mymap.<span class="built_in">begin</span>()-&gt;first &lt;&lt; mymap.<span class="built_in">begin</span>()-&gt;second;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç¨‹åºè¾“å‡ºï¼š10hello</span></span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨insertè¿›è¡Œå•ä¸ªå’Œå¤šä¸ªæ’å…¥"><a href="#ä½¿ç”¨insertè¿›è¡Œå•ä¸ªå’Œå¤šä¸ªæ’å…¥" class="headerlink" title="ä½¿ç”¨insertè¿›è¡Œå•ä¸ªå’Œå¤šä¸ªæ’å…¥"></a>ä½¿ç”¨insertè¿›è¡Œå•ä¸ªå’Œå¤šä¸ªæ’å…¥</h2><h3 id="æ’å…¥å•ä¸ªé”®å€¼å¯¹"><a href="#æ’å…¥å•ä¸ªé”®å€¼å¯¹" class="headerlink" title="æ’å…¥å•ä¸ªé”®å€¼å¯¹"></a>æ’å…¥å•ä¸ªé”®å€¼å¯¹</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ’å…¥å•ä¸ªé”®å€¼å¯¹ï¼Œå¹¶è¿”å›æ’å…¥ä½ç½®å’ŒæˆåŠŸæ ‡å¿—ï¼Œæ’å…¥ä½ç½®å·²ç»å­˜åœ¨å€¼æ—¶ï¼Œæ’å…¥å¤±è´¥</span></span><br><span class="line"><span class="function">pair&lt;iterator,<span class="keyword">bool</span>&gt; <span class="title">insert</span> <span class="params">(<span class="keyword">const</span> value_type&amp; val)</span></span>;</span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªç®€å•çš„æ —å­ï¼Œä½¿ç”¨æ’å…¥åŠŸèƒ½:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>); <span class="comment">//å…³é—­åŒæ­¥ï¼ŒåŠ å¿«é€Ÿåº¦</span></span><br><span class="line">    </span><br><span class="line">    map&lt;string, <span class="keyword">int</span>&gt;mymap;</span><br><span class="line">    mymap.<span class="built_in">insert</span>(pair&lt;string, <span class="keyword">int</span>&gt;(<span class="string">&quot;hello world&quot;</span>, <span class="number">2010</span>));</span><br><span class="line">    <span class="comment">//mymap.insert(make_pair(&quot;hello world&quot;, 2010));</span></span><br><span class="line">    <span class="comment">//æ’å…¥å•ä¸ªé”®å€¼å¯¹</span></span><br><span class="line">    <span class="keyword">auto</span> iter = mymap.<span class="built_in">begin</span>();</span><br><span class="line">    <span class="keyword">while</span>(iter != mymap.<span class="built_in">end</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; iter-&gt;first &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        cout &lt;&lt; iter-&gt;second;</span><br><span class="line">        iter++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç¨‹åºè¾“å‡ºï¼šhello world 2010</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è¿”å›å€¼çš„åˆ¤æ–­</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    map&lt;string, <span class="keyword">int</span>&gt;mymap;</span><br><span class="line">    mymap.<span class="built_in">insert</span>(pair&lt;string, <span class="keyword">int</span>&gt;(<span class="string">&quot;hello world&quot;</span>,  <span class="number">2010</span>));</span><br><span class="line"></span><br><span class="line">    pair&lt;map&lt;string, <span class="keyword">int</span>&gt;::iterator, <span class="keyword">bool</span>&gt; ret;</span><br><span class="line">    ret = mymap.<span class="built_in">insert</span>(pair&lt;string, <span class="keyword">int</span>&gt;(<span class="string">&quot;hello&quot;</span>, <span class="number">500</span>));</span><br><span class="line">    <span class="comment">//auto ret = mymap.insert(pair&lt;string, int&gt;(&quot;hello&quot;, 500));</span></span><br><span class="line">    <span class="keyword">if</span> (ret.second == <span class="literal">false</span>)</span><br><span class="line">         cout &lt;&lt; <span class="string">&quot;already existed&quot;</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">         cout &lt;&lt; ret.first-&gt;first &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">         cout &lt;&lt; ret.first-&gt;second ;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç¨‹åºè¾“å‡ºï¼šhello 500</span></span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯æ’å…¥ç›¸åŒçš„å†…å®¹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    map&lt;string, <span class="keyword">int</span>&gt;mymap;</span><br><span class="line">    mymap.<span class="built_in">insert</span>(pair&lt;string, <span class="keyword">int</span>&gt;(<span class="string">&quot;hello world&quot;</span>,  <span class="number">2010</span>));</span><br><span class="line"></span><br><span class="line">    pair&lt;map&lt;string, <span class="keyword">int</span>&gt;::iterator, <span class="keyword">bool</span>&gt; ret;</span><br><span class="line">    ret = mymap.<span class="built_in">insert</span>(pair&lt;string, <span class="keyword">int</span>&gt;(<span class="string">&quot;hello world&quot;</span>, <span class="number">500</span>));</span><br><span class="line">    <span class="keyword">if</span> (ret.second == <span class="literal">false</span>)</span><br><span class="line">         cout &lt;&lt; <span class="string">&quot;already existed&quot;</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">         cout &lt;&lt; ret.first-&gt;first &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">         cout &lt;&lt; ret.first-&gt;second ;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç¨‹åºè¾“å‡ºï¼šalready existed</span></span><br></pre></td></tr></table></figure><p>å¯è§ï¼Œkeyæˆ–valueä¸mapé‡Œé¢å·²ç»å­˜åœ¨çš„å†…å®¹ç›¸åŒçš„è¯ï¼Œå°±ä¼šä¸èƒ½æ’å…¥</p><h3 id="åœ¨æŒ‡å®šä½ç½®æ’å…¥"><a href="#åœ¨æŒ‡å®šä½ç½®æ’å…¥" class="headerlink" title="åœ¨æŒ‡å®šä½ç½®æ’å…¥"></a>åœ¨æŒ‡å®šä½ç½®æ’å…¥</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åœ¨æŒ‡å®šä½ç½®æ’å…¥ï¼Œåœ¨ä¸åŒä½ç½®æ’å…¥æ•ˆç‡æ˜¯ä¸ä¸€æ ·çš„ï¼Œå› ä¸ºæ¶‰åŠåˆ°é‡æ’</span></span><br><span class="line"><span class="function">iterator <span class="title">insert</span> <span class="params">(const_iterator position, <span class="keyword">const</span> value_type&amp; val)</span></span>;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    map&lt;string, <span class="keyword">int</span>&gt;mymap;</span><br><span class="line">    mymap.<span class="built_in">insert</span>(pair&lt;string, <span class="keyword">int</span>&gt;(<span class="string">&quot;hello world&quot;</span>, <span class="number">2010</span>));</span><br><span class="line"></span><br><span class="line">    map&lt;string, <span class="keyword">int</span>&gt;::iterator it = mymap.<span class="built_in">begin</span>() ;</span><br><span class="line">     <span class="comment">//auto it = mymap.begin();</span></span><br><span class="line">    mymap.<span class="built_in">insert</span>(it, pair&lt;string, <span class="keyword">int</span>&gt;(<span class="string">&quot;good morning, &quot;</span>, <span class="number">300</span>));</span><br><span class="line"><span class="comment">//åœ¨å¼€å§‹ä½ç½®æ’å…¥</span></span><br><span class="line">    <span class="keyword">auto</span> iter = mymap.<span class="built_in">begin</span>();</span><br><span class="line">    <span class="keyword">while</span>(iter != mymap.<span class="built_in">end</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; iter-&gt;first &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        <span class="comment">//cout &lt;&lt; iter-&gt;second;</span></span><br><span class="line">        iter++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç¨‹åºè¾“å‡ºï¼šgood morning, hello world</span></span><br></pre></td></tr></table></figure><h3 id="æ’å…¥å¤šä¸ª"><a href="#æ’å…¥å¤šä¸ª" class="headerlink" title="æ’å…¥å¤šä¸ª"></a>æ’å…¥å¤šä¸ª</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span> <span class="params">(InputIterator first, InputIterator last)</span></span>;</span><br></pre></td></tr></table></figure> <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::map&lt;<span class="keyword">char</span>, <span class="keyword">int</span>&gt; mymap;</span><br><span class="line"></span><br><span class="line">    mymap.<span class="built_in">insert</span>(pair&lt;<span class="keyword">char</span>, <span class="keyword">int</span>&gt;(<span class="string">&#x27;a&#x27;</span>, <span class="number">100</span>));</span><br><span class="line">    mymap.<span class="built_in">insert</span>(pair&lt;<span class="keyword">char</span>, <span class="keyword">int</span>&gt;(<span class="string">&#x27;z&#x27;</span>, <span class="number">200</span>));</span><br><span class="line">    mymap.<span class="built_in">insert</span>(pair&lt;<span class="keyword">char</span>, <span class="keyword">int</span>&gt;(<span class="string">&#x27;b&#x27;</span>, <span class="number">300</span>));</span><br><span class="line">    mymap.<span class="built_in">insert</span>(pair&lt;<span class="keyword">char</span>, <span class="keyword">int</span>&gt;(<span class="string">&#x27;c&#x27;</span>, <span class="number">400</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//èŒƒå›´å¤šå€¼æ’å…¥</span></span><br><span class="line">    std::map&lt;<span class="keyword">char</span>, <span class="keyword">int</span>&gt; anothermap;</span><br><span class="line">    anothermap.<span class="built_in">insert</span>(mymap.<span class="built_in">begin</span>(), mymap.<span class="built_in">find</span>(<span class="string">&#x27;z&#x27;</span>));</span><br><span class="line"></span><br><span class="line">   <span class="keyword">auto</span> iter = anothermap.<span class="built_in">begin</span>();</span><br><span class="line">    <span class="keyword">while</span>(iter != anothermap.<span class="built_in">end</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; iter-&gt;first;</span><br><span class="line">        iter++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç¨‹åºè¾“å‡ºï¼šabc</span></span><br><span class="line"><span class="comment">//è‡ªå·±çš„å€¼æ’ç»™è‡ªå·±æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºmapä¸èƒ½å­˜åœ¨ç›¸åŒå…ƒç´ </span></span><br></pre></td></tr></table></figure><h3 id="åˆ—è¡¨æ’å…¥"><a href="#åˆ—è¡¨æ’å…¥" class="headerlink" title="åˆ—è¡¨æ’å…¥"></a>åˆ—è¡¨æ’å…¥</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::map&lt;<span class="keyword">char</span>, <span class="keyword">int</span>&gt; mymap;</span><br><span class="line">    mymap.<span class="built_in">insert</span>(&#123;&#123;<span class="string">&#x27;a&#x27;</span>, <span class="number">100</span>&#125;, &#123;<span class="string">&#x27;b&#x27;</span>, <span class="number">200</span>&#125;&#125;);</span><br><span class="line">    <span class="keyword">auto</span> iter = mymap.<span class="built_in">begin</span>();</span><br><span class="line">    <span class="keyword">while</span>(iter != mymap.<span class="built_in">end</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; iter-&gt;first &lt;&lt; iter-&gt;second &lt;&lt; endl;</span><br><span class="line">        iter++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*ç¨‹åºè¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment">a100</span></span><br><span class="line"><span class="comment">b200</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>å…³äºæ›´å¤šinsertä¿¡æ¯ä»¥åŠc++17å®šä¹‰çš„insertå‡½æ•°å¯ä»¥å‚è€ƒ:</p><p><a href="http://zh.cppreference.com/w/cpp/container/map/insert">std::map::insert</a></p><h1 id="å–å€¼"><a href="#å–å€¼" class="headerlink" title="å–å€¼"></a>å–å€¼</h1><p>mapä¸­å…ƒç´ å–å€¼ä¸»è¦æœ‰atå’Œ[ ]ä¸¤ç§æ“ä½œï¼Œatä¼šä½œä¸‹æ ‡æ£€æŸ¥ï¼Œè€Œ[]ä¸ä¼šã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    map&lt;<span class="keyword">int</span>, string&gt; mymap;</span><br><span class="line">    mymap[<span class="number">10</span>] = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    <span class="comment">//ä½¿ç”¨atä¼šè¿›è¡Œå…³é”®å­—æ£€æŸ¥ï¼Œå› æ­¤ä¸‹é¢è¯­å¥ä¼šæŠ¥é”™</span></span><br><span class="line">    mymap.<span class="built_in">at</span>(<span class="number">2016</span>) = <span class="string">&quot;world&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//mymapä¸­æ²¡æœ‰å…³é”®å­—2017ï¼Œä½¿ç”¨[]å–å€¼ä¼šå¯¼è‡´æ’å…¥</span></span><br><span class="line"><span class="comment">//å› æ­¤ï¼Œä¸‹é¢è¯­å¥ä¸ä¼šæŠ¥é”™ï¼Œä½†æ‰“å°ç»“æœä¸ºç©º</span></span><br><span class="line">    cout &lt;&lt; mymap[<span class="number">2017</span>];</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å–keyå’Œvalue</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">....</span><br><span class="line">map&lt;string, <span class="keyword">int</span>&gt;mymap;</span><br><span class="line">mymap.<span class="built_in">insert</span>(pair&lt;string, <span class="keyword">int</span>&gt;(<span class="string">&quot;hello world&quot;</span>, <span class="number">2010</span>));</span><br><span class="line"><span class="keyword">auto</span> pos = mymap,<span class="built_in">begin</span>();</span><br><span class="line">cout &lt;&lt; pos-&gt;first; <span class="comment">//å–å‡ºkey</span></span><br><span class="line">cout &lt;&lt; pos-&gt;second; <span class="comment">//å–å‡ºvalue</span></span><br><span class="line"><span class="comment">//pos-&gt;firstæ˜¯(*pos).firstçš„ç®€å†™å½¢å¼</span></span><br><span class="line"></span><br><span class="line">pos-&gt;first = <span class="string">&quot;hello&quot;</span>; <span class="comment">//å¦‚æœå°è¯•æ”¹å˜å…ƒç´ çš„keyï¼Œä¼šå¼•å‘é”™è¯¯</span></span><br><span class="line">pos-&gt;second = <span class="number">13</span>; <span class="comment">//æ”¹å˜valueåˆ™æ²¡æœ‰é—®é¢˜</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šmapæä¾›äº†ä¸€ç§éå¸¸æ–¹ä¾¿çš„æ–¹æ³•è®©ä½ æ”¹å˜å…ƒç´ çš„key</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//insert new element with value of old element</span></span><br><span class="line">coll[<span class="string">&quot;new_key&quot;</span>] = coll[<span class="string">&quot;old_key&quot;</span>];</span><br><span class="line"><span class="comment">// remove old element</span></span><br><span class="line">coll.<span class="built_in">erase</span>(<span class="string">&quot;old_key&quot;</span>);</span><br></pre></td></tr></table></figure><h1 id="å®¹é‡æŸ¥è¯¢"><a href="#å®¹é‡æŸ¥è¯¢" class="headerlink" title="å®¹é‡æŸ¥è¯¢"></a>å®¹é‡æŸ¥è¯¢</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŸ¥è¯¢mapæ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">empty</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢mapä¸­é”®å€¼å¯¹çš„æ•°é‡</span></span><br><span class="line"><span class="function"><span class="keyword">size_t</span> <span class="title">size</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢mapæ‰€èƒ½åŒ…å«çš„æœ€å¤§é”®å€¼å¯¹æ•°é‡ï¼Œå’Œç³»ç»Ÿå’Œåº”ç”¨åº“æœ‰å…³ã€‚</span></span><br><span class="line"><span class="comment">// æ­¤å¤–ï¼Œè¿™å¹¶ä¸æ„å‘³ç€ç”¨æˆ·ä¸€å®šå¯ä»¥å­˜è¿™ä¹ˆå¤šï¼Œå¾ˆå¯èƒ½è¿˜æ²¡è¾¾åˆ°å°±å·²ç»å¼€è¾Ÿå†…å­˜å¤±è´¥äº†</span></span><br><span class="line"><span class="function"><span class="keyword">size_t</span> <span class="title">max_size</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢å…³é”®å­—ä¸ºkeyçš„å…ƒç´ çš„ä¸ªæ•°ï¼Œåœ¨mapé‡Œç»“æœé0å³1</span></span><br><span class="line"><span class="function"><span class="keyword">size_t</span> <span class="title">count</span><span class="params">( <span class="keyword">const</span> Key&amp; key )</span> <span class="keyword">const</span></span>; </span><br></pre></td></tr></table></figure><h1 id="è¿­ä»£å™¨"><a href="#è¿­ä»£å™¨" class="headerlink" title="è¿­ä»£å™¨"></a>è¿­ä»£å™¨</h1><p>å…±æœ‰å…«ä¸ªè·å–è¿­ä»£å™¨çš„å‡½æ•°ï¼š<strong> begin, end, rbegin,rend\</strong> ä»¥åŠå¯¹åº”çš„ <strong> cbegin, cend, crbegin,crend\</strong>ã€‚</p><p>äºŒè€…çš„åŒºåˆ«åœ¨äºï¼Œåè€…ä¸€å®šè¿”å› const_iteratorï¼Œè€Œå‰è€…åˆ™æ ¹æ®mapçš„ç±»å‹è¿”å›iterator æˆ–è€… const_iteratorã€‚constæƒ…å†µä¸‹ï¼Œä¸å…è®¸å¯¹å€¼è¿›è¡Œä¿®æ”¹ã€‚å¦‚ä¸‹é¢ä»£ç æ‰€ç¤ºï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">map&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;::iterator it;</span><br><span class="line">map&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; mmap;</span><br><span class="line"><span class="keyword">const</span> map&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; const_mmap;</span><br><span class="line"></span><br><span class="line">it = mmap.<span class="built_in">begin</span>(); <span class="comment">//iterator</span></span><br><span class="line">mmap.<span class="built_in">cbegin</span>(); <span class="comment">//const_iterator</span></span><br><span class="line"></span><br><span class="line">const_mmap.<span class="built_in">begin</span>(); <span class="comment">//const_iterator</span></span><br><span class="line">const_mmap.<span class="built_in">cbegin</span>(); <span class="comment">//const_iterator</span></span><br></pre></td></tr></table></figure><p>è¿”å›çš„è¿­ä»£å™¨å¯ä»¥è¿›è¡ŒåŠ å‡æ“ä½œï¼Œæ­¤å¤–ï¼Œå¦‚æœmapä¸ºç©ºï¼Œåˆ™ begin = endã€‚</p><h1 id="åˆ é™¤äº¤æ¢"><a href="#åˆ é™¤äº¤æ¢" class="headerlink" title="åˆ é™¤äº¤æ¢"></a>åˆ é™¤äº¤æ¢</h1><h2 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h2><h4 id="åˆ é™¤ä¸€å®šèŒƒå›´å†…çš„å…ƒç´ "><a href="#åˆ é™¤ä¸€å®šèŒƒå›´å†…çš„å…ƒç´ " class="headerlink" title="åˆ é™¤ä¸€å®šèŒƒå›´å†…çš„å…ƒç´ "></a>åˆ é™¤ä¸€å®šèŒƒå›´å†…çš„å…ƒç´ </h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ é™¤ä¸€å®šèŒƒå›´å†…çš„å…ƒç´ ï¼Œå¹¶è¿”å›ä¸€ä¸ªæŒ‡å‘ä¸‹ä¸€å…ƒç´ çš„è¿­ä»£å™¨</span></span><br><span class="line"><span class="function">iterator <span class="title">erase</span><span class="params">( const_iterator first, const_iterator last )</span></span>;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    map&lt;<span class="keyword">int</span>, string&gt; mymap;</span><br><span class="line">    mymap.<span class="built_in">insert</span>(pair&lt;<span class="keyword">int</span>, string&gt;(<span class="number">1</span>,<span class="string">&quot;asdf&quot;</span>));</span><br><span class="line">    mymap.<span class="built_in">insert</span>(pair&lt;<span class="keyword">int</span>, string&gt;(<span class="number">2</span>,<span class="string">&quot;qwer&quot;</span>));</span><br><span class="line">    mymap.<span class="built_in">insert</span>(pair&lt;<span class="keyword">int</span>, string&gt;(<span class="number">3</span>,<span class="string">&quot;zxcv&quot;</span>));</span><br><span class="line">    mymap.<span class="built_in">erase</span>(mymap.<span class="built_in">begin</span>(), mymap.<span class="built_in">find</span>(<span class="number">2</span>));</span><br><span class="line">    <span class="keyword">auto</span> iter = mymap.<span class="built_in">begin</span>();</span><br><span class="line">    <span class="keyword">while</span>(iter != mymap.<span class="built_in">end</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; iter-&gt;first &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; iter-&gt;second &lt;&lt; endl;</span><br><span class="line">        iter++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¨‹åºè¾“å‡ºï¼š</span></span><br><span class="line"><span class="number">2</span> qwer</span><br><span class="line"><span class="number">3</span> zxcv</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤è¿­ä»£å™¨æŒ‡å‘ä½ç½®çš„é”®å€¼å¯¹"><a href="#åˆ é™¤è¿­ä»£å™¨æŒ‡å‘ä½ç½®çš„é”®å€¼å¯¹" class="headerlink" title="åˆ é™¤è¿­ä»£å™¨æŒ‡å‘ä½ç½®çš„é”®å€¼å¯¹"></a>åˆ é™¤è¿­ä»£å™¨æŒ‡å‘ä½ç½®çš„é”®å€¼å¯¹</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ é™¤è¿­ä»£å™¨æŒ‡å‘ä½ç½®çš„é”®å€¼å¯¹ï¼Œå¹¶è¿”å›ä¸€ä¸ªæŒ‡å‘ä¸‹ä¸€å…ƒç´ çš„è¿­ä»£å™¨</span></span><br><span class="line"><span class="function">iterator <span class="title">erase</span><span class="params">( iterator pos )</span></span></span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    map&lt;<span class="keyword">int</span>, string&gt; mymap;</span><br><span class="line">    mymap.<span class="built_in">insert</span>(pair&lt;<span class="keyword">int</span>, string&gt;(<span class="number">1</span>,<span class="string">&quot;asdf&quot;</span>));</span><br><span class="line">    mymap.<span class="built_in">insert</span>(pair&lt;<span class="keyword">int</span>, string&gt;(<span class="number">2</span>,<span class="string">&quot;qwer&quot;</span>));</span><br><span class="line">    mymap.<span class="built_in">insert</span>(pair&lt;<span class="keyword">int</span>, string&gt;(<span class="number">3</span>,<span class="string">&quot;zxcv&quot;</span>));</span><br><span class="line">    mymap.<span class="built_in">erase</span>(mymap.<span class="built_in">find</span>(<span class="number">2</span>));</span><br><span class="line">    <span class="keyword">auto</span> iter = mymap.<span class="built_in">begin</span>();</span><br><span class="line">    <span class="keyword">while</span>(iter != mymap.<span class="built_in">end</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; iter-&gt;first &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; iter-&gt;second &lt;&lt; endl;</span><br><span class="line">        iter++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç¨‹åºè¾“å‡ºï¼š</span></span><br><span class="line"><span class="number">1</span> asdf</span><br><span class="line"><span class="number">3</span> zxcv</span><br></pre></td></tr></table></figure><h3 id="æ ¹æ®Keyæ¥è¿›è¡Œåˆ é™¤"><a href="#æ ¹æ®Keyæ¥è¿›è¡Œåˆ é™¤" class="headerlink" title="æ ¹æ®Keyæ¥è¿›è¡Œåˆ é™¤"></a>æ ¹æ®Keyæ¥è¿›è¡Œåˆ é™¤</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®Keyæ¥è¿›è¡Œåˆ é™¤ï¼Œ è¿”å›åˆ é™¤çš„å…ƒç´ æ•°é‡ï¼Œåœ¨mapé‡Œç»“æœé0å³1</span></span><br><span class="line"><span class="function"><span class="keyword">size_t</span> <span class="title">erase</span><span class="params">( <span class="keyword">const</span> key_type&amp; key )</span></span>;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    map&lt;<span class="keyword">int</span>, string&gt;mymap;</span><br><span class="line">    mymap.<span class="built_in">insert</span>(pair&lt;<span class="keyword">int</span>, string&gt;(<span class="number">1</span>,<span class="string">&quot;hello&quot;</span>));</span><br><span class="line">    mymap.<span class="built_in">insert</span>(pair&lt;<span class="keyword">int</span>, string&gt;(<span class="number">2</span>,<span class="string">&quot;wolrd&quot;</span>));</span><br><span class="line">    mymap.<span class="built_in">erase</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">auto</span> iter = mymap.<span class="built_in">begin</span>();</span><br><span class="line">    <span class="keyword">while</span>(iter != mymap.<span class="built_in">end</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; iter-&gt;first &lt;&lt; iter-&gt;second &lt;&lt; endl;</span><br><span class="line">        iter++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç¨‹åºè¾“å‡ºï¼š2world</span></span><br></pre></td></tr></table></figure><h3 id="æ¸…ç©ºmap"><a href="#æ¸…ç©ºmap" class="headerlink" title="æ¸…ç©ºmap"></a>æ¸…ç©ºmap</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¸…ç©ºmapï¼Œæ¸…ç©ºåçš„sizeä¸º0</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure><h2 id="äº¤æ¢"><a href="#äº¤æ¢" class="headerlink" title="äº¤æ¢"></a>äº¤æ¢</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°±æ˜¯ä¸¤ä¸ªmapçš„å†…å®¹äº’æ¢</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">( map&amp; other )</span></span>;</span><br></pre></td></tr></table></figure><h1 id="æŸ¥æ‰¾"><a href="#æŸ¥æ‰¾" class="headerlink" title="æŸ¥æ‰¾"></a>æŸ¥æ‰¾</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…³é”®å­—(key)æŸ¥è¯¢ï¼Œæ‰¾åˆ°åˆ™è¿”å›æŒ‡å‘è¯¥å…³é”®å­—çš„è¿­ä»£å™¨ï¼Œå¦åˆ™è¿”å›æŒ‡å‘endçš„è¿­ä»£å™¨</span></span><br><span class="line"><span class="comment">// æ ¹æ®mapçš„ç±»å‹ï¼Œè¿”å›çš„è¿­ä»£å™¨ä¸º iterator æˆ–è€… const_iterator</span></span><br><span class="line"><span class="function">iterator <span class="title">find</span> <span class="params">(<span class="keyword">const</span> key_type&amp; k)</span></span>;</span><br><span class="line"><span class="function">const_iterator <span class="title">find</span> <span class="params">(<span class="keyword">const</span> key_type&amp; k)</span> <span class="keyword">const</span></span>;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    map&lt;<span class="keyword">char</span>,<span class="keyword">int</span>&gt; mymap;</span><br><span class="line">    mymap[<span class="string">&#x27;a&#x27;</span>]=<span class="number">50</span>;</span><br><span class="line">    mymap[<span class="string">&#x27;b&#x27;</span>]=<span class="number">100</span>;</span><br><span class="line">    mymap[<span class="string">&#x27;c&#x27;</span>]=<span class="number">150</span>;</span><br><span class="line">    mymap[<span class="string">&#x27;d&#x27;</span>]=<span class="number">200</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> it = mymap.<span class="built_in">find</span>(<span class="string">&#x27;b&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span>(it != mymap.<span class="built_in">end</span>())</span><br><span class="line">        mymap.<span class="built_in">erase</span> (it); <span class="comment">//bè¢«æˆåŠŸåˆ é™¤</span></span><br><span class="line">    <span class="keyword">auto</span> iter = mymap.<span class="built_in">begin</span>();</span><br><span class="line">    <span class="keyword">while</span>(iter != mymap.<span class="built_in">end</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; iter-&gt;first &lt;&lt; iter-&gt;second &lt;&lt; endl;</span><br><span class="line">        iter++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç¨‹åºè¾“å‡ºï¼š</span></span><br><span class="line">a50</span><br><span class="line">c150</span><br><span class="line">d200</span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š</p><p><a href="https://blog.csdn.net/shuzfan/article/details/53115922">c++å¸¸è§ç”¨æ³•è¯´æ˜</a></p><h1 id="multimapçš„ä¸€äº›æ³¨æ„äº‹é¡¹"><a href="#multimapçš„ä¸€äº›æ³¨æ„äº‹é¡¹" class="headerlink" title="multimapçš„ä¸€äº›æ³¨æ„äº‹é¡¹"></a>multimapçš„ä¸€äº›æ³¨æ„äº‹é¡¹</h1><h2 id="ç”¨eraseåˆ é™¤é‡å¤å…ƒç´ çš„ç¬¬ä¸€ä¸ª"><a href="#ç”¨eraseåˆ é™¤é‡å¤å…ƒç´ çš„ç¬¬ä¸€ä¸ª" class="headerlink" title="ç”¨eraseåˆ é™¤é‡å¤å…ƒç´ çš„ç¬¬ä¸€ä¸ª"></a>ç”¨eraseåˆ é™¤é‡å¤å…ƒç´ çš„ç¬¬ä¸€ä¸ª</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    multimap&lt;<span class="keyword">int</span>, <span class="keyword">char</span>&gt;mymap;</span><br><span class="line">    mymap.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">1</span>,<span class="string">&#x27;a&#x27;</span>));</span><br><span class="line">    mymap.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">2</span>,<span class="string">&#x27;b&#x27;</span>));</span><br><span class="line">    mymap.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">3</span>,<span class="string">&#x27;c&#x27;</span>));</span><br><span class="line">    mymap.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">2</span>,<span class="string">&#x27;a&#x27;</span>));</span><br><span class="line">    mymap.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">1</span>,<span class="string">&#x27;a&#x27;</span>));</span><br><span class="line">    <span class="comment">/*mymap.erase(2);error</span></span><br><span class="line"><span class="comment">    ç¨‹åºè¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment">    1a</span></span><br><span class="line"><span class="comment">    1a</span></span><br><span class="line"><span class="comment">    2c</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    mymap.<span class="built_in">erase</span>(mymap.<span class="built_in">find</span>(<span class="number">2</span>));</span><br><span class="line">    <span class="keyword">auto</span> it = mymap.<span class="built_in">begin</span>();</span><br><span class="line">    <span class="keyword">while</span>(it != mymap.<span class="built_in">end</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; it-&gt;first &lt;&lt; it-&gt;second &lt;&lt; endl;</span><br><span class="line">        it++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*ç¨‹åºè¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment">1a</span></span><br><span class="line"><span class="comment">1a</span></span><br><span class="line"><span class="comment">2a</span></span><br><span class="line"><span class="comment">3c</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="ç§»é™¤æ‰€æœ‰ä¸xç›¸ç­‰çš„å…ƒç´ "><a href="#ç§»é™¤æ‰€æœ‰ä¸xç›¸ç­‰çš„å…ƒç´ " class="headerlink" title="ç§»é™¤æ‰€æœ‰ä¸xç›¸ç­‰çš„å…ƒç´ "></a>ç§»é™¤æ‰€æœ‰ä¸xç›¸ç­‰çš„å…ƒç´ </h2><p>å‡å¦‚æ˜¯æ˜¯ç§»é™¤æ‰€æœ‰ä¸xç›¸ç­‰çš„keyå€¼ï¼Œå¯ä»¥åƒä¸Šé¢ç”¨eraseï¼Œå¦‚æœæ˜¯valueå€¼ï¼Œåˆ™çœ‹ä¸‹é¢ï¼š</p><p>é”™è¯¯åšæ³•(c++11ä¹‹å‰)ï¼š</p><p><em>åœ¨C++11ä¸­ï¼Œeraseè¿”å›ä¸‹ä¸€ä¸ªè¿­ä»£å™¨ï¼Œä½†ä¹‹å‰çš„ç‰ˆæœ¬éƒ½è¿”å›void</em></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">multimap&lt;<span class="keyword">int</span>, <span class="keyword">char</span>&gt;mymap;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> iter = mymap.<span class="built_in">begin</span>(); iter != mymap.<span class="built_in">end</span>(); iter++)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">if</span>(iter-&gt;second == value)</span><br><span class="line">    mymap.<span class="built_in">erase</span>(iter);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹iteræ‰€æŒ‡å…ƒç´ æ–½åŠ erase()ï¼Œä¼šä½¿posä¸å†æˆä¸ºä¸€ä¸ªæœ‰æ•ˆçš„mymapè¿­ä»£å™¨ã€‚</p><p>æ­£ç¡®åšæ³•(c++11ä¹‹å‰)ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">multimap&lt;<span class="keyword">int</span>, <span class="keyword">char</span>&gt;mymap;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> iter = mymap.<span class="built_in">begin</span>(); iter != mymap.<span class="built_in">end</span>(); )</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">if</span>(iter-&gt;second == value)</span><br><span class="line">    mymap.<span class="built_in">erase</span>(iter++);</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    ++iter;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>iter++ä¼šå°†iterç§»å‘ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œä½†è¿”å›å…¶åŸå§‹å€¼ï¼ˆæŒ‡å‘åŸä½ç½®ï¼‰çš„ä¸€ä¸ªå‰¯æœ¬ã€‚å› æ­¤ï¼Œå½“erase()è¢«è°ƒç”¨æ—¶ï¼Œiterå·²ç»ä¸å†æŒ‡å‘é‚£ä¸ªå³å°†è¢«ç§»é™¤çš„å…ƒç´ äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> STL </tag>
            
            <tag> map </tag>
            
            <tag> multimap </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å˜é‡ä¸å†…å­˜é‚£äº›ç®€å•çš„äº‹</title>
      <link href="/2018/03/30/%E5%8F%98%E9%87%8F%E4%B8%8E%E5%86%85%E5%AD%98%E9%82%A3%E4%BA%9B%E7%AE%80%E5%8D%95%E7%9A%84%E4%BA%8B/"/>
      <url>/2018/03/30/%E5%8F%98%E9%87%8F%E4%B8%8E%E5%86%85%E5%AD%98%E9%82%A3%E4%BA%9B%E7%AE%80%E5%8D%95%E7%9A%84%E4%BA%8B/</url>
      
        <content type="html"><![CDATA[<p>å†…å­˜å†…å­˜ï¼Œå†…å­˜æ‰æ˜¯æ°¸æ’çš„çœŸç†</p> <span id="more"></span><p>æ€»çš„æ¥è¯´ï¼š</p><p>æ–°å»ºçš„å¯¹è±¡å¼€åœ¨ å †é‡Œ  </p><p>å±æ€§ å¼€åœ¨ å †é‡Œçš„å¯¹è±¡é‡Œ  </p><p>å±€éƒ¨å˜é‡ å‚æ•°å˜é‡ å¼€åœ¨ æ ˆé‡Œ  </p><h1 id="ç”±C-C-ç¼–è¯‘çš„ç¨‹åºå ç”¨çš„å†…å­˜åˆ†çš„å‡ éƒ¨åˆ†"><a href="#ç”±C-C-ç¼–è¯‘çš„ç¨‹åºå ç”¨çš„å†…å­˜åˆ†çš„å‡ éƒ¨åˆ†" class="headerlink" title="ç”±C/C++ç¼–è¯‘çš„ç¨‹åºå ç”¨çš„å†…å­˜åˆ†çš„å‡ éƒ¨åˆ†"></a>ç”±C/C++ç¼–è¯‘çš„ç¨‹åºå ç”¨çš„å†…å­˜åˆ†çš„å‡ éƒ¨åˆ†</h1><h2 id="æ ˆ"><a href="#æ ˆ" class="headerlink" title="æ ˆ"></a>æ ˆ</h2><p>æ ˆåŒºï¼ˆstackï¼‰â€” ç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…é‡Šæ”¾ ï¼Œå­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼ï¼Œå±€éƒ¨å˜é‡çš„å€¼ç­‰ã€‚å…¶æ“ä½œæ–¹å¼ç±»ä¼¼äºæ•°æ®ç»“æ„ä¸­çš„æ ˆã€‚</p><h2 id="å †"><a href="#å †" class="headerlink" title="å †"></a>å †</h2><p>å †åŒºï¼ˆheapï¼‰â€” ç”±ç¨‹åºå‘˜åˆ†é…é‡Šæ”¾ï¼Œ è‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾ï¼Œç¨‹åºç»“æŸæ—¶å¯èƒ½ç”±OSå›æ”¶ ã€‚æ³¨æ„å®ƒä¸æ•°æ®ç»“æ„ä¸­çš„å †æ˜¯ä¸¤å›äº‹ï¼Œåˆ†é…æ–¹å¼å€’æ˜¯ç±»ä¼¼äºé“¾è¡¨ã€‚</p><h2 id="å…¨å±€åŒºï¼ˆé™æ€åŒºï¼‰"><a href="#å…¨å±€åŒºï¼ˆé™æ€åŒºï¼‰" class="headerlink" title="å…¨å±€åŒºï¼ˆé™æ€åŒºï¼‰"></a>å…¨å±€åŒºï¼ˆé™æ€åŒºï¼‰</h2><p>å…¨å±€åŒºï¼ˆé™æ€åŒºï¼‰ï¼ˆstaticï¼‰â€” å…¨å±€å˜é‡å’Œé™æ€å˜é‡çš„å­˜å‚¨æ˜¯æ”¾åœ¨ä¸€å—çš„ï¼Œåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡åœ¨ä¸€å—åŒºåŸŸï¼Œ æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œæœªåˆå§‹åŒ–çš„é™æ€å˜é‡åœ¨ç›¸é‚»çš„å¦ä¸€å—åŒºåŸŸã€‚ç¨‹åºç»“æŸåç”±ç³»ç»Ÿé‡Šæ”¾ã€‚</p><h2 id="æ–‡å­—å¸¸é‡åŒº"><a href="#æ–‡å­—å¸¸é‡åŒº" class="headerlink" title="æ–‡å­—å¸¸é‡åŒº"></a>æ–‡å­—å¸¸é‡åŒº</h2><p>å¸¸é‡å­—ç¬¦ä¸²å°±æ˜¯æ”¾åœ¨è¿™é‡Œçš„ï¼Œç¨‹åºç»“æŸåç”±ç³»ç»Ÿé‡Šæ”¾ ã€‚</p><h2 id="ç¨‹åºä»£ç åŒº"><a href="#ç¨‹åºä»£ç åŒº" class="headerlink" title="ç¨‹åºä»£ç åŒº"></a>ç¨‹åºä»£ç åŒº</h2><p>å­˜æ”¾å‡½æ•°ä½“çš„äºŒè¿›åˆ¶ä»£ç ã€‚</p><h1 id="å˜é‡ï¼Œå¯¹è±¡ï¼Œå†…å­˜"><a href="#å˜é‡ï¼Œå¯¹è±¡ï¼Œå†…å­˜" class="headerlink" title="å˜é‡ï¼Œå¯¹è±¡ï¼Œå†…å­˜"></a>å˜é‡ï¼Œå¯¹è±¡ï¼Œå†…å­˜</h1><ol><li>JavaæŠŠå†…å­˜åˆ’åˆ†æˆä¸¤ç§ï¼šä¸€ç§æ˜¯<strong>æ ˆå†…å­˜</strong>ï¼Œä¸€ç§æ˜¯<strong>å †å†…å­˜</strong>ã€‚åœ¨å‡½æ•°ä¸­å®šä¹‰çš„ä¸€äº›åŸºæœ¬ç±»å‹çš„å˜é‡å’Œå¯¹è±¡çš„å¼•ç”¨å˜é‡éƒ½åœ¨å‡½æ•°çš„å †æ ˆä¸­åˆ†é… ã€‚  </li><li>å½“åœ¨ä¸€æ®µä»£ç å—å®šä¹‰ä¸€ä¸ªå˜é‡æ—¶ï¼ŒJavaå°±åœ¨æ ˆä¸­ä¸ºè¿™ä¸ªå˜é‡åˆ†é…å†…å­˜ç©ºé—´ï¼Œå½“è¶…è¿‡å˜é‡çš„ä½œç”¨åŸŸåï¼ŒJavaä¼šè‡ªåŠ¨é‡Šæ”¾æ‰ä¸ºè¯¥å˜é‡æ‰€åˆ†é…çš„å†…å­˜ç©ºé—´ï¼Œ è¯¥å†…å­˜ç©ºé—´å¯ä»¥ç«‹å³è¢«å¦ä½œä»–ç”¨ã€‚ æ‰€ä»¥å°½é‡ä½¿ç”¨åŸºæœ¬ç±»å‹çš„å˜é‡ã€‚  </li><li>å †å†…å­˜ç”¨æ¥å­˜æ”¾ç”± newåˆ›å»ºçš„å¯¹è±¡å’Œæ•°ç»„ã€‚ ç”±Javaè™šæ‹Ÿæœºçš„è‡ªåŠ¨åƒåœ¾å›æ”¶å™¨æ¥ç®¡ç†ã€‚</li><li>åœ¨å †ä¸­äº§ç”Ÿäº†ä¸€ä¸ªæ•°ç»„æˆ–å¯¹è±¡åï¼Œè¿˜å¯ä»¥åœ¨æ ˆä¸­å®šä¹‰ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡ï¼Œè®©æ ˆä¸­è¿™ä¸ªå˜é‡çš„å–å€¼ç­‰äºæ•°ç»„æˆ–å¯¹è±¡åœ¨å †å†…å­˜ä¸­çš„é¦–åœ°å€ï¼Œæ ˆä¸­çš„è¿™ä¸ªå˜é‡å°±æˆäº†æ•°ç»„æˆ–å¯¹è±¡çš„å¼•ç”¨å˜é‡ã€‚å¼•ç”¨å˜é‡å°±ç›¸å½“äºæ˜¯ä¸ºæ•°ç»„æˆ–å¯¹è±¡èµ·çš„ä¸€ä¸ªåç§°ï¼Œä»¥åå°±å¯ä»¥åœ¨ç¨‹åºä¸­ä½¿ç”¨æ ˆä¸­çš„å¼•ç”¨å˜é‡æ¥è®¿é—®å †ä¸­çš„æ•°ç»„æˆ–å¯¹è±¡Javaçš„å †æˆ–è€…è¯´å†…å­˜å †æ˜¯ä¸€ä¸ªè¿è¡Œæ—¶æ•°æ®åŒº,ç±»çš„(å¯¹è±¡ä»ä¸­åˆ†é…ç©ºé—´ã€‚è¿™äº›å¯¹è±¡é€šè¿‡newã€newarrayã€anewarrayå’Œmultianewarrayç­‰ æŒ‡ä»¤å»ºç«‹ï¼Œå®ƒä»¬ä¸éœ€è¦ç¨‹åºä»£ç æ¥æ˜¾å¼çš„é‡Šæ”¾ã€‚</li><li>å †æ˜¯ç”±åƒåœ¾å›æ”¶æ¥è´Ÿè´£çš„ï¼Œå †çš„ä¼˜åŠ¿æ˜¯å¯ä»¥åŠ¨æ€åœ°åˆ†é…å†…å­˜å¤§å°ï¼Œç”Ÿå­˜æœŸä¹Ÿä¸å¿…äº‹å…ˆå‘Šè¯‰ç¼–è¯‘å™¨ï¼Œå› ä¸ºå®ƒæ˜¯åœ¨è¿è¡Œæ—¶ åŠ¨æ€åˆ†é…å†…å­˜çš„ï¼ŒJavaçš„åƒåœ¾æ”¶é›†å™¨ä¼šè‡ªåŠ¨æ”¶èµ°è¿™äº›ä¸å†ä½¿ç”¨çš„æ•°æ®ã€‚ä½†ç¼ºç‚¹æ˜¯ï¼Œç”±äºè¦åœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ†é…å†…å­˜ï¼Œå­˜å–é€Ÿåº¦è¾ƒæ…¢ã€‚</li></ol><h1 id="é™æ€å­˜å‚¨åˆ†é…ä¸åŠ¨æ€å­˜å‚¨åˆ†é…"><a href="#é™æ€å­˜å‚¨åˆ†é…ä¸åŠ¨æ€å­˜å‚¨åˆ†é…" class="headerlink" title="é™æ€å­˜å‚¨åˆ†é…ä¸åŠ¨æ€å­˜å‚¨åˆ†é…"></a>é™æ€å­˜å‚¨åˆ†é…ä¸åŠ¨æ€å­˜å‚¨åˆ†é…</h1><p>é€šå¸¸å®šä¹‰å˜é‡ï¼ˆæˆ–å¯¹è±¡ï¼‰ï¼Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶éƒ½å¯ä»¥æ ¹æ®è¯¥å˜é‡ï¼ˆæˆ–å¯¹è±¡ï¼‰çš„ç±»å‹çŸ¥é“æ‰€éœ€å†…å­˜ç©ºé—´çš„å¤§å°ï¼Œä»è€Œç³»ç»Ÿåœ¨é€‚å½“çš„æ—¶å€™ä¸ºä»–ä»¬åˆ†é…ç¡®å®šçš„å­˜å‚¨ç©ºé—´ã€‚è¿™ç§å†…å­˜åˆ†é…ç§°ä¸º<strong>é™æ€å­˜å‚¨åˆ†é…ï¼›</strong>  </p><p>æœ‰äº›æ“ä½œå¯¹è±¡åªåœ¨ç¨‹åºè¿è¡Œæ—¶æ‰èƒ½ç¡®å®šï¼Œè¿™æ ·ç¼–è¯‘æ—¶å°±æ— æ³•ä¸ºä»–ä»¬é¢„å®šå­˜å‚¨ç©ºé—´ï¼Œåªèƒ½åœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œç³»ç»Ÿæ ¹æ®è¿è¡Œæ—¶çš„è¦æ±‚è¿›è¡Œå†…å­˜åˆ†é…ï¼Œè¿™ç§æ–¹æ³•ç§°ä¸º<strong>åŠ¨æ€å­˜å‚¨åˆ†é…</strong>ã€‚æ‰€æœ‰åŠ¨æ€å­˜å‚¨åˆ†é…éƒ½åœ¨å †åŒºä¸­è¿›è¡Œã€‚  </p><p>å½“ç¨‹åºè¿è¡Œåˆ°éœ€è¦ä¸€ä¸ªåŠ¨æ€åˆ†é…çš„å˜é‡æˆ–å¯¹è±¡æ—¶ï¼Œå¿…é¡»å‘ç³»ç»Ÿç”³è¯·å–å¾—å †ä¸­çš„ä¸€å—æ‰€éœ€å¤§å°çš„å­˜è´®ç©ºé—´ï¼Œç”¨äºå­˜è´®è¯¥å˜é‡æˆ–å¯¹è±¡ã€‚å½“ä¸å†ä½¿ç”¨è¯¥å˜é‡æˆ–å¯¹è±¡æ—¶ï¼Œä¹Ÿå°±æ˜¯å®ƒçš„ç”Ÿå‘½ç»“æŸæ—¶ï¼Œè¦æ˜¾å¼é‡Šæ”¾å®ƒæ‰€å ç”¨çš„å­˜è´®ç©ºé—´ï¼Œè¿™æ ·ç³»ç»Ÿå°±èƒ½å¯¹è¯¥å †ç©ºé—´è¿›è¡Œå†æ¬¡åˆ†é…ï¼Œåšåˆ°é‡å¤ä½¿ç”¨æœ‰é™çš„èµ„æºã€‚</p><p>å‚è€ƒ:<a href="https://blog.csdn.net/susan19890313/article/details/7494143">åŠ¨æ€å†…å­˜åˆ†é…ï¼ˆnew deleteï¼‰</a>  </p><h1 id="æ ˆçš„å…±äº«æ€§"><a href="#æ ˆçš„å…±äº«æ€§" class="headerlink" title="æ ˆçš„å…±äº«æ€§"></a>æ ˆçš„å…±äº«æ€§</h1><p>å‡è®¾æˆ‘ä»¬åŒæ—¶å®šä¹‰</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a = <span class="number">3</span>; </span><br><span class="line"><span class="keyword">int</span> b = <span class="number">3</span>ï¼›</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘å™¨å…ˆå¤„ç†int a = 3ï¼›é¦–å…ˆå®ƒä¼šåœ¨æ ˆä¸­åˆ›å»ºä¸€ä¸ªå˜é‡ä¸ºaçš„å¼•ç”¨ï¼Œç„¶åæŸ¥æ‰¾æ ˆä¸­æ˜¯å¦æœ‰3è¿™ä¸ªå€¼ï¼Œå¦‚æœæ²¡æ‰¾åˆ°ï¼Œå°±å°†3å­˜æ”¾è¿›æ¥ï¼Œç„¶åå°†aæŒ‡å‘3ã€‚æ¥ç€å¤„ç†int b = 3ï¼›åœ¨åˆ›å»ºå®Œbçš„å¼•ç”¨å˜é‡åï¼Œå› ä¸ºåœ¨æ ˆä¸­å·²ç»æœ‰3è¿™ä¸ªå€¼ï¼Œä¾¿å°†bç›´æ¥æŒ‡å‘3ã€‚è¿™æ ·ï¼Œå°±å‡ºç°äº†aä¸båŒæ—¶å‡æŒ‡å‘3çš„æƒ…å†µã€‚è¿™æ—¶ï¼Œå¦‚æœå†ä»¤a=4ï¼›é‚£ä¹ˆç¼–è¯‘å™¨ ä¼šé‡æ–°æœç´¢æ ˆä¸­æ˜¯å¦æœ‰4å€¼ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™å°†4å­˜æ”¾è¿›æ¥ï¼Œå¹¶ä»¤aæŒ‡å‘4ï¼›å¦‚æœå·²ç»æœ‰äº†ï¼Œåˆ™ç›´æ¥å°†aæŒ‡å‘è¿™ä¸ªåœ°å€ã€‚å› æ­¤aå€¼çš„æ”¹å˜ä¸ä¼šå½±å“åˆ°bçš„å€¼ã€‚è¦æ³¨æ„è¿™ ç§æ•°æ®çš„å…±äº«ä¸ä¸¤ä¸ªå¯¹è±¡çš„å¼•ç”¨åŒæ—¶æŒ‡å‘ä¸€ä¸ªå¯¹è±¡çš„è¿™ç§å…±äº«æ˜¯ä¸åŒçš„ï¼Œå› ä¸ºè¿™ç§æƒ…å†µaçš„ä¿®æ”¹å¹¶ä¸ä¼šå½±å“åˆ°b, å®ƒæ˜¯ç”±ç¼–è¯‘å™¨å®Œæˆçš„ï¼Œå®ƒæœ‰åˆ©äºèŠ‚çœç©ºé—´ã€‚è€Œä¸€ä¸ªå¯¹è±¡å¼•ç”¨å˜é‡ä¿®æ”¹äº†è¿™ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œä¼šå½±å“åˆ°å¦ä¸€ä¸ªå¯¹è±¡å¼•ç”¨å˜é‡ã€‚</p><h1 id="ä¸¤ç§åˆ›å»ºStringç±»å¯¹è±¡çš„æ¯”è¾ƒ"><a href="#ä¸¤ç§åˆ›å»ºStringç±»å¯¹è±¡çš„æ¯”è¾ƒ" class="headerlink" title="ä¸¤ç§åˆ›å»ºStringç±»å¯¹è±¡çš„æ¯”è¾ƒ"></a>ä¸¤ç§åˆ›å»ºStringç±»å¯¹è±¡çš„æ¯”è¾ƒ</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String str = <span class="keyword">new</span> <span class="built_in">String</span>(â€œabcâ€); <span class="comment">//ï¼ˆ1ï¼‰</span></span><br><span class="line">String str = â€œabcâ€; </span><br></pre></td></tr></table></figure><p>é¦–å…ˆè¯´ä¸‹new </p><h2 id="newçš„é‚£äº›å†…å­˜åˆ†é…çš„äº‹æƒ…"><a href="#newçš„é‚£äº›å†…å­˜åˆ†é…çš„äº‹æƒ…" class="headerlink" title="newçš„é‚£äº›å†…å­˜åˆ†é…çš„äº‹æƒ…"></a>newçš„é‚£äº›å†…å­˜åˆ†é…çš„äº‹æƒ…</h2><p>Javaå…³é”®å­—newæ˜¯ä¸€ä¸ªè¿ç®—ç¬¦ã€‚ä¸+ã€-ã€*ã€/ç­‰è¿ç®—ç¬¦å…·æœ‰ç›¸åŒæˆ–ç±»ä¼¼çš„ä¼˜å…ˆçº§ã€‚  </p><p>åˆ›å»ºä¸€ä¸ªJavaå¯¹è±¡éœ€è¦ä¸‰æ­¥ï¼šå£°æ˜å¼•ç”¨å˜é‡ã€å®ä¾‹åŒ–ã€åˆå§‹åŒ–å¯¹è±¡å®ä¾‹ã€‚</p><p>åº”è¯¥è¯´æœ‰ä¼šäº§ç”Ÿä¸¤ä¸ªå¯¹è±¡ï¼Œä¸€ä¸ªä¸ºnew String(â€œabcâ€)çš„å®ä½“å¯¹è±¡æ”¾åˆ°å†…å­˜å †ä¸­ï¼Œ ä¸€ä¸ªä¸ºå †æ ˆå¯¹è±¡strä¹Ÿå°±æ˜¯ç±»å®ä¾‹å¯¹è±¡çš„å¼•ç”¨å¯¹è±¡ã€‚</p><h3 id="å£°æ˜Declaration"><a href="#å£°æ˜Declaration" class="headerlink" title="å£°æ˜Declaration"></a>å£°æ˜Declaration</h3><p>æŠŠä¸Šé¢ä»£ç (1)æ‹†åˆ†åªç•™ä¸‹ä¸‹é¢éƒ¨åˆ†ï¼Œå°±ç®—æ˜¯å£°æ˜éƒ¨åˆ†äº†ï¼Œå°±æ˜¯å°†å˜é‡åç§°ä¸å¯¹è±¡ç±»å‹å…³è”çš„å˜é‡å£°æ˜ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String str</span><br></pre></td></tr></table></figure><p>å¦‚åŒ</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a;</span><br></pre></td></tr></table></figure><ul><li>å£°æ˜ä¸€ä¸ªå¯¹è±¡str æ—¶ï¼Œå°†åœ¨æ ˆå†…å­˜ä¸ºå¯¹è±¡çš„å¼•ç”¨å˜é‡str åˆ†é…å†…å­˜ç©ºé—´ï¼Œä½†å€¼ä¸ºç©ºï¼Œç§°stræ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ã€‚ç©ºå¯¹è±¡ä¸èƒ½ä½¿ç”¨ï¼Œå› ä¸ºå®ƒè¿˜æ²¡æœ‰å¼•ç”¨ä»»ä½•â€å®ä½“â€</li></ul><h3 id="å®ä¾‹åŒ–Instantiating"><a href="#å®ä¾‹åŒ–Instantiating" class="headerlink" title="å®ä¾‹åŒ–Instantiating"></a>å®ä¾‹åŒ–Instantiating</h3><p>å®ä¾‹åŒ–ï¼Ÿâ€œå®ä¾‹åŒ–ä¸€ä¸ªç±»çš„å¯¹è±¡â€çš„æ„æ€å°±æ˜¯â€œåˆ›å»ºå¯¹è±¡â€ã€‚åˆ›å»ºå¯¹è±¡æ—¶ï¼Œä½ æ­£åœ¨åˆ›é€ ä¸€ä¸ªç±»çš„â€œå®ä¾‹â€ï¼Œå› è€Œâ€œå®ä¾‹åŒ–â€ä¸€ä¸ªç±»çš„å¯¹è±¡ã€‚</p><p>å®ä¾‹åŒ–å°±æ˜¯â€œåˆ›å»ºä¸€ä¸ªJavaå¯¹è±¡â€â€”â€”-åˆ†é…å†…å­˜å¹¶è¿”å›æŒ‡å‘è¯¥å†…å­˜çš„å¼•ç”¨ã€‚</p><ul><li>åœ¨å †å†…å­˜ä¸­ä¸ºç±»çš„æˆå‘˜å˜é‡åˆ†é…å†…å­˜ï¼Œå¹¶å°†å…¶åˆå§‹åŒ–ä¸ºå„æ•°æ®ç±»å‹çš„é»˜è®¤å€¼ï¼›æ¥ç€è¿›è¡Œæ˜¾å¼åˆå§‹åŒ–ï¼ˆç±»å®šä¹‰æ—¶çš„åˆå§‹åŒ–å€¼ï¼‰ï¼›</li></ul><h3 id="åˆå§‹åŒ–Initialization"><a href="#åˆå§‹åŒ–Initialization" class="headerlink" title="åˆå§‹åŒ–Initialization"></a>åˆå§‹åŒ–Initialization</h3><ul><li>æœ€åè°ƒç”¨æ„é€ æ–¹æ³•ï¼Œä¸ºæˆå‘˜å˜é‡èµ‹å€¼ã€‚</li><li>è¿”å›å †å†…å­˜ä¸­å¯¹è±¡çš„å¼•ç”¨ï¼ˆç›¸å½“äºé¦–åœ°å€ï¼‰ç»™å¼•ç”¨å˜é‡str,ä»¥åå°±å¯ä»¥é€šè¿‡stræ¥å¼•ç”¨å †å†…å­˜ä¸­çš„å¯¹è±¡äº†ã€‚</li></ul><h3 id="ç¬¬äºŒç§"><a href="#ç¬¬äºŒç§" class="headerlink" title="ç¬¬äºŒç§"></a>ç¬¬äºŒç§</h3><p>è€Œç¬¬äºŒç§ï¼ˆString str = â€œabcâ€;ï¼‰æ˜¯å…ˆåœ¨æ ˆä¸­åˆ›å»ºä¸€ä¸ªå¯¹Stringç±»çš„å¯¹è±¡å¼•ç”¨å˜é‡strï¼Œç„¶åæŸ¥æ‰¾æ ˆ ä¸­æœ‰æ²¡æœ‰å­˜æ”¾â€abcâ€ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™å°†â€abcâ€å­˜æ”¾è¿›æ ˆï¼Œå¹¶ä»¤stræŒ‡å‘â€abcâ€ï¼Œå¦‚æœå·²ç»æœ‰â€abcâ€ åˆ™ç›´æ¥ä»¤stræŒ‡å‘â€œabcâ€ã€‚ </p><p>å› æ­¤ç”¨ç¬¬äºŒç§æ–¹å¼ï¼ˆString str = â€œabcâ€;ï¼‰åˆ›å»ºå¤šä¸ªâ€abcâ€å­—ç¬¦ä¸²,åœ¨å†…å­˜ä¸­å…¶å®åªå­˜åœ¨ä¸€ä¸ªå¯¹è±¡è€Œå·²</p><p>å¦ä¸€æ–¹é¢, è¦æ³¨æ„: æˆ‘ä»¬åœ¨ä½¿ç”¨è¯¸å¦‚String str = â€œabcâ€ï¼›çš„æ ¼å¼å®šä¹‰ç±»æ—¶ï¼Œæ€»æ˜¯æƒ³å½“ç„¶åœ°è®¤ä¸ºï¼Œåˆ›å»ºäº†Stringç±»çš„å¯¹è±¡strã€‚æ‹…å¿ƒé™·é˜±ï¼å¯¹è±¡å¯èƒ½å¹¶æ²¡æœ‰è¢«åˆ›å»ºï¼è€Œå¯èƒ½åªæ˜¯æŒ‡å‘ä¸€ä¸ªå…ˆå‰å·²ç»åˆ›å»ºçš„ å¯¹è±¡ã€‚åªæœ‰é€šè¿‡new()æ–¹æ³•æ‰èƒ½ä¿è¯æ¯æ¬¡éƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚</p><h1 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.cpp  </span></span><br><span class="line"><span class="keyword">int</span> a = <span class="number">0</span>; å…¨å±€åˆå§‹åŒ–åŒº  </span><br><span class="line"><span class="keyword">char</span> *p1; å…¨å±€æœªåˆå§‹åŒ–åŒº  </span><br><span class="line"><span class="built_in">main</span>()  </span><br><span class="line">&#123;  </span><br><span class="line"><span class="keyword">int</span> b; æ ˆ  </span><br><span class="line"><span class="keyword">char</span> s[] = <span class="string">&quot;abc&quot;</span>; æ ˆ  </span><br><span class="line"><span class="keyword">char</span> *p2; æ ˆ  </span><br><span class="line"><span class="keyword">char</span> *p3 = <span class="string">&quot;123456&quot;</span>; <span class="number">123456</span>\<span class="number">0</span>åœ¨å¸¸é‡åŒºï¼Œp3åœ¨æ ˆä¸Šã€‚  </span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> c =<span class="number">0</span>ï¼› å…¨å±€ï¼ˆé™æ€ï¼‰åˆå§‹åŒ–åŒº  </span><br><span class="line">p1 = (<span class="keyword">char</span> *)<span class="built_in">malloc</span>(<span class="number">10</span>);  </span><br><span class="line">p2 = (<span class="keyword">char</span> *)<span class="built_in">malloc</span>(<span class="number">20</span>);  </span><br><span class="line">åˆ†é…å¾—æ¥å¾—<span class="number">10</span>å’Œ<span class="number">20</span>å­—èŠ‚çš„åŒºåŸŸå°±åœ¨å †åŒºã€‚  </span><br><span class="line"><span class="built_in">strcpy</span>(p1, <span class="string">&quot;123456&quot;</span>); <span class="number">123456</span>\<span class="number">0</span>æ”¾åœ¨å¸¸é‡åŒºï¼Œç¼–è¯‘å™¨å¯èƒ½ä¼šå°†å®ƒä¸p3æ‰€æŒ‡å‘çš„<span class="string">&quot;123456&quot;</span></span><br><span class="line">ä¼˜åŒ–æˆä¸€ä¸ªåœ°æ–¹ã€‚  </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure><p>å‚è€ƒ:  </p><p><a href="https://blog.csdn.net/a675311/article/details/52293730">Javaå˜é‡ä»¥åŠå†…å­˜åˆ†é…ï¼ˆéå¸¸é‡è¦ï¼‰</a></p><p><a href="http://wiki.jikexueyuan.com/project/java-special-topic/platorm-memory.html">Java å†…å­˜ç®¡ç†</a></p><p><a href="https://ask.csdn.net/questions/368543">java stringä»€ä¹ˆæ˜¯å­—ç¬¦ä¸²å¸¸é‡ï¼Œä»€ä¹ˆæ˜¯å­—ç¬¦ä¸²æ•°ç»„ï¼Œä»€ä¹ˆæ˜¯å­—ç¬¦ä¸²å¸¸é‡æ± ï¼Ÿ</a></p><p><a href="http://www.360doc.com/content/16/0830/07/36064344_586925087.shtml">javaå­¦ä¹ ç¬”è®°ä¹‹stringç±»å‹å’Œå­—ç¬¦ä¸²å¸¸é‡åŒº  </a></p><p><a href="https://wenku.baidu.com/view/c10613bffe4733687f21aa0f.html">Javaè¯­è¨€ä¸­å­—ç¬¦ä¸²å¸¸é‡å’Œå˜é‡çš„åˆ†æä¸æ¯”è¾ƒ</a>  </p><p><a href="https://blog.csdn.net/ljheee/article/details/52235915">Javaå…³é”®å­—newâ€”â€”-å¯¹è±¡çš„å†…å­˜åˆ†é…åŸç†  </a></p><p>[<a href="https://blog.csdn.net/daiyutage/article/details/8605580">å­—ç¬¦ä¸²å¸¸é‡åˆ°åº•å­˜æ”¾åœ¨å“ªä¸ªå­˜å‚¨åŒº</a>]</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å†…å­˜åˆ†é… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>YXT-ç¬¬ä¸€æ¬¡å·¥ä½œå®¤é¢è¯•å¿ƒå¾—</title>
      <link href="/2018/03/30/YXT-%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%B7%A5%E4%BD%9C%E5%AE%A4%E9%9D%A2%E8%AF%95%E7%9A%84%E5%BF%83%E5%BE%97/"/>
      <url>/2018/03/30/YXT-%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%B7%A5%E4%BD%9C%E5%AE%A4%E9%9D%A2%E8%AF%95%E7%9A%84%E5%BF%83%E5%BE%97/</url>
      
        <content type="html"><![CDATA[<p>ä¸€æ¬¡ç³Ÿç³•çš„é¢è¯•<br><span id="more"></span><br>å‰å‡ å¤©å»é¢è¯•å­¦æ ¡çš„å¤©é«˜å·¥ä½œå®¤ï¼Œåœ¨åŠå°æ—¶çš„ä¸€å¯¹å¤šé¢è¯•åï¼Œç»“æœä¸å¦‚äººæ„ï¼Œå½’çº³èµ·æ¥ä¸»è¦æ˜¯è‡ªå·±çš„åŸºç¡€æœ‰ç‚¹æ…Œï¼ŒåŠ ä¸Šè‡ªå·±æ€»æ˜¯åœ¨é¢è¯•æ—¶å¼€å¯çš„â€œæš´èµ°â€çŠ¶æ€ï¼Œå¯ç®—æ˜¯å‡‰å‡‰ã€‚<br>äº‹åé—®é¢è¯•è¿‡æˆ‘çš„ä¸€ä¸ªå¸ˆå…„ï¼Œå¯¹æ–¹å›ç­”è¯´ï¼šâ€<strong>æˆ‘ä»¬è§‰å¾—ä½ çš„çŸ¥è¯†å¹¿åº¦å¾ˆå¹¿ï¼Œä½†æ˜¯æ·±åº¦è¿˜ä¸å¤Ÿã€‚</strong>â€œ<br>ä¸»è¦è®°å½•ä¸‹é¢è¯•æ—¶é—®åˆ°çš„å‡ ä¸ªä¸æ‡‚çš„åŸºç¡€éƒ¨åˆ†å§ï¼ˆå…¶å®è¿˜æ˜¯è‡ªå·±çš„åŸºç¡€ä¸å¤Ÿæ‰å®ï¼‰,ä»¥ä¾¿ä»¥åè¡¥ä¸Šæ¼æ´</p><h2 id="å †å’Œæ ˆçš„åŒºåˆ«"><a href="#å †å’Œæ ˆçš„åŒºåˆ«" class="headerlink" title="å †å’Œæ ˆçš„åŒºåˆ«"></a>å †å’Œæ ˆçš„åŒºåˆ«</h2><p>è¿™ä¸ªé—®é¢˜å…¶å®æ˜¯å¾ˆç»å…¸çš„é—®é¢˜ï¼Œå †å’Œæ ˆçš„åŒºåˆ«å€’æ˜¯åœ¨å¤§ä¸€ä¸Šå­¦æœŸçœ‹è¿‡ï¼Œå¯æ˜¯éš”äº†è¿™ä¹ˆä¹…å¿˜äº†ä¹Ÿæ˜¯å¾ˆæ­£å¸¸ã€‚</p><h2 id="åŠ¨æ€é“¾è¡¨"><a href="#åŠ¨æ€é“¾è¡¨" class="headerlink" title="åŠ¨æ€é“¾è¡¨"></a>åŠ¨æ€é“¾è¡¨</h2><p>é‚£æ—¶å€™é¢è¯•çš„ä¸€ä½è€å¸ˆé—®æˆ‘æœ‰æ²¡æœ‰äº²è‡ªå†™è¿‡åŠ¨æ€é“¾è¡¨çš„å®ç°ï¼Œemmmï¼Œä¸Šå­¦æœŸå€’æ˜¯å­¦è¿‡åŸºæœ¬çš„æ•°æ®ç»“æ„ï¼Œä¹Ÿå†™è¿‡ä¸€äº›æ•°æ®ç»“æ„çš„å®ç°ï¼Œä½†æ˜¯å°è±¡ä¸­æ²¡æœ‰å­¦è¿‡åŠ¨æ€é“¾è¡¨è¿™ç§ä¸œè¥¿ã€‚è®°å¾—å¤§ä¸€ä¸Šå­¦æœŸå€’æ˜¯ç”¨é“¾è¡¨è§£å†³è¿‡ä¸€é“é¢˜ï¼Œä¸è¿‡åˆ°ç°åœ¨ï¼Œä¹Ÿæ˜¯å¿˜äº†ï¼Œå‡‰äº†ã€‚</p><h2 id="å˜é‡ï¼ŒæŒ‡é’ˆï¼Œå†…å­˜"><a href="#å˜é‡ï¼ŒæŒ‡é’ˆï¼Œå†…å­˜" class="headerlink" title="å˜é‡ï¼ŒæŒ‡é’ˆï¼Œå†…å­˜"></a>å˜é‡ï¼ŒæŒ‡é’ˆï¼Œå†…å­˜</h2><p>ä¸€ä½å¸ˆå…„åœ¨é¢è¯•çš„æ—¶å€™æåˆ°è¿‡äº†æ•°ç»„å˜é‡åœ¨å†…å­˜ä¸­æ˜¯æ€ä¹ˆå­˜åœ¨ï¼Œè€Œä¸”æŒ‡é’ˆåœ¨å†…å­˜æ˜¯æ€ä¹ˆè¿›è¡Œè¿ä½œçš„ï¼ŒåŒæ—¶è¿˜é—®äº†ä¸‹å®šä¹‰ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘æ•°ç»„æœ‰ä»€ä¹ˆç”¨ï¼Ÿ<br>è®°å¾—é‚£æ—¶å€™å›ç­”å¾—å¯ä¸æ˜¯å¾ˆå¥½ï¼Œå†…å­˜è¿™æ–¹é¢çš„çŸ¥è¯†å€’æ˜¯æœ‰ç‚¹ç¼ºä¹ï¼Œæœ€è¿‘å­¦javaï¼Œè€å¸ˆä¹Ÿè¯´è¿‡äº†å†…å­˜çš„ä¸€ç‚¹çŸ¥è¯†ï¼Œå¾—æ‰¾ä¸ªæ—¶é—´å·©å›ºäº†ä¸‹ã€‚</p><h2 id="å¤§æ•°æ®åœ¨å¼€å‘ä¸­çš„ä½œç”¨"><a href="#å¤§æ•°æ®åœ¨å¼€å‘ä¸­çš„ä½œç”¨" class="headerlink" title="å¤§æ•°æ®åœ¨å¼€å‘ä¸­çš„ä½œç”¨"></a>å¤§æ•°æ®åœ¨å¼€å‘ä¸­çš„ä½œç”¨</h2><p> emmmï¼Œè¿™ä¸ªå€’æ˜¯æœ‰ç‚¹æ…Œï¼Œå½“æ—¶æ˜¯æåˆ°äº†å¤§æ•°æ®è¿™ä¸ªæ–¹å‘ï¼Œå¯èƒ½æ˜¯ä¸å°å¿ƒå¹å¤šäº†ï¼ˆè¯¯ï¼‰ï¼Œåæ¥å°±æ¥ç€æ¥ä¸€è¿ä¸²çš„å¤§æ•°æ®é—®é¢˜ï¼Œå½“æ—¶å¸ˆå…„é—®çš„å¤§æ•°æ®é—®é¢˜è¿˜å¥½ï¼Œä»–çŸ¥é“æˆ‘å¯¹å¤§æ•°æ®äº†è§£ä¸å¤šï¼Œæåˆ°çš„é—®é¢˜ä¹Ÿæ˜¯å¾ˆéš¾ï¼Œå°è±¡è®°å¾—æœ‰å‡ ä¸ª:  </p><ol><li>å¤§æ•°æ®çš„å·¥ä½œæ–¹å¼å’Œä½ ç°åœ¨çš„ACMåšé¢˜æœ‰æœ‰ä»€ä¹ˆåŒºåˆ«</li><li><p>å¤§æ•°æ®éœ€è¦å¾ˆå¤šçš„æ•°å­¦çŸ¥è¯†ï¼Œä½ è®¤ä¸ºä½ çš„æ•°å­¦æ€ä¹ˆæ ·<br>â€¦.</p><p>emmmï¼Œå…¶å®è¿™äº›è¿˜å¥½ï¼Œåæ¥è€å¸ˆé—®äº†ä¸ªå¤§æ•°æ®åœ¨å¼€å‘çš„ä½œç”¨ï¼Œè®°å¾—å½“æ—¶åªæ˜¯ç­”äº†ä¸ªéœ€æ±‚åˆ†æï¼Œå…¶å®è¿˜å¯ä»¥ç­”æ›´å¤šï¼Œä½†æ˜¯å¥½åƒé¢è¯•æ—¶é—´æœ‰ç‚¹è¿‡é•¿ï¼Œè„‘è¢‹æœ‰ç‚¹æ··ä¹±ã€‚</p><h2 id="äºŒè¿›åˆ¶ä¸ä½è¿ç®—"><a href="#äºŒè¿›åˆ¶ä¸ä½è¿ç®—" class="headerlink" title="äºŒè¿›åˆ¶ä¸ä½è¿ç®—"></a>äºŒè¿›åˆ¶ä¸ä½è¿ç®—</h2><p>ä¹‹å‰è¯´è¿‡è‡ªå·±äº†è§£è¿‡ä¸€äº›è®¡ç®—æœºç»„æˆåŸç†çš„é—®é¢˜ï¼Œåæ¥å°±é—®äº†å‡ é“äºŒè¿›åˆ¶ä¸ä½è¿ç®—çš„é—®é¢˜ï¼Œè™½ç„¶èƒ½ç­”å‡ºæ¥ï¼Œä½†æ˜¯æ„Ÿè§‰ç­”å¾—ä¹Ÿä¸æ˜¯å¾ˆå¥½ï¼Œæœ‰é“é¢˜è¿˜å¬é”™äº†æ„æ€ã€‚</p><p>å…¶å®çœ‹èµ·æ¥è¿™äº›é—®é¢˜å¾ˆåŸºç¡€ï¼Œä½†æ˜¯è‡ªå·±ç­”ä¸å‡ºï¼ŒåŸºç¡€ç¡®å®æœ‰ç‚¹ç³Ÿç³•ï¼Œå†…å­˜ä¸ä½è¿ç®—é‚£æ–¹é¢çš„çŸ¥è¯†ç¡®å®šå¾—æå‡äº†ä¸‹ï¼Œè™½ç„¶ç»“æœè¿˜æ²¡æœ‰å‡ºæ¥ï¼Œä½†æ˜¯å·²ç»æ„Ÿå—åˆ°äº†å‡‰å‡‰ï¼Œå¸Œæœ›å¤§äºŒèƒ½ç»§ç»­åŠªåŠ›<br>æœ€åé¢è¯•çš„å¸ˆå…„å»ºè®®æˆ‘å­¦ç²¾æŸä¸€æ–¹é¢çš„çŸ¥è¯†ã€‚ï¼ˆè¯¥æ­»çš„æ–¹å‘é—®é¢˜ï¼ˆè¯¯ï¼‰ã€‚</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ‚ é—²è°ˆ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å¼‚æˆ–</title>
      <link href="/2018/03/24/%E5%BC%82%E6%88%96/"/>
      <url>/2018/03/24/%E5%BC%82%E6%88%96/</url>
      
        <content type="html"><![CDATA[<p>å¼‚æˆ–ä¸€äº›åº”ç”¨</p> <span id="more"></span><p> å‚è€ƒ:<a href="https://www.lijinma.com/blog/2014/05/29/amazing-xor/">æ„Ÿå—å¼‚æˆ–çš„ç¥å¥‡</a><br>å®ƒçš„è§„åˆ™æ˜¯è‹¥å‚åŠ è¿ç®—çš„ä¸¤ä¸ªäºŒè¿›ä½åŒå·ï¼Œåˆ™ç»“æœä¸º0ï¼ˆå‡ï¼‰ï¼›å¼‚å·åˆ™ä¸º1ï¼ˆçœŸï¼‰ã€‚å³0âˆ§0ï¼0ï¼Œ0âˆ§1ï¼1ï¼Œ1âˆ§1ï¼0</p><h1 id="å¿«é€Ÿæ¯”è¾ƒä¸¤ä¸ªå€¼"><a href="#å¿«é€Ÿæ¯”è¾ƒä¸¤ä¸ªå€¼" class="headerlink" title="å¿«é€Ÿæ¯”è¾ƒä¸¤ä¸ªå€¼"></a>å¿«é€Ÿæ¯”è¾ƒä¸¤ä¸ªå€¼</h1><p>å¯ä»¥ç”¨a^b == 0æ¥å¿«é€Ÿæ¯”è¾ƒä¸¤ä¸ªå€¼ï¼Œæ•ˆç‡ä¼šæ›´é«˜</p><h1 id="ä½¿æŸäº›ç‰¹å®šçš„ä½ç¿»è½¬"><a href="#ä½¿æŸäº›ç‰¹å®šçš„ä½ç¿»è½¬" class="headerlink" title="ä½¿æŸäº›ç‰¹å®šçš„ä½ç¿»è½¬"></a>ä½¿æŸäº›ç‰¹å®šçš„ä½ç¿»è½¬</h1><p>0 ^ 1 = 1  </p><p>1 ^ 1 = 0  </p><p> ä¾‹å¦‚ï¼šç¿»è½¬10100001çš„ç¬¬6ä½ï¼Œç­”æ¡ˆï¼šå¯ä»¥å°†è¯¥æ•°ä¸00100000è¿›è¡ŒæŒ‰ä½å¼‚æˆ–è¿ç®—ï¼š10100001 ^ 00100000 = 10000001</p><h1 id="åˆ¤æ–­ä¸€ä¸ªäºŒè¿›åˆ¶æ•°ä¸­1çš„æ•°é‡æ˜¯å¥‡æ•°è¿˜æ˜¯å¶æ•°"><a href="#åˆ¤æ–­ä¸€ä¸ªäºŒè¿›åˆ¶æ•°ä¸­1çš„æ•°é‡æ˜¯å¥‡æ•°è¿˜æ˜¯å¶æ•°" class="headerlink" title="åˆ¤æ–­ä¸€ä¸ªäºŒè¿›åˆ¶æ•°ä¸­1çš„æ•°é‡æ˜¯å¥‡æ•°è¿˜æ˜¯å¶æ•°"></a>åˆ¤æ–­ä¸€ä¸ªäºŒè¿›åˆ¶æ•°ä¸­1çš„æ•°é‡æ˜¯å¥‡æ•°è¿˜æ˜¯å¶æ•°</h1><p>æ±‚10100001ä¸­1çš„æ•°é‡æ˜¯å¥‡æ•°è¿˜æ˜¯å¶æ•°ï¼› ç­”æ¡ˆï¼š1 ^ 0 ^ 1 ^ 0 ^ 0 ^ 0 ^ 0 ^ 1 = 1,ç»“æœä¸º<code>1</code>å°±æ˜¯å¥‡æ•°ä¸ª1ï¼Œç»“æœä¸º0å°±æ˜¯å¶æ•°ä¸ª1</p><h1 id="ä¸ä½¿ç”¨å…¶ä»–ç©ºé—´ï¼Œäº¤æ¢ä¸¤ä¸ªå€¼"><a href="#ä¸ä½¿ç”¨å…¶ä»–ç©ºé—´ï¼Œäº¤æ¢ä¸¤ä¸ªå€¼" class="headerlink" title="ä¸ä½¿ç”¨å…¶ä»–ç©ºé—´ï¼Œäº¤æ¢ä¸¤ä¸ªå€¼"></a>ä¸ä½¿ç”¨å…¶ä»–ç©ºé—´ï¼Œäº¤æ¢ä¸¤ä¸ªå€¼</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = a ^ b;</span><br><span class="line">b = a ^ b; <span class="comment">//a ^ b ^ b = a ^ 0 = a;</span></span><br><span class="line">a = a ^ b;</span><br></pre></td></tr></table></figure><h1 id="ä¸€ä¸ªæ•´å‹æ•°ç»„é‡Œé™¤äº†Nä¸ªæ•°å­—ä¹‹å¤–ï¼Œå…¶ä»–çš„æ•°å­—éƒ½å‡ºç°äº†ä¸¤æ¬¡ï¼Œæ‰¾å‡ºè¿™Nä¸ªæ•°å­—"><a href="#ä¸€ä¸ªæ•´å‹æ•°ç»„é‡Œé™¤äº†Nä¸ªæ•°å­—ä¹‹å¤–ï¼Œå…¶ä»–çš„æ•°å­—éƒ½å‡ºç°äº†ä¸¤æ¬¡ï¼Œæ‰¾å‡ºè¿™Nä¸ªæ•°å­—" class="headerlink" title="ä¸€ä¸ªæ•´å‹æ•°ç»„é‡Œé™¤äº†Nä¸ªæ•°å­—ä¹‹å¤–ï¼Œå…¶ä»–çš„æ•°å­—éƒ½å‡ºç°äº†ä¸¤æ¬¡ï¼Œæ‰¾å‡ºè¿™Nä¸ªæ•°å­—"></a>ä¸€ä¸ªæ•´å‹æ•°ç»„é‡Œé™¤äº†Nä¸ªæ•°å­—ä¹‹å¤–ï¼Œå…¶ä»–çš„æ•°å­—éƒ½å‡ºç°äº†ä¸¤æ¬¡ï¼Œæ‰¾å‡ºè¿™Nä¸ªæ•°å­—</h1><p>ä»{A B C B C D A}æ‰¾å‡ºå•ä¸ªå­—æ¯çš„D</p><p>ç”¨åˆ°ï¼š  </p><ol><li>A ^ A = 0;  </li><li>å¼‚æˆ–æ»¡è¶³äº¤æ¢å¾‹ã€ç»“åˆå¾‹</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">A ^ B ^ C ^ B ^ C ^ D ^ A</span><br><span class="line">= A ^ A ^ B ^ B ^ C ^ C ^ D</span><br><span class="line">= <span class="number">0</span> ^ <span class="number">0</span> ^ <span class="number">0</span> ^ D</span><br><span class="line">= <span class="number">0</span> ^ D</span><br><span class="line">= D</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œå½“ç„¶æ˜¯çº¿æ€§çš„ï¼Œç©ºé—´å¤æ‚åº¦O(1)</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">singleNumber</span><span class="params">(<span class="keyword">int</span> A[], <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ç‰¹æ®Šæƒ…å†µ1,2  </span></span><br><span class="line">    <span class="keyword">if</span>(n&lt;=<span class="number">0</span>) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>) <span class="keyword">return</span> A[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> result = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i ++) &#123;</span><br><span class="line">        result = result ^ A[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ä¸€ä¸ªæ•´å‹æ•°ç»„é‡Œé™¤äº†ä¸¤ä¸ªæ•°å­—ä¹‹å¤–ï¼Œå…¶ä»–çš„æ•°å­—éƒ½å‡ºç°äº†ä¸¤æ¬¡ã€‚æ‰¾å‡ºè¿™ä¸¤ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—"><a href="#ä¸€ä¸ªæ•´å‹æ•°ç»„é‡Œé™¤äº†ä¸¤ä¸ªæ•°å­—ä¹‹å¤–ï¼Œå…¶ä»–çš„æ•°å­—éƒ½å‡ºç°äº†ä¸¤æ¬¡ã€‚æ‰¾å‡ºè¿™ä¸¤ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—" class="headerlink" title="ä¸€ä¸ªæ•´å‹æ•°ç»„é‡Œé™¤äº†ä¸¤ä¸ªæ•°å­—ä¹‹å¤–ï¼Œå…¶ä»–çš„æ•°å­—éƒ½å‡ºç°äº†ä¸¤æ¬¡ã€‚æ‰¾å‡ºè¿™ä¸¤ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—"></a>ä¸€ä¸ªæ•´å‹æ•°ç»„é‡Œé™¤äº†ä¸¤ä¸ªæ•°å­—ä¹‹å¤–ï¼Œå…¶ä»–çš„æ•°å­—éƒ½å‡ºç°äº†ä¸¤æ¬¡ã€‚æ‰¾å‡ºè¿™ä¸¤ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—</h1><p>æ€è·¯ï¼š  </p><ol><li>è‚¯å®šè¿˜æ˜¯åƒæˆ‘ä»¬ä¸Šé¢çš„è§£æ³•ä¸€æ ·ï¼Œæ‰€æœ‰æ•°è¿›è¡Œå¼‚æˆ–ï¼Œä¸è¿‡æœ€ç»ˆå¾—åˆ°çš„ç»“æœæ˜¯ a å’Œ bï¼ˆå‡è®¾ a å’Œ b æ˜¯è½å•çš„æ•°å­—ï¼‰ä¸¤ä¸ªå€¼çš„å¼‚æˆ–ç»“æœ aXORbï¼Œæ²¡æœ‰ç›´æ¥å¾—åˆ° a å’Œ b çš„å€¼ï¼›  </li><li>é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•æ‰¾åˆ°ä¸¤ä¸ªçš„çœŸå®å€¼å‘¢ï¼Ÿæ ¹æ®å¼‚æˆ–çš„ç‰¹ç‚¹å¯ä»¥å‘ç°ï¼Œä¸¤ä¸ªç›¸åŒçš„ä½å¼‚æˆ–åç»“æœæ˜¯0ï¼Œä¸åŒåˆ™æ˜¯1ã€‚åŒæ—¶aXORbä¸å¯èƒ½æ¯ä¸€ä½éƒ½æ˜¯0ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¾—çŸ¥å‡å¦‚æœ‰ä¸€ä½æ˜¯1çš„è¯ï¼Œåˆ™å¯¹åº”ç€aä¸båœ¨æ­¤ä½ä¸Šçš„æ•°å€¼æ˜¯ä¸åŒçš„ï¼Œç”±æ­¤æˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™ä¸ªç‰¹ç‚¹è¿›è¡Œè§£é¢˜ã€‚å› ä¸ºa,bä¸åŒï¼Œè‚¯å®šæœ‰ä¸€ä¸ªä½æ˜¯1ï¼Œå¯¹åº”ç€é‚£ä¸ªå°±æ˜¯0ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ‰¾å‡ºaXORbç¬¬ä¸€ä½ä¸º1çš„é‚£ä¸ªä½ï¼ŒæŠŠå®ƒæå–å‡ºæ¥ï¼Œç„¶åå…¶ä»–ä½å…¨ä¸º0ï¼Œç„¶åä¸æ•°ç»„æ‰€æœ‰çš„æ•°è¿›è¡Œ&amp;è¿ç®—ï¼Œè¿™æ ·å°±èƒ½æ‰¾å‡ºä¸æå–å‡ºçš„é‚£ä¸ªæ•°ï¼ˆå…¶å®ä¹Ÿåªæ˜¯ä¸€ä¸ªä½æœ‰ç”¨ï¼‰çš„ä½ç›¸ç­‰çš„æ•°ï¼Œæ¯”å¦‚æå–å‡ºçš„æ˜¯0001ï¼Œé‚£ä¹ˆ1111å¯ä»¥è¢«&amp;æ‰¾å‡ºæ¥ã€‚</li><li>aXORb = a ^ bï¼Œå‡è®¾æˆ‘ä»¬å·²ç»æ‰¾åˆ°äº† aï¼Œæ ¹æ®å¼‚æˆ–ç‰¹æ€§ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œb = aXORb ^ aï¼›è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ‰¾å‡º bï¼›æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å¾ªç¯ä¸¤æ¬¡ <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getFirstOneBit</span><span class="params">(<span class="keyword">int</span> num)</span> <span class="comment">//è¾“å‡º num çš„ä½ä½ä¸­çš„ç¬¬ä¸€ä¸ª 1 çš„ä½ç½®  </span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num &amp; ~(num - <span class="number">1</span>);  <span class="comment">// num ä¸ -num ç›¸ä¸æ‰¾åˆ°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">findTwo</span><span class="params">(<span class="keyword">int</span> *array, <span class="keyword">int</span> length)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> aXORb = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> firstOneBit = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> b = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">        aXORb ^= array[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">assert</span>(aXORb != <span class="number">0</span>); <span class="comment">//ä¿è¯é¢˜ç›®è¦æ±‚ï¼Œæœ‰ä¸¤ä¸ªsingleçš„æ•°å­—ï¼Œå¦‚æœä¸æˆç«‹åˆ™é€€å‡ºç¨‹åº</span></span><br><span class="line">    firstOneBit = <span class="built_in">getFirstOneBit</span>(aXORb);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span>(array[i] &amp; firstOneBit)</span><br><span class="line">        <span class="comment">//ä¸æå–å‡ºçš„é‚£ä¸ªæ•°å¯¹åº”çš„ä½ç›¸åŒçš„æ•°æœ‰å¾ˆå¤šï¼Œä½†æ˜¯å…¶ä»–çš„æ•°éƒ½æœ‰ç›¸åŒçš„ä¸¤ä¸ªï¼Œå¼‚æˆ–åå°±å¯ä»¥ç›¸é™¤äº†ï¼Œåªç•™ä¸‹å•ç‹¬çš„é‚£ä¸€ä¸ª</span></span><br><span class="line">         &#123;</span><br><span class="line">            a ^= array[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    b = aXORb ^ a;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;a: &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;b: &quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> array1[] = &#123;<span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">7</span>&#125;;</span><br><span class="line">    <span class="built_in">findTwo</span>(array1, <span class="number">8</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>#</li></ol>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¼‚æˆ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ’åºå‡½æ•°sort</title>
      <link href="/2018/03/06/%E6%8E%92%E5%BA%8F%E5%87%BD%E6%95%B0/"/>
      <url>/2018/03/06/%E6%8E%92%E5%BA%8F%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>å£°æ˜ç®€ä»‹ã€æ¯”è¾ƒå‡½æ•°ã€ç»“æ„ä½“æ’åº</p><span id="more"></span><h1 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h1><ul><li>æ’åºç”¨çš„å‡½æ•°æ˜¯sortå‡½æ•°ï¼ŒåŒ…å«åœ¨&lt; algorithm &gt;æ–‡ä»¶ä¸­ã€‚</li><li>sort()ä¸ä»…å¯ä»¥ç”¨æ¥ç»™æ•°å­—æ’åºï¼Œè¿˜å¯ä»¥ç»™å­—ç¬¦ä¸²æ’åºï¼Œé»˜è®¤çš„æ˜¯å‡åºï¼Œå¦‚æœéœ€è¦é™åºçš„è¯ï¼Œå¯ä»¥è‡ªå·±å†™ä¸€ä¸ªcmpå›è°ƒå‡½æ•°ï¼ˆå‡½æ•°åå¯è‡ªæ‹Ÿï¼Œé€šå¸¸ç”¨cmpï¼‰ï¼Œç„¶ååœ¨sortå‡½æ•°ä¸­ï¼ŒåŠ ä¸Šï¼ˆcmpï¼‰å‡½æ•°åå³å¯ã€‚</li><li>å®ç°åŸç†ï¼šsortå¹¶ä¸æ˜¯ç®€å•çš„<strong>å¿«é€Ÿæ’åº</strong>ï¼Œå®ƒå¯¹æ™®é€šçš„å¿«é€Ÿæ’åºè¿›è¡Œäº†ä¼˜åŒ–ï¼Œæ­¤å¤–ï¼Œå®ƒè¿˜ç»“åˆäº†<strong>æ’å…¥æ’åº</strong>å’Œ<strong>æ¨æ’åº</strong>ã€‚ç³»ç»Ÿä¼šæ ¹æ®ä½ çš„æ•°æ®å½¢å¼å’Œæ•°æ®é‡è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„æ’åºæ–¹æ³•ï¼Œè¿™å¹¶ä¸æ˜¯è¯´å®ƒæ¯æ¬¡æ’åºåªé€‰æ‹©ä¸€ç§æ–¹æ³•ï¼Œå®ƒæ˜¯åœ¨ä¸€æ¬¡å®Œæ•´æ’åºä¸­ä¸åŒçš„æƒ…å†µé€‰ç”¨ä¸åŒæ–¹æ³•ï¼Œæ¯”å¦‚ç»™ä¸€ä¸ªæ•°æ®é‡è¾ƒå¤§çš„æ•°ç»„æ’åºï¼Œå¼€å§‹é‡‡ç”¨å¿«é€Ÿæ’åºï¼Œåˆ†æ®µé€’å½’ï¼Œåˆ†æ®µä¹‹åæ¯ä¸€æ®µçš„æ•°æ®é‡è¾¾åˆ°ä¸€ä¸ªè¾ƒå°å€¼åå®ƒå°±ä¸ç»§ç»­å¾€ä¸‹é€’å½’ï¼Œè€Œæ˜¯é€‰æ‹©æ’å…¥æ’åºï¼Œå¦‚æœé€’å½’çš„å¤ªæ·±ï¼Œä»–ä¼šé€‰æ‹©æ¨æ’åºã€‚</li></ul><p>å…·ä½“å‡½æ•°å®ç°ï¼Œè¯·å‚è€ƒï¼š<a href="http://www.cnblogs.com/fengcc/p/5256337.html">http://www.cnblogs.com/fengcc/p/5256337.html</a></p><h1 id="å£°æ˜ç®€ä»‹"><a href="#å£°æ˜ç®€ä»‹" class="headerlink" title="å£°æ˜ç®€ä»‹"></a>å£°æ˜ç®€ä»‹</h1><p>å‡½æ•°å£°æ˜</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt; class RandomItï¼ˆéšæœºè¿­ä»£å™¨) &gt;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">( RandomIt first, RandomIt last )</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt; class RandomIt, class Compare &gt;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">( RandomIt first, RandomIt last, Compare comp )</span></span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å½¢å¼ï¼šsort(first_pointer,first_pointer+n,cmp);</p><p>å‚æ•°è§£é‡Šï¼š ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ•°ç»„çš„é¦–åœ°å€ï¼Œä¸€èˆ¬å†™ä¸Šæ•°ç»„åå°±å¯ä»¥ï¼Œå› ä¸ºæ•°ç»„åæ˜¯ä¸€ä¸ªæŒ‡é’ˆå¸¸é‡ã€‚ç¬¬äºŒä¸ªå‚æ•°ç›¸å¯¹è¾ƒå¥½ç†è§£ï¼Œå³é¦–åœ°å€åŠ ä¸Šæ•°ç»„çš„é•¿åº¦nï¼ˆä»£è¡¨å°¾åœ°å€çš„ä¸‹ä¸€åœ°å€ï¼‰ã€‚æœ€åä¸€ä¸ªå‚æ•°æ˜¯æ¯”è¾ƒå‡½æ•°çš„åç§°ï¼ˆè‡ªå®šä¹‰å‡½æ•°cmpï¼‰ï¼Œè¿™ä¸ªæ¯”è¾ƒå‡½æ•°å¯ä»¥ä¸å†™ï¼Œå³ç¬¬ä¸‰ä¸ªå‚æ•°å¯ä»¥ç¼ºçœï¼Œè¿™æ ·sortä¼šé»˜è®¤æŒ‰æ•°ç»„<strong>å‡åºæ’åº</strong>ã€‚</p><p>ç®€å•ä¾‹å­ï¼šå¯¹æ•°ç»„Açš„0~n-1å…ƒç´ è¿›è¡Œå‡åºæ’åºï¼Œåªè¦å†™sort(A,A+n)å³å¯ï¼›å¯¹äºå‘é‡Vä¹Ÿä¸€æ ·ï¼Œsort(v.begin(),v.end())å³å¯ã€‚</p><h1 id="sortæ‰©å±•-æ¯”è¾ƒå‡½æ•°"><a href="#sortæ‰©å±•-æ¯”è¾ƒå‡½æ•°" class="headerlink" title="sortæ‰©å±•-æ¯”è¾ƒå‡½æ•°"></a>sortæ‰©å±•-æ¯”è¾ƒå‡½æ•°</h1><h2 id="è‡ªå·±å®šä¹‰æ¯”è¾ƒå‡½æ•°"><a href="#è‡ªå·±å®šä¹‰æ¯”è¾ƒå‡½æ•°" class="headerlink" title="è‡ªå·±å®šä¹‰æ¯”è¾ƒå‡½æ•°"></a>è‡ªå·±å®šä¹‰æ¯”è¾ƒå‡½æ•°</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æƒ…å†µä¸€ï¼šæ•°ç»„æ’åˆ—</span></span><br><span class="line"><span class="keyword">int</span> A[<span class="number">100</span>];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp1</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span><span class="comment">//intä¸ºæ•°ç»„æ•°æ®ç±»å‹</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a &gt; b;<span class="comment">//é™åºæ’åˆ—</span></span><br><span class="line">    <span class="comment">//return a &lt; b;//é»˜è®¤çš„å‡åºæ’åˆ—</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">sort</span>(A, A+<span class="number">100</span>, cmp1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æƒ…å†µäºŒï¼šç»“æ„ä½“æ’åº</span></span><br><span class="line">Student Stu[<span class="number">100</span>];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp2</span><span class="params">(Student a, Student b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a.id&gt;b.id;<span class="comment">//æŒ‰ç…§å­¦å·é™åºæ’åˆ—</span></span><br><span class="line">    <span class="comment">//return a.id&lt;b.id;//æŒ‰ç…§å­¦å·å‡åºæ’åˆ—</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">sort</span>(Stu,Stu+<span class="number">100</span>,cmp2);</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨æ ‡å‡†åº“å‡½æ•°"><a href="#ä½¿ç”¨æ ‡å‡†åº“å‡½æ•°" class="headerlink" title="ä½¿ç”¨æ ‡å‡†åº“å‡½æ•°"></a>ä½¿ç”¨æ ‡å‡†åº“å‡½æ•°</h2><p>functionalæä¾›äº†ä¸€å †åŸºäºæ¨¡æ¿çš„æ¯”è¾ƒå‡½æ•°å¯¹è±¡ï¼Œå®ƒä»¬æ˜¯ï¼šequal_to<Type>ã€not_equal_to<Type>ã€greater<Type>ã€greater_equal<Type>ã€less<Type>ã€less_equal<Type>ã€‚è¿™äº›ä¸œè¥¿çš„ç”¨æ³•çœ‹åå­—å°±çŸ¥é“äº†ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä¹ˆsortè¦ç”¨åˆ°çš„ä¹Ÿåªæ˜¯greaterå’Œlesså°±è¶³å¤Ÿäº†ï¼Œç”¨æ³•å¦‚ä¸‹ï¼š</Type></Type></Type></Type></Type></Type></p><ul><li>å‡åºï¼šsort(begin,end,less<data-type>())</data-type></li><li>é™åºï¼šsort(begin,end,greater<data-type>())</data-type></li></ul><p>ç¼ºç‚¹ï¼šä¹Ÿåªæ˜¯å®ç°ç®€å•çš„æ’åºï¼Œç»“æ„ä½“ä¸é€‚ç”¨ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//ç®€å•ä½¿ç”¨æ–¹æ³•</span></span><br><span class="line"><span class="built_in">sort</span>(A,A+<span class="number">100</span>,greater&lt;<span class="keyword">int</span>&gt;());<span class="comment">//é™åºæ’åˆ—</span></span><br><span class="line"><span class="built_in">sort</span>(A,A+<span class="number">100</span>,less&lt;<span class="keyword">int</span>&gt;());<span class="comment">//å‡åºæ’åˆ—</span></span><br></pre></td></tr></table></figure><h2 id="é‡è½½ç»“æ„ä½“æˆ–ç±»çš„æ¯”è¾ƒè¿ç®—ç¬¦"><a href="#é‡è½½ç»“æ„ä½“æˆ–ç±»çš„æ¯”è¾ƒè¿ç®—ç¬¦" class="headerlink" title="é‡è½½ç»“æ„ä½“æˆ–ç±»çš„æ¯”è¾ƒè¿ç®—ç¬¦"></a>é‡è½½ç»“æ„ä½“æˆ–ç±»çš„æ¯”è¾ƒè¿ç®—ç¬¦</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æƒ…å†µä¸€ï¼šåœ¨ç»“æ„ä½“å†…éƒ¨é‡è½½</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Student</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> id;</span><br><span class="line">    string name;</span><br><span class="line">    <span class="keyword">double</span> grade;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> Student&amp; s)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> id&gt;s.id;<span class="comment">//é™åºæ’åˆ—</span></span><br><span class="line">        <span class="comment">//return id&lt;s.id;//å‡åºæ’åˆ—</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;Student&gt; V;</span><br><span class="line"><span class="built_in">sort</span>(V.<span class="built_in">begin</span>(),V.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">//æƒ…å†µäºŒï¼šåœ¨å¤–éƒ¨é‡è½½</span></span><br><span class="line">vector&lt;Student&gt; V;</span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> Student&amp; s1, <span class="keyword">const</span> Student&amp; s2)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> s1.id&gt;s2.id;<span class="comment">//é™åºæ’åˆ—</span></span><br><span class="line">    <span class="comment">//return s1.id&lt;s2.id;//å‡åºæ’åˆ—</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">sort</span>(V.<span class="built_in">begin</span>(),V.<span class="built_in">end</span>());</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šä¸€å®šè¦é‡è½½&lt;è¿ç®—ç¬¦ï¼Œå› ä¸ºç³»ç»Ÿé»˜è®¤æ˜¯é™åºï¼Œç”¨çš„æ˜¯&lt;è¿ç®—ç¬¦ã€‚</p><h2 id="å£°æ˜æ¯”è¾ƒç±»ï¼ˆå°‘ç”¨ï¼‰"><a href="#å£°æ˜æ¯”è¾ƒç±»ï¼ˆå°‘ç”¨ï¼‰" class="headerlink" title="å£°æ˜æ¯”è¾ƒç±»ï¼ˆå°‘ç”¨ï¼‰"></a>å£°æ˜æ¯”è¾ƒç±»ï¼ˆå°‘ç”¨ï¼‰</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Less</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="keyword">const</span> Student&amp; s1, <span class="keyword">const</span> Student&amp; s2)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> s1.id&lt;s2.id; <span class="comment">//å‡åºæ’åˆ—</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">sort</span>(sutVector.<span class="built_in">begin</span>(),stuVector.<span class="built_in">end</span>(),<span class="built_in">Less</span>());</span><br></pre></td></tr></table></figure><p>(å‚è€ƒè‡ª:<a href="https://www.cnblogs.com/AlvinZH/p/6784862.html?utm_source=itdadao&amp;utm_medium=referral">sortå‡½æ•°è¯¦è§£</a>)</p><h1 id="ç»“æ„ä½“æ’åº"><a href="#ç»“æ„ä½“æ’åº" class="headerlink" title="ç»“æ„ä½“æ’åº"></a>ç»“æ„ä½“æ’åº</h1><ol><li>æœ‰ä¸‰ä¸ªäººï¼ˆPersonç»“æ„ä½“ï¼‰ï¼Œæ¯ä¸ªäººéƒ½æœ‰nameï¼ˆstringå‹ï¼‰å’Œageï¼ˆintå‹ï¼‰ä¸¤ä¸ªå±æ€§ï¼Œç°åœ¨éœ€è¦æŒ‰ç…§ä¸‹é¢çš„è§„åˆ™æ’åºï¼šå…ˆä»¥å§“åæŒ‰ä»å°åˆ°å¤§æ’åºï¼ˆå¦‚abc&lt;abd)ï¼Œå¦‚æœå§“åç›¸åŒï¼Œåˆ™æŒ‰ç…§å¹´é¾„ä»å¤§åˆ°å°æ’åºã€‚</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span>&#123;</span></span><br><span class="line">    string name;</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(Person a,Person b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(a.name!=b.name)&#123;</span><br><span class="line">        <span class="keyword">return</span> a.name&lt;b.name;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a.age&gt;b.age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Person p[<span class="number">3</span>];</span><br><span class="line">    <span class="keyword">int</span> i,j;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</span><br><span class="line">        cin&gt;&gt;p[i].name&gt;&gt;p[i].age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ’åº</span></span><br><span class="line">    <span class="built_in">sort</span>(p,p+<span class="number">3</span>,cmp);</span><br><span class="line">    <span class="comment">//ä¾æ¬¡è¾“å‡º</span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</span><br><span class="line">        cout&lt;&lt;p[i].name&lt;&lt;<span class="string">&#x27; &#x27;</span>&lt;&lt;p[i].age&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>å¯¹Nä¸ªäººï¼ˆPersonï¼‰è¿›è¡Œæ’åºï¼Œè§„åˆ™å¦‚ä¸‹ï¼šæ¯ä¸ªäººæœ‰3ä¸ªå±æ€§ï¼Œnameï¼ˆstringå‹ï¼‰ï¼Œageï¼ˆintå‹ï¼‰ï¼Œheightï¼ˆintå‹ï¼‰ã€‚ä¼˜å…ˆæŒ‰ç…§nameç”±å¤§åˆ°å°æ’åï¼Œnameç›¸åŒçš„åˆ™æŒ‰ç…§ageç”±å¤§åˆ°å°æ’åºï¼Œageç›¸åŒçš„åˆ™æŒ‰ç…§heightç”±å¤§åˆ°å°æ’åºã€‚</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span>&#123;</span></span><br><span class="line">    string name;</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">int</span> height;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(Person a, Person b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(a.name != b.name)</span><br><span class="line">        <span class="keyword">return</span> a.name &gt; b.name;</span><br><span class="line">    <span class="keyword">if</span>(a.name == b.name &amp;&amp; a.age != b.age)</span><br><span class="line">        <span class="keyword">return</span> a.age &gt; b.age;</span><br><span class="line">    <span class="keyword">if</span>(a.name == b.name &amp;&amp; a.age == b.age)</span><br><span class="line">        <span class="keyword">return</span> a.height &gt; b.height;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    Person p[n];</span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;n; i++)</span><br><span class="line">        cin&gt;&gt; p[i].name &gt;&gt; p[i].age &gt;&gt; p[i].height;</span><br><span class="line">    <span class="built_in">sort</span>(p, p + n, cmp);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; p[i].name &lt;&lt;<span class="string">&#x27; &#x27;</span></span><br><span class="line">             &lt;&lt; p[i].age &lt;&lt;<span class="string">&#x27; &#x27;</span></span><br><span class="line">             &lt;&lt; p[i].height &lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>ï¼›</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‚è€ƒè‡ªï¼š</p><p>[<a href="http://www.cnblogs.com/-beyond/p/5902113.html">ç»“æ„ä½“æˆ–å¯¹è±¡æ’åº</a>]</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> STL </tag>
            
            <tag> æ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Good Morning vocation</title>
      <link href="/2018/03/03/YXT-Good-morning-vocationmd/"/>
      <url>/2018/03/03/YXT-Good-morning-vocationmd/</url>
      
        <content type="html"><![CDATA[<p>Good morning, beautiful vocation</p><p>Good bye, beautiful vocation</p><h1 id><a href="#" class="headerlink" title></a><span id="more"></span></h1><h1 id="Good-Morningï¼Œbeautiful"><a href="#Good-Morningï¼Œbeautiful" class="headerlink" title="Good Morningï¼Œbeautiful"></a>Good Morningï¼Œbeautiful</h1><p>å›æƒ³æ”¾å‡å‰å„ç§å¯’å‡è®¡åˆ’ï¼Œé“ºå¤©ç›–åœ°ï¼Œé›„å¿ƒå£®å¿—ï¼Œæ°”åŠ¿æ˜‚æ˜‚ï¼Œå›ä¸ªå®¶çŒ›å¦‚æ”¾è™å½’å±±ï¼Œä¼¼ä¹å¯¹æœªæ¥å……æ»¡äº†æ— é™çš„æœŸæœ›</p><p>æ—¢è¦å­¦è¿™ï¼Œåˆè¦å­¦é‚£ï¼Œæ—¢è¦æŠ˜è…¾è¿™ï¼Œåˆè¦æ¢ç´¢é‚£ï¼Œçœ‹æ¥èµ·æ¥å¾ˆå……å®çš„æ ·å­ã€‚</p><p>ç„¶è€Œï¼Œå“ˆå“ˆâ€¦â€¦</p><p>å›åˆ°å®¶é‡Œé¢çš„ç¬¬ä¸€ä¸ªæ˜ŸæœŸåˆ°æ˜¯çƒ­æƒ…ä¸å‡ï¼Œçƒ­è¡€æ²¸è…¾ï¼Œéšæ‰‹æ‹¿èµ·ä¸€æœ¬ã€Šc++ primer plusã€‹å°±æ˜¯çœ‹ï¼Œå‡ ä¹æ˜¯æŠŠåƒé¥­çš„æ—¶é—´éƒ½ç”¨ä¸Šäº†ï¼Œæ¯å¤©èµ·æ¥çš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯æ‰“å¼€ä¹¦ï¼Œè¾¹çœ‹ä¹¦è¾¹åƒæ—©é¤ï¼Œåƒå®Œåˆé¤ç¬¬ä¸€ä»¶äº‹åˆæ˜¯çœ‹ä¹¦ï¼Œæ´—å®Œæ¾¡åˆæ˜¯çœ‹ä¹¦ï¼Œå¥½åƒèº«ä½“æ—©å·²å˜æˆäº†ACæ°¸åŠ¨æœºã€‚å› æ­¤å¾—åˆ°çš„æˆæœä¹Ÿæ˜¯ä¸å°‘ï¼Œçœ‹äº†ä¸€ç™¾äºŒç™¾é¡µçš„æ ·å­</p><p>åŒæ—¶ç¬¬ä¸€ä¸ªæ˜ŸæœŸå¹²çš„äº‹æƒ…è¿˜çœŸä¸å°‘ï¼Œå®Œæˆé¡¹ç›®è®¡åˆ’çš„éƒ¨ç½²ï¼Œè™½ç„¶æ­¤è®¡åˆ’æ—©åœ¨12æœˆæ—¶å°±å¯ä»¥è¡ŒåŠ¨äº†ï¼Œä½†æ˜¯æœ€ç»ˆè¿˜æ˜¯ä»¥å¤±è´¥å‘Šç»ˆã€‚è¿˜æœ‰å°±æ˜¯é©¬é©¬è™è™å¾—ç¿»è¯‘äº†ä¸€äº›å®˜æ–¹wikiï¼Œè¯´æ˜¯ä¸€äº›ï¼Œå…¶å®å¾ˆå°‘é‡ï¼Œåˆ°ä¸çŸ¥é“æœ‰æ²¡æœ‰400å­—ã€‚</p><p>ç¬¬ä¸€ä¸ªæ˜ŸæœŸçš„ç–¯ç‹‚ï¼Œå¯èƒ½æ˜¯ç”±äºæœŸæœ«é‚£æ®µæ—¶é—´æ²¡æœ‰å­¦è¿‡è¯¾å¤–çš„çŸ¥è¯†ï¼Œéƒ½åœ¨æ”¾æ¾è‡ªå·±ï¼Œå‡†å¤‡è€ƒè¯•ï¼Œè¿˜æœ‰ä¸€ä¸ªæŠ˜è…¾ã€‚æŠ˜è…¾å•¥å‘¢ï¼ŒæŠ˜è…¾è£…linuxï¼ŒæœŸæœ«å‰å‡ ä¹æ‹¿æ—¶é—´å»éƒ½è£…linuxäº†ï¼Œè¿è€ƒè¯•å‰å‡ å¤©éƒ½è¿ç»­é€šå®µï¼Œæ—©ä¸Šèµ·åºŠåé™¤äº†æ´—æ¾¡æ‹¿å¤–å–å°±ä¸€ç›´åç€å»ç ”ç©¶ç›´åˆ°å‡Œæ™¨3,4ç‚¹ã€‚è¯´èµ·æ¥ä¹Ÿæ˜¯ï¼Œé‚£æ—¶å€™åˆšåˆšå…¥é—¨å°±å»æŠ˜è…¾archï¼Œè€Œä¸”è¿˜è¦åŒç³»ç»Ÿï¼Œå½“æ—¶åˆä¸çŸ¥é“è‡ªå·±çš„æœºæ¢°ç¡¬ç›˜æ˜¯mbrçš„ï¼Œå›ºæ€çš„gptçš„ï¼Œå¯¼è‡´å„ç§ç¿»è½¦ï¼ŒåŒæ—¶win10ä¹Ÿä¸å°å¿ƒæ ¼æ‰23333</p><p>è‚¡ç¥¨èˆ¬çš„ç–¯ç‹‚ï¼Œæ³¨å®šä¼šè½å…¥ä½ä¼°ï¼Œæ¥ä¸‹æ¥çš„ä¸€æ˜ŸæœŸæ˜æ˜¾æ„Ÿåˆ°åŠ¨åŠ›ä¸è¶³ï¼Œå¼€å§‹æ…¢æ…¢æ”¾æ¾è­¦æƒ•ï¼ŒåŒæ—¶è‡ªå·±ä¹Ÿæ…¢æ…¢ä½“ä¼šåˆ°è¿™ç§å˜åŒ–â€”â€”ä¸å…¶åœ¨ä¹¦é¢å‰å‘å‘†ï¼Œè¿˜ä¸å¦‚å»åšä¸€äº›æœ‰è¶£çš„äº‹ã€‚äºæ˜¯é‚£æ—¶å€™åˆæŠ˜è…¾èµ·äº†linuxï¼Œè®°å¾—ä¸»è¦æ˜¯æŠ˜è…¾äº†manjaroï¼Œdeepinï¼Œmintç­‰å‘è¡Œç‰ˆï¼Œè¿˜æœ‰xfce4ï¼Œgnomeï¼Œkdeç­‰ç­‰æ¡Œé¢ç¯å¢ƒï¼Œå½“æ—¶è¿˜æ˜¯ä»¥æ˜“ç”¨å’Œç¨³å®šä¸ºä¸»ï¼Œå°±é€‰æ‹©äº†å¾…åœ¨deepinï¼Œä¸»è¦æ˜¯å½“æ—¶è¿˜æ˜¯æ„è¯†åˆ°äº†æŠ˜è…¾æµªè´¹æ—¶é—´ï¼Œå¹¶ä¸”è¿™ç§çŠ¶æ€è¿˜æŒç»­äº†åŠä¸ªæœˆå¤šä¸å»å„ç§çŠ¶æ€ï¼ŒåŒæ—¶è¿˜æ˜¯linuxç¾¤åŠè§£ç¾¤å‹2333</p><p>ä¸æ­¤åŒæ—¶ï¼Œè¿˜å¼€å§‹äº†è§†é¢‘çš„å­¦ä¹ ï¼Œä½†æ˜¯åœ¨biliæ‰¾åˆ°äº†å¤§é‡çš„å­¦ä¹ è§†é¢‘ï¼Œä¸€å¼€å§‹é›„å¿ƒå£®å¿—åœ°æƒ³è¦å»å­¦å®Œï¼Œåæ¥è¿˜æ˜¯å¤ªå¤©çœŸï¼Œåªæ˜¯å­¦äº†KMPå’ŒBMï¼Œçœ‹äº†å‡ é“å­—ç¬¦ä¸²é—®é¢˜ã€‚è¿™ä¸ªæ˜ŸæœŸå°±tmè¿™æ ·è¿‡å»äº†</p><p>åˆ°äº†æ¥è¿‘æ–°å¹´é‚£æ®µæ—¶é—´ï¼Œå·®ä¸å¤šæ˜¯å¹´20å·¦å³åŠæ–°å¹´å§ã€‚é‚£æ—¶å€™æœ‰ä¸ªé«˜ä¸‰åŒå­¦èšä¼šçš„å®‰æ’ï¼ŒæœŸé—´åŒç­–åˆ’ç»„å„ä½dalaoè§é¢å•†é‡äº†ä¸‹ï¼Œä¹Ÿæ˜¯ç¦»åˆ«åŠå¹´åçš„ç›¸è§ï¼Œä¸€åˆ‡å®‰å¥½ï¼åªæ˜¯å¥³çš„éƒ½å˜æ¼‚äº®ï¼Œç”·çš„å˜å¸…äº†ï¼Œè€Œè‡ªå·±è¿˜æ˜¯ä¸€ä¸ªå‚»é€¼æ ·2333ã€‚é‚£æ®µæ—¶é—´çš„å­¦ä¹ çŠ¶æ€ä¹Ÿæ˜¯ä¸æ¸©ä¸ç«ï¼Œä¸»è¦æ˜¯çœ‹ä¾¯æ°è€å¸ˆçš„c++è§†é¢‘ï¼Œå‡‘æ´»çœ‹å®Œäº†ã€‚çœ‹å®Œæ˜¯çœ‹å®Œäº†ï¼Œå¯åˆè®°å¾—å¤šå°‘å‘¢ï¼Ÿ</p><p>å¹´å‰åŠå¹´åä¸ä¹…ï¼Œç”¨hexoå’Œgithubæ­å»ºäº†ä¸ªåšå®¢ï¼Œåœ¨ä¸Šä¸€å¹´çš„11æœˆæ—©å·²è¿™ä¸ªè®¡åˆ’ï¼Œæ‹–äº†è¿™ä¹ˆä¹…æˆ‘ä¹Ÿæ˜¯ä¸çŸ¥é“è¯´ä»€ä¹ˆäº†ã€‚ã€‚ã€‚æ­å»ºäº†åšå®¢ä¹‹åçƒ­æƒ…å°±æ¥äº†ï¼Œå„ç§å‘åšæ–‡ï¼Œå¤§å¹´30è¿˜åœ¨å‘ï¼Œè¦ä¸æ˜¯å¹´åˆä¸€å‡ºå»èººå°¸ï¼Œè¯´ä¸å®šä¹Ÿä¼šæœ‰å‡ ç¯‡ï¼Œå¹´åˆäºŒéƒ½è¿˜åœ¨å‘ï¼Œæœ€ç–¯ç‹‚çš„æ˜¯å¹´27å¥½åƒï¼Œä¸€å¤©æ†‹å‡ºäº†3,4ç¯‡ã€‚ä¸»è¦å†…å®¹æ˜¯STLï¼Œå…¶å®æˆ‘è¿˜æƒ³æ”¾linuxç­‰å„ç§åˆ«çš„ä¸œè¥¿è¿›å»ï¼Œä½†æ˜¯æ—¶é—´çœŸçš„æ˜¯ä¸å¤Ÿã€‚</p><p>å¹´åˆå…«åŒå­¦èšä¼šï¼Œåˆè§åˆ°éƒ¨åˆ†é«˜ä¸‰åŒå­¦ï¼Œå„ç§å¥‡èŠ±ä¹±æ”¾ã€‚ä¸è¿‡ä¹Ÿæ˜¯åƒé¥­çƒ§çƒ¤ã€‚è¿˜æ˜¯é‚£å¥è¯ï¼Œåªæ˜¯å¥³çš„éƒ½å˜æ¼‚äº®ï¼Œç”·çš„å˜å¸…äº†ã€‚èšä¼šåè¿™æ®µæ—¶é—´å¼€å§‹æ”¾çºµè‡ªå·±ï¼Œæ‰”ä¸‹äº†ä¹¦æœ¬ï¼Œå»æŠ˜è…¾linuxï¼Œä¸»è¦æ˜¯æŠ˜è…¾i3wmæ¡Œé¢ç¯å¢ƒï¼Œæœ¬æ¥æƒ³æ‹¿ä¸€ä¸ªæ˜ŸæœŸï¼Œç°åœ¨çœ‹æ¥ï¼Œéƒ½æœ‰ä¸¤ä¸ªæ˜ŸæœŸï¼Œç›´åˆ°3æœˆ1å·æ¥å­¦æ ¡å‰é‚£ä¸€å¤œéƒ½è£…äº†æ–°ç³»ç»Ÿï¼Œè¿˜å¥½æŠŠwin10æ‰¾äº†å›æ¥ã€‚</p><p>emmmï¼Œæµæ°´è´¦åœ°è®°å½•äº†ä¸‹ï¼Œè¯¥åšçš„è¿˜æ²¡æœ‰åšï¼Œæ¯”å¦‚åˆ¶ä½œäº†ç­çº§ç½‘ç«™ï¼Œæƒ³æƒ³è‡ªå·±ä»¥åçš„æ–¹å‘ï¼Œä¸è¯¥åšçš„å€’æ˜¯åšäº†ã€‚</p><p>å›åˆ°å­¦æ ¡è¿™ä¸¤å¤©ï¼Œå€’æ˜¯æŠŠi3wmé…ç½®å¥½äº†ï¼Œç®—æ˜¯å®Œæˆäº†è‡ªå·±çš„ä¸€ä¸ªå¿ƒæ„¿ï¼Œç„¶è€Œå¤§ä½œä¸šç­‰ç­‰ï¼Œå¼€å§‹ä¸€æ‹¥è€Œè‡³ï¼Œæ˜å¤©è¿˜è¦åŒsm chenå»ä¹°å±äºæˆ‘çš„ç¬¬ä¸€è¾†è‡ªè¡Œè½¦ï¼Œå“¦ï¼Œä¸ï¼Œæ˜¯ä»Šå¤©ã€‚</p><p>è™½ç„¶æ´»å¾—ä¸å¥½ï¼Œä½†æ˜¯ä¸€å®šè¦æœ‰å¿—æ°”</p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/2018-03-03%2003-00-36%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/2018-03-03%2003-16-44%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png"></p>]]></content>
      
      
      <categories>
          
          <category> æ‚ é—²è°ˆ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æ—¥å¸¸æ°´é¢˜</title>
      <link href="/2018/02/22/%E6%97%A5%E5%B8%B8%E6%B0%B4%E9%A2%98/"/>
      <url>/2018/02/22/%E6%97%A5%E5%B8%B8%E6%B0%B4%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>p1008ä¸‰è¿å‡»ã€UVa340çŒœæ•°å­—æ¸¸æˆçš„æç¤ºã€Uva1583ç”Ÿæˆå…ƒï¼ŒPOJ-2271ï¼ˆæ¨¡æ‹Ÿï¼‰,fzcoj1787(æ¨¡æ‹Ÿ)<br><span id="more"></span></p><h1 id="p1008ä¸‰è¿å‡»"><a href="#p1008ä¸‰è¿å‡»" class="headerlink" title="p1008ä¸‰è¿å‡»"></a>p1008ä¸‰è¿å‡»</h1><p>å°†1ï¼Œ2ï¼Œâ€¦ï¼Œ9å…±9ä¸ªæ•°åˆ†æˆä¸‰ç»„ï¼Œåˆ†åˆ«ç»„æˆä¸‰ä¸ªä¸‰ä½æ•°ï¼Œä¸”ä½¿è¿™ä¸‰ä¸ªä¸‰ä½æ•°æ„æˆ1ï¼š2ï¼š3çš„æ¯”ä¾‹ï¼Œè¯•æ±‚å‡ºæ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„ä¸‰ä¸ªä¸‰ä½æ•°ã€‚</p><p>ä¸€ä¸ªä¸ªéå†è¿‡å»ï¼Œåˆ¤æ–­ä¸‰ä¸ªæ•°å­—çš„æ¯ä¸ªä½çš„æ•°å­—æ˜¯å¦é‡å¤ï¼Œè¿™é‡Œç”¨çš„åŠæ³•æ˜¯å…ˆæå–å‡ºæ¯ä¸ªä½çš„æ•°å­—ï¼Œç„¶åæ’åºï¼Œå°†å…¶ä¸æ•°ç»„ä¸‹æ ‡å¯¹é½ï¼Œå¦‚æœä¸æ•°ç»„çš„å€¼ä¸ä¸‹æ ‡çš„å€¼ä¸ç›¸ç­‰ï¼Œåˆ™å‡ºç°é‡å¤ã€‚</p><p><em>è¿™é‡Œå¯ä»¥ç”¨äºæ„é€ å‡ ä¸ªæ•°å­—ï¼Œç„¶ååˆ¤æ–­å‡ºç°çš„æ•°å­—æ˜¯å¦é‡å¤ã€‚</em></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> i, j, a[<span class="number">15</span>];</span><br><span class="line"><span class="keyword">bool</span> ans;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">123</span>; i &lt;= <span class="number">329</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        a[<span class="number">1</span>] = i % <span class="number">10</span>;</span><br><span class="line">        a[<span class="number">2</span>] = i % <span class="number">100</span> / <span class="number">10</span>;</span><br><span class="line">        a[<span class="number">3</span>] = i /<span class="number">1</span> <span class="number">00</span>;</span><br><span class="line">        a[<span class="number">4</span>] = <span class="number">2</span> * i % <span class="number">10</span>;</span><br><span class="line">        a[<span class="number">5</span>] = <span class="number">2</span> * i % <span class="number">100</span> / <span class="number">10</span>;</span><br><span class="line">        a[<span class="number">6</span>] = <span class="number">2</span> * i / <span class="number">100</span>;</span><br><span class="line">        a[<span class="number">7</span>] = <span class="number">3</span> * i % <span class="number">10</span>;</span><br><span class="line">        a[<span class="number">8</span>] = <span class="number">3</span> * i % <span class="number">100</span> / <span class="number">10</span>;</span><br><span class="line">        a[<span class="number">9</span>] = <span class="number">3</span> * i / <span class="number">100</span>;</span><br><span class="line">        <span class="built_in">sort</span>(a + <span class="number">1</span>, a + <span class="number">10</span>);</span><br><span class="line">        ans = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= <span class="number">9</span>; j++) <span class="keyword">if</span> (a[j] != j) ans = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (ans) cout &lt;&lt; i &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; i*<span class="number">2</span> &lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt; i*<span class="number">3</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="UVa340çŒœæ•°å­—æ¸¸æˆçš„æç¤º"><a href="#UVa340çŒœæ•°å­—æ¸¸æˆçš„æç¤º" class="headerlink" title="UVa340çŒœæ•°å­—æ¸¸æˆçš„æç¤º"></a>UVa340çŒœæ•°å­—æ¸¸æˆçš„æç¤º</h1><p>å®ç°ä¸€ä¸ªç»å…¸â€çŒœæ•°å­—â€æ¸¸æˆã€‚ ç»™å®šç­”æ¡ˆåºåˆ—å’Œç”¨æˆ·çŒœçš„åºåˆ—ï¼Œç»Ÿè®¡æœ‰å¤šå°‘æ•°å­—ä½ç½®æ­£ç¡®<br>ï¼ˆAï¼‰ï¼Œæœ‰å¤šå°‘æ•°å­—åœ¨ä¸¤ä¸ªåºåˆ—éƒ½å‡ºç°è¿‡ä½†ä½ç½®ä¸å¯¹ï¼ˆBï¼‰ã€‚<br>è¾“å…¥åŒ…å«å¤šç»„æ•°æ®ã€‚ æ¯ç»„è¾“å…¥ç¬¬ä¸€è¡Œä¸ºåºåˆ—é•¿åº¦nï¼Œç¬¬äºŒè¡Œæ˜¯ç­”æ¡ˆåºåˆ—ï¼Œæ¥ä¸‹æ¥æ˜¯è‹¥å¹²<br>çŒœæµ‹åºåˆ—ã€‚ çŒœæµ‹åºåˆ—å…¨0æ—¶è¯¥ç»„æ•°æ®ç»“æŸã€‚ n=0æ—¶è¾“å…¥ç»“æŸã€‚  </p><h2 id="æ ·ä¾‹è¾“å…¥"><a href="#æ ·ä¾‹è¾“å…¥" class="headerlink" title="æ ·ä¾‹è¾“å…¥"></a>æ ·ä¾‹è¾“å…¥</h2><p>4 1<br>3 5 5<br>1 1 2 3<br>4 3 3 5<br>6 5 5 1<br>6 1 3 5<br>1 3 5 5<br>0 0 0 0<br>10<br>1 2 2 2 4 5 6 6 6 9<br>1 2 3 4 5 6 7 8 9 1<br>1 1 2 2 3 3 4 4 5 5<br>1 2 1 3 1 5 1 6 1 9<br>1 2 2 5 5 5 6 6 6 7<br>0 0 0 0 0 0 0 0 0 0<br>0  </p><h2 id="æ ·ä¾‹è¾“å‡º"><a href="#æ ·ä¾‹è¾“å‡º" class="headerlink" title="æ ·ä¾‹è¾“å‡º"></a>æ ·ä¾‹è¾“å‡º</h2><p>Game 1:<br>(1,1)<br>(2,0)<br>(1,2)<br>(1,2)<br>(4,0)<br>Game 2:<br>(2,4)<br>(3,2)<br>(5,0)<br>(7,0)  </p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>è¿™ä¸ªé¢˜ç›®æ±‚Bæ—¶éš¾ä¸€äº›ã€‚é—®çš„æ˜¯ç”±å¤šå°‘æ•°å­—åœ¨ä¸¤ä¸ªåºåˆ—éƒ½å‡ºç°è¿‡ï¼Œå³ä¸¤ä¸ªåºåˆ—éƒ½è¦æœ‰ï¼Œå› æ­¤å¯ä»¥åˆ†åˆ«è®¡æ•°2ä¸ªåºåˆ—çš„ä¸­1~9çš„æ¯ä¸ªæ•°å­—ä¸ªæ•°c1,c2ï¼Œç„¶åé€‰å–å…¶ä¸­æœ€å°çš„min(c1,c2)ï¼Œè¿™ä¸ªæœ€å°çš„å€¼å°±æ˜¯1~9ä¸­æŸä¸ªæ•°å­—åœ¨2ä¸ªåºåˆ—ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚ç„¶åå°†æ‰€æœ‰çš„min(c1,c2)è¿›è¡Œç›¸åŠ ï¼Œå°±æ±‚å‡ºäº†æ•°å­—åœ¨åºåˆ—ä¸­å‡ºç°è¿‡ï¼Œç„¶åå‡å»æ•°å­—ä½ç½®æ­£ç¡®çš„æ•°å­—ï¼Œå‰©ä¸‹çš„å°±æ˜¯ä½ç½®ä¸å¯¹çš„æ•°å­—äº†ã€‚<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 1010</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, a[maxn], b[maxn];</span><br><span class="line">    <span class="keyword">int</span> kase = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n) == <span class="number">1</span> &amp;&amp; n) &#123; <span class="comment">//n=0æ—¶è¾“å…¥ç»“æŸ</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Game %d:\n&quot;</span>, ++kase);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">        <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">            <span class="keyword">int</span> A = <span class="number">0</span>, B = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;b[i]);</span><br><span class="line">                <span class="keyword">if</span> (a[i] == b[i]) A++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(b[<span class="number">0</span>] == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">            <span class="comment">//æ­£å¸¸çš„çŒœæµ‹åºåˆ—ä¸ä¼šæœ‰0ï¼Œæ‰€ä»¥åªåˆ¤æ–­ç¬¬ä¸€ä¸ªæ•°æ˜¯å¦ä¸º0å³å¯</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> d = <span class="number">1</span>; d &lt;= <span class="number">9</span>; d++) &#123;</span><br><span class="line">                <span class="keyword">int</span> c1 = <span class="number">0</span>, c2 = <span class="number">0</span>;</span><br><span class="line">                <span class="comment">//ç»Ÿè®¡æ•°å­—dåœ¨ç­”æ¡ˆåºåˆ—å’ŒçŒœæµ‹åºåˆ—ä¸­å„å‡ºç°å¤šå°‘æ¬¡</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (a[i] == d) c1++;</span><br><span class="line">                    <span class="keyword">if</span> (b[i] == d) c2++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(c1 &lt; c2) B += c1; <span class="keyword">else</span> B += c2;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot; (%d,%d)\n&quot;</span>, A, B - A);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p><h1 id="Uva1583ç”Ÿæˆå…ƒ"><a href="#Uva1583ç”Ÿæˆå…ƒ" class="headerlink" title="Uva1583ç”Ÿæˆå…ƒ"></a>Uva1583ç”Ÿæˆå…ƒ</h1><p>å¦‚æœxåŠ ä¸Šxçš„å„ä¸ªæ•°å­—ä¹‹å’Œå¾—åˆ°yï¼Œå°±è¯´xæ˜¯yçš„ç”Ÿæˆå…ƒã€‚ç»™å‡ºn(1 &lt;= 100000)ï¼Œæ±‚æœ€å°ç”Ÿæˆå…ƒã€‚æ— è§£è¾“å‡º0.ä¾‹å¦‚,n=216, 121, 2005æ—¶çš„è§£åˆ†åˆ«ä¸º198,0,1979 ã€‚</p><h2 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>å¦‚æœæŒ‰ç…§å¸¸è§„æ€è·¯ä¸€ä¸ªä¸ªå»æšä¸¾çš„è¯ï¼Œå¯èƒ½ä¼šè¶…æ—¶ï¼Œä¸å¦¨æˆ‘ä»¬è½¬æ¢æ€æƒ³ï¼Œå…ˆæ±‚å‡ºæ‰€æœ‰æ•°çš„ç”Ÿæˆå…ƒï¼Œæœ€åæŸ¥è¡¨å³å¯<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 100005</span></span><br><span class="line"><span class="keyword">int</span> ans[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> T,n;</span><br><span class="line">    <span class="built_in">memset</span>(ans,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(ans));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> m=<span class="number">1</span>;m&lt;maxn;m++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> x=m,y=m;</span><br><span class="line">        <span class="keyword">while</span>(x&gt;<span class="number">0</span>)&#123;y+=x%<span class="number">10</span>;x/=<span class="number">10</span>;&#125;</span><br><span class="line">        <span class="keyword">if</span>(ans[y]==<span class="number">0</span>||m&lt;ans[y])ans[y]=m;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;T);</span><br><span class="line">    <span class="keyword">while</span>(T--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,ans[n]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="POJ-2271-æ¨¡æ‹Ÿ"><a href="#POJ-2271-æ¨¡æ‹Ÿ" class="headerlink" title="POJ-2271(æ¨¡æ‹Ÿ)"></a>POJ-2271(æ¨¡æ‹Ÿ)</h1><p><a href="https://vjudge.net/problem/17766/origin">POJ - 2271</a></p><p>è¿™ä¸ªæ¨¡æ‹Ÿå¯çœŸæ˜¯ã€‚ã€‚ã€‚åˆšå¼€å§‹ç”¨getlineè¯»å†™äº†æ— æ•°ä¸ªBUGç‰ˆæœ¬ä»£ç ï¼Œåæ¥æ¢cinä¿å¹³å®‰</p><p>é¢˜ç›®å¤§æ„ï¼š</p><p>â€‹        è¦æ±‚ç¿»è¯‘ä¸€ç¯‡HTMLæ–‡æ¡£ï¼Œæ–‡æ¡£ä¸­åªæœ‰ä¸¤ç§HTMLæ ‡è®°<code>&lt;br&gt;</code>å’Œ<code>&lt;hr&gt;</code>ï¼Œåˆ†åˆ«è¡¨ç¤ºæ¢è¡Œå’Œåˆ’çº¿æ¿ï¼Œå¹¶å°†å·¦å³è¿ç»­çš„ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦å½“åšä¸€ä¸ªç©ºæ ¼è¾“å‡ºï¼Œè¿˜æœ‰å°±æ˜¯â€abc,123â€ç®—ä½œä¸€ä¸ªå•è¯ï¼Œè€Œâ€abc, 123â€ç®—ä½œä¸¤ä¸ªå•è¯ï¼Œåˆ†åˆ«ä¸ºâ€abc,â€å’Œâ€123â€ï¼Œå…·ä½“è¦æ±‚ä¸ºï¼š</p><p>â€‹        1. å½“è¯»å–ä¸€ä¸ªå•è¯ï¼Œå½“å‰è¡Œä¸è¶…è¿‡80ä¸ªå­—ç¬¦ï¼ˆåŒ…æ‹¬ç©ºæ ¼ï¼‰ï¼Œå°±ç›´æ¥æ‰“å°åœ¨åé¢ï¼ˆæ³¨æ„å•è¯ç›´æ¥ç”¨ç©ºæ ¼éš”å¼€ï¼‰ï¼Œå¦åˆ™å°±å¦èµ·ä¸€è¡Œåœ¨å¼€å¤´å¤„æ‰“å°è¯¥å•è¯ï¼Œæ‰€æœ‰å•è¯çš„æœ€å¤§é•¿åº¦ä¸º80ï¼›</p><p>â€‹        2. å½“è¯»å–<code>&lt;br&gt;</code>æ—¶ç›´æ¥å¼€å¯ä¸€æ–°è¡Œï¼›</p><p>â€‹        3. å½“è¯»å–<code>&lt;hr&gt;</code>æ—¶ï¼Œå¦‚æœ<code>&lt;hr&gt;</code>ä¸åœ¨æ–°è¡Œå¼€å¤´å°±å¦èµ·ä¸€è¡Œè¿ç»­æ‰“å°80ä¸ªâ€™-â€˜åå†å¼€å¯ä¸€æ–°è¡Œï¼›</p><p>â€‹        4. å…¨éƒ¨ç¿»è¯‘å®Œåç”¨ä¸€ä¸ªç©ºè¡Œç»“æŸï¼›</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Memory: 136KTime: 16MS</span></span><br><span class="line"><span class="comment">Language: C++Result: Accepted</span></span><br><span class="line"><span class="comment">Time:  2018-07-19 18:26:23</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string s;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; s)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(s == <span class="string">&quot;&lt;hr&gt;&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(cnt) <span class="comment">//é˜²æ­¢ä¸¤ä¸ª&lt;hr&gt;ç›¸è¿æ—¶å‡ºç°å¤šä½™çš„æ¢è¡Œ</span></span><br><span class="line">                cout &lt;&lt; endl;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">80</span>; i++)</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;-&quot;</span>;</span><br><span class="line">            cnt = <span class="number">0</span>;</span><br><span class="line">            cout &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(s == <span class="string">&quot;&lt;br&gt;&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            cnt = <span class="number">0</span>;</span><br><span class="line">            cout &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> flag = <span class="number">0</span>; <span class="comment">//ç”¨æ¥è®°å½•ç©ºæ ¼ï¼Œå› ä¸ºç©ºæ ¼ä¹Ÿç®—ä¸€ä¸ªé•¿åº¦ï¼Œä¸¤ä¸ªå•è¯ä¹‹é—´è¦æœ‰ç©ºæ ¼</span></span><br><span class="line">            <span class="keyword">if</span>(cnt) <span class="comment">//å‰é¢å·²ç»æœ‰è¾“å‡ºäº†ã€‚è¦åŠ ä¸Šç©ºæ ¼é‚£ä¸ªé•¿åº¦</span></span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(cnt + s.<span class="built_in">size</span>() + flag &gt; <span class="number">80</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                cout &lt;&lt; endl &lt;&lt; s;</span><br><span class="line">                cnt = s.<span class="built_in">size</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(cnt)</span><br><span class="line">                &#123;</span><br><span class="line">                    cout &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; s;</span><br><span class="line">                    cnt += s.<span class="built_in">size</span>() + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    cout &lt;&lt; s;</span><br><span class="line">                    cnt += s.<span class="built_in">size</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p><h1 id="FZCOJ1787"><a href="#FZCOJ1787" class="headerlink" title="FZCOJ1787"></a><a href="http://fzcoj.hustoj.com/problem.php?id=1787">FZCOJ1787</a></h1><p>æ™®é€šçš„ä¸€é“æ¨¡æ‹Ÿé¢˜ï¼Œå› ä¸ºè€ƒè™‘ä¸å‘¨åŠ ä¸Šå¾ªç¯åˆ¤æ–­è¯­å¥å†™å¾—å¾ˆå¤æ‚ï¼Œå¯¼è‡´å†™äº†100å¤šè¡Œçš„æ¨¡æ‹Ÿä»£ç ï¼Œï¼ˆè€Œä¸”è¿˜waï¼Œemmmï¼‰ï¼Œçœ‹äº†é¢˜è§£åæ‰çŸ¥é“ä¸è¦ä¸€è¹´è€Œå°±ï¼Œè¦ä¸€æ­¥æ­¥åˆ¤æ–­ï¼Œå½“åˆå°±æ˜¯æƒ³åˆ¤æ–­å®Œè¿™ä¸ªè·³è¿‡å»ï¼Œå¯¼è‡´æ— é™wa</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Ext.Timeï¼š13ms</span></span><br><span class="line"><span class="comment">Time:2018-10-03 21:07:26</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">int</span> test;</span><br><span class="line">    cin &gt;&gt; test;</span><br><span class="line">    <span class="keyword">while</span>(test--)</span><br><span class="line">    &#123;</span><br><span class="line">        string s1 = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        cin &gt;&gt; len &gt;&gt; s1;</span><br><span class="line">        <span class="keyword">int</span> pos1 = <span class="number">0</span>, pos2 = len - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(pos1 &lt;= pos2)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> tmp1 = pos1;</span><br><span class="line">            <span class="keyword">int</span> tmp2 = pos2;</span><br><span class="line">            <span class="keyword">while</span>(tmp1 &lt; tmp2 &amp;&amp; s1[tmp1] == s1[tmp2])</span><br><span class="line">            &#123;</span><br><span class="line">                tmp1++;</span><br><span class="line">                tmp2--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(s1[tmp1] &gt; s1[tmp2])</span><br><span class="line">            &#123;</span><br><span class="line">                cout &lt;&lt; s1[pos2];</span><br><span class="line">                pos2--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                cout &lt;&lt; s1[pos1];</span><br><span class="line">                pos1++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">        s1 = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é™„ä¸Šå½“åˆbugä»£ç </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">int</span> test;</span><br><span class="line">    cin &gt;&gt; test;</span><br><span class="line">    <span class="keyword">while</span>(test--)</span><br><span class="line">    &#123;</span><br><span class="line">        string s1 = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        string s2 = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        cin &gt;&gt; len &gt;&gt; s1;</span><br><span class="line">        <span class="keyword">int</span> pos1 = <span class="number">0</span>, pos2 = s1.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(pos1 == pos2)</span><br><span class="line">                flag = <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(flag)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(flag == <span class="number">1</span>)</span><br><span class="line">                    cout &lt;&lt; s2 &lt;&lt; endl;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    cout &lt;&lt; (s2 += s1[pos1]) &lt;&lt; endl;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(s1[pos1] &gt; s1[pos2])</span><br><span class="line">            &#123;</span><br><span class="line">                s2 += s1[pos2];</span><br><span class="line">                pos2--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(s1[pos1] &lt; s1[pos2])</span><br><span class="line">            &#123;</span><br><span class="line">                s2 += s1[pos1];</span><br><span class="line">                pos1++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">const</span> <span class="keyword">int</span> tmp1 = pos1, tmp2 = pos2;</span><br><span class="line">                <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span>(s1[pos1] == s1[pos2])</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">int</span> tmp = pos1;</span><br><span class="line">                    pos1++;</span><br><span class="line">                    pos2--;</span><br><span class="line">                    cnt++;</span><br><span class="line">                    <span class="keyword">if</span>(s1[tmp] != s1[pos1])</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(cnt &gt;= <span class="number">2</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> k = tmp1; k &lt; pos1; k++)</span><br><span class="line">                        s2 += s1[k];</span><br><span class="line">                    <span class="keyword">if</span>(pos1 &gt; pos2 || pos1 &gt;= s1.<span class="built_in">size</span>() || pos2 &lt; <span class="number">0</span>)</span><br><span class="line">                    &#123;</span><br><span class="line">                        flag = <span class="number">1</span>;</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span>(s1[pos1] &gt; s1[pos2])</span><br><span class="line">                    &#123;</span><br><span class="line">                        pos1 = tmp1;</span><br><span class="line">                        s2 += s1[pos2];</span><br><span class="line">                        pos2--;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        pos2 = tmp2;</span><br><span class="line">                        s2 += s1[pos1];</span><br><span class="line">                        pos1++;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    pos1 = tmp1;</span><br><span class="line">                    pos2 = tmp2;</span><br><span class="line">                    <span class="keyword">if</span>(s1[pos1] &lt; s1[pos2 - <span class="number">1</span>])</span><br><span class="line">                    &#123;</span><br><span class="line">                        s2 += s1[pos1];</span><br><span class="line">                        pos1++;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span>(s1[pos1] &gt; s1[pos2 - <span class="number">1</span>])</span><br><span class="line">                    &#123;</span><br><span class="line">                        s2 += s1[pos2];</span><br><span class="line">                        pos2--;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        s2 = s2 + s1[pos1] + s1[pos1];</span><br><span class="line">                        pos1++;</span><br><span class="line">                        pos2--;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span>(pos1 &gt; pos2 || pos1 &gt;= s1.<span class="built_in">size</span>() || pos2 &lt; <span class="number">0</span>)</span><br><span class="line">                    &#123;</span><br><span class="line">                        flag = <span class="number">2</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ€ç»´é¢˜ç›® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>c++string</title>
      <link href="/2018/02/21/c++-string/"/>
      <url>/2018/02/21/c++-string/</url>
      
        <content type="html"><![CDATA[<p>stringå°ç»“</p><span id="more"></span><h1 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h1><ol><li>stringç±»ç”±å¤´æ–‡ä»¶stringæ”¯æŒ</li></ol><p><em>ï¼ˆå¤´æ–‡ä»¶string.hå’Œcstringæ”¯æŒå¯¹c-é£æ ¼å­—ç¬¦ä¸²è¿›è¡Œæ“çºµçš„cåº“å­—ç¬¦ä¸²å‡½æ•°ï¼Œä½†ä¸æ”¯æŒstringç±»ï¼‰</em></p><ol><li>stringç±»å°†string::nopså®šä¹‰ä¸ºå­—ç¬¦ä¸²æœ€å¤§é•¿åº¦ï¼Œé€šå¸¸ä¸ºunsigned intæœ€å¤§å€¼</li><li>stringä¸wstringï¼š</li></ol><ul><li>stringæ˜¯é’ˆå¯¹charè€Œé¢„å…ˆå®šä¹‰çš„ç‰¹åŒ–ç‰ˆæœ¬ï¼Œwstringæ˜¯é’ˆå¯¹wchat_tè€Œé¢„å…ˆå®šä¹‰çš„ç‰¹åŒ–ç‰ˆæœ¬</li><li>ä½¿ç”¨wstringå¯ä»¥è®©ä½ ä½¿ç”¨å®½å­—ç¬¦é›†ï¼Œä¾‹å¦‚Unicodeæˆ–æŸäº›äºšæ´²å­—ç¬¦é›†â€˜</li><li>æ‰€æœ‰å­—ç¬¦ä¸²ç±»å‹éƒ½é‡‡ç”¨ç›¸åŒæ¥å£ï¼Œæ‰€ä»¥ä¸¤è€…ç”¨æ³•éƒ½ä¸€æ ·ã€‚</li></ul><ol><li>C++å­—ç¬¦ä¸²å¹¶ä¸ä»¥â€™/0â€™ç»“å°¾</li><li>æ³¨æ„å¯¹è±¡åä¸ä¼šè¢«çœ‹åšæ˜¯å¯¹è±¡åœ°å€ï¼Œæ¯”å¦‚string s(20, â€˜xâ€™); sä¸æ˜¯æŒ‡é’ˆï¼Œs+6æ²¡æœ‰æ„ä¹‰ï¼Œè€Œ&amp;s[6]å´æ˜¯æŒ‡é’ˆã€‚</li></ol><h1 id="å­—ç¬¦ä¸²å„ç§æ“ä½œå‡½æ•°"><a href="#å­—ç¬¦ä¸²å„ç§æ“ä½œå‡½æ•°" class="headerlink" title="å­—ç¬¦ä¸²å„ç§æ“ä½œå‡½æ•°"></a>å­—ç¬¦ä¸²å„ç§æ“ä½œå‡½æ•°</h1><div class="table-container"><table><thead><tr><th>Name</th><th>Feature</th></tr></thead><tbody><tr><td>swap()</td><td>äº¤æ¢ä¸¤ä¸ªå­—ç¬¦ä¸²çš„å†…å®¹</td></tr><tr><td>=, assign()</td><td>èµ‹ä»¥æ–°å€¼</td></tr><tr><td>+=,  append(),  push_back()</td><td>åœ¨å°¾éƒ¨æ·»åŠ å­—ç¬¦</td></tr><tr><td>insert()</td><td>æ’å…¥å­—ç¬¦</td></tr><tr><td>erase()</td><td>åˆ é™¤å­—ç¬¦</td></tr><tr><td>clear()</td><td>åˆ é™¤å…¨éƒ¨å­—ç¬¦</td></tr><tr><td>replace()</td><td>æ›¿æ¢å­—ç¬¦</td></tr><tr><td>+</td><td>ä¸²è”å­—ç¬¦ä¸²</td></tr><tr><td>==, != , &lt;, &lt;=, &gt;, &gt;=, compare()</td><td>æ¯”è¾ƒå­—ç¬¦ä¸²</td></tr><tr><td>size(), length()</td><td>è¿”å›å­—ç¬¦æ•°é‡</td></tr><tr><td>max_size()</td><td>è¿”å›å­—ç¬¦çš„å¯èƒ½æœ€å¤§ä¸ªæ•°</td></tr><tr><td>empty()</td><td>åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©º</td></tr><tr><td>capacity()</td><td>è¿”å›é‡æ–°åˆ†é…ä¹‹å‰çš„å­—ç¬¦å®¹é‡</td></tr><tr><td>reserve()</td><td>ä¿ç•™ä¸€å®šé‡å†…å­˜ä»¥å®¹çº³ä¸€å®šæ•°é‡çš„å­—ç¬¦</td></tr><tr><td>[ ],  at()</td><td>å­˜å–å•ä¸€å­—ç¬¦</td></tr><tr><td>&gt;&gt; ,  getline()</td><td>ä»streamè¯»å–æŸå€¼</td></tr><tr><td>&lt;&lt;</td><td>å°†è°‹å€¼å†™å…¥stream</td></tr><tr><td>copy()</td><td>å°†æŸå€¼èµ‹å€¼ä¸ºä¸€ä¸ªC_stringï¼Œä¸æ·»åŠ â€™\0â€™å­—ç¬¦</td></tr><tr><td>c_str()</td><td>å°†å†…å®¹ä»¥C_stringè¿”å›ï¼Œåœ¨å°¾ç«¯æ·»åŠ â€™\0â€™å­—ç¬¦</td></tr><tr><td>data()</td><td>å°†å†…å®¹ä»¥å­—ç¬¦æ•°ç»„å½¢å¼è¿”å›ï¼Œå¹¶æœªè¿½åŠ â€™\0â€™å­—ç¬¦ï¼Œæ‰€ä»¥è¿”å›ç±»å‹å¹¶éæœ‰æ•ˆçš„c-string</td></tr><tr><td>substr()</td><td>è¿”å›æŸä¸ªå­å­—ç¬¦ä¸²</td></tr><tr><td>begin() end()</td><td>æä¾›ç±»ä¼¼STLçš„è¿­ä»£å™¨æ”¯æŒ</td></tr><tr><td>rbegin()  rend()</td><td>é€†å‘è¿­ä»£å™¨</td></tr><tr><td>get_allocator()</td><td>è¿”å›é…ç½®å™¨</td></tr></tbody></table></div><h2 id="è½¬æ¢æˆc-stringæˆ–å­—ç¬¦æ•°ç»„"><a href="#è½¬æ¢æˆc-stringæˆ–å­—ç¬¦æ•°ç»„" class="headerlink" title="è½¬æ¢æˆc-stringæˆ–å­—ç¬¦æ•°ç»„"></a>è½¬æ¢æˆc-stringæˆ–å­—ç¬¦æ•°ç»„</h2><p>æ“ä½œå‡½æ•°data(), c_str(), copy()</p><p>æ³¨æ„ï¼š</p><ol><li>data()å’Œc_str()è¿”å›çš„å­—ç¬¦æ•°ç»„ç”±è¯¥å­—ç¬¦ä¸²æ‹¥æœ‰ï¼Œä¹Ÿå°±æ˜¯è¯´è°ƒç”¨è€…åƒä¸‡ä¸èƒ½ä¿®æ”¹å®ƒæˆ–é‡Šæ”¾å…¶å†…å­˜</li><li>ä¸€èˆ¬è€Œè¨€ï¼Œæ•´ä¸ªç¨‹åºä¸­åº”è¯¥åšæŒä½¿ç”¨stringï¼Œç›´åˆ°ä½ å¿…é¡»å°†å…¶å†…å®¹è½¬åŒ–ä¸ºchar*æ—¶æ‰æŠŠä»–ä»¬è½¬æ¢æˆc-stringã€‚</li></ol><h2 id="C-å­—ç¬¦ä¸²å­˜åœ¨ä¸‰ç§å¤§å°"><a href="#C-å­—ç¬¦ä¸²å­˜åœ¨ä¸‰ç§å¤§å°" class="headerlink" title="C++å­—ç¬¦ä¸²å­˜åœ¨ä¸‰ç§å¤§å°"></a>C++å­—ç¬¦ä¸²å­˜åœ¨ä¸‰ç§å¤§å°</h2><ol><li><p>ç°æœ‰çš„å­—ç¬¦æ•°ï¼Œå‡½æ•°æ˜¯size()å’Œlength()ï¼Œä»–ä»¬ç­‰æ•ˆã€‚Empty()ç”¨æ¥æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºã€‚</p></li><li><p>size()æ˜¯è·å–å®¹å™¨å…ƒç´ ä¸ªæ•°çš„é€šç”¨æˆå‘˜å‡½æ•°ï¼Œlength()åˆ™å¯¹åº”äºä¸€èˆ¬c-string strlen()å‡½æ•°ï¼Œä¼ å›å­—ç¬¦ä¸²é•¿åº¦ã€‚</p></li><li><p>max_size() ï¼šè¿™ä¸ªå¤§å°æ˜¯æŒ‡å½“å‰C++å­—ç¬¦ä¸²æœ€å¤šèƒ½åŒ…å«çš„å­—ç¬¦æ•°ï¼Œå¾ˆå¯èƒ½å’Œæœºå™¨æœ¬èº«çš„é™åˆ¶æˆ–è€…å­—ç¬¦ä¸²æ‰€åœ¨ä½ç½®è¿ç»­å†…å­˜çš„å¤§å°æœ‰å…³ç³»ã€‚</p><p><em>æˆ‘ä»¬ä¸€èˆ¬æƒ…å†µä¸‹ä¸ç”¨å…³å¿ƒä»–ï¼Œåº”è¯¥å¤§å°è¶³å¤Ÿæˆ‘ä»¬ç”¨çš„ã€‚ä½†æ˜¯ä¸å¤Ÿç”¨çš„è¯ï¼Œä¼šæŠ›å‡ºlength_errorå¼‚å¸¸</em></p></li><li><p>capacity()ï¼šé‡æ–°åˆ†é…å†…å­˜ä¹‹å‰ï¼Œstringæ‰€èƒ½åŒ…å«çš„æœ€å¤§å­—ç¬¦æ•°</p></li></ol><h2 id="å…ƒç´ å­˜å–"><a href="#å…ƒç´ å­˜å–" class="headerlink" title="å…ƒç´ å­˜å–"></a>å…ƒç´ å­˜å–</h2><p>ä½¿ç”¨ä¸‹æ ‡æ“ä½œç¬¦[]å’Œå‡½æ•°at()å¯¹å…ƒç´ åŒ…å«çš„å­—ç¬¦è¿›è¡Œè®¿é—®</p><p>æ³¨æ„ï¼š</p><p><em>æ“ä½œç¬¦[]å¹¶ä¸æ£€æŸ¥ç´¢å¼•æ˜¯å¦æœ‰æ•ˆï¼ˆæœ‰æ•ˆç´¢å¼•0~str.length()ï¼‰ï¼Œå¦‚æœç´¢å¼•å¤±æ•ˆï¼Œä¼šå¼•èµ·æœªå®šä¹‰çš„è¡Œä¸ºã€‚è€Œat()ä¼šæ£€æŸ¥ï¼Œå¦‚æœä½¿ç”¨ at()çš„æ—¶å€™ç´¢å¼•æ— æ•ˆï¼Œä¼šæŠ›å‡ºout_of_rangeå¼‚å¸¸ã€‚</em></p><p><em>str.length()ï¼šconst string a;çš„æ“ä½œç¬¦[]å¯¹ç´¢å¼•å€¼æ˜¯a.length()ä»ç„¶æœ‰æ•ˆï¼Œå…¶è¿”å›å€¼æ˜¯â€™/0â€™ã€‚å…¶ä»–çš„å„ç§æƒ…å†µï¼Œstr.length()ç´¢å¼•éƒ½æ˜¯æ— æ•ˆçš„</em></p><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">const</span> string <span class="title">Cstr</span><span class="params">(â€œ<span class="keyword">const</span> stringâ€)</span></span>;</span><br><span class="line"><span class="function">string <span class="title">Str</span><span class="params">(â€œstringâ€)</span></span>;</span><br><span class="line">Str[<span class="number">3</span>];      <span class="comment">//ok</span></span><br><span class="line">Str.<span class="built_in">at</span>(<span class="number">3</span>);    <span class="comment">//ok</span></span><br><span class="line">Str[<span class="number">100</span>]; <span class="comment">//æœªå®šä¹‰çš„è¡Œä¸º</span></span><br><span class="line">Str.<span class="built_in">at</span>(<span class="number">100</span>);    <span class="comment">//throw out_of_range</span></span><br><span class="line">Str[Str.<span class="built_in">length</span>()]    <span class="comment">//æœªå®šä¹‰è¡Œä¸º</span></span><br><span class="line">Cstr[Cstr.<span class="built_in">length</span>()] <span class="comment">//è¿”å› â€˜/0&#x27;</span></span><br><span class="line">Str.<span class="built_in">at</span>(Str.<span class="built_in">length</span>());<span class="comment">//throw out_of_range</span></span><br><span class="line">Cstr.<span class="built_in">at</span>(Cstr.<span class="built_in">length</span>()) <span class="comment">////throw out_of_range</span></span><br></pre></td></tr></table></figure><h2 id="æ¯”è¾ƒå‡½æ•°"><a href="#æ¯”è¾ƒå‡½æ•°" class="headerlink" title="æ¯”è¾ƒå‡½æ•°"></a>æ¯”è¾ƒå‡½æ•°</h2><ol><li>c++å­—ç¬¦ä¸²æ”¯æŒå¸¸è§çš„æ¯”è¾ƒæ“ä½œç¬¦ï¼ˆ&gt;,&gt;=,&lt;,&lt;=,==,!=ï¼‰ï¼Œç”šè‡³æ”¯æŒstringä¸C-stringçš„æ¯”è¾ƒ(å¦‚ str&lt;â€helloâ€)ã€‚åœ¨ä½¿ç”¨&gt;,&gt;=,&lt;,&lt;=è¿™äº›æ“ä½œç¬¦çš„æ—¶å€™æ˜¯æ ¹æ®â€œå½“å‰å­—ç¬¦ç‰¹æ€§â€å°†å­—ç¬¦æŒ‰å­—å…¸é¡ºåºè¿›è¡Œé€ä¸€å¾— æ¯”è¾ƒã€‚å­—å…¸æ’åºé å‰çš„å­—ç¬¦å°ï¼Œæ¯”è¾ƒçš„é¡ºåºæ˜¯ä»å‰å‘åæ¯”è¾ƒï¼Œé‡åˆ°ä¸ç›¸ç­‰çš„å­—ç¬¦å°±æŒ‰è¿™ä¸ªä½ç½®ä¸Šçš„ä¸¤ä¸ªå­—ç¬¦çš„æ¯”è¾ƒç»“æœç¡®å®šä¸¤ä¸ªå­—ç¬¦ä¸²çš„å¤§å°ã€‚åŒæ—¶ï¼Œstring (â€œaaaaâ€) &lt;string(aaaaa)</li><li>å¦ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„æ¯”è¾ƒå‡½æ•°æ˜¯æˆå‘˜å‡½æ•°compare()ã€‚ä»–æ”¯æŒå¤šå‚æ•°å¤„ç†ï¼Œæ”¯æŒç”¨ç´¢å¼•å€¼å’Œé•¿åº¦å®šä½å­ä¸²æ¥è¿›è¡Œæ¯”è¾ƒã€‚ä»–è¿”å›ä¸€ä¸ªæ•´æ•°æ¥è¡¨ç¤ºæ¯”è¾ƒç»“æœï¼Œè¿”å›å€¼æ„ä¹‰å¦‚ä¸‹ï¼š0-ç›¸ç­‰ ã€‰0-å¤§äº &lt;0-å°äºã€‚</li></ol><p>ä¸¾ä¸ªæ —å­ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">string <span class="title">s</span><span class="params">(â€œabcdâ€)</span></span>;</span><br><span class="line">s.<span class="built_in">compare</span>(â€œabcdâ€); <span class="comment">//è¿”å›0</span></span><br><span class="line">s.<span class="built_in">compare</span>(â€œdcbaâ€); <span class="comment">//è¿”å›ä¸€ä¸ªå°äº0çš„å€¼</span></span><br><span class="line">s.<span class="built_in">compare</span>(â€œabâ€); <span class="comment">//è¿”å›å¤§äº0çš„å€¼</span></span><br><span class="line">s.<span class="built_in">compare</span>(s); <span class="comment">//ç›¸ç­‰</span></span><br><span class="line">s.<span class="built_in">compare</span>(<span class="number">0</span>,<span class="number">2</span>,s,<span class="number">2</span>,<span class="number">2</span>); <span class="comment">//ç”¨â€abâ€å’Œâ€cdâ€è¿›è¡Œæ¯”è¾ƒ å°äºé›¶</span></span><br><span class="line">s.<span class="built_in">compare</span>(<span class="number">1</span>,<span class="number">2</span>,â€bcxâ€,<span class="number">2</span>); <span class="comment">//ç”¨â€bcâ€å’Œâ€bcâ€æ¯”è¾ƒã€‚</span></span><br></pre></td></tr></table></figure><h2 id="æ›´æ”¹å†…å®¹"><a href="#æ›´æ”¹å†…å®¹" class="headerlink" title="æ›´æ”¹å†…å®¹"></a>æ›´æ”¹å†…å®¹</h2><h3 id="èµ‹å€¼"><a href="#èµ‹å€¼" class="headerlink" title="èµ‹å€¼"></a>èµ‹å€¼</h3><p>ç¬¬ä¸€ä¸ªèµ‹å€¼æ–¹æ³•å½“ç„¶æ˜¯ä½¿ç”¨æ“ä½œç¬¦=ï¼Œæ–°å€¼å¯ä»¥æ˜¯string(å¦‚ï¼šs=ns) ã€c_string(å¦‚ï¼šs=â€gaintâ€)ç”šè‡³å•ä¸€å­—ç¬¦ï¼ˆå¦‚ï¼šs=â€™jâ€™ï¼‰ã€‚è¿˜å¯ä»¥ä½¿ç”¨æˆå‘˜å‡½æ•°assign()ï¼Œè¿™ä¸ªæˆå‘˜å‡½æ•°å¯ä»¥ä½¿ä½ æ›´çµæ´»çš„å¯¹å­—ç¬¦ä¸²èµ‹å€¼ã€‚</p><p>ä¸¾ä¸ªæ —å­ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">s.<span class="built_in">assign</span>(str); <span class="comment">//ä½ æ‡‚å¾—</span></span><br><span class="line">s.<span class="built_in">assign</span>(str,<span class="number">1</span>,<span class="number">3</span>);<span class="comment">//å¦‚æœstræ˜¯â€iamangelâ€ å°±æ˜¯æŠŠâ€amaâ€èµ‹ç»™å­—ç¬¦ä¸²</span></span><br><span class="line">s.<span class="built_in">assign</span>(str,<span class="number">2</span>,string::npos);<span class="comment">//æŠŠå­—ç¬¦ä¸²strä»ç´¢å¼•å€¼2å¼€å§‹åˆ°ç»“å°¾èµ‹ç»™s</span></span><br><span class="line">s.<span class="built_in">assign</span>(â€œgaintâ€); <span class="comment">//ä¸è¯´</span></span><br><span class="line">s.<span class="built_in">assign</span>(â€œnicoâ€,<span class="number">5</span>);<span class="comment">//æŠŠ&#x27;n&#x27; â€˜I&#x27; â€˜c&#x27; â€˜o&#x27; â€˜/0&#x27;èµ‹ç»™å­—ç¬¦ä¸²</span></span><br><span class="line">s.<span class="built_in">assign</span>(<span class="number">5</span>,<span class="string">&#x27;x&#x27;</span>);<span class="comment">//æŠŠäº”ä¸ªxèµ‹ç»™å­—ç¬¦ä¸²</span></span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">string &amp;<span class="keyword">operator</span>=(<span class="keyword">const</span> string &amp;s);<span class="comment">//æŠŠå­—ç¬¦ä¸²sèµ‹ç»™å½“å‰å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="function">string &amp;<span class="title">assign</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *s)</span></span>;<span class="comment">//ç”¨cç±»å‹å­—ç¬¦ä¸²sèµ‹å€¼</span></span><br><span class="line"><span class="function">string &amp;<span class="title">assign</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *s,<span class="keyword">int</span> n)</span></span>;<span class="comment">//ç”¨cå­—ç¬¦ä¸²så¼€å§‹çš„nä¸ªå­—ç¬¦èµ‹å€¼</span></span><br><span class="line"><span class="function">string &amp;<span class="title">assign</span><span class="params">(<span class="keyword">const</span> string &amp;s)</span></span>;<span class="comment">//æŠŠå­—ç¬¦ä¸²sèµ‹ç»™å½“å‰å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="function">string &amp;<span class="title">assign</span><span class="params">(<span class="keyword">int</span> n,<span class="keyword">char</span> c)</span></span>;<span class="comment">//ç”¨nä¸ªå­—ç¬¦cèµ‹å€¼ç»™å½“å‰å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="function">string &amp;<span class="title">assign</span><span class="params">(<span class="keyword">const</span> string &amp;s,<span class="keyword">int</span> start,<span class="keyword">int</span> n)</span></span>;<span class="comment">//æŠŠå­—ç¬¦ä¸²sä¸­ä»startå¼€å§‹çš„nä¸ªå­—ç¬¦èµ‹ç»™å½“å‰å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="function">string &amp;<span class="title">assign</span><span class="params">(const_iterator first,const_itertor last)</span></span>;<span class="comment">//æŠŠfirstå’Œlastè¿­ä»£å™¨ä¹‹é—´çš„éƒ¨åˆ†èµ‹ç»™å­—ç¬¦ä¸²</span></span><br></pre></td></tr></table></figure><p>int copy(char *s, int n, int pos = 0) const;</p><p>æŠŠå½“å‰ä¸²ä¸­ä»¥poså¼€å§‹çš„nä¸ªå­—ç¬¦æ‹·è´åˆ°ä»¥sä¸ºèµ·å§‹ä½ç½®çš„å­—ç¬¦æ•°ç»„ä¸­ï¼Œè¿”å›å®é™…æ‹·è´çš„æ•°ç›®</p><h3 id="æ¸…ç©º"><a href="#æ¸…ç©º" class="headerlink" title="æ¸…ç©º"></a>æ¸…ç©º</h3><p>æŠŠå­—ç¬¦ä¸²æ¸…ç©ºçš„æ–¹æ³•æœ‰ä¸‰ä¸ªï¼š</p><p>s=â€â€;    s.clear();        s.erase();</p><h3 id="å¢åŠ "><a href="#å¢åŠ " class="headerlink" title="å¢åŠ "></a>å¢åŠ </h3><p>å‡½æ•°æœ‰ +=ã€append()ã€push_back()ã€‚</p><p>ä¸¾ä¸ªæ —å­ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">s+=str;<span class="comment">//åŠ ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line">s+=â€my name is jiaypâ€;<span class="comment">//åŠ ä¸ªCå­—ç¬¦ä¸²</span></span><br><span class="line">s+=<span class="string">&#x27;a&#x27;</span>;<span class="comment">//åŠ ä¸ªå­—ç¬¦</span></span><br><span class="line">s.<span class="built_in">append</span>(str);</span><br><span class="line">s.<span class="built_in">append</span>(str,<span class="number">1</span>,<span class="number">3</span>);<span class="comment">//ä¸è§£é‡Šäº† åŒå‰é¢çš„å‡½æ•°å‚æ•°assignçš„è§£é‡Š</span></span><br><span class="line">s.<span class="built_in">append</span>(str,<span class="number">2</span>,string::npos)<span class="comment">//ä¸è§£é‡Šäº†</span></span><br><span class="line">s.<span class="built_in">append</span>(â€œmy name is jiaypâ€);</span><br><span class="line">s.<span class="built_in">append</span>(â€œnicoâ€,<span class="number">5</span>);</span><br><span class="line">s.<span class="built_in">append</span>(<span class="number">5</span>,<span class="string">&#x27;x&#x27;</span>);</span><br><span class="line">s.<span class="built_in">push_back</span>(â€˜a<span class="number">&#x27;</span>); <span class="comment">//è¿™ä¸ªå‡½æ•°åªèƒ½å¢åŠ å•ä¸ªå­—ç¬¦å¯¹STLç†Ÿæ‚‰çš„ç†è§£èµ·æ¥å¾ˆç®€å•</span></span><br><span class="line">            </span><br><span class="line"><span class="comment">//åœ¨stringä¸­é—´çš„æŸä¸ªä½ç½®æ’å…¥å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">//éœ€è¦æŒ‡å®šä¸€ä¸ªå®‰æ’ä½ç½®çš„ç´¢å¼•ï¼Œè¢«æ’å…¥çš„å­—ç¬¦ä¸²å°†æ”¾åœ¨è¿™ä¸ªç´¢å¼•çš„åé¢ã€‚</span></span><br><span class="line">s.<span class="built_in">insert</span>(<span class="number">0</span>,â€my nameâ€);</span><br><span class="line">s.<span class="built_in">insert</span>(<span class="number">1</span>,str);</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">string &amp;<span class="keyword">operator</span>+=(<span class="keyword">const</span> string &amp;s);<span class="comment">//æŠŠå­—ç¬¦ä¸²sè¿æ¥åˆ°å½“å‰å­—ç¬¦ä¸²çš„ç»“å°¾ </span></span><br><span class="line"><span class="function">string &amp;<span class="title">append</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *s)</span></span>;<span class="comment">//æŠŠcç±»å‹å­—ç¬¦ä¸²sè¿æ¥åˆ°å½“å‰å­—ç¬¦ä¸²ç»“å°¾</span></span><br><span class="line"><span class="function">string &amp;<span class="title">append</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *s,<span class="keyword">int</span> n)</span></span>;</span><br><span class="line"><span class="comment">//æŠŠcç±»å‹å­—ç¬¦ä¸²sçš„å‰nä¸ªå­—ç¬¦è¿æ¥åˆ°å½“å‰å­—ç¬¦ä¸²ç»“å°¾</span></span><br><span class="line"><span class="function">string &amp;<span class="title">append</span><span class="params">(<span class="keyword">const</span> string &amp;s)</span></span>;<span class="comment">//åŒoperator+=()</span></span><br><span class="line"><span class="function">string &amp;<span class="title">append</span><span class="params">(<span class="keyword">const</span> string &amp;s,<span class="keyword">int</span> pos,<span class="keyword">int</span> n)</span></span>;</span><br><span class="line"><span class="comment">//æŠŠå­—ç¬¦ä¸²sä¸­ä»poså¼€å§‹çš„nä¸ªå­—ç¬¦è¿æ¥åˆ°å½“å‰å­—ç¬¦ä¸²çš„ç»“å°¾</span></span><br><span class="line"><span class="function">string &amp;<span class="title">append</span><span class="params">(<span class="keyword">int</span> n,<span class="keyword">char</span> c)</span></span>;<span class="comment">//åœ¨å½“å‰å­—ç¬¦ä¸²ç»“å°¾æ·»åŠ nä¸ªå­—ç¬¦c</span></span><br><span class="line"><span class="function">string &amp;<span class="title">append</span><span class="params">(const_iterator first,const_iterator last)</span></span>;</span><br><span class="line"><span class="comment">//æŠŠè¿­ä»£å™¨firstå’Œlastä¹‹é—´çš„éƒ¨åˆ†è¿æ¥åˆ°å½“å‰å­—ç¬¦ä¸²çš„ç»“å°¾</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><p><em>1. è¿™ç§å½¢å¼çš„insert()å‡½æ•°ä¸æ”¯æŒä¼ å…¥å•ä¸ªå­—ç¬¦ï¼Œè¿™æ—¶çš„å•ä¸ªå­—ç¬¦å¿…é¡»å†™æˆå­—ç¬¦ä¸²å½¢å¼ã€‚</em></p><p><em>2. ä¸ºäº†æ’ å…¥å•ä¸ªå­—ç¬¦ï¼Œinsert()å‡½æ•°æä¾›äº†ä¸¤ä¸ªå¯¹æ’å…¥å•ä¸ªå­—ç¬¦æ“ä½œçš„é‡è½½å‡½æ•°ï¼šinsert(size_type index,size_type num,chart c)å’Œinsert(iterator pos,size_type num,chart c)ã€‚</em></p><p><em>3. å…¶ä¸­size_typeæ˜¯æ— ç¬¦å·æ•´æ•°ï¼Œiteratoræ˜¯char</em>,æ‰€ä»¥ï¼Œä½ è¿™ä¹ˆè°ƒç”¨insertå‡½æ•°æ˜¯ä¸è¡Œçš„ï¼šinsert(0,1, â€˜jâ€™);è¿™æ—¶å€™ç¬¬ä¸€ä¸ªå‚æ•°å°†è½¬æ¢æˆå“ªä¸€ä¸ªå‘¢ï¼Ÿæ‰€ä»¥ä½ å¿…é¡»è¿™ä¹ˆå†™ï¼šinsert((string::size_type)0,1,â€™jâ€™)ï¼ç¬¬äºŒç§å½¢å¼æŒ‡ å‡ºäº†ä½¿ç”¨è¿­ä»£å™¨å®‰æ’å­—ç¬¦çš„å½¢å¼ã€‚</p><p><em>4. é¡ºä¾¿æä¸€ä¸‹ï¼Œstringæœ‰å¾ˆå¤šæ“ä½œæ˜¯ä½¿ç”¨STLçš„è¿­ä»£å™¨çš„ï¼Œä»–ä¹Ÿå°½é‡åšå¾—å’ŒSTLé è¿‘ã€‚</em></p><h3 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h3><p>ç›´æ¥ä¸¾ä¸ªæ —å­ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">string s=<span class="string">&quot;il8n&quot;</span>;</span><br><span class="line">s.<span class="built_in">replace</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="string">&quot;nternationalizatio&quot;</span>);</span><br><span class="line"><span class="comment">//ä»ç´¢å¼•1å¼€å§‹çš„2ä¸ªæ›¿æ¢æˆåé¢çš„C_string</span></span><br><span class="line"><span class="comment">//å³è¾“å‡ºï¼š nternationalization</span></span><br><span class="line">s.<span class="built_in">replace</span>(<span class="number">1</span>,<span class="number">2</span>,â€nternationalizatioâ€);</span><br><span class="line">s.<span class="built_in">erase</span>(<span class="number">13</span>);<span class="comment">//ä»ç´¢å¼•13å¼€å§‹å¾€åå…¨åˆ é™¤</span></span><br><span class="line">s.<span class="built_in">erase</span>(<span class="number">7</span>,<span class="number">5</span>);<span class="comment">//ä»ç´¢å¼•7å¼€å§‹å¾€ååˆ 5ä¸ª</span></span><br></pre></td></tr></table></figure><h3 id="æå–å­ä¸²å’Œå­—ç¬¦ä¸²è¿æ¥"><a href="#æå–å­ä¸²å’Œå­—ç¬¦ä¸²è¿æ¥" class="headerlink" title="æå–å­ä¸²å’Œå­—ç¬¦ä¸²è¿æ¥"></a>æå–å­ä¸²å’Œå­—ç¬¦ä¸²è¿æ¥</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s.<span class="built_in">substr</span>();<span class="comment">//è¿”å›sçš„å…¨éƒ¨å†…å®¹</span></span><br><span class="line">s.<span class="built_in">substr</span>(<span class="number">11</span>);<span class="comment">//ä»ç´¢å¼•11å¾€åçš„å­ä¸²</span></span><br><span class="line">s.<span class="built_in">substr</span>(<span class="number">5</span>,<span class="number">6</span>);<span class="comment">//ä»ç´¢å¼•5å¼€å§‹6ä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="comment">//æŠŠä¸¤ä¸ªå­—ç¬¦ä¸²ç»“åˆèµ·æ¥çš„å‡½æ•°æ˜¯+ã€‚</span></span><br></pre></td></tr></table></figure><h2 id="æœç´¢å’ŒæŸ¥æ‰¾"><a href="#æœç´¢å’ŒæŸ¥æ‰¾" class="headerlink" title="æœç´¢å’ŒæŸ¥æ‰¾"></a>æœç´¢å’ŒæŸ¥æ‰¾</h2><div class="table-container"><table><thead><tr><th>Name</th><th>Feature</th></tr></thead><tbody><tr><td>find()</td><td>æœç´¢ç¬¬ä¸€ä¸ªä¸valueç›¸ç­‰çš„å­—ç¬¦</td></tr><tr><td>rfind()</td><td>æœç´¢æœ€åä¸€ä¸ªä¸valueç›¸ç­‰çš„å­—ç¬¦</td></tr><tr><td>find_first_of()</td><td>æœç´¢ç¬¬ä¸€ä¸ªâ€œä¸valueä¸­æŸå€¼ç›¸ç­‰â€çš„å­—ç¬¦</td></tr><tr><td>find_last_of()</td><td>æœç´¢æœ€åä¸€ä¸ªä¸ªâ€œä¸valueä¸­æŸå€¼ç›¸ç­‰â€çš„å­—ç¬¦</td></tr><tr><td>find_first_not_of()</td><td>æœç´¢ç¬¬ä¸€ä¸ªâ€œä¸valueä¸­ä»»ä½•å€¼éƒ½ä¸ç›¸ç­‰â€çš„å­—ç¬¦</td></tr><tr><td>find_last_not_of()</td><td>æœç´¢æœ€åä¸€ä¸ªâ€œä¸valueä¸­ä»»ä½•å€¼éƒ½ä¸ç›¸ç­‰â€çš„å­—ç¬¦</td></tr></tbody></table></div><ol><li><p>æ‰€æœ‰æœç´¢å‡½æ•°éƒ½è¿”å›ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä½ç½®ï¼Œå¦‚æœæœç´¢ä¸æˆåŠŸï¼Œåˆ™è¿”å›nposã€‚</p></li><li><p>è¿™äº›å‡½æ•°éƒ½é‡‡ç”¨ä¸‹é¢çš„å‚æ•°æ–¹æ¡ˆï¼š</p><ul><li>ç¬¬ä¸€å‚æ•°æ€»æ˜¯æœç´¢å¯¹è±¡</li><li>ç¬¬äºŒå‚æ•°ï¼ˆå¯æœ‰å¯æ— ï¼‰æŒ‡å‡ºstringæœç´¢èµ·ç‚¹ï¼ˆå­—ç¬¦ä½ç½®ï¼‰</li><li>ç¬¬ä¸‰å‚æ•°ï¼ˆå¯æœ‰å¯æ— ï¼‰æŒ‡å‡ºæœç´¢çš„å­—ç¬¦ä¸ªæ•°</li></ul></li><li><p>éå†ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span>  </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;  </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span>  </span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line">    <span class="keyword">char</span>* cArray=<span class="string">&quot;hello, world!&quot;</span>;  </span><br><span class="line">    <span class="function">string <span class="title">s</span><span class="params">(cArray)</span></span>;  </span><br><span class="line">    <span class="comment">//æ•°ç»„æ–¹å¼  </span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">unsigned</span> <span class="keyword">int</span> j=<span class="number">0</span>; j&lt; s.<span class="built_in">size</span>(); j++)  </span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;ç¬¬&quot;</span> &lt;&lt; j &lt;&lt; <span class="string">&quot;ä¸ªå­—ç¬¦: &quot;</span> &lt;&lt; s[j] &lt;&lt; endl;  </span><br><span class="line">    <span class="comment">//è¿­ä»£å™¨æ–¹å¼  </span></span><br><span class="line">    string::reverse_iterator ri;  </span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;åå‘æ‰“å°å­—ç¬¦&quot;</span> &lt;&lt; endl;  </span><br><span class="line">    <span class="keyword">for</span>(ri=s.<span class="built_in">rbegin</span>(); ri!=s.<span class="built_in">rend</span>(); ri++)  </span><br><span class="line">        cout &lt;&lt; *ri &lt;&lt; <span class="string">&#x27; &#x27;</span> ;  </span><br><span class="line">    cout &lt;&lt; endl;  </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;  </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure></li></ol><h2 id="æ•°å€¼npos"><a href="#æ•°å€¼npos" class="headerlink" title="æ•°å€¼npos"></a>æ•°å€¼npos</h2><p>string::nposçš„ç±»å‹æ˜¯string::size_type,æ‰€ä»¥ï¼Œä¸€æ—¦éœ€è¦æŠŠä¸€ä¸ªç´¢å¼•ä¸nposç›¸æ¯”ï¼Œè¿™ä¸ªç´¢å¼•å€¼å¿…é¡»æ˜¯string::size)typeç±»å‹çš„ï¼Œæ›´å¤šçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠå‡½æ•°å’Œnposè¿›è¡Œæ¯”è¾ƒï¼ˆå¦‚ï¼šif(s.find(â€œjiaâ€)== string::npos)ï¼‰ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">string s;</span><br><span class="line">string::size_type idx;</span><br><span class="line">...</span><br><span class="line">idx = s.<span class="built_in">find</span>(<span class="string">&quot;sub&quot;</span>);</span><br><span class="line"><span class="keyword">if</span>(id == string::nops)</span><br><span class="line">    ....</span><br></pre></td></tr></table></figure><h1 id="stringçš„æ„é€ å’Œææ„"><a href="#stringçš„æ„é€ å’Œææ„" class="headerlink" title="stringçš„æ„é€ å’Œææ„"></a>stringçš„æ„é€ å’Œææ„</h1><div class="table-container"><table><thead><tr><th>Name</th><th>Feature</th></tr></thead><tbody><tr><td>string s</td><td>ç”Ÿæˆä¸€ä¸ªç©ºå­—ç¬¦ä¸²s</td></tr><tr><td>string s(str)</td><td>æ‹·è´æ„é€ å‡½æ•°ç”Ÿæˆstrçš„å¤åˆ¶å“</td></tr><tr><td>string s(str, stridx)</td><td>å°†å­—ç¬¦ä¸²strå†…â€å§‹äºä½ç½®stridxâ€çš„éƒ¨åˆ†å½“ä½œå­—ç¬¦ä¸²çš„åˆå€¼</td></tr><tr><td>string s(str, stridx, strlen)</td><td>å°†å­—ç¬¦ä¸²strå†…â€å§‹äºstridxä¸”é•¿åº¦é¡¶å¤šstrlenâ€çš„éƒ¨åˆ†ä½œä¸ºå­—ç¬¦ä¸²çš„åˆå€¼</td></tr><tr><td>string s(cstr)</td><td>å°†Cå­—ç¬¦ä¸²ï¼ˆä»¥NULLç»“æŸï¼‰ä½œä¸ºsçš„åˆå€¼</td></tr><tr><td>string s(chars, chars_len)</td><td>å°†Cå­—ç¬¦ä¸²å‰chars_lenä¸ªå­—ç¬¦ä½œä¸ºå­—ç¬¦ä¸²sçš„åˆå€¼</td></tr><tr><td>string s(num, â€˜câ€™)</td><td>ç”Ÿæˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒåŒ…å«numä¸ªcå­—ç¬¦</td></tr><tr><td>string s(â€œvalueâ€)</td><td>å°†såˆå§‹åŒ–ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²string s=â€œvalueâ€å­—é¢å€¼å‰¯æœ¬</td></tr><tr><td>string s=â€œvalueâ€</td><td>å°†såˆå§‹åŒ–ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²string s=â€œvalueâ€å­—é¢å€¼å‰¯æœ¬</td></tr><tr><td>string s(begin, end)</td><td>ä»¥åŒºé—´begin/end(ä¸åŒ…å«end)å†…çš„å­—ç¬¦ä½œä¸ºå­—ç¬¦ä¸²sçš„åˆå€¼</td></tr><tr><td>s.~string()</td><td>é”€æ¯æ‰€æœ‰å­—ç¬¦ï¼Œé‡Šæ”¾å†…å­˜2</td></tr></tbody></table></div><p>æ³¨æ„ï¼š</p><p><em>ä¸èƒ½ä»¥å•ä¸€å­—ç¬¦ï¼›çˆ±åˆå§‹åŒ–æŸä¸ªå­—ç¬¦ä¸²</em></p><p>ä½†æ˜¯å¯ä»¥è¿™ä¹ˆåšï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::string <span class="title">s</span><span class="params">(<span class="string">&#x27;x&#x27;</span>)</span></span>; <span class="comment">//error</span></span><br><span class="line"><span class="function">std::string <span class="title">s</span><span class="params">(<span class="number">1</span>, <span class="string">&#x27;x&#x27;</span>)</span> <span class="comment">//ok,creates a string that has one character &#x27;x&#x27;</span></span></span><br></pre></td></tr></table></figure><p>è¿™è¡¨ç¤ºäº†ç¼–è¯‘å™¨æä¾›äº†ä¸€ä¸ªä»const char*åˆ°stringçš„è‡ªåŠ¨ç±»å‹è½¬æ¢åŠŸèƒ½ï¼Œä½†æ˜¯åè¿‡æ¥å´ä¸è¡Œ</p><p>å‚è€ƒè‡ªï¼š</p><h1 id="stringç±»çš„è¾“å…¥"><a href="#stringç±»çš„è¾“å…¥" class="headerlink" title="stringç±»çš„è¾“å…¥"></a>stringç±»çš„è¾“å…¥</h1><h2 id="å¯¹äºc-é£æ ¼å­—ç¬¦ä¸²"><a href="#å¯¹äºc-é£æ ¼å­—ç¬¦ä¸²" class="headerlink" title="å¯¹äºc-é£æ ¼å­—ç¬¦ä¸²"></a>å¯¹äºc-é£æ ¼å­—ç¬¦ä¸²</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> info[<span class="number">100</span>];</span><br><span class="line">cin &gt;&gt; info;<span class="comment">//read a word</span></span><br><span class="line">cin.<span class="built_in">getline</span>(info, <span class="number">100</span>);<span class="comment">//read a line,discard \n</span></span><br><span class="line">cin.<span class="built_in">get</span>(info, <span class="number">100</span>);read a line,leave \n in queue</span><br></pre></td></tr></table></figure><h2 id="å¯¹äºstringå¯¹è±¡"><a href="#å¯¹äºstringå¯¹è±¡" class="headerlink" title="å¯¹äºstringå¯¹è±¡"></a>å¯¹äºstringå¯¹è±¡</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">string stuff;</span><br><span class="line">cin &gt;&gt; stuff;</span><br><span class="line"><span class="built_in">getline</span>(cin, stuff);</span><br></pre></td></tr></table></figure><h3 id="getline"><a href="#getline" class="headerlink" title="getline"></a>getline</h3><ol><li>ä¸¤ä¸ªç‰ˆæœ¬çš„getline()éƒ½æœ‰ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œç”¨äºæŒ‡å®šä½¿ç”¨å“ªä¸ªå­—ç¬¦æ¥ç¡®å®šè¾“å…¥çš„è¾¹ç•Œ</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cin.<span class="built_in">getline</span>(info, <span class="number">100</span>, <span class="string">&#x27;:&#x27;</span>);</span><br><span class="line"><span class="built_in">getline</span>(cin, stuff, <span class="string">&#x27;:&#x27;</span>);</span><br></pre></td></tr></table></figure><ol><li>stringç‰ˆæœ¬çš„getline()å‡½æ•°ä»è¾“å…¥ä¸­è¯»å–å­—ç¬¦ï¼Œå¹¶å°†å…¶å‚¨å­˜åˆ°ç›®æ ‡stringä¸­ï¼Œç›´åˆ°å‘ç”Ÿä¸‹ç§æƒ…å†µä¹‹ä¸€ï¼š<ul><li>åˆ°è¾¾æ–‡ä»¶ç»“å°¾ï¼Œè¾“å…¥æµçš„eofbitå°†è¢«è®¾ç½®ï¼Œè¿™æ„å‘³ç€æ–¹æ³•fail()å’Œeof()å°†è¢«è¿”å›true</li><li>é‡åˆ°åˆ†ç•Œå­—ç¬¦(é»˜è®¤æœª\n)ï¼Œå°†æŠŠåˆ†ç•Œå­—ç¬¦ä»è¾“å‡ºæµä¸­åˆ é™¤ï¼Œä½†æ˜¯ä¸å‚¨å­˜</li><li>è¯»å–çš„å­—ç¬¦æ•°è¾¾åˆ°æœ€å¤§å…è®¸å€¼(string::nopså’Œå¯ä¾›åˆ†é…çš„å†…å­˜å­—èŠ‚æ•°è¾ƒå°çš„ä¸€ä¸ª)ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†è®¾ç½®è¾“å…¥æµçš„failbitï¼Œè¿™æ„å‘³ç€æ–¹æ³•fail()å°†æ”¾å›true</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> STL </tag>
            
            <tag> string </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>emacså®˜æ–¹æ–‡æ¡£é˜…è¯»ç¬”è®°</title>
      <link href="/2018/02/19/emacs%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/"/>
      <url>/2018/02/19/emacs%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>åŸºæœ¬å‘½ä»¤è¡Œ<br><span id="more"></span></p><h1 id="ç¿»é¡µæµè§ˆå‘½ä»¤"><a href="#ç¿»é¡µæµè§ˆå‘½ä»¤" class="headerlink" title="ç¿»é¡µæµè§ˆå‘½ä»¤"></a>ç¿»é¡µæµè§ˆå‘½ä»¤</h1><p>C-v    å‘å‰ç§»åŠ¨ä¸€å±<br>M-v    å‘åç§»åŠ¨ä¸€å±<br>C-l    é‡ç»˜å±å¹•ï¼Œå¹¶å°†å…‰æ ‡æ‰€åœ¨è¡Œç½®äºå±å¹•çš„ä¸­å¤®  </p><h1 id="å…‰æ ‡ç§»åŠ¨å‘½ä»¤"><a href="#å…‰æ ‡ç§»åŠ¨å‘½ä»¤" class="headerlink" title="å…‰æ ‡ç§»åŠ¨å‘½ä»¤"></a>å…‰æ ‡ç§»åŠ¨å‘½ä»¤</h1><p>C-f    å‘å³ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦<br>C-b    å‘å·¦ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦  </p><p>M-f    å‘å³ç§»åŠ¨ä¸€ä¸ªè¯ã€å¯¹ä¸­æ–‡æ˜¯ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªæ ‡ç‚¹ç¬¦å·ã€‘<br>M-b    å‘å·¦ç§»åŠ¨ä¸€ä¸ªè¯ã€å¯¹ä¸­æ–‡æ˜¯ç§»åŠ¨åˆ°ä¸Šä¸€ä¸ªæ ‡ç‚¹ç¬¦å·ã€‘  </p><p>C-n    ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œ<br>C-p    ç§»åŠ¨åˆ°ä¸Šä¸€è¡Œ  </p><p>C-a    ç§»åŠ¨åˆ°è¡Œé¦–<br>C-e    ç§»åŠ¨åˆ°è¡Œå°¾  </p><p>M-a    ç§»åŠ¨åˆ°å¥é¦–<br>M-e    ç§»åŠ¨åˆ°å¥å°¾</p><p>M-&gt;æ–‡ç« æœ«å°¾</p><p>M-&lt;æ–‡ç« é¦–æ®µ</p><h1 id="æ–‡æœ¬ç¼–è¾‘å‘½ä»¤"><a href="#æ–‡æœ¬ç¼–è¾‘å‘½ä»¤" class="headerlink" title="æ–‡æœ¬ç¼–è¾‘å‘½ä»¤"></a>æ–‡æœ¬ç¼–è¾‘å‘½ä»¤</h1><p>&lt; DEL &gt;    åˆ é™¤å…‰æ ‡å‰çš„ä¸€ä¸ªå­—ç¬¦ã€è¿™é‡Œçš„DELæŒ‡é”®ç›˜ä¸Šçš„Backspaceé”®ã€‘<br>C-d    åˆ é™¤å…‰æ ‡åçš„ä¸€ä¸ªå­—ç¬¦  </p><p>M-&lt; DEL &gt;    ç§»é™¤å…‰æ ‡å‰çš„ä¸€ä¸ªè¯<br>M-d    ç§»é™¤å…‰æ ‡åçš„ä¸€ä¸ªè¯  </p><p>C-k    ç§»é™¤ä»å…‰æ ‡åˆ°â€œè¡Œå°¾â€é—´çš„å­—ç¬¦ã€ç§»é™¤å…¶å®ç›¸å½“äºå…¶ä»–ç¼–è¾‘å™¨é‡Œçš„å‰ªåˆ‡ã€‘<br>M-k    ç§»é™¤ä»å…‰æ ‡åˆ°â€œå¥å°¾â€é—´çš„å­—ç¬¦  </p><p>C-y    åœ¨å…‰æ ‡æ‰€åœ¨å¤„æ’å…¥æœ€åç§»é™¤çš„æ–‡å­—ã€è¿™ä¸ªå¬å›å‘½ä»¤å…¶å®ç›¸å½“äºå…¶ä»–ç¼–è¾‘å™¨é‡Œçš„ç²˜è´´ã€‘<br>M-y    å¬å›å†å‰ä¸€æ¬¡è¢«ç§»é™¤çš„å†…å®¹ï¼Œè¿ç»­ä½¿ç”¨ M-y ç›´åˆ°æ‰¾åˆ°ä½ æƒ³è¦å¬å›çš„ä¸œè¥¿ã€‚  </p><p>C-/    æ’¤é”€å‘½ä»¤  </p><p>C-x r k : æ‰§è¡ŒçŸ©å½¢åŒºåŸŸçš„å‰ªåˆ‡  </p><p>C-x r y : æ‰§è¡ŒçŸ©å½¢åŒºåŸŸçš„ç²˜è´´  </p><h1 id="æ–‡ä»¶æ“ä½œå‘½ä»¤"><a href="#æ–‡ä»¶æ“ä½œå‘½ä»¤" class="headerlink" title="æ–‡ä»¶æ“ä½œå‘½ä»¤"></a>æ–‡ä»¶æ“ä½œå‘½ä»¤</h1><p>C-x C-f    å¯»æ‰¾ä¸€ä¸ªæ–‡ä»¶ã€å¦‚æœå¯»æ‰¾ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œå°†åˆ›å»ºæ­¤æ–‡ä»¶ï¼Œåªæœ‰åœ¨å­˜ç›˜çš„æ—¶å€™ï¼ŒEmacs æ‰ä¼šçœŸæ­£åˆ›å»ºè¿™ä¸ªæ–‡ä»¶ã€‘<br>C-x C-s    å‚¨å­˜è¿™ä¸ªæ–‡ä»¶  </p><p>C-x C-c    é€€å‡ºEmacs  </p><p>C-g : å–æ¶ˆæœªå®Œæˆçš„å‘½ä»¤  </p><h1 id="ç¼“å†²åŒºæ“ä½œå‘½ä»¤ï¼š"><a href="#ç¼“å†²åŒºæ“ä½œå‘½ä»¤ï¼š" class="headerlink" title="ç¼“å†²åŒºæ“ä½œå‘½ä»¤ï¼š"></a>ç¼“å†²åŒºæ“ä½œå‘½ä»¤ï¼š</h1><p>C-x C-b    åˆ—å‡ºç¼“å†²<br>C-x 1    ç¦»å¼€ç¼“å†²åŒºåˆ—ã€åªä¿ç•™å½“å‰å…‰æ ‡æ‰€åœ¨çª—æ ¼ã€‘<br>C-x b    ç¼“å†²åŒºåç§° &lt; Return&gt;     åˆ‡æ¢ç¼“å†²<br>C-x s    ä¿å­˜å¤šä¸ªç¼“å†²  </p><p>C-M-\ : å¯¹é€‰ä¸­åŒºåŸŸï¼ŒæŒ‰ç…§æŸç§æ ¼å¼(æ¯”å¦‚Cç¨‹åº)è¿›è¡Œæ ¼å¼åŒ–<br>C-x h : å…¨éƒ¨é€‰ä¸­  </p><h1 id="æœç´¢å‘½ä»¤ï¼š"><a href="#æœç´¢å‘½ä»¤ï¼š" class="headerlink" title="æœç´¢å‘½ä»¤ï¼š"></a>æœç´¢å‘½ä»¤ï¼š</h1><p>C-s    å‘å‰æœç´¢ã€å†æŒ‰ä¸€æ¬¡ C-sï¼Œæœç´¢ä¸‹ä¸€ä¸ªï¼Œæ•² &lt; Return &gt; ç»“æŸæœç´¢ã€‘<br>C-r    å‘åæœç´¢ã€é™¤äº†æœç´¢æ–¹å‘ä¸C-sç›¸åä¹‹å¤–ï¼Œå…¶ä½™çš„æ“ä½œéƒ½ä¸€æ ·ã€‘  </p><p>M-% : æŸ¥è¯¢æ›¿æ¢ï¼Œä¹Ÿå°±æ˜¯æ›¿æ¢å‰ä¼šè¯¢é—®ä¸€ä¸‹<br>M-x replace-string : æ™®é€šæ›¿æ¢  </p><h1 id="å¤šçª—æ ¼"><a href="#å¤šçª—æ ¼" class="headerlink" title="å¤šçª—æ ¼"></a>å¤šçª—æ ¼</h1><p>C-x 2    å°†å±å¹•åˆ’åˆ†æˆä¸¤ä¸ªçª—æ ¼ã€æ•°å­—2å¯ä»¥æ˜¯å…¶ä»–æ•°å­—ï¼ˆé™¤1ä»¥å¤–ï¼‰ã€‘<br>C-M-v    å‘ä¸‹æ»šåŠ¨å¦ä¸€ä¸ªçª—æ ¼<br>C-M-S-v    å‘ä¸Šæ»šåŠ¨å¦ä¸€ä¸ªçª—æ ¼<br>C-x o    å°†å…‰æ ‡è½¬ç§»åˆ°å¦ä¸€ä¸ªçª—æ ¼<br>C-x 1    åªä¿ç•™å½“å‰å…‰æ ‡æ‰€åœ¨çª—æ ¼  </p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> emacs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>c++å°æ€»ç»“2</title>
      <link href="/2018/02/18/c++%E5%B0%8F%E6%80%BB%E7%BB%932/"/>
      <url>/2018/02/18/c++%E5%B0%8F%E6%80%BB%E7%BB%932/</url>
      
        <content type="html"><![CDATA[<p>è™šå‡½æ•°ä¸ç»§æ‰¿ï¼Œè½¬æ¢å‡½æ•°</p><span id="more"></span><h1 id="è™šå‡½æ•°ä¸ç»§æ‰¿"><a href="#è™šå‡½æ•°ä¸ç»§æ‰¿" class="headerlink" title="è™šå‡½æ•°ä¸ç»§æ‰¿"></a>è™šå‡½æ•°ä¸ç»§æ‰¿</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">shape</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> <span class="keyword">const</span> </span>= <span class="number">0</span>; <span class="comment">//pure virtualï¼Œä¸€å®šè¦å®šä¹‰</span></span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">error</span><span class="params">(<span class="keyword">const</span> std::string&amp; msg)</span></span>;</span><br><span class="line">  <span class="comment">//impure virtualï¼Œå¸Œæœ›é‡æ–°å®šä¹‰ï¼Œè€Œä¸”å·²æœ‰é»˜è®¤å®šä¹‰</span></span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">objectID</span><span class="params">()</span> <span class="keyword">const</span></span>; <span class="comment">//non-virtualï¼Œä¸å¸Œæœ›é‡æ–°å®šä¹‰</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E8%99%9A%E5%87%BD%E6%95%B0.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E8%99%9A%E5%87%BD%E6%95%B02.png"></p><h1 id="è½¬æ¢å‡½æ•°"><a href="#è½¬æ¢å‡½æ•°" class="headerlink" title="è½¬æ¢å‡½æ•°"></a>è½¬æ¢å‡½æ•°</h1><h2 id="æƒ…å†µ1"><a href="#æƒ…å†µ1" class="headerlink" title="æƒ…å†µ1"></a>æƒ…å†µ1</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fraction</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">Fraction</span>(<span class="keyword">int</span> num, <span class="keyword">int</span> den = <span class="number">1</span>)</span><br><span class="line">      : <span class="built_in">m_numerator</span>(num), <span class="built_in">m_denominator</span>(den) &#123; &#125; <span class="comment">//(1)</span></span><br><span class="line">  <span class="function"><span class="keyword">operator</span> <span class="title">double</span><span class="params">()</span> <span class="keyword">const</span> <span class="comment">//è½¬æ¢å‡½æ•°</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> (<span class="keyword">double</span>)(m_numerator / m_denominator);</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">  <span class="keyword">int</span> m_numerator;<span class="comment">//åˆ†å­</span></span><br><span class="line">  <span class="keyword">int</span> m_denominatorï¼›<span class="comment">//åˆ†æ¯</span></span><br><span class="line">&#125;;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="function">Fraction <span class="title">f</span><span class="params">(<span class="number">3</span>, <span class="number">5</span>)</span></span>;<span class="comment">//è°ƒç”¨(1)</span></span><br><span class="line"><span class="keyword">double</span> d = <span class="number">4</span> + f;<span class="comment">//è°ƒç”¨operator doubleå°†fè½¬ä¸º0</span></span><br></pre></td></tr></table></figure><h2 id="æƒ…å†µ2"><a href="#æƒ…å†µ2" class="headerlink" title="æƒ…å†µ2"></a>æƒ…å†µ2</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fraction</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">Fraction</span>(<span class="keyword">int</span> num, <span class="keyword">int</span> den = <span class="number">1</span>)</span><br><span class="line">      : <span class="built_in">m_numerator</span>(num), <span class="built_in">m_denominator</span>(den) &#123; &#125; </span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  non-explicit-one-argument ctor</span></span><br><span class="line"><span class="comment">  explicit:å¯ä»¥é˜»æ­¢ä¸åº”è¯¥å…è®¸çš„ç»è¿‡è½¬æ¢æ„é€ å‡½æ•°è¿›è¡Œçš„éšå¼è½¬æ¢çš„å‘ç”Ÿã€‚</span></span><br><span class="line"><span class="comment">  å£°æ˜ä¸ºexplicitçš„æ„é€ å‡½æ•°,èƒ½åœ¨éšå¼è½¬æ¢ä¸­ä½¿ç”¨</span></span><br><span class="line"><span class="comment">  one-argument:å› ä¸ºdenæœ‰é»˜è®¤å€¼ï¼Œæ‰€ä»¥æ­¤å¤„æŒ‡çš„æ˜¯åªéœ€è¦ä¸€ä¸ªå‚æ•°çš„å€¼å°±å¤Ÿäº†</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  Fraction <span class="keyword">operator</span>+ ï¼ˆ<span class="keyword">const</span> Fraction&amp; fï¼‰ </span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Fraction</span>(...);</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">  <span class="keyword">int</span> m_numerator;<span class="comment">//åˆ†å­</span></span><br><span class="line">  <span class="keyword">int</span> m_denominatorï¼›<span class="comment">//åˆ†æ¯</span></span><br><span class="line">&#125;;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="function">Fraction <span class="title">f</span><span class="params">(<span class="number">3</span>, <span class="number">5</span>)</span></span>;</span><br><span class="line">Fraction d2 = f + <span class="number">4</span>;</span><br><span class="line"><span class="comment">//è°ƒç”¨non-explicit ctorå°†4è½¬åŒ–ä¸ºFraction(4, 1)ï¼Œç„¶åè°ƒç”¨operator+</span></span><br></pre></td></tr></table></figure><h2 id="æƒ…å†µ3"><a href="#æƒ…å†µ3" class="headerlink" title="æƒ…å†µ3"></a>æƒ…å†µ3</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fraction</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">Fraction</span>(<span class="keyword">int</span> num, <span class="keyword">int</span> den = <span class="number">1</span>)</span><br><span class="line">      : <span class="built_in">m_numerator</span>(num), <span class="built_in">m_denominator</span>(den) &#123; &#125; <span class="comment">//(1)</span></span><br><span class="line">  <span class="function"><span class="keyword">operator</span> <span class="title">double</span><span class="params">()</span> <span class="keyword">const</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> (<span class="keyword">double</span>)(m_numerator / m_denominator);</span><br><span class="line">    &#125;</span><br><span class="line">    Fraction <span class="keyword">operator</span>+ ï¼ˆ<span class="keyword">const</span> Fraction&amp; fï¼‰ </span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Fraction</span>(...);</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">  <span class="keyword">int</span> m_numerator;<span class="comment">//åˆ†å­</span></span><br><span class="line">  <span class="keyword">int</span> m_denominatorï¼›<span class="comment">//åˆ†æ¯</span></span><br><span class="line">&#125;;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="function">Fraction <span class="title">f</span><span class="params">(<span class="number">3</span>, <span class="number">5</span>)</span></span>;<span class="comment">//è°ƒç”¨(1)</span></span><br><span class="line">Fraction d = f + <span class="number">4</span>;<span class="comment">//error, ambiguous</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æ­¤æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨å¯ä»¥æŒ‰ç…§æƒ…å†µ2å°†4è½¬åŒ–ä¸ºFractionï¼Œå³1/4</span></span><br><span class="line"><span class="comment">ä¹Ÿå¯ä»¥æŒ‰ç…§æƒ…å†µ1å°†fè½¬åŒ–ä¸º0.6(3/5çš„ç»“æœï¼‰</span></span><br><span class="line"><span class="comment">æ­¤æ—¶å°±ä¼šäº’ç›¸çŸ›ç›¾ï¼Œå‡ºç°error</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h1 id="æƒ…å†µ4"><a href="#æƒ…å†µ4" class="headerlink" title="æƒ…å†µ4"></a>æƒ…å†µ4</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fraction</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">explicit</span> <span class="title">Fraction</span><span class="params">(<span class="keyword">int</span> num, <span class="keyword">int</span> den = <span class="number">1</span>)</span></span></span><br><span class="line"><span class="function">      : m_numerator(num), m_denominator(den) &#123;</span> &#125;  <span class="comment">//(1)</span></span><br><span class="line">  <span class="function"><span class="keyword">operator</span> <span class="title">double</span><span class="params">()</span> <span class="keyword">const</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> (<span class="keyword">double</span>)(m_numerator / m_denominator);</span><br><span class="line">    &#125;</span><br><span class="line">    Fraction <span class="keyword">operator</span>+ ï¼ˆ<span class="keyword">const</span> Fraction&amp; fï¼‰ </span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Fraction</span>(...);</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">  <span class="keyword">int</span> m_numerator;<span class="comment">//åˆ†å­</span></span><br><span class="line">  <span class="keyword">int</span> m_denominatorï¼›<span class="comment">//åˆ†æ¯</span></span><br><span class="line">&#125;;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="function">Fraction <span class="title">f</span><span class="params">(<span class="number">3</span>, <span class="number">5</span>)</span></span>;</span><br><span class="line">Fraction d = f + <span class="number">4</span>;<span class="comment">//error:conversion from &#x27;double&#x27; to &#x27;Fraction&#x27; request</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ä¸èƒ½è°ƒç”¨(1)å°†4å˜åŒ–Franctionç±»å‹ï¼ŒåŒæ—¶é‡è½½äº†+æ³•æ˜¯Fractionç±»å‹ç›¸åŠ ï¼Œæ‰€ä»¥ä¼šå¤±è´¥</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ç±» </tag>
            
            <tag> ç»§æ‰¿ </tag>
            
            <tag> è™šå‡½æ•° </tag>
            
            <tag> è½¬æ¢å‡½æ•° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>c++å°æ€»ç»“</title>
      <link href="/2018/02/17/c++%E5%B0%8F%E6%80%BB%E7%BB%93/"/>
      <url>/2018/02/17/c++%E5%B0%8F%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p>æ„é€ å‡½æ•°ä¸èƒ½å…±å­˜ä¾‹å­ã€æ„é€ å‡½æ•°æ”¾åœ¨privateã€conståœ¨å‡½æ•°å‰ä¸åã€ç›¸åŒclassçš„å„ä¸ªobjectsäº’ä¸ºå‹å…ƒã€è®¾è®¡ä¸€ä¸ªç±»æ³¨æ„äº‹é¡¹ã€æ“ä½œç¬¦é‡è½½ã€newä¸deleteã€staticã€ç»§æ‰¿ï¼Œå¤åˆï¼Œå§”æ‰˜<br><span id="more"></span></p><h1 id="1-æ„é€ å‡½æ•°ä¸èƒ½å…±å­˜ä¾‹å­"><a href="#1-æ„é€ å‡½æ•°ä¸èƒ½å…±å­˜ä¾‹å­" class="headerlink" title="1. æ„é€ å‡½æ•°ä¸èƒ½å…±å­˜ä¾‹å­"></a>1. æ„é€ å‡½æ•°ä¸èƒ½å…±å­˜ä¾‹å­</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ï¼ˆ<span class="number">1</span>ï¼‰</span><br><span class="line"><span class="built_in">complex</span> (<span class="keyword">double</span> r = <span class="number">0</span>, <span class="keyword">double</span> i = <span class="number">0</span>)</span><br><span class="line">  : <span class="built_in">re</span>(r), <span class="built_in">im</span>(i)</span><br><span class="line">&#123; &#125;</span><br><span class="line"></span><br><span class="line">ï¼ˆ<span class="number">2</span>ï¼‰</span><br><span class="line"><span class="built_in">complex</span>() : <span class="built_in">re</span>(<span class="number">0</span>), <span class="built_in">im</span>(<span class="number">0</span>) &#123; &#125;</span><br></pre></td></tr></table></figure><p>å½“ä½¿ç”¨complex c1;æˆ–complex c2();æ—¶ï¼Œä¸¤ç§åˆ›å»ºåŠæ³•éƒ½æ²¡æœ‰å‚æ•°ï¼Œç¼–è¯‘å™¨å¯ä»¥è°ƒç”¨ï¼ˆ1ï¼‰ï¼Œå¯¹äºï¼ˆ2ï¼‰ï¼Œè™½ç„¶å‡½æ•°æœ‰å‚æ•°ï¼Œä½†æ˜¯æœ‰é»˜è®¤å€¼ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨ï¼Œæ‰€ä»¥ä¼šå†²çªï¼Œä¸èƒ½å…±å­˜ã€‚</p><h1 id="2-æ„é€ å‡½æ•°æ”¾åœ¨private"><a href="#2-æ„é€ å‡½æ•°æ”¾åœ¨private" class="headerlink" title="2. æ„é€ å‡½æ•°æ”¾åœ¨private"></a>2. æ„é€ å‡½æ•°æ”¾åœ¨private</h1><p>ä¸€èˆ¬æˆ‘ä»¬ä¸æŠŠæ„é€ å‡½æ•°æ”¾åœ¨privateé‡Œé¢ï¼Œå› ä¸ºè¿™æ ·ä¸èƒ½è¢«å¤–ç•Œè°ƒç”¨ã€‚å…¶å®ä¹Ÿæœ‰ç‰¹æ®Šæƒ…å†µï¼Œä¸‹é¢åˆ—ä¸¾ä¸€ç§ï¼ŒMeyers Singletonè®¾è®¡æ¨¡å¼</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">static</span> A&amp; <span class="title">getInstance</span><span class="params">()</span></span>;</span><br><span class="line">  <span class="built_in">setup</span>() &#123;...&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  <span class="built_in">A</span>();<span class="comment">//æ„é€ å‡½æ•°</span></span><br><span class="line">  <span class="built_in">A</span>(<span class="keyword">const</span> A&amp; rhs);<span class="comment">//æ„é€ å‡½æ•°</span></span><br><span class="line">  ...</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">A&amp; <span class="title">A::getInstance</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">static</span> A a;</span><br><span class="line">  <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">è°ƒç”¨ï¼šA::getInstance.<span class="built_in">setup</span>(); <span class="comment">//é€šè¿‡å‡½æ•°æ¥å¾—åˆ°å”¯ä¸€çš„ä¸€ä»½</span></span><br></pre></td></tr></table></figure><h1 id="3-conståœ¨å‡½æ•°å‰ä¸å"><a href="#3-conståœ¨å‡½æ•°å‰ä¸å" class="headerlink" title="3. conståœ¨å‡½æ•°å‰ä¸å"></a>3. conståœ¨å‡½æ•°å‰ä¸å</h1><ul><li>æ¦‚å¿µï¼šå½“conståœ¨å‡½æ•°åå‰é¢çš„æ—¶å€™ä¿®é¥°çš„æ˜¯å‡½æ•°è¿”å›å€¼ï¼Œåœ¨å‡½æ•°ååé¢è¡¨ç¤ºæ˜¯å¸¸æˆå‘˜å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¸èƒ½ä¿®æ”¹å¯¹è±¡å†…çš„ä»»ä½•æˆå‘˜ï¼Œåªèƒ½å‘ç”Ÿè¯»æ“ä½œï¼Œä¸èƒ½å‘ç”Ÿå†™æ“ä½œã€‚</li><li>åŸç†ï¼šæˆ‘ä»¬éƒ½çŸ¥é“åœ¨è°ƒç”¨æˆå‘˜å‡½æ•°çš„æ—¶å€™ç¼–è¯‘å™¨ä¼šå°†å¯¹è±¡è‡ªèº«çš„åœ°å€ä½œä¸ºéšè—å‚æ•°ä¼ é€’ç»™å‡½æ•°ï¼Œåœ¨constæˆå‘˜å‡½æ•°ä¸­ï¼Œæ—¢ä¸èƒ½æ”¹å˜thisæ‰€æŒ‡å‘çš„å¯¹è±¡ï¼Œä¹Ÿä¸èƒ½æ”¹å˜thisæ‰€ä¿å­˜çš„åœ°å€ï¼Œthisçš„ç±»å‹æ˜¯ä¸€ä¸ªæŒ‡å‘constç±»å‹å¯¹è±¡çš„constæŒ‡é’ˆã€‚</li><li>ä½¿ç”¨constå…³é”®å­—è¿›è¡Œè¯´æ˜çš„æˆå‘˜å‡½æ•°ï¼Œç§°ä¸ºå¸¸æˆå‘˜å‡½æ•°ã€‚åªæœ‰å¸¸æˆå‘˜å‡½æ•°æ‰æœ‰èµ„æ ¼æ“ä½œå¸¸é‡æˆ–å¸¸å¯¹è±¡ï¼Œæ²¡æœ‰ä½¿ç”¨constå…³é”®å­—è¯´æ˜çš„æˆå‘˜å‡½æ•°ä¸èƒ½ç”¨æ¥æ“ä½œå¸¸å¯¹è±¡ã€‚</li><li>constå¯¹è±¡åªèƒ½è°ƒç”¨constæˆå‘˜å‡½æ•°ã€‚åœ¨constå‡½æ•°ä¸­è°ƒç”¨éconstæˆå‘˜å‡½æ•°æ˜¯è¯­æ³•é”™è¯¯ ã€‚</li></ul><h1 id="4-ç›¸åŒclassçš„å„ä¸ªobjectsäº’ä¸ºå‹å…ƒ"><a href="#4-ç›¸åŒclassçš„å„ä¸ªobjectsäº’ä¸ºå‹å…ƒ" class="headerlink" title="4. ç›¸åŒclassçš„å„ä¸ªobjectsäº’ä¸ºå‹å…ƒ"></a>4. ç›¸åŒclassçš„å„ä¸ªobjectsäº’ä¸ºå‹å…ƒ</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">complex</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">   ....</span><br><span class="line">   <span class="function"><span class="keyword">int</span> <span class="title">fun</span><span class="params">(<span class="keyword">const</span> complex&amp; param)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> param.re + param.im; <span class="comment">//ç›´æ¥å¯ä»¥æ‹¿å°è£…é‡Œé¢æ•°æ®</span></span><br><span class="line">   &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  <span class="keyword">double</span> re, <span class="keyword">double</span> im;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="5-è®¾è®¡ä¸€ä¸ªç±»æ³¨æ„äº‹é¡¹"><a href="#5-è®¾è®¡ä¸€ä¸ªç±»æ³¨æ„äº‹é¡¹" class="headerlink" title="5. è®¾è®¡ä¸€ä¸ªç±»æ³¨æ„äº‹é¡¹"></a>5. è®¾è®¡ä¸€ä¸ªç±»æ³¨æ„äº‹é¡¹</h1><ul><li>æ•°æ®å°½é‡æ”¾åœ¨private</li><li>å‚æ•°å’Œè¿”å›å€¼å°½é‡é€šè¿‡å¼•ç”¨ä¼ é€’</li><li>è€ƒè™‘const</li><li>æ„é€ å‡½æ•°ç‰¹æ®Šåˆå§‹åŒ–è¯­æ³•</li></ul><h1 id="6-æ“ä½œç¬¦é‡è½½"><a href="#6-æ“ä½œç¬¦é‡è½½" class="headerlink" title="6. æ“ä½œç¬¦é‡è½½"></a>6. æ“ä½œç¬¦é‡è½½</h1><ul><li>æˆå‘˜å‡½æ•°ï¼ˆæœ‰thisï¼‰ï¼š</li></ul><p>&lt;/div&gt;</p><div align="center"><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E6%93%8D%E4%BD%9C%E7%AC%A6%E9%87%8D%E8%BD%BD.png" width="80%" height="80%"></div><ul><li>éæˆå‘˜å‡½æ•°ï¼ˆæ— thisï¼‰ï¼š</li></ul><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E6%93%8D%E4%BD%9C%E7%AC%A6%E9%87%8D%E8%BD%BD2.png" width="90%" height="90%"></p><p><em>æ³¨ï¼štypename()ï¼Œåˆ›å»ºä¸´æ—¶å¯¹è±¡ï¼Œå¦‚complex( real (x) + y, imag (x) );</em></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E6%93%8D%E4%BD%9C%E7%AC%A6%E9%87%8D%E8%BD%BD3.png" width="90%" height="90%"></p><ul><li>å–åï¼š</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">inline</span> complex</span><br><span class="line"><span class="keyword">operator</span> + (<span class="keyword">const</span> complex x)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">inline</span> complex</span><br><span class="line"><span class="keyword">operator</span> - (<span class="keyword">const</span> complex&amp; x)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">complex</span>(-<span class="built_in">real</span> (x), -<span class="built_in">imag</span>(y));<span class="comment">//ä¸´æ—¶å¯¹è±¡</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è°ƒç”¨</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="function">complex <span class="title">c1</span><span class="params">(<span class="number">2</span>, <span class="number">1</span>)</span></span>;</span><br><span class="line">  complex c2;</span><br><span class="line">  cout &lt;&lt; -c1;</span><br><span class="line">  cout &lt;&lt; +c2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="7-newä¸delete"><a href="#7-newä¸delete" class="headerlink" title="7. newä¸delete"></a>7. newä¸delete</h1><ul><li>newï¼šå…ˆåˆ†é…memoryï¼Œå†è°ƒç”¨ctorã€‚</li></ul><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/new%E4%B8%8Edelete.jpg" width="90%" height="90%"></p><ul><li><p>deleteï¼šå…ˆè°ƒç”¨dtorï¼Œå†è°ƒç”¨memory</p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/new%E4%B8%8Edelete2.png" width="100%" height="100%"></p></li></ul><h1 id="8-static"><a href="#8-static" class="headerlink" title="8. static"></a>8. static</h1><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/Static.png" width="100%" height="100%"></p><ul><li>åœ¨æ²¡æœ‰ä½¿ç”¨staticçš„æƒ…å†µä¸‹ï¼Œè¦ä½¿ç”¨complexåˆ›å»ºnä¸ªå¯¹è±¡ï¼Œå°±æ˜¯åœ¨å†…å­˜é‡Œé¢åˆ›å»ºnä¸ªéé™æ€æ•°æ®ã€‚å‡½æ•°åªæœ‰ä¸€ä¸ªï¼Œä½†æ˜¯è¦å¤„ç†nä¸ªæ•°æ®ï¼Œé çš„æ˜¯this pointeræŒ‡å‘æ•°æ®æ¥å¼•å¯¼å‡½æ•°è¦å»å¤„ç†å“ªä¸ªæ•°æ®ã€‚</li><li>ä½¿ç”¨staticå‡½æ•°å’Œå¯¹è±¡åï¼Œå‡½æ•°åŒæ ·æœ‰ä¸€ä»½ï¼Œä½†æ˜¯é™æ€æ•°æ®åªæœ‰ä¸€ä»½ã€‚é™æ€å‡½æ•°æ²¡æœ‰this pointerï¼Œå¯è§é™æ€å‡½æ•°åªèƒ½å»å¤„ç†é™æ€æ•°æ®ã€‚</li></ul><p>ä¾‹å¦‚ï¼šä¸€ä¸ªé“¶è¡Œä¸­ï¼Œè´¦æˆ·å¯èƒ½æœ‰å¾ˆå¤šä¸ªï¼Œä¸å¿…ç”¨staticï¼Œä½†æ˜¯åˆ©ç‡åªæœ‰ä¸€ä»½ï¼Œå¯ä»¥ç”¨staticã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">account</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">double</span> rate; <span class="comment">//åˆ©ç‡</span></span><br><span class="line">  <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">set_rate</span><span class="params">(<span class="keyword">const</span> <span class="keyword">double</span>&amp; x)</span> </span>&#123; rete = x;&#125; <span class="comment">//è®¾ç½®åˆ©ç‡</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  è°ƒç”¨staticå‡½æ•°çš„æ–¹å¼æœ‰äºŒç§ï¼š</span></span><br><span class="line"><span class="comment">  1. é€šè¿‡å‡½æ•°è°ƒç”¨ï¼›</span></span><br><span class="line"><span class="comment">  2. é€šè¿‡ç±»åè°ƒç”¨ï¼›</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  account::<span class="built_in">set_rate</span>(<span class="number">5.0</span>); <span class="comment">//(1)</span></span><br><span class="line"></span><br><span class="line">  account a;</span><br><span class="line">  a.<span class="built_in">set_rate</span>(<span class="number">7.0</span>); <span class="comment">//(2)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="9-ç»§æ‰¿ï¼Œå¤åˆï¼Œå§”æ‰˜"><a href="#9-ç»§æ‰¿ï¼Œå¤åˆï¼Œå§”æ‰˜" class="headerlink" title="9. ç»§æ‰¿ï¼Œå¤åˆï¼Œå§”æ‰˜"></a>9. ç»§æ‰¿ï¼Œå¤åˆï¼Œå§”æ‰˜</h1><h2 id="1-å¤åˆ-has-a"><a href="#1-å¤åˆ-has-a" class="headerlink" title="1. å¤åˆ(has-a)"></a>1. å¤åˆ(has-a)</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>, <span class="keyword">class</span> <span class="title">Sequence</span> =</span> deque&lt;T&gt; &gt;</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">queue</span></span></span><br><span class="line"><span class="class">  &#123;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">protected</span>:</span><br><span class="line">    Sequence c;<span class="comment">//åº•å±‚å®¹å™¨ï¼Œå¤åˆ</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">empty</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> c.<span class="built_in">empty</span>(); &#125;</span><br><span class="line">    <span class="function">size_type <span class="title">size</span><span class="params">()</span> cosnt <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> c.<span class="built_in">size</span>(); &#125;</span><br><span class="line">    ....</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E5%A4%8D%E5%90%88.png" width="100%" height="100%"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E5%A4%8D%E5%90%882.png"></p><p><em>dequeå’ŒqueueåŒæ—¶å‡ºç°åŒæ—¶æ¶ˆå¤±</em></p><h2 id="2-å§”æ‰˜"><a href="#2-å§”æ‰˜" class="headerlink" title="2. å§”æ‰˜"></a>2. å§”æ‰˜</h2><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E5%A7%94%E6%89%98.png"></p><p><em>StringRepä¸Stringæ²¡æœ‰å…±å­˜å…³ç³»</em></p><h2 id="3-ç»§æ‰¿-is-a"><a href="#3-ç»§æ‰¿-is-a" class="headerlink" title="3. ç»§æ‰¿(is-a)"></a>3. ç»§æ‰¿(is-a)</h2><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E7%BB%A7%E6%89%BF.png"></p><p><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E7%BB%A7%E6%89%BF2.png"></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ç±» </tag>
            
            <tag> å¤åˆ </tag>
            
            <tag> ç»§æ‰¿ </tag>
            
            <tag> å§”æ‰˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¿‡å¹´æ˜¯ä¸å¯èƒ½è¿‡å¹´çš„</title>
      <link href="/2018/02/15/YXT-%E8%BF%87%E5%B9%B4%E6%98%AF%E4%B8%8D%E5%8F%AF%E8%83%BD%E8%BF%87%E5%B9%B4%E7%9A%84/"/>
      <url>/2018/02/15/YXT-%E8%BF%87%E5%B9%B4%E6%98%AF%E4%B8%8D%E5%8F%AF%E8%83%BD%E8%BF%87%E5%B9%B4%E7%9A%84/</url>
      
        <content type="html"><![CDATA[<p>å¦‚ä»Šæ–°å¹´è¶Šæ¥æœˆæ²¡æœ‰å¹´å‘³äº†ï¼Œå¯¹äºæˆ‘æ¥è¯´ï¼Œç»™ç”µè„‘æ¢ä¸ªå£çº¸ç­‰äºè¿‡å¹´</p><p>&lt;/div&gt;</p><div align="center"><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/%E6%82%A0%E9%97%B2%E8%B0%88/Cache_-ea02e3ab8fe8037..jpg" width="80%" height="80%"></div><p>å£çº¸ï¼Œå½“ç„¶å¾—éªšçº¢ï¼Œæ¯•ç«Ÿ  </p><p><strong>ç”·äººå¯ä»¥ä¸å¸…ï¼Œä½†æ˜¯ä¸èƒ½ä¸éªš</strong></p><p>ä»Šå¹´æ˜¥æ™šæœ‰4kæºï¼Œä½†æ˜¯åœ¨youtubeä¸Šé¢å—¨ï¼Œä¼°è®¡ä¹Ÿæ˜¯ç»™å¤–å›½ä½¬å½“åšå‚¬çœ å‰‚æŠŠï¼Œæ¯•ç«Ÿ</p><p><strong>æ˜¥æ™šä¸€åˆ†é’Ÿï¼Œç¨³ç¡ä¸€æ™šä¸Š</strong></p><p>æ— èŠæ¥è°¢è°¢éšç¬”ï¼Œå…¶å®ä¹Ÿä¸ç®—éšç¬”ï¼Œå°±æ˜¯åœ¨xjbå†™</p><p>å…¶å®å§ï¼Œæ˜¯ä¸ºäº†æµ‹è¯•ä¸‹æ‚ é—²è°ˆæ¿å—è€Œå·²</p><p>æ”¾å‡åç”¨hexoå’Œgithubæ­å»ºäº†ä¸ªåšå®¢ï¼Œè¿™å¯èƒ½æ˜¯å¥½äº‹ï¼Œä¹Ÿå¯èƒ½æ˜¯åå¤„ï¼Œæ¯•ç«Ÿæœ‰å¾ˆå¤šä¸œè¥¿éƒ½æœ‰ä¸¤é¢æ€§</p><p>ç„¶åï¼Œå°±æ²¡æœ‰ç„¶åäº†ï¼Œç°åœ¨æ˜¯é™¤å¤•ä¸‹åˆï¼Œè¡£ç€ç®€é™‹ï¼Œæ— å¿ƒè¿‡å¹´ï¼Œå”¯æœ‰å†œè¯</p><p>ï¼ˆè¯´ï¼Œå†œè¯ç»™äº†ä½ å¤šå°‘é’±ï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> æ‚ é—²è°ˆ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>STLä¹‹setå’Œmultiset</title>
      <link href="/2018/02/15/STL%E4%B9%8Bset/"/>
      <url>/2018/02/15/STL%E4%B9%8Bset/</url>
      
        <content type="html"><![CDATA[<p>setå’Œmultisetå®¹å™¨çš„æ“ä½œå‡½æ•°å’Œä¸€é“é¢˜ï¼šHDU 4989 Summary<br><span id="more"></span></p><h1 id="ä¸€ã€å¼€å§‹"><a href="#ä¸€ã€å¼€å§‹" class="headerlink" title="ä¸€ã€å¼€å§‹"></a>ä¸€ã€å¼€å§‹</h1><ol><li>ä½¿ç”¨setæˆ–multisetä¹‹å‰ï¼Œå¿…é¡»åŠ å…¥å¤´æ–‡ä»¶<set></set></li><li>setçš„å«ä¹‰æ˜¯é›†åˆï¼Œå®ƒæ˜¯ä¸€ä¸ªæœ‰åºçš„å®¹å™¨ï¼Œé‡Œé¢çš„å…ƒç´ éƒ½æ˜¯æ’åºå¥½çš„ï¼Œæ”¯æŒæ’å…¥ï¼Œåˆ é™¤ï¼ŒæŸ¥æ‰¾ç­‰æ“ä½œï¼Œå°±åƒä¸€ä¸ªé›†åˆä¸€æ ·ã€‚æ‰€æœ‰çš„æ“ä½œçš„éƒ½æ˜¯ä¸¥æ ¼åœ¨lognæ—¶é—´ä¹‹å†…å®Œæˆï¼Œæ•ˆç‡éå¸¸é«˜ã€‚</li><li><p>set å’Œmultisetå®¹å™¨çš„å†…éƒ¨ç»“æ„é€šå¸¸ç”±å¹³è¡¡äºŒå‰æ ‘(balancedbinary tree)æ¥å®ç°ã€‚å½“å…ƒç´ æ”¾å…¥å®¹å™¨ä¸­æ—¶ï¼Œä¼šæŒ‰ç…§ä¸€å®šçš„æ’åºæ³•åˆ™è‡ªåŠ¨æ’åºï¼Œé»˜è®¤æ˜¯æŒ‰ç…§less&lt;&gt;æ’åºè§„åˆ™æ¥æ’åºã€‚ä¸¤è€…ä¸åŒä¹‹å¤„åœ¨äºï¼Œmultisetså…è®¸å…ƒç´ é‡å¤ï¼Œè€Œsetä¸å…è®¸é‡å¤ã€‚<br> å¹³è¡¡äºŒå‰æ ‘ï¼š<br> &lt;/div&gt;</p><div align="center"><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91.png" width="60%" height="60%"></div></li><li><p>è¿™ç§è‡ªåŠ¨æ’åºçš„ç‰¹æ€§åŠ é€Ÿäº†å…ƒç´ æŸ¥æ‰¾çš„è¿‡ç¨‹ï¼Œä½†æ˜¯ä¹Ÿå¸¦æ¥äº†ä¸€ä¸ªé—®é¢˜ï¼šä¸å¯ä»¥ç›´æ¥ä¿®æ”¹setæˆ–multisetå®¹å™¨ä¸­çš„å…ƒç´ å€¼ï¼Œå› ä¸ºè¿™æ ·åšå°±å¯èƒ½è¿åäº†å…ƒç´ è‡ªåŠ¨æ’åºçš„è§„åˆ™ã€‚å¦‚æœä½ å¸Œæœ›ä¿®æ”¹ä¸€ä¸ªå…ƒç´ çš„å€¼ï¼Œå¿…é¡»å…ˆåˆ é™¤åŸæœ‰çš„å…ƒç´ ï¼Œå†æ’å…¥æ–°çš„å…ƒç´ ã€‚</p></li><li>setså’Œmultisetså…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</li></ol><ul><li>ä¸æä¾›ç›´æ¥ç”¨æ¥å­˜å–å…ƒç´ çš„ä»»ä½•æ“ä½œå…ƒç´ </li><li>é€šè¿‡è¿­ä»£å™¨è¿›è¡Œå…ƒç´ çš„å­˜å–ã€‚<h1 id="äºŒã€setå’Œmultisetå®¹å™¨çš„æ“ä½œå‡½æ•°"><a href="#äºŒã€setå’Œmultisetå®¹å™¨çš„æ“ä½œå‡½æ•°" class="headerlink" title="äºŒã€setå’Œmultisetå®¹å™¨çš„æ“ä½œå‡½æ•°"></a>äºŒã€setå’Œmultisetå®¹å™¨çš„æ“ä½œå‡½æ•°</h1><h2 id="1-æ„é€ ã€æ‹·è´ã€ææ„"><a href="#1-æ„é€ ã€æ‹·è´ã€ææ„" class="headerlink" title="1.  æ„é€ ã€æ‹·è´ã€ææ„"></a>1.  æ„é€ ã€æ‹·è´ã€ææ„</h2></li></ul><div class="table-container"><table><thead><tr><th style="text-align:left">Name</th><th style="text-align:left">Feature</th></tr></thead><tbody><tr><td style="text-align:left">set c</td><td style="text-align:left">åˆ›å»ºä¸€ä¸ªç©ºçš„setæˆ–multisetå®¹å™¨</td></tr><tr><td style="text-align:left">set c(op)</td><td style="text-align:left">åˆ›å»ºä¸€ä¸ªç©ºçš„ä½¿ç”¨opä½œä¸ºæ’åºæ³•åˆ™çš„setæˆ–multisetå®¹å™¨</td></tr><tr><td style="text-align:left">set c1(c2)</td><td style="text-align:left">åˆ›å»ºä¸€ä¸ªå·²å­˜åœ¨çš„setæˆ–multisetå®¹å™¨çš„å¤åˆ¶å“ï¼Œå®¹å™¨çš„ç±»å‹å’Œæ‰€æœ‰å…ƒç´ ä¸€åŒå¤åˆ¶</td></tr><tr><td style="text-align:left">set c(beg, end)</td><td style="text-align:left">åˆ›å»ºä¸€ä¸ªsetæˆ–multisetå®¹å™¨ï¼Œå¹¶ä¸”ä»¥[beg, end)èŒƒå›´ä¸­çš„å…ƒç´ è¿›è¡Œåˆå§‹åŒ–</td></tr><tr><td style="text-align:left">set c(beg, end, op)</td><td style="text-align:left">åˆ›å»ºä¸€ä¸ªä½¿ç”¨opä½œä¸ºæ’åºæ³•åˆ™çš„setæˆ–multisetå®¹å™¨ï¼Œå¹¶ä¸”ä»¥[beg, end)èŒƒå›´ä¸­çš„å…ƒç´ è¿›è¡Œåˆå§‹åŒ–</td></tr><tr><td style="text-align:left">c.~set()</td><td style="text-align:left">å®¹å™¨çš„ææ„å‡½æ•°ï¼Œé”€æ¯æ‰€æœ‰çš„å…ƒç´ ï¼Œé‡Šæ”¾æ‰€æœ‰çš„åˆ†é…å†…å­˜</td></tr></tbody></table></div><p>ä¸Šé¢çš„setå¯ä»¥æ˜¯ä¸‹é¢å‡ ç§å½¢å¼ï¼š</p><div class="table-container"><table><thead><tr><th style="text-align:left">Name</th><th style="text-align:left">Feature</th></tr></thead><tbody><tr><td style="text-align:left">set<type></type></td><td style="text-align:left">ä»¥less&lt;&gt;ä¸ºæ’åºæ³•åˆ™çš„set</td></tr><tr><td style="text-align:left">set<type, op></type,></td><td style="text-align:left">ä»¥opä¸ºæ’åºæ³•åˆ™çš„set</td></tr><tr><td style="text-align:left">multiset<type></type></td><td style="text-align:left">ä»¥less&lt;&gt;ä¸ºæ’åºæ³•åˆ™çš„multiset</td></tr><tr><td style="text-align:left">multiset<type, op></type,></td><td style="text-align:left">ä»¥opä¸ºæ’åºæ³•åˆ™çš„multiset</td></tr></tbody></table></div><h2 id="2-éå˜åŠ¨æ€§æ“ä½œ"><a href="#2-éå˜åŠ¨æ€§æ“ä½œ" class="headerlink" title="2.  éå˜åŠ¨æ€§æ“ä½œ"></a>2.  éå˜åŠ¨æ€§æ“ä½œ</h2><div class="table-container"><table><thead><tr><th style="text-align:left">Name</th><th style="text-align:left">Feature</th></tr></thead><tbody><tr><td style="text-align:left">c.size()</td><td style="text-align:left">è¿”å›å½“å‰çš„å…ƒç´ æ•°é‡</td></tr><tr><td style="text-align:left">c.empty ()</td><td style="text-align:left">åˆ¤æ–­å¤§å°æ˜¯å¦ä¸ºé›¶ï¼Œç­‰åŒäº0 == size()ï¼Œæ•ˆç‡æ›´é«˜</td></tr><tr><td style="text-align:left">c.max_size()</td><td style="text-align:left">è¿”å›èƒ½å®¹çº³çš„å…ƒç´ æœ€å¤§æ•°é‡</td></tr><tr><td style="text-align:left">c1 == c2</td><td style="text-align:left">åˆ¤æ–­c1æ˜¯å¦ç­‰äºc2</td></tr><tr><td style="text-align:left">c1 != c2</td><td style="text-align:left">åˆ¤æ–­c1æ˜¯å¦ä¸ç­‰äºc2(ç­‰åŒäº!(c1==c2))</td></tr><tr><td style="text-align:left">c1 &lt; c2</td><td style="text-align:left">åˆ¤æ–­c1æ˜¯å¦å°äºc2</td></tr><tr><td style="text-align:left">c1 &gt; c2</td><td style="text-align:left">åˆ¤æ–­c1æ˜¯å¦å¤§äºc2</td></tr><tr><td style="text-align:left">c1 &lt;= c2</td><td style="text-align:left">åˆ¤æ–­c1æ˜¯å¦å°äºç­‰äºc2(ç­‰åŒäº!(c2&lt;c1))</td></tr><tr><td style="text-align:left">c1 &gt;= c2</td><td style="text-align:left">åˆ¤æ–­c1æ˜¯å¦å¤§äºç­‰äºc2 (ç­‰åŒäº!(c1&lt;c2))</td></tr></tbody></table></div><p><em>å€¼å¾—æ³¨æ„çš„æ˜¯æ¯”è¾ƒæ“ä½œç¬¦åªé’ˆå¯¹ç›¸åŒç±»å‹çš„å®¹å™¨ï¼Œå…ƒç´ ç±»å‹å’Œæ’åºæ³•åˆ™ç±»å‹éƒ½å¿…é¡»ç›¸åŒã€‚</em><br>errorä¾‹å­å¦‚ä¸‹ï¼š<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">std::set&lt;<span class="keyword">float</span>&gt; c1;</span><br><span class="line">std::set&lt; <span class="keyword">float</span>, std::greater&lt;<span class="keyword">float</span>&gt; &gt; c2;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">if</span>(c1 == c2) <span class="comment">//error: different types</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure></p><h2 id="3-ç‰¹æ®Šçš„æœå¯»å‡½æ•°"><a href="#3-ç‰¹æ®Šçš„æœå¯»å‡½æ•°" class="headerlink" title="3. ç‰¹æ®Šçš„æœå¯»å‡½æ•°"></a>3. ç‰¹æ®Šçš„æœå¯»å‡½æ•°</h2><p>ã€€setså’Œmultisetsåœ¨å…ƒç´ å¿«é€Ÿæœå¯»æ–¹é¢åšäº†ä¼˜åŒ–è®¾è®¡ï¼Œæä¾›äº†ç‰¹æ®Šçš„æœå¯»å‡½æ•°ï¼Œæ‰€ä»¥åº”ä¼˜å…ˆä½¿ç”¨è¿™äº›æœå¯»å‡½æ•°ï¼Œå¯è·å¾—å¯¹æ•°å¤æ‚åº¦ï¼Œè€ŒéSTLçš„çº¿æ€§å¤æ‚åº¦ã€‚æ¯”å¦‚åœ¨1000ä¸ªå…ƒç´ æœå¯»ï¼Œå¯¹æ•°å¤æ‚åº¦å¹³å‡åæ¬¡ï¼Œè€Œçº¿æ€§å¤æ‚åº¦å¹³å‡éœ€è¦500æ¬¡ã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:left">Name</th><th style="text-align:left">Feature</th></tr></thead><tbody><tr><td style="text-align:left">count (elem)</td><td style="text-align:left">è¿”å›å…ƒç´ å€¼ä¸ºelemçš„ä¸ªæ•°</td></tr><tr><td style="text-align:left">find(elem)</td><td style="text-align:left">è¿”å›å…ƒç´ å€¼ä¸ºelemçš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰è¿”å›end()</td></tr><tr><td style="text-align:left">lower _bound(elem)</td><td style="text-align:left">è¿”å›å…ƒç´ å€¼ä¸ºelemçš„ç¬¬ä¸€ä¸ªå¯å®‰æ’ä½ç½®ï¼Œä¹Ÿå°±æ˜¯å…ƒç´ å€¼ &gt;= elemçš„ç¬¬ä¸€ä¸ªå…ƒç´ ä½ç½®</td></tr><tr><td style="text-align:left">upper _bound (elem)</td><td style="text-align:left">è¿”å›å…ƒç´ å€¼ä¸ºelemçš„æœ€åä¸€ä¸ªå¯å®‰æ’ä½ç½®ï¼Œä¹Ÿå°±æ˜¯å…ƒç´ å€¼ &gt; elem çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä½ç½®</td></tr><tr><td style="text-align:left">equal_range (elem)</td><td style="text-align:left">è¿”å›elemå¯å®‰æ’çš„ç¬¬ä¸€ä¸ªä½ç½®å’Œæœ€åä¸€ä¸ªä½ç½®ï¼Œä¹Ÿå°±æ˜¯å…ƒç´ å€¼==elemçš„åŒºé—´</td></tr></tbody></table></div><p><em>æˆå‘˜å‡½æ•°find()æœå¯»å‡ºä¸å‚æ•°å€¼ç›¸åŒçš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒæŒ‡å‘è¯¥ä½ç½®ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°è¿™æ ·çš„å…ƒç´ ï¼Œå°±è¿”å›å®¹å™¨çš„end()ã€‚</em><br>ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸ªlower_bound(), upper_boundå’Œequal_range(val)ä¾‹å­ï¼Œæˆ–è€…çœ‹åšå®¢ä»‹ç»<a href="https://greenhathg.github.io/2018/02/13/STL%E4%B9%8B%E4%BA%8C%E5%88%86/#%E5%9B%9B%E3%80%81equal-range-%E5%87%BD%E6%95%B0">STLäºŒåˆ†æ³•</a><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    multiset&lt;<span class="keyword">int</span>&gt; coll;</span><br><span class="line"></span><br><span class="line">    coll.<span class="built_in">insert</span>(<span class="number">1</span>); <span class="comment">//æ’å…¥å…ƒç´ </span></span><br><span class="line">    coll.<span class="built_in">insert</span>(<span class="number">2</span>);</span><br><span class="line">    coll.<span class="built_in">insert</span>(<span class="number">4</span>);</span><br><span class="line">    coll.<span class="built_in">insert</span>(<span class="number">5</span>);</span><br><span class="line">    coll.<span class="built_in">insert</span>(<span class="number">6</span>);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;lower_bound(3):&quot;</span> &lt;&lt; *coll.<span class="built_in">lower_bound</span>(<span class="number">3</span>) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;upper_bound(3):&quot;</span> &lt;&lt; *coll.<span class="built_in">upper_bound</span>(<span class="number">3</span>) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;equal_range(3):&quot;</span> &lt;&lt; *coll.<span class="built_in">equal_range</span>(<span class="number">3</span>).first</span><br><span class="line">         &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; *coll.<span class="built_in">equal_range</span>(<span class="number">3</span>).second &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;lower_bound(5):&quot;</span> &lt;&lt; *coll.<span class="built_in">lower_bound</span>(<span class="number">5</span>) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;upper_bound(5):&quot;</span> &lt;&lt; *coll.<span class="built_in">upper_bound</span>(<span class="number">5</span>) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;equal_range(5):&quot;</span> &lt;&lt; *coll.<span class="built_in">equal_range</span>(<span class="number">3</span>).first &lt;&lt; <span class="string">&quot; &quot;</span></span><br><span class="line">         &lt;&lt; *coll.<span class="built_in">equal_range</span>(<span class="number">3</span>).second&lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">ç¨‹åºè¾“å‡ºï¼š</span><br><span class="line"><span class="built_in">lower_bound</span>(<span class="number">3</span>):<span class="number">4</span></span><br><span class="line"><span class="built_in">upper_bound</span>(<span class="number">3</span>):<span class="number">4</span></span><br><span class="line"><span class="built_in">equal_range</span>(<span class="number">3</span>):<span class="number">4</span> <span class="number">4</span></span><br><span class="line"><span class="built_in">lower_bound</span>(<span class="number">5</span>):<span class="number">5</span></span><br><span class="line"><span class="built_in">upper_bound</span>(<span class="number">5</span>):<span class="number">6</span></span><br><span class="line"><span class="built_in">equal_range</span>(<span class="number">5</span>):<span class="number">4</span> <span class="number">4</span></span><br></pre></td></tr></table></figure></p><h2 id="4-èµ‹å€¼æ“ä½œ"><a href="#4-èµ‹å€¼æ“ä½œ" class="headerlink" title="4. èµ‹å€¼æ“ä½œ"></a>4. èµ‹å€¼æ“ä½œ</h2><p>setå’Œmultisetå®¹å™¨åªæä¾›æœ€åŸºæœ¬çš„èµ‹å€¼æ“ä½œï¼š</p><div class="table-container"><table><thead><tr><th style="text-align:left">Name</th><th style="text-align:left">Feature</th></tr></thead><tbody><tr><td style="text-align:left">c1 = c2</td><td style="text-align:left">æŠŠc2çš„æ‰€æœ‰å…ƒç´ å¤åˆ¶åˆ°c1ä¸­ï¼ŒåŒæ—¶c1åŸæœ‰çš„å…ƒç´ è¢«é”€æ¯ã€‚</td></tr><tr><td style="text-align:left">c1.swap(c2)</td><td style="text-align:left">äº¤æ¢c1å’Œc2çš„å…ƒç´ ã€‚</td></tr><tr><td style="text-align:left">swap(c1, c2)</td><td style="text-align:left">åŒä¸Šï¼Œåªä¸è¿‡è¿™æ˜¯ä¸€ä¸ªé€šç”¨ç®—æ³•ã€‚</td></tr></tbody></table></div><p><em>éœ€è¦æ³¨æ„çš„æ˜¯ä¸¤ä¸ªå®¹å™¨çš„ç±»å‹è¦ä¸€è‡´ï¼ˆåŒ…æ‹¬å…ƒç´ ç±»å‹å’Œæ’åºæ³•åˆ™ç±»å‹ï¼‰ã€‚</em></p><h2 id="5-è¿­ä»£å™¨å‡½æ•°"><a href="#5-è¿­ä»£å™¨å‡½æ•°" class="headerlink" title="5. è¿­ä»£å™¨å‡½æ•°"></a>5. è¿­ä»£å™¨å‡½æ•°</h2><ul><li>setså’Œmultisetsçš„è¿­ä»£å™¨æ˜¯åŒå‘è¿­ä»£å™¨ï¼Œå¯¹è¿­ä»£å™¨æ“ä½œè€Œè¨€ï¼Œæ‰€æœ‰çš„å…ƒç´ éƒ½è¢«è§†ä¸ºå¸¸æ•°ï¼Œå¯ä»¥ç¡®ä¿ä½ ä¸ä¼šäººä¸ºæ”¹å˜å…ƒç´ å€¼ï¼Œä»è€Œæ‰“ä¹±æ—¢å®šé¡ºåºï¼Œæ‰€ä»¥æ— æ³•è°ƒç”¨å˜åŠ¨æ€§ç®—æ³•ï¼Œå¦‚remove()ã€‚</li><li>setå’Œmultisetä¸æä¾›å…ƒç´ ç›´æ¥å­˜å–ï¼Œæ‰€ä»¥åªèƒ½é‡‡ç”¨è¿­ä»£å™¨</li></ul><div class="table-container"><table><thead><tr><th style="text-align:left">Name</th><th style="text-align:left">Feature</th></tr></thead><tbody><tr><td style="text-align:left">c.begin()</td><td style="text-align:left">è¿”å›ä¸€ä¸ªéšæœºå­˜å–è¿­ä»£å™¨ï¼ŒæŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ </td></tr><tr><td style="text-align:left">c.end()</td><td style="text-align:left">è¿”å›ä¸€ä¸ªéšæœºå­˜å–è¿­ä»£å™¨ï¼ŒæŒ‡å‘æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®</td></tr><tr><td style="text-align:left">c.rbegin()</td><td style="text-align:left">è¿”å›ä¸€ä¸ªé€†å‘è¿­ä»£å™¨ï¼ŒæŒ‡å‘é€†å‘è¿­ä»£çš„ç¬¬ä¸€ä¸ªå…ƒç´ </td></tr><tr><td style="text-align:left">c.rend()</td><td style="text-align:left">è¿”å›ä¸€ä¸ªé€†å‘è¿­ä»£å™¨ï¼ŒæŒ‡å‘é€†å‘è¿­ä»£çš„æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®</td></tr></tbody></table></div><h2 id="6-å®‰æ’å’Œåˆ é™¤å…ƒç´ "><a href="#6-å®‰æ’å’Œåˆ é™¤å…ƒç´ " class="headerlink" title="6. å®‰æ’å’Œåˆ é™¤å…ƒç´ "></a>6. å®‰æ’å’Œåˆ é™¤å…ƒç´ </h2><div class="table-container"><table><thead><tr><th style="text-align:left">Name</th><th style="text-align:left">Feature</th></tr></thead><tbody><tr><td style="text-align:left">c.insert(elem)</td><td style="text-align:left">æ’å…¥ä¸€ä¸ªelemå‰¯æœ¬ï¼Œè¿”å›æ–°å…ƒç´ ä½ç½®ï¼Œæ— è®ºæ’å…¥æˆåŠŸä¸å¦ã€‚</td></tr><tr><td style="text-align:left">c.insert(pos, elem)</td><td style="text-align:left">å®‰æ’ä¸€ä¸ªelemå…ƒç´ å‰¯æœ¬ï¼Œè¿”å›æ–°å…ƒç´ ä½ç½®ï¼Œposä¸ºæ”¶ç´¢èµ·ç‚¹ï¼Œæå‡æ’å…¥é€Ÿåº¦ã€‚</td></tr><tr><td style="text-align:left">c.insert(beg,end)</td><td style="text-align:left">å°†åŒºé—´[beg,end)æ‰€æœ‰çš„å…ƒç´ å®‰æ’åˆ°cï¼Œæ— è¿”å›å€¼ã€‚</td></tr><tr><td style="text-align:left">c.erase(elem)</td><td style="text-align:left">åˆ é™¤ä¸elemç›¸ç­‰çš„æ‰€æœ‰å…ƒç´ ï¼Œè¿”å›è¢«ç§»é™¤çš„å…ƒç´ ä¸ªæ•°ã€‚</td></tr><tr><td style="text-align:left">c.erase(pos)</td><td style="text-align:left">ç§»é™¤è¿­ä»£å™¨posæ‰€æŒ‡ä½ç½®å…ƒç´ ï¼Œæ— è¿”å›å€¼ã€‚</td></tr><tr><td style="text-align:left">c.erase(beg,end)</td><td style="text-align:left">ç§»é™¤åŒºé—´[beg,end)æ‰€æœ‰å…ƒç´ ï¼Œæ— è¿”å›å€¼ã€‚</td></tr><tr><td style="text-align:left">c.clear()</td><td style="text-align:left">ç§»é™¤æ‰€æœ‰å…ƒç´ ï¼Œå°†å®¹å™¨æ¸…ç©º</td></tr></tbody></table></div><p>åˆ é™¤ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> to_delete = *it;</span><br><span class="line">      <span class="keyword">auto</span> tmp_it = chop_set.<span class="built_in">find</span>(to_delete);</span><br><span class="line">      <span class="keyword">while</span>(tmp_it != chop_set.<span class="built_in">end</span>()) &#123;</span><br><span class="line">          <span class="comment">//note: erase will return next avilable it pointer</span></span><br><span class="line">          it = chop_set.<span class="built_in">erase</span>(tmp_it); </span><br><span class="line">          tmp_it = chop_set.<span class="built_in">find</span>(*tmp_it);</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><h2 id="7-setå®ä¾‹ï¼š"><a href="#7-setå®ä¾‹ï¼š" class="headerlink" title="7. setå®ä¾‹ï¼š"></a>7. setå®ä¾‹ï¼š</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// empty set container</span></span><br><span class="line">    set &lt;<span class="keyword">int</span>&gt; gquiz1;</span><br><span class="line"></span><br><span class="line">    gquiz1.<span class="built_in">insert</span>(<span class="number">40</span>);</span><br><span class="line">    gquiz1.<span class="built_in">insert</span>(<span class="number">30</span>);</span><br><span class="line">    gquiz1.<span class="built_in">insert</span>(<span class="number">60</span>);</span><br><span class="line">    gquiz1.<span class="built_in">insert</span>(<span class="number">20</span>);</span><br><span class="line">    gquiz1.<span class="built_in">insert</span>(<span class="number">50</span>);</span><br><span class="line">    gquiz1.<span class="built_in">insert</span>(<span class="number">50</span>); <span class="comment">// only one 50 will be added to the set</span></span><br><span class="line">    gquiz1.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// printing set gquiz1</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\nThe set gquiz1 is : &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> x : gquiz1)</span><br><span class="line">        cout &lt;&lt; x &lt;&lt; <span class="string">&quot;  &quot;</span>;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// assigning the elements from gquiz1 to gquiz2</span></span><br><span class="line">    set &lt;<span class="keyword">int</span>&gt; <span class="built_in">gquiz2</span>(gquiz1.<span class="built_in">begin</span>(), gquiz1.<span class="built_in">end</span>());</span><br><span class="line">    <span class="comment">// printing set gquiz1</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\nThe set gquiz2 is : &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> x : gquiz2)</span><br><span class="line">        cout &lt;&lt; x &lt;&lt; <span class="string">&quot;  &quot;</span>;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// remove all elements up to 30 in gquiz2</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\ngquiz2 after removal of elements less than 30 : &quot;</span>;</span><br><span class="line">    gquiz2.<span class="built_in">erase</span>(gquiz2.<span class="built_in">begin</span>(), gquiz2.<span class="built_in">find</span>(<span class="number">30</span>));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> x : gquiz2)</span><br><span class="line">        cout &lt;&lt; x &lt;&lt; <span class="string">&quot;  &quot;</span>;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// remove all elements with value 50 in gquiz2</span></span><br><span class="line">    <span class="keyword">int</span> num;</span><br><span class="line">    num = gquiz2.<span class="built_in">erase</span> (<span class="number">50</span>);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\ngquiz2.erase(50) : &quot;</span>;</span><br><span class="line">    cout &lt;&lt; num &lt;&lt; <span class="string">&quot; removed \t&quot;</span> ;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> x : gquiz2)</span><br><span class="line">        cout &lt;&lt; x &lt;&lt; <span class="string">&quot;  &quot;</span>;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//lower bound and upper bound for set gquiz1</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;gquiz1.lower_bound(40) : &quot;</span></span><br><span class="line">         &lt;&lt; *gquiz1.<span class="built_in">lower_bound</span>(<span class="number">40</span>) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;gquiz1.upper_bound(40) : &quot;</span></span><br><span class="line">         &lt;&lt; *gquiz1.<span class="built_in">upper_bound</span>(<span class="number">40</span>) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//lower bound and upper bound for set gquiz2</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;gquiz2.lower_bound(40) : &quot;</span></span><br><span class="line">         &lt;&lt; *gquiz2.<span class="built_in">lower_bound</span>(<span class="number">40</span>) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;gquiz2.upper_bound(40) : &quot;</span></span><br><span class="line">         &lt;&lt; *gquiz2.<span class="built_in">upper_bound</span>(<span class="number">40</span>) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">ç¨‹åºè¾“å‡ºï¼š</span><br><span class="line">The set gquiz1 is : <span class="number">10</span>  <span class="number">20</span>  <span class="number">30</span>  <span class="number">40</span>  <span class="number">50</span>  <span class="number">60</span></span><br><span class="line"></span><br><span class="line">The set gquiz2 is : <span class="number">10</span>  <span class="number">20</span>  <span class="number">30</span>  <span class="number">40</span>  <span class="number">50</span>  <span class="number">60</span></span><br><span class="line"></span><br><span class="line">gquiz2 after removal of elements less than <span class="number">30</span> : <span class="number">30</span>  <span class="number">40</span>  <span class="number">50</span>  <span class="number">60</span></span><br><span class="line"></span><br><span class="line">gquiz2.<span class="built_in">erase</span>(<span class="number">50</span>) : <span class="number">1</span> removed <span class="number">30</span>  <span class="number">40</span>  <span class="number">60</span></span><br><span class="line">gquiz1.<span class="built_in">lower_bound</span>(<span class="number">40</span>) : <span class="number">40</span></span><br><span class="line">gquiz1.<span class="built_in">upper_bound</span>(<span class="number">40</span>) : <span class="number">50</span></span><br><span class="line">gquiz2.<span class="built_in">lower_bound</span>(<span class="number">40</span>) : <span class="number">40</span></span><br><span class="line">gquiz2.<span class="built_in">upper_bound</span>(<span class="number">40</span>) : <span class="number">60</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="ä¸‰ã€ä¸€é“ä¹ é¢˜"><a href="#ä¸‰ã€ä¸€é“ä¹ é¢˜" class="headerlink" title="ä¸‰ã€ä¸€é“ä¹ é¢˜"></a>ä¸‰ã€ä¸€é“ä¹ é¢˜</h1><h2 id="HDU-4989-Summary"><a href="#HDU-4989-Summary" class="headerlink" title="HDU 4989 Summary"></a>HDU 4989 Summary</h2><p><strong><em>Problem Description</em></strong><br><em>Small W is playing a summary game. Firstly, He takes N numbers. Secondly he takes out every pair of them and add this two numbers, thus he can get N</em>(N - 1)/2 new numbers. Thirdly he deletes the repeated number of the new numbers. Finally he gets the sum of the left numbers. Now small W want you to tell him what is the final sum.<br><strong><em>Input</em></strong><br><em>Multi test cases, every case occupies two lines, the first line contain n, then second line contain n numbers a1, a2, â€¦â€¦an separated by exact one space. Process to the end of file.</em><br><em>[Technical Specification]</em><br><em>2 &lt;= n &lt;= 100</em><br><em>-1000000000 &lt;= ai &lt;= 1000000000</em><br><strong><em>Output</em></strong><br><em>For each case, output the final sum.</em><br><strong><em>Sample Input</em></strong><br><em>4</em><br><em>1 2 3 4</em><br><em>2</em><br><em>5 5</em><br><strong><em>Sample Output</em></strong><br><em>25</em><br><em>10</em><br><strong><em>Hint</em></strong><br><em>Firstly small W takes any pair of 1 2 3 4 and add them, he will get 3 4 5 5 6 7. Then he deletes the repeated numbers, he will get 3 4 5 6 7, Finally he gets the sum=3+4+5+6+7=25</em><br>ä»£ç ï¼š<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll sum = <span class="number">0</span>, arr[<span class="number">110</span>];</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    set&lt;<span class="keyword">int</span>&gt;s;</span><br><span class="line">    <span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n))</span><br><span class="line">    &#123;</span><br><span class="line">        s.<span class="built_in">clear</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">            cin &gt;&gt; arr[i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>;j &lt; n; j++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = j + <span class="number">1</span>; k &lt; n ;k++)</span><br><span class="line">                s.<span class="built_in">insert</span>(arr[k] + arr[j]);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> x : s)</span><br><span class="line">            sum += x;</span><br><span class="line">        cout &lt;&lt; sum &lt;&lt; endl;</span><br><span class="line">        sum = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> STL </tag>
            
            <tag> set </tag>
            
            <tag> multiset </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>STLä¹‹vector</title>
      <link href="/2018/02/14/STL%E4%B9%8Bvector/"/>
      <url>/2018/02/14/STL%E4%B9%8Bvector/</url>
      
        <content type="html"><![CDATA[<p>vectorçš„å£°æ˜ã€å‘é‡æ“ä½œã€è®¿é—®æ–¹å¼ã€èµ‹å€¼æ“ä½œã€å®‰æ’ï¼Œç§»é™¤ç›¸å…³æ“ä½œã€åº”ç”¨å®ä¾‹ã€‚ä¸€é“ä¹ é¢˜ï¼ˆç¬¬kä¸ªçº¦æ•°ï¼‰<br><span id="more"></span></p><h3 id="ä¸€ã€-å¼€å§‹ï¼š"><a href="#ä¸€ã€-å¼€å§‹ï¼š" class="headerlink" title="ä¸€ã€ å¼€å§‹ï¼š"></a>ä¸€ã€ å¼€å§‹ï¼š</h3><ul><li>è¦ä½¿ç”¨vectorå¿…é¡»åŒ…å«å¤´æ–‡ä»¶&lt; vector &gt;</li><li>vectorå¯ä»¥çœ‹æˆæ˜¯åŠ¨æ€ä¸€ç»´æ•°ç»„</li><li>vectorå¯ä»¥å­˜åœ¨é‡å¤å…ƒç´ (setä¸èƒ½å­˜åœ¨)</li><li>vectorè¿­ä»£å™¨æ˜¯éšæœºå­˜å–è¿­ä»£å™¨ï¼Œæ‰€ä»¥å¯¹ä»»ä½•ä¸€ä¸ªSTLç®—æ³•éƒ½å¥æ•ˆ</li><li>åœ¨æœ«ç«¯é™„åŠ æˆ–åˆ é™¤å…ƒç´ æ—¶ï¼Œvectorçš„æ€§èƒ½ç›¸å½“å¥½ã€‚ä½†æ˜¯å¦‚æœåœ¨å‰ç«¯æˆ–åœ¨ä¸­éƒ¨å®‰æ’æˆ–åˆ é™¤å…ƒç´ ï¼Œæ€§èƒ½å°±ä¸æ€ä¹ˆæ ·äº†ã€‚<br><em>å› ä¸ºæ“ä½œç‚¹ä¹‹åçš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½å¿…é¡»ç§»åˆ°å¦ä¸€ä¸ªä½ç½®ï¼Œè€Œæ¯ä¸€æ¬¡ç§»åŠ¨éƒ½å¾—è°ƒç”¨èµ‹å€¼æ“ä½œç¬¦</em><h3 id="äºŒã€-vectorçš„å£°æ˜"><a href="#äºŒã€-vectorçš„å£°æ˜" class="headerlink" title="äºŒã€ vectorçš„å£°æ˜:"></a>äºŒã€ vectorçš„å£°æ˜:</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;type&gt; a;</span><br><span class="line"><span class="comment">/*typeå¯ä»¥æ˜¯intï¼Œdoubleç­‰ç­‰.</span></span><br><span class="line"><span class="comment">æ­¤æ—¶a.size()ä¸º0ï¼Œä½†æ˜¯å› ä¸ºæ˜¯åŠ¨æ€çš„ï¼Œæ‰€ä»¥å¤§å°ä¼šå¯èƒ½æ”¹å˜*/</span></span><br><span class="line"><span class="keyword">int</span> n; cin &gt;&gt; n;</span><br><span class="line"><span class="function">vector&lt;type&gt; <span class="title">a</span><span class="params">(n)</span></span>; <span class="comment">//åŠ¨æ€åˆ†é…</span></span><br><span class="line"><span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">a</span><span class="params">(<span class="number">100</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line"><span class="comment">//å£°æ˜ä¸€ä¸ªå­˜æ”¾äº†100ä¸ª0çš„æ•´æ•°vectorï¼Œå…¶å¤§å°æ²¡æœ‰è¢«å›ºå®šä¸º100ï¼Œè¿˜å¯ä»¥åŠ æ•°æ®</span></span><br><span class="line"><span class="function">vector&lt;type&gt; <span class="title">a</span><span class="params">(b)</span></span>; <span class="comment">//äº§ç”Ÿå¦ä¸€ä¸ªåŒå‹vectorçš„å‰¯æœ¬ï¼ˆæ‰€æœ‰å…ƒç´ éƒ½è¢«æ‹·è´ï¼‰</span></span><br><span class="line"><span class="function">vector&lt;type&gt; <span class="title">a</span><span class="params">(beg,end)</span></span>; <span class="comment">//äº§ç”Ÿä¸€ä¸ªvectorï¼Œä»¥åŒºé—´[beg,end]åšä¸ºå…ƒç´ åˆå€¼</span></span><br><span class="line">a.~vector&lt;type&gt;(); <span class="comment">//é”€æ¯æ‰€æœ‰å…ƒç´ å¹¶ä¸”é‡Šæ”¾å†…å­˜</span></span><br></pre></td></tr></table></figure><h3 id="ä¸‰ã€-å‘é‡æ“ä½œ"><a href="#ä¸‰ã€-å‘é‡æ“ä½œ" class="headerlink" title="ä¸‰ã€ å‘é‡æ“ä½œ:"></a>ä¸‰ã€ å‘é‡æ“ä½œ:</h3></li></ul><div class="table-container"><table><thead><tr><th style="text-align:center">Name</th><th style="text-align:center">Feature</th></tr></thead><tbody><tr><td style="text-align:center">push_back()</td><td style="text-align:center">åœ¨æ•°ç»„çš„æœ€åæ·»åŠ ä¸€ä¸ªæ•°æ®</td></tr><tr><td style="text-align:center">pop_back()</td><td style="text-align:center">å»æ‰æ•°ç»„çš„æœ€åä¸€ä¸ªæ•°æ®</td></tr><tr><td style="text-align:center">at()</td><td style="text-align:center">å¾—åˆ°ç¼–å·ä½ç½®çš„æ•°æ®</td></tr><tr><td style="text-align:center">begin()</td><td style="text-align:center">å¾—åˆ°æ•°ç»„å¤´çš„æŒ‡é’ˆ</td></tr><tr><td style="text-align:center">end()</td><td style="text-align:center">å¾—åˆ°æ•°ç»„çš„æœ€åä¸€ä¸ªå•å…ƒ+1çš„æŒ‡é’ˆ</td></tr><tr><td style="text-align:center">front()</td><td style="text-align:center">å¾—åˆ°æ•°ç»„å¤´çš„å¼•ç”¨ï¼ˆè¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰</td></tr><tr><td style="text-align:center">back()</td><td style="text-align:center">å¾—åˆ°æ•°ç»„çš„æœ€åä¸€ä¸ªå•å…ƒçš„å¼•ç”¨ï¼ˆè¿”å›æœ€åä¸€ä¸ªå…ƒç´ ï¼‰</td></tr><tr><td style="text-align:center">max_size()</td><td style="text-align:center">å¾—åˆ°vectoræœ€å¤§å¯ä»¥æ˜¯å¤šå¤§</td></tr><tr><td style="text-align:center">capacity()</td><td style="text-align:center">å½“å‰vectoråˆ†é…çš„å¤§å°</td></tr><tr><td style="text-align:center">size()</td><td style="text-align:center">å½“å‰ä½¿ç”¨æ•°æ®çš„å¤§å°</td></tr><tr><td style="text-align:center">resize()</td><td style="text-align:center">æ”¹å˜å½“å‰ä½¿ç”¨æ•°æ®çš„å¤§å°ï¼Œå¦‚æœå®ƒæ¯”å½“å‰ä½¿ç”¨çš„å¤§ï¼Œåˆ™å¡«å……é»˜è®¤å€¼</td></tr><tr><td style="text-align:center">reserve()</td><td style="text-align:center">æ”¹å˜å½“å‰vecotræ‰€åˆ†é…ç©ºé—´çš„å¤§å°(å¦‚æœå®¹é‡ä¸è¶³ï¼Œæ‰©å¤§ä¹‹ï¼Œä½†æ˜¯referencesï¼Œpointersï¼Œiteratorsä¼šå¤±æ•ˆ)</td></tr><tr><td style="text-align:center">erase()</td><td style="text-align:center">åˆ é™¤æŒ‡é’ˆæŒ‡å‘çš„æ•°æ®é¡¹</td></tr><tr><td style="text-align:center">clear()</td><td style="text-align:center">æ¸…ç©ºå½“å‰çš„vector</td></tr><tr><td style="text-align:center">rbegin()</td><td style="text-align:center">å°†vectoråè½¬åçš„å¼€å§‹æŒ‡é’ˆè¿”å›(å…¶å®å°±æ˜¯åŸæ¥çš„end-1)</td></tr><tr><td style="text-align:center">rend()</td><td style="text-align:center">å°†vectoråè½¬æ„çš„ç»“æŸæŒ‡é’ˆè¿”å›(å…¶å®å°±æ˜¯åŸæ¥çš„begin-1)</td></tr><tr><td style="text-align:center">empty()</td><td style="text-align:center">åˆ¤æ–­vectoræ˜¯å¦ä¸ºç©º</td></tr><tr><td style="text-align:center">swap()</td><td style="text-align:center">ä¸å¦ä¸€ä¸ªvectoräº¤æ¢æ•°æ®</td></tr></tbody></table></div><p><em>å¯¹ç€ä¸€ä¸ªç©ºvectorè°ƒç”¨operator[], front(), back(),éƒ½ä¼šå¼•èµ·æœªå®šä¹‰è¡Œä¸ºï¼Œæ‰€ä»¥æ‰§è¡Œè¿™äº›å‡½æ•°æ—¶å¿…é¡»ç¡®å®šå®¹å™¨ä¸ç©º</em></p><h3 id="å››ã€-è®¿é—®æ–¹å¼ï¼š"><a href="#å››ã€-è®¿é—®æ–¹å¼ï¼š" class="headerlink" title="å››ã€ è®¿é—®æ–¹å¼ï¼š"></a>å››ã€ è®¿é—®æ–¹å¼ï¼š</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cout &lt;&lt; a[<span class="number">5</span>] &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; a.<span class="built_in">at</span>(<span class="number">5</span>) &lt;&lt; endl;</span><br></pre></td></tr></table></figure><p><em>ä»¥ä¸ŠåŒºåˆ«åœ¨äºåè€…åœ¨è®¿é—®è¶Šç•Œæ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè€Œå‰è€…ä¸ä¼šã€‚</em></p><h3 id="äº”ã€-vectorçš„èµ‹å€¼æ“ä½œ"><a href="#äº”ã€-vectorçš„èµ‹å€¼æ“ä½œ" class="headerlink" title="äº”ã€ vectorçš„èµ‹å€¼æ“ä½œ"></a>äº”ã€ vectorçš„èµ‹å€¼æ“ä½œ</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">c1 = c2; <span class="comment">//å°†c2å…¨éƒ¨å…ƒç´ èµ‹å€¼ç»™c1</span></span><br><span class="line">c.<span class="built_in">assign</span>(n, elem); <span class="comment">//å¤åˆ¶nä¸ªelemï¼Œèµ‹å€¼ç»™c</span></span><br><span class="line">c.<span class="built_in">assign</span>(beg, end); <span class="comment">//å°†åŒºé—´[beg, end]å†…çš„å…ƒç´ èµ‹å€¼ç»™c</span></span><br><span class="line">c1.<span class="built_in">swap</span>(c2); <span class="comment">//å°†c1ä¸c2å…ƒç´ äº’æ¢</span></span><br></pre></td></tr></table></figure><h3 id="å…­ã€vectorçš„å®‰æ’ã€ç§»é™¤ç›¸å…³æ“ä½œ"><a href="#å…­ã€vectorçš„å®‰æ’ã€ç§»é™¤ç›¸å…³æ“ä½œ" class="headerlink" title="å…­ã€vectorçš„å®‰æ’ã€ç§»é™¤ç›¸å…³æ“ä½œ"></a>å…­ã€vectorçš„å®‰æ’ã€ç§»é™¤ç›¸å…³æ“ä½œ</h3><div class="table-container"><table><thead><tr><th style="text-align:center">Name</th><th style="text-align:center">Feature</th></tr></thead><tbody><tr><td style="text-align:center">c.insert(pos, elem)</td><td style="text-align:center">åœ¨posä½ç½®ä¸Šæ’å…¥ä¸€ä¸ªelem å‰¯æœ¬ï¼Œå¹¶è¿”å›æ–°å…ƒç´ çš„ä½ç½®</td></tr><tr><td style="text-align:center">c.insert(pos, n, elem)</td><td style="text-align:center">åœ¨posä½ç½®ä¸Šæ’å…¥nä¸ªelem å‰¯æœ¬ã€‚æ— è¿”å›å€¼</td></tr><tr><td style="text-align:center">c.insert(pos, beg, end)</td><td style="text-align:center">åœ¨posä½ç½®ä¸Šæ’å…¥åŒºé—´[beg ; end]å†…çš„æ‰€æœ‰å…ƒç´ çš„å‰¯æœ¬ï¼Œæ— å›ä¼ å€¼</td></tr><tr><td style="text-align:center">c.push_back(elem)</td><td style="text-align:center">åœ¨å°¾éƒ¨æ·»åŠ ä¸€ä¸ªelemå‰¯æœ¬</td></tr><tr><td style="text-align:center">c.pop_back()</td><td style="text-align:center">ç§»é™¤æœ€åä¸€ä¸ªå…ƒç´ ï¼ˆä½†ä¸å›ä¼ ï¼‰</td></tr><tr><td style="text-align:center">c.erase(pos)</td><td style="text-align:center">ç§»é™¤posä½ç½®ä¸Šçš„å…ƒç´ ï¼Œè¿”å›ä¸‹ä¸€å…ƒç´ çš„ä½ç½®</td></tr><tr><td style="text-align:center">c.erase(beg , end)</td><td style="text-align:center">ç§»é™¤[beg , end]åŒºé—´å†…çš„æ‰€æœ‰å…ƒç´ ï¼Œè¿”å›ä¸‹ä¸€å…ƒç´ çš„ä½ç½®</td></tr><tr><td style="text-align:center">c.resize(num)</td><td style="text-align:center">å°†å…ƒç´ æ•°é‡æ”¹ä¸ºnumï¼ˆå¦‚æœsize()å˜å¤§äº†ï¼Œå¤šå‡ºæ¥çš„æ–°å…ƒç´ éƒ½éœ€è¦ä»¥defaultæ„é€ å‡½æ•°æ„é€ å®Œæˆï¼‰</td></tr><tr><td style="text-align:center">c.resize(num , elem)</td><td style="text-align:center">å°†å…ƒç´ æ•°é‡æ”¹ä¸ºnumï¼ˆå¦‚æœsize()å˜å¤§äº†ï¼Œå¤šå‡ºæ¥çš„æ–°å…ƒç´ éƒ½éœ€è¦ä»¥elemçš„å‰¯æœ¬ï¼‰</td></tr><tr><td style="text-align:center">c.clear()</td><td style="text-align:center">ç§»é™¤æ‰€æœ‰å…ƒç´ ï¼Œå°†å®¹å™¨æ¸…ç©º</td></tr></tbody></table></div><h3 id="ä¸ƒã€vectoråº”ç”¨å®ä¾‹"><a href="#ä¸ƒã€vectoråº”ç”¨å®ä¾‹" class="headerlink" title="ä¸ƒã€vectoråº”ç”¨å®ä¾‹"></a>ä¸ƒã€vectoråº”ç”¨å®ä¾‹</h3><ol><li><p>åˆ é™¤æ‰€æœ‰çš„å€¼ä¸ºvalçš„å…ƒç´ </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;string&gt; sentence;</span><br><span class="line">sentence.<span class="built_in">erase</span>(<span class="built_in">remove</span>(sentence.<span class="built_in">begin</span>() ,</span><br><span class="line">              sentence.<span class="built_in">end</span>() ,val) ,sentence.<span class="built_in">end</span>());</span><br></pre></td></tr></table></figure><p>ç®€å•è§£é‡Šä¸‹ï¼šremove()ä»æŒ‡å®šä½ç½®å¼€å§‹éå†å®¹å™¨ï¼Œå°†åé¢çš„å…ƒç´ ä¾æ¬¡å‰ç§»ï¼Œè·³è¿‡å’Œvalueç›¸åŒå€¼çš„å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€æœ‰å’Œvalueç›¸åŒå€¼çš„å…ƒç´ éƒ½ä¼šè¢«è¦†ç›–ï¼Œè€Œå…¶ä»–çš„å…ƒç´ éƒ½ä¼šä¾æ¬¡å‰ç§»ï¼Œå¹¶è¿”å›èŒƒå›´æ–°ç»“å°¾çš„è¿­ä»£å™¨ï¼Œæ•´ä¸ªè¿‡ç¨‹å¹¶æ²¡æœ‰ä¿®æ”¹åŸå®¹å™¨çš„size,ä»¥åŠend()ã€‚å¦‚ä¸‹ï¼š<br>æˆ‘ä»¬è¦ä»{1,1,9,5,2,1,3}é™¤å»1ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span> <span class="comment">//ä½¿ç”¨remove()</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    vector&lt;<span class="keyword">int</span>&gt; c = &#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>&#125;;</span><br><span class="line">    <span class="keyword">auto</span> op =<span class="built_in">remove</span>(c.<span class="built_in">begin</span>(), c.<span class="built_in">end</span>(), <span class="number">1</span>);</span><br><span class="line">    <span class="comment">//opé‡Œé¢å­˜å‚¨çš„æ˜¯è¿”å›å€¼ï¼Œå¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªå…ƒç´ æŒ‡é’ˆ</span></span><br><span class="line">    cout &lt;&lt; *op &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//è¾“å‡ºè¿”å›å€¼</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> x : c)</span><br><span class="line">        cout &lt;&lt; x &lt;&lt; <span class="string">&#x27; &#x27;</span>; <span class="comment">//è¾“å‡ºremove()åçš„vector</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">ç¨‹åºè¾“å‡º:</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">9</span> <span class="number">5</span> <span class="number">2</span> <span class="number">3</span> <span class="number">2</span> <span class="number">1</span> <span class="number">3</span></span><br></pre></td></tr></table></figure><p>æ¥ç€è¿™é‡Œerase()ä½œç”¨æ˜¯å»é™¤èŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ ï¼Œè¿™ä¸ªèŒƒå›´é‡Œé¢çš„å€¼å°±æ˜¯{2,1,3},æ‰€ä»¥å°±å¯ä»¥å¾—åˆ°æƒ³è¦çš„{9,5,2,3}ã€‚</p></li><li><p>åªæ˜¯è¦åˆ é™¤â€œä¸æŸå€¼ç›¸ç­‰â€çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;string&gt; sentence;</span><br><span class="line"><span class="keyword">auto</span> pos;</span><br><span class="line"><span class="comment">//æˆ–std::vector&lt;string&gt;::iterator sentence;</span></span><br><span class="line">pos=<span class="built_in">find</span>(sentence.<span class="built_in">begin</span>() , sentence.<span class="built_in">end</span>() ,val);</span><br><span class="line"><span class="keyword">if</span>( pos != sentence.<span class="built_in">end</span>() )&#123;</span><br><span class="line">    sentence.<span class="built_in">erase</span>(pos);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å…«ã€ä¸€é“ä¹ é¢˜ï¼š"><a href="#å…«ã€ä¸€é“ä¹ é¢˜ï¼š" class="headerlink" title="å…«ã€ä¸€é“ä¹ é¢˜ï¼š"></a>å…«ã€ä¸€é“ä¹ é¢˜ï¼š</h3><p><strong>é¢˜ç›®æè¿°</strong><br>ç»™å‡ºä¸€ä¸ªæ•°nå’Œä¸€ä¸ªæ•°kï¼ŒæŒ‰ä»å°åˆ°å¤§ç®—å‡ºnçš„ç¬¬kä¸ªçº¦æ•°ã€‚<br><strong>è¾“å…¥</strong><br>æ¯ä¸€ä¸ªæµ‹è¯•æ•°æ®åŒ…æ‹¬ä¸€ä¸ªnå’Œä¸€ä¸ªk (1 &lt;= n &lt;= 10^15, 1 &lt;= 10^9)<br><strong>è¾“å‡º</strong><br>å¦‚æœnæ²¡æœ‰ç¬¬kä¸ªçº¦æ•°ï¼Œåˆ™è¾“å‡º-1ï¼Œå¦‚æœæœ‰åˆ™è¾“å‡ºç¬¬kä¸ªçº¦æ•°<br><strong>ç¤ºä¾‹</strong><br>è¾“å…¥ï¼š<br>4 2<br>è¾“å‡ºï¼š<br>2<br>ä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n, k;</span><br><span class="line">    vector&lt;ll&gt; v;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; k;</span><br><span class="line">    <span class="keyword">for</span>(ll i = <span class="number">1</span>; i &lt;= <span class="built_in">sqrt</span>(n); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(n % i == <span class="number">0</span>)</span><br><span class="line">            v.<span class="built_in">push_back</span>(i);</span><br><span class="line">        <span class="keyword">if</span>(n % i == <span class="number">0</span> &amp;&amp; i * i != n)</span><br><span class="line">            v.<span class="built_in">push_back</span>(n / i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>());</span><br><span class="line">    <span class="keyword">if</span>(k &gt; v.<span class="built_in">size</span>())</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;-1&quot;</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        cout &lt;&lt; v[k<span class="number">-1</span>] &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vector </tag>
            
            <tag> STL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€æ­¥ä¸€æ­¥å†™å‡ºc++å¸¦æŒ‡é’ˆç±»å®ä¾‹(æ ‡å‡†åº“stringéƒ¨åˆ†)</title>
      <link href="/2018/02/14/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E5%86%99%E5%87%BAc++%E5%B8%A6%E6%8C%87%E9%92%88%E7%B1%BB%E5%AE%9E%E4%BE%8B(%E6%A0%87%E5%87%86%E5%BA%93string%E9%83%A8%E5%88%86)/"/>
      <url>/2018/02/14/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E5%86%99%E5%87%BAc++%E5%B8%A6%E6%8C%87%E9%92%88%E7%B1%BB%E5%AE%9E%E4%BE%8B(%E6%A0%87%E5%87%86%E5%BA%93string%E9%83%A8%E5%88%86)/</url>
      
        <content type="html"><![CDATA[<p>å…±16æ­¥<br><span id="more"></span><br><em>æœ¬ç¯‡æ–‡ç« æ³¨é‡ä¸complexç¯‡çš„åŒºåˆ«ï¼Œå¯èƒ½ä¸é‚£ä¹ˆè¯¦ç»†</em></p><h3 id="æµç¨‹ï¼š"><a href="#æµç¨‹ï¼š" class="headerlink" title="æµç¨‹ï¼š"></a>æµç¨‹ï¼š</h3><ol><li>å†™å‡ºä¸»ä½“ï¼ˆè¡Œ1,2,11)</li><li>è€ƒè™‘privateé‡Œé¢è¦æ”¾çš„æ•°æ®ï¼Œå­—ç¬¦ä¸²ï¼Œå½“ç„¶æ˜¯æ”¾å¾ˆå¤šå­—ç¬¦ï¼Œä¸€ç§æƒ³æ³•æ˜¯é‡Œé¢æ”¾ä¸€ä¸ªæ•°ç»„ï¼Œä½†æ˜¯è¿™ç§æ•°ç»„å¯èƒ½ä¸æ˜¯å¾ˆå¥½ï¼Œå› ä¸ºæ•°ç»„ä½ å¾—æŒ‡æ˜å¤šå¤§ï¼Œå¤ªå¤§æˆ–å¤ªå°éƒ½ä¸å¥½ã€‚æ‰€ä»¥æˆ‘ä»¬é€‰æ‹©å¦ä¸€ç§åšæ³•ï¼Œåœ¨é‡Œé¢æ”¾ä¸€ä¸ªæŒ‡é’ˆï¼Œå°†æ¥è¦åˆ†é…å¤šå¤§å†…å­˜ï¼Œå°±åŠ¨æ€å»åˆ†é…ï¼Œç”¨newçš„æ–¹å¼ã€‚<br>ä¸€ä¸ªæŒ‡é’ˆå¤šå¤§ï¼Œåœ¨ä¼ ç»Ÿçš„32ä½ç”µè„‘ä¸­æ˜¯4ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥æ— è®ºä»¥åå­—ç¬¦ä¸²é‡Œé¢å†…å®¹æ˜¯ä»€ä¹ˆï¼Œå­—ç¬¦ä¸²è¿™ä¸ªå¯¹è±¡æœ¬èº«å°±æ˜¯4ä¸ªå­—èŠ‚ã€‚(è¡Œ9,10)</li><li>ç„¶ååˆ°äº†å‡†å¤‡å‡½æ•°çš„ç¯èŠ‚ï¼Œé¦–å…ˆå½“ç„¶æ˜¯æ„é€ å‡½æ•°ï¼Œè¦ä½¿å¤–ç•Œåˆ›å»ºstringï¼Œä¸€å®šè¦è°ƒç”¨æ„é€ å‡½æ•°ï¼Œè€Œä¸”è¦æ”¾åˆ°publicï¼ˆå½“ç„¶ä¹Ÿæœ‰æ”¾åœ¨privateé‡Œé¢çš„ï¼Œåªæ˜¯å¾ˆå°‘ï¼‰ã€‚</li><li>å­˜è¿›æ¥ä»¥åå½“ç„¶ä¸å¯èƒ½è¦æ”¹å˜é‡Œé¢çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬åªæ˜¯æ‹¿æ¥å½“åˆå€¼è€Œå·²ï¼Œæ‰€ä»¥åŠ constï¼Œå¹¶ä¸”ç»™é»˜è®¤å€¼ä¸º0ã€‚ï¼ˆè¡Œ4ï¼‰</li><li>classé‡Œé¢æœ‰æŒ‡é’ˆï¼Œæ‰€ä»¥è¦å»å…³æ³¨ä¸‰ä¸ªé‡è¦ç‰¹æ®Šçš„å‡½æ•°ã€‚</li><li>ç¬¬ä¸€ä¸ªæ˜¯æ‹·è´æ„é€ å‡½æ•°ã€‚æ—¢ç„¶æ˜¯æ‹·è´æ„é€ ï¼Œé‚£ä¹ˆå°±æ˜¯ç›¸å½“äºå®ƒè‡ªå·±ï¼Œåˆ™å‚æ•°é‡Œé¢ç±»å‹ç”¨Stringã€‚<br>å†è€ƒè™‘ä¸‹å¼•ç”¨å’Œconstçš„é—®é¢˜ï¼Œå¼•ç”¨å¿…é¡»çš„ã€‚ï¼ˆè¡Œ5ï¼‰<br>æˆ‘ä»¬ä¼ è¿›æ¥åªæ˜¯å¤åˆ¶ä¸ªè“æœ¬ï¼Œæ²¡æœ‰è€ƒè™‘è¦å»æ”¹å˜ï¼Œæ‰€ä»¥åŠ ä¸Šconstã€‚</li><li>ç¬¬äºŒæ˜¯æ‹·è´èµ‹å€¼å‡½æ•°ã€‚å…ˆå†™åç§°operator=ï¼Œèµ‹å€¼çš„åŠ¨ä½œæ˜¯æŠŠæ¥æºç«¯æ‹·è´åˆ°ç›®çš„ç«¯å»ï¼Œæ¥æºç«¯æ˜¯Stringç±»å‹ï¼Œæ‰€ä»¥å‚æ•°ä¹Ÿæ˜¯String,è¿™æ‰å«æ‹·è´ã€‚<br>è¿™é‡Œå’Œ7ä¸€æ ·åŒæ ·è€ƒè™‘å¼•ç”¨å’Œconst<br>è¿”å›å€¼çš„è¯ç†æ‰€å½“ç„¶æ˜¯Stringç±»å‹ï¼Œå› ä¸ºæœ¬æ¥å°±æœ‰ç›®çš„ç«¯ï¼Œæ‰€ä»¥å¯ä»¥åŠ å¼•ç”¨ï¼ˆè¡Œ6ï¼‰</li><li>ç¬¬ä¸‰ä¸ªæ˜¯ææ„å‡½æ•°ï¼Œä¸ç±»çš„åç§°ç›¸åŒå¹¶åŠ æ³¢æµªå·</li><li>æ¥ç€æˆ‘ä»¬è¿˜éœ€è¦åŠ ä¸ªè¾…åŠ©å‡½æ•°ï¼Œèƒ½è®©å­—ç¬¦ä¸²ä¸¢åˆ°coutï¼Œä¹Ÿå°±æ˜¯ä½ çš„å±å¹•ã€‚åšæ³•å¾ˆç®€å•ï¼Œå¦‚æœæˆ‘èƒ½å¤Ÿå–åˆ°privateé‡Œé¢é‚£ä¸ªå­—ç¬¦ï¼Œcoutæ˜¯å¯ä»¥æ¥å—è¿™ç§ä¸œè¥¿çš„ï¼Œæ‰€ä»¥è®¾ç½®äº†ä¸€ä¸ªget_str()å‡½æ•°ï¼ŒåŒæ—¶æ³¨æ„constã€‚å› ä¸ºå‰é¢é‚£äº›å‡½æ•°éƒ½æ˜¯è¦æ”¹å˜ç›®çš„ç«¯çš„æ•°æ®ï¼Œæ‰€ä»¥ä¸èƒ½åŠ constã€‚ï¼ˆè¡Œ7ï¼‰</li><li>è®¾è®¡æ„é€ å‡½æ•°ï¼Œé¦–å…ˆç¬¬ä¸€ä¸ªè¦è€ƒè™‘çš„æ˜¯å¾—åˆ†é…è¶³å¤Ÿçš„ç©ºé—´å»æ”¾åˆå€¼ï¼Œè¿™é‡Œç”¨newåŠ¨æ€åˆ†é…å†…å­˜ã€‚æ¥ç€æŠŠä¼ è¿›æ¥åˆå€¼çš„å†…å®¹æ‹·è´åˆ°å·²ç»åˆ†é…çš„ç©ºé—´ï¼Œå³dataï¼Œè¿™å°±å®Œæˆäº†åˆ›å»ºæ–°çš„å­—ç¬¦ä¸²çš„å†…å®¹ï¼ˆæ³¨æ„åŒ…å«å¤´æ–‡ä»¶ï¼‰ã€‚åŠ ä¸ªinlineã€‚ï¼ˆè¡Œ13-26ï¼‰</li><li>å¦‚æœæ²¡æœ‰æŒ‡å®šåˆå€¼çš„è¯ï¼Œæˆ‘è¿™é‡Œæ˜¯ä¹Ÿè¦åˆ†é…ä¸€ä¸ªç©ºé—´å»æ”¾ç»“æŸç¬¦ã€‚</li><li>ä¸‹ä¸€æ­¥è®¾è®¡ææ„å‡½æ•°ï¼Œè¿™ä¸ªæŠŠåˆ†é…çš„å†…å­˜é‡Šæ”¾æ‰å°±è¡Œäº†ï¼Œç”¨delete[]ã€‚ï¼ˆè¡Œ28-31ï¼‰</li><li>ç„¶åæ˜¯æ‹·è´æ„é€ å‡½æ•°ï¼ŒåŒæ ·æ˜¯ç”¨newåˆ†é…ä¸€å—å…ˆï¼Œè¿™é‡Œä¸åŒçš„æ˜¯strlené‡Œé¢ç”¨äº†str.dataï¼Œå› ä¸ºä¼ è¿›æ¥çš„æ˜¯classï¼Œæ‰€ä»¥ç”¨.è¯»å–æ•°æ®ã€‚ï¼ˆè¡Œ33-38ï¼‰</li><li>çœ‹åˆ°è¿™ä¹ˆå¤šinlineï¼Œé‚£åˆ°åº•ä»€ä¹ˆæ—¶å€™ç”¨å‘¢ï¼Ÿ<br>emmmï¼Œåæ­£å…¨å†™è¡Œäº†ï¼Œä¸ç®¡å¤šé•¿ï¼Œè¦æ˜¯ç¼–è¯‘å™¨ä¸æ”¯æŒçš„è¯è‡ªç„¶ä¸ä¼šå»åšï¼Œæ²¡æœ‰å‰¯ä½œç”¨ã€‚</li><li>æ¥ç€æ˜¯æ‹·è´èµ‹å€¼å‡½æ•°,èµ‹å€¼ï¼ŒæŠŠæ¥æºç«¯èµ‹å€¼åˆ°ç›®çš„ç«¯ï¼Œç°åœ¨è¿™ä¸ªç›®çš„ç«¯æ˜¯æœ¬æ¥å·²ç»å­˜åœ¨çš„ä¸œè¥¿ï¼Œæ‰€ä»¥ç›®çš„ç«¯è¦å…ˆæŠŠè‡ªå·±ç”¨deleteæ¸…æ‰ï¼Œæ€æ‰ä»¥åé‡æ–°åˆ†é…ä¸€å—å¤Ÿå¤§çš„ç©ºé—´ï¼Œæ¥ç€æŠŠæ¥æºç«¯æ‹·è´åˆ°ç›®çš„ç«¯ã€‚è€ƒè™‘ä¸‹è¿”å›å€¼ï¼Œå¦‚æœæŠŠè¿”å›ç±»å‹è®¾ç½®ä¸ºvoidï¼Œåˆ™ä¸èƒ½è¿ç»­èµ‹å€¼ï¼Œæ‰€ä»¥æœ€å¥½æœ‰è¿”å›ã€‚</li><li>è¿˜å¾—è€ƒè™‘ä¸€ä¸ªå®¹æ˜“å¿½ç•¥çš„ç‚¹ï¼Œå°±æ˜¯åˆ¤æ–­æ˜¯æ˜¯ä¸æ˜¯è‡ªæˆ‘èµ‹å€¼ã€‚ï¼ˆ40-49ï¼‰<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">String</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">String</span>(<span class="keyword">const</span> <span class="keyword">char</span>* str = <span class="number">0</span>); <span class="comment">//æ„é€ å‡½æ•°</span></span><br><span class="line">  <span class="built_in">String</span>(<span class="keyword">const</span> String&amp; str); <span class="comment">//æ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line">  String&amp; <span class="keyword">operator</span> = (<span class="keyword">const</span> String &amp; str); <span class="comment">//æ‹·è´èµ‹å€¼å‡½æ•°</span></span><br><span class="line">  ~<span class="built_in">String</span>(); <span class="comment">//ææ„å‡½æ•°</span></span><br><span class="line">  <span class="function"><span class="keyword">char</span>* <span class="title">get_str</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> data; &#125; <span class="comment">//æŠŠå­—ç¬¦ä¸²ä¸¢åˆ°cout</span></span><br><span class="line"><span class="keyword">private</span>ï¼š</span><br><span class="line">      <span class="keyword">char</span>* data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span></span></span><br><span class="line"><span class="function"><span class="title">String::String</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* str = <span class="number">0</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(str)</span><br><span class="line">  &#123;</span><br><span class="line">    data = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="built_in">strlen</span>(str) + <span class="number">1</span>];</span><br><span class="line">    <span class="built_in">strcpy</span>(data, str);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="comment">//æœªæŒ‡å®šåˆå€¼</span></span><br><span class="line">  &#123;</span><br><span class="line">    data = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">1</span>];</span><br><span class="line">    *data = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;<span class="comment">//æ„é€ å‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">inline</span> String::~<span class="built_in">String</span>()</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">delete</span>[] data;</span><br><span class="line">&#125;<span class="comment">//ææ„å‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span></span></span><br><span class="line"><span class="function"><span class="title">String::String</span><span class="params">(<span class="keyword">const</span> String &amp; str)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  data = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="built_in">strlen</span>(str.data) + <span class="number">1</span>];</span><br><span class="line">  <span class="built_in">strcpy</span>(data, str.data);</span><br><span class="line">&#125;<span class="comment">//æ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">inline</span></span><br><span class="line">String&amp; String::<span class="keyword">operator</span>=(<span class="keyword">const</span> String&amp; str)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">this</span> == &amp;str) <span class="comment">//åˆ¤æ–­æ˜¯ä¸æ˜¯è‡ªæˆ‘èµ‹å€¼</span></span><br><span class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">  <span class="keyword">delete</span>[] data;</span><br><span class="line">  data = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="built_in">strlen</span>(str.data + <span class="number">1</span>)];</span><br><span class="line">  <span class="built_in">strcpy</span>(data, str.data);</span><br><span class="line">  <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;<span class="comment">//æ‹·è´èµ‹å€¼å‡½æ•°</span></span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ç±» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€æ­¥ä¸€æ­¥å†™å‡ºc++ä¸å¸¦æŒ‡é’ˆç±»å®ä¾‹(æ ‡å‡†åº“complexéƒ¨åˆ†)</title>
      <link href="/2018/02/13/c++%E4%B8%8D%E5%B8%A6%E6%8C%87%E9%92%88%E7%B1%BB%E5%AE%9E%E4%BE%8B(complex)/"/>
      <url>/2018/02/13/c++%E4%B8%8D%E5%B8%A6%E6%8C%87%E9%92%88%E7%B1%BB%E5%AE%9E%E4%BE%8B(complex)/</url>
      
        <content type="html"><![CDATA[<p>æ€»å…±æœ‰19æ­¥<br><span id="more"></span></p><h3 id="æµç¨‹ï¼š"><a href="#æµç¨‹ï¼š" class="headerlink" title="æµç¨‹ï¼š"></a>æµç¨‹ï¼š</h3><ol><li>é¦–å…ˆå…ˆå…»æˆé˜²å«å¼ä¹ æƒ¯ï¼Œåœ¨å¤´æ–‡ä»¶ä¸­åŠ å…¥ä¸‹é¢ä¸‰è¡Œï¼Œé˜²æ­¢é‡å¤åŒ…å«(è¡Œ2,3,19)</li><li>ç„¶åå†™å‡ºä¸»ä½“ï¼ˆè¡Œ4,5,18ï¼‰</li><li>è€ƒè™‘ä¸‹è¿™ä¸ªå¤æ•°éœ€è¦ä»€ä¹ˆæ•°æ®ï¼Œå½“ç„¶è¿™ä¸ªæ•°æ®åº”è¯¥æ”¾åœ¨ç§æœ‰éƒ¨åˆ†(private)ã€‚<br> å¤æ•°æœ‰å®éƒ¨è™šéƒ¨ï¼Œå¯å¾—å‡ºprivateå˜é‡çš„å®šä¹‰ï¼ˆè¡Œ15,16ï¼‰</li><li>æ¥ä¸‹æ¥è€ƒè™‘éœ€è¦ä»€ä¹ˆå‡½æ•°æ¥å®ç°ï¼Œè¿™äº›å‡½æ•°å½“ç„¶éœ€è¦æ“ä½œåœ¨å¤æ•°èº«ä¸Šï¼Œç„¶å<br> å‡½æ•°æ˜¯å¯¹å¤–å‘è¡¨çš„ï¼Œæ‰€ä»¥æ”¾åœ¨publicé‡Œé¢ï¼ˆè¡Œ7ï¼Œè¡Œ8ï¼‰</li><li>é¦–å…ˆä»»ä½•ä¸€ä¸ªclasséƒ½æœ‰æ„é€ å‡½æ•°ï¼Œç„¶åæ„é€ å‡½æ•°çš„è¯­æ³•æ˜¯ä»€ä¹ˆï¼Ÿ<br> æ„é€ å‡½æ•°åç§°ä¸classåç§°ç›¸åŒï¼Œæ²¡æœ‰è¿”å›ç±»å‹ã€‚æ¥ç€ï¼Œä¸€ä¸ªæ„é€ å‡½æ•°åº”è¯¥æ¥æ”¶ä»€ä¹ˆå‚æ•°ï¼Ÿ<br> åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæœ‰å®éƒ¨è™šéƒ¨ï¼Œæˆ‘ä»¬å°±åº”è¯¥æœ‰å®éƒ¨è™šéƒ¨çš„å‚æ•°ï¼Œç„¶åæˆ‘ä»¬å°±è€ƒé‡è¦ä¸è¦é»˜è®¤å€¼ã€‚</li><li>æˆ‘ä»¬è¿˜è¦è€ƒè™‘è¿™ä¸ªå‡½æ•°çš„ä¼ é€’æ˜¯æŒ‰å€¼ä¼ é€’è¿˜æ˜¯æŒ‰å¼•ç”¨ä¼ é€’ï¼Ÿ<br> è¿™ä¸ªå‡½æ•°ä¸­ä¼ å€¼æˆ–è€…ä¼ å¼•ç”¨åŒºåˆ«ä¸å¤§ï¼Œæ‰€ä»¥éšä¾¿é€‰æ‹©ä¸€ä¸ª</li><li>è¿˜å¾—æƒ³åˆ°æ„é€ å‡½æ•°æœ‰ä¸ªå¾ˆç‰¹åˆ«çš„è¯­æ³•â€”åˆå§‹åˆ—ï¼Œä¸€èˆ¬æœ€å¥½è¿ç”¨åˆå§‹åˆ—</li><li>ç„¶åè€ƒè™‘æ„é€ å‡½æ•°è¿˜éœ€è¦å¹²ä»€ä¹ˆï¼Œè¿™ä¸ªä¾‹å­å·²ç»ä¸éœ€è¦ä»€ä¹ˆæ“ä½œï¼Œåœ¨åˆ«çš„åœ°æ–¹å¯èƒ½è¦åœ¨æ„é€ å‡½æ•°ä¸­åˆ†é…ä¸€äº›å†…å­˜ï¼Œå¼€ä¸ªçª—å£ï¼Œæˆ–è€…å¼€ä¸ªæ–‡ä»¶ç­‰ç­‰ï¼ˆè¡Œ9,10ï¼‰</li><li>æ¥ä¸‹æ¥è€ƒè™‘è¿™ä¸ªclassè¦å®ç°ä»€ä¹ˆåŠŸèƒ½ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®ç°å¤æ•°çš„åŠ æ³•ã€‚<br> å¯¹äºè¯¥å‡½æ•°æœ‰ä¸¤ç§é€‰æ‹©ï¼Œä¸€ç§æ˜¯æˆä¸ºæˆå‘˜å‡½æ•°ï¼Œå¦ä¸€ç§åˆ™æ˜¯éæˆå‘˜å‡½æ•°ï¼Œè¿™ä¸¤ç§é€‰æ‹©éƒ½å¯ä»¥ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©ç¬¬ä¸€ç§ã€‚ï¼ˆè¡Œ12ï¼‰</li><li>è¿˜éœ€è¦å‡†å¤‡ä»€ä¹ˆå‡½æ•°å‘¢ï¼Ÿéœ€è¦ä¸¤ä¸ªå‡½æ•°å»å–å¾—privateé‡Œé¢å®éƒ¨å’Œè™šéƒ¨çš„å€¼ã€‚å¯¹äºä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬è€ƒè™‘æ˜¯å¦è¦åŠ constï¼Œåœ¨è¿™é‡Œåªæ˜¯è¦å–å®è™šéƒ¨çš„å€¼ï¼Œæ‰€ä»¥è¦åŠ constä¿è¯å®‰å…¨ã€‚ï¼ˆè¡Œ13,14ï¼‰</li><li>æ¥ä¸‹æ¥åœ¨classæœ¬ä½“å¤–å®ç°å¤æ•°çš„åŠ æ³•ï¼Œå…ˆæŠŠå‡½æ•°é¦–éƒ¨é™¤å‚æ•°ä¹‹å¤–çš„ä¸œè¥¿å†™å‡ºæ¥(complex::operator += )ï¼Œç„¶åå†æ€è€ƒå‚æ•°æ˜¯ä»€ä¹ˆï¼Ÿ<br>+=ï¼Œä¸€å®šæœ‰ä¸ªå·¦è¾¹æœ‰ä¸ªå³è¾¹ï¼Œç”±äºè¯¥å‡½æ•°æ˜¯ä¸€ä¸ªæˆå‘˜å‡½æ•°ï¼Œæ˜¯ä½œç”¨åœ¨å·¦è¾¹èº«ä¸Šï¼Œæ‰€ä»¥å·¦è¾¹å°±æœ‰ä¸€ä¸ªéšè—çš„å‚æ•°æ”¾è¿›æ¥ï¼Œä¸çŸ¥é“åœ¨å‚æ•°åˆ—è¡¨ç¬¬å‡ ä¸ªä½ç½®ï¼Œåæ­£å°±æ˜¯ä¸€å®šæœ‰ï¼Œæ‰€ä»¥åœ¨å‚æ•°é‡Œé¢å°±å†™å³è¾¹å°±å¥½ã€‚ï¼ˆè¡Œ12ï¼‰</li><li>é¦–å…ˆæˆ‘ä»¬è¦è€ƒè™‘ä¼ å¼•ç”¨ï¼Œæ‰€ä»¥åŠ &amp;ï¼Œé‚£è¦ä¸è¦åŠ constï¼Ÿ+=æ˜¯å·¦è¾¹åŠ¨ï¼Œå³è¾¹ä¸åŠ¨ï¼Œæ‰€ä»¥è¦åŠ constã€‚<br>ç„¶åè€ƒè™‘è¿”å›å€¼ç±»å‹ï¼Œæ˜¾è€Œæ˜“è§+=å¾—åˆ°å·¦è¾¹çš„æ˜¯ä¸€ä¸ªå¤æ•°ï¼Œæ‰€ä»¥æ˜¯complexç±»å‹ï¼Œé‚£ä¹ˆè¦ä¸è¦ä¼ å¼•ç”¨ï¼Ÿç”±äºå·¦è¾¹æœ¬æ¥å°±å­˜åœ¨ï¼Œä¸æ˜¯åœ¨å‡½æ•°é‡Œé¢æ‰å®šä¹‰çš„ï¼Œæ‰€ä»¥å¯ä»¥ä¼ å¼•ç”¨ã€‚<br>ç”±äºè¿™ä¸ªå‡½æ•°æ˜¯åœ¨classæœ¬ä½“ä¹‹å¤–ï¼Œä¸ºäº†æé«˜æ•ˆç‡ï¼Œæ‰€ä»¥åŠ ä¸ªinlineï¼Œè‡³äºæœ€ç»ˆä¼šä¸ä¼šå˜æˆå†…è”å‡½æ•°ï¼Œè¿™ä¸ªå°±è¦çœ‹ç¼–è¯‘å™¨</li><li>ç„¶åè¡¥å……å®Œæ•´å‡½æ•°ä¸»ä½“ï¼ˆè¡Œ22-33ï¼‰</li><li>ç„¶åæˆ‘ä»¬å¤šäº†ä¸‰ä¸ªåŠ æ³•ï¼Œå¤æ•°+å¤æ•°ï¼Œå¤æ•°+å®æ•°ï¼Œå®æ•°+å¤æ•°ï¼Œæ˜¯åœ¨æœ¬ä½“å¤–ï¼Œä¸ºä»€ä¹ˆï¼Ÿï¼ˆè¡Œ42-54ï¼‰<br>å¦‚æœæ”¾åœ¨classé‡Œé¢ï¼Œå°±åªèƒ½å®ç°ä¸€ç§åŠ æ³•</li><li>æ¥ç€è€ƒè™‘è¾“å‡ºåŠŸèƒ½ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œè¦è¾“å‡ºcomplex c1(9,8)ã€‚<br>è¿™é‡Œå¯èƒ½éœ€è¦&lt;&lt;æ“ä½œç¬¦é‡è½½ï¼Œæ“ä½œç¬¦&lt;&lt;åªèƒ½ä½œç”¨åœ¨å·¦è¾¹ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€å¾—æ˜¯c1 &lt;&lt; cout;ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦é‡è½½è¿ç®—ç¬¦ï¼Œå®ç°cout &lt;&lt; c1;ï¼ˆè¡Œ56-61ï¼‰</li><li>ç”±äºè¯¥é‡è½½å‡½æ•°ä¸æ˜¯æˆå‘˜å‡½æ•°ï¼Œæ‰€ä»¥ä¸éœ€è¦complex::ï¼Œç”±äºè¯¥å‡½æ•°è¦å®ç°cout &lt;&lt; c1ï¼Œæ‰€ä»¥å·¦è¾¹æ˜¯coutï¼Œå·¦è¾¹å‚æ•°å°±å¾—æ˜¯â€œcoutç±»å‹â€ï¼ŒæŸ¥æ‰‹å†Œå¾—coutå±äºclass ostreamï¼ˆå¾—åŒ…å«å¤´æ–‡ä»¶&lt; iostream &gt;ï¼ŒåŒç†å³è¾¹æ˜¯complexã€‚<br>ç„¶åè€ƒè™‘ä¼ å¼•ç”¨ï¼Œclass complexå’Œclass ostreaméƒ½æ˜¯å¾ˆå¤§ä¸œè¥¿ï¼Œä¼ å¼•ç”¨é€Ÿåº¦å¿«ã€‚ç„¶åè€ƒè™‘è¦ä¸è¦åŠ constï¼Œå³è¾¹ä½œç”¨äºå·¦è¾¹ï¼Œå³è¾¹è‚¯å®šä¸å˜ï¼ŒåŠ constï¼Œé‚£ä¹ˆå·¦è¾¹å‘¢ï¼Ÿ<br>å·¦è¾¹ä¼šæ”¹å˜ï¼ŒçŠ¶æ€ä¼šæ”¹å˜ï¼Œæ‰€ä»¥ä¸èƒ½åŠ const</li><li>æ¥ç€è€ƒè™‘è¿”å›å€¼å¯¹äºcout &lt;&lt; c1è¿™ç§æƒ…å†µï¼Œå¯ä»¥è®¾ç½®ä¸ºvoidï¼Œä½†æ˜¯å¯¹äºcout &lt;&lt; c1 &lt;&lt; endlè¿™ç§æƒ…å†µå‘¢ï¼Ÿ</li><li>å½“cout &lt;&lt; c1æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œåº”è¯¥ä¼ å›ä¸€ç§æƒ³coutè¿™ç§ä¸œè¥¿è®©&lt;&lt; endlç»§ç»­æ‰§è¡Œï¼Œé‚£coutæ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œostreamï¼Œæ‰€ä»¥è¿”å›å€¼æœ€å¥½è®¾ç½®ä¸ºostreamã€‚ostreamæ˜¯æœ¬æ¥å°±æœ‰çš„ï¼Œæ‰€ä»¥å¯ä»¥ä¼ å¼•ç”¨</li><li>æœ€åè¡¥å…¨å‡½æ•°<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">æœ¬ä½“</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> _COMPLEX_</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> _COMPLEX_</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">complex</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">complex</span> (<span class="keyword">double</span> r = <span class="number">0</span>, <span class="keyword">double</span> i = <span class="number">0</span>)</span><br><span class="line">  : <span class="built_in">re</span> (r), <span class="built_in">im</span> (i)</span><br><span class="line">  &#123; &#125;</span><br><span class="line"></span><br><span class="line">  complex&amp; <span class="keyword">operator</span> += (<span class="keyword">const</span> complex&amp;);</span><br><span class="line">  <span class="function"><span class="keyword">double</span> real <span class="title">const</span> <span class="params">()</span> </span>&#123; <span class="keyword">return</span> re;&#125; <span class="comment">//å‡½æ•°å®Œæ•´ï¼Œæ˜¯inline</span></span><br><span class="line">  <span class="function"><span class="keyword">double</span> imag <span class="title">const</span> <span class="params">()</span> </span>&#123; <span class="keyword">return</span> im;&#125; <span class="comment">//inline</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  <span class="keyword">double</span> re, im;</span><br><span class="line">  <span class="keyword">friend</span> complex&amp; _doapl (complex*, <span class="keyword">const</span> complex);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">æœ¬ä½“å¤–</span><br><span class="line"><span class="keyword">inline</span> complex&amp;</span><br><span class="line">_doapl(complex* ths, <span class="keyword">const</span> complex &amp; r) <span class="comment">//å·¦è¾¹å˜ï¼Œå³è¾¹ä¸å˜ï¼Œæ‰€ä»¥å·¦è¾¹ä¸è¦const</span></span><br><span class="line">&#123;</span><br><span class="line">  ths-&gt;re += r.re;</span><br><span class="line">  ths-&gt;im += r.im;</span><br><span class="line">  <span class="keyword">return</span> *ths;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">inline</span> complex&amp;</span><br><span class="line">complex::<span class="keyword">operator</span> += (<span class="keyword">const</span> complex &amp; r)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">return</span> _doapl (<span class="keyword">this</span>, r); <span class="comment">//è®©_doaplå®ç°åŠ æ³•</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">inline</span> complex <span class="comment">//ä¸èƒ½ä¼ å¼•ç”¨</span></span><br><span class="line"><span class="keyword">operator</span> + (<span class="keyword">const</span> complex&amp; x, <span class="keyword">const</span> complex&amp; y)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">complex</span>(<span class="built_in">real</span>(x) + <span class="built_in">real</span>(y),</span><br><span class="line">                <span class="built_in">imag</span>(x) + <span class="built_in">imag</span>(y)); <span class="comment">//ç±»åç§°+å°æ‹¬å·åˆ›å»ºä¸´æ—¶å¯¹è±¡</span></span><br><span class="line">&#125;<span class="comment">//å¤æ•°+å¤æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">inline</span> complex</span><br><span class="line"><span class="keyword">operator</span> + (<span class="keyword">const</span> complex&amp; x, <span class="keyword">const</span> complex&amp; y)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">complex</span>(<span class="built_in">real</span>(x) + y,</span><br><span class="line">                 <span class="built_in">imag</span>(y));</span><br><span class="line">&#125;<span class="comment">//å¤æ•°+å®æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">inline</span> complex</span><br><span class="line"><span class="keyword">operator</span> + (<span class="keyword">const</span> complex&amp; x, <span class="keyword">const</span> complex&amp; y)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">complex</span>(x + <span class="built_in">real</span>(y),</span><br><span class="line">                <span class="built_in">imag</span>(y));</span><br><span class="line">&#125;<span class="comment">//å®æ•°+å¤æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line">ostream&amp;</span><br><span class="line"><span class="keyword">operator</span> &lt;&lt; (ostream&amp; os, <span class="keyword">const</span> complex &amp; x)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">return</span> os &lt;&lt; <span class="string">&#x27;(&#x27;</span> &lt;&lt; <span class="built_in">real</span>(x) &lt;&lt; <span class="built_in">imag</span>(x) &lt;&lt; <span class="string">&#x27;)&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ç±» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€é“ä¼˜å…ˆé˜Ÿåˆ—ä¹ é¢˜</title>
      <link href="/2018/02/13/%E4%B8%80%E9%81%93%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97%E4%B9%A0%E9%A2%98/"/>
      <url>/2018/02/13/%E4%B8%80%E9%81%93%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97%E4%B9%A0%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>hdu1873 çœ‹ç—…è¦æ’é˜Ÿ ä¼˜å…ˆé˜Ÿåˆ—<br><span id="more"></span></p><h3 id="ä¸€ã€hdu1873-çœ‹ç—…è¦æ’é˜Ÿ-ä¼˜å…ˆé˜Ÿåˆ—"><a href="#ä¸€ã€hdu1873-çœ‹ç—…è¦æ’é˜Ÿ-ä¼˜å…ˆé˜Ÿåˆ—" class="headerlink" title="ä¸€ã€hdu1873 çœ‹ç—…è¦æ’é˜Ÿ ä¼˜å…ˆé˜Ÿåˆ—"></a>ä¸€ã€hdu1873 çœ‹ç—…è¦æ’é˜Ÿ ä¼˜å…ˆé˜Ÿåˆ—</h3><p><strong>é¢˜ç›®æè¿°</strong><br>çœ‹ç—…è¦æ’é˜Ÿè¿™ä¸ªæ˜¯åœ°çƒäººéƒ½çŸ¥é“çš„å¸¸è¯†ã€‚<br>ä¸è¿‡ç»è¿‡ç»†å¿ƒçš„0068çš„è§‚å¯Ÿï¼Œä»–å‘ç°äº†åŒ»é™¢é‡Œæ’é˜Ÿè¿˜æ˜¯æœ‰è®²ç©¶çš„ã€‚0068æ‰€å»çš„åŒ»é™¢æœ‰ä¸‰ä¸ªåŒ»ç”Ÿï¼ˆæ±—ï¼Œè¿™ä¹ˆå°‘ï¼‰åŒæ—¶çœ‹ç—…ã€‚è€Œçœ‹ç—…çš„äººç—…æƒ…æœ‰è½»é‡ï¼Œæ‰€ä»¥ä¸èƒ½æ ¹æ®ç®€å•çš„å…ˆæ¥å…ˆæœåŠ¡çš„åŸåˆ™ã€‚æ‰€ä»¥åŒ»é™¢å¯¹æ¯ç§ç—…æƒ…è§„å®šäº†10ç§ä¸åŒçš„ä¼˜å…ˆçº§ã€‚çº§åˆ«ä¸º10çš„ä¼˜å…ˆæƒæœ€é«˜ï¼Œçº§åˆ«ä¸º1çš„ä¼˜å…ˆæƒæœ€ä½ã€‚åŒ»ç”Ÿåœ¨çœ‹ç—…æ—¶ï¼Œåˆ™ä¼šåœ¨ä»–çš„é˜Ÿä¼é‡Œé¢é€‰æ‹©ä¸€ä¸ªä¼˜å…ˆæƒæœ€é«˜çš„äººè¿›è¡Œè¯Šæ²»ã€‚å¦‚æœé‡åˆ°ä¸¤ä¸ªä¼˜å…ˆæƒä¸€æ ·çš„ç—…äººçš„è¯ï¼Œåˆ™é€‰æ‹©æœ€æ—©æ¥æ’é˜Ÿçš„ç—…äººã€‚<br>ç°åœ¨å°±è¯·ä½ å¸®åŠ©åŒ»é™¢æ¨¡æ‹Ÿè¿™ä¸ªçœ‹ç—…è¿‡ç¨‹ã€‚<br><strong>è¾“å…¥</strong><br>è¾“å…¥æ•°æ®åŒ…å«å¤šç»„æµ‹è¯•ï¼Œè¯·å¤„ç†åˆ°æ–‡ä»¶ç»“æŸã€‚<br>æ¯ç»„æ•°æ®ç¬¬ä¸€è¡Œæœ‰ä¸€ä¸ªæ­£æ•´æ•°N(0<N<2000)è¡¨ç¤ºå‘ç”Ÿäº‹ä»¶çš„æ•°ç›®ã€‚ 1 2 3 7 æ¥ä¸‹æ¥æœ‰nè¡Œåˆ†åˆ«è¡¨ç¤ºå‘ç”Ÿçš„äº‹ä»¶ã€‚ ä¸€å…±æœ‰ä¸¤ç§äº‹ä»¶ï¼š 1:"in a b",è¡¨ç¤ºæœ‰ä¸€ä¸ªæ‹¥æœ‰ä¼˜å…ˆçº§bçš„ç—…äººè¦æ±‚åŒ»ç”Ÿaè¯Šæ²»ã€‚(0<a<="3,0<B<=10)" 2:"out a",è¡¨ç¤ºåŒ»ç”Ÿaè¿›è¡Œäº†ä¸€æ¬¡è¯Šæ²»ï¼Œè¯Šæ²»å®Œæ¯•åï¼Œç—…äººå‡ºé™¢ã€‚(0<a<="3)" **è¾“å‡º** å¯¹äºæ¯ä¸ª"out a"äº‹ä»¶ï¼Œè¯·åœ¨ä¸€è¡Œé‡Œé¢è¾“å‡ºè¢«è¯Šæ²»äººçš„ç¼–å·idã€‚å¦‚æœè¯¥äº‹ä»¶æ—¶æ— ç—…äººéœ€è¦è¯Šæ²»ï¼Œåˆ™è¾“å‡º"empty"ã€‚ è¯Šæ²»äººçš„ç¼–å·idçš„å®šä¹‰ä¸ºï¼šåœ¨ä¸€ç»„æµ‹è¯•ä¸­ï¼Œ"in b"äº‹ä»¶å‘ç”Ÿç¬¬kæ¬¡æ—¶ï¼Œè¿›æ¥çš„ç—…äººidå³ä¸ºkã€‚ä»1å¼€å§‹ç¼–å·ã€‚ **ç¤ºä¾‹** è¾“å…¥ï¼š in out è¾“å‡ºï¼š empty ä»£ç ï¼š <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> x, y;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>&lt; (<span class="keyword">const</span> node &amp; a)<span class="keyword">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(x != a.x)</span><br><span class="line">            <span class="keyword">return</span> x &lt; a.x;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> y &gt; a.y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;s;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    priority_queue&lt;node&gt; doctors[<span class="number">3</span>];</span><br><span class="line">    <span class="keyword">int</span> n, doc, pri;</span><br><span class="line">    string ss;</span><br><span class="line">    <span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> t = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; ss;</span><br><span class="line">            <span class="keyword">if</span>(ss[<span class="number">0</span>] == <span class="string">&#x27;I&#x27;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                cin &gt;&gt; doc &gt;&gt; pri;</span><br><span class="line">                s.x = pri;</span><br><span class="line">                s.y = t++;</span><br><span class="line">                doctors[doc].<span class="built_in">push</span>(s);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(ss[<span class="number">0</span>] == <span class="string">&#x27;O&#x27;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                cin &gt;&gt; doc;</span><br><span class="line">                <span class="keyword">if</span>(!doctors[doc].<span class="built_in">empty</span>())</span><br><span class="line">                &#123;</span><br><span class="line">                    cout &lt;&lt; doctors[doc].<span class="built_in">top</span>().y &lt;&lt; endl;</span><br><span class="line">                    doctors[doc].<span class="built_in">pop</span>();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    cout &lt;&lt; <span class="string">&quot;EMPTY&quot;</span> &lt;&lt; endl;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></N<2000)è¡¨ç¤ºå‘ç”Ÿäº‹ä»¶çš„æ•°ç›®ã€‚></p>]]></content>
      
      
      <categories>
          
          <category> æ°´é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¼˜å…ˆé˜Ÿåˆ— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>STLä¹‹stack, queueä»¥åŠpriority_queue</title>
      <link href="/2018/02/13/STL%E4%B9%8Bstack,%20queue%E4%BB%A5%E5%8F%8Apriority%20queue/"/>
      <url>/2018/02/13/STL%E4%B9%8Bstack,%20queue%E4%BB%A5%E5%8F%8Apriority%20queue/</url>
      
        <content type="html"><![CDATA[<p>æ ˆã€é˜Ÿåˆ—ã€ä¼˜å…ˆé˜Ÿåˆ—åŸºæœ¬æ€»ç»“<br><span id="more"></span></p><h3 id="ä¸€ã€stack"><a href="#ä¸€ã€stack" class="headerlink" title="ä¸€ã€stack"></a>ä¸€ã€stack</h3><ol><li>è¦ä½¿ç”¨stackï¼Œå¿…é¡»è¦åŒ…å«å¤´æ–‡ä»¶&lt; stack &gt;</li><li>å®é™…ä¸Šstackåªæ˜¯å¾ˆå•çº¯åœ°æŠŠå„é¡¹æ“ä½œè½¬åŒ–ä¸ºå†…éƒ¨å®¹å™¨çš„å¯¹åº”è°ƒç”¨ï¼Œå¯ä»¥ä½¿ç”¨ä»»ä½•åºåˆ—å¼å®¹å™¨æ¥æ”¯æŒstackï¼Œåªè¦å®ƒä»¬æ”¯æŒback(), push_back(), pop_back()ç­‰åŠ¨ä½œå°±è¡Œã€‚ä¾‹å¦‚ä½ å¯ä»¥ä½¿ç”¨vectoræˆ–listæ¥å®¹çº³å…ƒç´ ï¼š<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">std::stack&lt; <span class="keyword">int</span>, std::vector&lt;<span class="keyword">int</span>&gt; &gt;st;</span><br></pre></td></tr></table></figure>&lt;/div&gt;<div align="center"><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/stack%E5%86%85%E9%83%A8%E6%8E%A5%E5%8F%A3.png" width="70%" height="70%"></div></li></ol><p>stackå†…éƒ¨å­˜æ”¾å…ƒç´ æ‰€ç”¨çš„å®é™…å®¹å™¨ï¼Œç¼ºçœé‡‡ç”¨dequeã€‚ä¹‹æ‰€ä»¥é‡‡ç”¨dequeï¼Œè€Œévectorï¼Œæ˜¯å› ä¸ºdequeç§»é™¤å…ƒç´ æ—¶ä¼šé‡Šæ”¾å†…å­˜ã€‚</p><ol><li>stackæ ¸å¿ƒæ¥å£ï¼š</li></ol><ul><li>push()ï¼šå°†ä¸€ä¸ªå…ƒç´ ç½®å…¥stackå†…</li><li>top():è¿”å›æ ˆé¡¶å…ƒç´ ï¼Œä½†æ˜¯å¹¶ä¸ç§»é™¤å®ƒ</li><li>pop():ä»stackç§»é™¤å…ƒç´ ï¼Œä½†æ˜¯å¹¶ä¸å°†å®ƒè¿”å›</li><li>empty():æ£€æŸ¥åº•å±‚å®¹å™¨æ˜¯å¦ä¸ºç©ºï¼Œå½“æ ˆä¸ºç©ºæ—¶è¿”å›true</li><li>size():è¿”å›å®¹çº³çš„å…ƒç´ æ•°</li></ul><p><em>å¦‚æœstackå†…æ²¡æœ‰å…ƒç´ ï¼Œåˆ™æ‰§è¡Œtop()å’Œpop()ä¼šå¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸ºï¼Œå¯ä»¥é‡‡ç”¨æˆå‘˜å‡½æ•°size()å’Œempty()æ¥æ£€éªŒå®¹å™¨æ˜¯å¦ä¸ºç©º</em></p><ol><li>stackç®€å•å®ä¾‹:<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    stack&lt;<span class="keyword">int</span>&gt; st;</span><br><span class="line">    st.<span class="built_in">push</span>(<span class="number">1</span>);</span><br><span class="line">    st.<span class="built_in">push</span>(<span class="number">2</span>);</span><br><span class="line">    st.<span class="built_in">push</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; st.<span class="built_in">top</span>() &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    st.<span class="built_in">pop</span>();</span><br><span class="line">    cout &lt;&lt; st.<span class="built_in">top</span>() &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    st.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">    st.<span class="built_in">top</span>() = <span class="number">77</span>;</span><br><span class="line">    st.<span class="built_in">push</span>(<span class="number">4</span>);</span><br><span class="line">    st.<span class="built_in">push</span>(<span class="number">5</span>);</span><br><span class="line">    st.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(!st.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; st.<span class="built_in">top</span>() &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">        st.<span class="built_in">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">ç¨‹åºè¾“å‡º: <span class="number">3</span> <span class="number">2</span> <span class="number">4</span> <span class="number">77</span></span><br></pre></td></tr></table></figure>æ›´å¤šäº†è§£stack:<br><a href="http://zh.cppreference.com/w/cpp/container/stack">stack- C++ Reference</a><h3 id="äºŒã€queue"><a href="#äºŒã€queue" class="headerlink" title="äºŒã€queue"></a>äºŒã€queue</h3></li><li>è¦ä½¿ç”¨queueï¼Œå¿…é¡»åŒ…å«å¤´æ–‡ä»¶&lt; queue &gt;</li><li><p>å®é™…ä¸Šqueueåªæ˜¯å¾ˆå•çº¯åœ°æŠŠå„é¡¹æ“ä½œè½¬åŒ–ä¸ºå†…éƒ¨å®¹å™¨çš„å¯¹åº”è°ƒç”¨ï¼Œå¯ä»¥ä½¿ç”¨ä»»ä½•åºåˆ—å¼å®¹å™¨æ¥æ”¯æŒstackï¼Œåªè¦å®ƒä»¬æ”¯æŒfront(), back(), push_back(), pop_front()ç­‰åŠ¨ä½œå°±è¡Œã€‚ä¾‹å¦‚ä½ å¯ä»¥ä½¿ç”¨vectoræˆ–listæ¥å®¹çº³å…ƒç´ ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">std::queue&lt; std::string, std::list&lt;std::string&gt; &gt; buffer;</span><br></pre></td></tr></table></figure><p>&lt;/div&gt;</p><div align="center"><img src="https://raw.githubusercontent.com/GreenHatHG/blog_image/master/queue%E5%86%85%E9%83%A8%E6%8E%A5%E5%8F%A3.png" width="80%" height="80%"></div></li><li><p>queueæ ¸å¿ƒæ¥å£:</p></li></ol><ul><li>push():å…¥é˜Ÿï¼Œå°†ä¸€ä¸ªå…ƒç´ ç½®å…¥é˜Ÿåˆ—æœ«ç«¯ä¸­</li><li>front():è¿”å›ç¬¬ä¸€ä¸ªè¢«ç½®å…¥çš„å…ƒç´ ï¼Œä½†å¹¶ä¸ç§»é™¤</li><li>back():è¿”å›æœ€åä¸€ä¸ªå…ƒç´ ï¼Œä½†å¹¶ä¸ç§»é™¤</li><li>pop():å‡ºé˜Ÿï¼Œç§»é™¤é˜Ÿåˆ—ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä½†å¹¶ä¸è¿”å›</li><li>empty():åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºï¼Œé˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œè¿”å›true</li><li>size():è¿”å›å®¹çº³çš„å…ƒç´ æ•°</li></ul><p><em>å¦‚æœqueueä¹‹å†…æ²¡æœ‰å…ƒç´ ï¼Œåˆ™front(), back(), pop()çš„æ‰§è¡Œè¡Œä¸ºä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚</em></p><ol><li>queueç®€å•å®ä¾‹:<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   queue&lt;string&gt; q;</span><br><span class="line"></span><br><span class="line">   q.<span class="built_in">push</span>(<span class="string">&quot;These &quot;</span>);</span><br><span class="line">   q.<span class="built_in">push</span>(<span class="string">&quot;are &quot;</span>);</span><br><span class="line">   q.<span class="built_in">push</span>(<span class="string">&quot;more than&quot;</span>);</span><br><span class="line"></span><br><span class="line">   cout &lt;&lt; q.<span class="built_in">front</span>();</span><br><span class="line">   q.<span class="built_in">pop</span>();</span><br><span class="line">   cout &lt;&lt; q.<span class="built_in">front</span>();</span><br><span class="line">   q.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">   q.<span class="built_in">push</span>(<span class="string">&quot;four &quot;</span>);</span><br><span class="line">   q.<span class="built_in">push</span>(<span class="string">&quot;words!&quot;</span>);</span><br><span class="line">   q.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">   cout &lt;&lt; q.<span class="built_in">front</span>();</span><br><span class="line">   q.<span class="built_in">pop</span>();</span><br><span class="line">   cout &lt;&lt; q.<span class="built_in">front</span>() &lt;&lt; endl;</span><br><span class="line">   q.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">   cout &lt;&lt; <span class="string">&quot;number pf elements in the queue: &quot;</span> &lt;&lt; q.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">ç¨‹åºè¾“å‡ºï¼š</span><br><span class="line">These are four words!</span><br><span class="line">number pf elements in the queue: <span class="number">0</span></span><br></pre></td></tr></table></figure>æ›´å¤šäº†è§£queue:<br><a href="http://zh.cppreference.com/w/cpp/container/queue">queue- C++ Reference</a><h3 id="ä¸‰ã€priority-queue"><a href="#ä¸‰ã€priority-queue" class="headerlink" title="ä¸‰ã€priority_queue"></a>ä¸‰ã€priority_queue</h3></li><li>è¦ä½¿ç”¨priority_queueï¼Œå¿…é¡»åŒ…å«å¤´æ–‡ä»¶&lt; queue &gt;</li><li>å®é™…ä¸Špriority_queueåªæ˜¯å¾ˆå•çº¯åœ°æŠŠå„é¡¹æ“ä½œè½¬åŒ–ä¸ºå†…éƒ¨å®¹å™¨çš„å¯¹åº”è°ƒç”¨ï¼Œå¯ä»¥ä½¿ç”¨ä»»ä½•åºåˆ—å¼å®¹å™¨æ¥æ”¯æŒpriority_queueï¼Œåªè¦å®ƒä»¬æ”¯æŒéšæœºå­˜å–è¿­ä»£å™¨å’Œfront(), push_back(), pop_front()ç­‰åŠ¨ä½œå°±è¡Œã€‚ç”±äºpriority_queueéœ€è¦ç”¨åˆ°STLçš„heapç®—æ³•ï¼Œæ‰€ä»¥å…¶å†…éƒ¨å®¹å™¨å¿…é¡»æ”¯æŒéšæœºå­˜å–è¿­ä»£å™¨ã€‚ä¾‹å¦‚ä½ å¯ä»¥ä½¿ç”¨dequeæ¥å®¹çº³å…ƒç´ ï¼š<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">std::priority_queue&lt; <span class="keyword">float</span>, std::deque&lt;<span class="keyword">float</span>&gt; &gt; pbuffer;</span><br></pre></td></tr></table></figure></li></ol><ul><li>ä¼˜å…ˆé˜Ÿåˆ—ä¸é˜Ÿåˆ—çš„å·®åˆ«åœ¨äºä¼˜å…ˆé˜Ÿåˆ—ä¸æ˜¯æŒ‰ç…§å…¥é˜Ÿçš„é¡ºåºå‡ºé˜Ÿï¼Œè€Œæ˜¯æŒ‰ç…§é˜Ÿåˆ—ä¸­å…ƒç´ çš„ä¼˜å…ˆæƒé¡ºåºå‡ºé˜Ÿï¼ˆé»˜è®¤ä¸ºå¤§è€…ä¼˜å…ˆï¼Œä¹Ÿå¯ä»¥é€šè¿‡æŒ‡å®šç®—å­æ¥æŒ‡å®šè‡ªå·±çš„ä¼˜å…ˆé¡ºåºï¼‰ï¼Œå¦‚æœåŒæ—¶å­˜åœ¨è‹¥å¹²ä¸ªæ•°å€¼æœ€å¤§çš„å…ƒç´ ï¼Œæ— æ³•ç¡®çŸ¥ç©¶ç«Ÿå“ªä¸ªä¼šå…¥é€‰ã€‚</li><li>priority_queueæ¨¡æ¿ç±»æœ‰ä¸‰ä¸ªæ¨¡æ¿å‚æ•°ï¼Œé»˜è®¤å®¹å™¨ä¸ºvectorï¼Œé»˜è®¤ç®—å­ä¸ºlessï¼Œå³å°çš„å¾€å‰æ’ï¼Œå¤§çš„å¾€åæ’ï¼ˆå‡ºé˜Ÿæ—¶åºåˆ—å°¾çš„å…ƒç´ å‡ºé˜Ÿï¼‰<br><em>ä¸€ç‚¹è¦æ³¨æ„çš„æ˜¯priority_queueä¸­çš„ä¸‰ä¸ªå‚æ•°ï¼Œåä¸¤ä¸ªå¯ä»¥çœå»ï¼Œå› ä¸ºæœ‰é»˜è®¤å‚æ•°ï¼Œä¸è¿‡å¦‚æœï¼Œæœ‰ç¬¬ä¸‰ä¸ªå‚æ•°çš„è¯ï¼Œå¿…å®šè¦å†™ç¬¬äºŒä¸ªå‚æ•°ã€‚</em></li><li>å®šä¹‰priority_queueçš„ç¤ºä¾‹ä»£ç ï¼š<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">priority_queue&lt;<span class="keyword">int</span>&gt; q1;</span><br><span class="line">priority_queue&lt; pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &gt;q2; <span class="comment">//æ³¨æ„åœ¨ä¸¤ä¸ªå°–æ‹¬å·ä¹‹é—´ä¸€å®šè¦ä¿ç•™ç©ºæ ¼</span></span><br><span class="line">priority_queue&lt;<span class="keyword">int</span>, vector&lt;<span class="keyword">int</span>&gt;, greater&lt;<span class="keyword">int</span>&gt; &gt;q3; <span class="comment">//å®šä¹‰å°çš„å…ˆå‡ºé˜Ÿ</span></span><br></pre></td></tr></table></figure></li><li>priority_queueä¸queueåŸºæœ¬æ“ä½œç›¸åŒã€‚æ¥å£æœ‰empty(), size(), top(), push(), pop()ç­‰ç­‰</li></ul><ol><li>priority_queueç®€å•ç¤ºä¾‹ï¼š<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">showpq</span><span class="params">(priority_queue &lt;<span class="keyword">int</span>&gt; gq)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    priority_queue &lt;<span class="keyword">int</span>&gt; g = gq;</span><br><span class="line">    <span class="keyword">while</span> (!g.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&#x27;\t&#x27;</span> &lt;&lt; g.<span class="built_in">top</span>();</span><br><span class="line">        g.<span class="built_in">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    priority_queue &lt;<span class="keyword">int</span>&gt; gquiz;</span><br><span class="line">    gquiz.<span class="built_in">push</span>(<span class="number">10</span>);</span><br><span class="line">    gquiz.<span class="built_in">push</span>(<span class="number">30</span>);</span><br><span class="line">    gquiz.<span class="built_in">push</span>(<span class="number">20</span>);</span><br><span class="line">    gquiz.<span class="built_in">push</span>(<span class="number">5</span>);</span><br><span class="line">    gquiz.<span class="built_in">push</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;The priority queue gquiz is : &quot;</span>;</span><br><span class="line">    <span class="built_in">showpq</span>(gquiz);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\ngquiz.size() : &quot;</span> &lt;&lt; gquiz.<span class="built_in">size</span>();</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\ngquiz.top() : &quot;</span> &lt;&lt; gquiz.<span class="built_in">top</span>();</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\ngquiz.pop() : &quot;</span>;</span><br><span class="line">    gquiz.<span class="built_in">pop</span>();</span><br><span class="line">    <span class="built_in">showpq</span>(gquiz);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">ç¨‹åºè¾“å‡ºï¼š</span><br><span class="line">The priority queue gquiz is :     <span class="number">30</span>    <span class="number">20</span>    <span class="number">10</span>    <span class="number">5</span>    <span class="number">1</span></span><br><span class="line"></span><br><span class="line">gquiz.<span class="built_in">size</span>() : <span class="number">5</span></span><br><span class="line">gquiz.<span class="built_in">top</span>() : <span class="number">30</span></span><br><span class="line">gquiz.<span class="built_in">pop</span>() :     <span class="number">20</span>    <span class="number">10</span>    <span class="number">5</span>    <span class="number">1</span></span><br></pre></td></tr></table></figure></li><li><p>ç®—å­ï¼š<br> é»˜è®¤ä¸ºä½¿ç”¨lessç®—å­ã€‚<br> å¦‚æœè¦å®šä¹‰è‡ªå·±çš„æ¯”è¾ƒç®—å­ï¼Œåˆ™å¿…é¡»è‡ªå·±é‡è½½ operator&lt; æˆ–è€…è‡ªå·±å†™ä»¿å‡½æ•°ï¼Œ<br> ä¼˜å…ˆé˜Ÿåˆ—è¯•å›¾å°†ä¸¤ä¸ªå…ƒç´ x å’Œy ä»£å…¥æ¯”è¾ƒè¿ç®—ç¬¦(å¯¹less ç®—å­ï¼Œè°ƒç”¨x<yï¼Œå¯¹greater ç®—å­ï¼Œè°ƒç”¨x>y)ï¼Œè‹¥ç»“æœä¸ºçœŸï¼Œåˆ™x æ’åœ¨y å‰é¢ï¼Œy å°†å…ˆäºx å‡ºé˜Ÿï¼Œåä¹‹ï¼Œåˆ™å°†y æ’åœ¨x å‰é¢ï¼Œx å°†å…ˆå‡ºé˜Ÿã€‚<br> ä¸‹é¢ç¨‹åºæ˜¯é’ˆå¯¹ç»“æ„ä½“çš„ï¼Œå¯¹æ•°æ®çš„æ¯”è¾ƒæ˜¯é€šè¿‡å¯¹ç»“æ„ä½“é‡è½½operator()ã€‚ï¼ˆè½¬è‡ª<a href="http://blog.csdn.net/morewindows/article/details/6976468">åšå®¢</a>ï¼‰<br> ç¨‹åºåŠŸèƒ½æ˜¯æ¨¡æ‹Ÿæ’é˜Ÿè¿‡ç¨‹ï¼Œæ¯äººæœ‰å§“åå’Œä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§ç›¸åŒåˆ™æ¯”è¾ƒå§“åï¼Œå¼€å§‹æœ‰5ä¸ªäººè¿›å…¥é˜Ÿåˆ—ï¼Œç„¶åé˜Ÿå¤´2ä¸ªäººå‡ºé˜Ÿï¼Œå†æœ‰3ä¸ªäººè¿›å…¥é˜Ÿåˆ—ï¼Œæœ€åæ‰€æœ‰äººéƒ½ä¾æ¬¡å‡ºé˜Ÿï¼Œç¨‹åºä¼šè¾“å‡ºç¦»å¼€é˜Ÿä¼çš„é¡ºåºã€‚<br> è‡ªå®šä¹‰ç®—å­å¯å‚è€ƒï¼š</yï¼Œå¯¹greater></p><p><a href="https://www.cnblogs.com/flipped/p/5691430.html">ä¼˜å…ˆé˜Ÿåˆ—priority_queueçš„æ¯”è¾ƒå‡½æ•°</a></p></li></ol><p><a href="https://blog.csdn.net/u014644714/article/details/68924863">ä¼˜å…ˆçº§é˜Ÿåˆ—priority_queueä¹‹æ¯”è¾ƒå‡½æ•°</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//by MoreWindows( http://blog.csdn.net/MoreWindows )</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//ç»“æ„ä½“</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">char</span> szName[<span class="number">20</span>];</span><br><span class="line"><span class="keyword">int</span>  priority;</span><br><span class="line"><span class="built_in">Node</span>(<span class="keyword">int</span> nri, <span class="keyword">char</span> *pszName)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">strcpy</span>(szName, pszName);</span><br><span class="line">priority = nri;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//ç»“æ„ä½“çš„æ¯”è¾ƒæ–¹æ³• æ”¹å†™operator()</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">NodeCmp</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="keyword">const</span> Node &amp;na, <span class="keyword">const</span> Node &amp;nb)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (na.priority != nb.priority)</span><br><span class="line"><span class="keyword">return</span> na.priority &lt;= nb.priority;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">strcmp</span>(na.szName, nb.szName) &gt; <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintfNode</span><span class="params">(Node &amp;na)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%s %d\n&quot;</span>, na.szName, na.priority);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//ä¼˜å…ˆçº§é˜Ÿåˆ—é»˜è®¤æ˜¯ä½¿ç”¨vectorä½œå®¹å™¨ï¼Œåº•å±‚æ•°æ®ç»“æ„ä¸ºå †ã€‚</span></span><br><span class="line">priority_queue&lt;Node, vector&lt;Node&gt;, NodeCmp&gt; a;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æœ‰5ä¸ªäººè¿›å…¥é˜Ÿåˆ—</span></span><br><span class="line">a.<span class="built_in">push</span>(<span class="built_in">Node</span>(<span class="number">5</span>, <span class="string">&quot;å°è°­&quot;</span>));</span><br><span class="line">a.<span class="built_in">push</span>(<span class="built_in">Node</span>(<span class="number">3</span>, <span class="string">&quot;å°åˆ˜&quot;</span>));</span><br><span class="line">a.<span class="built_in">push</span>(<span class="built_in">Node</span>(<span class="number">1</span>, <span class="string">&quot;å°æ¶›&quot;</span>));</span><br><span class="line">a.<span class="built_in">push</span>(<span class="built_in">Node</span>(<span class="number">5</span>, <span class="string">&quot;å°ç‹&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//é˜Ÿå¤´çš„2ä¸ªäººå‡ºé˜Ÿ</span></span><br><span class="line"><span class="built_in">PrintfNode</span>(a.<span class="built_in">top</span>());</span><br><span class="line">a.<span class="built_in">pop</span>();</span><br><span class="line"><span class="built_in">PrintfNode</span>(a.<span class="built_in">top</span>());</span><br><span class="line">a.<span class="built_in">pop</span>();</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;--------------------\n&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å†è¿›å…¥3ä¸ªäºº</span></span><br><span class="line">a.<span class="built_in">push</span>(<span class="built_in">Node</span>(<span class="number">2</span>, <span class="string">&quot;å°ç™½&quot;</span>));</span><br><span class="line">a.<span class="built_in">push</span>(<span class="built_in">Node</span>(<span class="number">2</span>, <span class="string">&quot;å°å¼º&quot;</span>));</span><br><span class="line">a.<span class="built_in">push</span>(<span class="built_in">Node</span>(<span class="number">3</span>, <span class="string">&quot;å°æ–°&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰€æœ‰äººéƒ½ä¾æ¬¡å‡ºé˜Ÿ</span></span><br><span class="line"><span class="keyword">while</span> (!a.<span class="built_in">empty</span>())</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">PrintfNode</span>(a.<span class="built_in">top</span>());</span><br><span class="line">a.<span class="built_in">pop</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ›´å¤šäº†è§£priority_queue:<br><a href="http://zh.cppreference.com/w/cpp/container/priority_queue">priority_queue- C++ Reference</a></p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> STL </tag>
            
            <tag> ä¼˜å…ˆé˜Ÿåˆ— </tag>
            
            <tag> é˜Ÿåˆ— </tag>
            
            <tag> æ ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>STLä¹‹äºŒåˆ†æ³•å››ä¸ªå‡½æ•°åŠä¸¤é“å¯¹åº”ä¹ é¢˜</title>
      <link href="/2018/02/12/STL%E4%B9%8B%E4%BA%8C%E5%88%86/"/>
      <url>/2018/02/12/STL%E4%B9%8B%E4%BA%8C%E5%88%86/</url>
      
        <content type="html"><![CDATA[<p>STLå››ä¸ªäºŒåˆ†æœç´¢æ“ä½œå‡½æ•°ï¼šlower_bound, upper_bound, binary_search, equal_range<br><span id="more"></span><br>æ³¨æ„ï¼š</p><ol><li>å››ä¸ªå‡½æ•°éƒ½å®šä¹‰åœ¨å¤´æ–‡ä»¶<algorithm>ä¸­ï¼Œè¦ä½¿ç”¨å®ƒä»¬å¿…é¡»åŒ…å«è¿™ä¸ªå¤´æ–‡ä»¶</algorithm></li><li>è¿™å››ä¸ªå‡½æ•°éƒ½è¿ç”¨äº†æœ‰åºåŒºé—´ï¼Œè¿™ä¹Ÿæ˜¯äºŒåˆ†æŸ¥æ‰¾å‰æï¼Œå¯ä»¥ç”¨sortå‡½æ•°(éœ€è¦åŒ…å«<algorithm>å¤´æ–‡ä»¶)å¯¹æ•°ç»„ä»å°åˆ°å¤§æ’åº</algorithm></li></ol><h3 id="ä¸€ã€lower-bound-å‡½æ•°"><a href="#ä¸€ã€lower-bound-å‡½æ•°" class="headerlink" title="ä¸€ã€lower_bound()å‡½æ•°"></a>ä¸€ã€lower_bound()å‡½æ•°</h3><p><em>lower_bound()åœ¨firstå’Œlastä¸­çš„å‰é—­åå¼€åŒºé—´è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œè¿”å›å¤§äºæˆ–ç­‰äºvalçš„ç¬¬ä¸€ä¸ªå…ƒç´ ä½ç½®ã€‚å¦‚æœæ‰€æœ‰å…ƒç´ éƒ½å°äºvalï¼Œåˆ™è¿”å›lastçš„ä½ç½®ã€‚å‡½æ•°è¿”å›çš„æ˜¯è¿­ä»£å™¨ã€‚</em><br>å‡½æ•°åŠŸèƒ½ç®€å•å®ä¾‹:<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> len 12</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> val = <span class="number">21</span>;</span><br><span class="line">    <span class="keyword">int</span> arr[len]=&#123;<span class="number">12</span>,<span class="number">15</span>,<span class="number">17</span>,<span class="number">19</span>,<span class="number">20</span>,<span class="number">22</span>,<span class="number">23</span>,<span class="number">26</span>,<span class="number">29</span>,<span class="number">35</span>,<span class="number">40</span>,<span class="number">51</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> k = <span class="built_in">lower_bound</span>(arr, arr, len)- arr;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    å› ä¸ºå‡½æ•°è¿”å›çš„æ˜¯å…ƒç´ ä½ç½®ï¼Œé»˜è®¤æ˜¯æŒ‡é’ˆä½ç½®ï¼Œæ‰€ä»¥è¦å‡å»ç¬¬ä¸€ä¸ªä½ç½®ï¼Œå³arr(&amp;arr[0]</span></span><br><span class="line"><span class="comment">    æ‰èƒ½å¾—å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¿™æ˜¯æŒ‡é’ˆçš„å‡æ³•</span></span><br><span class="line"><span class="comment">    auto k = lower_bound(arr, arr + len,  21);  k=0x7ffc399f1ce4(åœ¨ä¸åŒç”µè„‘ä¸Šè¯¥å€¼ä¼šä¸åŒ)</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    cout &lt;&lt; k; <span class="comment">//è¾“å‡º5</span></span><br><span class="line">    <span class="comment">//æŠŠvalæ¢æˆ11æ—¶ï¼Œç¨‹åºç»“æœæ˜¯0</span></span><br><span class="line">    <span class="comment">//æŠŠvalæ¢æˆ12æ—¶ï¼Œç¨‹åºç»“æœæ˜¯0</span></span><br><span class="line">    <span class="comment">//æŠŠvalæ¢æˆ52æ—¶ï¼Œç¨‹åºç»“æœæ˜¯12</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ³¨æ„ï¼š<br>lower_bound()åœ¨firstå’Œlastä¸­çš„å‰é—­åå¼€åŒºé—´è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œè¿”å›å¤§äºæˆ–ç­‰äºvalçš„ç¬¬ä¸€ä¸ªå…ƒç´ ä½ç½®ã€‚å¦‚æœæ‰€æœ‰å…ƒç´ éƒ½å°äºvalï¼Œåˆ™è¿”å›lastçš„ä½ç½®ï¼Œä¸”lastçš„ä½ç½®æ˜¯è¶Šç•Œçš„<br><strong>lower_bound()æºç ä»¥åŠè¡¥å……:</strong><br><a href="http://zh.cppreference.com/w/cpp/algorithm/lower_bound">lower_bound - C++ Reference</a></p><h3 id="äºŒã€upper-bound-å‡½æ•°"><a href="#äºŒã€upper-bound-å‡½æ•°" class="headerlink" title="äºŒã€upper_bound()å‡½æ•°"></a>äºŒã€upper_bound()å‡½æ•°</h3><p><em>è¿”å›æŒ‡å‘èŒƒå›´ [first, last) ä¸­é¦–ä¸ªå¤§äº value çš„å…ƒç´ çš„è¿­ä»£å™¨ï¼Œæˆ–è‹¥æ‰¾ä¸åˆ°è¿™ç§å…ƒç´ åˆ™è¿”å› last ã€‚å‡½æ•°è¿”å›çš„æ˜¯è¿­ä»£å™¨ã€‚</em><br>å‡½æ•°åŠŸèƒ½ç®€å•å®ä¾‹ï¼š<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> len 12</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> val = <span class="number">21</span>;</span><br><span class="line">  <span class="keyword">int</span> arr[len]=&#123;<span class="number">12</span>,<span class="number">15</span>,<span class="number">17</span>,<span class="number">19</span>,<span class="number">20</span>,<span class="number">22</span>,<span class="number">23</span>,<span class="number">26</span>,<span class="number">29</span>,<span class="number">35</span>,<span class="number">40</span>,<span class="number">51</span>&#125;;</span><br><span class="line">  <span class="keyword">int</span> k = <span class="built_in">lower_bound</span>(arr, arr + len, <span class="number">21</span>)- arr;</span><br><span class="line">    cout &lt;&lt; k; <span class="comment">//è¾“å‡º5</span></span><br><span class="line">    <span class="comment">//æŠŠvalæ¢æˆ11æ—¶ï¼Œç¨‹åºç»“æœæ˜¯0</span></span><br><span class="line">    <span class="comment">//æŠŠvalæ¢æˆ12æ—¶ï¼Œç¨‹åºç»“æœæ˜¯1</span></span><br><span class="line">    <span class="comment">//æŠŠvalæ¢æˆ52æ—¶ï¼Œç¨‹åºç»“æœæ˜¯12</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ³¨æ„ï¼š<br>upper_bound()è‹¥æ‰¾ä¸åˆ°è¿™ç§å…ƒç´ åˆ™è¿”å› lastï¼Œæ­¤æ—¶lastçš„ä½ç½®çš„è¶Šç•Œçš„<br><strong>upper_bound()æºç ä»¥åŠè¡¥å……:</strong><br><a href="http://zh.cppreference.com/w/cpp/algorithm/upper_bound">upper_bound - C++ Reference</a></p><h3 id="ä¸‰ã€binary-search-å‡½æ•°"><a href="#ä¸‰ã€binary-search-å‡½æ•°" class="headerlink" title="ä¸‰ã€binary_search()å‡½æ•°"></a>ä¸‰ã€binary_search()å‡½æ•°</h3><p><em>æ£€æŸ¥ç­‰ä»·äº value çš„å…ƒç´ æ˜¯å¦å‡ºç°äºèŒƒå›´ [first, last) ä¸­ã€‚</em><br>å‡½æ•°æ¨¡ç‰ˆ:<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">int</span>  <span class="title">binary_search</span> <span class="params">(T arr[ ],  <span class="keyword">int</span> size,  T target)</span> </span>;</span><br><span class="line">T: æ¨¡ç‰ˆå‚æ•°</span><br><span class="line">arr:  æ•°ç»„é¦–åœ°å€</span><br><span class="line">size: æ•°ç»„å…ƒç´ ä¸ªæ•°</span><br><span class="line">T target: éœ€è¦æŸ¥æ‰¾çš„å€¼</span><br><span class="line">è‹¥æ‰¾åˆ°ç­‰äº value çš„å…ƒç´ åˆ™ä¸º <span class="literal">true</span> ï¼Œå¦åˆ™ä¸º <span class="literal">false</span> ã€‚</span><br></pre></td></tr></table></figure><br>å‡½æ•°åŠŸèƒ½ç®€å•å®ä¾‹ï¼š<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> len 12</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> val = <span class="number">51</span>;</span><br><span class="line">  <span class="keyword">int</span> arr[len]=&#123;<span class="number">12</span>,<span class="number">15</span>,<span class="number">17</span>,<span class="number">19</span>,<span class="number">20</span>,<span class="number">22</span>,<span class="number">23</span>,<span class="number">26</span>,<span class="number">29</span>,<span class="number">35</span>,<span class="number">40</span>,<span class="number">51</span>&#125;;</span><br><span class="line">  <span class="keyword">if</span>( <span class="built_in">binary_search</span>(arr, arr + len, val) )</span><br><span class="line">    cout &lt;&lt; val &lt;&lt; <span class="string">&quot; exits in arr&quot;</span>;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    cout &lt;&lt; val &lt;&lt; <span class="string">&quot; does not exist&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">è¾“å‡ºï¼š<span class="number">51</span> exits in arr</span><br></pre></td></tr></table></figure><br>æ³¨æ„ï¼š<br>binary_searchè¯•å›¾åœ¨å·²æ’åºçš„[first,last)ä¸­å¯»æ‰¾å…ƒç´ valueï¼Œè‹¥å­˜åœ¨å°±è¿”å›trueï¼Œè‹¥ä¸å­˜åœ¨åˆ™è¿”å›falseã€‚è¿”å›å•çº¯çš„å¸ƒå°”å€¼ä¹Ÿè®¸ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œè€Œlower_boundã€upper_boundèƒ½æä¾›é¢å¤–çš„ä¿¡æ¯ã€‚äº‹å®ä¸Šç”±æºç å¯çŸ¥binary_searchä¾¿æ˜¯åˆ©ç”¨lower_boundæ±‚å‡ºå…ƒç´ åº”è¯¥å‡ºç°çš„ä½ç½®ï¼Œç„¶åå†æ¯”è¾ƒè¯¥ä½ç½®çš„å€¼ä¸valueçš„å€¼ã€‚<br><strong>binary_search()æºç ä»¥åŠè¡¥å……:</strong><br><a href="http://zh.cppreference.com/w/cpp/algorithm/binary_search">binary_search() - C++ Reference</a></p><h3 id="å››ã€equal-range-å‡½æ•°"><a href="#å››ã€equal-range-å‡½æ•°" class="headerlink" title="å››ã€equal_range()å‡½æ•°"></a>å››ã€equal_range()å‡½æ•°</h3><p><em>qual_rangeæ˜¯C++ STLä¸­çš„ä¸€ç§äºŒåˆ†æŸ¥æ‰¾çš„ç®—æ³•ï¼Œè¯•å›¾åœ¨å·²æ’åºçš„[first,last)ä¸­å¯»æ‰¾valueï¼Œå®ƒè¿”å›ä¸€å¯¹è¿­ä»£å™¨iå’Œjï¼Œå…¶ä¸­iæ˜¯åœ¨ä¸ç ´åæ¬¡åºçš„å‰æä¸‹ï¼Œvalueå¯æ’å…¥çš„ç¬¬ä¸€ä¸ªä½ç½®ï¼ˆäº¦å³lower_boundï¼‰ï¼Œjåˆ™æ˜¯åœ¨ä¸ç ´åæ¬¡åºçš„å‰æä¸‹ï¼Œvalueå¯æ’å…¥çš„æœ€åä¸€ä¸ªä½ç½®ï¼ˆäº¦å³upper_boundï¼‰ï¼Œå› æ­¤ï¼Œ[i,j)å†…çš„æ¯ä¸ªå…ƒç´ éƒ½ç­‰åŒäºvalueï¼Œè€Œä¸”[i,j)æ˜¯[first,last)ä¹‹ä¸­ç¬¦åˆæ­¤ä¸€æ€§è´¨çš„æœ€å¤§å­åŒºé—´</em><br>å‡½æ•°åŠŸèƒ½ç®€å•å®ä¾‹ï¼š<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    vector&lt;<span class="keyword">int</span>&gt; v = &#123; <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="number">70</span>, <span class="number">70</span>, <span class="number">80</span>, <span class="number">100</span>,</span><br><span class="line">                      <span class="number">300</span>, <span class="number">300</span>&#125;;</span><br><span class="line"></span><br><span class="line">    pair&lt;std::vector&lt;<span class="keyword">int</span>&gt;::iterator,</span><br><span class="line">              std::vector&lt;<span class="keyword">int</span>&gt;::iterator&gt; ip;</span><br><span class="line"></span><br><span class="line">    ip = <span class="built_in">equal_range</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">begin</span>() + <span class="number">12</span>, <span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;30 is present in the sorted vector from index &quot;</span></span><br><span class="line">         &lt;&lt; (ip.first - v.<span class="built_in">begin</span>()) &lt;&lt; <span class="string">&quot; till &quot;</span></span><br><span class="line">         &lt;&lt; (ip.second - v.<span class="built_in">begin</span>());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">ç¨‹åºè¾“å‡ºï¼š<span class="number">30</span> is present in the sorted vector from index <span class="number">3</span> till <span class="number">6</span></span><br></pre></td></tr></table></figure><br>æ³¨æ„ï¼š</p><ol><li>å°±æ˜¯30è¿ç»­å‡ºç°çš„åŒºé—´æ˜¯[3,6]ï¼ˆæ³¨æ„å®¹å™¨å¾—æ˜¯æœ‰åºçš„ï¼‰ã€‚</li><li>std::pairä¸»è¦çš„ä½œç”¨æ˜¯å°†ä¸¤ä¸ªæ•°æ®ç»„åˆæˆä¸€ä¸ªæ•°æ®ï¼Œä¸¤ä¸ªæ•°æ®å¯ä»¥æ˜¯åŒä¸€ç±»å‹æˆ–è€…ä¸åŒç±»å‹<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">std::pairå®šä¹‰äºå¤´æ–‡ä»¶&lt;utility&gt;</span><br><span class="line"><span class="keyword">template</span>&lt;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">T1</span>,</span></span><br><span class="line"><span class="class">    <span class="keyword">class</span> <span class="title">T2</span></span></span><br><span class="line"><span class="class">&gt;</span> <span class="class"><span class="keyword">struct</span> <span class="title">pair</span>;</span></span><br></pre></td></tr></table></figure>é‚£ä¹ˆï¼Œequal_range()æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå¦‚æœæˆ‘ä»¬æƒ³åŒæ—¶ä½¿ç”¨std :: lower_boundå’Œstd :: upper_boundï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªå‡½æ•°ã€‚<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    vector&lt;<span class="keyword">int</span>&gt; v = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span> &#125;;</span><br><span class="line"></span><br><span class="line">    pair&lt;vector&lt;<span class="keyword">int</span>&gt;::iterator,</span><br><span class="line">              vector&lt;<span class="keyword">int</span>&gt;::iterator&gt; ip;</span><br><span class="line"></span><br><span class="line">    ip = <span class="built_in">equal_range</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; ip.first - v.<span class="built_in">begin</span>() &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; ip.second - v.<span class="built_in">begin</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    vector&lt;<span class="keyword">int</span>&gt;::iterator i1, i2;</span><br><span class="line"></span><br><span class="line">    i1 = <span class="built_in">lower_bound</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">5</span>);</span><br><span class="line">    cout &lt;&lt; i1 - v.<span class="built_in">begin</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    i2 = <span class="built_in">upper_bound</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">5</span>);</span><br><span class="line">    cout &lt;&lt; i2 - v.<span class="built_in">begin</span>() &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">ç¨‹åºè¾“å‡ºï¼š</span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">6</span></span><br></pre></td></tr></table></figure>å°¾è¨€ï¼š<br>å…³è”å¼å®¹å™¨(set, multiset, map, multimap)åˆ†åˆ«æä¾›äº†ç­‰æ•ˆçš„æˆå‘˜å‡½æ•°ï¼Œæ€§èƒ½æ›´ä½³<h3 id="äº”ã€ä¸¤é“ä¹ é¢˜ï¼š"><a href="#äº”ã€ä¸¤é“ä¹ é¢˜ï¼š" class="headerlink" title="äº”ã€ä¸¤é“ä¹ é¢˜ï¼š"></a>äº”ã€ä¸¤é“ä¹ é¢˜ï¼š</h3></li><li><h5 id="çŒœæ•°å­—æ¸¸æˆ"><a href="#çŒœæ•°å­—æ¸¸æˆ" class="headerlink" title="çŒœæ•°å­—æ¸¸æˆ"></a>çŒœæ•°å­—æ¸¸æˆ</h5><strong>é¢˜ç›®æè¿°</strong></li></ol><p>æœ‰ä¸€ä¸ªç”±nä¸ªæ•°å­—ç»„æˆçš„æ•°åˆ—aï¼Œä¸”åä¸€ä¸ªæ•°å­—ä¸¥æ ¼å¤§äºå‰ä¸€ä¸ª(a[i+1]&gt;a[i])<br>å°æºœè¿›è¡ŒQæ¬¡çŒœæ•°ï¼Œæ¯æ¬¡ä»–éƒ½çŒœä¸€ä¸ªxï¼Œè‹¥è¿™ä¸ªxåœ¨æ•°åˆ—é‡Œé¢ï¼Œå°æºœçš„å¾—åˆ†åŠ ä¸Šè¿™ä¸ªåˆ†æ•°çš„å¤§å°ï¼Œè¢«çŒœä¸­çš„æ•°ä¸ä¼šä»æ•°åˆ—æ¶ˆå¤±ã€‚<br>å¦‚ï¼šæ•°åˆ—1 2 3 4 5 6ï¼Œå°æºœçŒœ5æ¬¡ï¼Œåˆ†åˆ«æ˜¯1 1 3 5 7 é‚£å°æºœçš„å¾—åˆ†ä¸º1+1+3+5=10<br>ç°åœ¨è¯·ä½ è®¡ç®—å‡ºå°æºœçš„å¾—åˆ†ã€‚</p><p><strong>è¾“å…¥</strong></p><p>ç¬¬ä¸€è¡Œè¾“å…¥ä¸€ä¸ªTï¼ˆ0 &lt; T &lt;= 100)<br>æ¥ä¸‹æ¥Tç»„æµ‹è¯•æ•°æ®<br>æ¯ç»„ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•°nï¼Œq(1 &lt;= n, q &lt;= 1000000)<br>æ¥ä¸‹æ¥ä¸€è¡Œnä¸ªæ•°a1ï¼Œa2â€¦an(1 &lt;= a[i] &lt;= 10^9)<br>å†æ¥ä¸‹æ¥ä¸€è¡Œqä¸ªæ•°b1ï¼Œb2â€¦bq(1 &lt;= b[i] &lt;= 10^9)è¡¨ç¤ºçŒœçš„æ•°å­—</p><p><strong>è¾“å‡º</strong></p><p>è¾“å‡ºæ€»åˆ†</p><p><strong>ä¾‹å¦‚ï¼š</strong></p><p>è¾“å…¥ï¼š<br>1<br>6 5<br>1 2 3 4 5 6<br>1 1 3 5 7<br>è¾“å‡ºï¼š<br>10</p><p>ä»£ç ï¼š<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> len = <span class="number">1000005</span>;</span><br><span class="line"><span class="keyword">int</span> p[len], q[len];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> t, n, m;</span><br><span class="line">  ll sum = <span class="number">0</span>;</span><br><span class="line">  <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;t);</span><br><span class="line">  <span class="keyword">while</span>(t--)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">memset</span>(p, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(p));</span><br><span class="line">    <span class="built_in">memset</span>(q, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(q));</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(ll i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;p[i]);</span><br><span class="line">    <span class="keyword">for</span>(ll j = <span class="number">1</span>; j &lt;= m; j++)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;q[j]);</span><br><span class="line">      <span class="keyword">if</span>(q[j] == p[<span class="built_in">upper_bound</span>(p+<span class="number">1</span>, p+n+<span class="number">1</span>, q[j]) - (p + <span class="number">1</span>)])</span><br><span class="line">      sum+=q[j];</span><br><span class="line">    &#125;</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, sum);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><ol><li><h5 id="è¯¢é—®"><a href="#è¯¢é—®" class="headerlink" title="è¯¢é—®"></a>è¯¢é—®</h5><strong>é¢˜ç›®æè¿°</strong></li></ol><p>æ¯æ¬¡ç»™å‡ºä¸€ä¸ªæ•´æ•°xï¼Œå…±ç»™å‡ºmä¸ªï¼Œéœ€è¦æ‰¾å‡ºæ¯ä¸ªæ•´æ•°åœ¨æ•°åˆ—cä¸­å‡ºç°çš„æ¬¡æ•°ã€‚</p><p><strong>è¾“å…¥</strong></p><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°nï¼Œmã€‚nè¡¨ç¤ºæ•°åˆ—cé•¿åº¦ï¼Œmè¡¨ç¤ºå…±ç»™å‡ºmä¸ªæ•°(1 &lt;= n, m &lt;= 100000)<br>ç¬¬äºŒè¡Œä¸ºnä¸ªç©ºæ ¼éš”å¼€çš„æ•´æ•°ciï¼Œcè¡¨ç¤ºæ•°åˆ—ã€‚(-10^9 &lt;= ci &lt;= 10^9)<br>ç¬¬ä¸‰è¡Œåˆ°m+2è¡Œï¼Œæ¯è¡Œä¸€ä¸ªæ•´æ•°xï¼Œè¡¨ç¤ºç»™å‡ºçš„æ•´æ•°xã€‚ï¼ˆ-10^9 &lt;= x &lt;= 10^9)</p><p><strong>è¾“å‡º</strong></p><p>å…±mè¡Œï¼Œæ¯è¡Œä¸€ä¸ªæ•´æ•°yï¼Œè¡¨ç¤ºæ•´æ•°xåœ¨æ•°åˆ—cé‡Œé¢å‡ºç°çš„æ¬¡æ•°</p><p><strong>ä¾‹å¦‚:</strong></p><p>è¾“å…¥ï¼š<br>5 3<br>9 6 3 3 2<br>1<br>3<br>9<br>è¾“å‡ºï¼š<br>0<br>2<br>1</p><p>ä»£ç ï¼š<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, m, a[<span class="number">100005</span>], q;</span><br><span class="line">    <span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m))</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">      <span class="built_in">sort</span>(a+<span class="number">1</span>, a+n+<span class="number">1</span>);</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; j++)</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;q);</span><br><span class="line">        <span class="keyword">int</span> k = <span class="built_in">upper_bound</span>(a+<span class="number">1</span>, a+n+<span class="number">1</span>, q) - <span class="built_in">lower_bound</span>(a+<span class="number">1</span>, a+n+<span class="number">1</span>, q);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,k);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> STL </tag>
            
            <tag> äºŒåˆ† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>c++æ„é€ å‡½æ•°å¦ä¸€ç§åˆå§‹å€¼å†™æ³•</title>
      <link href="/2018/02/07/c++%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E5%8F%A6%E4%B8%80%E7%A7%8D%E6%A0%87%E5%87%86%E5%8C%96%E5%88%9D%E5%A7%8B%E5%80%BC%E5%86%99%E6%B3%95/"/>
      <url>/2018/02/07/c++%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E5%8F%A6%E4%B8%80%E7%A7%8D%E6%A0%87%E5%87%86%E5%8C%96%E5%88%9D%E5%A7%8B%E5%80%BC%E5%86%99%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>å¾ˆå¤šäººå¯èƒ½æ²¡æœ‰æ³¨æ„åˆ°ï¼Œéƒ½å†™æˆç¬¬ä¸€ç§åŠæ³•çš„æ ·å­ï¼Œå¦‚æœæœ‰äººé—®æˆ‘ç¬¬ä¸€ç§åŠæ³•å¯ä»¥å—ï¼Ÿå½“ç„¶å¯ä»¥ï¼Œä½†æ˜¯æ•ˆç‡æ¯”è¾ƒå·®ä¸€äº›ï¼Œä¸å¤Ÿâ€œå¤§æ°”â€ã€‚<br><span id="more"></span><br>(c++æ„é€ å‡½æ•°çš„æ¦‚å¿µä»¥åŠä½œç”¨æœ¬æ–‡ä¸ç®€è¿°ï¼Œå…·ä½“çš„æ¦‚å¿µåŠä½œç”¨å¯ä»¥è‡ªè¡Œç™¾åº¦ï¼Œè¯·è°…è§£)<br>å…ˆæ”¾å‡ºä¸€æ®µç±»çš„å®šä¹‰:<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">complex</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="comment">//éœ€è¦é‡ç‚¹è®¨è®ºçš„æ„é€ å‡½æ•°</span></span><br><span class="line">  <span class="built_in">complex</span> (<span class="keyword">double</span>  r= <span class="number">0</span>, <span class="keyword">double</span> i = <span class="number">0</span>)</span><br><span class="line">  &#123; re = r; im = i; &#125;</span><br><span class="line">  complex&amp; <span class="keyword">operator</span> += (<span class="keyword">const</span> <span class="keyword">compl</span>&amp;);</span><br><span class="line">  <span class="function"><span class="keyword">double</span> <span class="title">real</span> <span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> re; &#125;</span><br><span class="line">  <span class="function"><span class="keyword">double</span> <span class="title">imag</span> <span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> im; &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  <span class="keyword">double</span> re, im;</span><br><span class="line">  <span class="keyword">friend</span> complex&amp; _doapl (complex*, <span class="keyword">const</span> complex&amp;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>ç„¶åæˆ‘ä»¬é‡ç‚¹åœ¨ä»¥ä¸‹çš„æ„é€ å‡½æ•°<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">complex</span> (<span class="keyword">double</span>  r= <span class="number">0</span>, <span class="keyword">double</span> i = <span class="number">0</span>)</span><br><span class="line">&#123; re = r; im = i; &#125;</span><br></pre></td></tr></table></figure><br>  å¯ä»¥çœ‹å‡ºè¯¥æ„é€ å‡½æ•°åˆå§‹åŒ–äº†reå’Œimçš„å€¼ï¼Œè¿™æ˜¯ä¸€ç§åˆå§‹åŒ–åŠæ³•ï¼Œç„¶åæˆ‘ä»¬è¿˜æœ‰å¦ä¸€ç§æ¯”è¾ƒâ€œå¤§æ°”â€çš„åŠæ³•ï¼š<br>  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">complex</span> (<span class="keyword">double</span>  r= <span class="number">0</span>, <span class="keyword">double</span> i = <span class="number">0</span>)</span><br><span class="line">: <span class="built_in">re</span> (r), <span class="built_in">im</span> (i) <span class="comment">//åˆå§‹åŒ–åˆ—ï¼Œå†’å·åé¢çš„å°±æ˜¯åˆå§‹åŒ–åˆ—è¡¨</span></span><br><span class="line">&#123; &#125;</span><br></pre></td></tr></table></figure><br>ä¸¤è€…åŠæ³•å®ç°çš„æ•ˆæœéƒ½ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ç”¨råˆå§‹åŒ–reï¼Œç”¨iåˆå§‹åŒ–imï¼Œä½†æ˜¯ä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p><ol><li>ç¬¬äºŒç§åŠæ³•åˆ©ç”¨äº†æ„é€ å‡½æ•°å¾ˆç‰¹åˆ«çš„è¯­æ³•ï¼ˆåªæœ‰æ„é€ å‡½æ•°æ‰æœ‰ï¼‰ï¼Œå°±æ˜¯ç¬¬äºŒè¡Œåˆå§‹åŒ–reï¼Œimå€¼çš„åŠæ³•</li><li>ç¬¬äºŒç§åŠæ³•æ•ˆç‡æ›´é«˜<br>å› ä¸ºå¯¹äºä¸€ä¸ªå¯¹è±¡ï¼Œå…¶æ•°å€¼çš„è®¾å®šæœ‰ä¸¤ä¸ªé˜¶æ®µï¼šä¸€ä¸ªæ˜¯åˆå§‹åŒ–ï¼Œä¸€ä¸ªæ˜¯åé¢çš„èµ‹å€¼æ“ä½œï¼Œè€Œåˆå§‹åŒ–åˆ—è¡¨å°±æ˜¯åœ¨åˆå§‹é˜¶æ®µã€‚ç¬¬äºŒç§åŠæ³•åœ¨åˆå§‹åŒ–åˆ—å·²ç»å®Œæˆäº†ä¸¤ç§æ“ä½œï¼Œè™½ç„¶ç¬¬ä¸€ç§åŠæ³•åœ¨å¤§æ‹¬å·é‡Œé¢ä¹Ÿå®Œæˆäº†è¿™ä¸¤ç§æ“ä½œï¼Œä½†æ˜¯ç»“æœç›¸åŒè¿‡ç¨‹ä¸åŒï¼Œç¬¬äºŒç§åŠæ³•å¿«ä¸€ç‚¹ã€‚</li></ol><p>é‚£ä¹ˆä¸¤è€…è¯¥å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿä¸‹é¢å¼•ç”¨ä¾¯æ·è€å¸ˆï¼ˆSTLæºç å‰–æä½œè€…ï¼‰çš„è¯ï¼š</p><blockquote><p>å¾ˆå¤šäººå¯èƒ½æ²¡æœ‰æ³¨æ„åˆ°ï¼Œéƒ½å†™æˆç¬¬ä¸€ç§åŠæ³•çš„æ ·å­ï¼Œå¦‚æœæœ‰äººé—®æˆ‘ç¬¬ä¸€ç§åŠæ³•å¯ä»¥å—ï¼Ÿå½“ç„¶å¯ä»¥ï¼Œä½†æ˜¯æ•ˆç‡æ¯”è¾ƒå·®ä¸€äº›ï¼Œä¸å¤Ÿâ€œå¤§æ°”â€ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ç±» </tag>
            
            <tag> æ„é€ å‡½æ•° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äº¤æ¢å­—ç¬¦ä¸²</title>
      <link href="/2018/01/28/%E4%BA%A4%E6%8D%A2%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
      <url>/2018/01/28/%E4%BA%A4%E6%8D%A2%E5%AD%97%E7%AC%A6%E4%B8%B2/</url>
      
        <content type="html"><![CDATA[<p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²S[0â€¦N-1]ï¼Œè¦æ±‚æŠŠSçš„å‰Kä¸ªå­—ç¬¦ç§»åŠ¨åˆ°Sçš„å°¾éƒ¨ï¼Œä¸‰ç§åŠæ³•ã€‚<br><span id="more"></span></p><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²S[0â€¦N-1]ï¼Œè¦æ±‚æŠŠSçš„å‰Kä¸ªå­—ç¬¦ç§»åŠ¨åˆ°Sçš„å°¾éƒ¨<br>å¦‚æŠŠâ€<strong>abcdef</strong>â€œå…¶å‰é¢çš„2ä¸ªå­—ç¬¦â€<strong>ab</strong>â€œç§»åŠ¨åˆ°å­—ç¬¦ä¸²çš„å°¾éƒ¨ï¼Œå¾—æ–°å­—ç¬¦ä¸²â€<strong>cdefab</strong>â€œï¼Œå³å­—ç¬¦ä¸²å¾ªç¯å·¦ç§»Kã€‚<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æ³¨æ„ï¼š</span><br><span class="line">1. å¾ªç¯å·¦ç§»Kä½ç­‰ä»·äºå¾ªç¯å³ç§»N-Kä½(å¯ä»¥è‡ªå·±ä¸¾ä¸ªä¾‹å­ç†è§£ï¼Œæ¯”å¦‚K=2ï¼ŒN=5)</span><br><span class="line">2. æ—¶é—´å¤æ‚åº¦è¦æ±‚ä¸º0(n),ç©ºé—´å¤æ‚åº¦ä½0(l)</span><br></pre></td></tr></table></figure></p><h2 id="åŠæ³•ï¼š"><a href="#åŠæ³•ï¼š" class="headerlink" title="åŠæ³•ï¼š"></a>åŠæ³•ï¼š</h2><ol><li><h4 id="æš´åŠ›æ³•ï¼š"><a href="#æš´åŠ›æ³•ï¼š" class="headerlink" title="æš´åŠ›æ³•ï¼š"></a>æš´åŠ›æ³•ï¼š</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ¯æ¬¡å¾ªç¯å·¦ç§»1ä½ï¼Œè°ƒç”¨Kæ¬¡å³å¯</span><br><span class="line">- æ—¶é—´å¤æ‚åº¦:O(KN),ç©ºé—´å¤æ‚åº¦0(l)</span><br></pre></td></tr></table></figure></li><li><h4 id="æ‹·è´æ³•ï¼š"><a href="#æ‹·è´æ³•ï¼š" class="headerlink" title="æ‹·è´æ³•ï¼š"></a>æ‹·è´æ³•ï¼š</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">S[0...K]-&gt;T[0...K]</span><br><span class="line">S[K+1...N-1]-&gt;S[0...N-K-1]</span><br><span class="line">T[0...K]-&gt;S[N-K...N-1]</span><br><span class="line">- æ—¶é—´å¤æ‚åº¦0(N),ç©ºé—´å¤æ‚åº¦0(K)</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºï¼Œä¸Šé¢ä¸¤ç§åŠæ³•éƒ½æ²¡æœ‰åŠæ³•åŒæ—¶ç¬¦åˆæ¡ä»¶ï¼Œä¸‹é¢ç»™å‡ºä¸€ç§æ¯”è¾ƒçµæ€§çš„è§£æ³•ã€‚</p><ol><li><h4 id="å€’è½¬æ³•ï¼š"><a href="#å€’è½¬æ³•ï¼š" class="headerlink" title="å€’è½¬æ³•ï¼š"></a>å€’è½¬æ³•ï¼š</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> åŸç†ï¼šï¼ˆXâ€˜Yâ€™ï¼‰â€˜=YX</span><br><span class="line"> ä¸¾ä¸ªæ —å­:</span><br><span class="line"> å­—ç¬¦ä¸²:abcdef</span><br><span class="line"> X=ab  X&#x27;=ba</span><br><span class="line"> Y=cdef  Y&#x27;=fedc</span><br><span class="line">ï¼ˆXâ€˜Yâ€™ï¼‰â€˜=(bafedc)&#x27;=cdefab</span><br><span class="line">- æ—¶é—´å¤æ‚åº¦:0(N),ç©ºé—´å¤æ‚åº¦0(l)</span><br></pre></td></tr></table></figure><h4 id="ä»£ç ï¼š"><a href="#ä»£ç ï¼š" class="headerlink" title="ä»£ç ï¼š"></a>ä»£ç ï¼š</h4>å‰é¢é‚£ä¸¤ä¸ªä»£ç å°±ä¸è´´å‡ºæ¥ï¼Œä¸»è¦è´´ç¬¬ä¸‰ä¸ªåŠæ³•çš„<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å­—ç¬¦ä¸²åè½¬å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">reverse</span><span class="params">(<span class="keyword">char</span> *s,<span class="keyword">int</span> start,<span class="keyword">int</span> end)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">char</span> t;</span><br><span class="line">        <span class="keyword">while</span>(start&lt;end)</span><br><span class="line">        &#123;</span><br><span class="line">        t=s[start];</span><br><span class="line">        s[start++]=s[end];</span><br><span class="line">        s[end--]=t;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//å°†å­—ç¬¦ä¸²å‰é¢ä¸¤ä½ç§»åˆ°æœ«å°¾</span></span><br><span class="line">        <span class="keyword">char</span> arr[]=<span class="string">&quot;abcdef&quot;</span>;</span><br><span class="line">        <span class="built_in">reverse</span>(arr,<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">        <span class="built_in">reverse</span>(arr,<span class="number">2</span>,<span class="number">5</span>);</span><br><span class="line">        <span class="built_in">reverse</span>(arr,<span class="number">0</span>,<span class="number">5</span>);</span><br><span class="line">        cout &lt;&lt; arr;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­—ç¬¦ä¸² </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
