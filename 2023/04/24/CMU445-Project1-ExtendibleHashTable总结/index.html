<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>CMU445-Project1-ExtendibleHashTable总结 | GreenHatHGのBlog</title><meta name="author" content="GreenHatHg"><meta name="copyright" content="GreenHatHg"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="..."><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "CMU445-Project1-ExtendibleHashTable总结",
  "url": "https://greenhathg.github.io/2023/04/24/CMU445-Project1-ExtendibleHashTable%E6%80%BB%E7%BB%93/",
  "image": "https://images.unsplash.com/photo-1621761836815-6e43911fbcfc?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1171&q=80",
  "datePublished": "2023-04-24T14:10:43.000Z",
  "dateModified": "2025-06-15T14:30:35.517Z",
  "author": [
    {
      "@type": "Person",
      "name": "GreenHatHg",
      "url": "https://greenhathg.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="https://avatars0.githubusercontent.com/u/34258355?s=460&u=eb0a1ce09dd045532464cb42f020e8ba1d025b6c&v=4"><link rel="canonical" href="https://greenhathg.github.io/2023/04/24/CMU445-Project1-ExtendibleHashTable%E6%80%BB%E7%BB%93/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="&lt;meta name=&quot;google-site-verification&quot; content=&quot;eCt7WHUdmok7J0DG_5L1LtGFqZ_0DeC0ndMY3tBY_rQ&quot; /&gt;"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-116672888-1"></script><script>window.dataLayer = window.dataLayer || []
function gtag(){dataLayer.push(arguments)}
gtag('js', new Date())
gtag('config', 'UA-116672888-1')
btf.addGlobalFn('pjaxComplete', () => {
  gtag('config', 'UA-116672888-1', {'page_path': window.location.pathname})
}, 'google_analytics')
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: {"chs_to_cht":"已切换为繁体中文","cht_to_chs":"已切换为简体中文","day_to_night":"已切换为深色模式","night_to_day":"已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'CMU445-Project1-ExtendibleHashTable总结',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://avatars0.githubusercontent.com/u/34258355?s=460&amp;u=eb0a1ce09dd045532464cb42f020e8ba1d025b6c&amp;v=4" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">205</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">241</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-compass"></i><span> 目录</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/mood/"><i class="fa-fw fas fa-glass-cheers"></i><span> 自言自语</span></a></div><div class="menus_item"><a class="site-page" href="/message/"><i class="fa-fw fas fa-comment-dots"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://images.unsplash.com/photo-1621761836815-6e43911fbcfc?ixlib=rb-1.2.1&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1171&amp;q=80);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">GreenHatHGのBlog</span></a><a class="nav-page-title" href="/"><span class="site-name">CMU445-Project1-ExtendibleHashTable总结</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-compass"></i><span> 目录</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/mood/"><i class="fa-fw fas fa-glass-cheers"></i><span> 自言自语</span></a></div><div class="menus_item"><a class="site-page" href="/message/"><i class="fa-fw fas fa-comment-dots"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">CMU445-Project1-ExtendibleHashTable总结</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-04-24T14:10:43.000Z" title="发表于 2023-04-24 14:10:43">2023-04-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-06-15T14:30:35.517Z" title="更新于 2025-06-15 14:30:35">2025-06-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BC%96%E7%A8%8B/">编程</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">5.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>33分钟</span></span><span class="post-meta-separator">|</span><span id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="twikoo_visitors"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2023/04/24/CMU445-Project1-ExtendibleHashTable%E6%80%BB%E7%BB%93/#post-comment"><span id="twikoo-count"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:500,&quot;messagePrev&quot;:&quot;已超过&quot;,&quot;messageNext&quot;:&quot;天未更新，某些文章具有时效性，若有错误或已失效，请反馈到greenhat2333@gamil.com&quot;,&quot;postUpdate&quot;:&quot;2025-06-15 14:30:35&quot;}" hidden></div><p>前提：搞懂<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.geeksforgeeks.org/extendible-hashing-dynamic-approach-to-dbms/">https://www.geeksforgeeks.org/extendible-hashing-dynamic-approach-to-dbms/</a></p>
<h1 id="Why"><a href="#Why" class="headerlink" title="Why"></a>Why</h1><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://15445.courses.cs.cmu.edu/fall2022/project1/">https://15445.courses.cs.cmu.edu/fall2022/project1/</a></p>
<p>待补充，可看原论文<br>设计要点：</p>
<ol>
<li>Page Fault</li>
<li>Access Memory/Disk</li>
<li>Dynamic File Organization</li>
<li>Balance Radix Search Tree</li>
<li>Static &amp; Dynamic Hash</li>
</ol>
<h1 id="Concepts"><a href="#Concepts" class="headerlink" title="Concepts"></a>Concepts</h1><ol>
<li>$h$: fixed hash function</li>
<li>$K$: is a key</li>
<li>$K’$: $h(K)$, also $pseudokey$. <ul>
<li>We choose pseudokeys to be of fixed length, such as 32 bits. </li>
<li>The pseudokeys are of fixed length, the keys need not be.</li>
</ul>
</li>
<li>$I(K)$: is associated information: either the record associated with $K$, or a pointer to the record. </li>
</ol>
<h1 id="Struct"><a href="#Struct" class="headerlink" title="Struct"></a>Struct</h1><p>基本结构如下：</p>
<p><img src="/2023/04/24/CMU445-Project1-ExtendibleHashTable%E6%80%BB%E7%BB%93/1.png" alt></p>
<ol>
<li><strong>Two levels</strong>: $directory$ and $leaves$<ul>
<li>The leaves contain pairs$(K, I(K))$</li>
<li>The directory contains pointers to leaf pages</li>
</ul>
</li>
<li><strong>Depth d</strong>: the depth $d$ of the directory. </li>
<li><p><strong>Directory pointers</strong>:</p>
<ul>
<li>First, There is a pointer to a leaf that stores all keys $K$ for which the pseudokey $K’ = h(K)$ starts with $d$ consecutive zeros.<br>directory第一个指针指向的leaf中所有的$K$有下面的特征：$K’$前$d$位都是0</li>
<li>第二个指针指向的leaf中所有的$k’$前$d$位是<code>0...01</code>，第三个是<code>0...010</code>，后面以此类推。</li>
<li>所以directory总共$2^d$个pointer</li>
</ul>
</li>
<li><p><strong>Find $K$</strong>: </p>
<ul>
<li>计算出$K’$,  找出其前$d$位.</li>
<li>找到这$d$位对应的是directory哪个pointer</li>
<li>然后可以找到leaf，在leaf中遍历pairs</li>
</ul>
</li>
<li><p><strong>Leaf header</strong>:</p>
<ul>
<li>Each leaf page has a header that contains a local depth $d’$ for the leaf page. </li>
<li>举例directory中 <code>000</code> pointer指向的leaf: Local depth 2 means that not only does this leaf page contain all keys whose pseudokey begins with 000, but even more, it containsall keys whose pseudokey begins with the 2 bits 00. Thus the 001 pointer also points to this leaf page.</li>
<li>$d’ &lt;= d$</li>
</ul>
</li>
</ol>
<h1 id="Insert"><a href="#Insert" class="headerlink" title="Insert"></a>Insert</h1><p>这里以lab的要求为准：</p>
<ul>
<li>在编程中计算后$d$位比较方便，和上面看前$d$位有所区别，但是原理相同</li>
<li>leaf在lab中称为Bucket</li>
</ul>
<h2 id="Structure"><a href="#Structure" class="headerlink" title="Structure"></a>Structure</h2><p>lab中extendible hash table结构如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> global_depth_;    <span class="comment">// The global depth of the directory</span></span><br><span class="line"><span class="type">size_t</span> bucket_size_;  <span class="comment">// The size of a bucket</span></span><br><span class="line"><span class="type">int</span> num_buckets_;     <span class="comment">// The number of buckets in the hash table</span></span><br><span class="line">std::vector&lt;std::shared_ptr&lt;Bucket&gt;&gt; dir_;  <span class="comment">// The directory of the hash table</span></span><br></pre></td></tr></table></figure>
<p>Bucket结构：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> K, <span class="keyword">typename</span> V&gt;</span><br><span class="line"><span class="type">size_t</span> size_;</span><br><span class="line"><span class="type">int</span> depth_;</span><br><span class="line">std::list&lt;std::pair&lt;K, V&gt;&gt; list_;</span><br></pre></td></tr></table></figure>
<p>所以<code>dir_</code>里面保存了directory pointer，<code>bucket_size_</code>代表每个bucket最大容量是多少，<code>Bucket</code>中的<code>list_</code>保存了上述讲的pairs</p>
<h2 id="Init"><a href="#Init" class="headerlink" title="Init"></a>Init</h2><p>初始情况下global_depth为0，总共有$2^0=1$个bucket，所以num_buckets=1，bucket_size每个用例都是不一样的，每个bucket里面都还是空的。</p>
<h2 id="Indexof"><a href="#Indexof" class="headerlink" title="Indexof"></a>Indexof</h2><p>For the given key, return the entry index in the directory where the key hashes to.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> K, <span class="keyword">typename</span> V&gt;</span><br><span class="line"><span class="keyword">auto</span> ExtendibleHashTable&lt;K, V&gt;::<span class="built_in">IndexOf</span>(<span class="type">const</span> K &amp;key) -&gt; <span class="type">size_t</span> &#123;</span><br><span class="line">  <span class="type">int</span> mask = (<span class="number">1</span> &lt;&lt; global_depth_) - <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> std::<span class="built_in">hash</span>&lt;K&gt;()(key) &amp; mask;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>mask<ul>
<li>对1左移global_depth位，即在1的二进制后面加global_depth个0，然后-1</li>
<li>比如<code>(1&lt;&lt;4)-1</code>: 1&lt;&lt;4 可以写成二进制形式 10000，然后再减去 1，为 1111。</li>
<li>所以这mask为global_depth个1</li>
</ul>
</li>
<li><code>std::hash&lt;K&gt;()(key) &amp; mask</code><ul>
<li>这里取&amp;为的是将index控制在一定数量的位数上，该位数由global<em>depth</em>变量确定，也就是index不能超过$2^d$，比如global_depth=2，有4个bucket，index最大为3，3的二进制是11，正好是global_depth个1</li>
<li>这里意思也就是看后global depth位</li>
</ul>
</li>
</ul>
<h2 id="Case1"><a href="#Case1" class="headerlink" title="Case1"></a>Case1</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> table = std::make_unique&lt;ExtendibleHashTable&lt;<span class="type">int</span>, std::string&gt;&gt;(<span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<p>这里bucket_size为2</p>
<hr>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">1</span>, <span class="string">&quot;a&quot;</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">2</span>, <span class="string">&quot;b&quot;</span>);</span><br></pre></td></tr></table></figure>
<p><img src="/2023/04/24/CMU445-Project1-ExtendibleHashTable%E6%80%BB%E7%BB%93/image-20230426112938666.png" alt="image-20230426112938666"></p>
<hr>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">3</span>, <span class="string">&quot;c&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>这时候bucket已经满了，正常情况下处理bucket满的策略有两个，double directory和split bucket only。</p>
<p>采用哪个策略需要看global depth和已满的bucket的local depth：</p>
<h3 id="Bucket-Full"><a href="#Bucket-Full" class="headerlink" title="Bucket Full"></a>Bucket Full</h3><ul>
<li>如果global depth == local depth，需要double directory。为什么呢，这是由两个depth代表的意思决定，两个相等，代表该bucket只有一个directory pointer指向，没有多余的pointer来指向了，只能是增加pointer。至于为什么是double呢，我想这里可能和二进制方便运算有关系吧，也许这样处理起来比较规整？</li>
<li>因为local depth不会大于global depth（两个相等时double directory，global depth都会+1），所以还有一种情况是global depth &gt; local depth，global depth代表了找到key需要看后几位bit，local depth代表了该bucket里面的key后local depth位都是相同的，当global depth &gt; local depth时，因为看的位数的差异，自然会有多个directory pointer指向这个bucket，那么这时候只需要split bucket就好了，有多余的pointer能指向新的bucket。</li>
</ul>
<h3 id="Double-Directory"><a href="#Double-Directory" class="headerlink" title="Double Directory"></a>Double Directory</h3><p>这里global depth和local depth相等，所以执行double directory逻辑，假设原先满的bucket是bucket j：</p>
<ol>
<li><p>global depth = global depth+1</p>
</li>
<li><p>directory翻倍，多出来的pointer按顺序指向原pointer</p>
<ul>
<li>比如原先directory size为4，double后变成8，那么多出来的<code>dir_[4]</code>指向<code>dir_[0]</code>，<code>dir_[5]</code>指向<code>dir_[1]</code>，6指向2，7指向3。</li>
<li>假设这里每个directory pointer只有一个对应的bucket，那么这里的操作就是每个bucket多了个pointer指向。</li>
<li>这里其实也好理解，比如原先pointer是<code>010</code>，double directory后，无非就是多了一位二进制，对应到directory要么是<code>0010</code>，要么是<code>1010</code>，因为local depth目前还没有到+1的地步，所以这两个先指向同一个bucket也可以。</li>
</ul>
</li>
<li><p>创建一个新的bucket z，设置bucket j、bucket z的local depth=global depth</p>
</li>
<li><p>对bucket j的里面所有的key执行rehash操作，判断该key是留在bucket j还是移动到bucket z。</p>
</li>
<li><p>重试插入操作，一般情况下会插入成功，某些情况下会插入失败，比如rehash时候所有的key还是在bucket j，这时候就需要重新执行插入逻辑，重新判断是需要 double directory还是split bucket。</p>
</li>
<li><p>一般情况下如果选择的hash函数合适的话，那么一次split即可。极端情况下会退化生成静态hash那样解决冲突，同时应该设定最大的directory depth）。</p>
</li>
</ol>
<h3 id="Rehash"><a href="#Rehash" class="headerlink" title="Rehash"></a>Rehash</h3><p>rehash过程其实就是看bucket j里面所有的key是放在bucket j还是bucket z。在double directory的情况下，多看了一位，所以是新增二进制位（也可以说是从低到高第global depth/local depth位，此时global depth=local depth）为1的话就放在bucket z。</p>
<p>这里实现的方式有两种，一种是直接调用erase将key从bucket中移除，另外一种是使用先将key放到<code>hashmap&lt;directory index, value list&gt;</code>，然后根据hashmap的key重新将value分配到bucket，因为每次只涉及到两个bucket，所以hashmap的length不大于2，理想情况是2，极端情况是1，也就是上面讲的所有的key都还在bucket j。</p>
<p>因为directory中可能有多个index指向bucket j，所以这里还得更新下别的index指向。这里处理的逻辑是，遍历所有的index，如果这个index之前指向的是bucket j，但是对应的新增的二进制位是1的话，就需要将这个index指向bucket z。</p>
<h3 id="Insert-1"><a href="#Insert-1" class="headerlink" title="Insert"></a>Insert</h3><p>回到<code>table-&gt;Insert(3, &quot;c&quot;);</code>，此时执行double directory和Rehash逻辑</p>
<p><img src="/2023/04/24/CMU445-Project1-ExtendibleHashTable%E6%80%BB%E7%BB%93/image-20230506153403500.png" alt="image-20230506153403500"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">4</span>, <span class="string">&quot;d&quot;</span>);</span><br></pre></td></tr></table></figure>
<p><img src="/2023/04/24/CMU445-Project1-ExtendibleHashTable%E6%80%BB%E7%BB%93/image-20230506153552617.png" alt="image-20230506153552617"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">5</span>, <span class="string">&quot;e&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>需要插入index为01的位置，执行double directory逻辑</p>
<p><img src="/2023/04/24/CMU445-Project1-ExtendibleHashTable%E6%80%BB%E7%BB%93/image-20230506154531571.png" alt="image-20230506154531571"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">6</span>, <span class="string">&quot;f&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>此时需要插入index=10对应的bucket，该bucket已经满了，因为global depth &gt; local depth，所以执行split bucket逻辑即可。</p>
<h3 id="Split-Bucket"><a href="#Split-Bucket" class="headerlink" title="Split Bucket"></a>Split Bucket</h3><ol>
<li>创建一个新的bucket z，设置bucket j、bucket z的local depth= local depth + 1</li>
<li>对bucket j的里面所有的key执行rehash操作，判断该key是留在bucket j还是移动到bucket z。<ul>
<li>这里和double directory的逻辑有点区别，但是大体相似。这里看的是从低到高第local depth位是否为1，因为只变了local depth。同样也得处理多个index指向同一个bucket的情况。</li>
</ul>
</li>
<li>重试插入的操作和double directory操作一样</li>
</ol>
<h3 id="Insert-2"><a href="#Insert-2" class="headerlink" title="Insert"></a>Insert</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">6</span>, <span class="string">&quot;f&quot;</span>);</span><br></pre></td></tr></table></figure>
<p><img src="/2023/04/24/CMU445-Project1-ExtendibleHashTable%E6%80%BB%E7%BB%93/image-20230506160229598.png" alt="image-20230506160229598"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">7</span>, <span class="string">&quot;g&quot;</span>);</span><br></pre></td></tr></table></figure>
<p><img src="/2023/04/24/CMU445-Project1-ExtendibleHashTable%E6%80%BB%E7%BB%93/image-20230506160405852.png" alt="image-20230506160405852"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">8</span>, <span class="string">&quot;h&quot;</span>);</span><br></pre></td></tr></table></figure>
<p><img src="/2023/04/24/CMU445-Project1-ExtendibleHashTable%E6%80%BB%E7%BB%93/image-20230506160507560.png" alt="image-20230506160507560"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">9</span>, <span class="string">&quot;i&quot;</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> <span class="function">local <span class="title">depth</span><span class="params">(<span class="number">2</span>)</span>: [<span class="number">4</span>,<span class="number">8</span>,]</span></span><br><span class="line"><span class="function"><span class="number">1</span> local depth(<span class="number">3</span>): [<span class="number">1</span>,<span class="number">9</span>,]</span></span><br><span class="line"><span class="function"><span class="number">2</span> local depth(<span class="number">2</span>): [<span class="number">2</span>,<span class="number">6</span>,]</span></span><br><span class="line"><span class="function"><span class="number">3</span> local depth(<span class="number">2</span>): [<span class="number">3</span>,<span class="number">7</span>,]</span></span><br><span class="line"><span class="function"><span class="number">4</span> local depth(<span class="number">2</span>): [<span class="number">4</span>,<span class="number">8</span>,]</span></span><br><span class="line"><span class="function"><span class="number">5</span> local depth(<span class="number">3</span>): [<span class="number">5</span>,]</span></span><br><span class="line"><span class="function"><span class="number">6</span> local depth(<span class="number">2</span>): [<span class="number">2</span>,<span class="number">6</span>,]</span></span><br><span class="line"><span class="function"><span class="number">7</span> local depth(<span class="number">2</span>): [<span class="number">3</span>,<span class="number">7</span>,]</span></span><br></pre></td></tr></table></figure>
<h2 id="Case2"><a href="#Case2" class="headerlink" title="Case2"></a>Case2</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> table = std::make_unique&lt;ExtendibleHashTable&lt;<span class="type">int</span>, <span class="type">int</span>&gt;&gt;(<span class="number">2</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">4</span>, <span class="number">0</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">12</span>, <span class="number">0</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">16</span>, <span class="number">0</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">64</span>, <span class="number">0</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">31</span>, <span class="number">0</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">10</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">51</span>, <span class="number">0</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">15</span>, <span class="number">0</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">18</span>, <span class="number">0</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">20</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">7</span>, <span class="number">0</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">23</span>, <span class="number">0</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">11</span>, <span class="number">0</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">19</span>, <span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br></pre></td><td class="code"><pre><span class="line">[Init] bucket_size:<span class="number">2</span></span><br><span class="line">===========[Insert]key: <span class="number">4</span> ,value:<span class="number">0</span></span><br><span class="line">[FindBucket] key:<span class="number">4</span>, dir_index:<span class="number">0</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">0</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">0</span>): [<span class="number">4</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">12</span> ,value:<span class="number">0</span></span><br><span class="line">[FindBucket] key:<span class="number">12</span>, dir_index:<span class="number">0</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">0</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">0</span>): [<span class="number">4</span>,<span class="number">12</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">16</span> ,value:<span class="number">0</span></span><br><span class="line">[FindBucket] key:<span class="number">16</span>, dir_index:<span class="number">0</span></span><br><span class="line">key_bucket is full</span><br><span class="line">global_depth: <span class="number">0</span> local depth: <span class="number">0</span></span><br><span class="line">before RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">0</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">0</span>): [<span class="number">4</span>,<span class="number">12</span>,]</span><br><span class="line">after RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">1</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">4</span>,<span class="number">12</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): []</span><br><span class="line">[FindBucket] key:<span class="number">16</span>, dir_index:<span class="number">0</span></span><br><span class="line">key_bucket is full</span><br><span class="line">global_depth: <span class="number">1</span> local depth: <span class="number">1</span></span><br><span class="line">before RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">1</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">4</span>,<span class="number">12</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): []</span><br><span class="line">after RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">2</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">4</span>,<span class="number">12</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): []</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): []</span><br><span class="line">[FindBucket] key:<span class="number">16</span>, dir_index:<span class="number">0</span></span><br><span class="line">key_bucket is full</span><br><span class="line">global_depth: <span class="number">2</span> local depth: <span class="number">2</span></span><br><span class="line">before RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">2</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">4</span>,<span class="number">12</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): []</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): []</span><br><span class="line">after RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): []</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): []</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): []</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">1</span>): []</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">1</span>): []</span><br><span class="line">[FindBucket] key:<span class="number">16</span>, dir_index:<span class="number">0</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): []</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): []</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">1</span>): []</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">1</span>): []</span><br><span class="line">===========[Insert]key: <span class="number">64</span> ,value:<span class="number">0</span></span><br><span class="line">[FindBucket] key:<span class="number">64</span>, dir_index:<span class="number">0</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): []</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): []</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">1</span>): []</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">1</span>): []</span><br><span class="line">===========[Insert]key: <span class="number">31</span> ,value:<span class="number">0</span></span><br><span class="line">[FindBucket] key:<span class="number">31</span>, dir_index:<span class="number">7</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,]</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">10</span> ,value:<span class="number">0</span></span><br><span class="line">[FindBucket] key:<span class="number">10</span>, dir_index:<span class="number">2</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,]</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">51</span> ,value:<span class="number">0</span></span><br><span class="line">[FindBucket] key:<span class="number">51</span>, dir_index:<span class="number">3</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,]</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">15</span> ,value:<span class="number">0</span></span><br><span class="line">[FindBucket] key:<span class="number">15</span>, dir_index:<span class="number">7</span></span><br><span class="line">key_bucket is full</span><br><span class="line">global_depth: <span class="number">3</span> local depth: <span class="number">1</span></span><br><span class="line">before RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,]</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,]</span><br><span class="line">after RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">31</span>,<span class="number">51</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">31</span>,<span class="number">51</span>,]</span><br><span class="line">[FindBucket] key:<span class="number">15</span>, dir_index:<span class="number">7</span></span><br><span class="line">key_bucket is full</span><br><span class="line">global_depth: <span class="number">3</span> local depth: <span class="number">2</span></span><br><span class="line">before RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">31</span>,<span class="number">51</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">31</span>,<span class="number">51</span>,]</span><br><span class="line">after RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">51</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">31</span>,]</span><br><span class="line">[FindBucket] key:<span class="number">15</span>, dir_index:<span class="number">7</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">51</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">31</span>,<span class="number">15</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">18</span> ,value:<span class="number">0</span></span><br><span class="line">[FindBucket] key:<span class="number">18</span>, dir_index:<span class="number">2</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">51</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">31</span>,<span class="number">15</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">20</span> ,value:<span class="number">0</span></span><br><span class="line">[FindBucket] key:<span class="number">20</span>, dir_index:<span class="number">4</span></span><br><span class="line">key_bucket is full</span><br><span class="line">global_depth: <span class="number">3</span> local depth: <span class="number">3</span></span><br><span class="line">before RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">51</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">31</span>,<span class="number">15</span>,]</span><br><span class="line">after RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">4</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">51</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">4</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">31</span>,<span class="number">15</span>,]</span><br><span class="line"><span class="number">8</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">9</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">10</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">11</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">51</span>,]</span><br><span class="line"><span class="number">12</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">12</span>,]</span><br><span class="line"><span class="number">13</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">14</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">15</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">31</span>,<span class="number">15</span>,]</span><br><span class="line">[FindBucket] key:<span class="number">20</span>, dir_index:<span class="number">4</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">4</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">51</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">4</span>,<span class="number">20</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">31</span>,<span class="number">15</span>,]</span><br><span class="line"><span class="number">8</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">9</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">10</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">11</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">51</span>,]</span><br><span class="line"><span class="number">12</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">12</span>,]</span><br><span class="line"><span class="number">13</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">14</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">15</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">31</span>,<span class="number">15</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">7</span> ,value:<span class="number">0</span></span><br><span class="line">[FindBucket] key:<span class="number">7</span>, dir_index:<span class="number">7</span></span><br><span class="line">key_bucket is full</span><br><span class="line">global_depth: <span class="number">4</span> local depth: <span class="number">3</span></span><br><span class="line">before RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">4</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">51</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">4</span>,<span class="number">20</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">31</span>,<span class="number">15</span>,]</span><br><span class="line"><span class="number">8</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">9</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">10</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">11</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">51</span>,]</span><br><span class="line"><span class="number">12</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">12</span>,]</span><br><span class="line"><span class="number">13</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">14</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">15</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">31</span>,<span class="number">15</span>,]</span><br><span class="line">after RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">4</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">51</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">4</span>,<span class="number">20</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">4</span>): []</span><br><span class="line"><span class="number">8</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">9</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">10</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">11</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">51</span>,]</span><br><span class="line"><span class="number">12</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">12</span>,]</span><br><span class="line"><span class="number">13</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">14</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">15</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">31</span>,<span class="number">15</span>,]</span><br><span class="line">[FindBucket] key:<span class="number">7</span>, dir_index:<span class="number">7</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">4</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">51</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">4</span>,<span class="number">20</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">7</span>,]</span><br><span class="line"><span class="number">8</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">9</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">10</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">11</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">51</span>,]</span><br><span class="line"><span class="number">12</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">12</span>,]</span><br><span class="line"><span class="number">13</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">14</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">15</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">31</span>,<span class="number">15</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">23</span> ,value:<span class="number">0</span></span><br><span class="line">[FindBucket] key:<span class="number">23</span>, dir_index:<span class="number">7</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">4</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">51</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">4</span>,<span class="number">20</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">7</span>,<span class="number">23</span>,]</span><br><span class="line"><span class="number">8</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">9</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">10</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">11</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">51</span>,]</span><br><span class="line"><span class="number">12</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">12</span>,]</span><br><span class="line"><span class="number">13</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">14</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">15</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">31</span>,<span class="number">15</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">11</span> ,value:<span class="number">0</span></span><br><span class="line">[FindBucket] key:<span class="number">11</span>, dir_index:<span class="number">11</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">4</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">51</span>,<span class="number">11</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">4</span>,<span class="number">20</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">7</span>,<span class="number">23</span>,]</span><br><span class="line"><span class="number">8</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">9</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">10</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">11</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">51</span>,<span class="number">11</span>,]</span><br><span class="line"><span class="number">12</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">12</span>,]</span><br><span class="line"><span class="number">13</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">14</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">15</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">31</span>,<span class="number">15</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">19</span> ,value:<span class="number">0</span></span><br><span class="line">[FindBucket] key:<span class="number">19</span>, dir_index:<span class="number">3</span></span><br><span class="line">key_bucket is full</span><br><span class="line">global_depth: <span class="number">4</span> local depth: <span class="number">3</span></span><br><span class="line">before RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">4</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">51</span>,<span class="number">11</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">4</span>,<span class="number">20</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">7</span>,<span class="number">23</span>,]</span><br><span class="line"><span class="number">8</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">9</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">10</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">11</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">51</span>,<span class="number">11</span>,]</span><br><span class="line"><span class="number">12</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">12</span>,]</span><br><span class="line"><span class="number">13</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">14</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">15</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">31</span>,<span class="number">15</span>,]</span><br><span class="line">after RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">4</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">51</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">4</span>,<span class="number">20</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">7</span>,<span class="number">23</span>,]</span><br><span class="line"><span class="number">8</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">9</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">10</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">11</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">11</span>,]</span><br><span class="line"><span class="number">12</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">12</span>,]</span><br><span class="line"><span class="number">13</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">14</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">15</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">31</span>,<span class="number">15</span>,]</span><br><span class="line">[FindBucket] key:<span class="number">19</span>, dir_index:<span class="number">3</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">4</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">51</span>,<span class="number">19</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">4</span>,<span class="number">20</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">7</span>,<span class="number">23</span>,]</span><br><span class="line"><span class="number">8</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">9</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">10</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">11</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">11</span>,]</span><br><span class="line"><span class="number">12</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">12</span>,]</span><br><span class="line"><span class="number">13</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">14</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">15</span> local <span class="built_in">depth</span>(<span class="number">4</span>): [<span class="number">31</span>,<span class="number">15</span>,]</span><br></pre></td></tr></table></figure>
<h2 id="Case3"><a href="#Case3" class="headerlink" title="Case3"></a>Case3</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">TEST</span>(ExtendibleHashTableTest, GetNumBuckets2) &#123;</span><br><span class="line"><span class="keyword">auto</span> table = std::make_unique&lt;ExtendibleHashTable&lt;<span class="type">int</span>, std::string&gt;&gt;(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">4</span>, <span class="string">&quot;a&quot;</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">12</span>, <span class="string">&quot;a&quot;</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">16</span>, <span class="string">&quot;a&quot;</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">64</span>, <span class="string">&quot;a&quot;</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">31</span>, <span class="string">&quot;a&quot;</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">10</span>, <span class="string">&quot;a&quot;</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">51</span>, <span class="string">&quot;a&quot;</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">15</span>, <span class="string">&quot;a&quot;</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">18</span>, <span class="string">&quot;a&quot;</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">20</span>, <span class="string">&quot;a&quot;</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">7</span>, <span class="string">&quot;a&quot;</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">23</span>, <span class="string">&quot;a&quot;</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br></pre></td><td class="code"><pre><span class="line">[Init] bucket_size:<span class="number">4</span></span><br><span class="line">===========[Insert]key: <span class="number">4</span> ,value:a</span><br><span class="line">[FindBucket] key:<span class="number">4</span>, dir_index:<span class="number">0</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">0</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">0</span>): [<span class="number">4</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">12</span> ,value:a</span><br><span class="line">[FindBucket] key:<span class="number">12</span>, dir_index:<span class="number">0</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">0</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">0</span>): [<span class="number">4</span>,<span class="number">12</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">16</span> ,value:a</span><br><span class="line">[FindBucket] key:<span class="number">16</span>, dir_index:<span class="number">0</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">0</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">0</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">16</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">64</span> ,value:a</span><br><span class="line">[FindBucket] key:<span class="number">64</span>, dir_index:<span class="number">0</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">0</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">0</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">31</span> ,value:a</span><br><span class="line">[FindBucket] key:<span class="number">31</span>, dir_index:<span class="number">0</span></span><br><span class="line">key_bucket is full</span><br><span class="line">global_depth: <span class="number">0</span> local depth: <span class="number">0</span></span><br><span class="line">before RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">0</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">0</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line">after RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">1</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): []</span><br><span class="line">[FindBucket] key:<span class="number">31</span>, dir_index:<span class="number">1</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">1</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">10</span> ,value:a</span><br><span class="line">[FindBucket] key:<span class="number">10</span>, dir_index:<span class="number">0</span></span><br><span class="line">key_bucket is full</span><br><span class="line">global_depth: <span class="number">1</span> local depth: <span class="number">1</span></span><br><span class="line">before RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">1</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,]</span><br><span class="line">after RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">2</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,]</span><br><span class="line">[FindBucket] key:<span class="number">10</span>, dir_index:<span class="number">2</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">2</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">51</span> ,value:a</span><br><span class="line">[FindBucket] key:<span class="number">51</span>, dir_index:<span class="number">3</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">2</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">15</span> ,value:a</span><br><span class="line">[FindBucket] key:<span class="number">15</span>, dir_index:<span class="number">3</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">2</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">18</span> ,value:a</span><br><span class="line">[FindBucket] key:<span class="number">18</span>, dir_index:<span class="number">2</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">2</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">20</span> ,value:a</span><br><span class="line">[FindBucket] key:<span class="number">20</span>, dir_index:<span class="number">0</span></span><br><span class="line">key_bucket is full</span><br><span class="line">global_depth: <span class="number">2</span> local depth: <span class="number">2</span></span><br><span class="line">before RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">2</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line">after RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line">[FindBucket] key:<span class="number">20</span>, dir_index:<span class="number">4</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">20</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">7</span> ,value:a</span><br><span class="line">[FindBucket] key:<span class="number">7</span>, dir_index:<span class="number">7</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">20</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,]</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">23</span> ,value:a</span><br><span class="line">[FindBucket] key:<span class="number">23</span>, dir_index:<span class="number">7</span></span><br><span class="line">key_bucket is full</span><br><span class="line">global_depth: <span class="number">3</span> local depth: <span class="number">1</span></span><br><span class="line">before RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">20</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,]</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">31</span>,<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,]</span><br><span class="line">after RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">31</span>,<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">20</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">31</span>,<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,]</span><br><span class="line">[FindBucket] key:<span class="number">23</span>, dir_index:<span class="number">7</span></span><br><span class="line">key_bucket is full</span><br><span class="line">global_depth: <span class="number">3</span> local depth: <span class="number">2</span></span><br><span class="line">before RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">31</span>,<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">20</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">31</span>,<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,]</span><br><span class="line">after RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">51</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">20</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">31</span>,<span class="number">15</span>,<span class="number">7</span>,]</span><br><span class="line">[FindBucket] key:<span class="number">23</span>, dir_index:<span class="number">7</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">51</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">20</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">31</span>,<span class="number">15</span>,<span class="number">7</span>,<span class="number">23</span>,]</span><br></pre></td></tr></table></figure>
<h2 id="Case4"><a href="#Case4" class="headerlink" title="Case4"></a>Case4</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> table = std::make_unique&lt;ExtendibleHashTable&lt;<span class="type">int</span>, <span class="type">int</span>&gt;&gt;(<span class="number">4</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">4</span>, <span class="number">4</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">12</span>, <span class="number">12</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">16</span>, <span class="number">16</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">64</span>, <span class="number">64</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">5</span>, <span class="number">5</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">51</span>, <span class="number">51</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">15</span>, <span class="number">15</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">18</span>, <span class="number">18</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">7</span>, <span class="number">7</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">21</span>, <span class="number">21</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">11</span>, <span class="number">11</span>);</span><br><span class="line">table-&gt;<span class="built_in">Insert</span>(<span class="number">19</span>, <span class="number">19</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br></pre></td><td class="code"><pre><span class="line">[Init] bucket_size:<span class="number">4</span></span><br><span class="line">===========[Insert]key: <span class="number">4</span> ,value:<span class="number">4</span></span><br><span class="line">[FindBucket] key:<span class="number">4</span>, dir_index:<span class="number">0</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">0</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">0</span>): [<span class="number">4</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">12</span> ,value:<span class="number">12</span></span><br><span class="line">[FindBucket] key:<span class="number">12</span>, dir_index:<span class="number">0</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">0</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">0</span>): [<span class="number">4</span>,<span class="number">12</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">16</span> ,value:<span class="number">16</span></span><br><span class="line">[FindBucket] key:<span class="number">16</span>, dir_index:<span class="number">0</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">0</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">0</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">16</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">64</span> ,value:<span class="number">64</span></span><br><span class="line">[FindBucket] key:<span class="number">64</span>, dir_index:<span class="number">0</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">0</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">0</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">5</span> ,value:<span class="number">5</span></span><br><span class="line">[FindBucket] key:<span class="number">5</span>, dir_index:<span class="number">0</span></span><br><span class="line">key_bucket is full</span><br><span class="line">global_depth: <span class="number">0</span> local depth: <span class="number">0</span></span><br><span class="line">before RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">0</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">0</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line">after RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">1</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): []</span><br><span class="line">[FindBucket] key:<span class="number">5</span>, dir_index:<span class="number">1</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">1</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">10</span> ,value:<span class="number">10</span></span><br><span class="line">[FindBucket] key:<span class="number">10</span>, dir_index:<span class="number">0</span></span><br><span class="line">key_bucket is full</span><br><span class="line">global_depth: <span class="number">1</span> local depth: <span class="number">1</span></span><br><span class="line">before RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">1</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,]</span><br><span class="line">after RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">2</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): []</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,]</span><br><span class="line">[FindBucket] key:<span class="number">10</span>, dir_index:<span class="number">2</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">2</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">51</span> ,value:<span class="number">51</span></span><br><span class="line">[FindBucket] key:<span class="number">51</span>, dir_index:<span class="number">3</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">2</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,<span class="number">51</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,<span class="number">51</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">15</span> ,value:<span class="number">15</span></span><br><span class="line">[FindBucket] key:<span class="number">15</span>, dir_index:<span class="number">3</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">2</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">18</span> ,value:<span class="number">18</span></span><br><span class="line">[FindBucket] key:<span class="number">18</span>, dir_index:<span class="number">2</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">2</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">20</span> ,value:<span class="number">20</span></span><br><span class="line">[FindBucket] key:<span class="number">20</span>, dir_index:<span class="number">0</span></span><br><span class="line">key_bucket is full</span><br><span class="line">global_depth: <span class="number">2</span> local depth: <span class="number">2</span></span><br><span class="line">before RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">2</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line">after RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line">[FindBucket] key:<span class="number">20</span>, dir_index:<span class="number">4</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">20</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,<span class="number">51</span>,<span class="number">15</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">7</span> ,value:<span class="number">7</span></span><br><span class="line">[FindBucket] key:<span class="number">7</span>, dir_index:<span class="number">7</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">20</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,]</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">21</span> ,value:<span class="number">21</span></span><br><span class="line">[FindBucket] key:<span class="number">21</span>, dir_index:<span class="number">5</span></span><br><span class="line">key_bucket is full</span><br><span class="line">global_depth: <span class="number">3</span> local depth: <span class="number">1</span></span><br><span class="line">before RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">20</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,]</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">1</span>): [<span class="number">5</span>,<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,]</span><br><span class="line">after RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">5</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">20</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">5</span>,]</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,]</span><br><span class="line">[FindBucket] key:<span class="number">21</span>, dir_index:<span class="number">5</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">5</span>,<span class="number">21</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">20</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">5</span>,<span class="number">21</span>,]</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">11</span> ,value:<span class="number">11</span></span><br><span class="line">[FindBucket] key:<span class="number">11</span>, dir_index:<span class="number">3</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">5</span>,<span class="number">21</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,<span class="number">11</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">20</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">5</span>,<span class="number">21</span>,]</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,<span class="number">11</span>,]</span><br><span class="line">===========[Insert]key: <span class="number">19</span> ,value:<span class="number">19</span></span><br><span class="line">[FindBucket] key:<span class="number">19</span>, dir_index:<span class="number">3</span></span><br><span class="line">key_bucket is full</span><br><span class="line">global_depth: <span class="number">3</span> local depth: <span class="number">2</span></span><br><span class="line">before RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">5</span>,<span class="number">21</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,<span class="number">11</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">20</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">5</span>,<span class="number">21</span>,]</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">51</span>,<span class="number">15</span>,<span class="number">7</span>,<span class="number">11</span>,]</span><br><span class="line">after RedistributeBucket</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">5</span>,<span class="number">21</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">51</span>,<span class="number">11</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">20</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">5</span>,<span class="number">21</span>,]</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">15</span>,<span class="number">7</span>,]</span><br><span class="line">[FindBucket] key:<span class="number">19</span>, dir_index:<span class="number">3</span></span><br><span class="line">insert success</span><br><span class="line">PrintDir:</span><br><span class="line">dir_ global depth: <span class="number">3</span></span><br><span class="line"><span class="number">0</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">16</span>,<span class="number">64</span>,]</span><br><span class="line"><span class="number">1</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">5</span>,<span class="number">21</span>,]</span><br><span class="line"><span class="number">2</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">3</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">51</span>,<span class="number">11</span>,<span class="number">19</span>,]</span><br><span class="line"><span class="number">4</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">4</span>,<span class="number">12</span>,<span class="number">20</span>,]</span><br><span class="line"><span class="number">5</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">5</span>,<span class="number">21</span>,]</span><br><span class="line"><span class="number">6</span> local <span class="built_in">depth</span>(<span class="number">2</span>): [<span class="number">10</span>,<span class="number">18</span>,]</span><br><span class="line"><span class="number">7</span> local <span class="built_in">depth</span>(<span class="number">3</span>): [<span class="number">15</span>,<span class="number">7</span>,]</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://greenhathg.github.io">GreenHatHg</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://greenhathg.github.io/2023/04/24/CMU445-Project1-ExtendibleHashTable%E6%80%BB%E7%BB%93/">https://greenhathg.github.io/2023/04/24/CMU445-Project1-ExtendibleHashTable%E6%80%BB%E7%BB%93/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://greenhathg.github.io" target="_blank">GreenHatHGのBlog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/cmu445/">cmu445</a><a class="post-meta__tags" href="/tags/extendiblehash/">extendiblehash</a></div><div class="post-share"><div class="social-share" data-image="https://images.unsplash.com/photo-1621761836815-6e43911fbcfc?ixlib=rb-1.2.1&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1171&amp;q=80" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2023/06/06/CMU445-Project1-LRU-K%E6%80%BB%E7%BB%93/" title="CMU445-Project1-LRU-K总结"><img class="cover" src="https://images.unsplash.com/photo-1619342802099-027bc73e30eb?ixlib=rb-1.2.1&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1171&amp;q=80" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">CMU445-Project1-LRU-K总结</div></div><div class="info-2"><div class="info-item-1">https://15445.courses.cs.cmu.edu/fall2022/project1/ DB的Buffer Replacement Policies中的LRU和Clock算法都容易受到sequential flooding的影响，对于LRU来讲，使用LRU-K算法能够缓解这个问题。 LRU-K This component is responsible for tracking page usage in the buffer pool. The LRU-K algorithm evicts a frame whose backward k-distance is maximum of all frames in the replacer. Backward k-distance is computed as the difference in time between current timestamp and the timestamp of kth previous access. A frame with less than k historical...</div></div></div></a><a class="pagination-related" href="/2023/02/15/CMU445-Project0-primer/" title="CMU445-Project0-primer"><img class="cover" src="https://images.unsplash.com/photo-1620880762296-f9787c134352?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=1171&amp;q=80" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">CMU445-Project0-primer</div></div><div class="info-2"><div class="info-item-1">背景 链接：https://15445.courses.cs.cmu.edu/fall2022/project0/ 目的：因为后续的项目都是使用c++编写，所以提供一个入门c++项目给新手熟悉下。 要求：给出基本的代码框架，填充核心代码实现trie树的插入、查找、删除。最终要求为并发版本，但是不要求性能，所以可以一把大锁直接梭哈。 环境：使用clang-12，c++17标准 使用到的常见cpp知识点： unique_ptr管理内存资源 类的常见知识，比如构造函数，类方法等 rvalue与move shared_mutex    trie树简单记录下trie树 作用又称前缀树或字典树，存储公共前缀字符串比较高效，一般用于字符串查找。 在项目中的应用是将(key, value)插入到trie树，类似hashmap的作用，但是使用trie树实现。 普通的trie树如下：  项目中要求实现的trie树：  上面是将(ab, 1)和(ac,...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2023/02/15/CMU445-Project0-primer/" title="CMU445-Project0-primer"><img class="cover" src="https://images.unsplash.com/photo-1620880762296-f9787c134352?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1171&q=80" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2025-06-15</div><div class="info-item-2">CMU445-Project0-primer</div></div><div class="info-2"><div class="info-item-1">背景 链接：https://15445.courses.cs.cmu.edu/fall2022/project0/ 目的：因为后续的项目都是使用c++编写，所以提供一个入门c++项目给新手熟悉下。 要求：给出基本的代码框架，填充核心代码实现trie树的插入、查找、删除。最终要求为并发版本，但是不要求性能，所以可以一把大锁直接梭哈。 环境：使用clang-12，c++17标准 使用到的常见cpp知识点： unique_ptr管理内存资源 类的常见知识，比如构造函数，类方法等 rvalue与move shared_mutex    trie树简单记录下trie树 作用又称前缀树或字典树，存储公共前缀字符串比较高效，一般用于字符串查找。 在项目中的应用是将(key, value)插入到trie树，类似hashmap的作用，但是使用trie树实现。 普通的trie树如下：  项目中要求实现的trie树：  上面是将(ab, 1)和(ac,...</div></div></div></a><a class="pagination-related" href="/2023/07/01/CMU445-Project1-BufferPoolManagerInstance%E6%80%BB%E7%BB%93/" title="CMU445-Project1-BufferPoolManagerInstance总结"><img class="cover" src="https://images.unsplash.com/photo-1620880762258-273a49958090?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1171&q=80" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2025-06-15</div><div class="info-item-2">CMU445-Project1-BufferPoolManagerInstance总结</div></div><div class="info-2"><div class="info-item-1">Buffer PoolDisk-Oriented DBMS什么是buffer pool，buffer pool有什么用（针对Disk-Oriented DBMS）   The database is all on disk, and the data in the database files is organized into pages.  In order to operate on the data the DBMS needs to bring the data into memory. It does this by having a buffer pool that manages the movement back and forth between disk and memory.  The DBMS also have an execution engine that will execute queries.  The execution engine will ask the buffer pool for a specific page, and...</div></div></div></a><a class="pagination-related" href="/2023/06/06/CMU445-Project1-LRU-K%E6%80%BB%E7%BB%93/" title="CMU445-Project1-LRU-K总结"><img class="cover" src="https://images.unsplash.com/photo-1619342802099-027bc73e30eb?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1171&q=80" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2025-06-15</div><div class="info-item-2">CMU445-Project1-LRU-K总结</div></div><div class="info-2"><div class="info-item-1">https://15445.courses.cs.cmu.edu/fall2022/project1/ DB的Buffer Replacement Policies中的LRU和Clock算法都容易受到sequential flooding的影响，对于LRU来讲，使用LRU-K算法能够缓解这个问题。 LRU-K This component is responsible for tracking page usage in the buffer pool. The LRU-K algorithm evicts a frame whose backward k-distance is maximum of all frames in the replacer. Backward k-distance is computed as the difference in time between current timestamp and the timestamp of kth previous access. A frame with less than k historical...</div></div></div></a><a class="pagination-related" href="/2024/01/05/CMU445-Project2-BPlusTree-Delete-Single-Threaded/" title="CMU445-Project2-BPlusTree-Delete-Single-threaded"><img class="cover" src="https://images.unsplash.com/photo-1619342802099-027bc73e30eb?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1171&q=80" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2025-06-15</div><div class="info-item-2">CMU445-Project2-BPlusTree-Delete-Single-threaded</div></div><div class="info-2"><div class="info-item-1">单线程版 B+树删除操作 Delete在删除时用到两个重要的属性是，也就是node最多有多少个search-key value，最少有多少个，根据这个可以决定采用什么措施去维持整个树的平衡  Each leaf can hold up to n−1 search-key values. We allow leaf nodes to contain as few as ⌈(n−1)/2⌉ search-key values. Each nonleaf node in the tree (other than the root) has between ⌈n/2⌉ and n children.  下面举例课本中的删除过程，粗略了解一下删除的过程： 已经有一棵B+树如下，从leaf node可知N=4 所以leaf node最多放3个search-key value，最少2个search-key value；nonleaf node最多4个children，最少2个children。   Coalesce一开始要删除Srini这个Index，首先查找到Srini位于哪个leaf...</div></div></div></a><a class="pagination-related" href="/2023/12/12/CMU445-Project2-BPlusTree-Insert/" title="CMU445-Project1-BPlusTree-Insert-Single-threaded"><img class="cover" src="https://images.unsplash.com/photo-1619075120066-02024cb853bd?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1171&q=80" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2025-06-15</div><div class="info-item-2">CMU445-Project1-BPlusTree-Insert-Single-threaded</div></div><div class="info-2"><div class="info-item-1">单线程版 B+树插入操作 Overview Index: The index in database system is responsible for fast data retrieval without having to search through every row in a database table, providing the basis for both rapid random lookups (快速随机查找) and efficient access of ordered records. B+Tree dynamic index structure:  It is a balanced tree in which the internal pages direct the search and leaf pages contains actual data entries.B+ Tree properties   Each node except root can have a maximum of M children and at least...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://avatars0.githubusercontent.com/u/34258355?s=460&amp;u=eb0a1ce09dd045532464cb42f020e8ba1d025b6c&amp;v=4" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">GreenHatHg</div><div class="author-info-description">巴拉巴拉能量! rm -rf / --no-preserve-root</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">205</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">241</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/GreenHatHG"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/GreenHatHG" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:greenhat2333@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Why"><span class="toc-number">1.</span> <span class="toc-text">Why</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Concepts"><span class="toc-number">2.</span> <span class="toc-text">Concepts</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Struct"><span class="toc-number">3.</span> <span class="toc-text">Struct</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Insert"><span class="toc-number">4.</span> <span class="toc-text">Insert</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Structure"><span class="toc-number">4.1.</span> <span class="toc-text">Structure</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Init"><span class="toc-number">4.2.</span> <span class="toc-text">Init</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Indexof"><span class="toc-number">4.3.</span> <span class="toc-text">Indexof</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Case1"><span class="toc-number">4.4.</span> <span class="toc-text">Case1</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Bucket-Full"><span class="toc-number">4.4.1.</span> <span class="toc-text">Bucket Full</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Double-Directory"><span class="toc-number">4.4.2.</span> <span class="toc-text">Double Directory</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Rehash"><span class="toc-number">4.4.3.</span> <span class="toc-text">Rehash</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Insert-1"><span class="toc-number">4.4.4.</span> <span class="toc-text">Insert</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Split-Bucket"><span class="toc-number">4.4.5.</span> <span class="toc-text">Split Bucket</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Insert-2"><span class="toc-number">4.4.6.</span> <span class="toc-text">Insert</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Case2"><span class="toc-number">4.5.</span> <span class="toc-text">Case2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Case3"><span class="toc-number">4.6.</span> <span class="toc-text">Case3</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Case4"><span class="toc-number">4.7.</span> <span class="toc-text">Case4</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/06/15/Xueqiu_Forever-summary-2025-06-15-14-30-24/" title="[Xueqiu_Forever] 发言时段总结 - 2025-06-15 14:30"><img src="https://images.unsplash.com/photo-1619342802099-027bc73e30eb?ixlib=rb-1.2.1&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1171&amp;q=80" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="[Xueqiu_Forever] 发言时段总结 - 2025-06-15 14:30"/></a><div class="content"><a class="title" href="/2025/06/15/Xueqiu_Forever-summary-2025-06-15-14-30-24/" title="[Xueqiu_Forever] 发言时段总结 - 2025-06-15 14:30">[Xueqiu_Forever] 发言时段总结 - 2025-06-15 14:30</a><time datetime="2025-06-15T14:30:24.000Z" title="发表于 2025-06-15 14:30:24">2025-06-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/15/Xueqiu_ManBuJiaZhiXian-summary-2025-06-15-04-30-29/" title="[Xueqiu_ManBuJiaZhiXian] 发言时段总结 - 2025-06-15 04:30"><img src="https://images.unsplash.com/photo-1621761836815-6e43911fbcfc?ixlib=rb-1.2.1&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1171&amp;q=80" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="[Xueqiu_ManBuJiaZhiXian] 发言时段总结 - 2025-06-15 04:30"/></a><div class="content"><a class="title" href="/2025/06/15/Xueqiu_ManBuJiaZhiXian-summary-2025-06-15-04-30-29/" title="[Xueqiu_ManBuJiaZhiXian] 发言时段总结 - 2025-06-15 04:30">[Xueqiu_ManBuJiaZhiXian] 发言时段总结 - 2025-06-15 04:30</a><time datetime="2025-06-15T04:30:29.000Z" title="发表于 2025-06-15 04:30:29">2025-06-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/15/Xueqiu_GuanWoCai-summary-2025-06-15-04-30-27/" title="[Xueqiu_GuanWoCai] 发言时段总结 - 2025-06-15 04:30"><img src="https://images.unsplash.com/photo-1620880762296-f9787c134352?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=1171&amp;q=80" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="[Xueqiu_GuanWoCai] 发言时段总结 - 2025-06-15 04:30"/></a><div class="content"><a class="title" href="/2025/06/15/Xueqiu_GuanWoCai-summary-2025-06-15-04-30-27/" title="[Xueqiu_GuanWoCai] 发言时段总结 - 2025-06-15 04:30">[Xueqiu_GuanWoCai] 发言时段总结 - 2025-06-15 04:30</a><time datetime="2025-06-15T04:30:27.000Z" title="发表于 2025-06-15 04:30:27">2025-06-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/15/Xueqiu_Forever-summary-2025-06-15-04-30-24/" title="[Xueqiu_Forever] 发言时段总结 - 2025-06-15 04:30"><img src="https://images.unsplash.com/photo-1619342802099-027bc73e30eb?ixlib=rb-1.2.1&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1171&amp;q=80" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="[Xueqiu_Forever] 发言时段总结 - 2025-06-15 04:30"/></a><div class="content"><a class="title" href="/2025/06/15/Xueqiu_Forever-summary-2025-06-15-04-30-24/" title="[Xueqiu_Forever] 发言时段总结 - 2025-06-15 04:30">[Xueqiu_Forever] 发言时段总结 - 2025-06-15 04:30</a><time datetime="2025-06-15T04:30:24.000Z" title="发表于 2025-06-15 04:30:24">2025-06-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/15/Xueqiu_OKaSiJiZhangShiFu-summary-2025-06-15-04-30-24/" title="[Xueqiu_OKaSiJiZhangShiFu] 发言时段总结 - 2025-06-15 04:30"><img src="https://images.unsplash.com/photo-1620880762258-273a49958090?ixlib=rb-1.2.1&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1171&amp;q=80" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="[Xueqiu_OKaSiJiZhangShiFu] 发言时段总结 - 2025-06-15 04:30"/></a><div class="content"><a class="title" href="/2025/06/15/Xueqiu_OKaSiJiZhangShiFu-summary-2025-06-15-04-30-24/" title="[Xueqiu_OKaSiJiZhangShiFu] 发言时段总结 - 2025-06-15 04:30">[Xueqiu_OKaSiJiZhangShiFu] 发言时段总结 - 2025-06-15 04:30</a><time datetime="2025-06-15T04:30:24.000Z" title="发表于 2025-06-15 04:30:24">2025-06-15</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2025 By GreenHatHg</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.5</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://blog-twikoo-khaki.vercel.app',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = (el = document, path = location.pathname) => {
    twikoo.init({
      el: el.querySelector('#twikoo-wrap'),
      envId: 'https://blog-twikoo-khaki.vercel.app',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      },
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    GLOBAL_CONFIG_SITE.pageType === 'post' && getCount()

    isShuoshuo && (window.shuoshuoComment.destroyTwikoo = () => {
      if (el.children.length) {
        el.innerHTML = ''
        el.classList.add('no-comment')
      }
    })
  }

  const loadTwikoo = (el, path) => {
    if (typeof twikoo === 'object') setTimeout(() => init(el, path), 0)
    else btf.getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(() => init(el, path))
  }

  if (isShuoshuo) {
    'Twikoo' === 'Twikoo'
      ? window.shuoshuoComment = { loadComment: loadTwikoo }
      : window.loadOtherComment = loadTwikoo
    return
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="true" data-click="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>